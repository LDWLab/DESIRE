/**
 * pdb-topology-viewer
 * @version 2.0.0
 * @link https://github.com/PDBeurope/pdb-topology-viewer
 * @license Apache 2.0
 */
/**
 * Copyright 2020-2021 Mandar Deshpande <mandar@ebi.ac.uk>
 * European Bioinformatics Institute (EBI, http://www.ebi.ac.uk/)
 * European Molecular Biology Laboratory (EMBL, http://www.embl.de/)
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 */
!function(){"use strict";"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=o,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,r,o,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=r,this._x2=o,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,r,o,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=o,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,r,o,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=r,this._angle=o,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,r,o){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,r,o){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,r,o,s){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,r,o,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,r,o,s){return new window.SVGPathSegArcRel(void 0,t,e,i,n,r,o,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path"),i=(e.setAttribute("d",this.getAttribute("d")),e.pathSegList.numberOfItems-1);if(i<=0)return 0;for(;e.pathSegList.removeItem(i),!(t>e.getTotalLength())&&0<--i;);return i})),"SVGPathSegList"in window&&"appendItem"in window.SVGPathSegList.prototype||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){var e;this._pathElement&&(e=!1,t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d"))))},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(t){i?(i=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}function i(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}var n=this,r=(e.prototype.appendSegment=function(t){this.pathSegList.push(t)},i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,i=1,n=0,r=1,o=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var a=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=a)for(var h=this._currentIndex-1,u=1;a<=h;)e+=u*(this._string.charAt(h--)-"0"),u*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t=(t*=10)+(this._string.charAt(this._currentIndex)-"0"),this._currentIndex++}var c=e+n;if(c*=r,t&&(c*=Math.pow(10,o*t)),s!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}},new e),o=new i(t);if(!o.initialCommandIsMoveTo())return[];for(;o.hasMoreData();){var s=o.parseSegment();if(!s)return[];r.appendSegment(s)}return r.pathSegList})}();var __awaiter=this&&this.__awaiter||function(t,s,a,h){return new(a=a||Promise)(function(i,e){function n(t){try{o(h.next(t))}catch(t){e(t)}}function r(t){try{o(h.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,r)}o((h=h.apply(t,s||[])).next())})},__generator=this&&this.__generator||function(n,r){var o,s,a,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(i){return function(t){var e=[i,t];if(o)throw new TypeError("Generator is already executing.");for(;h;)try{if(o=1,s&&(a=2&e[0]?s.return:e[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,s=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(!(a=0<(a=h.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){h=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){h.label=e[1];break}if(6===e[0]&&h.label<a[1]){h.label=a[1],a=e;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(e);break}a[2]&&h.ops.pop(),h.trys.pop();continue}e=r.call(n,h)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},interpolateLinearly=window.interpolateLinearly,RdPu=window.RdPu,YlGn=window.YlGn,mapped_aa_properties=window.mapped_aa_properties,aaPropertyConstants=window.aaPropertyConstants,aaColorData=window.aaColorData,masking_range_array=window.masking_range_array,masked_array=window.masked_array,parsePVData=window.parsePVData,viewerInstance=window.viewerInstance,selectSections_RV1=window.selectSections_RV1,rv3VUEcomponent=window.vm,filterRange=window.filterRange||"-10000,10000",PdbTopologyViewerPlugin=function(){function t(){this.defaultColours={domainSelection:"rgb(255,0,0)",mouseOver:"rgb(105,105,105)",borderColor:"rgb(0,0,0)",qualityGreen:"rgb(0,182.85714285714286,0)",qualityRed:"rgb(291.42857142857144,0,0)",qualityYellow:"rgb(364.2857142857143,364.2857142857143,75.71428571428572)",qualityRiboVision:"rgb(203,203,203)",qualityOrange:"rgb(291.42857142857144,121.42857142857143,0)",qualityBlank:"rgb(255,255,255)"},this.displayStyle="border:1px solid #696969; width:100%; height:100%;",this.errorStyle="border:1px solid #696969; height:54%; padding-top:46%; text-align:center; font-weight:bold;",this.menuStyle="top:460;position:relative;height:38px;line-height:38px;background-color:#96c9dc;padding: 0 10px;font-size:16px; color: black;",this.svgWidth=100,this.svgHeight=100,this.pvAPI=!1,this.subscribeEvents=!0,this.createNewEvent=function(t){var n={};return t.forEach(function(t,e){var i;"function"==typeof MouseEvent?i=new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(i=document.createEvent("MouseEvents")).initEvent(t,!0,!0),n[t]=i}),n},this.getAnnotationFromMappings=function(){var r=this;if(void 0!==this.apiData[1])for(var o=this.apiData[1][this.entryId],s=["UniProt","CATH","Pfam","SCOP","RiboVision"],a=this,t=0;t<3;t++)!function(t){if(void 0!==o[s[t]]&&0!==Object.entries(o[s[t]]).length){var e,i=[],n=o[s[t]];for(e in n)n[e].mappings.forEach(function(t){t.entity_id==r.entityId&&t.chain_id==r.chainId&&i.push({start:t.start.residue_number,end:t.end.residue_number,color:void 0})});0<i.length&&a.domainTypes.push({label:s[t],data:i})}}(t)},this.createDomainDropdown=function(){var i,t;void 0===this.domainTypes&&(this.domainTypes=[{label:"Select data",data:null}],this.getAnnotationFromRibovision(mapped_aa_properties),this.selectedDomain=this.domainTypes[0]),1<this.domainTypes.length&&(i="",this.domainTypes.forEach(function(t,e){i=i+'<option value="'+e+'">'+t.label+"</option>"}),(t=this.targetEle.querySelector(".menuSelectbox")).innerHTML=i,t.addEventListener("change",this.displayDomain.bind(this)),t.addEventListener("change",this.updateProperty.bind(this)),this.targetEle.querySelector(".resetIcon").addEventListener("click",this.resetDisplay.bind(this)),this.targetEle.querySelector(".saveSVG").addEventListener("click",this.saveSVG.bind(this)),rv3VUEcomponent.topology_loaded=!0)}}return t.prototype.render=function(t,e){var i=this;e&&void 0!==e.displayStyle&&null!=e.displayStyle&&(this.displayStyle+=e.displayStyle),e&&void 0!==e.errorStyle&&null!=e.errorStyle&&(this.errorStyle+=e.errorStyle),e&&void 0!==e.menuStyle&&null!=e.menuStyle&&(this.menuStyle+=e.menuStyle),this.targetEle=t,this.targetEle&&(this.targetEle.innerHTML=""),t&&e&&e.entryId&&e.entityId?(0==e.subscribeEvents&&(this.subscribeEvents=!1),1==e.pvAPI&&(this.pvAPI=!0),this.entityId=e.entityId,this.entryId=e.entryId.toLowerCase(),this.pv_suffix=null!=(t=e.pv_suffix)?t:"",void 0===e.chainId||null==e.chainId?this.getObservedResidues(this.entryId).then(function(t){void 0!==t&&void 0!==t[i.entryId]&&void 0!==t[i.entryId][i.entityId]?(i.chainId=t[i.entryId][i.entityId][0].chain_id,i.initPainting()):i.displayError()}):(this.chainId=e.chainId,this.initPainting())):this.displayError("param")},t.prototype.initPainting=function(){var e=this;this.alreadyRan||(this.alreadyRan=!0,this.getApiData(this.entryId,this.chainId).then(function(t){t&&(void 0===t[0]||void 0===t[2]||void 0===t[4]?e.displayError():(e.apiData=t,e.pdbevents=e.createNewEvent(["PDB.topologyViewer"+e.pv_suffix+".click","PDB.topologyViewer"+e.pv_suffix+".mouseover","PDB.topologyViewer"+e.pv_suffix+".mouseout"]),e.getPDBSequenceArray(e.apiData[0][e.entryId]),e.drawTopologyStructures(),e.createDomainDropdown(),e.subscribeEvents&&e.subscribeWcEvents()))}))},t.prototype.displayError=function(t){t="param"==t?"Error: Invalid Parameters!":"Error: Data not available!",this.targetEle&&(this.targetEle.innerHTML='<div style="'+this.errorStyle+'">'+t+"</div>")},t.prototype.getObservedResidues=function(i){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("https://www.ebi.ac.uk/pdbe/api/pdb/entry/observed_residues_ratio/"+i)];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()];case 3:return e=t.sent(),console.log("Couldn't load UniProt variants",e),[3,4];case 4:return[2]}})})},t.prototype.getApiData=function(i,n){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=["https://www.ebi.ac.uk/pdbe/api/pdb/entry/entities/"+i,"https://www.ebi.ac.uk/pdbe/api/mappings/"+i,"https://www.ebi.ac.uk/pdbe/api/topology/entry/"+i,"https://www.ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/"+i,"https://www.ebi.ac.uk/pdbe/api/pdb/entry/polymer_coverage/"+i+"/chain/"+n],this.pvAPI&&(e=["/proOrigamiTopology/ENTITY-"+i+"-"+this.entityId+"-"+n,"/proOrigamiTopology/EMPTY","/proOrigamiTopology/TOPOLOGY-"+i+"-"+this.entityId+"-"+n,"/proOrigamiTopology/EMPTY","/proOrigamiTopology/COVERAGE-"+i+"-"+this.entityId+"-"+n]),[2,Promise.all(e.map(function(t){return fetch(t)})).then(function(t){return Promise.all(t.map(function(t){if(200==t.status)return t.json()}))})]})})},t.prototype.getPDBSequenceArray=function(t){for(var e=t.length,i=0;i<e;i++)t[i].entity_id==this.entityId&&(this.sequenceArr=t[i].sequence.split(""))},t.prototype.chunkArray=function(t,e){for(var i=[],n=0,r=t.length;n<r;)i.push(t.slice(n,n+=e));return i},t.prototype.getDomainRange=function(){var t,e=this,i=[],n=this.apiData[2][this.entryId][this.entityId][this.chainId],r=Number(filterRange.split(",")[0]),o=Number(filterRange.split(",")[1]);if(5e3<o){for(var s=this.apiData[2][this.entryId][this.entityId][this.chainId].coils,a=this.apiData[2][this.entryId][this.entityId][this.chainId].helices,h=this.apiData[2][this.entryId][this.entityId][this.chainId].strands,u=0;u<a.length;u++)(a[u].start<r&&a[u].stop<r||a[u].start>o&&a[u].stop>o)&&(this.apiData[2][this.entryId][this.entityId][this.chainId].helices.splice(u,1),u--);for(u=0;u<h.length;u++)(h[u].stop<r||h[u].start>o)&&(this.apiData[2][this.entryId][this.entityId][this.chainId].strands.splice(u,1),u--);for(u=0;u<s.length;u++)(s[u].stop<r&&-1!=s[u].start||s[u].start>o&&s[u].stop>o)&&(this.apiData[2][this.entryId][this.entityId][this.chainId].coils.splice(u,1),u--);for(s=this.apiData[2][this.entryId][this.entityId][this.chainId].coils,u=0;u<s.length;u++)-1==s[0].start&&(this.apiData[2][this.entryId][this.entityId][this.chainId].coils.splice(0,1),u--);for(u=s.length-1;0<=u;u--)-1==s[s.length-1].start&&(this.apiData[2][this.entryId][this.entityId][this.chainId].coils.splice(s.length-1,1),u--);for(var c,d,s=this.apiData[2][this.entryId][this.entityId][this.chainId].coils,u=0;u<1;u++)s[0].start<r&&s[0].stop>=r&&(c=r-s[0].start-1,this.apiData[2][this.entryId][this.entityId][this.chainId].coils[0].path.splice(0,2*((d=2<c?2:c)-1)),this.apiData[2][this.entryId][this.entityId][this.chainId].coils[0].start=this.apiData[2][this.entryId][this.entityId][this.chainId].coils[0].start+c+1);for(var l,u=s.length-1;u>s.length-2;u--)s[s.length-1].start<=o&&s[s.length-1].stop>=o&&(2<(d=c=s[s.length-1].stop-1-o)&&(d=2),l=s[s.length-1].path.length,console.log(c,l),this.apiData[2][this.entryId][this.entityId][this.chainId].coils[s.length-1].path.splice(l-2*(d-1)-1,2*(d-1)),this.apiData[2][this.entryId][this.entityId][this.chainId].coils[s.length-1].stop=this.apiData[2][this.entryId][this.entityId][this.chainId].coils[s.length-1].stop-c-1)}for(t in n)n[t]&&n[t].forEach(function(t){void 0!==t.path&&0<t.path.length&&(i=i.concat(e.chunkArray(t.path,2)))});this.xScale=d3.scaleLinear().domain([d3.min(i,function(t){return t[0]}),d3.max(i,function(t){return t[0]})]).range([1,this.svgWidth-1]),this.yScale=d3.scaleLinear().domain([d3.min(i,function(t){return t[1]}),d3.max(i,function(t){return t[1]})]).range([1,this.svgHeight-1]),this.zoom=d3.zoom().on("zoom",function(){return e.zoomDraw()})},t.prototype.drawStrandSubpaths=function(t,e,i){for(var n=this,r=e-t+1,o=(this.scaledPointsArr[7]-this.scaledPointsArr[1])/r,s=[],a=0;a<r;a++){var h={type:"strands",elementIndex:i};0===a?(h.residue_number=t,h.pathData=[this.scaledPointsArr[4],this.scaledPointsArr[1],this.scaledPointsArr[4],this.scaledPointsArr[1]+o,this.scaledPointsArr[8],this.scaledPointsArr[1]+o,this.scaledPointsArr[8],this.scaledPointsArr[13]]):(h.residue_number=t+a,h.pathData=[s[a-1].pathData[2],s[a-1].pathData[3],s[a-1].pathData[2],s[a-1].pathData[3]+o,s[a-1].pathData[4],s[a-1].pathData[5]+o,s[a-1].pathData[4],s[a-1].pathData[5]]),s.push(h)}this.svgEle.selectAll(".subpath-strands"+i).remove(),this.svgEle.selectAll(".subpath-strands"+i).data(s).enter().append("path").attr("class",function(t,e){return"strandsSubPath subpath-strands"+i+" topo_res_"+t.residue_number}).attr("d",function(t,e){return"M "+t.pathData.join(" ")+" Z"}).attr("stroke","#111").attr("stroke-width","0").attr("fill","white").attr("fill-opacity","0").on("mouseover",function(t){n.mouseoverAction(this,t)}).on("mousemove",function(t){n.mouseoverAction(this,t)}).on("mouseout",function(t){n.mouseoutAction(this,t)}).on("click",function(t){n.clickAction(t)})},t.prototype.drawStrandMaskShape=function(i){for(var n=this.scaledPointsArr,t=[],e=[],r=(this.pvAPI?(t=[1,8,10,12,13],e=[0,2,3,4,5,7,9,11],n[0]>n[6]&&(t=[0,2,3,4,5,7,9,11],e=[1,8,10,12,13])):(t=[7,8,10,12],e=[0,1,2,3,4,5,9,11,13],n[0]>n[6]&&(t=[0,1,2,3,4,5,9,11,13],e=[7,8,10,12])),t.length),o=0;o<r;o++)n[t[o]]=n[t[o]]+.3;for(var s=e.length,a=0;a<s;a++)n[e[a]]=n[e[a]]-.3;n[14]=n[8],n[15]=n[13],n[16]=n[8],n[17]=n[7],n[18]=n[4],n[19]=n[7],n[20]=n[4],n[21]=n[1],this.svgEle.selectAll(".maskpath-strands"+i).remove(),this.svgEle.selectAll(".maskpath-strands"+i).data([n]).enter().append("path").attr("class",function(t,e){return"strandMaskPath maskpath-strands"+i}).attr("d",function(t,e){return"M"+n.join(" ")+"Z"}).attr("stroke","#111").attr("stroke-width",.3).attr("fill","white").attr("stroke-opacity",0)},t.prototype.renderTooltip=function(t,e){var i,n,r=d3.select(".pdbTopologyTooltip");null==r._groups[0][0]&&(r=d3.select("body").append("div").attr("class","pdbTopologyTooltip").attr("style","display: none;width: auto;position: absolute;background: #fff;padding: 5px;border: 1px solid #666;border-radius: 5px;box-shadow: 5px 6px 5px 0 rgba(0,0,0,.17);font-size: .9em;color: #555;z-index: 998;")),"show"===e?(e=d3.event.pageX,i=d3.event.pageY,n="Residue "+t.residue_number+" ("+this.sequenceArr[t.residue_number-1]+")",void 0!==t.tooltipMsg&&(n=void 0!==t.tooltipPosition&&"postfix"===t.tooltipPosition?n+" "+t.tooltipMsg:t.tooltipMsg+" "+n),r.html(n).style("display","block").style("top",i+15+"px").style("left",e+10+"px")):r.style("display","none")},t.prototype.dispatchEvent=function(t,e,i){var n=this.targetEle;void 0!==i&&(n=i),void 0!==e&&(this.pdbevents[t].eventData=e),n.dispatchEvent(this.pdbevents[t])},t.prototype.clickAction=function(t){1==masked_array[t.residue_number-1]&&this.dispatchEvent("PDB.topologyViewer"+this.pv_suffix+".click",{residueNumber:t.residue_number,type:t.type,entryId:this.entryId,entityId:this.entityId,filterRange:filterRange,chainId:this.chainId})},t.prototype.mouseoverAction=function(t,e){t=d3.select(t),"NaN"!=e.tooltipMsg&&(this.renderTooltip(e,"show"),"strands"!==e.type&&"helices"!==e.type||t.attr("fill",this.defaultColours.mouseOver).attr("fill-opacity","0.3"),"coils"===e.type&&t.attr("stroke",this.defaultColours.mouseOver).attr("stroke-width",1),this.dispatchEvent("PDB.topologyViewer"+this.pv_suffix+".mouseover",{residueNumber:e.residue_number,type:e.type,entryId:this.entryId,entityId:this.entityId,filterRange:filterRange,chainId:this.chainId}))},t.prototype.mouseoutAction=function(t,e){var i="white",n=0,r=.3,t=d3.select(t);this.renderTooltip("","hide"),t.classed("coloured")?"coils"===e.type&&0!=masked_array.length&&0==masked_array[e.residue_number]?i=this.defaultColours.borderColor:(i=t.attr("data-color"),r=n=1):"coils"===e.type&&(i=this.defaultColours.borderColor),"strands"!==e.type&&"helices"!==e.type||t.attr("fill",i).attr("fill-opacity",n),"coils"===e.type&&(t.attr("stroke",i).attr("stroke-opacity",1),t.attr("stroke",i).attr("stroke-width",r)),this.dispatchEvent("PDB.topologyViewer"+this.pv_suffix+".mouseout",{filterRange:filterRange,entryId:this.entryId,entityId:this.entityId,chainId:this.chainId})},t.prototype.drawHelicesSubpaths=function(t,e,i,n){for(var r=this,o=-5,s=(this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(o=5),e-t+1),o=0,a=(this.scaledPointsArr[9]-o-this.scaledPointsArr[3])/s,h=0,u=(o=this.svgEle.select(".helices"+i).node().getBBox().height+a/2)/s,h=(a=(o-u/2)/s)-u/10,c=(this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(h=-(o+u)),[]),d={},l=0;l<s;l++)d={type:"helices"},0===l?(this.scaledPointsArr[3]>this.scaledPointsArr[9]?d.residue_number=e:d.residue_number=t,d.pathData=[this.scaledPointsArr[0],this.scaledPointsArr[3]+h,this.scaledPointsArr[4],this.scaledPointsArr[3]+h,this.scaledPointsArr[4],this.scaledPointsArr[3]+h+a,this.scaledPointsArr[0],this.scaledPointsArr[3]+h+a]):(this.scaledPointsArr[3]>this.scaledPointsArr[9]?d.residue_number=e-l:d.residue_number=t+l,d.pathData=[c[l-1].pathData[6],c[l-1].pathData[7],c[l-1].pathData[4],c[l-1].pathData[5],c[l-1].pathData[4],c[l-1].pathData[5]+a,c[l-1].pathData[6],c[l-1].pathData[5]+a]),c.push(d);this.svgEle.selectAll(".subpath-helices"+i).remove(),this.svgEle.selectAll(".subpath-helices"+i).data(c).enter().append("path").attr("class",function(t){return"helicesSubPath subpath-helices"+i+" topo_res_"+t.residue_number}).attr("d",function(t){return"M"+t.pathData.join(" ")+" Z"}).attr("stroke","#111").attr("stroke-width","0").attr("fill","white").attr("fill-opacity","0").on("mouseover",function(t){r.mouseoverAction(this,t)}).on("mousemove",function(t){r.mouseoverAction(this,t)}).on("mouseout",function(t){r.mouseoutAction(this,t)}).on("click",function(t){r.clickAction(t)})},t.prototype.drawHelicesMaskShape=function(e){var t=[[this.scaledPointsArr[0]-.3,this.scaledPointsArr[1],this.scaledPointsArr[2],this.scaledPointsArr[3]-.3,this.scaledPointsArr[4]+.3,this.scaledPointsArr[5],this.scaledPointsArr[4]+.3,this.scaledPointsArr[3],this.scaledPointsArr[0]-.3,this.scaledPointsArr[3]],[this.scaledPointsArr[6]+.3,this.scaledPointsArr[7],this.scaledPointsArr[8],this.scaledPointsArr[9]+.3,this.scaledPointsArr[10]-.3,this.scaledPointsArr[11],this.scaledPointsArr[10]-.3,this.scaledPointsArr[9],this.scaledPointsArr[6]+.3,this.scaledPointsArr[9]]];this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(t=[[this.scaledPointsArr[0]-.3,this.scaledPointsArr[1],this.scaledPointsArr[2],this.scaledPointsArr[3]+2,this.scaledPointsArr[4]+.3,this.scaledPointsArr[5],this.scaledPointsArr[4]+.3,this.scaledPointsArr[3],this.scaledPointsArr[0]-.3,this.scaledPointsArr[3]],[this.scaledPointsArr[6]+.3,this.scaledPointsArr[7],this.scaledPointsArr[8],this.scaledPointsArr[9]-.3,this.scaledPointsArr[10]-.3,this.scaledPointsArr[11],this.scaledPointsArr[10]-.3,this.scaledPointsArr[9],this.scaledPointsArr[6]+.3,this.scaledPointsArr[9]]]),this.svgEle.selectAll(".maskpath-helices"+e).remove(),this.svgEle.selectAll(".maskpath-helices"+e).data(t).enter().append("path").attr("class",function(t){return"helicesMaskPath maskpath-helices"+e}).attr("d",function(t){return"M"+t[0]+" "+t[1]+" Q"+t[2]+" "+t[3]+" "+t[4]+" "+t[5]+" L"+t[6]+" "+t[7]+" "+t[8]+" "+t[9]+" Z"}).attr("stroke","#111").attr("stroke-width",.3).attr("fill","white").attr("stroke-opacity",0)},t.prototype.drawCoilsSubpaths=function(t,e,i){var n=this,r=this.svgEle.select(".coils"+i),o=e-t+1,s=r.node().getTotalLength()/o,a=[],h=void 0,u=void 0,c={};if(1==o)c={residue_number:t,type:"coils",pathData:n.scaledPointsArr,elementIndex:i},a.push(c);else for(var d=0;d<o;d++){var l=s*(d+1),p=r.node().getPointAtLength(l),l=r.node().getPathSegAtLength(l),c={residue_number:t+d,type:"coils",elementIndex:i};1===l?c.pathData=n.scaledPointsArr.slice(0,2):(void 0===u?c.pathData=n.scaledPointsArr.slice(0,2*l):(c.pathData=n.scaledPointsArr.slice(2*u,2*l),c.pathData.unshift(h.x,h.y)),h=p,u=l),c.pathData=c.pathData.concat([p.x,p.y]),a.push(c)}-1!==t&&-1!==e&&(this.svgEle.selectAll(".subpath-coils"+i).remove(),this.svgEle.selectAll(".subpath-coils"+i).data(a).enter().append("path").attr("class",function(t){return"coilsSubPath subpath-coils"+i+" topo_res_"+t.residue_number}).attr("d",function(t){return"M "+t.pathData.join(" ")}).attr("stroke",this.defaultColours.borderColor).attr("stroke-width",.3).attr("fill","none").attr("stroke-opacity","1").on("mouseover",function(t){n.mouseoverAction(this,t)}).on("mousemove",function(t){n.mouseoverAction(this,t)}).on("mouseout",function(t){n.mouseoutAction(this,t)}).on("click",function(t){n.clickAction(t)}),this.svgEle.selectAll(".coils"+i).attr("stroke-opacity",0));var S,e=this.apiData[2][this.entryId][this.entityId][this.chainId].terms,g=this.apiData[2][this.entryId][this.entityId][this.chainId].coils.length;0===i?(this.svgEle.selectAll(".terminal_N").remove(),this.svgEle.selectAll(".terminal_N").data([e[0]]).enter().append("text").attr("class","terminals terminal_N").attr("text-anchor","middle").text("N").attr("x",a[0].pathData[0]).attr("y",a[0].pathData[1]).attr("stroke","#0000ff").attr("stroke-width","0.3").attr("font-size","3px").attr("style","-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: normal; font-family: Arial;")):i===g-1&&(g=a[o-1].pathData.length,S=-2,a[o-1].pathData[g-1]>a[o-1].pathData[g-3]&&(S=2),this.svgEle.selectAll(".terminal_C").remove(),this.svgEle.selectAll(".terminal_C").data([e[1]]).enter().append("text").attr("class","terminals terminal_C").attr("text-anchor","middle").text("C").attr("x",a[o-1].pathData[g-2]).attr("y",a[o-1].pathData[g-1]+S).attr("stroke","#ff0000").attr("stroke-width","0.3").attr("font-size","3px").attr("style","-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: normal; font-family: Arial;"))},t.prototype.getAdjustedStartAndStop=function(t,e){return null==e?null:"helices"!=t&&"coils"!=t&&"strands"!=t||-1===e.start?[e.start,e.stop]:e.stop<Number(filterRange.split(",")[0])||e.start>Number(filterRange.split(",")[1])?null:"helices"===t||"strands"===t?[e.start,e.stop]:e.stop>Number(filterRange.split(",")[1])?[e.start,Number(filterRange.split(",")[1])]:e.start<Number(filterRange.split(",")[0])?[Number(filterRange.split(",")[0]),e.stop]:[e.start,e.stop]},t.prototype.drawTopologyStructures=function(){var u=this,t=(this.targetEle.innerHTML='<div style="'+this.displayStyle+'">\n            <div class="svgSection" style="position:absolute;width:100%;height:460;"></div>\n            <div style="'+this.menuStyle+'">\n                <a style="color: black;border-bottom:none; cursor:pointer;margin-left: 16px;" target="_blank" href="https://pdbe.org/'+this.entryId+'">'+this.entryId+'</a> | <span class="menuDesc">Entity '+this.entityId+" | Chain "+this.chainId.toUpperCase()+'</span>\n                <div class="menuOptions" style="float:right;margin-right: 20px;">\n                    <select class="menuSelectbox" style="margin-right: 10px;"><option value="">Select</option></select>\n                    <img class="saveSVG" src="static/alignments/png/Save.png" style="height:15px; width: 15px; border:0;position: relative;margin-right: 15px;cursor:pointer;" title="saveSVG" />\n\n                    <img class="resetIcon" src="static/alignments/png/refresh.png" style="height:15px; width: 15px; border:0;position: absolute;margin-top: 11px;cursor:pointer;" title="Reset view" />\n                </div>\n            </div>\n        </div>',this.targetEle.offsetWidth),e=this.targetEle.offsetHeight;0==t&&(t=this.targetEle.parentElement.offsetWidth),0==e&&this.targetEle.parentElement.offsetHeight,t<=330&&(this.targetEle.querySelector(".menuDesc").innerText=this.entityId+" | "+this.chainId.toUpperCase()),this.targetEle.querySelector(".svgSection").innerHTML='<svg preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100" style="width:calc(100%-5px);height:calc(100%-20px);margin:10px 0;"><g class="topoSvg" transform="scale(0.88)"></g></svg>',this.svgEle=d3.select(this.targetEle).select(".topoSvg"),this.getDomainRange(),this.scaledPointsArr=[],this.svgEle.call(this.zoom).on("contextmenu",function(t,e){d3.event.preventDefault()});var i,n=this.apiData[2][this.entryId][this.entityId][this.chainId],c=[];for(i in n.helices.forEach(function(t,e){var i=0,n=t.path[0]+(t.path[2]-t.path[0])/2,i=1.3*t.minoraxis*2,n=(t.path[1]>t.path[3]&&(i=1.3*t.minoraxis*-2),[t.path[0],t.path[1],n,t.path[1]-i,t.path[2],t.path[1],t.path[2],t.path[3],n,t.path[3]+i,t.path[0],t.path[3]]);t.path=n,null!=u.getAdjustedStartAndStop("helices",t)&&c.push([Math.round(t.path[2]),t.path[3],t.path[6]])}),n.strands.forEach(function(t,e){null!=u.getAdjustedStartAndStop("strands",t)&&(t.path[9]>t.path[1]?c.push([Math.round(t.path[6]),t.path[1],t.path[9]]):c.push([Math.round(t.path[6]),t.path[9],t.path[1]]))}),n){var r=function(a){var h=n[a];return h?void h.forEach(function(s,t){if(void 0!==s.path&&0<s.path.length&&null!=u.getAdjustedStartAndStop(a,s)){var e=u.getAdjustedStartAndStop(a,s)[0],i=u.getAdjustedStartAndStop(a,s)[1],n=!1;if(-1==e&&-1==i&&"coils"===a){for(var r=0,o=0;o<c.length;o++)(Math.round(s.path[0])==c[o][0]&&(Math.abs(s.path[1]-c[o][1])<20||Math.abs(s.path[1]-c[o][2])<20)||Math.round(s.path[s.path.length-2])==c[o][0]&&(Math.abs(s.path[s.path.length-1]-c[o][1])<20||Math.abs(s.path[s.path.length-1]-c[o][2])<20))&&(r+=1);2==r&&(n=!0)}(-1!==e||"coils"===a&&-1===e&&-1===i&&null!=u.getAdjustedStartAndStop(a,h[t+1])&&null!=u.getAdjustedStartAndStop(a,h[t-1])||n)&&"terms"!==a&&(s.secStrType=a,s.pathIndex=t,n=u.svgEle.selectAll("path."+a+t).data([s]).enter().append("path").attr("class",function(){return-1===s.start&&-1===s.stop&&"terms"!==a?"dashedEle topologyEle "+a+" "+a+t+" topoEleRange_"+s.start+"-"+s.stop:"topologyEle "+a+" "+a+t+" topoEleRange_"+e+"-"+i}).attr("d",function(t){for(var e,i="M",n=s.path.length,r=!0,o=0;o<n;o++)"helices"!==a||2!==o&&8!==o||(i+=" Q"),("helices"===a&&6===o||"coils"===a&&s.path.length<12&&8===o)&&(i+=" L"),i+=r?" "+(e=u.xScale(s.path[o])):" "+(e=u.yScale(s.path[o])),u.scaledPointsArr.push(e),r=!r;return"strands"!==a&&"helices"!==a||(i+=" Z"),i}).attr("fill","none").attr("stroke-width",.3).attr("stroke",u.defaultColours.borderColor),-1===s.start&&-1===s.stop&&n.attr("stroke-dasharray","0.9"),"strands"===a&&(u.drawStrandSubpaths(e,i,t),u.drawStrandMaskShape(t),u.svgEle._groups[0][0].append(n.node())),"helices"===a&&(u.drawHelicesSubpaths(e,i,t,0),u.drawHelicesMaskShape(t),u.svgEle._groups[0][0].append(n.node())),"coils"===a&&u.drawCoilsSubpaths(e,i,t),u.scaledPointsArr=[])}}):{value:void 0}}(i);if("object"==typeof r)return r.value}this.svgEle._groups[0][0].append(this.svgEle.selectAll(".validationResidue").node())},t.prototype.zoomDraw=function(){var e=this,s=d3.event.transform.rescaleX(this.xScale),a=d3.event.transform.rescaleY(this.yScale),h=this,t=(h.scaledPointsArr=[],this.svgEle.selectAll(".topologyEle")),u=0,c=0,d=0,n=(t.each(function(t){d3.select(d3.select(this).node()).attr("d",function(t){u=t.pathIndex,c=t.start,d=t.stop;for(var e,i="M",n=t.path.length,r=!0,o=0;o<n;o++)"helices"!==t.secStrType||2!==o&&8!==o||(i+=" Q"),("helices"===t.secStrType&&6===o||"coils"===t.secStrType&&t.path.length<12&&8===o)&&(i+=" L"),i+=r?" "+(e=s(t.path[o])):" "+(e=a(t.path[o])),h.scaledPointsArr.push(e),r=!r;return"strands"!==t.secStrType&&"helices"!==t.secStrType||(i+=" Z"),i}),"helices"===t.secStrType?(h.drawHelicesSubpaths(c,d,u,0),h.drawHelicesMaskShape(u),h.svgEle._groups[0][0].append(d3.select(this).node())):"strands"===t.secStrType?(h.drawStrandSubpaths(c,d,u),h.drawStrandMaskShape(u),h.svgEle._groups[0][0].append(d3.select(this).node())):"coils"===t.secStrType&&h.drawCoilsSubpaths(c,d,u),h.scaledPointsArr=[]}),0);this.svgEle.selectAll(".validationResidue").attr("transform",function(t){var e=(t=h.svgEle.select(".topo_res_"+t.residue_number)).node().getBBox(),i=t.data(),t="strands"===i[0].type||"helices"===i[0].type?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:(i=t.node().getPointAtLength(t.node().getTotalLength()/2)).x,y:i.y};return n=e.height/2,"translate("+t.x+","+t.y+")"}).attr("d",d3.symbol().type(function(t,e){return d3.symbols[0]}).size(n)),this.svgEle.selectAll(".residueSelection").attr("d",function(t){var e=d3.select(this).data();return h.svgEle.select(".topo_res_"+e[0].residueNumber).attr("d")}),this.svgEle._groups[0][0].querySelectorAll(".coilsSubPath").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.svgEle._groups[0][0].querySelectorAll(".dashedEle").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.displayDomain("zoom"),this.svgEle._groups[0][0].querySelectorAll(".validationResidue").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.svgEle._groups[0][0].querySelectorAll(".residueSelection").forEach(function(t){return e.svgEle._groups[0][0].append(t)})},t.prototype.clearHighlight=function(){this.svgEle.selectAll(".residueHighlight").remove()},t.prototype.highlight=function(t,e,r,o){for(var s=this,a="#000000",h="#000000",u=.3,c=0,d=this,i=t;i<=e;i++){var n=function(e){var t=d.svgEle.select(".topo_res_"+e);if(t&&t._groups&&null==t._groups[0][0])return{value:void 0};var i=t.node(),n=t.data();r&&(a="string"==typeof r?h=r:(h=d3.rgb(r.r,r.g,r.b),d3.rgb(r.r,r.g,r.b))),"strands"!==n[0].type&&"helices"!==n[0].type?(a="none",u=2,c=.5):h="none",d.svgEle.append("path").data([{residueNumber:e}]).attr("class",function(t){return"click"==o?"residueSelection seletectedResidue_"+e:"residueHighlight highlightResidue_"+e}).attr("d",t.attr("d")).attr("fill",a).attr("fill-opacity",.5).attr("stroke",h).attr("stroke-opacity",c).attr("stroke-width",u).on("mouseover",function(t){s.mouseoverAction(i,n[0])}).on("mousemove",function(t){s.mouseoverAction(i,n[0])}).on("mouseout",function(t){s.mouseoutAction(i,n[0])}).on("click",function(t){s.clickAction(n[0])})}(i);if("object"==typeof n)return n.value}},t.prototype.drawValidationShape=function(t,e,i){var n,r,o,s=this,a=s.svgEle.select(".topo_res_"+t);null!=a._groups[0][0]&&(n=a.node().getBBox(),r=a.data(),o="strands"===r[0].type||"helices"===r[0].type?{x:n.x+n.width/2,y:n.y+n.height/2}:{x:(r=a.node().getPointAtLength(a.node().getTotalLength()/2)).x,y:r.y},a={residue_number:t,tooltipMsg:"Validation issue: RSRZ <br>",tooltipPosition:"prefix"},this.svgEle.append("path").attr("class","validationResidue rsrz_"+t).data([a]).attr("fill",i).attr("stroke","#000").attr("stroke-width",.3).attr("transform",function(t){return"translate("+o.x+","+o.y+")"}).attr("d",d3.symbol().type(function(t,e){return d3.symbols[0]}).size(n.height/2)).style("display","none").on("mouseover",function(t){s.mouseoverAction(this,t)}).on("mousemove",function(t){s.mouseoverAction(this,t)}).on("mouseout",function(t){s.mouseoutAction(this,t)}).on("click",function(t){s.clickAction(t)}))},t.prototype.getChainStartAndEnd=function(){if(this.apiData){for(var t=this.apiData[4][this.entryId].molecules[0].chains,i={start:0,end:0},e=t.length,n=0;n<e;n++)if(t[n].chain_id==this.chainId){t[n].observed.forEach(function(t,e){0==e?(i.start=t.start.residue_number,i.end=t.end.residue_number):(t.start.residue_number<i.start&&(i.start=t.start.residue_number),t.end.residue_number>i.end&&(i.end=t.end.residue_number))});break}return i}},t.prototype.create2D3DAnnotations=function(n,r,o,t,s,a){var h=this;if(t.forEach(function(t,e){var i;s<=e&&e<=a&&(i=o.get(e),selectSections_RV1.get(n).push({entity_id:h.entityId,start_residue_number:e,end_residue_number:e,color:i[1],sideChain:!1}),h.defaultColours.qualityRiboVision="rgb("+String(i[0].join(","))+")",i="rgb("+String(i[0].join(","))+")",r.push({start:e,end:e,color:i,tooltipMsg:Number.parseFloat(t).toPrecision(3),tooltipPosition:"prefix"}))}),t.size<mapped_aa_properties.get("Charge").length)for(var e=t.size-1;e<mapped_aa_properties.get("Charge").length;e++)selectSections_RV1.get(n).push({entity_id:h.entityId,start_residue_number:e,end_residue_number:e,color:{r:255,g:255,b:255},sideChain:!1});return r},t.prototype.getAnnotationFromRibovision=function(t){var s=this,a=this.getChainStartAndEnd();t&&t.forEach(function(t,e){var i=[{}],n=e,e=t,t=(selectSections_RV1.set(n,[]),Math.min.apply(Math,aaPropertyConstants.get(n))),r=Math.max.apply(Math,aaPropertyConstants.get(n)),o=aaColorData.get(n),t=(e=parsePVData(e,t,r,o))[0],r=e[1];selectSections_RV1.get(n).push({entity_id:s.entityId,focus:!0}),void 0!==r&&0<(i=s.create2D3DAnnotations(n,i,t,r,a.start,a.end)).length&&((o=s.domainTypes.filter(function(t){return t.label===n})[0])&&null!=o?o.data=i:s.domainTypes.push({label:n,data:i}))})},t.prototype.getAnnotationFromOutliers=function(){var e=this,r=this,t=this.getChainStartAndEnd(),o=[{start:t.start,end:t.end,color:r.defaultColours.qualityGreen,tooltipMsg:"No validation issue reported for "}],s=[],a=[0];void 0!==this.apiData[3]&&void 0!==(t=this.apiData[3][this.entryId])&&void 0!==t.molecules&&0<t.molecules.length&&(t.molecules.forEach(function(t){t.entity_id==e.entityId&&t.chains.forEach(function(t){t.chain_id==e.chainId&&t.models.forEach(function(t){t.residues.forEach(function(t){var e=r.defaultColours.qualityYellow,i="issue";if(1===t.outlier_types.length&&"RSRZ"===t.outlier_types[0])return e=r.defaultColours.qualityRed,r.drawValidationShape(t.residue_number,"circle",e),s.push(t.residue_number),void(-1<(n=a.indexOf(t.residue_number))?o[n].tooltipMsg=o[n].tooltipMsg.replace("<br>",", RSRZ<br>"):(o.push({start:parseInt(t.residue_number),end:parseInt(t.residue_number),color:r.defaultColours.qualityGreen,tooltipMsg:"Validation issue: RSRZ <br>",tooltipPosition:"prefix"}),a.push(t.residue_number)));1===t.outlier_types.length?e=r.defaultColours.qualityYellow:(e=2===t.outlier_types.length?r.defaultColours.qualityOrange:r.defaultColours.qualityRed,i="issues"),a.push(t.residue_number);var n="Validation "+i+": "+t.outlier_types.join(", ")+"<br>";-1<s.indexOf(t.residue_number)&&(n="Validation issues: "+t.outlier_types.join(", ")+", RSRZ<br>"),o.push({start:parseInt(t.residue_number),end:parseInt(t.residue_number),color:e,tooltipMsg:n,tooltipPosition:"prefix"})})})})}),0<o.length&&this.domainTypes.push({label:"Quality",data:o}))},t.prototype.updateProperty=function(){var t=this.targetEle.querySelector(".menuSelectbox"),t=parseInt(t.selectedIndex);rv3VUEcomponent.selected_property=this.domainTypes[t].label},t.prototype.resetTheme=function(){var n=this;this.svgEle.selectAll(".coloured").each(function(t){var e=d3.select(this),i=e.node();e.data()[0].tooltipMsg=void 0,e.data()[0].tooltipPosition=void 0,-1<(i=(e=d3.select(i).classed("coloured",!1)).attr("class").split(" ")).indexOf("strandsSubPath")||-1<i.indexOf("helicesSubPath")?e.attr("fill","white").attr("fill-opacity",0):e.attr("stroke",n.defaultColours.borderColor).attr("stroke-width",.3)}),this.svgEle.selectAll(".validationResidue").style("display","none")},t.prototype.changeResidueColor=function(e,i,t,n){void 0===i&&(i=this.defaultColours.domainSelection);var r=this.svgEle.select(".topo_res_"+e);null!=r._groups[0][0]&&(r.data()[0].tooltipMsg=t,r.data()[0].tooltipPosition=n,r.attr("stroke",function(t){return"coils"===t.type?i:"#111"}).attr("stroke-width",function(t){return"coils"===t.type&&!1===masked_array[e]?.3:"coils"===t.type?1:0}).attr("fill",function(t){return"coils"===t.type?"none":i}).attr("fill-opacity",function(t){return"coils"===t.type?0:1}).classed("coloured",!0).attr("data-color",i))},t.prototype.updateTheme=function(t){var i=this;t.forEach(function(t){for(var e=t.start;e<=t.end;e++)i.changeResidueColor(e,t.color,t.tooltipMsg,t.tooltipPosition)})},t.prototype.saveSVG=function(){var t=this.targetEle.querySelector(".topoSvg"),e=this.targetEle.querySelector(".svgSection"),i=t.cloneNode(!0),n=function(t){for(var e in void(t=document.createElementNS("http://www.w3.org/2000/svg","svg")))t.setAttributeNS(null,e.replace(/[0-9]/g,"o").replace(/\$/g,"d").replace(/\[/g,"b").replace(/[A-Z]/g,function(t,e,i,n){return"-"+t.toLowerCase()}),(void 0)[e]);return t}("svg");n.appendChild(i),t&&e&&e.appendChild(t),i="rv3Topology.svg",(e=n).setAttribute("xmlns","http://www.w3.org/2000/svg"),e=e.outerHTML,e=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',e],{type:"image/svg+xml;charset=utf-8"}),e=URL.createObjectURL(e),(t=document.createElement("a")).href=e,t.download=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)},t.prototype.displayDomain=function(t){var e,i,n=this.targetEle.querySelector(".menuSelectbox");(n=parseInt(n.value))?(n=this.domainTypes[n],i=Array.from(aaPropertyConstants.keys()),null!==n.data?(this.resetTheme(),this.updateTheme(n.data),i.includes(n.label)&&"zoom"!==t&&(i="-10000,10000"!=filterRange?(e=filterRange.split(","),selectSections_RV1.get(n.label).filter(function(t){if(t.start_residue_number>=e[0]&&t.start_residue_number<=e[1])return t})):selectSections_RV1.get(n.label),viewerInstance.visual.select({data:i,nonSelectedColor:{r:180,g:180,b:180}})),"Quality"===n.label&&this.svgEle.selectAll(".validationResidue").style("display","block")):"zoom"!==t&&this.resetTheme()):rv3VUEcomponent.colorSchemeData&&this.updateTheme(rv3VUEcomponent.colorSchemeData[0])},t.prototype.resetDisplay=function(){this.targetEle.querySelector(".menuSelectbox").value=0,this.resetTheme(),this.displayDomain()},t.prototype.handleSeqViewerEvents=function(t,e){var i,n;void 0===t.eventData||t.eventData.entryId.toLowerCase()!=this.entryId.toLowerCase()||t.eventData.entityId!=this.entityId||t.eventData.elementData.pathData.chain_id&&t.eventData.elementData.pathData.chain_id!=this.chainId||(i=void this.svgEle.selectAll("."+("mouseover"==e?"residueHighlight":"residueSelection")).remove(),n=void 0,t.eventData.residueNumber?(i=t.eventData.residueNumber,n=t.eventData.residueNumber):t.eventData.elementData.pathData.start.residue_number&&t.eventData.elementData.pathData.end.residue_number&&(i=t.eventData.elementData.pathData.start.residue_number,n=t.eventData.elementData.pathData.end.residue_number),void 0!==i&&void 0!==n&&(t=t.eventData.elementData.color&&1==t.eventData.elementData.color.length?t.eventData.elementData.color[0]:{r:t.eventData.elementData.color[0],g:t.eventData.elementData.color[1],b:t.eventData.elementData.color[2]},this.highlight(i,n,t,e)))},t.prototype.handleProtvistaEvents=function(t,e){if(void 0!==t.detail){var i=void 0,n="mouseover"==e?"residueHighlight":"residueSelection";if(this.svgEle.selectAll("."+n).remove(),void 0!==t.detail.feature){if(void 0!==t.detail.feature.accession&&"Chain"==(n=t.detail.feature.accession.split(" "))[0]&&n[1].toLowerCase()!=this.chainId.toLowerCase())return;void 0===(i=-1<t.detail.trackIndex&&t.detail.feature.locations&&t.detail.feature.locations[0].fragments[t.detail.trackIndex].color?t.detail.feature.locations[0].fragments[t.detail.trackIndex].color:i)&&t.detail.feature.color&&(i=t.detail.feature.color)}(i=(n=void 0)!==(i=void 0===i&&t.detail.color?t.detail.color:i)?/rgb/g.test(i)?i.substring(4,i.length-1).split(","):[i]:i)&&(n=1==i.length?t.eventData.elementData.color[0]:{r:t.eventData.elementData.color[0],g:t.eventData.elementData.color[1],b:t.eventData.elementData.color[2]}),this.highlight(t.detail.start,t.detail.end,n,e)}},t.prototype.handleMolstarEvents=function(t,e){void 0!==t.eventData&&0<Object.keys(t.eventData).length&&(1==masked_array[t.eventData.seq_id-1]||null==masked_array[t.eventData.seq_id-1])&&(this.svgEle.selectAll("."+("mouseover"==e?"residueHighlight":"residueSelection")).remove(),t.eventData.entry_id.toLowerCase()==this.entryId.toLowerCase()&&t.eventData.entity_id==this.entityId&&t.eventData.entity_id==this.entityId&&this.highlight(t.eventData.seq_id,t.eventData.seq_id,void 0,e))},t.prototype.subscribeWcEvents=function(){var e=this;document.addEventListener("PDB.seqViewer.click",function(t){e.handleSeqViewerEvents(t,"click")}),document.addEventListener("PDB.seqViewer.mouseover",function(t){e.handleSeqViewerEvents(t,"mouseover")}),document.addEventListener("PDB.seqViewer.mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()}),document.addEventListener("PDB.litemol.click",function(t){e.svgEle.selectAll(".residueSelection").remove(),t.eventData.entryId.toLowerCase()==e.entryId.toLowerCase()&&t.eventData.entityId==e.entityId&&t.eventData.chainId.toLowerCase()==e.chainId.toLowerCase()&&e.highlight(t.eventData.residueNumber,t.eventData.residueNumber,void 0,"click")}),document.addEventListener("PDB.litemol.mouseover",function(t){e.svgEle.selectAll(".residueHighlight").remove(),t.eventData.entryId.toLowerCase()==e.entryId.toLowerCase()&&t.eventData.entityId==e.entityId&&t.eventData.chainId.toLowerCase()==e.chainId.toLowerCase()&&e.highlight(t.eventData.residueNumber,t.eventData.residueNumber,void 0,"mouseover")}),document.addEventListener("protvista-click",function(t){e.handleProtvistaEvents(t,"click")}),document.addEventListener("protvista-mouseover",function(t){e.handleProtvistaEvents(t,"mouseover")}),document.addEventListener("protvista-mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()}),document.addEventListener("PDB.molstar"+this.pv_suffix+".click",function(t){e.handleMolstarEvents(t,"click")}),document.addEventListener("PDB.molstar"+this.pv_suffix+".mouseover",function(t){e.handleMolstarEvents(t,"mouseover")}),document.addEventListener("PDB.molstar"+this.pv_suffix+".mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()})},t}();window.PdbTopologyViewerPlugin=PdbTopologyViewerPlugin,function(i){var n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=i,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(e,t){function i(t){return e.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(i,t){function n(t,e){return i.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i.exports.__esModule=!0,i.exports.default=i.exports,n(t,e)}i.exports=n,i.exports.__esModule=!0,i.exports.default=i.exports},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(1);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,i){var n=i(8).default,r=i(9);t.exports=function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(e,t,i){var n=i(0),r=i(1),o=i(10),s=i(11);function a(t){var i="function"==typeof Map?new Map:void 0;return e.exports=a=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,e)}function e(){return s(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},function(t,e,i){"use strict";i.r(e);var n=i(2),o=i.n(n),n=i(3),s=i.n(n),n=i(4),a=i.n(n),n=i(5),h=i.n(n),n=i(0),u=i.n(n),n=i(6);i=function(t){a()(r,t);i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();var i,n,e=function(){var t,e=u()(i);return t=n?(t=u()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),h()(this,t)};function r(){return o()(this,r),e.call(this)}return s()(r,[{key:"validateParams",value:function(){return void 0!==this.entryId&&void 0!==this.entityId&&null!=this.entryId&&null!=this.entityId}},{key:"invokePlugin",value:function(){var t;this.validateParams()&&(void 0===this.pluginInstance&&(this.pluginInstance=new PdbTopologyViewerPlugin),t={entryId:this.entryId,entityId:this.entityId,entropyId:this.entropyId},void 0!==this.chainId&&null!==this.chainId&&(t.chainId=this.chainId),void 0!==this.displayStyle&&null!==this.displayStyle&&(t.displayStyle=this.displayStyle),void 0!==this.errorStyle&&null!==this.errorStyle&&(t.errorStyle=this.errorStyle),void 0!==this.menuStyle&&null!==this.menuStyle&&(t.menuStyle=this.menuStyle),void 0!==this.subscribeEvents&&null!==this.subscribeEvents&&(t.subscribeEvents=this.subscribeEvents),void 0!==this.pvAPI&&null!==this.pvAPI&&(t.pvAPI=this.pvAPI),void 0!==this.filterRange&&null!==this.filterRange&&(t.filterRange=this.filterRange),this.pluginInstance.render(this,t))}},{key:"attributeChangedCallback",value:function(){this.entryId=this.getAttribute("entry-id"),this.entityId=this.getAttribute("entity-id"),this.chainId=this.getAttribute("chain-id"),this.filterRange=this.getAttribute("filter-range"),this.displayStyle=this.getAttribute("display-style"),this.errorStyle=this.getAttribute("error-style"),this.menuStyle=this.getAttribute("menu-style"),this.subscribeEvents=this.getAttribute("subscribe-events"),this.pvAPI=/true/i.test(this.getAttribute("pvapi")),this.invokePlugin()}}],[{key:"observedAttributes",get:function(){return["entry-id","entity-id","filter-range","chain-id","display-style","error-style","menu-style","subscribe-events","pvapi"]}}]),r}(i.n(n)()(HTMLElement));e.default=i,customElements.define("pdb-topology-viewer",i)},function(e,t){function i(t){return e.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.__esModule=!0,e.exports.default=e.exports,i(t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports},function(n,t,e){var r=e(1),o=e(12);function s(t,e,i){return o()?n.exports=s=Reflect.construct:n.exports=s=function(t,e,i){var n=[null],e=(n.push.apply(n,e),new(Function.bind.apply(t,n)));return i&&r(e,i.prototype),e},n.exports.__esModule=!0,n.exports.default=n.exports,s.apply(null,arguments)}n.exports=s,n.exports.__esModule=!0,n.exports.default=n.exports},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}]);