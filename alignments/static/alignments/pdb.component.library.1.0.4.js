function saveSvg(svgEl, name) {
          svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
          var svgData = svgEl.outerHTML;
          var preface = '<?xml version="1.0" standalone="no"?>\r\n';
          var svgBlob = new Blob([preface, svgData], {type:"image/svg+xml;charset=utf-8"});
          var svgUrl = URL.createObjectURL(svgBlob);
          var downloadLink = document.createElement("a");
          downloadLink.href = svgUrl;
          downloadLink.download = name;
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
}
//var svgRibo;
if (!SVGPathElement.prototype.getPathData || !SVGPathElement.prototype.setPathData) {
  (function() {
    var commandsMap = {
      "Z":"Z", "M":"M", "L":"L", "C":"C", "Q":"Q", "A":"A", "H":"H", "V":"V", "S":"S", "T":"T",
      "z":"Z", "m":"m", "l":"l", "c":"c", "q":"q", "a":"a", "h":"h", "v":"v", "s":"s", "t":"t"
    };

    var Source = function(string) {
      this._string = string;
      this._currentIndex = 0;
      this._endIndex = this._string.length;
      this._prevCommand = null;
      this._skipOptionalSpaces();
    };

    var isIE = window.navigator.userAgent.indexOf("MSIE ") !== -1;

    Source.prototype = {
      parseSegment: function() {
        var char = this._string[this._currentIndex];
        var command = commandsMap[char] ? commandsMap[char] : null;

        if (command === null) {
          // Possibly an implicit command. Not allowed if this is the first command.
          if (this._prevCommand === null) {
            return null;
          }

          // Check for remaining coordinates in the current command.
          if (
            (char === "+" || char === "-" || char === "." || (char >= "0" && char <= "9")) && this._prevCommand !== "Z"
          ) {
            if (this._prevCommand === "M") {
              command = "L";
            }
            else if (this._prevCommand === "m") {
              command = "l";
            }
            else {
              command = this._prevCommand;
            }
          }
          else {
            command = null;
          }

          if (command === null) {
            return null;
          }
        }
        else {
          this._currentIndex += 1;
        }

        this._prevCommand = command;

        var values = null;
        var cmd = command.toUpperCase();

        if (cmd === "H" || cmd === "V") {
          values = [this._parseNumber()];
        }
        else if (cmd === "M" || cmd === "L" || cmd === "T") {
          values = [this._parseNumber(), this._parseNumber()];
        }
        else if (cmd === "S" || cmd === "Q") {
          values = [this._parseNumber(), this._parseNumber(), this._parseNumber(), this._parseNumber()];
        }
        else if (cmd === "C") {
          values = [
            this._parseNumber(),
            this._parseNumber(),
            this._parseNumber(),
            this._parseNumber(),
            this._parseNumber(),
            this._parseNumber()
          ];
        }
        else if (cmd === "A") {
          values = [
            this._parseNumber(),
            this._parseNumber(),
            this._parseNumber(),
            this._parseArcFlag(),
            this._parseArcFlag(),
            this._parseNumber(),
            this._parseNumber()
          ];
        }
        else if (cmd === "Z") {
          this._skipOptionalSpaces();
          values = [];
        }

        if (values === null || values.indexOf(null) >= 0) {
          // Unknown command or known command with invalid values
          return null;
        }
        else {
          return {type: command, values: values};
        }
      },

      hasMoreData: function() {
        return this._currentIndex < this._endIndex;
      },

      peekSegmentType: function() {
        var char = this._string[this._currentIndex];
        return commandsMap[char] ? commandsMap[char] : null;
      },

      initialCommandIsMoveTo: function() {
        // If the path is empty it is still valid, so return true.
        if (!this.hasMoreData()) {
          return true;
        }

        var command = this.peekSegmentType();
        // Path must start with moveTo.
        return command === "M" || command === "m";
      },

      _isCurrentSpace: function() {
        var char = this._string[this._currentIndex];
        return char <= " " && (char === " " || char === "\n" || char === "\t" || char === "\r" || char === "\f");
      },

      _skipOptionalSpaces: function() {
        while (this._currentIndex < this._endIndex && this._isCurrentSpace()) {
          this._currentIndex += 1;
        }

        return this._currentIndex < this._endIndex;
      },

      _skipOptionalSpacesOrDelimiter: function() {
        if (
          this._currentIndex < this._endIndex &&
          !this._isCurrentSpace() &&
          this._string[this._currentIndex] !== ","
        ) {
          return false;
        }

        if (this._skipOptionalSpaces()) {
          if (this._currentIndex < this._endIndex && this._string[this._currentIndex] === ",") {
            this._currentIndex += 1;
            this._skipOptionalSpaces();
          }
        }
        return this._currentIndex < this._endIndex;
      },

      // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from
      // Source/core/svg/SVGParserUtilities.cpp.
      // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF
      _parseNumber: function() {
        var exponent = 0;
        var integer = 0;
        var frac = 1;
        var decimal = 0;
        var sign = 1;
        var expsign = 1;
        var startIndex = this._currentIndex;

        this._skipOptionalSpaces();

        // Read the sign.
        if (this._currentIndex < this._endIndex && this._string[this._currentIndex] === "+") {
          this._currentIndex += 1;
        }
        else if (this._currentIndex < this._endIndex && this._string[this._currentIndex] === "-") {
          this._currentIndex += 1;
          sign = -1;
        }

        if (
          this._currentIndex === this._endIndex ||
          (
            (this._string[this._currentIndex] < "0" || this._string[this._currentIndex] > "9") &&
            this._string[this._currentIndex] !== "."
          )
        ) {
          // The first character of a number must be one of [0-9+-.].
          return null;
        }

        // Read the integer part, build right-to-left.
        var startIntPartIndex = this._currentIndex;

        while (
          this._currentIndex < this._endIndex &&
          this._string[this._currentIndex] >= "0" &&
          this._string[this._currentIndex] <= "9"
        ) {
          this._currentIndex += 1; // Advance to first non-digit.
        }

        if (this._currentIndex !== startIntPartIndex) {
          var scanIntPartIndex = this._currentIndex - 1;
          var multiplier = 1;

          while (scanIntPartIndex >= startIntPartIndex) {
            integer += multiplier * (this._string[scanIntPartIndex] - "0");
            scanIntPartIndex -= 1;
            multiplier *= 10;
          }
        }

        // Read the decimals.
        if (this._currentIndex < this._endIndex && this._string[this._currentIndex] === ".") {
          this._currentIndex += 1;

          // There must be a least one digit following the .
          if (
            this._currentIndex >= this._endIndex ||
            this._string[this._currentIndex] < "0" ||
            this._string[this._currentIndex] > "9"
          ) {
            return null;
          }

          while (
            this._currentIndex < this._endIndex &&
            this._string[this._currentIndex] >= "0" &&
            this._string[this._currentIndex] <= "9"
          ) {
            frac *= 10;
            decimal += (this._string.charAt(this._currentIndex) - "0") / frac;
            this._currentIndex += 1;
          }
        }

        // Read the exponent part.
        if (
          this._currentIndex !== startIndex &&
          this._currentIndex + 1 < this._endIndex &&
          (this._string[this._currentIndex] === "e" || this._string[this._currentIndex] === "E") &&
          (this._string[this._currentIndex + 1] !== "x" && this._string[this._currentIndex + 1] !== "m")
        ) {
          this._currentIndex += 1;

          // Read the sign of the exponent.
          if (this._string[this._currentIndex] === "+") {
            this._currentIndex += 1;
          }
          else if (this._string[this._currentIndex] === "-") {
            this._currentIndex += 1;
            expsign = -1;
          }

          // There must be an exponent.
          if (
            this._currentIndex >= this._endIndex ||
            this._string[this._currentIndex] < "0" ||
            this._string[this._currentIndex] > "9"
          ) {
            return null;
          }

          while (
            this._currentIndex < this._endIndex &&
            this._string[this._currentIndex] >= "0" &&
            this._string[this._currentIndex] <= "9"
          ) {
            exponent *= 10;
            exponent += (this._string[this._currentIndex] - "0");
            this._currentIndex += 1;
          }
        }

        var number = integer + decimal;
        number *= sign;

        if (exponent) {
          number *= Math.pow(10, expsign * exponent);
        }

        if (startIndex === this._currentIndex) {
          return null;
        }

        this._skipOptionalSpacesOrDelimiter();

        return number;
      },

      _parseArcFlag: function() {
        if (this._currentIndex >= this._endIndex) {
          return null;
        }

        var flag = null;
        var flagChar = this._string[this._currentIndex];

        this._currentIndex += 1;

        if (flagChar === "0") {
          flag = 0;
        }
        else if (flagChar === "1") {
          flag = 1;
        }
        else {
          return null;
        }

        this._skipOptionalSpacesOrDelimiter();
        return flag;
      }
    };

    var parsePathDataString = function(string) {
      if (!string || string.length === 0) return [];

      var source = new Source(string);
      var pathData = [];

      if (source.initialCommandIsMoveTo()) {
        while (source.hasMoreData()) {
          var pathSeg = source.parseSegment();

          if (pathSeg === null) {
            break;
          }
          else {
            pathData.push(pathSeg);
          }
        }
      }

      return pathData;
    }

    var setAttribute = SVGPathElement.prototype.setAttribute;
    var removeAttribute = SVGPathElement.prototype.removeAttribute;

    var $cachedPathData = window.Symbol ? Symbol() : "__cachedPathData";
    var $cachedNormalizedPathData = window.Symbol ? Symbol() : "__cachedNormalizedPathData";

    // @info
    //   Get an array of corresponding cubic bezier curve parameters for given arc curve paramters.
    var arcToCubicCurves = function(x1, y1, x2, y2, r1, r2, angle, largeArcFlag, sweepFlag, _recursive) {
      var degToRad = function(degrees) {
        return (Math.PI * degrees) / 180;
      };

      var rotate = function(x, y, angleRad) {
        var X = x * Math.cos(angleRad) - y * Math.sin(angleRad);
        var Y = x * Math.sin(angleRad) + y * Math.cos(angleRad);
        return {x: X, y: Y};
      };

      var angleRad = degToRad(angle);
      var params = [];
      var f1, f2, cx, cy;

      if (_recursive) {
        f1 = _recursive[0];
        f2 = _recursive[1];
        cx = _recursive[2];
        cy = _recursive[3];
      }
      else {
        var p1 = rotate(x1, y1, -angleRad);
        x1 = p1.x;
        y1 = p1.y;

        var p2 = rotate(x2, y2, -angleRad);
        x2 = p2.x;
        y2 = p2.y;

        var x = (x1 - x2) / 2;
        var y = (y1 - y2) / 2;
        var h = (x * x) / (r1 * r1) + (y * y) / (r2 * r2);

        if (h > 1) {
          h = Math.sqrt(h);
          r1 = h * r1;
          r2 = h * r2;
        }

        var sign;

        if (largeArcFlag === sweepFlag) {
          sign = -1;
        }
        else {
          sign = 1;
        }

        var r1Pow = r1 * r1;
        var r2Pow = r2 * r2;

        var left = r1Pow * r2Pow - r1Pow * y * y - r2Pow * x * x;
        var right = r1Pow * y * y + r2Pow * x * x;

        var k = sign * Math.sqrt(Math.abs(left/right));

        cx = k * r1 * y / r2 + (x1 + x2) / 2;
        cy = k * -r2 * x / r1 + (y1 + y2) / 2;

        f1 = Math.asin(parseFloat(((y1 - cy) / r2).toFixed(9)));
        f2 = Math.asin(parseFloat(((y2 - cy) / r2).toFixed(9)));

        if (x1 < cx) {
          f1 = Math.PI - f1;
        }
        if (x2 < cx) {
          f2 = Math.PI - f2;
        }

        if (f1 < 0) {
          f1 = Math.PI * 2 + f1;
        }
        if (f2 < 0) {
          f2 = Math.PI * 2 + f2;
        }

        if (sweepFlag && f1 > f2) {
          f1 = f1 - Math.PI * 2;
        }
        if (!sweepFlag && f2 > f1) {
          f2 = f2 - Math.PI * 2;
        }
      }

      var df = f2 - f1;

      if (Math.abs(df) > (Math.PI * 120 / 180)) {
        var f2old = f2;
        var x2old = x2;
        var y2old = y2;

        if (sweepFlag && f2 > f1) {
          f2 = f1 + (Math.PI * 120 / 180) * (1);
        }
        else {
          f2 = f1 + (Math.PI * 120 / 180) * (-1);
        }

        x2 = cx + r1 * Math.cos(f2);
        y2 = cy + r2 * Math.sin(f2);
        params = arcToCubicCurves(x2, y2, x2old, y2old, r1, r2, angle, 0, sweepFlag, [f2, f2old, cx, cy]);
      }

      df = f2 - f1;

      var c1 = Math.cos(f1);
      var s1 = Math.sin(f1);
      var c2 = Math.cos(f2);
      var s2 = Math.sin(f2);
      var t = Math.tan(df / 4);
      var hx = 4 / 3 * r1 * t;
      var hy = 4 / 3 * r2 * t;

      var m1 = [x1, y1];
      var m2 = [x1 + hx * s1, y1 - hy * c1];
      var m3 = [x2 + hx * s2, y2 - hy * c2];
      var m4 = [x2, y2];

      m2[0] = 2 * m1[0] - m2[0];
      m2[1] = 2 * m1[1] - m2[1];

      if (_recursive) {
        return [m2, m3, m4].concat(params);
      }
      else {
        params = [m2, m3, m4].concat(params);

        var curves = [];

        for (var i = 0; i < params.length; i+=3) {
          var r1 = rotate(params[i][0], params[i][1], angleRad);
          var r2 = rotate(params[i+1][0], params[i+1][1], angleRad);
          var r3 = rotate(params[i+2][0], params[i+2][1], angleRad);
          curves.push([r1.x, r1.y, r2.x, r2.y, r3.x, r3.y]);
        }

        return curves;
      }
    };

    var clonePathData = function(pathData) {
      return pathData.map( function(seg) {
        return {type: seg.type, values: Array.prototype.slice.call(seg.values)}
      });
    };

    // @info
    //   Takes any path data, returns path data that consists only from absolute commands.
    var absolutizePathData = function(pathData) {
      var absolutizedPathData = [];

      var currentX = null;
      var currentY = null;

      var subpathX = null;
      var subpathY = null;

      pathData.forEach( function(seg) {
        var type = seg.type;

        if (type === "M") {
          var x = seg.values[0];
          var y = seg.values[1];

          absolutizedPathData.push({type: "M", values: [x, y]});

          subpathX = x;
          subpathY = y;

          currentX = x;
          currentY = y;
        }

        else if (type === "m") {
          var x = currentX + seg.values[0];
          var y = currentY + seg.values[1];

          absolutizedPathData.push({type: "M", values: [x, y]});

          subpathX = x;
          subpathY = y;

          currentX = x;
          currentY = y;
        }

        else if (type === "L") {
          var x = seg.values[0];
          var y = seg.values[1];

          absolutizedPathData.push({type: "L", values: [x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "l") {
          var x = currentX + seg.values[0];
          var y = currentY + seg.values[1];

          absolutizedPathData.push({type: "L", values: [x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "C") {
          var x1 = seg.values[0];
          var y1 = seg.values[1];
          var x2 = seg.values[2];
          var y2 = seg.values[3];
          var x = seg.values[4];
          var y = seg.values[5];

          absolutizedPathData.push({type: "C", values: [x1, y1, x2, y2, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "c") {
          var x1 = currentX + seg.values[0];
          var y1 = currentY + seg.values[1];
          var x2 = currentX + seg.values[2];
          var y2 = currentY + seg.values[3];
          var x = currentX + seg.values[4];
          var y = currentY + seg.values[5];

          absolutizedPathData.push({type: "C", values: [x1, y1, x2, y2, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "Q") {
          var x1 = seg.values[0];
          var y1 = seg.values[1];
          var x = seg.values[2];
          var y = seg.values[3];

          absolutizedPathData.push({type: "Q", values: [x1, y1, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "q") {
          var x1 = currentX + seg.values[0];
          var y1 = currentY + seg.values[1];
          var x = currentX + seg.values[2];
          var y = currentY + seg.values[3];

          absolutizedPathData.push({type: "Q", values: [x1, y1, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "A") {
          var x = seg.values[5];
          var y = seg.values[6];

          absolutizedPathData.push({
            type: "A",
            values: [seg.values[0], seg.values[1], seg.values[2], seg.values[3], seg.values[4], x, y]
          });

          currentX = x;
          currentY = y;
        }

        else if (type === "a") {
          var x = currentX + seg.values[5];
          var y = currentY + seg.values[6];

          absolutizedPathData.push({
            type: "A",
            values: [seg.values[0], seg.values[1], seg.values[2], seg.values[3], seg.values[4], x, y]
          });

          currentX = x;
          currentY = y;
        }

        else if (type === "H") {
          var x = seg.values[0];
          absolutizedPathData.push({type: "H", values: [x]});
          currentX = x;
        }

        else if (type === "h") {
          var x = currentX + seg.values[0];
          absolutizedPathData.push({type: "H", values: [x]});
          currentX = x;
        }

        else if (type === "V") {
          var y = seg.values[0];
          absolutizedPathData.push({type: "V", values: [y]});
          currentY = y;
        }

        else if (type === "v") {
          var y = currentY + seg.values[0];
          absolutizedPathData.push({type: "V", values: [y]});
          currentY = y;
        }

        else if (type === "S") {
          var x2 = seg.values[0];
          var y2 = seg.values[1];
          var x = seg.values[2];
          var y = seg.values[3];

          absolutizedPathData.push({type: "S", values: [x2, y2, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "s") {
          var x2 = currentX + seg.values[0];
          var y2 = currentY + seg.values[1];
          var x = currentX + seg.values[2];
          var y = currentY + seg.values[3];

          absolutizedPathData.push({type: "S", values: [x2, y2, x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "T") {
          var x = seg.values[0];
          var y = seg.values[1]

          absolutizedPathData.push({type: "T", values: [x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "t") {
          var x = currentX + seg.values[0];
          var y = currentY + seg.values[1]

          absolutizedPathData.push({type: "T", values: [x, y]});

          currentX = x;
          currentY = y;
        }

        else if (type === "Z" || type === "z") {
          absolutizedPathData.push({type: "Z", values: []});

          currentX = subpathX;
          currentY = subpathY;
        }
      });

      return absolutizedPathData;
    };

    // @info
    //   Takes path data that consists only from absolute commands, returns path data that consists only from
    //   "M", "L", "C" and "Z" commands.
    var reducePathData = function(pathData) {
      var reducedPathData = [];
      var lastType = null;

      var lastControlX = null;
      var lastControlY = null;

      var currentX = null;
      var currentY = null;

      var subpathX = null;
      var subpathY = null;

      pathData.forEach( function(seg) {
        if (seg.type === "M") {
          var x = seg.values[0];
          var y = seg.values[1];

          reducedPathData.push({type: "M", values: [x, y]});

          subpathX = x;
          subpathY = y;

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "C") {
          var x1 = seg.values[0];
          var y1 = seg.values[1];
          var x2 = seg.values[2];
          var y2 = seg.values[3];
          var x = seg.values[4];
          var y = seg.values[5];

          reducedPathData.push({type: "C", values: [x1, y1, x2, y2, x, y]});

          lastControlX = x2;
          lastControlY = y2;

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "L") {
          var x = seg.values[0];
          var y = seg.values[1];

          reducedPathData.push({type: "L", values: [x, y]});

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "H") {
          var x = seg.values[0];

          reducedPathData.push({type: "L", values: [x, currentY]});

          currentX = x;
        }

        else if (seg.type === "V") {
          var y = seg.values[0];

          reducedPathData.push({type: "L", values: [currentX, y]});

          currentY = y;
        }

        else if (seg.type === "S") {
          var x2 = seg.values[0];
          var y2 = seg.values[1];
          var x = seg.values[2];
          var y = seg.values[3];

          var cx1, cy1;

          if (lastType === "C" || lastType === "S") {
            cx1 = currentX + (currentX - lastControlX);
            cy1 = currentY + (currentY - lastControlY);
          }
          else {
            cx1 = currentX;
            cy1 = currentY;
          }

          reducedPathData.push({type: "C", values: [cx1, cy1, x2, y2, x, y]});

          lastControlX = x2;
          lastControlY = y2;

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "T") {
          var x = seg.values[0];
          var y = seg.values[1];

          var x1, y1;

          if (lastType === "Q" || lastType === "T") {
            x1 = currentX + (currentX - lastControlX);
            y1 = currentY + (currentY - lastControlY);
          }
          else {
            x1 = currentX;
            y1 = currentY;
          }

          var cx1 = currentX + 2 * (x1 - currentX) / 3;
          var cy1 = currentY + 2 * (y1 - currentY) / 3;
          var cx2 = x + 2 * (x1 - x) / 3;
          var cy2 = y + 2 * (y1 - y) / 3;

          reducedPathData.push({type: "C", values: [cx1, cy1, cx2, cy2, x, y]});

          lastControlX = x1;
          lastControlY = y1;

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "Q") {
          var x1 = seg.values[0];
          var y1 = seg.values[1];
          var x = seg.values[2];
          var y = seg.values[3];

          var cx1 = currentX + 2 * (x1 - currentX) / 3;
          var cy1 = currentY + 2 * (y1 - currentY) / 3;
          var cx2 = x + 2 * (x1 - x) / 3;
          var cy2 = y + 2 * (y1 - y) / 3;

          reducedPathData.push({type: "C", values: [cx1, cy1, cx2, cy2, x, y]});

          lastControlX = x1;
          lastControlY = y1;

          currentX = x;
          currentY = y;
        }

        else if (seg.type === "A") {
          var r1 = Math.abs(seg.values[0]);
          var r2 = Math.abs(seg.values[1]);
          var angle = seg.values[2];
          var largeArcFlag = seg.values[3];
          var sweepFlag = seg.values[4];
          var x = seg.values[5];
          var y = seg.values[6];

          if (r1 === 0 || r2 === 0) {
            reducedPathData.push({type: "C", values: [currentX, currentY, x, y, x, y]});

            currentX = x;
            currentY = y;
          }
          else {
            if (currentX !== x || currentY !== y) {
              var curves = arcToCubicCurves(currentX, currentY, x, y, r1, r2, angle, largeArcFlag, sweepFlag);

              curves.forEach( function(curve) {
                reducedPathData.push({type: "C", values: curve});
              });

              currentX = x;
              currentY = y;
            }
          }
        }

        else if (seg.type === "Z") {
          reducedPathData.push(seg);

          currentX = subpathX;
          currentY = subpathY;
        }

        lastType = seg.type;
      });

      return reducedPathData;
    };

    SVGPathElement.prototype.setAttribute = function(name, value) {
      if (name === "d") {
        this[$cachedPathData] = null;
        this[$cachedNormalizedPathData] = null;
      }

      setAttribute.call(this, name, value);
    };

    SVGPathElement.prototype.removeAttribute = function(name, value) {
      if (name === "d") {
        this[$cachedPathData] = null;
        this[$cachedNormalizedPathData] = null;
      }

      removeAttribute.call(this, name);
    };

    SVGPathElement.prototype.getPathData = function(options) {
      if (options && options.normalize) {
        if (this[$cachedNormalizedPathData]) {
          return clonePathData(this[$cachedNormalizedPathData]);
        }
        else {
          var pathData;

          if (this[$cachedPathData]) {
            pathData = clonePathData(this[$cachedPathData]);
          }
          else {
            pathData = parsePathDataString(this.getAttribute("d") || "");
            this[$cachedPathData] = clonePathData(pathData);
          }

          var normalizedPathData = reducePathData(absolutizePathData(pathData));
          this[$cachedNormalizedPathData] = clonePathData(normalizedPathData);
          return normalizedPathData;
        }
      }
      else {
        if (this[$cachedPathData]) {
          return clonePathData(this[$cachedPathData]);
        }
        else {
          var pathData = parsePathDataString(this.getAttribute("d") || "");
          this[$cachedPathData] = clonePathData(pathData);
          return pathData;
        }
      }
    };

    SVGPathElement.prototype.setPathData = function(pathData) {
      if (pathData.length === 0) {
        if (isIE) {
          // @bugfix https://github.com/mbostock/d3/issues/1737
          this.setAttribute("d", "");
        }
        else {
          this.removeAttribute("d");
        }
      }
      else {
        var d = "";

        for (var i = 0, l = pathData.length; i < l; i += 1) {
          var seg = pathData[i];

          if (i > 0) {
            d += " ";
          }

          d += seg.type;

          if (seg.values && seg.values.length > 0) {
            d += " " + seg.values.join(" ");
          }
        }

        this.setAttribute("d", d);
      }
    };

    SVGRectElement.prototype.getPathData = function(options) {
      var x = this.x.baseVal.value;
      var y = this.y.baseVal.value;
      var width = this.width.baseVal.value;
      var height = this.height.baseVal.value;
      var rx = this.hasAttribute("rx") ? this.rx.baseVal.value : this.ry.baseVal.value;
      var ry = this.hasAttribute("ry") ? this.ry.baseVal.value : this.rx.baseVal.value;

      if (rx > width / 2) {
        rx = width / 2;
      }

      if (ry > height / 2) {
        ry = height / 2;
      }

      var pathData = [
        {type: "M", values: [x+rx, y]},
        {type: "H", values: [x+width-rx]},
        {type: "A", values: [rx, ry, 0, 0, 1, x+width, y+ry]},
        {type: "V", values: [y+height-ry]},
        {type: "A", values: [rx, ry, 0, 0, 1, x+width-rx, y+height]},
        {type: "H", values: [x+rx]},
        {type: "A", values: [rx, ry, 0, 0, 1, x, y+height-ry]},
        {type: "V", values: [y+ry]},
        {type: "A", values: [rx, ry, 0, 0, 1, x+rx, y]},
        {type: "Z", values: []}
      ];

      // Get rid of redundant "A" segs when either rx or ry is 0
      pathData = pathData.filter(function(s) {
        return s.type === "A" && (s.values[0] === 0 || s.values[1] === 0) ? false : true;
      });

      if (options && options.normalize === true) {
        pathData = reducePathData(pathData);
      }
      return pathData;
    };

    SVGCircleElement.prototype.getPathData = function(options) {
      var cx = this.cx.baseVal.value;
      var cy = this.cy.baseVal.value;
      var r = this.r.baseVal.value;

      var pathData = [
        { type: "M",  values: [cx + r, cy] },
        { type: "A",  values: [r, r, 0, 0, 1, cx, cy+r] },
        { type: "A",  values: [r, r, 0, 0, 1, cx-r, cy] },
        { type: "A",  values: [r, r, 0, 0, 1, cx, cy-r] },
        { type: "A",  values: [r, r, 0, 0, 1, cx+r, cy] },
        { type: "Z",  values: [] }
      ];

      if (options && options.normalize === true) {
        pathData = reducePathData(pathData);
      }

      return pathData;
    };

    SVGEllipseElement.prototype.getPathData = function(options) {
      var cx = this.cx.baseVal.value;
      var cy = this.cy.baseVal.value;
      var rx = this.rx.baseVal.value;
      var ry = this.ry.baseVal.value;

      var pathData = [
        { type: "M",  values: [cx + rx, cy] },
        { type: "A",  values: [rx, ry, 0, 0, 1, cx, cy+ry] },
        { type: "A",  values: [rx, ry, 0, 0, 1, cx-rx, cy] },
        { type: "A",  values: [rx, ry, 0, 0, 1, cx, cy-ry] },
        { type: "A",  values: [rx, ry, 0, 0, 1, cx+rx, cy] },
        { type: "Z",  values: [] }
      ];

      if (options && options.normalize === true) {
        pathData = reducePathData(pathData);
      }

      return pathData;
    };

    SVGLineElement.prototype.getPathData = function() {
      return [
        { type: "M", values: [this.x1.baseVal.value, this.y1.baseVal.value] },
        { type: "L", values: [this.x2.baseVal.value, this.y2.baseVal.value] }
      ];
    };

    SVGPolylineElement.prototype.getPathData = function() {
      var pathData = [];

      for (var i = 0; i < this.points.numberOfItems; i += 1) {
        var point = this.points.getItem(i);

        pathData.push({
          type: (i === 0 ? "M" : "L"),
          values: [point.x, point.y]
        });
      }
      return pathData;
    };

    SVGPolygonElement.prototype.getPathData = function() {
      var pathData = [];

      for (var i = 0; i < this.points.numberOfItems; i += 1) {
        var point = this.points.getItem(i);

        pathData.push({
          type: (i === 0 ? "M" : "L"),
          values: [point.x, point.y]
        });
      }

      pathData.push({
        type: "Z",
        values: []
      });

      return pathData;
    };
  })();
}
//
  
(function() {
 "use strict";

 function e(e) {
  return "function" == typeof e || "object" == typeof e && null !== e
 }

 function t(e) {
  return "function" == typeof e
 }

 function n(e) {
  j = e
 }

 function r(e) {
  Y = e
 }

 function i() {
  return function() {
   process.nextTick(l)
  }
 }

 function o() {
  return function() {
   H(l)
  }
 }



 function a() {
  var e = 0,
   t = new K(l),
   n = document.createTextNode("");
  return t.observe(n, {
    characterData: !0
   }),
   function() {
    n.data = e = ++e % 2
   }
 }

 function s() {
  var e = new MessageChannel;
  return e.port1.onmessage = l,
   function() {
    e.port2.postMessage(0)
   }
 }

 function u() {
  return function() {
   setTimeout(l, 1)
  }
 }

 function l() {
  for (var e = 0; X > e; e += 2) {
   var t = et[e],
    n = et[e + 1];
   t(n), et[e] = void 0, et[e + 1] = void 0
  }
  X = 0
 }

 function c() {
  try {
   var e = require,
    t = e("vertx");
   return H = t.runOnLoop || t.runOnContext, o()
  } catch (n) {
   return u()
  }
 }

 function h(e, t) {
  var n = this,
   r = new this.constructor(d);
  void 0 === r[rt] && k(r);
  var i = n._state;
  if (i) {
   var o = arguments[i - 1];
   Y(function() {
    P(i, r, o, n._result)
   })
  } else E(n, r, e, t);
  return r
 }

 function p(e) {
  var t = this;
  if (e && "object" == typeof e && e.constructor === t) return e;
  var n = new t(d);
  return x(n, e), n
 }

 function d() {}

 function f() {
  return new TypeError("You cannot resolve a promise with itself")
 }

 function m() {
  return new TypeError("A promises callback cannot return that same promise.")
 }

 function g(e) {
  try {
   return e.then
  } catch (t) {
   return st.error = t, st
  }
 }

 function v(e, t, n, r) {
  try {
   e.call(t, n, r)
  } catch (i) {
   return i
  }
 }

 function y(e, t, n) {
  Y(function(e) {
   var r = !1,
    i = v(n, t, function(n) {
     r || (r = !0, t !== n ? x(e, n) : S(e, n))
    }, function(t) {
     r || (r = !0, C(e, t))
    }, "Settle: " + (e._label || " unknown promise"));
   !r && i && (r = !0, C(e, i))
  }, e)
 }

 function b(e, t) {
  t._state === ot ? S(e, t._result) : t._state === at ? C(e, t._result) : E(t, void 0, function(t) {
   x(e, t)
  }, function(t) {
   C(e, t)
  })
 }

 function w(e, n, r) {
  n.constructor === e.constructor && r === tt && constructor.resolve === nt ? b(e, n) : r === st ? C(e, st.error) : void 0 === r ? S(e, n) : t(r) ? y(e, n, r) : S(e, n)
 }

 function x(t, n) {
  t === n ? C(t, f()) : e(n) ? w(t, n, g(n)) : S(t, n)
 }

 function _(e) {
  e._onerror && e._onerror(e._result), T(e)
 }

 function S(e, t) {
  e._state === it && (e._result = t, e._state = ot, 0 !== e._subscribers.length && Y(T, e))
 }

 function C(e, t) {
  e._state === it && (e._state = at, e._result = t, Y(_, e))
 }

 function E(e, t, n, r) {
  var i = e._subscribers,
   o = i.length;
  e._onerror = null, i[o] = t, i[o + ot] = n, i[o + at] = r, 0 === o && e._state && Y(T, e)
 }

 function T(e) {
  var t = e._subscribers,
   n = e._state;
  if (0 !== t.length) {
   for (var r, i, o = e._result, a = 0; a < t.length; a += 3) r = t[a], i = t[a + n], r ? P(n, r, i, o) : i(o);
   e._subscribers.length = 0
  }
 }

 function M() {
  this.error = null
 }

 function A(e, t) {
  try {
   return e(t)
  } catch (n) {
   return ut.error = n, ut
  }
 }

 function P(e, n, r, i) {
  var o, a, s, u, l = t(r);
  if (l) {
   if (o = A(r, i), o === ut ? (u = !0, a = o.error, o = null) : s = !0, n === o) return void C(n, m())
  } else o = i, s = !0;
  n._state !== it || (l && s ? x(n, o) : u ? C(n, a) : e === ot ? S(n, o) : e === at && C(n, o))
 }

 function R(e, t) {
  try {
   t(function(t) {
    x(e, t)
   }, function(t) {
    C(e, t)
   })
  } catch (n) {
   C(e, n)
  }
 }

 function I() {
  return lt++
 }

 function k(e) {
  e[rt] = lt++, e._state = void 0, e._result = void 0, e._subscribers = []
 }

 function D(e) {
  return new ft(this, e).promise
 }

 function V(e) {
  var t = this;
  return new t(W(e) ? function(n, r) {
   for (var i = e.length, o = 0; i > o; o++) t.resolve(e[o]).then(n, r)
  } : function(e, t) {
   t(new TypeError("You must pass an array to race."))
  })
 }

 function L(e) {
  var t = this,
   n = new t(d);
  return C(n, e), n
 }

 function B() {
  throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
 }

 function O() {
  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
 }

 function N(e) {
  this[rt] = I(), this._result = this._state = void 0, this._subscribers = [], d !== e && ("function" != typeof e && B(), this instanceof N ? R(this, e) : O())
 }

 function F(e, t) {
  this._instanceConstructor = e, this.promise = new e(d), this.promise[rt] || k(this.promise), Array.isArray(t) ? (this._input = t, this.length = t.length, this._remaining = t.length, this._result = new Array(this.length), 0 === this.length ? S(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(), 0 === this._remaining && S(this.promise, this._result))) : C(this.promise, U())
 }

 function U() {
  return new Error("Array Methods must be provided an Array")
 }

 function z() {
  var e;
  if ("undefined" != typeof global) e = global;
  else if ("undefined" != typeof self) e = self;
  else try {
   e = Function("return this")()
  } catch (t) {
   throw new Error("polyfill failed because global object is unavailable in this environment")
  }
  var n = e.Promise;
  (!n || "[object Promise]" !== Object.prototype.toString.call(n.resolve()) || n.cast) && (e.Promise = dt)
 }
 var G;
 G = Array.isArray ? Array.isArray : function(e) {
  return "[object Array]" === Object.prototype.toString.call(e)
 };
 var H, j, q, W = G,
  X = 0,
  Y = function(e, t) {
   et[X] = e, et[X + 1] = t, X += 2, 2 === X && (j ? j(l) : q())
  },
  Q = "undefined" != typeof window ? window : void 0,
  Z = Q || {},
  K = Z.MutationObserver || Z.WebKitMutationObserver,
  $ = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process),
  J = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel,
  et = new Array(1e3);
 q = $ ? i() : K ? a() : J ? s() : void 0 === Q && "function" == typeof require ? c() : u();
 var tt = h,
  nt = p,
  rt = Math.random().toString(36).substring(16),
  it = void 0,
  ot = 1,
  at = 2,
  st = new M,
  ut = new M,
  lt = 0,
  ct = D,
  ht = V,
  pt = L,
  dt = N;
 N.all = ct, N.race = ht, N.resolve = nt, N.reject = pt, N._setScheduler = n, N._setAsap = r, N._asap = Y, N.prototype = {
  constructor: N,
  then: tt,
  "catch": function(e) {
   return this.then(null, e)
  }
 };
 var ft = F;
 F.prototype._enumerate = function() {
  for (var e = this.length, t = this._input, n = 0; this._state === it && e > n; n++) this._eachEntry(t[n], n)
 }, F.prototype._eachEntry = function(e, t) {
  var n = this._instanceConstructor,
   r = n.resolve;
  if (r === nt) {
   var i = g(e);
   if (i === tt && e._state !== it) this._settledAt(e._state, t, e._result);
   else if ("function" != typeof i) this._remaining--, this._result[t] = e;
   else if (n === dt) {
    var o = new n(d);
    w(o, e, i), this._willSettleAt(o, t)
   } else this._willSettleAt(new n(function(t) {
    t(e)
   }), t)
  } else this._willSettleAt(r(e), t)
 }, F.prototype._settledAt = function(e, t, n) {
  var r = this.promise;
  r._state === it && (this._remaining--, e === at ? C(r, n) : this._result[t] = n), 0 === this._remaining && S(r, this._result)
 }, F.prototype._willSettleAt = function(e, t) {
  var n = this;
  E(e, void 0, function(e) {
   n._settledAt(ot, t, e)
  }, function(e) {
   n._settledAt(at, t, e)
  })
 };
 var mt = z,
  gt = {
   Promise: dt,
   polyfill: mt
  };
 "function" == typeof define && define.amd ? define(function() {
  return gt
 }) : "undefined" != typeof module && module.exports ? module.exports = gt : "undefined" != typeof this && (this.ES6Promise = gt), mt()
}).call(this),
 function() {
  "use strict";
  "SVGPathSeg" in window || (window.SVGPathSeg = function(e, t, n) {
   this.pathSegType = e, this.pathSegTypeAsLetter = t, this._owningPathSegList = n
  }, window.SVGPathSeg.prototype.classname = "SVGPathSeg", window.SVGPathSeg.PATHSEG_UNKNOWN = 0, window.SVGPathSeg.PATHSEG_CLOSEPATH = 1, window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2, window.SVGPathSeg.PATHSEG_MOVETO_REL = 3, window.SVGPathSeg.PATHSEG_LINETO_ABS = 4, window.SVGPathSeg.PATHSEG_LINETO_REL = 5, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9, window.SVGPathSeg.PATHSEG_ARC_ABS = 10, window.SVGPathSeg.PATHSEG_ARC_REL = 11, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19, window.SVGPathSeg.prototype._segmentChanged = function() {
   this._owningPathSegList && this._owningPathSegList.segmentChanged(this)
  }, window.SVGPathSegClosePath = function(e) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, "z", e)
  }, window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegClosePath.prototype.toString = function() {
   return "[object SVGPathSegClosePath]"
  }, window.SVGPathSegClosePath.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter
  }, window.SVGPathSegClosePath.prototype.clone = function() {
   return new window.SVGPathSegClosePath(void 0)
  }, window.SVGPathSegMovetoAbs = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, "M", e), this._x = t, this._y = n
  }, window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegMovetoAbs.prototype.toString = function() {
   return "[object SVGPathSegMovetoAbs]"
  }, window.SVGPathSegMovetoAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegMovetoAbs.prototype.clone = function() {
   return new window.SVGPathSegMovetoAbs(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegMovetoRel = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, "m", e), this._x = t, this._y = n
  }, window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegMovetoRel.prototype.toString = function() {
   return "[object SVGPathSegMovetoRel]"
  }, window.SVGPathSegMovetoRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegMovetoRel.prototype.clone = function() {
   return new window.SVGPathSegMovetoRel(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegMovetoRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegMovetoRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoAbs = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, "L", e), this._x = t, this._y = n
  }, window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoAbs.prototype.toString = function() {
   return "[object SVGPathSegLinetoAbs]"
  }, window.SVGPathSegLinetoAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegLinetoAbs.prototype.clone = function() {
   return new window.SVGPathSegLinetoAbs(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoRel = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, "l", e), this._x = t, this._y = n
  }, window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoRel.prototype.toString = function() {
   return "[object SVGPathSegLinetoRel]"
  }, window.SVGPathSegLinetoRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegLinetoRel.prototype.clone = function() {
   return new window.SVGPathSegLinetoRel(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegLinetoRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegLinetoRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoCubicAbs = function(e, t, n, r, i, o, a) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, "C", e), this._x = t, this._y = n, this._x1 = r, this._y1 = i, this._x2 = o, this._y2 = a
  }, window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoCubicAbs.prototype.toString = function() {
   return "[object SVGPathSegCurvetoCubicAbs]"
  }, window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoCubicAbs.prototype.clone = function() {
   return new window.SVGPathSegCurvetoCubicAbs(void 0, this._x, this._y, this._x1, this._y1, this._x2, this._y2)
  }, Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x1", {
   get: function() {
    return this._x1
   },
   set: function(e) {
    this._x1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y1", {
   get: function() {
    return this._y1
   },
   set: function(e) {
    this._y1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "x2", {
   get: function() {
    return this._x2
   },
   set: function(e) {
    this._x2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, "y2", {
   get: function() {
    return this._y2
   },
   set: function(e) {
    this._y2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoCubicRel = function(e, t, n, r, i, o, a) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, "c", e), this._x = t, this._y = n, this._x1 = r, this._y1 = i, this._x2 = o, this._y2 = a
  }, window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoCubicRel.prototype.toString = function() {
   return "[object SVGPathSegCurvetoCubicRel]"
  }, window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoCubicRel.prototype.clone = function() {
   return new window.SVGPathSegCurvetoCubicRel(void 0, this._x, this._y, this._x1, this._y1, this._x2, this._y2)
  }, Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x1", {
   get: function() {
    return this._x1
   },
   set: function(e) {
    this._x1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y1", {
   get: function() {
    return this._y1
   },
   set: function(e) {
    this._y1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "x2", {
   get: function() {
    return this._x2
   },
   set: function(e) {
    this._x2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, "y2", {
   get: function() {
    return this._y2
   },
   set: function(e) {
    this._y2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoQuadraticAbs = function(e, t, n, r, i) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, "Q", e), this._x = t, this._y = n, this._x1 = r, this._y1 = i
  }, window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function() {
   return "[object SVGPathSegCurvetoQuadraticAbs]"
  }, window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function() {
   return new window.SVGPathSegCurvetoQuadraticAbs(void 0, this._x, this._y, this._x1, this._y1)
  }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "x1", {
   get: function() {
    return this._x1
   },
   set: function(e) {
    this._x1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, "y1", {
   get: function() {
    return this._y1
   },
   set: function(e) {
    this._y1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoQuadraticRel = function(e, t, n, r, i) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, "q", e), this._x = t, this._y = n, this._x1 = r, this._y1 = i
  }, window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function() {
   return "[object SVGPathSegCurvetoQuadraticRel]"
  }, window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function() {
   return new window.SVGPathSegCurvetoQuadraticRel(void 0, this._x, this._y, this._x1, this._y1)
  }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "x1", {
   get: function() {
    return this._x1
   },
   set: function(e) {
    this._x1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, "y1", {
   get: function() {
    return this._y1
   },
   set: function(e) {
    this._y1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegArcAbs = function(e, t, n, r, i, o, a, s) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, "A", e), this._x = t, this._y = n, this._r1 = r, this._r2 = i, this._angle = o, this._largeArcFlag = a, this._sweepFlag = s
  }, window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegArcAbs.prototype.toString = function() {
   return "[object SVGPathSegArcAbs]"
  }, window.SVGPathSegArcAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y
  }, window.SVGPathSegArcAbs.prototype.clone = function() {
   return new window.SVGPathSegArcAbs(void 0, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag)
  }, Object.defineProperty(window.SVGPathSegArcAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "r1", {
   get: function() {
    return this._r1
   },
   set: function(e) {
    this._r1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "r2", {
   get: function() {
    return this._r2
   },
   set: function(e) {
    this._r2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "angle", {
   get: function() {
    return this._angle
   },
   set: function(e) {
    this._angle = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "largeArcFlag", {
   get: function() {
    return this._largeArcFlag
   },
   set: function(e) {
    this._largeArcFlag = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcAbs.prototype, "sweepFlag", {
   get: function() {
    return this._sweepFlag
   },
   set: function(e) {
    this._sweepFlag = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegArcRel = function(e, t, n, r, i, o, a, s) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, "a", e), this._x = t, this._y = n, this._r1 = r, this._r2 = i, this._angle = o, this._largeArcFlag = a, this._sweepFlag = s
  }, window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegArcRel.prototype.toString = function() {
   return "[object SVGPathSegArcRel]"
  }, window.SVGPathSegArcRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y
  }, window.SVGPathSegArcRel.prototype.clone = function() {
   return new window.SVGPathSegArcRel(void 0, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag)
  }, Object.defineProperty(window.SVGPathSegArcRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "r1", {
   get: function() {
    return this._r1
   },
   set: function(e) {
    this._r1 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "r2", {
   get: function() {
    return this._r2
   },
   set: function(e) {
    this._r2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "angle", {
   get: function() {
    return this._angle
   },
   set: function(e) {
    this._angle = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "largeArcFlag", {
   get: function() {
    return this._largeArcFlag
   },
   set: function(e) {
    this._largeArcFlag = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegArcRel.prototype, "sweepFlag", {
   get: function() {
    return this._sweepFlag
   },
   set: function(e) {
    this._sweepFlag = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoHorizontalAbs = function(e, t) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, "H", e), this._x = t
  }, window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function() {
   return "[object SVGPathSegLinetoHorizontalAbs]"
  }, window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x
  }, window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function() {
   return new window.SVGPathSegLinetoHorizontalAbs(void 0, this._x)
  }, Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoHorizontalRel = function(e, t) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, "h", e), this._x = t
  }, window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoHorizontalRel.prototype.toString = function() {
   return "[object SVGPathSegLinetoHorizontalRel]"
  }, window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x
  }, window.SVGPathSegLinetoHorizontalRel.prototype.clone = function() {
   return new window.SVGPathSegLinetoHorizontalRel(void 0, this._x)
  }, Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoVerticalAbs = function(e, t) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, "V", e), this._y = t
  }, window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoVerticalAbs.prototype.toString = function() {
   return "[object SVGPathSegLinetoVerticalAbs]"
  }, window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._y
  }, window.SVGPathSegLinetoVerticalAbs.prototype.clone = function() {
   return new window.SVGPathSegLinetoVerticalAbs(void 0, this._y)
  }, Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegLinetoVerticalRel = function(e, t) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, "v", e), this._y = t
  }, window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegLinetoVerticalRel.prototype.toString = function() {
   return "[object SVGPathSegLinetoVerticalRel]"
  }, window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._y
  }, window.SVGPathSegLinetoVerticalRel.prototype.clone = function() {
   return new window.SVGPathSegLinetoVerticalRel(void 0, this._y)
  }, Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoCubicSmoothAbs = function(e, t, n, r, i) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, "S", e), this._x = t, this._y = n, this._x2 = r, this._y2 = i
  }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function() {
   return "[object SVGPathSegCurvetoCubicSmoothAbs]"
  }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function() {
   return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0, this._x, this._y, this._x2, this._y2)
  }, Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "x2", {
   get: function() {
    return this._x2
   },
   set: function(e) {
    this._x2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, "y2", {
   get: function() {
    return this._y2
   },
   set: function(e) {
    this._y2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoCubicSmoothRel = function(e, t, n, r, i) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, "s", e), this._x = t, this._y = n, this._x2 = r, this._y2 = i
  }, window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function() {
   return "[object SVGPathSegCurvetoCubicSmoothRel]"
  }, window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function() {
   return new window.SVGPathSegCurvetoCubicSmoothRel(void 0, this._x, this._y, this._x2, this._y2)
  }, Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "x2", {
   get: function() {
    return this._x2
   },
   set: function(e) {
    this._x2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, "y2", {
   get: function() {
    return this._y2
   },
   set: function(e) {
    this._y2 = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoQuadraticSmoothAbs = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, "T", e), this._x = t, this._y = n
  }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function() {
   return "[object SVGPathSegCurvetoQuadraticSmoothAbs]"
  }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function() {
   return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathSegCurvetoQuadraticSmoothRel = function(e, t, n) {
   window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, "t", e), this._x = t, this._y = n
  }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype), window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function() {
   return "[object SVGPathSegCurvetoQuadraticSmoothRel]"
  }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function() {
   return this.pathSegTypeAsLetter + " " + this._x + " " + this._y
  }, window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function() {
   return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0, this._x, this._y)
  }, Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, "x", {
   get: function() {
    return this._x
   },
   set: function(e) {
    this._x = e, this._segmentChanged()
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, "y", {
   get: function() {
    return this._y
   },
   set: function(e) {
    this._y = e, this._segmentChanged()
   },
   enumerable: !0
  }), window.SVGPathElement.prototype.createSVGPathSegClosePath = function() {
   return new window.SVGPathSegClosePath(void 0)
  }, window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function(e, t) {

   return new window.SVGPathSegMovetoAbs(void 0, e, t)
  }, window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function(e, t) {
   return new window.SVGPathSegMovetoRel(void 0, e, t)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function(e, t) {
   return new window.SVGPathSegLinetoAbs(void 0, e, t)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function(e, t) {
   return new window.SVGPathSegLinetoRel(void 0, e, t)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function(e, t, n, r, i, o) {
   return new window.SVGPathSegCurvetoCubicAbs(void 0, e, t, n, r, i, o)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function(e, t, n, r, i, o) {
   return new window.SVGPathSegCurvetoCubicRel(void 0, e, t, n, r, i, o)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function(e, t, n, r) {
   return new window.SVGPathSegCurvetoQuadraticAbs(void 0, e, t, n, r)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function(e, t, n, r) {
   return new window.SVGPathSegCurvetoQuadraticRel(void 0, e, t, n, r)
  }, window.SVGPathElement.prototype.createSVGPathSegArcAbs = function(e, t, n, r, i, o, a) {
   return new window.SVGPathSegArcAbs(void 0, e, t, n, r, i, o, a)
  }, window.SVGPathElement.prototype.createSVGPathSegArcRel = function(e, t, n, r, i, o, a) {
   return new window.SVGPathSegArcRel(void 0, e, t, n, r, i, o, a)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function(e) {
   return new window.SVGPathSegLinetoHorizontalAbs(void 0, e)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function(e) {
   return new window.SVGPathSegLinetoHorizontalRel(void 0, e)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function(e) {
   return new window.SVGPathSegLinetoVerticalAbs(void 0, e)
  }, window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function(e) {
   return new window.SVGPathSegLinetoVerticalRel(void 0, e)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function(e, t, n, r) {
   return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0, e, t, n, r)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function(e, t, n, r) {
	
   return new window.SVGPathSegCurvetoCubicSmoothRel(void 0, e, t, n, r)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function(e, t) {
   return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0, e, t)
  }, window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function(e, t) {
   return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0, e, t)
  }, "getPathSegAtLength" in window.SVGPathElement.prototype || (window.SVGPathElement.prototype.getPathSegAtLength = function(e) {
	
	  
   if (void 0 === e || !isFinite(e)) throw "Invalid arguments.";
   var t = document.createElementNS("http://www.w3.org/2000/svg", "path");
 
   t.setAttribute("d", this.getAttribute("d")); 
   
  // var pathdata = t.getPathData();
//console.log(pathdata);

   
   
   
    
	
	
//////
	//svgRibo = t ;   //// claudia: This will send to a global variable the last t.setAttribute call
	//svgRibo.appendChild(svgRibo);
//   
//    
  //console.log(t);
/////   
   
    //console.log(pathdata.length); //2
	//var svg = getNode("svg");
    //document.body.appendChild(svg);
	//saveSvg(svg, 'test.svg')	

   var n = t.pathSegList.numberOfItems - 1;
   if (0 >= n) return 0;
    //   var pathdata = t.getPathData();
   // console.log(pathdata);
   do {
    if (t.pathSegList.removeItem(n), e > t.getTotalLength()) break;
	// var pathdata = t.getPathData();
    //console.log(pathdata);
    n--
   } while (n > 0);
   
    //var pathdata = t.getPathData();
    //console.log(pathdata);
    //console.log(t);
   return n
  })), "SVGPathSegList" in window || (window.SVGPathSegList = function(e) {
	  
 
   this._pathElement = e, this._list = this._parsePath(this._pathElement.getAttribute("d")), this._mutationObserverConfig = {
    attributes: !0,
    attributeFilter: ["d"]
   }, this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this)), this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig)
  }, window.SVGPathSegList.prototype.classname = "SVGPathSegList", Object.defineProperty(window.SVGPathSegList.prototype, "numberOfItems", {
   get: function() {
    return this._checkPathSynchronizedToList(), this._list.length
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathElement.prototype, "pathSegList", {
   get: function() {
    return this._pathSegList || (this._pathSegList = new window.SVGPathSegList(this)), this._pathSegList
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathElement.prototype, "normalizedPathSegList", {
   get: function() {
    return this.pathSegList
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathElement.prototype, "animatedPathSegList", {
   get: function() {
    return this.pathSegList
   },
   enumerable: !0
  }), Object.defineProperty(window.SVGPathElement.prototype, "animatedNormalizedPathSegList", {
   get: function() {
    return this.pathSegList
   },
   enumerable: !0
  }), window.SVGPathSegList.prototype._checkPathSynchronizedToList = function() {
   this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())
  }, window.SVGPathSegList.prototype._updateListFromPathMutations = function(e) {
   if (this._pathElement) {
    var t = !1;
    e.forEach(function(e) {
     "d" == e.attributeName && (t = !0)
    }), t && (this._list = this._parsePath(this._pathElement.getAttribute("d")))
   }
  }, window.SVGPathSegList.prototype._writeListToPath = function() {
   this._pathElementMutationObserver.disconnect(), this._pathElement.setAttribute("d", window.SVGPathSegList._pathSegArrayAsString(this._list)), this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig)
  }, window.SVGPathSegList.prototype.segmentChanged = function() {
   this._writeListToPath()
  }, window.SVGPathSegList.prototype.clear = function() {
   this._checkPathSynchronizedToList(), this._list.forEach(function(e) {
    e._owningPathSegList = null
   }), this._list = [], this._writeListToPath()
  }, window.SVGPathSegList.prototype.initialize = function(e) {
   return this._checkPathSynchronizedToList(), this._list = [e], e._owningPathSegList = this, this._writeListToPath(), e
  }, window.SVGPathSegList.prototype._checkValidIndex = function(e) {
   if (isNaN(e) || 0 > e || e >= this.numberOfItems) throw "INDEX_SIZE_ERR"
  }, window.SVGPathSegList.prototype.getItem = function(e) {
   return this._checkPathSynchronizedToList(), this._checkValidIndex(e), this._list[e]
  }, window.SVGPathSegList.prototype.insertItemBefore = function(e, t) {
   return this._checkPathSynchronizedToList(), t > this.numberOfItems && (t = this.numberOfItems), e._owningPathSegList && (e = e.clone()), this._list.splice(t, 0, e), e._owningPathSegList = this, this._writeListToPath(), e
  }, window.SVGPathSegList.prototype.replaceItem = function(e, t) {
   return this._checkPathSynchronizedToList(), e._owningPathSegList && (e = e.clone()), this._checkValidIndex(t), this._list[t] = e, e._owningPathSegList = this, this._writeListToPath(), e
  }, window.SVGPathSegList.prototype.removeItem = function(e) {
   this._checkPathSynchronizedToList(), this._checkValidIndex(e);
   var t = this._list[e];
   return this._list.splice(e, 1), this._writeListToPath(), t
  }, window.SVGPathSegList.prototype.appendItem = function(e) {
   return this._checkPathSynchronizedToList(), e._owningPathSegList && (e = e.clone()), this._list.push(e), e._owningPathSegList = this, this._writeListToPath(), e
  }, window.SVGPathSegList._pathSegArrayAsString = function(e) {
   var t = "",
    n = !0;
   return e.forEach(function(e) {
    n ? (n = !1, t += e._asPathString()) : t += " " + e._asPathString()
   }), t
  }, window.SVGPathSegList.prototype._parsePath = function(e) {
   if (!e || 0 == e.length) return [];
   var t = this,
    n = function() {
     this.pathSegList = []
    };
   n.prototype.appendSegment = function(e) {
    this.pathSegList.push(e)
   };
   var r = function(e) {
    this._string = e, this._currentIndex = 0, this._endIndex = this._string.length, this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN, this._skipOptionalSpaces()
   };
   r.prototype._isCurrentSpace = function() {
    var e = this._string[this._currentIndex];
    return " " >= e && (" " == e || "\n" == e || "	" == e || "\r" == e || "\f" == e)
   }, r.prototype._skipOptionalSpaces = function() {
    for (; this._currentIndex < this._endIndex && this._isCurrentSpace();) this._currentIndex++;
    return this._currentIndex < this._endIndex
   }, r.prototype._skipOptionalSpacesOrDelimiter = function() {
    return this._currentIndex < this._endIndex && !this._isCurrentSpace() && "," != this._string.charAt(this._currentIndex) ? !1 : (this._skipOptionalSpaces() && this._currentIndex < this._endIndex && "," == this._string.charAt(this._currentIndex) && (this._currentIndex++, this._skipOptionalSpaces()), this._currentIndex < this._endIndex)
   }, r.prototype.hasMoreData = function() {
    return this._currentIndex < this._endIndex
   }, r.prototype.peekSegmentType = function() {
    var e = this._string[this._currentIndex];
    return this._pathSegTypeFromChar(e)
   }, r.prototype._pathSegTypeFromChar = function(e) {
    switch (e) {
     case "Z":
     case "z":
      return window.SVGPathSeg.PATHSEG_CLOSEPATH;
     case "M":
      return window.SVGPathSeg.PATHSEG_MOVETO_ABS;
     case "m":
      return window.SVGPathSeg.PATHSEG_MOVETO_REL;
     case "L":
      return window.SVGPathSeg.PATHSEG_LINETO_ABS;
     case "l":
      return window.SVGPathSeg.PATHSEG_LINETO_REL;
     case "C":
      return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;
     case "c":
      return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;
     case "Q":
      return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;
     case "q":
      return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;
     case "A":
      return window.SVGPathSeg.PATHSEG_ARC_ABS;
     case "a":
      return window.SVGPathSeg.PATHSEG_ARC_REL;
     case "H":
      return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;
     case "h":
      return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;
     case "V":
      return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;
     case "v":
      return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;
     case "S":
      return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;
     case "s":
      return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;
     case "T":
      return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;
     case "t":
      return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;
     default:
      return window.SVGPathSeg.PATHSEG_UNKNOWN
    }
   }, r.prototype._nextCommandHelper = function(e, t) {
    return ("+" == e || "-" == e || "." == e || e >= "0" && "9" >= e) && t != window.SVGPathSeg.PATHSEG_CLOSEPATH ? t == window.SVGPathSeg.PATHSEG_MOVETO_ABS ? window.SVGPathSeg.PATHSEG_LINETO_ABS : t == window.SVGPathSeg.PATHSEG_MOVETO_REL ? window.SVGPathSeg.PATHSEG_LINETO_REL : t : window.SVGPathSeg.PATHSEG_UNKNOWN
   }, r.prototype.initialCommandIsMoveTo = function() {
    if (!this.hasMoreData()) return !0;
    var e = this.peekSegmentType();
    return e == window.SVGPathSeg.PATHSEG_MOVETO_ABS || e == window.SVGPathSeg.PATHSEG_MOVETO_REL
   }, r.prototype._parseNumber = function() {
    var e = 0,
     t = 0,
     n = 1,
     r = 0,
     i = 1,
     o = 1,
     a = this._currentIndex;
    if (this._skipOptionalSpaces(), this._currentIndex < this._endIndex && "+" == this._string.charAt(this._currentIndex) ? this._currentIndex++ : this._currentIndex < this._endIndex && "-" == this._string.charAt(this._currentIndex) && (this._currentIndex++, i = -1), this._currentIndex == this._endIndex || (this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") && "." != this._string.charAt(this._currentIndex)) return void 0;
    for (var s = this._currentIndex; this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9";) this._currentIndex++;
    if (this._currentIndex != s)
     for (var u = this._currentIndex - 1, l = 1; u >= s;) t += l * (this._string.charAt(u--) - "0"), l *= 10;
    if (this._currentIndex < this._endIndex && "." == this._string.charAt(this._currentIndex)) {
     if (this._currentIndex++, this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") return void 0;
     for (; this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9";) n *= 10, r += (this._string.charAt(this._currentIndex) - "0") / n, this._currentIndex += 1
    }
    if (this._currentIndex != a && this._currentIndex + 1 < this._endIndex && ("e" == this._string.charAt(this._currentIndex) || "E" == this._string.charAt(this._currentIndex)) && "x" != this._string.charAt(this._currentIndex + 1) && "m" != this._string.charAt(this._currentIndex + 1)) {
     if (this._currentIndex++, "+" == this._string.charAt(this._currentIndex) ? this._currentIndex++ : "-" == this._string.charAt(this._currentIndex) && (this._currentIndex++, o = -1), this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") return void 0;
     for (; this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9";) e *= 10, e += this._string.charAt(this._currentIndex) - "0", this._currentIndex++
    }
    var c = t + r;
    return c *= i, e && (c *= Math.pow(10, o * e)), a == this._currentIndex ? void 0 : (this._skipOptionalSpacesOrDelimiter(), c)
   }, r.prototype._parseArcFlag = function() {
    if (this._currentIndex >= this._endIndex) return void 0;
    var e = !1,
     t = this._string.charAt(this._currentIndex++);
    if ("0" == t) e = !1;
    else {
     if ("1" != t) return void 0;
     e = !0
    }
    return this._skipOptionalSpacesOrDelimiter(), e
   }, r.prototype.parseSegment = function() {
    var e = this._string[this._currentIndex],
     n = this._pathSegTypeFromChar(e);
    if (n == window.SVGPathSeg.PATHSEG_UNKNOWN) {
     if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN) return null;
     if (n = this._nextCommandHelper(e, this._previousCommand), n == window.SVGPathSeg.PATHSEG_UNKNOWN) return null
    } else this._currentIndex++;
    switch (this._previousCommand = n, n) {
     case window.SVGPathSeg.PATHSEG_MOVETO_REL:
      return new window.SVGPathSegMovetoRel(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_MOVETO_ABS:
      return new window.SVGPathSegMovetoAbs(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_REL:
      return new window.SVGPathSegLinetoRel(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_ABS:
      return new window.SVGPathSegLinetoAbs(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:
      return new window.SVGPathSegLinetoHorizontalRel(t, this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:
      return new window.SVGPathSegLinetoHorizontalAbs(t, this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:
      return new window.SVGPathSegLinetoVerticalRel(t, this._parseNumber());
     case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:
      return new window.SVGPathSegLinetoVerticalAbs(t, this._parseNumber());
     case window.SVGPathSeg.PATHSEG_CLOSEPATH:
      return this._skipOptionalSpaces(), new window.SVGPathSegClosePath(t);
     case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       x2: this._parseNumber(),
       y2: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoCubicRel(t, r.x, r.y, r.x1, r.y1, r.x2, r.y2);
     case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       x2: this._parseNumber(),
       y2: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoCubicAbs(t, r.x, r.y, r.x1, r.y1, r.x2, r.y2);
     case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:
      var r = {
       x2: this._parseNumber(),
       y2: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoCubicSmoothRel(t, r.x, r.y, r.x2, r.y2);
     case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:
      var r = {
       x2: this._parseNumber(),
       y2: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoCubicSmoothAbs(t, r.x, r.y, r.x2, r.y2);
     case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoQuadraticRel(t, r.x, r.y, r.x1, r.y1);
     case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegCurvetoQuadraticAbs(t, r.x, r.y, r.x1, r.y1);
     case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:
      return new window.SVGPathSegCurvetoQuadraticSmoothRel(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:
      return new window.SVGPathSegCurvetoQuadraticSmoothAbs(t, this._parseNumber(), this._parseNumber());
     case window.SVGPathSeg.PATHSEG_ARC_REL:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       arcAngle: this._parseNumber(),
       arcLarge: this._parseArcFlag(),
       arcSweep: this._parseArcFlag(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegArcRel(t, r.x, r.y, r.x1, r.y1, r.arcAngle, r.arcLarge, r.arcSweep);
     case window.SVGPathSeg.PATHSEG_ARC_ABS:
      var r = {
       x1: this._parseNumber(),
       y1: this._parseNumber(),
       arcAngle: this._parseNumber(),
       arcLarge: this._parseArcFlag(),
       arcSweep: this._parseArcFlag(),
       x: this._parseNumber(),
       y: this._parseNumber()
      };
      return new window.SVGPathSegArcAbs(t, r.x, r.y, r.x1, r.y1, r.arcAngle, r.arcLarge, r.arcSweep);
     default:
      throw "Unknown path seg type."
    }
   };
   var i = new n,
    o = new r(e);
   if (!o.initialCommandIsMoveTo()) return [];
   for (; o.hasMoreData();) {
    var a = o.parseSegment();
	

	
    if (!a) return [];
    i.appendSegment(a)
   }

   return i.pathSegList

  })
 }(), ! function(e, t) {
  "undefined" != typeof module && module.exports ? module.exports = t() : "function" == typeof define && define.amd ? define(e, t) : this[e] = t()
 }("bowser", function() {
  function e(e) {
   function t(t) {
    var n = e.match(t);
    return n && n.length > 1 && n[1] || ""
   }

   function n(t) {
    var n = e.match(t);
    return n && n.length > 1 && n[2] || ""
   }
   var r, i = t(/(ipod|iphone|ipad)/i).toLowerCase(),
    o = /like android/i.test(e),
    s = !o && /android/i.test(e),
    u = /nexus\s*[0-6]\s*/i.test(e),
    l = !u && /nexus\s*[0-9]+/i.test(e),
    c = /CrOS/.test(e),
    h = /silk/i.test(e),
    p = /sailfish/i.test(e),
    d = /tizen/i.test(e),
    f = /(web|hpw)os/i.test(e),
    m = /windows phone/i.test(e),
    g = (/SamsungBrowser/i.test(e), !m && /windows/i.test(e)),
    v = !i && !h && /macintosh/i.test(e),
    y = !s && !p && !d && !f && /linux/i.test(e),
    b = t(/edge\/(\d+(\.\d+)?)/i),
    w = t(/version\/(\d+(\.\d+)?)/i),
    x = /tablet/i.test(e),
    _ = !x && /[^-]mobi/i.test(e),
    S = /xbox/i.test(e);
   /opera/i.test(e) ? r = {
    name: "Opera",
    opera: a,
    version: w || t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)
   } : /opr|opios/i.test(e) ? r = {
    name: "Opera",
    opera: a,
    version: t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i) || w
   } : /SamsungBrowser/i.test(e) ? r = {
    name: "Samsung Internet for Android",
    samsungBrowser: a,
    version: w || t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)
   } : /coast/i.test(e) ? r = {
    name: "Opera Coast",
    coast: a,
    version: w || t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)
   } : /yabrowser/i.test(e) ? r = {
    name: "Yandex Browser",
    yandexbrowser: a,
    version: w || t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)
   } : /ucbrowser/i.test(e) ? r = {
    name: "UC Browser",
    ucbrowser: a,
    version: t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)
   } : /mxios/i.test(e) ? r = {
    name: "Maxthon",
    maxthon: a,
    version: t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)
   } : /epiphany/i.test(e) ? r = {
    name: "Epiphany",
    epiphany: a,
    version: t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)
   } : /puffin/i.test(e) ? r = {
    name: "Puffin",
    puffin: a,
    version: t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)
   } : /sleipnir/i.test(e) ? r = {
    name: "Sleipnir",
    sleipnir: a,
    version: t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)
   } : /k-meleon/i.test(e) ? r = {
    name: "K-Meleon",
    kMeleon: a,
    version: t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)
   } : m ? (r = {
    name: "Windows Phone",
    windowsphone: a
   }, b ? (r.msedge = a, r.version = b) : (r.msie = a, r.version = t(/iemobile\/(\d+(\.\d+)?)/i))) : /msie|trident/i.test(e) ? r = {
    name: "Internet Explorer",
    msie: a,
    version: t(/(?:msie |rv:)(\d+(\.\d+)?)/i)
   } : c ? r = {
    name: "Chrome",
    chromeos: a,
    chromeBook: a,
    chrome: a,
    version: t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
   } : /chrome.+? edge/i.test(e) ? r = {
    name: "Microsoft Edge",
    msedge: a,
    version: b
   } : /vivaldi/i.test(e) ? r = {
    name: "Vivaldi",
    vivaldi: a,
    version: t(/vivaldi\/(\d+(\.\d+)?)/i) || w
   } : p ? r = {
    name: "Sailfish",
    sailfish: a,
    version: t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)
   } : /seamonkey\//i.test(e) ? r = {
    name: "SeaMonkey",
    seamonkey: a,
    version: t(/seamonkey\/(\d+(\.\d+)?)/i)
   } : /firefox|iceweasel|fxios/i.test(e) ? (r = {
    name: "Firefox",
    firefox: a,
    version: t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)
   }, /\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e) && (r.firefoxos = a)) : h ? r = {
    name: "Amazon Silk",
    silk: a,
    version: t(/silk\/(\d+(\.\d+)?)/i)
   } : /phantom/i.test(e) ? r = {
    name: "PhantomJS",
    phantom: a,
    version: t(/phantomjs\/(\d+(\.\d+)?)/i)
   } : /slimerjs/i.test(e) ? r = {
    name: "SlimerJS",
    slimer: a,
    version: t(/slimerjs\/(\d+(\.\d+)?)/i)
   } : /blackberry|\bbb\d+/i.test(e) || /rim\stablet/i.test(e) ? r = {
    name: "BlackBerry",
    blackberry: a,
    version: w || t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)
   } : f ? (r = {
    name: "WebOS",
    webos: a,
    version: w || t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)
   }, /touchpad\//i.test(e) && (r.touchpad = a)) : /bada/i.test(e) ? r = {
    name: "Bada",
    bada: a,
    version: t(/dolfin\/(\d+(\.\d+)?)/i)
   } : d ? r = {
    name: "Tizen",
    tizen: a,
    version: t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i) || w
   } : /qupzilla/i.test(e) ? r = {
    name: "QupZilla",
    qupzilla: a,
    version: t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i) || w
   } : /chromium/i.test(e) ? r = {
    name: "Chromium",
    chromium: a,
    version: t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i) || w
   } : /chrome|crios|crmo/i.test(e) ? r = {
    name: "Chrome",
    chrome: a,
    version: t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)
   } : s ? r = {
    name: "Android",
    version: w
   } : /safari|applewebkit/i.test(e) ? (r = {
    name: "Safari",
    safari: a
   }, w && (r.version = w)) : i ? (r = {
    name: "iphone" == i ? "iPhone" : "ipad" == i ? "iPad" : "iPod"
   }, w && (r.version = w)) : r = /googlebot/i.test(e) ? {
    name: "Googlebot",
    googlebot: a,
    version: t(/googlebot\/(\d+(\.\d+))/i) || w
   } : {
    name: t(/^(.*)\/(.*) /),
    version: n(/^(.*)\/(.*) /)
   }, !r.msedge && /(apple)?webkit/i.test(e) ? (/(apple)?webkit\/537\.36/i.test(e) ? (r.name = r.name || "Blink", r.blink = a) : (r.name = r.name || "Webkit", r.webkit = a), !r.version && w && (r.version = w)) : !r.opera && /gecko\//i.test(e) && (r.name = r.name || "Gecko", r.gecko = a, r.version = r.version || t(/gecko\/(\d+(\.\d+)?)/i)), r.msedge || !s && !r.silk ? i ? (r[i] = a, r.ios = a) : v ? r.mac = a : S ? r.xbox = a : g ? r.windows = a : y && (r.linux = a) : r.android = a;
   var C = "";
   r.windowsphone ? C = t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i) : i ? (C = t(/os (\d+([_\s]\d+)*) like mac os x/i), C = C.replace(/[_\s]/g, ".")) : s ? C = t(/android[ \/-](\d+(\.\d+)*)/i) : r.webos ? C = t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i) : r.blackberry ? C = t(/rim\stablet\sos\s(\d+(\.\d+)*)/i) : r.bada ? C = t(/bada\/(\d+(\.\d+)*)/i) : r.tizen && (C = t(/tizen[\/\s](\d+(\.\d+)*)/i)), C && (r.osversion = C);
   var E = C.split(".")[0];
   return x || l || "ipad" == i || s && (3 == E || E >= 4 && !_) || r.silk ? r.tablet = a : (_ || "iphone" == i || "ipod" == i || s || u || r.blackberry || r.webos || r.bada) && (r.mobile = a), r.msedge || r.msie && r.version >= 10 || r.yandexbrowser && r.version >= 15 || r.vivaldi && r.version >= 1 || r.chrome && r.version >= 20 || r.samsungBrowser && r.version >= 4 || r.firefox && r.version >= 20 || r.safari && r.version >= 6 || r.opera && r.version >= 10 || r.ios && r.osversion && r.osversion.split(".")[0] >= 6 || r.blackberry && r.version >= 10.1 || r.chromium && r.version >= 20 ? r.a = a : r.msie && r.version < 10 || r.chrome && r.version < 20 || r.firefox && r.version < 20 || r.safari && r.version < 6 || r.opera && r.version < 10 || r.ios && r.osversion && r.osversion.split(".")[0] < 6 || r.chromium && r.version < 20 ? r.c = a : r.x = a, r
  }

  function t(e) {
   return e.split(".").length
  }

  function n(e, t) {
   var n, r = [];
   if (Array.prototype.map) return Array.prototype.map.call(e, t);
   for (n = 0; n < e.length; n++) r.push(t(e[n]));
   return r
  }

  function r(e) {
   for (var r = Math.max(t(e[0]), t(e[1])), i = n(e, function(e) {
     var i = r - t(e);
     return e += new Array(i + 1).join(".0"), n(e.split("."), function(e) {
      return new Array(20 - e.length).join("0") + e
     }).reverse()
    }); --r >= 0;) {
    if (i[0][r] > i[1][r]) return 1;
    if (i[0][r] !== i[1][r]) return -1;
    if (0 === r) return 0
   }
  }

  function i(t, n, i) {
   var o = s;
   "string" == typeof n && (i = n, n = void 0), void 0 === n && (n = !1), i && (o = e(i));
   var a = "" + o.version;
   for (var u in t)
    if (t.hasOwnProperty(u) && o[u]) return r([a, t[u]]) < 0;
   return n
  }

  function o(e, t, n) {
   return !i(e, t, n)
  }
  var a = !0,
   s = e("undefined" != typeof navigator ? navigator.userAgent || "" : "");
  return s.test = function(e) {
   for (var t = 0; t < e.length; ++t) {
    var n = e[t];
    if ("string" == typeof n && n in s) return !0
   }
   return !1
  }, s.isUnsupportedBrowser = i, s.compareVersions = r, s.check = o, s._detect = e, s
 });
var __LiteMol_Plugin = function() {
 "use strict";
 var e;
 ! function() {
  var t = {},
   n = {};
  ! function(e) {
   if ("object" == typeof t && "undefined" != typeof n) n.exports = e();
   else if ("function" == typeof define && define.amd) define([], e);
   else {
    var r;
    r = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, r.React = e()
   }
  }(function() {
   return function e(t, n, r) {
    function i(a, s) {
     if (!n[a]) {
      if (!t[a]) {
       var u = "function" == typeof require && require;
       if (!s && u) return u(a, !0);
       if (o) return o(a, !0);
       var l = new Error("Cannot find module '" + a + "'");
       throw l.code = "MODULE_NOT_FOUND", l
      }
      var c = n[a] = {
       exports: {}
      };
      t[a][0].call(c.exports, function(e) {
       var n = t[a][1][e];
       return i(n ? n : e)
      }, c, c.exports, e, t, n, r)
     }
     return n[a].exports
    }
    for (var o = "function" == typeof require && require, a = 0; a < r.length; a++) i(r[a]);
    return i
   }({
    1: [function(e, t) {
     var n = e(40),
      r = e(148),
      i = {
       focusDOMComponent: function() {
        r(n.getNodeFromInstance(this))
       }
      };
     t.exports = i
    }, {
     148: 148,
     40: 40
    }],
    2: [function(e, t) {
     function n() {
      var e = window.opera;
      return "object" == typeof e && "function" == typeof e.version && parseInt(e.version(), 10) <= 12
     }

     function r(e) {
      return (e.ctrlKey || e.altKey || e.metaKey) && !(e.ctrlKey && e.altKey)
     }

     function i(e) {
      switch (e) {
       case M.topCompositionStart:
        return A.compositionStart;
       case M.topCompositionEnd:
        return A.compositionEnd;
       case M.topCompositionUpdate:
        return A.compositionUpdate
      }
     }

     function o(e, t) {
      return e === M.topKeyDown && t.keyCode === w
     }

     function a(e, t) {
      switch (e) {
       case M.topKeyUp:
        return -1 !== b.indexOf(t.keyCode);
       case M.topKeyDown:
        return t.keyCode !== w;
       case M.topKeyPress:
       case M.topMouseDown:
       case M.topBlur:
        return !0;
       default:
        return !1
      }
     }

     function s(e) {
      var t = e.detail;
      return "object" == typeof t && "data" in t ? t.data : null
     }

     function u(e, t, n, r) {
      var u, l;
      if (x ? u = i(e) : R ? a(e, n) && (u = A.compositionEnd) : o(e, n) && (u = A.compositionStart), !u) return null;
      C && (R || u !== A.compositionStart ? u === A.compositionEnd && R && (l = R.getData()) : R = m.getPooled(r));
      var c = g.getPooled(u, t, n, r);
      if (l) c.data = l;
      else {
       var h = s(n);
       null !== h && (c.data = h)
      }
      return d.accumulateTwoPhaseDispatches(c), c
     }

     function l(e, t) {
      switch (e) {
       case M.topCompositionEnd:
        return s(t);
       case M.topKeyPress:
        var n = t.which;
        return n !== E ? null : (P = !0, T);
       case M.topTextInput:
        var r = t.data;
        return r === T && P ? null : r;
       default:
        return null
      }
     }

     function c(e, t) {
      if (R) {
       if (e === M.topCompositionEnd || a(e, t)) {
        var n = R.getData();
        return m.release(R), R = null, n
       }
       return null
      }
      switch (e) {
       case M.topPaste:
        return null;
       case M.topKeyPress:
        return t.which && !r(t) ? String.fromCharCode(t.which) : null;
       case M.topCompositionEnd:
        return C ? null : t.data;
       default:
        return null
      }
     }

     function h(e, t, n, r) {
      var i;
      if (i = S ? l(e, n) : c(e, n), !i) return null;
      var o = v.getPooled(A.beforeInput, t, n, r);
      return o.data = i, d.accumulateTwoPhaseDispatches(o), o
     }
     var p = e(16),
      d = e(20),
      f = e(140),
      m = e(21),
      g = e(95),
      v = e(99),
      y = e(158),
      b = [9, 13, 27, 32],
      w = 229,
      x = f.canUseDOM && "CompositionEvent" in window,
      _ = null;
     f.canUseDOM && "documentMode" in document && (_ = document.documentMode);
     var S = f.canUseDOM && "TextEvent" in window && !_ && !n(),
      C = f.canUseDOM && (!x || _ && _ > 8 && 11 >= _),
      E = 32,
      T = String.fromCharCode(E),
      M = p.topLevelTypes,
      A = {
       beforeInput: {
        phasedRegistrationNames: {
         bubbled: y({
          onBeforeInput: null
         }),
         captured: y({
          onBeforeInputCapture: null
         })
        },
        dependencies: [M.topCompositionEnd, M.topKeyPress, M.topTextInput, M.topPaste]
       },
       compositionEnd: {
        phasedRegistrationNames: {
         bubbled: y({
          onCompositionEnd: null
         }),
         captured: y({
          onCompositionEndCapture: null
         })
        },
        dependencies: [M.topBlur, M.topCompositionEnd, M.topKeyDown, M.topKeyPress, M.topKeyUp, M.topMouseDown]
       },
       compositionStart: {
        phasedRegistrationNames: {
         bubbled: y({
          onCompositionStart: null
         }),
         captured: y({
          onCompositionStartCapture: null
         })
        },
        dependencies: [M.topBlur, M.topCompositionStart, M.topKeyDown, M.topKeyPress, M.topKeyUp, M.topMouseDown]
       },
       compositionUpdate: {
        phasedRegistrationNames: {
         bubbled: y({
          onCompositionUpdate: null
         }),
         captured: y({
          onCompositionUpdateCapture: null
         })
        },
        dependencies: [M.topBlur, M.topCompositionUpdate, M.topKeyDown, M.topKeyPress, M.topKeyUp, M.topMouseDown]
       }
      },
      P = !1,
      R = null,
      I = {
       eventTypes: A,
       extractEvents: function(e, t, n, r) {
        return [u(e, t, n, r), h(e, t, n, r)]
       }
      };
     t.exports = I
    }, {
     140: 140,
     158: 158,
     16: 16,
     20: 20,
     21: 21,
     95: 95,
     99: 99
    }],
    3: [function(e, t) {
     function n(e, t) {
      return e + t.charAt(0).toUpperCase() + t.substring(1)
     }
     var r = {
       animationIterationCount: !0,
       borderImageOutset: !0,
       borderImageSlice: !0,
       borderImageWidth: !0,
       boxFlex: !0,
       boxFlexGroup: !0,
       boxOrdinalGroup: !0,
       columnCount: !0,
       flex: !0,
       flexGrow: !0,
       flexPositive: !0,
       flexShrink: !0,
       flexNegative: !0,
       flexOrder: !0,
       gridRow: !0,
       gridColumn: !0,
       fontWeight: !0,
       lineClamp: !0,
       lineHeight: !0,
       opacity: !0,
       order: !0,
       orphans: !0,
       tabSize: !0,
       widows: !0,
       zIndex: !0,
       zoom: !0,
       fillOpacity: !0,
       floodOpacity: !0,
       stopOpacity: !0,
       strokeDasharray: !0,
       strokeDashoffset: !0,
       strokeMiterlimit: !0,
       strokeOpacity: !0,
       strokeWidth: !0
      },
      i = ["Webkit", "ms", "Moz", "O"];
     Object.keys(r).forEach(function(e) {
      i.forEach(function(t) {
       r[n(t, e)] = r[e]
      })
     });
     var o = {
       background: {
        backgroundAttachment: !0,
        backgroundColor: !0,
        backgroundImage: !0,
        backgroundPositionX: !0,
        backgroundPositionY: !0,
        backgroundRepeat: !0
       },
       backgroundPosition: {
        backgroundPositionX: !0,
        backgroundPositionY: !0
       },
       border: {
        borderWidth: !0,
        borderStyle: !0,
        borderColor: !0
       },
       borderBottom: {
        borderBottomWidth: !0,
        borderBottomStyle: !0,
        borderBottomColor: !0
       },
       borderLeft: {
        borderLeftWidth: !0,
        borderLeftStyle: !0,
        borderLeftColor: !0
       },
       borderRight: {
        borderRightWidth: !0,
        borderRightStyle: !0,
        borderRightColor: !0
       },
       borderTop: {
        borderTopWidth: !0,
        borderTopStyle: !0,
        borderTopColor: !0
       },
       font: {
        fontStyle: !0,
        fontVariant: !0,
        fontWeight: !0,
        fontSize: !0,
        lineHeight: !0,
        fontFamily: !0
       },
       outline: {
        outlineWidth: !0,
        outlineStyle: !0,
        outlineColor: !0
       }
      },
      a = {
       isUnitlessNumber: r,
       shorthandPropertyExpansions: o
      };
     t.exports = a
    }, {}],
    4: [function(e, t) {
     var n = e(3),
      r = e(140),
      i = (e(66), e(142), e(113)),
      o = e(153),
      a = e(159),
      s = (e(161), a(function(e) {
       return o(e)
      })),
      u = !1,
      l = "cssFloat";
     if (r.canUseDOM) {
      var c = document.createElement("div").style;
      try {
       c.font = ""
      } catch (e) {
       u = !0
      }
      void 0 === document.documentElement.style.cssFloat && (l = "styleFloat")
     }
     var h = {
      createMarkupForStyles: function(e, t) {
       var n = "";
       for (var r in e)
        if (e.hasOwnProperty(r)) {
         var o = e[r];
         null != o && (n += s(r) + ":", n += i(r, o, t) + ";")
        } return n || null
      },
      setValueForStyles: function(e, t, r) {
       var o = e.style;
       for (var a in t)
        if (t.hasOwnProperty(a)) {
         var s = i(a, t[a], r);
         if ("float" !== a && "cssFloat" !== a || (a = l), s) o[a] = s;
         else {
          var c = u && n.shorthandPropertyExpansions[a];
          if (c)
           for (var h in c) o[h] = "";
          else o[a] = ""
         }
        }
      }
     };
     t.exports = h
    }, {
     113: 113,
     140: 140,
     142: 142,
     153: 153,
     159: 159,
     161: 161,
     3: 3,
     66: 66
    }],
    5: [function(e, t) {
     function n() {
      this._callbacks = null, this._contexts = null
     }
     var r = e(132),
      i = e(162),
      o = e(25);
     e(154), i(n.prototype, {
      enqueue: function(e, t) {
       this._callbacks = this._callbacks || [], this._contexts = this._contexts || [], this._callbacks.push(e), this._contexts.push(t)
      },
      notifyAll: function() {
       var e = this._callbacks,
        t = this._contexts;
       if (e) {
        e.length !== t.length ? r("24") : void 0, this._callbacks = null, this._contexts = null;
        for (var n = 0; n < e.length; n++) e[n].call(t[n]);
        e.length = 0, t.length = 0
       }
      },
      checkpoint: function() {
       return this._callbacks ? this._callbacks.length : 0
      },
      rollback: function(e) {
       this._callbacks && (this._callbacks.length = e, this._contexts.length = e)
      },
      reset: function() {
       this._callbacks = null, this._contexts = null
      },
      destructor: function() {
       this.reset()
      }
     }), o.addPoolingTo(n), t.exports = n
    }, {
     132: 132,
     154: 154,
     162: 162,
     25: 25
    }],
    6: [function(e, t) {
     function n(e) {
      var t = e.nodeName && e.nodeName.toLowerCase();
      return "select" === t || "input" === t && "file" === e.type
     }

     function r(e) {
      var t = S.getPooled(P.change, I, e, C(e));
      b.accumulateTwoPhaseDispatches(t), _.batchedUpdates(i, t)
     }

     function i(e) {
      y.enqueueEvents(e), y.processEventQueue(!1)
     }

     function o(e, t) {
      R = e, I = t, R.attachEvent("onchange", r)
     }

     function a() {
      R && (R.detachEvent("onchange", r), R = null, I = null)
     }

     function s(e, t) {
      return e === A.topChange ? t : void 0
     }

     function u(e, t, n) {
      e === A.topFocus ? (a(), o(t, n)) : e === A.topBlur && a()
     }

     function l(e, t) {
      R = e, I = t, k = e.value, D = Object.getOwnPropertyDescriptor(e.constructor.prototype, "value"), Object.defineProperty(R, "value", B), R.attachEvent ? R.attachEvent("onpropertychange", h) : R.addEventListener("propertychange", h, !1)
     }

     function c() {
      R && (delete R.value, R.detachEvent ? R.detachEvent("onpropertychange", h) : R.removeEventListener("propertychange", h, !1), R = null, I = null, k = null, D = null)
     }

     function h(e) {
      if ("value" === e.propertyName) {
       var t = e.srcElement.value;
       t !== k && (k = t, r(e))
      }
     }

     function p(e, t) {
      return e === A.topInput ? t : void 0
     }

     function d(e, t, n) {
      e === A.topFocus ? (c(), l(t, n)) : e === A.topBlur && c()
     }

     function f(e) {
      return e !== A.topSelectionChange && e !== A.topKeyUp && e !== A.topKeyDown || !R || R.value === k ? void 0 : (k = R.value, I)
     }

     function m(e) {
      return e.nodeName && "input" === e.nodeName.toLowerCase() && ("checkbox" === e.type || "radio" === e.type)
     }

     function g(e, t) {
      return e === A.topClick ? t : void 0
     }
     var v = e(16),
      y = e(17),
      b = e(20),
      w = e(140),
      x = e(40),
      _ = e(88),
      S = e(97),
      C = e(121),
      E = e(128),
      T = e(129),
      M = e(158),
      A = v.topLevelTypes,
      P = {
       change: {
        phasedRegistrationNames: {
         bubbled: M({
          onChange: null
         }),
         captured: M({
          onChangeCapture: null
         })
        },
        dependencies: [A.topBlur, A.topChange, A.topClick, A.topFocus, A.topInput, A.topKeyDown, A.topKeyUp, A.topSelectionChange]
       }
      },
      R = null,
      I = null,
      k = null,
      D = null,
      V = !1;
     w.canUseDOM && (V = E("change") && (!("documentMode" in document) || document.documentMode > 8));
     var L = !1;
     w.canUseDOM && (L = E("input") && (!("documentMode" in document) || document.documentMode > 11));
     var B = {
       get: function() {
        return D.get.call(this)
       },
       set: function(e) {
        k = "" + e, D.set.call(this, e)
       }
      },
      O = {
       eventTypes: P,
       extractEvents: function(e, t, r, i) {
        var o, a, l = t ? x.getNodeFromInstance(t) : window;
        if (n(l) ? V ? o = s : a = u : T(l) ? L ? o = p : (o = f, a = d) : m(l) && (o = g), o) {
         var c = o(e, t);
         if (c) {
          var h = S.getPooled(P.change, c, r, i);
          return h.type = "change", b.accumulateTwoPhaseDispatches(h), h
         }
        }
        a && a(e, l, t)
       }
      };
     t.exports = O
    }, {
     121: 121,
     128: 128,
     129: 129,
     140: 140,
     158: 158,
     16: 16,
     17: 17,
     20: 20,
     40: 40,
     88: 88,
     97: 97
    }],
    7: [function(e, t) {
     function n(e, t) {
      return Array.isArray(t) && (t = t[1]), t ? t.nextSibling : e.firstChild
     }

     function r(e, t, n) {
      l.insertTreeBefore(e, t, n)
     }

     function i(e, t, n) {
      Array.isArray(t) ? a(e, t[0], t[1], n) : m(e, t, n)
     }

     function o(e, t) {
      if (Array.isArray(t)) {
       var n = t[1];
       t = t[0], s(e, t, n), e.removeChild(n)
      }
      e.removeChild(t)
     }

     function a(e, t, n, r) {
      for (var i = t;;) {
       var o = i.nextSibling;
       if (m(e, i, r), i === n) break;
       i = o
      }
     }

     function s(e, t, n) {
      for (;;) {
       var r = t.nextSibling;
       if (r === n) break;
       e.removeChild(r)
      }
     }

     function u(e, t, n) {
      var r = e.parentNode,
       i = e.nextSibling;
      i === t ? n && m(r, document.createTextNode(n), i) : n ? (f(i, n), s(r, i, t)) : s(r, e, t)
     }
     var l = e(8),
      c = e(12),
      h = e(70),
      p = (e(40), e(66), e(112)),
      d = e(134),
      f = e(135),
      m = p(function(e, t, n) {
       e.insertBefore(t, n)
      }),
      g = c.dangerouslyReplaceNodeWithMarkup,
      v = {
       dangerouslyReplaceNodeWithMarkup: g,
       replaceDelimitedText: u,
       processUpdates: function(e, t) {
        for (var a = 0; a < t.length; a++) {
         var s = t[a];
         switch (s.type) {
          case h.INSERT_MARKUP:
           r(e, s.content, n(e, s.afterNode));
           break;
          case h.MOVE_EXISTING:
           i(e, s.fromNode, n(e, s.afterNode));
           break;
          case h.SET_MARKUP:
           d(e, s.content);
           break;
          case h.TEXT_CONTENT:
           f(e, s.content);
           break;
          case h.REMOVE_NODE:
           o(e, s.fromNode)
         }
        }
       }
      };
     t.exports = v
    }, {
     112: 112,
     12: 12,
     134: 134,
     135: 135,
     40: 40,
     66: 66,
     70: 70,
     8: 8
    }],
    8: [function(e, t) {
     function n(e) {
      if (m) {
       var t = e.node,
        n = e.children;
       if (n.length)
        for (var r = 0; r < n.length; r++) g(t, n[r], null);
       else null != e.html ? c(t, e.html) : null != e.text && p(t, e.text)
      }
     }

     function r(e, t) {
      e.parentNode.replaceChild(t.node, e), n(t)
     }

     function i(e, t) {
      m ? e.children.push(t) : e.node.appendChild(t.node)
     }

     function o(e, t) {
      m ? e.html = t : c(e.node, t)
     }

     function a(e, t) {
      m ? e.text = t : p(e.node, t)
     }

     function s() {
      return this.node.nodeName
     }

     function u(e) {
      return {
       node: e,
       children: [],
       html: null,
       text: null,
       toString: s
      }
     }
     var l = e(9),
      c = e(134),
      h = e(112),
      p = e(135),
      d = 1,
      f = 11,
      m = "undefined" != typeof document && "number" == typeof document.documentMode || "undefined" != typeof navigator && "string" == typeof navigator.userAgent && /\bEdge\/\d/.test(navigator.userAgent),
      g = h(function(e, t, r) {
       t.node.nodeType === f || t.node.nodeType === d && "object" === t.node.nodeName.toLowerCase() && (null == t.node.namespaceURI || t.node.namespaceURI === l.html) ? (n(t), e.insertBefore(t.node, r)) : (e.insertBefore(t.node, r), n(t))
      });
     u.insertTreeBefore = g, u.replaceChildWithTree = r, u.queueChild = i, u.queueHTML = o, u.queueText = a, t.exports = u
    }, {
     112: 112,
     134: 134,
     135: 135,
     9: 9
    }],
    9: [function(e, t) {
     var n = {
      html: "http://www.w3.org/1999/xhtml",
      mathml: "http://www.w3.org/1998/Math/MathML",
      svg: "http://www.w3.org/2000/svg"
     };
     t.exports = n
    }, {}],
    10: [function(e, t) {
     function n(e, t) {
      return (e & t) === t
     }
     var r = e(132),
      i = (e(154), {
       MUST_USE_PROPERTY: 1,
       HAS_BOOLEAN_VALUE: 4,
       HAS_NUMERIC_VALUE: 8,
       HAS_POSITIVE_NUMERIC_VALUE: 24,
       HAS_OVERLOADED_BOOLEAN_VALUE: 32,
       injectDOMPropertyConfig: function(e) {
        var t = i,
         o = e.Properties || {},
         s = e.DOMAttributeNamespaces || {},
         u = e.DOMAttributeNames || {},
         l = e.DOMPropertyNames || {},
         c = e.DOMMutationMethods || {};
        e.isCustomAttribute && a._isCustomAttributeFunctions.push(e.isCustomAttribute);
        for (var h in o) {
         a.properties.hasOwnProperty(h) ? r("48", h) : void 0;
         var p = h.toLowerCase(),
          d = o[h],
          f = {
           attributeName: p,
           attributeNamespace: null,
           propertyName: h,
           mutationMethod: null,
           mustUseProperty: n(d, t.MUST_USE_PROPERTY),
           hasBooleanValue: n(d, t.HAS_BOOLEAN_VALUE),
           hasNumericValue: n(d, t.HAS_NUMERIC_VALUE),
           hasPositiveNumericValue: n(d, t.HAS_POSITIVE_NUMERIC_VALUE),
           hasOverloadedBooleanValue: n(d, t.HAS_OVERLOADED_BOOLEAN_VALUE)
          };
         if (f.hasBooleanValue + f.hasNumericValue + f.hasOverloadedBooleanValue <= 1 ? void 0 : r("50", h), u.hasOwnProperty(h)) {
          var m = u[h];
          f.attributeName = m
         }
         s.hasOwnProperty(h) && (f.attributeNamespace = s[h]), l.hasOwnProperty(h) && (f.propertyName = l[h]), c.hasOwnProperty(h) && (f.mutationMethod = c[h]), a.properties[h] = f
        }
       }
      }),
      o = ":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",
      a = {
       ID_ATTRIBUTE_NAME: "data-reactid",
       ROOT_ATTRIBUTE_NAME: "data-reactroot",
       ATTRIBUTE_NAME_START_CHAR: o,
       ATTRIBUTE_NAME_CHAR: o + "\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",
       properties: {},
       getPossibleStandardName: null,
       _isCustomAttributeFunctions: [],
       isCustomAttribute: function(e) {
        for (var t = 0; t < a._isCustomAttributeFunctions.length; t++) {
         var n = a._isCustomAttributeFunctions[t];
         if (n(e)) return !0
        }
        return !1
       },
       injection: i
      };
     t.exports = a
    }, {
     132: 132,
     154: 154
    }],
    11: [function(e, t) {
     function n(e) {
      return !!u.hasOwnProperty(e) || !s.hasOwnProperty(e) && (a.test(e) ? (u[e] = !0, !0) : (s[e] = !0, !1))
     }

     function r(e, t) {
      return null == t || e.hasBooleanValue && !t || e.hasNumericValue && isNaN(t) || e.hasPositiveNumericValue && 1 > t || e.hasOverloadedBooleanValue && t === !1
     }
     var i = e(10),
      o = (e(40), e(66), e(131)),
      a = (e(161), new RegExp("^[" + i.ATTRIBUTE_NAME_START_CHAR + "][" + i.ATTRIBUTE_NAME_CHAR + "]*$")),
      s = {},
      u = {},
      l = {
       createMarkupForID: function(e) {
        return i.ID_ATTRIBUTE_NAME + "=" + o(e)
       },
       setAttributeForID: function(e, t) {
        e.setAttribute(i.ID_ATTRIBUTE_NAME, t)
       },
       createMarkupForRoot: function() {
        return i.ROOT_ATTRIBUTE_NAME + '=""'
       },
       setAttributeForRoot: function(e) {
        e.setAttribute(i.ROOT_ATTRIBUTE_NAME, "")
       },
       createMarkupForProperty: function(e, t) {
        var n = i.properties.hasOwnProperty(e) ? i.properties[e] : null;
        if (n) {
         if (r(n, t)) return "";
         var a = n.attributeName;
         return n.hasBooleanValue || n.hasOverloadedBooleanValue && t === !0 ? a + '=""' : a + "=" + o(t)
        }
        return i.isCustomAttribute(e) ? null == t ? "" : e + "=" + o(t) : null
       },
       createMarkupForCustomAttribute: function(e, t) {
        return n(e) && null != t ? e + "=" + o(t) : ""
       },
       setValueForProperty: function(e, t, n) {
        var o = i.properties.hasOwnProperty(t) ? i.properties[t] : null;
        if (o) {
         var a = o.mutationMethod;
         if (a) a(e, n);
         else {
          if (r(o, n)) return void this.deleteValueForProperty(e, t);
          if (o.mustUseProperty) e[o.propertyName] = n;
          else {
           var s = o.attributeName,
            u = o.attributeNamespace;
           u ? e.setAttributeNS(u, s, "" + n) : o.hasBooleanValue || o.hasOverloadedBooleanValue && n === !0 ? e.setAttribute(s, "") : e.setAttribute(s, "" + n)
          }
         }
        } else if (i.isCustomAttribute(t)) return void l.setValueForAttribute(e, t, n)
       },
       setValueForAttribute: function(e, t, r) {
        n(t) && (null == r ? e.removeAttribute(t) : e.setAttribute(t, "" + r))
       },
       deleteValueForAttribute: function(e, t) {
        e.removeAttribute(t)
       },
       deleteValueForProperty: function(e, t) {
        var n = i.properties.hasOwnProperty(t) ? i.properties[t] : null;
        if (n) {
         var r = n.mutationMethod;
         if (r) r(e, void 0);
         else if (n.mustUseProperty) {
          var o = n.propertyName;
          e[o] = n.hasBooleanValue ? !1 : ""
         } else e.removeAttribute(n.attributeName)
        } else i.isCustomAttribute(t) && e.removeAttribute(t)
       }
      };
     t.exports = l
    }, {
     10: 10,
     131: 131,
     161: 161,
     40: 40,
     66: 66
    }],
    12: [function(e, t) {
     var n = e(132),
      r = e(8),
      i = e(140),
      o = e(145),
      a = e(146),
      s = (e(154), {
       dangerouslyReplaceNodeWithMarkup: function(e, t) {
        if (i.canUseDOM ? void 0 : n("56"), t ? void 0 : n("57"), "HTML" === e.nodeName ? n("58") : void 0, "string" == typeof t) {
         var s = o(t, a)[0];
         e.parentNode.replaceChild(s, e)
        } else r.replaceChildWithTree(e, t)
       }
      });
     t.exports = s
    }, {
     132: 132,
     140: 140,
     145: 145,
     146: 146,
     154: 154,
     8: 8
    }],
    13: [function(e, t) {
     var n = e(158),
      r = [n({
       ResponderEventPlugin: null
      }), n({
       SimpleEventPlugin: null
      }), n({
       TapEventPlugin: null
      }), n({
       EnterLeaveEventPlugin: null
      }), n({
       ChangeEventPlugin: null
      }), n({
       SelectEventPlugin: null
      }), n({
       BeforeInputEventPlugin: null
      })];
     t.exports = r
    }, {
     158: 158
    }],
    14: [function(e, t) {
     var n = {
       onClick: !0,
       onDoubleClick: !0,
       onMouseDown: !0,
       onMouseMove: !0,
       onMouseUp: !0,
       onClickCapture: !0,
       onDoubleClickCapture: !0,
       onMouseDownCapture: !0,
       onMouseMoveCapture: !0,
       onMouseUpCapture: !0
      },
      r = {
       getHostProps: function(e, t) {
        if (!t.disabled) return t;
        var r = {};
        for (var i in t) !n[i] && t.hasOwnProperty(i) && (r[i] = t[i]);
        return r
       }
      };
     t.exports = r
    }, {}],
    15: [function(e, t) {
     var n = e(16),
      r = e(20),
      i = e(40),
      o = e(101),
      a = e(158),
      s = n.topLevelTypes,
      u = {
       mouseEnter: {
        registrationName: a({
         onMouseEnter: null
        }),
        dependencies: [s.topMouseOut, s.topMouseOver]
       },
       mouseLeave: {
        registrationName: a({
         onMouseLeave: null
        }),
        dependencies: [s.topMouseOut, s.topMouseOver]
       }
      },
      l = {
       eventTypes: u,
       extractEvents: function(e, t, n, a) {
        if (e === s.topMouseOver && (n.relatedTarget || n.fromElement)) return null;
        if (e !== s.topMouseOut && e !== s.topMouseOver) return null;
        var l;
        if (a.window === a) l = a;
        else {
         var c = a.ownerDocument;
         l = c ? c.defaultView || c.parentWindow : window
        }
        var h, p;
        if (e === s.topMouseOut) {
         h = t;
         var d = n.relatedTarget || n.toElement;
         p = d ? i.getClosestInstanceFromNode(d) : null
        } else h = null, p = t;
        if (h === p) return null;
        var f = null == h ? l : i.getNodeFromInstance(h),
         m = null == p ? l : i.getNodeFromInstance(p),
         g = o.getPooled(u.mouseLeave, h, n, a);
        g.type = "mouseleave", g.target = f, g.relatedTarget = m;
        var v = o.getPooled(u.mouseEnter, p, n, a);
        return v.type = "mouseenter", v.target = m, v.relatedTarget = f, r.accumulateEnterLeaveDispatches(g, v, h, p), [g, v]
       }
      };
     t.exports = l
    }, {
     101: 101,
     158: 158,
     16: 16,
     20: 20,
     40: 40
    }],
    16: [function(e, t) {
     var n = e(157),
      r = n({
       bubbled: null,
       captured: null
      }),
      i = n({
       topAbort: null,
       topAnimationEnd: null,
       topAnimationIteration: null,
       topAnimationStart: null,
       topBlur: null,
       topCanPlay: null,
       topCanPlayThrough: null,
       topChange: null,
       topClick: null,
       topCompositionEnd: null,
       topCompositionStart: null,
       topCompositionUpdate: null,
       topContextMenu: null,
       topCopy: null,
       topCut: null,
       topDoubleClick: null,
       topDrag: null,
       topDragEnd: null,
       topDragEnter: null,
       topDragExit: null,
       topDragLeave: null,
       topDragOver: null,
       topDragStart: null,
       topDrop: null,
       topDurationChange: null,
       topEmptied: null,
       topEncrypted: null,
       topEnded: null,
       topError: null,
       topFocus: null,
       topInput: null,
       topInvalid: null,
       topKeyDown: null,
       topKeyPress: null,
       topKeyUp: null,
       topLoad: null,
       topLoadedData: null,
       topLoadedMetadata: null,
       topLoadStart: null,
       topMouseDown: null,
       topMouseMove: null,
       topMouseOut: null,
       topMouseOver: null,
       topMouseUp: null,
       topPaste: null,
       topPause: null,
       topPlay: null,
       topPlaying: null,
       topProgress: null,
       topRateChange: null,
       topReset: null,
       topScroll: null,
       topSeeked: null,
       topSeeking: null,
       topSelectionChange: null,
       topStalled: null,
       topSubmit: null,
       topSuspend: null,
       topTextInput: null,
       topTimeUpdate: null,
       topTouchCancel: null,
       topTouchEnd: null,
       topTouchMove: null,
       topTouchStart: null,
       topTransitionEnd: null,
       topVolumeChange: null,
       topWaiting: null,
       topWheel: null
      }),
      o = {
       topLevelTypes: i,
       PropagationPhases: r
      };
     t.exports = o
    }, {
     157: 157
    }],
    17: [function(e, t) {
     var n = e(132),
      r = e(18),
      i = e(19),
      o = e(58),
      a = e(108),
      s = e(117),
      u = (e(154), {}),
      l = null,
      c = function(e, t) {
       e && (i.executeDispatchesInOrder(e, t), e.isPersistent() || e.constructor.release(e))
      },
      h = function(e) {
       return c(e, !0)
      },
      p = function(e) {
       return c(e, !1)
      },
      d = function(e) {
       return "." + e._rootNodeID
      },
      f = {
       injection: {
        injectEventPluginOrder: r.injectEventPluginOrder,
        injectEventPluginsByName: r.injectEventPluginsByName
       },
       putListener: function(e, t, i) {
        "function" != typeof i ? n("94", t, typeof i) : void 0;
        var o = d(e),
         a = u[t] || (u[t] = {});
        a[o] = i;
        var s = r.registrationNameModules[t];
        s && s.didPutListener && s.didPutListener(e, t, i)
       },
       getListener: function(e, t) {
        var n = u[t],
         r = d(e);
        return n && n[r]
       },
       deleteListener: function(e, t) {
        var n = r.registrationNameModules[t];
        n && n.willDeleteListener && n.willDeleteListener(e, t);
        var i = u[t];
        if (i) {
         var o = d(e);
         delete i[o]
        }
       },
       deleteAllListeners: function(e) {
        var t = d(e);
        for (var n in u)
         if (u.hasOwnProperty(n) && u[n][t]) {
          var i = r.registrationNameModules[n];
          i && i.willDeleteListener && i.willDeleteListener(e, n), delete u[n][t]
         }
       },
       extractEvents: function(e, t, n, i) {
        for (var o, s = r.plugins, u = 0; u < s.length; u++) {
         var l = s[u];
         if (l) {
          var c = l.extractEvents(e, t, n, i);
          c && (o = a(o, c))
         }
        }
        return o
       },
       enqueueEvents: function(e) {
        e && (l = a(l, e))
       },
       processEventQueue: function(e) {
        var t = l;
        l = null, e ? s(t, h) : s(t, p), l ? n("95") : void 0, o.rethrowCaughtError()
       },
       __purge: function() {
        u = {}
       },
       __getListenerBank: function() {
        return u
       }
      };
     t.exports = f
    }, {
     108: 108,
     117: 117,
     132: 132,
     154: 154,
     18: 18,
     19: 19,
     58: 58
    }],
    18: [function(e, t) {
     function n() {
      if (a)
       for (var e in s) {
        var t = s[e],
         n = a.indexOf(e);
        if (n > -1 ? void 0 : o("96", e), !u.plugins[n]) {
         t.extractEvents ? void 0 : o("97", e), u.plugins[n] = t;
         var i = t.eventTypes;
         for (var l in i) r(i[l], t, l) ? void 0 : o("98", l, e)
        }
       }
     }

     function r(e, t, n) {
      u.eventNameDispatchConfigs.hasOwnProperty(n) ? o("99", n) : void 0, u.eventNameDispatchConfigs[n] = e;
      var r = e.phasedRegistrationNames;
      if (r) {
       for (var a in r)
        if (r.hasOwnProperty(a)) {
         var s = r[a];
         i(s, t, n)
        } return !0
      }
      return !!e.registrationName && (i(e.registrationName, t, n), !0)
     }

     function i(e, t, n) {
      u.registrationNameModules[e] ? o("100", e) : void 0, u.registrationNameModules[e] = t, u.registrationNameDependencies[e] = t.eventTypes[n].dependencies
     }
     var o = e(132),
      a = (e(154), null),
      s = {},
      u = {
       plugins: [],
       eventNameDispatchConfigs: {},
       registrationNameModules: {},
       registrationNameDependencies: {},
       possibleRegistrationNames: null,
       injectEventPluginOrder: function(e) {
        a ? o("101") : void 0, a = Array.prototype.slice.call(e), n()
       },
       injectEventPluginsByName: function(e) {
        var t = !1;
        for (var r in e)
         if (e.hasOwnProperty(r)) {
          var i = e[r];
          s.hasOwnProperty(r) && s[r] === i || (s[r] ? o("102", r) : void 0, s[r] = i, t = !0)
         } t && n()
       },
       getPluginModuleForEvent: function(e) {
        var t = e.dispatchConfig;
        if (t.registrationName) return u.registrationNameModules[t.registrationName] || null;
        for (var n in t.phasedRegistrationNames)
         if (t.phasedRegistrationNames.hasOwnProperty(n)) {
          var r = u.registrationNameModules[t.phasedRegistrationNames[n]];
          if (r) return r
         } return null
       },
       _resetEventPlugins: function() {
        a = null;
        for (var e in s) s.hasOwnProperty(e) && delete s[e];
        u.plugins.length = 0;
        var t = u.eventNameDispatchConfigs;
        for (var n in t) t.hasOwnProperty(n) && delete t[n];
        var r = u.registrationNameModules;
        for (var i in r) r.hasOwnProperty(i) && delete r[i]
       }
      };
     t.exports = u
    }, {
     132: 132,
     154: 154
    }],
    19: [function(e, t) {
     function n(e) {
      return e === v.topMouseUp || e === v.topTouchEnd || e === v.topTouchCancel
     }

     function r(e) {
      return e === v.topMouseMove || e === v.topTouchMove
     }

     function i(e) {
      return e === v.topMouseDown || e === v.topTouchStart
     }

     function o(e, t, n, r) {
      var i = e.type || "unknown-event";
      e.currentTarget = y.getNodeFromInstance(r), t ? m.invokeGuardedCallbackWithCatch(i, n, e) : m.invokeGuardedCallback(i, n, e), e.currentTarget = null
     }

     function a(e, t) {
      var n = e._dispatchListeners,
       r = e._dispatchInstances;
      if (Array.isArray(n))
       for (var i = 0; i < n.length && !e.isPropagationStopped(); i++) o(e, t, n[i], r[i]);
      else n && o(e, t, n, r);
      e._dispatchListeners = null, e._dispatchInstances = null
     }

     function s(e) {
      var t = e._dispatchListeners,
       n = e._dispatchInstances;
      if (Array.isArray(t)) {
       for (var r = 0; r < t.length && !e.isPropagationStopped(); r++)
        if (t[r](e, n[r])) return n[r]
      } else if (t && t(e, n)) return n;
      return null
     }

     function u(e) {
      var t = s(e);
      return e._dispatchInstances = null, e._dispatchListeners = null, t
     }

     function l(e) {
      var t = e._dispatchListeners,
       n = e._dispatchInstances;
      Array.isArray(t) ? d("103") : void 0, e.currentTarget = t ? y.getNodeFromInstance(n) : null;
      var r = t ? t(e) : null;
      return e.currentTarget = null, e._dispatchListeners = null, e._dispatchInstances = null, r
     }

     function c(e) {
      return !!e._dispatchListeners
     }
     var h, p, d = e(132),
      f = e(16),
      m = e(58),
      g = (e(154), e(161), {
       injectComponentTree: function(e) {
        h = e
       },
       injectTreeTraversal: function(e) {
        p = e
       }
      }),
      v = f.topLevelTypes,
      y = {
       isEndish: n,
       isMoveish: r,
       isStartish: i,
       executeDirectDispatch: l,
       executeDispatchesInOrder: a,
       executeDispatchesInOrderStopAtTrue: u,
       hasDispatches: c,
       getInstanceFromNode: function(e) {
        return h.getInstanceFromNode(e)
       },
       getNodeFromInstance: function(e) {
        return h.getNodeFromInstance(e)
       },
       isAncestor: function(e, t) {
        return p.isAncestor(e, t)
       },
       getLowestCommonAncestor: function(e, t) {
        return p.getLowestCommonAncestor(e, t)
       },
       getParentInstance: function(e) {
        return p.getParentInstance(e)
       },
       traverseTwoPhase: function(e, t, n) {
        return p.traverseTwoPhase(e, t, n)
       },
       traverseEnterLeave: function(e, t, n, r, i) {
        return p.traverseEnterLeave(e, t, n, r, i)
       },
       injection: g
      };
     t.exports = y
    }, {
     132: 132,
     154: 154,
     16: 16,
     161: 161,
     58: 58
    }],
    20: [function(e, t) {
     function n(e, t, n) {
      var r = t.dispatchConfig.phasedRegistrationNames[n];
      return y(e, r)
     }

     function r(e, t, r) {
      var i = t ? v.bubbled : v.captured,
       o = n(e, r, i);
      o && (r._dispatchListeners = m(r._dispatchListeners, o), r._dispatchInstances = m(r._dispatchInstances, e))
     }

     function i(e) {
      e && e.dispatchConfig.phasedRegistrationNames && f.traverseTwoPhase(e._targetInst, r, e)
     }

     function o(e) {
      if (e && e.dispatchConfig.phasedRegistrationNames) {
       var t = e._targetInst,
        n = t ? f.getParentInstance(t) : null;
       f.traverseTwoPhase(n, r, e)
      }
     }

     function a(e, t, n) {
      if (n && n.dispatchConfig.registrationName) {
       var r = n.dispatchConfig.registrationName,
        i = y(e, r);
       i && (n._dispatchListeners = m(n._dispatchListeners, i), n._dispatchInstances = m(n._dispatchInstances, e))
      }
     }

     function s(e) {
      e && e.dispatchConfig.registrationName && a(e._targetInst, null, e)
     }

     function u(e) {
      g(e, i)
     }

     function l(e) {
      g(e, o)
     }

     function c(e, t, n, r) {
      f.traverseEnterLeave(n, r, a, e, t)
     }

     function h(e) {
      g(e, s)
     }
     var p = e(16),
      d = e(17),
      f = e(19),
      m = e(108),
      g = e(117),
      v = (e(161), p.PropagationPhases),
      y = d.getListener,
      b = {
       accumulateTwoPhaseDispatches: u,
       accumulateTwoPhaseDispatchesSkipTarget: l,
       accumulateDirectDispatches: h,
       accumulateEnterLeaveDispatches: c
      };
     t.exports = b
    }, {
     108: 108,
     117: 117,
     16: 16,
     161: 161,
     17: 17,
     19: 19
    }],
    21: [function(e, t) {
     function n(e) {
      this._root = e, this._startText = this.getText(), this._fallbackText = null
     }
     var r = e(162),
      i = e(25),
      o = e(125);
     r(n.prototype, {
      destructor: function() {
       this._root = null, this._startText = null, this._fallbackText = null
      },
      getText: function() {
       return "value" in this._root ? this._root.value : this._root[o()]
      },
      getData: function() {
       if (this._fallbackText) return this._fallbackText;
       var e, t, n = this._startText,
        r = n.length,
        i = this.getText(),
        o = i.length;
       for (e = 0; r > e && n[e] === i[e]; e++);
       var a = r - e;
       for (t = 1; a >= t && n[r - t] === i[o - t]; t++);
       var s = t > 1 ? 1 - t : void 0;
       return this._fallbackText = i.slice(e, s), this._fallbackText
      }
     }), i.addPoolingTo(n), t.exports = n
    }, {
     125: 125,
     162: 162,
     25: 25
    }],
    22: [function(e, t) {
     var n = e(10),
      r = n.injection.MUST_USE_PROPERTY,
      i = n.injection.HAS_BOOLEAN_VALUE,
      o = n.injection.HAS_NUMERIC_VALUE,
      a = n.injection.HAS_POSITIVE_NUMERIC_VALUE,
      s = n.injection.HAS_OVERLOADED_BOOLEAN_VALUE,
      u = {
       isCustomAttribute: RegExp.prototype.test.bind(new RegExp("^(data|aria)-[" + n.ATTRIBUTE_NAME_CHAR + "]*$")),
       Properties: {
        accept: 0,
        acceptCharset: 0,
        accessKey: 0,
        action: 0,
        allowFullScreen: i,
        allowTransparency: 0,
        alt: 0,
        async: i,
        autoComplete: 0,
        autoPlay: i,
        capture: i,
        cellPadding: 0,
        cellSpacing: 0,
        charSet: 0,
        challenge: 0,
        checked: r | i,
        cite: 0,
        classID: 0,
        className: 0,
        cols: a,
        colSpan: 0,
        content: 0,
        contentEditable: 0,
        contextMenu: 0,
        controls: i,
        coords: 0,
        crossOrigin: 0,
        data: 0,
        dateTime: 0,
        "default": i,
        defer: i,
        dir: 0,
        disabled: i,
        download: s,
        draggable: 0,
        encType: 0,
        form: 0,
        formAction: 0,
        formEncType: 0,
        formMethod: 0,
        formNoValidate: i,
        formTarget: 0,
        frameBorder: 0,
        headers: 0,
        height: 0,
        hidden: i,
        high: 0,
        href: 0,
        hrefLang: 0,
        htmlFor: 0,
        httpEquiv: 0,
        icon: 0,
        id: 0,
        inputMode: 0,
        integrity: 0,
        is: 0,
        keyParams: 0,
        keyType: 0,
        kind: 0,
        label: 0,
        lang: 0,
        list: 0,
        loop: i,
        low: 0,
        manifest: 0,
        marginHeight: 0,
        marginWidth: 0,
        max: 0,
        maxLength: 0,
        media: 0,
        mediaGroup: 0,
        method: 0,
        min: 0,
        minLength: 0,
        multiple: r | i,
        muted: r | i,
        name: 0,
        nonce: 0,
        noValidate: i,
        open: i,
        optimum: 0,
        pattern: 0,
        placeholder: 0,
        poster: 0,
        preload: 0,
        profile: 0,
        radioGroup: 0,
        readOnly: i,
        referrerPolicy: 0,
        rel: 0,
        required: i,
        reversed: i,
        role: 0,
        rows: a,
        rowSpan: o,
        sandbox: 0,
        scope: 0,
        scoped: i,
        scrolling: 0,
        seamless: i,
        selected: r | i,
        shape: 0,
        size: a,
        sizes: 0,
        span: a,
        spellCheck: 0,
        src: 0,
        srcDoc: 0,
        srcLang: 0,
        srcSet: 0,
        start: o,
        step: 0,
        style: 0,
        summary: 0,
        tabIndex: 0,
        target: 0,
        title: 0,
        type: 0,
        useMap: 0,
        value: 0,
        width: 0,
        wmode: 0,
        wrap: 0,
        about: 0,
        datatype: 0,
        inlist: 0,
        prefix: 0,
        property: 0,
        resource: 0,
        "typeof": 0,
        vocab: 0,
        autoCapitalize: 0,
        autoCorrect: 0,
        autoSave: 0,
        color: 0,
        itemProp: 0,
        itemScope: i,
        itemType: 0,
        itemID: 0,
        itemRef: 0,
        results: 0,
        security: 0,
        unselectable: 0
       },
       DOMAttributeNames: {
        acceptCharset: "accept-charset",
        className: "class",
        htmlFor: "for",
        httpEquiv: "http-equiv"
       },
       DOMPropertyNames: {}
      };
     t.exports = u
    }, {
     10: 10
    }],
    23: [function(e, t) {
     function n(e) {
      var t = /[=:]/g,
       n = {
        "=": "=0",
        ":": "=2"
       },
       r = ("" + e).replace(t, function(e) {
        return n[e]
       });
      return "$" + r
     }

     function r(e) {
      var t = /(=0|=2)/g,
       n = {
        "=0": "=",
        "=2": ":"
       },
       r = "." === e[0] && "$" === e[1] ? e.substring(2) : e.substring(1);
      return ("" + r).replace(t, function(e) {
       return n[e]
      })
     }
     var i = {
      escape: n,
      unescape: r
     };
     t.exports = i
    }, {}],
    24: [function(e, t) {
     function n(e) {
      null != e.checkedLink && null != e.valueLink ? a("87") : void 0
     }

     function r(e) {
      n(e), null != e.value || null != e.onChange ? a("88") : void 0
     }

     function i(e) {
      n(e), null != e.checked || null != e.onChange ? a("89") : void 0
     }

     function o(e) {
      if (e) {
       var t = e.getName();
       if (t) return " Check the render method of `" + t + "`."
      }
      return ""
     }
     var a = e(132),
      s = e(76),
      u = e(75),
      l = e(77),
      c = (e(154), e(161), {
       button: !0,
       checkbox: !0,
       image: !0,
       hidden: !0,
       radio: !0,
       reset: !0,
       submit: !0
      }),
      h = {
       value: function(e, t) {
        return !e[t] || c[e.type] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")
       },
       checked: function(e, t) {
        return !e[t] || e.onChange || e.readOnly || e.disabled ? null : new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")
       },
       onChange: s.func
      },
      p = {},
      d = {
       checkPropTypes: function(e, t, n) {
        for (var r in h) {
         if (h.hasOwnProperty(r)) var i = h[r](t, r, e, u.prop, null, l);
         i instanceof Error && !(i.message in p) && (p[i.message] = !0, o(n))
        }
       },
       getValue: function(e) {
        return e.valueLink ? (r(e), e.valueLink.value) : e.value
       },
       getChecked: function(e) {
        return e.checkedLink ? (i(e), e.checkedLink.value) : e.checked
       },
       executeOnChange: function(e, t) {
        return e.valueLink ? (r(e), e.valueLink.requestChange(t.target.value)) : e.checkedLink ? (i(e), e.checkedLink.requestChange(t.target.checked)) : e.onChange ? e.onChange.call(void 0, t) : void 0
       }
      };
     t.exports = d
    }, {
     132: 132,
     154: 154,
     161: 161,
     75: 75,
     76: 76,
     77: 77
    }],
    25: [function(e, t) {
     var n = e(132),
      r = (e(154), function(e) {
       var t = this;
       if (t.instancePool.length) {
        var n = t.instancePool.pop();
        return t.call(n, e), n
       }
       return new t(e)
      }),
      i = function(e, t) {
       var n = this;
       if (n.instancePool.length) {
        var r = n.instancePool.pop();
        return n.call(r, e, t), r
       }
       return new n(e, t)
      },
      o = function(e, t, n) {
       var r = this;
       if (r.instancePool.length) {
        var i = r.instancePool.pop();
        return r.call(i, e, t, n), i
       }
       return new r(e, t, n)
      },
      a = function(e, t, n, r) {
       var i = this;
       if (i.instancePool.length) {
        var o = i.instancePool.pop();
        return i.call(o, e, t, n, r), o
       }
       return new i(e, t, n, r)
      },
      s = function(e, t, n, r, i) {
       var o = this;
       if (o.instancePool.length) {
        var a = o.instancePool.pop();
        return o.call(a, e, t, n, r, i), a
       }
       return new o(e, t, n, r, i)
      },
      u = function(e) {
       var t = this;
       e instanceof t ? void 0 : n("25"), e.destructor(), t.instancePool.length < t.poolSize && t.instancePool.push(e)
      },
      l = 10,
      c = r,
      h = function(e, t) {
       var n = e;
       return n.instancePool = [], n.getPooled = t || c, n.poolSize || (n.poolSize = l), n.release = u, n
      },
      p = {
       addPoolingTo: h,
       oneArgumentPooler: r,
       twoArgumentPooler: i,
       threeArgumentPooler: o,
       fourArgumentPooler: a,
       fiveArgumentPooler: s
      };
     t.exports = p
    }, {
     132: 132,
     154: 154
    }],
    26: [function(e, t) {
     var n = e(162),
      r = e(29),
      i = e(31),
      o = e(78),
      a = e(30),
      s = e(43),
      u = e(56),
      l = e(76),
      c = e(89),
      h = e(130),
      p = (e(161), u.createElement),
      d = u.createFactory,
      f = u.cloneElement,
      m = n,
      g = {
       Children: {
        map: r.map,
        forEach: r.forEach,
        count: r.count,
        toArray: r.toArray,
        only: h
       },
       Component: i,
       PureComponent: o,
       createElement: p,
       cloneElement: f,
       isValidElement: u.isValidElement,
       PropTypes: l,
       createClass: a.createClass,
       createFactory: d,
       createMixin: function(e) {
        return e
       },
       DOM: s,
       version: c,
       __spread: m
      };
     t.exports = g
    }, {
     130: 130,
     161: 161,
     162: 162,
     29: 29,
     30: 30,
     31: 31,
     43: 43,
     56: 56,
     76: 76,
     78: 78,
     89: 89
    }],
    27: [function(e, t) {
     function n(e) {
      return Object.prototype.hasOwnProperty.call(e, m) || (e[m] = d++, h[e[m]] = {}), h[e[m]]
     }
     var r, i = e(162),
      o = e(16),
      a = e(18),
      s = e(59),
      u = e(107),
      l = e(126),
      c = e(128),
      h = {},
      p = !1,
      d = 0,
      f = {
       topAbort: "abort",
       topAnimationEnd: l("animationend") || "animationend",
       topAnimationIteration: l("animationiteration") || "animationiteration",
       topAnimationStart: l("animationstart") || "animationstart",
       topBlur: "blur",
       topCanPlay: "canplay",
       topCanPlayThrough: "canplaythrough",
       topChange: "change",
       topClick: "click",
       topCompositionEnd: "compositionend",
       topCompositionStart: "compositionstart",
       topCompositionUpdate: "compositionupdate",
       topContextMenu: "contextmenu",
       topCopy: "copy",
       topCut: "cut",
       topDoubleClick: "dblclick",
       topDrag: "drag",
       topDragEnd: "dragend",
       topDragEnter: "dragenter",
       topDragExit: "dragexit",
       topDragLeave: "dragleave",
       topDragOver: "dragover",
       topDragStart: "dragstart",
       topDrop: "drop",
       topDurationChange: "durationchange",
       topEmptied: "emptied",
       topEncrypted: "encrypted",
       topEnded: "ended",
       topError: "error",
       topFocus: "focus",
       topInput: "input",
       topKeyDown: "keydown",
       topKeyPress: "keypress",
       topKeyUp: "keyup",
       topLoadedData: "loadeddata",
       topLoadedMetadata: "loadedmetadata",
       topLoadStart: "loadstart",
       topMouseDown: "mousedown",
       topMouseMove: "mousemove",
       topMouseOut: "mouseout",
       topMouseOver: "mouseover",
       topMouseUp: "mouseup",
       topPaste: "paste",
       topPause: "pause",
       topPlay: "play",
       topPlaying: "playing",
       topProgress: "progress",
       topRateChange: "ratechange",
       topScroll: "scroll",
       topSeeked: "seeked",
       topSeeking: "seeking",
       topSelectionChange: "selectionchange",
       topStalled: "stalled",
       topSuspend: "suspend",
       topTextInput: "textInput",
       topTimeUpdate: "timeupdate",
       topTouchCancel: "touchcancel",
       topTouchEnd: "touchend",
       topTouchMove: "touchmove",
       topTouchStart: "touchstart",
       topTransitionEnd: l("transitionend") || "transitionend",
       topVolumeChange: "volumechange",
       topWaiting: "waiting",
       topWheel: "wheel"
      },
      m = "_reactListenersID" + String(Math.random()).slice(2),
      g = i({}, s, {
       ReactEventListener: null,
       injection: {
        injectReactEventListener: function(e) {
         e.setHandleTopLevel(g.handleTopLevel), g.ReactEventListener = e
        }
       },
       setEnabled: function(e) {
        g.ReactEventListener && g.ReactEventListener.setEnabled(e)
       },
       isEnabled: function() {
        return !(!g.ReactEventListener || !g.ReactEventListener.isEnabled())
       },
       listenTo: function(e, t) {
        for (var r = t, i = n(r), s = a.registrationNameDependencies[e], u = o.topLevelTypes, l = 0; l < s.length; l++) {
         var h = s[l];
         i.hasOwnProperty(h) && i[h] || (h === u.topWheel ? c("wheel") ? g.ReactEventListener.trapBubbledEvent(u.topWheel, "wheel", r) : c("mousewheel") ? g.ReactEventListener.trapBubbledEvent(u.topWheel, "mousewheel", r) : g.ReactEventListener.trapBubbledEvent(u.topWheel, "DOMMouseScroll", r) : h === u.topScroll ? c("scroll", !0) ? g.ReactEventListener.trapCapturedEvent(u.topScroll, "scroll", r) : g.ReactEventListener.trapBubbledEvent(u.topScroll, "scroll", g.ReactEventListener.WINDOW_HANDLE) : h === u.topFocus || h === u.topBlur ? (c("focus", !0) ? (g.ReactEventListener.trapCapturedEvent(u.topFocus, "focus", r), g.ReactEventListener.trapCapturedEvent(u.topBlur, "blur", r)) : c("focusin") && (g.ReactEventListener.trapBubbledEvent(u.topFocus, "focusin", r), g.ReactEventListener.trapBubbledEvent(u.topBlur, "focusout", r)), i[u.topBlur] = !0, i[u.topFocus] = !0) : f.hasOwnProperty(h) && g.ReactEventListener.trapBubbledEvent(h, f[h], r), i[h] = !0)
        }
       },
       trapBubbledEvent: function(e, t, n) {
        return g.ReactEventListener.trapBubbledEvent(e, t, n)
       },
       trapCapturedEvent: function(e, t, n) {
        return g.ReactEventListener.trapCapturedEvent(e, t, n)
       },
       ensureScrollValueMonitoring: function() {
        if (void 0 === r && (r = document.createEvent && "pageX" in document.createEvent("MouseEvent")), !r && !p) {
         var e = u.refreshScrollValues;
         g.ReactEventListener.monitorScrollValue(e), p = !0
        }
       }
      });
     t.exports = g
    }, {
     107: 107,
     126: 126,
     128: 128,
     16: 16,
     162: 162,
     18: 18,
     59: 59
    }],
    28: [function(e, t) {
     (function(n) {
      function r(e, t, n) {
       var r = void 0 === e[n];
       null != t && r && (e[n] = o(t, !0))
      }
      var i = e(80),
       o = e(127),
       a = (e(23), e(136)),
       s = e(137);
      e(161), "undefined" != typeof n && n.env, 1;
      var u = {
       instantiateChildren: function(e) {
        if (null == e) return null;
        var t = {};
        return s(e, r, t), t
       },
       updateChildren: function(e, t, n, r, s, u, l, c, h) {
        if (t || e) {
         var p, d;
         for (p in t)
          if (t.hasOwnProperty(p)) {
           d = e && e[p];
           var f = d && d._currentElement,
            m = t[p];
           if (null != d && a(f, m)) i.receiveComponent(d, m, s, c), t[p] = d;
           else {
            d && (r[p] = i.getHostNode(d), i.unmountComponent(d, !1));
            var g = o(m, !0);
            t[p] = g;
            var v = i.mountComponent(g, s, u, l, c, h);
            n.push(v)
           }
          } for (p in e) !e.hasOwnProperty(p) || t && t.hasOwnProperty(p) || (d = e[p], r[p] = i.getHostNode(d), i.unmountComponent(d, !1))
        }
       },
       unmountChildren: function(e, t) {
        for (var n in e)
         if (e.hasOwnProperty(n)) {
          var r = e[n];
          i.unmountComponent(r, t)
         }
       }
      };
      t.exports = u
     }).call(this, void 0)
    }, {
     127: 127,
     136: 136,
     137: 137,
     161: 161,
     23: 23,
     80: 80
    }],
    29: [function(e, t) {
     function n(e) {
      return ("" + e).replace(b, "$&/")
     }

     function r(e, t) {
      this.func = e, this.context = t, this.count = 0
     }

     function i(e, t) {
      var n = e.func,
       r = e.context;
      n.call(r, t, e.count++)
     }

     function o(e, t, n) {
      if (null == e) return e;
      var o = r.getPooled(t, n);
      g(e, i, o), r.release(o)
     }

     function a(e, t, n, r) {
      this.result = e, this.keyPrefix = t, this.func = n, this.context = r, this.count = 0
     }

     function s(e, t, r) {
      var i = e.result,
       o = e.keyPrefix,
       a = e.func,
       s = e.context,
       l = a.call(s, t, e.count++);
      Array.isArray(l) ? u(l, i, r, m.thatReturnsArgument) : null != l && (f.isValidElement(l) && (l = f.cloneAndReplaceKey(l, o + (!l.key || t && t.key === l.key ? "" : n(l.key) + "/") + r)), i.push(l))
     }

     function u(e, t, r, i, o) {
      var u = "";
      null != r && (u = n(r) + "/");
      var l = a.getPooled(t, u, i, o);
      g(e, s, l), a.release(l)
     }

     function l(e, t, n) {
      if (null == e) return e;
      var r = [];
      return u(e, r, null, t, n), r
     }

     function c() {
      return null
     }

     function h(e) {
      return g(e, c, null)
     }

     function p(e) {
      var t = [];
      return u(e, t, null, m.thatReturnsArgument), t
     }
     var d = e(25),
      f = e(56),
      m = e(146),
      g = e(137),
      v = d.twoArgumentPooler,
      y = d.fourArgumentPooler,
      b = /\/+/g;
     r.prototype.destructor = function() {
      this.func = null, this.context = null, this.count = 0
     }, d.addPoolingTo(r, v), a.prototype.destructor = function() {
      this.result = null, this.keyPrefix = null, this.func = null, this.context = null, this.count = 0
     }, d.addPoolingTo(a, y);
     var w = {
      forEach: o,
      map: l,
      mapIntoWithKeyPrefixInternal: u,
      count: h,
      toArray: p
     };
     t.exports = w
    }, {
     137: 137,
     146: 146,
     25: 25,
     56: 56
    }],
    30: [function(e, t) {
     function n(e, t) {
      var n = x.hasOwnProperty(t) ? x[t] : null;
      S.hasOwnProperty(t) && (n !== b.OVERRIDE_BASE ? c("73", t) : void 0), e && (n !== b.DEFINE_MANY && n !== b.DEFINE_MANY_MERGED ? c("74", t) : void 0)
     }

     function r(e, t) {
      if (t) {
       "function" == typeof t ? c("75") : void 0, d.isValidElement(t) ? c("76") : void 0;
       var r = e.prototype,
        i = r.__reactAutoBindPairs;
       t.hasOwnProperty(y) && _.mixins(e, t.mixins);
       for (var o in t)
        if (t.hasOwnProperty(o) && o !== y) {
         var u = t[o],
          l = r.hasOwnProperty(o);
         if (n(l, o), _.hasOwnProperty(o)) _[o](e, u);
         else {
          var h = x.hasOwnProperty(o),
           p = "function" == typeof u,
           f = p && !h && !l && t.autobind !== !1;
          if (f) i.push(o, u), r[o] = u;
          else if (l) {
           var m = x[o];
           !h || m !== b.DEFINE_MANY_MERGED && m !== b.DEFINE_MANY ? c("77", m, o) : void 0, m === b.DEFINE_MANY_MERGED ? r[o] = a(r[o], u) : m === b.DEFINE_MANY && (r[o] = s(r[o], u))
          } else r[o] = u
         }
        }
      }
     }

     function i(e, t) {
      if (t)
       for (var n in t) {
        var r = t[n];
        if (t.hasOwnProperty(n)) {
         var i = n in _;
         i ? c("78", n) : void 0;
         var o = n in e;
         o ? c("79", n) : void 0, e[n] = r
        }
       }
     }

     function o(e, t) {
      e && t && "object" == typeof e && "object" == typeof t ? void 0 : c("80");
      for (var n in t) t.hasOwnProperty(n) && (void 0 !== e[n] ? c("81", n) : void 0, e[n] = t[n]);
      return e
     }

     function a(e, t) {
      return function() {
       var n = e.apply(this, arguments),
        r = t.apply(this, arguments);
       if (null == n) return r;
       if (null == r) return n;
       var i = {};
       return o(i, n), o(i, r), i
      }
     }

     function s(e, t) {
      return function() {
       e.apply(this, arguments), t.apply(this, arguments)
      }
     }

     function u(e, t) {
      var n = t.bind(e);
      return n
     }

     function l(e) {
      for (var t = e.__reactAutoBindPairs, n = 0; n < t.length; n += 2) {
       var r = t[n],
        i = t[n + 1];
       e[r] = u(e, i)
      }
     }
     var c = e(132),
      h = e(162),
      p = e(31),
      d = e(56),
      f = (e(75), e(74), e(72)),
      m = e(147),
      g = (e(154), e(157)),
      v = e(158),
      y = (e(161), v({
       mixins: null
      })),
      b = g({
       DEFINE_ONCE: null,
       DEFINE_MANY: null,
       OVERRIDE_BASE: null,
       DEFINE_MANY_MERGED: null
      }),
      w = [],
      x = {
       mixins: b.DEFINE_MANY,
       statics: b.DEFINE_MANY,
       propTypes: b.DEFINE_MANY,
       contextTypes: b.DEFINE_MANY,
       childContextTypes: b.DEFINE_MANY,
       getDefaultProps: b.DEFINE_MANY_MERGED,
       getInitialState: b.DEFINE_MANY_MERGED,
       getChildContext: b.DEFINE_MANY_MERGED,
       render: b.DEFINE_ONCE,
       componentWillMount: b.DEFINE_MANY,
       componentDidMount: b.DEFINE_MANY,
       componentWillReceiveProps: b.DEFINE_MANY,
       shouldComponentUpdate: b.DEFINE_ONCE,
       componentWillUpdate: b.DEFINE_MANY,
       componentDidUpdate: b.DEFINE_MANY,
       componentWillUnmount: b.DEFINE_MANY,
       updateComponent: b.OVERRIDE_BASE
      },
      _ = {
       displayName: function(e, t) {
        e.displayName = t
       },
       mixins: function(e, t) {
        if (t)
         for (var n = 0; n < t.length; n++) r(e, t[n])
       },
       childContextTypes: function(e, t) {
        e.childContextTypes = h({}, e.childContextTypes, t)
       },
       contextTypes: function(e, t) {
        e.contextTypes = h({}, e.contextTypes, t)
       },
       getDefaultProps: function(e, t) {
        e.getDefaultProps = e.getDefaultProps ? a(e.getDefaultProps, t) : t
       },
       propTypes: function(e, t) {
        e.propTypes = h({}, e.propTypes, t)
       },
       statics: function(e, t) {
        i(e, t)
       },
       autobind: function() {}
      },
      S = {
       replaceState: function(e, t) {
        this.updater.enqueueReplaceState(this, e), t && this.updater.enqueueCallback(this, t, "replaceState")
       },
       isMounted: function() {
        return this.updater.isMounted(this)
       }
      },
      C = function() {};
     h(C.prototype, p.prototype, S);
     var E = {
      createClass: function(e) {
       var t = function(e, n, r) {
        this.__reactAutoBindPairs.length && l(this), this.props = e, this.context = n, this.refs = m, this.updater = r || f, this.state = null;
        var i = this.getInitialState ? this.getInitialState() : null;
        "object" != typeof i || Array.isArray(i) ? c("82", t.displayName || "ReactCompositeComponent") : void 0, this.state = i
       };
       t.prototype = new C, t.prototype.constructor = t, t.prototype.__reactAutoBindPairs = [], w.forEach(r.bind(null, t)), r(t, e), t.getDefaultProps && (t.defaultProps = t.getDefaultProps()), t.prototype.render ? void 0 : c("83");
       for (var n in x) t.prototype[n] || (t.prototype[n] = null);
       return t
      },
      injection: {
       injectMixin: function(e) {
        w.push(e)
       }
      }
     };
     t.exports = E
    }, {
     132: 132,
     147: 147,
     154: 154,
     157: 157,
     158: 158,
     161: 161,
     162: 162,
     31: 31,
     56: 56,
     72: 72,
     74: 74,
     75: 75
    }],
    31: [function(e, t) {
     function n(e, t, n) {
      this.props = e, this.context = t, this.refs = o, this.updater = n || i
     }
     var r = e(132),
      i = e(72),
      o = (e(110), e(147));
     e(154), e(161), n.prototype.isReactComponent = {}, n.prototype.setState = function(e, t) {
      "object" != typeof e && "function" != typeof e && null != e ? r("85") : void 0, this.updater.enqueueSetState(this, e), t && this.updater.enqueueCallback(this, t, "setState")
     }, n.prototype.forceUpdate = function(e) {
      this.updater.enqueueForceUpdate(this), e && this.updater.enqueueCallback(this, e, "forceUpdate")
     }, t.exports = n
    }, {
     110: 110,
     132: 132,
     147: 147,
     154: 154,
     161: 161,
     72: 72
    }],
    32: [function(e, t) {
     var n = e(7),
      r = e(45),
      i = {
       processChildrenUpdates: r.dangerouslyProcessChildrenUpdates,
       replaceNodeWithMarkup: n.dangerouslyReplaceNodeWithMarkup
      };
     t.exports = i
    }, {
     45: 45,
     7: 7
    }],
    33: [function(e, t) {
     var n = e(132),
      r = (e(154), !1),
      i = {
       replaceNodeWithMarkup: null,
       processChildrenUpdates: null,
       injection: {
        injectEnvironment: function(e) {
         r ? n("104") : void 0, i.replaceNodeWithMarkup = e.replaceNodeWithMarkup, i.processChildrenUpdates = e.processChildrenUpdates, r = !0
        }
       }
      };
     t.exports = i
    }, {
     132: 132,
     154: 154
    }],
    34: [function(e, t) {
     function n() {}

     function r() {}

     function i(e) {
      return !(!e.prototype || !e.prototype.isReactComponent)
     }

     function o(e) {
      return !(!e.prototype || !e.prototype.isPureReactComponent)
     }
     var a = e(132),
      s = e(162),
      u = e(33),
      l = e(35),
      c = e(56),
      h = e(58),
      p = e(65),
      d = (e(66), e(71)),
      f = (e(75), e(80)),
      m = e(111),
      g = e(147),
      v = (e(154), e(160)),
      y = e(136),
      b = (e(161), {
       ImpureClass: 0,
       PureClass: 1,
       StatelessFunctional: 2
      });
     n.prototype.render = function() {
      var e = p.get(this)._currentElement.type,
       t = e(this.props, this.context, this.updater);
      return r(e, t), t
     };
     var w = 1,
      x = {
       construct: function(e) {
        this._currentElement = e, this._rootNodeID = 0, this._compositeType = null, this._instance = null, this._hostParent = null, this._hostContainerInfo = null, this._updateBatchNumber = null, this._pendingElement = null, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._renderedNodeType = null, this._renderedComponent = null, this._context = null, this._mountOrder = 0, this._topLevelWrapper = null, this._pendingCallbacks = null, this._calledComponentWillUnmount = !1
       },
       mountComponent: function(e, t, s, u) {
        this._context = u, this._mountOrder = w++, this._hostParent = t, this._hostContainerInfo = s;
        var l, h = this._currentElement.props,
         d = this._processContext(u),
         f = this._currentElement.type,
         m = e.getUpdateQueue(),
         v = i(f),
         y = this._constructComponent(v, h, d, m);
        v || null != y && null != y.render ? this._compositeType = o(f) ? b.PureClass : b.ImpureClass : (l = y, r(f, l), null === y || y === !1 || c.isValidElement(y) ? void 0 : a("105", f.displayName || f.name || "Component"), y = new n(f), this._compositeType = b.StatelessFunctional), y.props = h, y.context = d, y.refs = g, y.updater = m, this._instance = y, p.set(y, this);
        var x = y.state;
        void 0 === x && (y.state = x = null), "object" != typeof x || Array.isArray(x) ? a("106", this.getName() || "ReactCompositeComponent") : void 0, this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1;
        var _;
        return _ = y.unstable_handleError ? this.performInitialMountWithErrorHandling(l, t, s, e, u) : this.performInitialMount(l, t, s, e, u), y.componentDidMount && e.getReactMountReady().enqueue(y.componentDidMount, y), _
       },
       _constructComponent: function(e, t, n, r) {
        return this._constructComponentWithoutOwner(e, t, n, r)
       },
       _constructComponentWithoutOwner: function(e, t, n, r) {
        var i, o = this._currentElement.type;
        return i = e ? new o(t, n, r) : o(t, n, r)
       },
       performInitialMountWithErrorHandling: function(e, t, n, r, i) {
        var o, a = r.checkpoint();
        try {
         o = this.performInitialMount(e, t, n, r, i)
        } catch (s) {
         r.rollback(a), this._instance.unstable_handleError(s), this._pendingStateQueue && (this._instance.state = this._processPendingState(this._instance.props, this._instance.context)), a = r.checkpoint(), this._renderedComponent.unmountComponent(!0), r.rollback(a), o = this.performInitialMount(e, t, n, r, i)
        }
        return o
       },
       performInitialMount: function(e, t, n, r, i) {
        var o = this._instance;
        o.componentWillMount && (o.componentWillMount(), this._pendingStateQueue && (o.state = this._processPendingState(o.props, o.context))), void 0 === e && (e = this._renderValidatedComponent());
        var a = d.getType(e);
        this._renderedNodeType = a;
        var s = this._instantiateReactComponent(e, a !== d.EMPTY);
        this._renderedComponent = s;
        var u = 0,
         l = f.mountComponent(s, r, t, n, this._processChildContext(i), u);
        return l
       },
       getHostNode: function() {
        return f.getHostNode(this._renderedComponent)
       },
       unmountComponent: function(e) {
        if (this._renderedComponent) {
         var t = this._instance;
         if (t.componentWillUnmount && !t._calledComponentWillUnmount)
          if (t._calledComponentWillUnmount = !0, e) {
           var n = this.getName() + ".componentWillUnmount()";
           h.invokeGuardedCallback(n, t.componentWillUnmount.bind(t))
          } else t.componentWillUnmount();
         this._renderedComponent && (f.unmountComponent(this._renderedComponent, e), this._renderedNodeType = null, this._renderedComponent = null, this._instance = null), this._pendingStateQueue = null, this._pendingReplaceState = !1, this._pendingForceUpdate = !1, this._pendingCallbacks = null, this._pendingElement = null, this._context = null, this._rootNodeID = 0, this._topLevelWrapper = null, p.remove(t)
        }
       },
       _maskContext: function(e) {
        var t = this._currentElement.type,
         n = t.contextTypes;
        if (!n) return g;
        var r = {};
        for (var i in n) r[i] = e[i];
        return r
       },
       _processContext: function(e) {
        var t = this._maskContext(e);
        return t
       },
       _processChildContext: function(e) {
        var t = this._currentElement.type,
         n = this._instance,
         r = n.getChildContext && n.getChildContext();
        if (r) {
         "object" != typeof t.childContextTypes ? a("107", this.getName() || "ReactCompositeComponent") : void 0;
         for (var i in r) i in t.childContextTypes ? void 0 : a("108", this.getName() || "ReactCompositeComponent", i);
         return s({}, e, r)
        }
        return e
       },
       _checkContextTypes: function(e, t, n) {
        m(e, t, n, this.getName(), null, this._debugID)
       },
       receiveComponent: function(e, t, n) {
        var r = this._currentElement,
         i = this._context;
        this._pendingElement = null, this.updateComponent(t, r, e, i, n)
       },
       performUpdateIfNecessary: function(e) {
        null != this._pendingElement ? f.receiveComponent(this, this._pendingElement, e, this._context) : null !== this._pendingStateQueue || this._pendingForceUpdate ? this.updateComponent(e, this._currentElement, this._currentElement, this._context, this._context) : this._updateBatchNumber = null
       },
       updateComponent: function(e, t, n, r, i) {
        var o = this._instance;
        null == o ? a("136", this.getName() || "ReactCompositeComponent") : void 0;
        var s, u = !1;
        this._context === i ? s = o.context : (s = this._processContext(i), u = !0);
        var l = t.props,
         c = n.props;
        t !== n && (u = !0), u && o.componentWillReceiveProps && o.componentWillReceiveProps(c, s);
        var h = this._processPendingState(c, s),
         p = !0;
        this._pendingForceUpdate || (o.shouldComponentUpdate ? p = o.shouldComponentUpdate(c, h, s) : this._compositeType === b.PureClass && (p = !v(l, c) || !v(o.state, h))), this._updateBatchNumber = null, p ? (this._pendingForceUpdate = !1, this._performComponentUpdate(n, c, h, s, e, i)) : (this._currentElement = n, this._context = i, o.props = c, o.state = h, o.context = s)
       },
       _processPendingState: function(e, t) {
        var n = this._instance,
         r = this._pendingStateQueue,
         i = this._pendingReplaceState;
        if (this._pendingReplaceState = !1, this._pendingStateQueue = null, !r) return n.state;
        if (i && 1 === r.length) return r[0];
        for (var o = s({}, i ? r[0] : n.state), a = i ? 1 : 0; a < r.length; a++) {
         var u = r[a];
         s(o, "function" == typeof u ? u.call(n, o, e, t) : u)
        }
        return o
       },
       _performComponentUpdate: function(e, t, n, r, i, o) {
        var a, s, u, l = this._instance,
         c = Boolean(l.componentDidUpdate);
        c && (a = l.props, s = l.state, u = l.context), l.componentWillUpdate && l.componentWillUpdate(t, n, r), this._currentElement = e, this._context = o, l.props = t, l.state = n, l.context = r, this._updateRenderedComponent(i, o), c && i.getReactMountReady().enqueue(l.componentDidUpdate.bind(l, a, s, u), l)
       },
       _updateRenderedComponent: function(e, t) {
        var n = this._renderedComponent,
         r = n._currentElement,
         i = this._renderValidatedComponent();
        if (y(r, i)) f.receiveComponent(n, i, e, this._processChildContext(t));
        else {
         var o = f.getHostNode(n);
         f.unmountComponent(n, !1);
         var a = d.getType(i);
         this._renderedNodeType = a;
         var s = this._instantiateReactComponent(i, a !== d.EMPTY);
         this._renderedComponent = s;
         var u = 0,
          l = f.mountComponent(s, e, this._hostParent, this._hostContainerInfo, this._processChildContext(t), u);
         this._replaceNodeWithMarkup(o, l, n)
        }
       },
       _replaceNodeWithMarkup: function(e, t, n) {
        u.replaceNodeWithMarkup(e, t, n)
       },
       _renderValidatedComponentWithoutOwnerOrContext: function() {
        var e = this._instance,
         t = e.render();
        return t
       },
       _renderValidatedComponent: function() {
        var e;
        if (this._compositeType !== b.StatelessFunctional) {
         l.current = this;
         try {
          e = this._renderValidatedComponentWithoutOwnerOrContext()
         } finally {
          l.current = null
         }
        } else e = this._renderValidatedComponentWithoutOwnerOrContext();
        return null === e || e === !1 || c.isValidElement(e) ? void 0 : a("109", this.getName() || "ReactCompositeComponent"), e
       },
       attachRef: function(e, t) {
        var n = this.getPublicInstance();
        null == n ? a("110") : void 0;
        var r = t.getPublicInstance(),
         i = n.refs === g ? n.refs = {} : n.refs;
        i[e] = r
       },
       detachRef: function(e) {
        var t = this.getPublicInstance().refs;
        delete t[e]
       },
       getName: function() {
        var e = this._currentElement.type,
         t = this._instance && this._instance.constructor;
        return e.displayName || t && t.displayName || e.name || t && t.name || null
       },
       getPublicInstance: function() {
        var e = this._instance;
        return this._compositeType === b.StatelessFunctional ? null : e
       },
       _instantiateReactComponent: null
      },
      _ = {
       Mixin: x
      };
     t.exports = _
    }, {
     111: 111,
     132: 132,
     136: 136,
     147: 147,
     154: 154,
     160: 160,
     161: 161,
     162: 162,
     33: 33,
     35: 35,
     56: 56,
     58: 58,
     65: 65,
     66: 66,
     71: 71,
     75: 75,
     80: 80
    }],
    35: [function(e, t) {
     var n = {
      current: null
     };
     t.exports = n
    }, {}],
    36: [function(e, t) {
     var n = e(40),
      r = e(55),
      i = e(68),
      o = e(80),
      a = e(88),
      s = e(89),
      u = e(115),
      l = e(122),
      c = e(133);
     e(161), r.inject();
     var h = {
      findDOMNode: u,
      render: i.render,
      unmountComponentAtNode: i.unmountComponentAtNode,
      version: s,
      unstable_batchedUpdates: a.batchedUpdates,
      unstable_renderSubtreeIntoContainer: c
     };
     "undefined" != typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ && "function" == typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject && __REACT_DEVTOOLS_GLOBAL_HOOK__.inject({
      ComponentTree: {
       getClosestInstanceFromNode: n.getClosestInstanceFromNode,
       getNodeFromInstance: function(e) {
        return e._renderedComponent && (e = l(e)), e ? n.getNodeFromInstance(e) : null
       }
      },
      Mount: i,
      Reconciler: o
     }), t.exports = h
    }, {
     115: 115,
     122: 122,
     133: 133,
     161: 161,
     40: 40,
     55: 55,
     68: 68,
     80: 80,
     88: 88,
     89: 89
    }],
    37: [function(e, t) {
     var n = e(14),
      r = {
       getHostProps: n.getHostProps
      };
     t.exports = r
    }, {
     14: 14
    }],
    38: [function(e, t) {
     function n(e) {
      if (e) {
       var t = e._currentElement._owner || null;
       if (t) {
        var n = t.getName();
        if (n) return " This DOM node was rendered by `" + n + "`."
       }
      }
      return ""
     }

     function r(e, t) {
      t && (Z[e._tag] && (null != t.children || null != t.dangerouslySetInnerHTML ? f("137", e._tag, e._currentElement._owner ? " Check the render method of " + e._currentElement._owner.getName() + "." : "") : void 0), null != t.dangerouslySetInnerHTML && (null != t.children ? f("60") : void 0, "object" == typeof t.dangerouslySetInnerHTML && j in t.dangerouslySetInnerHTML ? void 0 : f("61")), null != t.style && "object" != typeof t.style ? f("62", n(e)) : void 0)
     }

     function i(e, t, n, r) {
      if (!(r instanceof V)) {
       var i = e._hostContainerInfo,
        a = i._node && i._node.nodeType === W,
        s = a ? i._node : i._ownerDocument;
       U(t, s), r.getReactMountReady().enqueue(o, {
        inst: e,
        registrationName: t,
        listener: n
       })
      }
     }

     function o() {
      var e = this;
      S.putListener(e.inst, e.registrationName, e.listener)
     }

     function a() {
      var e = this;
      P.postMountWrapper(e)
     }

     function s() {
      var e = this;
      k.postMountWrapper(e)
     }

     function u() {
      var e = this;
      R.postMountWrapper(e)
     }

     function l() {
      var e = this;
      e._rootNodeID ? void 0 : f("63");
      var t = F(e);
      switch (t ? void 0 : f("64"), e._tag) {
       case "iframe":
       case "object":
        e._wrapperState.listeners = [E.trapBubbledEvent(_.topLevelTypes.topLoad, "load", t)];
        break;
       case "video":
       case "audio":
        e._wrapperState.listeners = [];
        for (var n in X) X.hasOwnProperty(n) && e._wrapperState.listeners.push(E.trapBubbledEvent(_.topLevelTypes[n], X[n], t));
        break;
       case "source":
        e._wrapperState.listeners = [E.trapBubbledEvent(_.topLevelTypes.topError, "error", t)];
        break;
       case "img":
        e._wrapperState.listeners = [E.trapBubbledEvent(_.topLevelTypes.topError, "error", t), E.trapBubbledEvent(_.topLevelTypes.topLoad, "load", t)];
        break;
       case "form":
        e._wrapperState.listeners = [E.trapBubbledEvent(_.topLevelTypes.topReset, "reset", t), E.trapBubbledEvent(_.topLevelTypes.topSubmit, "submit", t)];
        break;
       case "input":
       case "select":
       case "textarea":
        e._wrapperState.listeners = [E.trapBubbledEvent(_.topLevelTypes.topInvalid, "invalid", t)]
      }
     }

     function c() {
      I.postUpdateWrapper(this)
     }

     function h(e) {
      J.call($, e) || (K.test(e) ? void 0 : f("65", e), $[e] = !0)
     }

     function p(e, t) {
      return e.indexOf("-") >= 0 || null != t.is
     }

     function d(e) {
      var t = e.type;
      h(t), this._currentElement = e, this._tag = t.toLowerCase(), this._namespaceURI = null, this._renderedChildren = null, this._previousStyle = null, this._previousStyleCopy = null, this._hostNode = null, this._hostParent = null, this._rootNodeID = 0, this._domID = 0, this._hostContainerInfo = null, this._wrapperState = null, this._topLevelWrapper = null, this._flags = 0
     }
     var f = e(132),
      m = e(162),
      g = e(1),
      v = e(4),
      y = e(8),
      b = e(9),
      w = e(10),
      x = e(11),
      _ = e(16),
      S = e(17),
      C = e(18),
      E = e(27),
      T = e(37),
      M = e(39),
      A = e(40),
      P = e(46),
      R = e(47),
      I = e(48),
      k = e(52),
      D = (e(66), e(69)),
      V = e(84),
      L = (e(146), e(114)),
      B = (e(154), e(128), e(158)),
      O = (e(160), e(138), e(161), M),
      N = S.deleteListener,
      F = A.getNodeFromInstance,
      U = E.listenTo,
      z = C.registrationNameModules,
      G = {
       string: !0,
       number: !0
      },
      H = B({
       style: null
      }),
      j = B({
       __html: null
      }),
      q = {
       children: null,
       dangerouslySetInnerHTML: null,
       suppressContentEditableWarning: null
      },
      W = 11,
      X = {
       topAbort: "abort",
       topCanPlay: "canplay",
       topCanPlayThrough: "canplaythrough",
       topDurationChange: "durationchange",
       topEmptied: "emptied",
       topEncrypted: "encrypted",
       topEnded: "ended",
       topError: "error",
       topLoadedData: "loadeddata",
       topLoadedMetadata: "loadedmetadata",
       topLoadStart: "loadstart",
       topPause: "pause",
       topPlay: "play",
       topPlaying: "playing",
       topProgress: "progress",
       topRateChange: "ratechange",
       topSeeked: "seeked",
       topSeeking: "seeking",
       topStalled: "stalled",
       topSuspend: "suspend",
       topTimeUpdate: "timeupdate",
       topVolumeChange: "volumechange",
       topWaiting: "waiting"
      },
      Y = {
       area: !0,
       base: !0,
       br: !0,
       col: !0,
       embed: !0,
       hr: !0,
       img: !0,
       input: !0,
       keygen: !0,
       link: !0,
       meta: !0,
       param: !0,
       source: !0,
       track: !0,
       wbr: !0
      },
      Q = {
       listing: !0,
       pre: !0,
       textarea: !0
      },
      Z = m({
       menuitem: !0
      }, Y),
      K = /^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,
      $ = {},
      J = {}.hasOwnProperty,
      et = 1;
     d.displayName = "ReactDOMComponent", d.Mixin = {
      mountComponent: function(e, t, n, i) {
       this._rootNodeID = et++, this._domID = n._idCounter++, this._hostParent = t, this._hostContainerInfo = n;
       var o = this._currentElement.props;
       switch (this._tag) {
        case "audio":
        case "form":
        case "iframe":
        case "img":
        case "link":
        case "object":
        case "source":
        case "video":
         this._wrapperState = {
          listeners: null
         }, e.getReactMountReady().enqueue(l, this);
         break;
        case "button":
         o = T.getHostProps(this, o, t);
         break;
        case "input":
         P.mountWrapper(this, o, t), o = P.getHostProps(this, o), e.getReactMountReady().enqueue(l, this);
         break;
        case "option":
         R.mountWrapper(this, o, t), o = R.getHostProps(this, o);
         break;
        case "select":
         I.mountWrapper(this, o, t), o = I.getHostProps(this, o), e.getReactMountReady().enqueue(l, this);
         break;
        case "textarea":
         k.mountWrapper(this, o, t), o = k.getHostProps(this, o), e.getReactMountReady().enqueue(l, this)
       }
       r(this, o);
       var c, h;
       null != t ? (c = t._namespaceURI, h = t._tag) : n._tag && (c = n._namespaceURI, h = n._tag), (null == c || c === b.svg && "foreignobject" === h) && (c = b.html), c === b.html && ("svg" === this._tag ? c = b.svg : "math" === this._tag && (c = b.mathml)), this._namespaceURI = c;
       var p;
       if (e.useCreateElement) {
        var d, f = n._ownerDocument;
        if (c === b.html)
         if ("script" === this._tag) {
          var m = f.createElement("div"),
           v = this._currentElement.type;
          m.innerHTML = "<" + v + "></" + v + ">", d = m.removeChild(m.firstChild)
         } else d = o.is ? f.createElement(this._currentElement.type, o.is) : f.createElement(this._currentElement.type);
        else d = f.createElementNS(c, this._currentElement.type);
		


        A.precacheNode(this, d), this._flags |= O.hasCachedChildNodes, this._hostParent || x.setAttributeForRoot(d), this._updateDOMProperties(null, o, e);
        var w = y(d);
        this._createInitialChildren(e, o, i, w), p = w
       } else {
        var _ = this._createOpenTagMarkupAndPutListeners(e, o),
         S = this._createContentMarkup(e, o, i);
        p = !S && Y[this._tag] ? _ + "/>" : _ + ">" + S + "</" + this._currentElement.type + ">"
       }
       switch (this._tag) {
        case "input":
         e.getReactMountReady().enqueue(a, this), o.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
         break;
        case "textarea":
         e.getReactMountReady().enqueue(s, this), o.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
         break;
        case "select":
         o.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
         break;
        case "button":
         o.autoFocus && e.getReactMountReady().enqueue(g.focusDOMComponent, this);
         break;
        case "option":
         e.getReactMountReady().enqueue(u, this)
       }
       return p
      },
      _createOpenTagMarkupAndPutListeners: function(e, t) {
       var n = "<" + this._currentElement.type;
       for (var r in t)
        if (t.hasOwnProperty(r)) {
         var o = t[r];
         if (null != o)
          if (z.hasOwnProperty(r)) o && i(this, r, o, e);
          else {
           r === H && (o && (o = this._previousStyleCopy = m({}, t.style)), o = v.createMarkupForStyles(o, this));
           var a = null;
           null != this._tag && p(this._tag, t) ? q.hasOwnProperty(r) || (a = x.createMarkupForCustomAttribute(r, o)) : a = x.createMarkupForProperty(r, o), a && (n += " " + a)
          }
        } return e.renderToStaticMarkup ? n : (this._hostParent || (n += " " + x.createMarkupForRoot()), n += " " + x.createMarkupForID(this._domID))
      },
      _createContentMarkup: function(e, t, n) {
       var r = "",
        i = t.dangerouslySetInnerHTML;
       if (null != i) null != i.__html && (r = i.__html);
       else {
        var o = G[typeof t.children] ? t.children : null,
         a = null != o ? null : t.children;
        if (null != o) r = L(o);
        else if (null != a) {
         var s = this.mountChildren(a, e, n);
         r = s.join("")
        }
       }
       return Q[this._tag] && "\n" === r.charAt(0) ? "\n" + r : r
      },
      _createInitialChildren: function(e, t, n, r) {
       var i = t.dangerouslySetInnerHTML;
       if (null != i) null != i.__html && y.queueHTML(r, i.__html);
       else {
        var o = G[typeof t.children] ? t.children : null,
         a = null != o ? null : t.children;
        if (null != o) y.queueText(r, o);
        else if (null != a)
         for (var s = this.mountChildren(a, e, n), u = 0; u < s.length; u++) y.queueChild(r, s[u])
       }
      },
      receiveComponent: function(e, t, n) {
       var r = this._currentElement;
       this._currentElement = e, this.updateComponent(t, r, e, n)
      },
      updateComponent: function(e, t, n, i) {
       var o = t.props,
        a = this._currentElement.props;
       switch (this._tag) {
        case "button":
         o = T.getHostProps(this, o), a = T.getHostProps(this, a);
         break;
        case "input":
         o = P.getHostProps(this, o), a = P.getHostProps(this, a);
         break;
        case "option":
         o = R.getHostProps(this, o), a = R.getHostProps(this, a);
         break;
        case "select":
         o = I.getHostProps(this, o), a = I.getHostProps(this, a);
         break;
        case "textarea":
         o = k.getHostProps(this, o), a = k.getHostProps(this, a)
       }
       switch (r(this, a), this._updateDOMProperties(o, a, e), this._updateDOMChildren(o, a, e, i), this._tag) {
        case "input":
         P.updateWrapper(this);
         break;
        case "textarea":
         k.updateWrapper(this);
         break;
        case "select":
         e.getReactMountReady().enqueue(c, this)
       }
      },
      _updateDOMProperties: function(e, t, n) {
       var r, o, a;
       for (r in e)
        if (!t.hasOwnProperty(r) && e.hasOwnProperty(r) && null != e[r])
         if (r === H) {
          var s = this._previousStyleCopy;
          for (o in s) s.hasOwnProperty(o) && (a = a || {}, a[o] = "");
          this._previousStyleCopy = null
         } else z.hasOwnProperty(r) ? e[r] && N(this, r) : p(this._tag, e) ? q.hasOwnProperty(r) || x.deleteValueForAttribute(F(this), r) : (w.properties[r] || w.isCustomAttribute(r)) && x.deleteValueForProperty(F(this), r);
       for (r in t) {
        var u = t[r],
         l = r === H ? this._previousStyleCopy : null != e ? e[r] : void 0;
        if (t.hasOwnProperty(r) && u !== l && (null != u || null != l))
         if (r === H)
          if (u ? u = this._previousStyleCopy = m({}, u) : this._previousStyleCopy = null, l) {
           for (o in l) !l.hasOwnProperty(o) || u && u.hasOwnProperty(o) || (a = a || {}, a[o] = "");
           for (o in u) u.hasOwnProperty(o) && l[o] !== u[o] && (a = a || {}, a[o] = u[o])
          } else a = u;
        else if (z.hasOwnProperty(r)) u ? i(this, r, u, n) : l && N(this, r);
        else if (p(this._tag, t)) q.hasOwnProperty(r) || x.setValueForAttribute(F(this), r, u);
        else if (w.properties[r] || w.isCustomAttribute(r)) {
         var c = F(this);
         null != u ? x.setValueForProperty(c, r, u) : x.deleteValueForProperty(c, r)
        }
       }
       a && v.setValueForStyles(F(this), a, this)
      },
      _updateDOMChildren: function(e, t, n, r) {
       var i = G[typeof e.children] ? e.children : null,
        o = G[typeof t.children] ? t.children : null,
        a = e.dangerouslySetInnerHTML && e.dangerouslySetInnerHTML.__html,
        s = t.dangerouslySetInnerHTML && t.dangerouslySetInnerHTML.__html,
        u = null != i ? null : e.children,
        l = null != o ? null : t.children,
        c = null != i || null != a,
        h = null != o || null != s;
       null != u && null == l ? this.updateChildren(null, n, r) : c && !h && this.updateTextContent(""), null != o ? i !== o && this.updateTextContent("" + o) : null != s ? a !== s && this.updateMarkup("" + s) : null != l && this.updateChildren(l, n, r)
      },
      getHostNode: function() {
       return F(this)
      },
      unmountComponent: function(e) {
       switch (this._tag) {
        case "audio":
        case "form":
        case "iframe":
        case "img":
        case "link":
        case "object":
        case "source":
        case "video":
         var t = this._wrapperState.listeners;
         if (t)
          for (var n = 0; n < t.length; n++) t[n].remove();
         break;
        case "html":
        case "head":
        case "body":
         f("66", this._tag)
       }
       this.unmountChildren(e), A.uncacheNode(this), S.deleteAllListeners(this), this._rootNodeID = 0, this._domID = 0, this._wrapperState = null
      },
      getPublicInstance: function() {
       return F(this)
      }
     }, m(d.prototype, d.Mixin, D.Mixin), t.exports = d
    }, {
     1: 1,
     10: 10,
     11: 11,
     114: 114,
     128: 128,
     132: 132,
     138: 138,
     146: 146,
     154: 154,
     158: 158,
     16: 16,
     160: 160,
     161: 161,
     162: 162,
     17: 17,
     18: 18,
     27: 27,
     37: 37,
     39: 39,
     4: 4,
     40: 40,
     46: 46,
     47: 47,
     48: 48,
     52: 52,
     66: 66,
     69: 69,
     8: 8,
     84: 84,
     9: 9
    }],
    39: [function(e, t) {
     var n = {
      hasCachedChildNodes: 1
     };
     t.exports = n
    }, {}],
    40: [function(e, t) {
     function n(e) {
      for (var t; t = e._renderedComponent;) e = t;
      return e
     }

     function r(e, t) {
      var r = n(e);
      r._hostNode = t, t[f] = r
     }

     function i(e) {
      var t = e._hostNode;
      t && (delete t[f], e._hostNode = null)
     }

     function o(e, t) {
      if (!(e._flags & d.hasCachedChildNodes)) {
       var i = e._renderedChildren,
        o = t.firstChild;
       e: for (var a in i)
        if (i.hasOwnProperty(a)) {
         var s = i[a],
          u = n(s)._domID;
         if (0 !== u) {
          for (; null !== o; o = o.nextSibling)
           if (1 === o.nodeType && o.getAttribute(p) === String(u) || 8 === o.nodeType && o.nodeValue === " react-text: " + u + " " || 8 === o.nodeType && o.nodeValue === " react-empty: " + u + " ") {
            r(s, o);
            continue e
           } l("32", u)
         }
        } e._flags |= d.hasCachedChildNodes
      }
     }

     function a(e) {
      if (e[f]) return e[f];
      for (var t = []; !e[f];) {
       if (t.push(e), !e.parentNode) return null;
       e = e.parentNode
      }
      for (var n, r; e && (r = e[f]); e = t.pop()) n = r, t.length && o(r, e);
      return n
     }

     function s(e) {
      var t = a(e);
      return null != t && t._hostNode === e ? t : null
     }

     function u(e) {
      if (void 0 === e._hostNode ? l("33") : void 0, e._hostNode) return e._hostNode;
      for (var t = []; !e._hostNode;) t.push(e), e._hostParent ? void 0 : l("34"), e = e._hostParent;
      for (; t.length; e = t.pop()) o(e, e._hostNode);
      return e._hostNode
     }
     var l = e(132),
      c = e(10),
      h = e(39),
      p = (e(154), c.ID_ATTRIBUTE_NAME),
      d = h,
      f = "__reactInternalInstance$" + Math.random().toString(36).slice(2),
      m = {
       getClosestInstanceFromNode: a,
       getInstanceFromNode: s,
       getNodeFromInstance: u,
       precacheChildNodes: o,
       precacheNode: r,
       uncacheNode: i
      };
     t.exports = m
    }, {
     10: 10,
     132: 132,
     154: 154,
     39: 39
    }],
    41: [function(e, t) {
     function n(e, t) {
      var n = {
       _topLevelWrapper: e,
       _idCounter: 1,
       _ownerDocument: t ? t.nodeType === r ? t : t.ownerDocument : null,
       _node: t,
       _tag: t ? t.nodeName.toLowerCase() : null,
       _namespaceURI: t ? t.namespaceURI : null
      };
      return n
     }
     var r = (e(138), 9);
     t.exports = n
    }, {
     138: 138
    }],
    42: [function(e, t) {
     var n = e(162),
      r = e(8),
      i = e(40),
      o = function() {
       this._currentElement = null, this._hostNode = null, this._hostParent = null, this._hostContainerInfo = null, this._domID = 0
      };
     n(o.prototype, {
      mountComponent: function(e, t, n) {
       var o = n._idCounter++;
       this._domID = o, this._hostParent = t, this._hostContainerInfo = n;
       var a = " react-empty: " + this._domID + " ";
       if (e.useCreateElement) {
        var s = n._ownerDocument,
         u = s.createComment(a);
        return i.precacheNode(this, u), r(u)
       }
       return e.renderToStaticMarkup ? "" : "<!--" + a + "-->"
      },
      receiveComponent: function() {},
      getHostNode: function() {
       return i.getNodeFromInstance(this)
      },
      unmountComponent: function() {
       i.uncacheNode(this)
      }
     }), t.exports = o
    }, {
     162: 162,
     40: 40,
     8: 8
    }],
    43: [function(e, t) {
     var n = e(56),
      r = n.createFactory,
      i = {
       a: r("a"),
       abbr: r("abbr"),
       address: r("address"),
       area: r("area"),
       article: r("article"),
       aside: r("aside"),
       audio: r("audio"),
       b: r("b"),
       base: r("base"),
       bdi: r("bdi"),
       bdo: r("bdo"),
       big: r("big"),
       blockquote: r("blockquote"),
       body: r("body"),
       br: r("br"),
       button: r("button"),
       canvas: r("canvas"),
       caption: r("caption"),
       cite: r("cite"),
       code: r("code"),
       col: r("col"),
       colgroup: r("colgroup"),
       data: r("data"),
       datalist: r("datalist"),
       dd: r("dd"),
       del: r("del"),
       details: r("details"),
       dfn: r("dfn"),
       dialog: r("dialog"),
       div: r("div"),
       dl: r("dl"),
       dt: r("dt"),
       em: r("em"),
       embed: r("embed"),
       fieldset: r("fieldset"),
       figcaption: r("figcaption"),
       figure: r("figure"),
       footer: r("footer"),
       form: r("form"),
       h1: r("h1"),
       h2: r("h2"),
       h3: r("h3"),
       h4: r("h4"),
       h5: r("h5"),
       h6: r("h6"),
       head: r("head"),
       header: r("header"),
       hgroup: r("hgroup"),
       hr: r("hr"),
       html: r("html"),
       i: r("i"),
       iframe: r("iframe"),
       img: r("img"),
       input: r("input"),
       ins: r("ins"),
       kbd: r("kbd"),
       keygen: r("keygen"),
       label: r("label"),
       legend: r("legend"),
       li: r("li"),
       link: r("link"),
       main: r("main"),
       map: r("map"),
       mark: r("mark"),
       menu: r("menu"),
       menuitem: r("menuitem"),
       meta: r("meta"),
       meter: r("meter"),
       nav: r("nav"),
       noscript: r("noscript"),
       object: r("object"),
       ol: r("ol"),
       optgroup: r("optgroup"),
       option: r("option"),
       output: r("output"),
       p: r("p"),
       param: r("param"),
       picture: r("picture"),
       pre: r("pre"),
       progress: r("progress"),
       q: r("q"),
       rp: r("rp"),
       rt: r("rt"),
       ruby: r("ruby"),
       s: r("s"),
       samp: r("samp"),
       script: r("script"),
       section: r("section"),
       select: r("select"),
       small: r("small"),
       source: r("source"),
       span: r("span"),
       strong: r("strong"),
       style: r("style"),
       sub: r("sub"),
       summary: r("summary"),
       sup: r("sup"),
       table: r("table"),
       tbody: r("tbody"),
       td: r("td"),
       textarea: r("textarea"),
       tfoot: r("tfoot"),
       th: r("th"),
       thead: r("thead"),
       time: r("time"),
       title: r("title"),
       tr: r("tr"),
       track: r("track"),
       u: r("u"),
       ul: r("ul"),
       "var": r("var"),
       video: r("video"),
       wbr: r("wbr"),
       circle: r("circle"),
       clipPath: r("clipPath"),
       defs: r("defs"),
       ellipse: r("ellipse"),
       g: r("g"),
       image: r("image"),
       line: r("line"),
       linearGradient: r("linearGradient"),
       mask: r("mask"),
       path: r("path"),
       pattern: r("pattern"),
       polygon: r("polygon"),
       polyline: r("polyline"),
       radialGradient: r("radialGradient"),
       rect: r("rect"),
       stop: r("stop"),
       svg: r("svg"),
       text: r("text"),
       tspan: r("tspan")
      };
     t.exports = i
    }, {
     56: 56
    }],
    44: [function(e, t) {
     var n = {
      useCreateElement: !0
     };
     t.exports = n
    }, {}],
    45: [function(e, t) {
     var n = e(7),
      r = e(40),
      i = {
       dangerouslyProcessChildrenUpdates: function(e, t) {
        var i = r.getNodeFromInstance(e);
        n.processUpdates(i, t)
       }
      };
     t.exports = i
    }, {
     40: 40,
     7: 7
    }],
    46: [function(e, t) {
     function n() {
      this._rootNodeID && h.updateWrapper(this)
     }

     function r(e) {
      var t = this._currentElement.props,
       r = u.executeOnChange(t, e);
      c.asap(n, this);
      var o = t.name;
      if ("radio" === t.type && null != o) {
       for (var a = l.getNodeFromInstance(this), s = a; s.parentNode;) s = s.parentNode;
       for (var h = s.querySelectorAll("input[name=" + JSON.stringify("" + o) + '][type="radio"]'), p = 0; p < h.length; p++) {
        var d = h[p];
        if (d !== a && d.form === a.form) {
         var f = l.getInstanceFromNode(d);
         f ? void 0 : i("90"), c.asap(n, f)
        }
       }
      }
      return r
     }
     var i = e(132),
      o = e(162),
      a = e(14),
      s = e(11),
      u = e(24),
      l = e(40),
      c = e(88),
      h = (e(154), e(161), {
       getHostProps: function(e, t) {
        var n = u.getValue(t),
         r = u.getChecked(t),
         i = o({
          type: void 0,
          step: void 0,
          min: void 0,
          max: void 0
         }, a.getHostProps(e, t), {
          defaultChecked: void 0,
          defaultValue: void 0,
          value: null != n ? n : e._wrapperState.initialValue,
          checked: null != r ? r : e._wrapperState.initialChecked,
          onChange: e._wrapperState.onChange
         });
        return i
       },
       mountWrapper: function(e, t) {
        var n = t.defaultValue;
        e._wrapperState = {
         initialChecked: null != t.checked ? t.checked : t.defaultChecked,
         initialValue: null != t.value ? t.value : n,
         listeners: null,
         onChange: r.bind(e)
        }
       },
       updateWrapper: function(e) {
        var t = e._currentElement.props,
         n = t.checked;
        null != n && s.setValueForProperty(l.getNodeFromInstance(e), "checked", n || !1);
        var r = l.getNodeFromInstance(e),
         i = u.getValue(t);
        if (null != i) {
         var o = "" + i;
         o !== r.value && (r.value = o)
        } else null == t.value && null != t.defaultValue && (r.defaultValue = "" + t.defaultValue), null == t.checked && null != t.defaultChecked && (r.defaultChecked = !!t.defaultChecked)
       },
       postMountWrapper: function(e) {
        var t = e._currentElement.props,
         n = l.getNodeFromInstance(e);
        switch (t.type) {
         case "submit":
         case "reset":
          break;
         case "color":
         case "date":
         case "datetime":
         case "datetime-local":
         case "month":
         case "time":
         case "week":
          n.value = "", n.value = n.defaultValue;
          break;
         default:
          n.value = n.value
        }
        var r = n.name;
        "" !== r && (n.name = ""), n.defaultChecked = !n.defaultChecked, n.defaultChecked = !n.defaultChecked, "" !== r && (n.name = r)
       }
      });
     t.exports = h
    }, {
     11: 11,
     132: 132,
     14: 14,
     154: 154,
     161: 161,
     162: 162,
     24: 24,
     40: 40,
     88: 88
    }],
    47: [function(e, t) {
     function n(e) {
      var t = "";
      return i.forEach(e, function(e) {
       null != e && ("string" == typeof e || "number" == typeof e ? t += e : s || (s = !0))
      }), t
     }
     var r = e(162),
      i = e(29),
      o = e(40),
      a = e(48),
      s = (e(161), !1),
      u = {
       mountWrapper: function(e, t, r) {
        var i = null;
        if (null != r) {
         var o = r;
         "optgroup" === o._tag && (o = o._hostParent), null != o && "select" === o._tag && (i = a.getSelectValueContext(o))
        }
        var s = null;
        if (null != i) {
         var u;
         if (u = null != t.value ? t.value + "" : n(t.children), s = !1, Array.isArray(i)) {
          for (var l = 0; l < i.length; l++)
           if ("" + i[l] === u) {
            s = !0;
            break
           }
         } else s = "" + i === u
        }
        e._wrapperState = {
         selected: s
        }
       },
       postMountWrapper: function(e) {
        var t = e._currentElement.props;
        if (null != t.value) {
         var n = o.getNodeFromInstance(e);
         n.setAttribute("value", t.value)
        }
       },
       getHostProps: function(e, t) {
        var i = r({
         selected: void 0,
         children: void 0
        }, t);
        null != e._wrapperState.selected && (i.selected = e._wrapperState.selected);
        var o = n(t.children);
        return o && (i.children = o), i
       }
      };
     t.exports = u
    }, {
     161: 161,
     162: 162,
     29: 29,
     40: 40,
     48: 48
    }],
    48: [function(e, t) {
     function n() {
      if (this._rootNodeID && this._wrapperState.pendingUpdate) {
       this._wrapperState.pendingUpdate = !1;
       var e = this._currentElement.props,
        t = s.getValue(e);
       null != t && r(this, Boolean(e.multiple), t)
      }
     }

     function r(e, t, n) {
      var r, i, o = u.getNodeFromInstance(e).options;
      if (t) {
       for (r = {}, i = 0; i < n.length; i++) r["" + n[i]] = !0;
       for (i = 0; i < o.length; i++) {
        var a = r.hasOwnProperty(o[i].value);
        o[i].selected !== a && (o[i].selected = a)
       }
      } else {
       for (r = "" + n, i = 0; i < o.length; i++)
        if (o[i].value === r) return void(o[i].selected = !0);
       o.length && (o[0].selected = !0)
      }
     }

     function i(e) {
      var t = this._currentElement.props,
       r = s.executeOnChange(t, e);
      return this._rootNodeID && (this._wrapperState.pendingUpdate = !0), l.asap(n, this), r
     }
     var o = e(162),
      a = e(14),
      s = e(24),
      u = e(40),
      l = e(88),
      c = (e(161), !1),
      h = {
       getHostProps: function(e, t) {
        return o({}, a.getHostProps(e, t), {
         onChange: e._wrapperState.onChange,
         value: void 0
        })
       },
       mountWrapper: function(e, t) {
        var n = s.getValue(t);
        e._wrapperState = {
         pendingUpdate: !1,
         initialValue: null != n ? n : t.defaultValue,
         listeners: null,
         onChange: i.bind(e),
         wasMultiple: Boolean(t.multiple)
        }, void 0 === t.value || void 0 === t.defaultValue || c || (c = !0)
       },
       getSelectValueContext: function(e) {
        return e._wrapperState.initialValue
       },
       postUpdateWrapper: function(e) {
        var t = e._currentElement.props;
        e._wrapperState.initialValue = void 0;
        var n = e._wrapperState.wasMultiple;
        e._wrapperState.wasMultiple = Boolean(t.multiple);
        var i = s.getValue(t);
        null != i ? (e._wrapperState.pendingUpdate = !1, r(e, Boolean(t.multiple), i)) : n !== Boolean(t.multiple) && (null != t.defaultValue ? r(e, Boolean(t.multiple), t.defaultValue) : r(e, Boolean(t.multiple), t.multiple ? [] : ""))
       }
      };
     t.exports = h
    }, {
     14: 14,
     161: 161,
     162: 162,
     24: 24,
     40: 40,
     88: 88
    }],
    49: [function(e, t) {
     function n(e, t, n, r) {
      return e === n && t === r
     }

     function r(e) {
      var t = document.selection,
       n = t.createRange(),
       r = n.text.length,
       i = n.duplicate();
      i.moveToElementText(e), i.setEndPoint("EndToStart", n);
      var o = i.text.length,
       a = o + r;
      return {
       start: o,
       end: a
      }
     }

     function i(e) {
      var t = window.getSelection && window.getSelection();
      if (!t || 0 === t.rangeCount) return null;
      var r = t.anchorNode,
       i = t.anchorOffset,
       o = t.focusNode,
       a = t.focusOffset,
       s = t.getRangeAt(0);
      try {
       s.startContainer.nodeType, s.endContainer.nodeType
      } catch (e) {
       return null
      }
      var u = n(t.anchorNode, t.anchorOffset, t.focusNode, t.focusOffset),
       l = u ? 0 : s.toString().length,
       c = s.cloneRange();
      c.selectNodeContents(e), c.setEnd(s.startContainer, s.startOffset);
      var h = n(c.startContainer, c.startOffset, c.endContainer, c.endOffset),
       p = h ? 0 : c.toString().length,
       d = p + l,
       f = document.createRange();
      f.setStart(r, i), f.setEnd(o, a);
      var m = f.collapsed;
      return {
       start: m ? d : p,
       end: m ? p : d
      }
     }

     function o(e, t) {
      var n, r, i = document.selection.createRange().duplicate();
      void 0 === t.end ? (n = t.start, r = n) : t.start > t.end ? (n = t.end, r = t.start) : (n = t.start, r = t.end), i.moveToElementText(e), i.moveStart("character", n), i.setEndPoint("EndToStart", i), i.moveEnd("character", r - n), i.select()
     }

     function a(e, t) {
      if (window.getSelection) {
       var n = window.getSelection(),
        r = e[l()].length,
        i = Math.min(t.start, r),
        o = void 0 === t.end ? i : Math.min(t.end, r);
       if (!n.extend && i > o) {
        var a = o;
        o = i, i = a
       }
       var s = u(e, i),
        c = u(e, o);
       if (s && c) {
        var h = document.createRange();
        h.setStart(s.node, s.offset), n.removeAllRanges(), i > o ? (n.addRange(h), n.extend(c.node, c.offset)) : (h.setEnd(c.node, c.offset), n.addRange(h))
       }
      }
     }
     var s = e(140),
      u = e(124),
      l = e(125),
      c = s.canUseDOM && "selection" in document && !("getSelection" in window),
      h = {
       getOffsets: c ? r : i,
       setOffsets: c ? o : a
      };
     t.exports = h
    }, {
     124: 124,
     125: 125,
     140: 140
    }],
    50: [function(e, t) {
     var n = e(55),
      r = e(83),
      i = e(89);
     n.inject();
     var o = {
      renderToString: r.renderToString,
      renderToStaticMarkup: r.renderToStaticMarkup,
      version: i
     };
     t.exports = o
    }, {
     55: 55,
     83: 83,
     89: 89
    }],
    51: [function(e, t) {
     var n = e(132),
      r = e(162),
      i = e(7),
      o = e(8),
      a = e(40),
      s = e(114),
      u = (e(154), e(138), function(e) {
       this._currentElement = e, this._stringText = "" + e, this._hostNode = null, this._hostParent = null, this._domID = 0, this._mountIndex = 0, this._closingComment = null, this._commentNodes = null
      });
     r(u.prototype, {
      mountComponent: function(e, t, n) {
       var r = n._idCounter++,
        i = " react-text: " + r + " ",
        u = " /react-text ";
       if (this._domID = r, this._hostParent = t, e.useCreateElement) {
        var l = n._ownerDocument,
         c = l.createComment(i),
         h = l.createComment(u),
         p = o(l.createDocumentFragment());
        return o.queueChild(p, o(c)), this._stringText && o.queueChild(p, o(l.createTextNode(this._stringText))), o.queueChild(p, o(h)), a.precacheNode(this, c), this._closingComment = h, p
       }
       var d = s(this._stringText);
       return e.renderToStaticMarkup ? d : "<!--" + i + "-->" + d + "<!--" + u + "-->"
      },
      receiveComponent: function(e) {
       if (e !== this._currentElement) {
        this._currentElement = e;
        var t = "" + e;
        if (t !== this._stringText) {
         this._stringText = t;
         var n = this.getHostNode();
         i.replaceDelimitedText(n[0], n[1], t)
        }
       }
      },
      getHostNode: function() {
       var e = this._commentNodes;
       if (e) return e;
       if (!this._closingComment)
        for (var t = a.getNodeFromInstance(this), r = t.nextSibling;;) {
         if (null == r ? n("67", this._domID) : void 0, 8 === r.nodeType && " /react-text " === r.nodeValue) {
          this._closingComment = r;
          break
         }
         r = r.nextSibling
        }
       return e = [this._hostNode, this._closingComment], this._commentNodes = e, e
      },
      unmountComponent: function() {
       this._closingComment = null, this._commentNodes = null, a.uncacheNode(this)
      }
     }), t.exports = u
    }, {
     114: 114,
     132: 132,
     138: 138,
     154: 154,
     162: 162,
     40: 40,
     7: 7,
     8: 8
    }],
    52: [function(e, t) {
     function n() {
      this._rootNodeID && c.updateWrapper(this)
     }

     function r(e) {
      var t = this._currentElement.props,
       r = s.executeOnChange(t, e);
      return l.asap(n, this), r
     }
     var i = e(132),
      o = e(162),
      a = e(14),
      s = e(24),
      u = e(40),
      l = e(88),
      c = (e(154), e(161), {
       getHostProps: function(e, t) {
        null != t.dangerouslySetInnerHTML ? i("91") : void 0;
        var n = o({}, a.getHostProps(e, t), {
         value: void 0,
         defaultValue: void 0,
         children: "" + e._wrapperState.initialValue,
         onChange: e._wrapperState.onChange
        });
        return n
       },
       mountWrapper: function(e, t) {
        var n = s.getValue(t),
         o = n;
        if (null == n) {
         var a = t.defaultValue,
          u = t.children;
         null != u && (null != a ? i("92") : void 0, Array.isArray(u) && (u.length <= 1 ? void 0 : i("93"), u = u[0]), a = "" + u), null == a && (a = ""), o = a
        }
        e._wrapperState = {
         initialValue: "" + o,
         listeners: null,
         onChange: r.bind(e)
        }
       },
       updateWrapper: function(e) {
        var t = e._currentElement.props,
         n = u.getNodeFromInstance(e),
         r = s.getValue(t);
        if (null != r) {
         var i = "" + r;
         i !== n.value && (n.value = i), null == t.defaultValue && (n.defaultValue = i)
        }
        null != t.defaultValue && (n.defaultValue = t.defaultValue)
       },
       postMountWrapper: function(e) {
        var t = u.getNodeFromInstance(e);
        t.value = t.textContent
       }
      });
     t.exports = c
    }, {
     132: 132,
     14: 14,
     154: 154,
     161: 161,
     162: 162,
     24: 24,
     40: 40,
     88: 88
    }],
    53: [function(e, t) {
     function n(e, t) {
      "_hostNode" in e ? void 0 : s("33"), "_hostNode" in t ? void 0 : s("33");
      for (var n = 0, r = e; r; r = r._hostParent) n++;
      for (var i = 0, o = t; o; o = o._hostParent) i++;
      for (; n - i > 0;) e = e._hostParent, n--;
      for (; i - n > 0;) t = t._hostParent, i--;
      for (var a = n; a--;) {
       if (e === t) return e;
       e = e._hostParent, t = t._hostParent
      }
      return null
     }

     function r(e, t) {
      "_hostNode" in e ? void 0 : s("35"), "_hostNode" in t ? void 0 : s("35");
      for (; t;) {
       if (t === e) return !0;
       t = t._hostParent
      }
      return !1
     }

     function i(e) {
      return "_hostNode" in e ? void 0 : s("36"), e._hostParent
     }

     function o(e, t, n) {
      for (var r = []; e;) r.push(e), e = e._hostParent;
      var i;
      for (i = r.length; i-- > 0;) t(r[i], !1, n);
      for (i = 0; i < r.length; i++) t(r[i], !0, n)
     }

     function a(e, t, r, i, o) {
      for (var a = e && t ? n(e, t) : null, s = []; e && e !== a;) s.push(e), e = e._hostParent;
      for (var u = []; t && t !== a;) u.push(t), t = t._hostParent;
      var l;
      for (l = 0; l < s.length; l++) r(s[l], !0, i);
      for (l = u.length; l-- > 0;) r(u[l], !1, o)
     }
     var s = e(132);
     e(154), t.exports = {
      isAncestor: r,
      getLowestCommonAncestor: n,
      getParentInstance: i,
      traverseTwoPhase: o,
      traverseEnterLeave: a
     }
    }, {
     132: 132,
     154: 154
    }],
    54: [function(e, t) {
     function n() {
      this.reinitializeTransaction()
     }
     var r = e(162),
      i = e(88),
      o = e(106),
      a = e(146),
      s = {
       initialize: a,
       close: function() {
        h.isBatchingUpdates = !1
       }
      },
      u = {
       initialize: a,
       close: i.flushBatchedUpdates.bind(i)
      },
      l = [u, s];
     r(n.prototype, o.Mixin, {
      getTransactionWrappers: function() {
       return l
      }
     });
     var c = new n,
      h = {
       isBatchingUpdates: !1,
       batchedUpdates: function(e, t, n, r, i, o) {
        var a = h.isBatchingUpdates;
        h.isBatchingUpdates = !0, a ? e(t, n, r, i, o) : c.perform(e, null, t, n, r, i, o)
       }
      };
     t.exports = h
    }, {
     106: 106,
     146: 146,
     162: 162,
     88: 88
    }],
    55: [function(e, t) {
     function n() {
      x || (x = !0, g.EventEmitter.injectReactEventListener(m), g.EventPluginHub.injectEventPluginOrder(o), g.EventPluginUtils.injectComponentTree(c), g.EventPluginUtils.injectTreeTraversal(p), g.EventPluginHub.injectEventPluginsByName({
       SimpleEventPlugin: w,
       EnterLeaveEventPlugin: a,
       ChangeEventPlugin: i,
       SelectEventPlugin: b,
       BeforeInputEventPlugin: r
      }), g.HostComponent.injectGenericComponentClass(l), g.HostComponent.injectTextComponentClass(d), g.DOMProperty.injectDOMPropertyConfig(s), g.DOMProperty.injectDOMPropertyConfig(y), g.EmptyComponent.injectEmptyComponentFactory(function(e) {
       return new h(e)
      }), g.Updates.injectReconcileTransaction(v), g.Updates.injectBatchingStrategy(f), g.Component.injectEnvironment(u))
     }
     var r = e(2),
      i = e(6),
      o = e(13),
      a = e(15),
      s = e(22),
      u = e(32),
      l = e(38),
      c = e(40),
      h = e(42),
      p = e(53),
      d = e(51),
      f = e(54),
      m = e(60),
      g = e(63),
      v = e(79),
      y = e(90),
      b = e(91),
      w = e(92),
      x = !1;
     t.exports = {
      inject: n
     }
    }, {
     13: 13,
     15: 15,
     2: 2,
     22: 22,
     32: 32,
     38: 38,
     40: 40,
     42: 42,
     51: 51,
     53: 53,
     54: 54,
     6: 6,
     60: 60,
     63: 63,
     79: 79,
     90: 90,
     91: 91,
     92: 92
    }],
    56: [function(e, t) {
     function n(e) {
      return void 0 !== e.ref
     }

     function r(e) {
      return void 0 !== e.key
     }
     var i = e(162),
      o = e(35),
      a = (e(161), e(110), Object.prototype.hasOwnProperty),
      s = "function" == typeof Symbol && Symbol.for && Symbol.for("react.element") || 60103,
      u = {
       key: !0,
       ref: !0,
       __self: !0,
       __source: !0
      },
      l = function(e, t, n, r, i, o, a) {
       var u = {
        $$typeof: s,
        type: e,
        key: t,
        ref: n,
        props: a,
        _owner: o
       };
       return u
      };
     l.createElement = function(e, t, i) {
      var s, c = {},
       h = null,
       p = null,
       d = null,
       f = null;
      if (null != t) {
       n(t) && (p = t.ref), r(t) && (h = "" + t.key), d = void 0 === t.__self ? null : t.__self, f = void 0 === t.__source ? null : t.__source;
       for (s in t) a.call(t, s) && !u.hasOwnProperty(s) && (c[s] = t[s])
      }
      var m = arguments.length - 2;
      if (1 === m) c.children = i;
      else if (m > 1) {
       for (var g = Array(m), v = 0; m > v; v++) g[v] = arguments[v + 2];
       c.children = g
      }
      if (e && e.defaultProps) {
       var y = e.defaultProps;
       for (s in y) void 0 === c[s] && (c[s] = y[s])
      }
      return l(e, h, p, d, f, o.current, c)
     }, l.createFactory = function(e) {
      var t = l.createElement.bind(null, e);
      return t.type = e, t
     }, l.cloneAndReplaceKey = function(e, t) {
      var n = l(e.type, t, e.ref, e._self, e._source, e._owner, e.props);
      return n
     }, l.cloneElement = function(e, t, s) {
      var c, h = i({}, e.props),
       p = e.key,
       d = e.ref,
       f = e._self,
       m = e._source,
       g = e._owner;
      if (null != t) {
       n(t) && (d = t.ref, g = o.current), r(t) && (p = "" + t.key);
       var v;
       e.type && e.type.defaultProps && (v = e.type.defaultProps);
       for (c in t) a.call(t, c) && !u.hasOwnProperty(c) && (h[c] = void 0 === t[c] && void 0 !== v ? v[c] : t[c])
      }
      var y = arguments.length - 2;
      if (1 === y) h.children = s;
      else if (y > 1) {
       for (var b = Array(y), w = 0; y > w; w++) b[w] = arguments[w + 2];
       h.children = b
      }
      return l(e.type, p, d, f, m, g, h)
     }, l.isValidElement = function(e) {
      return "object" == typeof e && null !== e && e.$$typeof === s
     }, l.REACT_ELEMENT_TYPE = s, t.exports = l
    }, {
     110: 110,
     161: 161,
     162: 162,
     35: 35
    }],
    57: [function(e, t) {
     var n, r = {
       injectEmptyComponentFactory: function(e) {
        n = e
       }
      },
      i = {
       create: function(e) {
        return n(e)
       }
      };
     i.injection = r, t.exports = i
    }, {}],
    58: [function(e, t) {
     function n(e, t, n, i) {
      try {
       return t(n, i)
      } catch (e) {
       return void(null === r && (r = e))
      }
     }
     var r = null,
      i = {
       invokeGuardedCallback: n,
       invokeGuardedCallbackWithCatch: n,
       rethrowCaughtError: function() {
        if (r) {
         var e = r;
         throw r = null, e
        }
       }
      };
     t.exports = i
    }, {}],
    59: [function(e, t) {
     function n(e) {
      r.enqueueEvents(e), r.processEventQueue(!1)
     }
     var r = e(17),
      i = {
       handleTopLevel: function(e, t, i, o) {
        var a = r.extractEvents(e, t, i, o);
        n(a)
       }
      };
     t.exports = i
    }, {
     17: 17
    }],
    60: [function(e, t) {
     function n(e) {
      for (; e._hostParent;) e = e._hostParent;
      var t = c.getNodeFromInstance(e),
       n = t.parentNode;
      return c.getClosestInstanceFromNode(n)
     }

     function r(e, t) {
      this.topLevelType = e, this.nativeEvent = t, this.ancestors = []
     }

     function i(e) {
      var t = p(e.nativeEvent),
       r = c.getClosestInstanceFromNode(t),
       i = r;
      do e.ancestors.push(i), i = i && n(i); while (i);
      for (var o = 0; o < e.ancestors.length; o++) r = e.ancestors[o], f._handleTopLevel(e.topLevelType, r, e.nativeEvent, p(e.nativeEvent))
     }

     function o(e) {
      var t = d(window);
      e(t)
     }
     var a = e(162),
      s = e(139),
      u = e(140),
      l = e(25),
      c = e(40),
      h = e(88),
      p = e(121),
      d = e(151);
     a(r.prototype, {
      destructor: function() {
       this.topLevelType = null, this.nativeEvent = null, this.ancestors.length = 0
      }
     }), l.addPoolingTo(r, l.twoArgumentPooler);
     var f = {
      _enabled: !0,
      _handleTopLevel: null,
      WINDOW_HANDLE: u.canUseDOM ? window : null,
      setHandleTopLevel: function(e) {
       f._handleTopLevel = e
      },
      setEnabled: function(e) {
       f._enabled = !!e
      },
      isEnabled: function() {
       return f._enabled
      },
      trapBubbledEvent: function(e, t, n) {
       var r = n;
       return r ? s.listen(r, t, f.dispatchEvent.bind(null, e)) : null
      },
      trapCapturedEvent: function(e, t, n) {
       var r = n;
       return r ? s.capture(r, t, f.dispatchEvent.bind(null, e)) : null
      },
      monitorScrollValue: function(e) {
       var t = o.bind(null, e);
       s.listen(window, "scroll", t)
      },
      dispatchEvent: function(e, t) {
       if (f._enabled) {
        var n = r.getPooled(e, t);
        try {
         h.batchedUpdates(i, n)
        } finally {
         r.release(n)
        }
       }
      }
     };
     t.exports = f
    }, {
     121: 121,
     139: 139,
     140: 140,
     151: 151,
     162: 162,
     25: 25,
     40: 40,
     88: 88
    }],
    61: [function(e, t) {
     var n = {
      logTopLevelRenders: !1
     };
     t.exports = n
    }, {}],
    62: [function(e, t) {
     function n(e) {
      return s ? void 0 : o("111", e.type), new s(e)
     }

     function r(e) {
      return new l(e)
     }

     function i(e) {
      return e instanceof l
     }
     var o = e(132),
      a = e(162),
      s = (e(154), null),
      u = {},
      l = null,
      c = {
       injectGenericComponentClass: function(e) {
        s = e
       },
       injectTextComponentClass: function(e) {
        l = e
       },
       injectComponentClasses: function(e) {
        a(u, e)
       }
      },
      h = {
       createInternalComponent: n,
       createInstanceForText: r,
       isTextComponent: i,
       injection: c
      };
     t.exports = h
    }, {
     132: 132,
     154: 154,
     162: 162
    }],
    63: [function(e, t) {
     var n = e(10),
      r = e(17),
      i = e(19),
      o = e(33),
      a = e(30),
      s = e(57),
      u = e(27),
      l = e(62),
      c = e(88),
      h = {
       Component: o.injection,
       Class: a.injection,
       DOMProperty: n.injection,
       EmptyComponent: s.injection,
       EventPluginHub: r.injection,
       EventPluginUtils: i.injection,
       EventEmitter: u.injection,
       HostComponent: l.injection,
       Updates: c.injection
      };
     t.exports = h
    }, {
     10: 10,
     17: 17,
     19: 19,
     27: 27,
     30: 30,
     33: 33,
     57: 57,
     62: 62,
     88: 88
    }],
    64: [function(e, t) {
     function n(e) {
      return i(document.documentElement, e)
     }
     var r = e(49),
      i = e(143),
      o = e(148),
      a = e(149),
      s = {
       hasSelectionCapabilities: function(e) {
        var t = e && e.nodeName && e.nodeName.toLowerCase();
        return t && ("input" === t && "text" === e.type || "textarea" === t || "true" === e.contentEditable)
       },
       getSelectionInformation: function() {
        var e = a();
        return {
         focusedElem: e,
         selectionRange: s.hasSelectionCapabilities(e) ? s.getSelection(e) : null
        }
       },
       restoreSelection: function(e) {
        var t = a(),
         r = e.focusedElem,
         i = e.selectionRange;
        t !== r && n(r) && (s.hasSelectionCapabilities(r) && s.setSelection(r, i), o(r))
       },
       getSelection: function(e) {
        var t;
        if ("selectionStart" in e) t = {
         start: e.selectionStart,
         end: e.selectionEnd
        };
        else if (document.selection && e.nodeName && "input" === e.nodeName.toLowerCase()) {
         var n = document.selection.createRange();
         n.parentElement() === e && (t = {
          start: -n.moveStart("character", -e.value.length),
          end: -n.moveEnd("character", -e.value.length)
         })
        } else t = r.getOffsets(e);
        return t || {
         start: 0,
         end: 0
        }
       },
       setSelection: function(e, t) {
        var n = t.start,
         i = t.end;
        if (void 0 === i && (i = n), "selectionStart" in e) e.selectionStart = n, e.selectionEnd = Math.min(i, e.value.length);
        else if (document.selection && e.nodeName && "input" === e.nodeName.toLowerCase()) {
         var o = e.createTextRange();
         o.collapse(!0), o.moveStart("character", n), o.moveEnd("character", i - n), o.select()
        } else r.setOffsets(e, t)
       }
      };
     t.exports = s
    }, {
     143: 143,
     148: 148,
     149: 149,
     49: 49
    }],
    65: [function(e, t) {
     var n = {
      remove: function(e) {
       e._reactInternalInstance = void 0
      },
      get: function(e) {
       return e._reactInternalInstance
      },
      has: function(e) {
       return void 0 !== e._reactInternalInstance
      },
      set: function(e, t) {
       e._reactInternalInstance = t
      }
     };
     t.exports = n
    }, {}],
    66: [function(e, t) {
     var n = null;
     t.exports = {
      debugTool: n
     }
    }, {}],
    67: [function(e, t) {
     var n = e(109),
      r = /\/?>/,
      i = /^<\!\-\-/,
      o = {
       CHECKSUM_ATTR_NAME: "data-react-checksum",
       addChecksumToMarkup: function(e) {
        var t = n(e);
        return i.test(e) ? e : e.replace(r, " " + o.CHECKSUM_ATTR_NAME + '="' + t + '"$&')
       },
       canReuseMarkup: function(e, t) {
        var r = t.getAttribute(o.CHECKSUM_ATTR_NAME);
        r = r && parseInt(r, 10);
        var i = n(e);
        return i === r
       }
      };
     t.exports = o
    }, {
     109: 109
    }],
    68: [function(e, t) {
     function n(e, t) {
      for (var n = Math.min(e.length, t.length), r = 0; n > r; r++)
       if (e.charAt(r) !== t.charAt(r)) return r;
      return e.length === t.length ? -1 : n
     }

     function r(e) {
      return e ? e.nodeType === D ? e.documentElement : e.firstChild : null
     }

     function i(e) {
      return e.getAttribute && e.getAttribute(R) || ""
     }

     function o(e, t, n, r, i) {
      var o;
      if (w.logTopLevelRenders) {
       var a = e._currentElement.props,
        s = a.type;
       o = "React mount: " + ("string" == typeof s ? s : s.displayName || s.name), console.time(o)
      }
      var u = S.mountComponent(e, n, null, v(e, t), i, 0);
      o && console.timeEnd(o), e._renderedComponent._topLevelWrapper = e, N._mountImageIntoNode(u, t, e, r, n)
     }

     function a(e, t, n, r) {
      var i = E.ReactReconcileTransaction.getPooled(!n && y.useCreateElement);
      i.perform(o, null, e, t, i, n, r), E.ReactReconcileTransaction.release(i)
     }

     function s(e, t, n) {
      for (S.unmountComponent(e, n), t.nodeType === D && (t = t.documentElement); t.lastChild;) t.removeChild(t.lastChild)
     }

     function u(e) {
      var t = r(e);
      if (t) {
       var n = g.getInstanceFromNode(t);
       return !(!n || !n._hostParent)
      }
     }

     function l(e) {
      return !(!e || e.nodeType !== k && e.nodeType !== D && e.nodeType !== V)
     }

     function c(e) {
      var t = r(e),
       n = t && g.getInstanceFromNode(t);
      return n && !n._hostParent ? n : null
     }

     function h(e) {
      var t = c(e);
      return t ? t._hostContainerInfo._topLevelWrapper : null
     }
     var p = e(132),
      d = e(8),
      f = e(10),
      m = e(27),
      g = (e(35), e(40)),
      v = e(41),
      y = e(44),
      b = e(56),
      w = e(61),
      x = e(65),
      _ = (e(66), e(67)),
      S = e(80),
      C = e(87),
      E = e(88),
      T = e(147),
      M = e(127),
      A = (e(154), e(134)),
      P = e(136),
      R = (e(161), f.ID_ATTRIBUTE_NAME),
      I = f.ROOT_ATTRIBUTE_NAME,
      k = 1,
      D = 9,
      V = 11,
      L = {},
      B = 1,
      O = function() {
       this.rootID = B++
      };
     O.prototype.isReactComponent = {}, O.prototype.render = function() {
      return this.props
     };
     var N = {
      TopLevelWrapper: O,
      _instancesByReactRootID: L,
      scrollMonitor: function(e, t) {
       t()
      },
      _updateRootComponent: function(e, t, n, r, i) {
       return N.scrollMonitor(r, function() {
        C.enqueueElementInternal(e, t, n), i && C.enqueueCallbackInternal(e, i)
       }), e
      },
      _renderNewRootComponent: function(e, t, n, r) {
       l(t) ? void 0 : p("37"), m.ensureScrollValueMonitoring();
       var i = M(e, !1);
       E.batchedUpdates(a, i, t, n, r);
       var o = i._instance.rootID;
       return L[o] = i, i
      },
      renderSubtreeIntoContainer: function(e, t, n, r) {
       return null != e && x.has(e) ? void 0 : p("38"), N._renderSubtreeIntoContainer(e, t, n, r)
      },
      _renderSubtreeIntoContainer: function(e, t, n, o) {
       C.validateCallback(o, "ReactDOM.render"), b.isValidElement(t) ? void 0 : p("39", "string" == typeof t ? " Instead of passing a string like 'div', pass React.createElement('div') or <div />." : "function" == typeof t ? " Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />." : null != t && void 0 !== t.props ? " This may be caused by unintentionally loading two independent copies of React." : "");
       var a, s = b(O, null, null, null, null, null, t);
       if (e) {
        var l = x.get(e);
        a = l._processChildContext(l._context)
       } else a = T;
       var c = h(n);
       if (c) {
        var d = c._currentElement,
         f = d.props;
        if (P(f, t)) {
         var m = c._renderedComponent.getPublicInstance(),
          g = o && function() {
           o.call(m)
          };
         return N._updateRootComponent(c, s, a, n, g), m
        }
        N.unmountComponentAtNode(n)
       }
       var v = r(n),
        y = v && !!i(v),
        w = u(n),
        _ = y && !c && !w,
        S = N._renderNewRootComponent(s, n, _, a)._renderedComponent.getPublicInstance();
       return o && o.call(S), S
      },
      render: function(e, t, n) {
       return N._renderSubtreeIntoContainer(null, e, t, n)
      },
      unmountComponentAtNode: function(e) {
       l(e) ? void 0 : p("40");
       var t = h(e);
       return t ? (delete L[t._instance.rootID], E.batchedUpdates(s, t, e, !1), !0) : (u(e), 1 === e.nodeType && e.hasAttribute(I), !1)
      },
      _mountImageIntoNode: function(e, t, i, o, a) {
       if (l(t) ? void 0 : p("41"), o) {
        var s = r(t);
        if (_.canReuseMarkup(e, s)) return void g.precacheNode(i, s);
        var u = s.getAttribute(_.CHECKSUM_ATTR_NAME);
        s.removeAttribute(_.CHECKSUM_ATTR_NAME);
        var c = s.outerHTML;
        s.setAttribute(_.CHECKSUM_ATTR_NAME, u);
        var h = e,
         f = n(h, c),
         m = " (client) " + h.substring(f - 20, f + 20) + "\n (server) " + c.substring(f - 20, f + 20);
        t.nodeType === D ? p("42", m) : void 0
       }
       if (t.nodeType === D ? p("43") : void 0, a.useCreateElement) {
        for (; t.lastChild;) t.removeChild(t.lastChild);
        d.insertTreeBefore(t, e, null)
       } else A(t, e), g.precacheNode(i, t.firstChild)
      }
     };
     t.exports = N
    }, {
     10: 10,
     127: 127,
     132: 132,
     134: 134,
     136: 136,
     147: 147,
     154: 154,
     161: 161,
     27: 27,
     35: 35,
     40: 40,
     41: 41,
     44: 44,
     56: 56,
     61: 61,
     65: 65,
     66: 66,
     67: 67,
     8: 8,
     80: 80,
     87: 87,
     88: 88
    }],
    69: [function(e, t) {
     function n(e, t, n) {
      return {
       type: h.INSERT_MARKUP,
       content: e,
       fromIndex: null,
       fromNode: null,
       toIndex: n,
       afterNode: t
      }
     }

     function r(e, t, n) {
      return {
       type: h.MOVE_EXISTING,
       content: null,
       fromIndex: e._mountIndex,
       fromNode: p.getHostNode(e),
       toIndex: n,
       afterNode: t
      }
     }

     function i(e, t) {
      return {
       type: h.REMOVE_NODE,
       content: null,
       fromIndex: e._mountIndex,
       fromNode: t,
       toIndex: null,
       afterNode: null
      }
     }

     function o(e) {
      return {
       type: h.SET_MARKUP,
       content: e,
       fromIndex: null,
       fromNode: null,
       toIndex: null,
       afterNode: null
      }
     }

     function a(e) {
      return {
       type: h.TEXT_CONTENT,
       content: e,
       fromIndex: null,
       fromNode: null,
       toIndex: null,
       afterNode: null
      }
     }

     function s(e, t) {
      return t && (e = e || [], e.push(t)), e
     }

     function u(e, t) {
      c.processChildrenUpdates(e, t)
     }
     var l = e(132),
      c = e(33),
      h = (e(65), e(66), e(70)),
      p = (e(35), e(80)),
      d = e(28),
      f = (e(146), e(116)),
      m = (e(154), {
       Mixin: {
        _reconcilerInstantiateChildren: function(e, t, n) {
         return d.instantiateChildren(e, t, n)
        },
        _reconcilerUpdateChildren: function(e, t, n, r, i, o) {
         var a, s = 0;
         return a = f(t, s), d.updateChildren(e, a, n, r, i, this, this._hostContainerInfo, o, s), a
        },
        mountChildren: function(e, t, n) {
         var r = this._reconcilerInstantiateChildren(e, t, n);
         this._renderedChildren = r;
         var i = [],
          o = 0;
         for (var a in r)
          if (r.hasOwnProperty(a)) {
           var s = r[a],
            u = 0,
            l = p.mountComponent(s, t, this, this._hostContainerInfo, n, u);
           s._mountIndex = o++, i.push(l)
          } return i
        },
        updateTextContent: function(e) {
         var t = this._renderedChildren;
         d.unmountChildren(t, !1);
         for (var n in t) t.hasOwnProperty(n) && l("118");
         var r = [a(e)];
         u(this, r)
        },
        updateMarkup: function(e) {
         var t = this._renderedChildren;
         d.unmountChildren(t, !1);
         for (var n in t) t.hasOwnProperty(n) && l("118");
         var r = [o(e)];
         u(this, r)
        },
        updateChildren: function(e, t, n) {
         this._updateChildren(e, t, n)
        },
        _updateChildren: function(e, t, n) {
         var r = this._renderedChildren,
          i = {},
          o = [],
          a = this._reconcilerUpdateChildren(r, e, o, i, t, n);
         if (a || r) {
          var l, c = null,
           h = 0,
           d = 0,
           f = 0,
           m = null;
          for (l in a)
           if (a.hasOwnProperty(l)) {
            var g = r && r[l],
             v = a[l];
            g === v ? (c = s(c, this.moveChild(g, m, h, d)), d = Math.max(g._mountIndex, d), g._mountIndex = h) : (g && (d = Math.max(g._mountIndex, d)), c = s(c, this._mountChildAtIndex(v, o[f], m, h, t, n)), f++), h++, m = p.getHostNode(v)
           } for (l in i) i.hasOwnProperty(l) && (c = s(c, this._unmountChild(r[l], i[l])));
          c && u(this, c), this._renderedChildren = a
         }
        },
        unmountChildren: function(e) {
         var t = this._renderedChildren;
         d.unmountChildren(t, e), this._renderedChildren = null
        },
        moveChild: function(e, t, n, i) {
         return e._mountIndex < i ? r(e, t, n) : void 0
        },
        createChild: function(e, t, r) {
         return n(r, t, e._mountIndex)
        },
        removeChild: function(e, t) {
         return i(e, t)
        },
        _mountChildAtIndex: function(e, t, n, r) {
         return e._mountIndex = r, this.createChild(e, n, t)
        },
        _unmountChild: function(e, t) {
         var n = this.removeChild(e, t);
         return e._mountIndex = null, n
        }
       }
      });
     t.exports = m
    }, {
     116: 116,
     132: 132,
     146: 146,
     154: 154,
     28: 28,
     33: 33,
     35: 35,
     65: 65,
     66: 66,
     70: 70,
     80: 80
    }],
    70: [function(e, t) {
     var n = e(157),
      r = n({
       INSERT_MARKUP: null,
       MOVE_EXISTING: null,
       REMOVE_NODE: null,
       SET_MARKUP: null,
       TEXT_CONTENT: null
      });
     t.exports = r
    }, {
     157: 157
    }],
    71: [function(e, t) {
     var n = e(132),
      r = e(56),
      i = (e(154), {
       HOST: 0,
       COMPOSITE: 1,
       EMPTY: 2,
       getType: function(e) {
        return null === e || e === !1 ? i.EMPTY : r.isValidElement(e) ? "function" == typeof e.type ? i.COMPOSITE : i.HOST : void n("26", e)
       }
      });
     t.exports = i
    }, {
     132: 132,
     154: 154,
     56: 56
    }],
    72: [function(e, t) {
     function n() {}
     var r = (e(161), {
      isMounted: function() {
       return !1
      },
      enqueueCallback: function() {},
      enqueueForceUpdate: function(e) {
       n(e, "forceUpdate")
      },
      enqueueReplaceState: function(e) {
       n(e, "replaceState")
      },
      enqueueSetState: function(e) {
       n(e, "setState")
      }
     });
     t.exports = r
    }, {
     161: 161
    }],
    73: [function(e, t) {
     var n = e(132),
      r = (e(154), {
       isValidOwner: function(e) {
        return !(!e || "function" != typeof e.attachRef || "function" != typeof e.detachRef)
       },
       addComponentAsRefTo: function(e, t, i) {
        r.isValidOwner(i) ? void 0 : n("119"), i.attachRef(t, e)
       },
       removeComponentAsRefFrom: function(e, t, i) {
        r.isValidOwner(i) ? void 0 : n("120");
        var o = i.getPublicInstance();
        o && o.refs[t] === e.getPublicInstance() && i.detachRef(t)
       }
      });
     t.exports = r
    }, {
     132: 132,
     154: 154
    }],
    74: [function(e, t) {
     var n = {};
     t.exports = n
    }, {}],
    75: [function(e, t) {
     var n = e(157),
      r = n({
       prop: null,
       context: null,
       childContext: null
      });
     t.exports = r
    }, {
     157: 157
    }],
    76: [function(e, t) {
     function n(e, t) {
      return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t
     }

     function r(e) {
      this.message = e, this.stack = ""
     }

     function i(e) {
      function t(t, n, i, o, a, s) {
       if (o = o || E, s = s || i, null == n[i]) {
        var u = x[a];
        return t ? new r("Required " + u + " `" + s + "` was not specified in " + ("`" + o + "`.")) : null
       }
       return e(n, i, o, a, s)
      }
      var n = t.bind(null, !1);
      return n.isRequired = t.bind(null, !0), n
     }

     function o(e) {
      function t(t, n, i, o, a) {
       var s = t[n],
        u = v(s);
       if (u !== e) {
        var l = x[o],
         c = y(s);
        return new r("Invalid " + l + " `" + a + "` of type " + ("`" + c + "` supplied to `" + i + "`, expected ") + ("`" + e + "`."))
       }
       return null
      }
      return i(t)
     }

     function a() {
      return i(S.thatReturns(null))
     }

     function s(e) {
      function t(t, n, i, o, a) {
       if ("function" != typeof e) return new r("Property `" + a + "` of component `" + i + "` has invalid PropType notation inside arrayOf.");
       var s = t[n];
       if (!Array.isArray(s)) {
        var u = x[o],
         l = v(s);
        return new r("Invalid " + u + " `" + a + "` of type " + ("`" + l + "` supplied to `" + i + "`, expected an array."))
       }
       for (var c = 0; c < s.length; c++) {
        var h = e(s, c, i, o, a + "[" + c + "]", _);
        if (h instanceof Error) return h
       }
       return null
      }
      return i(t)
     }

     function u() {
      function e(e, t, n, i, o) {
       var a = e[t];
       if (!w.isValidElement(a)) {
        var s = x[i],
         u = v(a);
        return new r("Invalid " + s + " `" + o + "` of type " + ("`" + u + "` supplied to `" + n + "`, expected a single ReactElement."))
       }
       return null
      }
      return i(e)
     }

     function l(e) {
      function t(t, n, i, o, a) {
       if (!(t[n] instanceof e)) {
        var s = x[o],
         u = e.name || E,
         l = b(t[n]);
        return new r("Invalid " + s + " `" + a + "` of type " + ("`" + l + "` supplied to `" + i + "`, expected ") + ("instance of `" + u + "`."))
       }
       return null
      }
      return i(t)
     }

     function c(e) {
      function t(t, i, o, a, s) {
       for (var u = t[i], l = 0; l < e.length; l++)
        if (n(u, e[l])) return null;
       var c = x[a],
        h = JSON.stringify(e);
       return new r("Invalid " + c + " `" + s + "` of value `" + u + "` " + ("supplied to `" + o + "`, expected one of " + h + "."))
      }
      return Array.isArray(e) ? i(t) : S.thatReturnsNull
     }

     function h(e) {
      function t(t, n, i, o, a) {
       if ("function" != typeof e) return new r("Property `" + a + "` of component `" + i + "` has invalid PropType notation inside objectOf.");
       var s = t[n],
        u = v(s);
       if ("object" !== u) {
        var l = x[o];
        return new r("Invalid " + l + " `" + a + "` of type " + ("`" + u + "` supplied to `" + i + "`, expected an object."))
       }
       for (var c in s)
        if (s.hasOwnProperty(c)) {
         var h = e(s, c, i, o, a + "." + c, _);
         if (h instanceof Error) return h
        } return null
      }
      return i(t)
     }

     function p(e) {
      function t(t, n, i, o, a) {
       for (var s = 0; s < e.length; s++) {
        var u = e[s];
        if (null == u(t, n, i, o, a, _)) return null
       }
       var l = x[o];
       return new r("Invalid " + l + " `" + a + "` supplied to " + ("`" + i + "`."))
      }
      return Array.isArray(e) ? i(t) : S.thatReturnsNull
     }

     function d() {
      function e(e, t, n, i, o) {
       if (!m(e[t])) {
        var a = x[i];
        return new r("Invalid " + a + " `" + o + "` supplied to " + ("`" + n + "`, expected a ReactNode."))
       }
       return null
      }
      return i(e)
     }

     function f(e) {
      function t(t, n, i, o, a) {
       var s = t[n],
        u = v(s);
       if ("object" !== u) {
        var l = x[o];
        return new r("Invalid " + l + " `" + a + "` of type `" + u + "` " + ("supplied to `" + i + "`, expected `object`."))
       }
       for (var c in e) {
        var h = e[c];
        if (h) {
         var p = h(s, c, i, o, a + "." + c, _);
         if (p) return p
        }
       }
       return null
      }
      return i(t)
     }

     function m(e) {
      switch (typeof e) {
       case "number":
       case "string":
       case "undefined":
        return !0;
       case "boolean":
        return !e;
       case "object":
        if (Array.isArray(e)) return e.every(m);
        if (null === e || w.isValidElement(e)) return !0;
        var t = C(e);
        if (!t) return !1;
        var n, r = t.call(e);
        if (t !== e.entries) {
         for (; !(n = r.next()).done;)
          if (!m(n.value)) return !1
        } else
         for (; !(n = r.next()).done;) {
          var i = n.value;
          if (i && !m(i[1])) return !1
         }
        return !0;
       default:
        return !1
      }
     }

     function g(e, t) {
      return "symbol" === e || "Symbol" === t["@@toStringTag"] || "function" == typeof Symbol && t instanceof Symbol
     }

     function v(e) {
      var t = typeof e;
      return Array.isArray(e) ? "array" : e instanceof RegExp ? "object" : g(t, e) ? "symbol" : t
     }

     function y(e) {
      var t = v(e);
      if ("object" === t) {
       if (e instanceof Date) return "date";
       if (e instanceof RegExp) return "regexp"
      }
      return t
     }

     function b(e) {
      return e.constructor && e.constructor.name ? e.constructor.name : E
     }
     var w = e(56),
      x = e(74),
      _ = e(77),
      S = e(146),
      C = e(123),
      E = (e(161), "<<anonymous>>"),
      T = {
       array: o("array"),
       bool: o("boolean"),
       func: o("function"),
       number: o("number"),
       object: o("object"),
       string: o("string"),
       symbol: o("symbol"),
       any: a(),
       arrayOf: s,
       element: u(),
       instanceOf: l,
       node: d(),
       objectOf: h,
       oneOf: c,
       oneOfType: p,
       shape: f
      };
     r.prototype = Error.prototype, t.exports = T
    }, {
     123: 123,
     146: 146,
     161: 161,
     56: 56,
     74: 74,
     77: 77
    }],
    77: [function(e, t) {
     var n = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
     t.exports = n
    }, {}],
    78: [function(e, t) {
     function n(e, t, n) {
      this.props = e, this.context = t, this.refs = s, this.updater = n || a
     }

     function r() {}
     var i = e(162),
      o = e(31),
      a = e(72),
      s = e(147);
     r.prototype = o.prototype, n.prototype = new r, n.prototype.constructor = n, i(n.prototype, o.prototype), n.prototype.isPureReactComponent = !0, t.exports = n
    }, {
     147: 147,
     162: 162,
     31: 31,
     72: 72
    }],
    79: [function(e, t) {
     function n(e) {
      this.reinitializeTransaction(), this.renderToStaticMarkup = !1, this.reactMountReady = i.getPooled(null), this.useCreateElement = e
     }
     var r = e(162),
      i = e(5),
      o = e(25),
      a = e(27),
      s = e(64),
      u = (e(66), e(106)),
      l = e(87),
      c = {
       initialize: s.getSelectionInformation,
       close: s.restoreSelection
      },
      h = {
       initialize: function() {
        var e = a.isEnabled();
        return a.setEnabled(!1), e
       },
       close: function(e) {
        a.setEnabled(e)
       }
      },
      p = {
       initialize: function() {
        this.reactMountReady.reset()
       },
       close: function() {
        this.reactMountReady.notifyAll()
       }
      },
      d = [c, h, p],
      f = {
       getTransactionWrappers: function() {
        return d
       },
       getReactMountReady: function() {
        return this.reactMountReady
       },
       getUpdateQueue: function() {
        return l
       },
       checkpoint: function() {
        return this.reactMountReady.checkpoint()
       },
       rollback: function(e) {
        this.reactMountReady.rollback(e)
       },
       destructor: function() {
        i.release(this.reactMountReady), this.reactMountReady = null
       }
      };
     r(n.prototype, u.Mixin, f), o.addPoolingTo(n), t.exports = n
    }, {
     106: 106,
     162: 162,
     25: 25,
     27: 27,
     5: 5,
     64: 64,
     66: 66,
     87: 87
    }],
    80: [function(e, t) {
     function n() {
      r.attachRefs(this, this._currentElement)
     }
     var r = e(81),
      i = (e(66), e(161), {
       mountComponent: function(e, t, r, i, o, a) {
        var s = e.mountComponent(t, r, i, o, a);
        return e._currentElement && null != e._currentElement.ref && t.getReactMountReady().enqueue(n, e), s
       },
       getHostNode: function(e) {
        return e.getHostNode()
       },
       unmountComponent: function(e, t) {
        r.detachRefs(e, e._currentElement), e.unmountComponent(t)
       },
       receiveComponent: function(e, t, i, o) {
        var a = e._currentElement;
        if (t !== a || o !== e._context) {
         var s = r.shouldUpdateRefs(a, t);
         s && r.detachRefs(e, a), e.receiveComponent(t, i, o), s && e._currentElement && null != e._currentElement.ref && i.getReactMountReady().enqueue(n, e)
        }
       },
       performUpdateIfNecessary: function(e, t, n) {
        e._updateBatchNumber === n && e.performUpdateIfNecessary(t)
       }
      });
     t.exports = i
    }, {
     161: 161,
     66: 66,
     81: 81
    }],
    81: [function(e, t) {
     function n(e, t, n) {
      "function" == typeof e ? e(t.getPublicInstance()) : i.addComponentAsRefTo(t, e, n)
     }

     function r(e, t, n) {
      "function" == typeof e ? e(null) : i.removeComponentAsRefFrom(t, e, n)
     }
     var i = e(73),
      o = {};
     o.attachRefs = function(e, t) {
      if (null !== t && t !== !1) {
       var r = t.ref;
       null != r && n(r, e, t._owner)
      }
     }, o.shouldUpdateRefs = function(e, t) {
      var n = null === e || e === !1,
       r = null === t || t === !1;
      return n || r || t.ref !== e.ref || "string" == typeof t.ref && t._owner !== e._owner
     }, o.detachRefs = function(e, t) {
      if (null !== t && t !== !1) {
       var n = t.ref;
       null != n && r(n, e, t._owner)
      }
     }, t.exports = o
    }, {
     73: 73
    }],
    82: [function(e, t) {
     var n = {
      isBatchingUpdates: !1,
      batchedUpdates: function() {}
     };
     t.exports = n
    }, {}],
    83: [function(e, t) {
     function n(e, t) {
      var n;
      try {
       return d.injection.injectBatchingStrategy(h), n = p.getPooled(t), g++, n.perform(function() {
        var r = m(e, !0),
         i = c.mountComponent(r, n, null, a(), f, 0);
        return t || (i = l.addChecksumToMarkup(i)), i
       }, null)
      } finally {
       g--, p.release(n), g || d.injection.injectBatchingStrategy(s)
      }
     }

     function r(e) {
      return u.isValidElement(e) ? void 0 : o("46"), n(e, !1)
     }

     function i(e) {
      return u.isValidElement(e) ? void 0 : o("47"), n(e, !0)
     }
     var o = e(132),
      a = e(41),
      s = e(54),
      u = e(56),
      l = (e(66), e(67)),
      c = e(80),
      h = e(82),
      p = e(84),
      d = e(88),
      f = e(147),
      m = e(127),
      g = (e(154), 0);
     t.exports = {
      renderToString: r,
      renderToStaticMarkup: i
     }
    }, {
     127: 127,
     132: 132,
     147: 147,
     154: 154,
     41: 41,
     54: 54,
     56: 56,
     66: 66,
     67: 67,
     80: 80,
     82: 82,
     84: 84,
     88: 88
    }],
    84: [function(e, t) {
     function n(e) {
      this.reinitializeTransaction(), this.renderToStaticMarkup = e, this.useCreateElement = !1, this.updateQueue = new a(this)
     }
     var r = e(162),
      i = e(25),
      o = e(106),
      a = (e(66), e(85)),
      s = [],
      u = {
       enqueue: function() {}
      },
      l = {
       getTransactionWrappers: function() {
        return s
       },
       getReactMountReady: function() {
        return u
       },
       getUpdateQueue: function() {
        return this.updateQueue
       },
       destructor: function() {},
       checkpoint: function() {},
       rollback: function() {}
      };
     r(n.prototype, o.Mixin, l), i.addPoolingTo(n), t.exports = n
    }, {
     106: 106,
     162: 162,
     25: 25,
     66: 66,
     85: 85
    }],
    85: [function(e, t) {
     function n(e, t) {
      if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
     }

     function r() {}
     var i = e(87),
      o = (e(106), e(161), function() {
       function e(t) {
        n(this, e), this.transaction = t
       }
       return e.prototype.isMounted = function() {
        return !1
       }, e.prototype.enqueueCallback = function(e, t, n) {
        this.transaction.isInTransaction() && i.enqueueCallback(e, t, n)
       }, e.prototype.enqueueForceUpdate = function(e) {
        this.transaction.isInTransaction() ? i.enqueueForceUpdate(e) : r(e, "forceUpdate")
       }, e.prototype.enqueueReplaceState = function(e, t) {
        this.transaction.isInTransaction() ? i.enqueueReplaceState(e, t) : r(e, "replaceState")
       }, e.prototype.enqueueSetState = function(e, t) {
        this.transaction.isInTransaction() ? i.enqueueSetState(e, t) : r(e, "setState")
       }, e
      }());
     t.exports = o
    }, {
     106: 106,
     161: 161,
     87: 87
    }],
    86: [function(e, t) {
     var n = e(162),
      r = e(36),
      i = e(50),
      o = e(26),
      a = n({
       __SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: r,
       __SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: i
      }, o);
     t.exports = a
    }, {
     162: 162,
     26: 26,
     36: 36,
     50: 50
    }],
    87: [function(e, t) {
     function n(e) {
      s.enqueueUpdate(e)
     }

     function r(e) {
      var t = typeof e;
      if ("object" !== t) return t;
      var n = e.constructor && e.constructor.name || t,
       r = Object.keys(e);
      return r.length > 0 && r.length < 20 ? n + " (keys: " + r.join(", ") + ")" : n
     }

     function i(e) {
      var t = a.get(e);
      return t ? t : null
     }
     var o = e(132),
      a = (e(35), e(65)),
      s = (e(66), e(88)),
      u = (e(154), e(161), {
       isMounted: function(e) {
        var t = a.get(e);
        return !!t && !!t._renderedComponent
       },
       enqueueCallback: function(e, t, r) {
        u.validateCallback(t, r);
        var o = i(e);
        return o ? (o._pendingCallbacks ? o._pendingCallbacks.push(t) : o._pendingCallbacks = [t], void n(o)) : null
       },
       enqueueCallbackInternal: function(e, t) {
        e._pendingCallbacks ? e._pendingCallbacks.push(t) : e._pendingCallbacks = [t], n(e)
       },
       enqueueForceUpdate: function(e) {
        var t = i(e, "forceUpdate");
        t && (t._pendingForceUpdate = !0, n(t))
       },
       enqueueReplaceState: function(e, t) {
        var r = i(e, "replaceState");
        r && (r._pendingStateQueue = [t], r._pendingReplaceState = !0, n(r))
       },
       enqueueSetState: function(e, t) {
        var r = i(e, "setState");
        if (r) {
         var o = r._pendingStateQueue || (r._pendingStateQueue = []);
         o.push(t), n(r)
        }
       },
       enqueueElementInternal: function(e, t, r) {
        e._pendingElement = t, e._context = r, n(e)
       },
       validateCallback: function(e, t) {
        e && "function" != typeof e ? o("122", t, r(e)) : void 0
       }
      });
     t.exports = u
    }, {
     132: 132,
     154: 154,
     161: 161,
     35: 35,
     65: 65,
     66: 66,
     88: 88
    }],
    88: [function(e, t) {
     function n() {
      T.ReactReconcileTransaction && w ? void 0 : l("123")
     }

     function r() {
      this.reinitializeTransaction(), this.dirtyComponentsLength = null, this.callbackQueue = h.getPooled(), this.reconcileTransaction = T.ReactReconcileTransaction.getPooled(!0)
     }

     function i(e, t, r, i, o, a) {
      n(), w.batchedUpdates(e, t, r, i, o, a)
     }

     function o(e, t) {
      return e._mountOrder - t._mountOrder
     }

     function a(e) {
      var t = e.dirtyComponentsLength;
      t !== g.length ? l("124", t, g.length) : void 0, g.sort(o), v++;
      for (var n = 0; t > n; n++) {
       var r = g[n],
        i = r._pendingCallbacks;
       r._pendingCallbacks = null;
       var a;
       if (d.logTopLevelRenders) {
        var s = r;
        r._currentElement.props === r._renderedComponent._currentElement && (s = r._renderedComponent), a = "React update: " + s.getName(), console.time(a)
       }
       if (f.performUpdateIfNecessary(r, e.reconcileTransaction, v), a && console.timeEnd(a), i)
        for (var u = 0; u < i.length; u++) e.callbackQueue.enqueue(i[u], r.getPublicInstance())
      }
     }

     function s(e) {
      return n(), w.isBatchingUpdates ? (g.push(e), void(null == e._updateBatchNumber && (e._updateBatchNumber = v + 1))) : void w.batchedUpdates(s, e)
     }

     function u(e, t) {
      w.isBatchingUpdates ? void 0 : l("125"), y.enqueue(e, t), b = !0
     }
     var l = e(132),
      c = e(162),
      h = e(5),
      p = e(25),
      d = e(61),
      f = e(80),
      m = e(106),
      g = (e(154), []),
      v = 0,
      y = h.getPooled(),
      b = !1,
      w = null,
      x = {
       initialize: function() {
        this.dirtyComponentsLength = g.length
       },
       close: function() {
        this.dirtyComponentsLength !== g.length ? (g.splice(0, this.dirtyComponentsLength), C()) : g.length = 0
       }
      },
      _ = {
       initialize: function() {
        this.callbackQueue.reset()
       },
       close: function() {
        this.callbackQueue.notifyAll()
       }
      },
      S = [x, _];
     c(r.prototype, m.Mixin, {
      getTransactionWrappers: function() {
       return S
      },
      destructor: function() {
       this.dirtyComponentsLength = null, h.release(this.callbackQueue), this.callbackQueue = null, T.ReactReconcileTransaction.release(this.reconcileTransaction), this.reconcileTransaction = null
      },
      perform: function(e, t, n) {
       return m.Mixin.perform.call(this, this.reconcileTransaction.perform, this.reconcileTransaction, e, t, n)
      }
     }), p.addPoolingTo(r);
     var C = function() {
       for (; g.length || b;) {
        if (g.length) {
         var e = r.getPooled();
         e.perform(a, null, e), r.release(e)
        }
        if (b) {
         b = !1;
         var t = y;
         y = h.getPooled(), t.notifyAll(), h.release(t)
        }
       }
      },
      E = {
       injectReconcileTransaction: function(e) {
        e ? void 0 : l("126"), T.ReactReconcileTransaction = e
       },
       injectBatchingStrategy: function(e) {
        e ? void 0 : l("127"), "function" != typeof e.batchedUpdates ? l("128") : void 0, "boolean" != typeof e.isBatchingUpdates ? l("129") : void 0, w = e
       }
      },
      T = {
       ReactReconcileTransaction: null,
       batchedUpdates: i,
       enqueueUpdate: s,
       flushBatchedUpdates: C,
       injection: E,
       asap: u
      };
     t.exports = T
    }, {
     106: 106,
     132: 132,
     154: 154,
     162: 162,
     25: 25,
     5: 5,
     61: 61,
     80: 80
    }],
    89: [function(e, t) {
     t.exports = "15.3.1"
    }, {}],
    90: [function(e, t) {
     var n = {
       xlink: "http://www.w3.org/1999/xlink",
       xml: "http://www.w3.org/XML/1998/namespace"
      },
      r = {
       accentHeight: "accent-height",
       accumulate: 0,
       additive: 0,
       alignmentBaseline: "alignment-baseline",
       allowReorder: "allowReorder",
       alphabetic: 0,
       amplitude: 0,
       arabicForm: "arabic-form",
       ascent: 0,
       attributeName: "attributeName",
       attributeType: "attributeType",
       autoReverse: "autoReverse",
       azimuth: 0,
       baseFrequency: "baseFrequency",
       baseProfile: "baseProfile",
       baselineShift: "baseline-shift",
       bbox: 0,
       begin: 0,
       bias: 0,
       by: 0,
       calcMode: "calcMode",
       capHeight: "cap-height",
       clip: 0,
       clipPath: "clip-path",
       clipRule: "clip-rule",
       clipPathUnits: "clipPathUnits",
       colorInterpolation: "color-interpolation",
       colorInterpolationFilters: "color-interpolation-filters",
       colorProfile: "color-profile",
       colorRendering: "color-rendering",
       contentScriptType: "contentScriptType",
       contentStyleType: "contentStyleType",
       cursor: 0,
       cx: 0,
       cy: 0,
       d: 0,
       decelerate: 0,
       descent: 0,
       diffuseConstant: "diffuseConstant",
       direction: 0,
       display: 0,
       divisor: 0,
       dominantBaseline: "dominant-baseline",
       dur: 0,
       dx: 0,
       dy: 0,
       edgeMode: "edgeMode",
       elevation: 0,
       enableBackground: "enable-background",
       end: 0,
       exponent: 0,
       externalResourcesRequired: "externalResourcesRequired",
       fill: 0,
       fillOpacity: "fill-opacity",
       fillRule: "fill-rule",
       filter: 0,
       filterRes: "filterRes",
       filterUnits: "filterUnits",
       floodColor: "flood-color",
       floodOpacity: "flood-opacity",
       focusable: 0,
       fontFamily: "font-family",
       fontSize: "font-size",
       fontSizeAdjust: "font-size-adjust",
       fontStretch: "font-stretch",
       fontStyle: "font-style",
       fontVariant: "font-variant",
       fontWeight: "font-weight",
       format: 0,
       from: 0,
       fx: 0,
       fy: 0,
       g1: 0,
       g2: 0,
       glyphName: "glyph-name",
       glyphOrientationHorizontal: "glyph-orientation-horizontal",
       glyphOrientationVertical: "glyph-orientation-vertical",
       glyphRef: "glyphRef",
       gradientTransform: "gradientTransform",
       gradientUnits: "gradientUnits",
       hanging: 0,
       horizAdvX: "horiz-adv-x",
       horizOriginX: "horiz-origin-x",
       ideographic: 0,
       imageRendering: "image-rendering",
       "in": 0,
       in2: 0,
       intercept: 0,
       k: 0,
       k1: 0,
       k2: 0,
       k3: 0,
       k4: 0,
       kernelMatrix: "kernelMatrix",
       kernelUnitLength: "kernelUnitLength",
       kerning: 0,
       keyPoints: "keyPoints",
       keySplines: "keySplines",
       keyTimes: "keyTimes",
       lengthAdjust: "lengthAdjust",
       letterSpacing: "letter-spacing",
       lightingColor: "lighting-color",
       limitingConeAngle: "limitingConeAngle",
       local: 0,
       markerEnd: "marker-end",
       markerMid: "marker-mid",
       markerStart: "marker-start",
       markerHeight: "markerHeight",
       markerUnits: "markerUnits",
       markerWidth: "markerWidth",
       mask: 0,
       maskContentUnits: "maskContentUnits",
       maskUnits: "maskUnits",
       mathematical: 0,
       mode: 0,
       numOctaves: "numOctaves",
       offset: 0,
       opacity: 0,
       operator: 0,
       order: 0,
       orient: 0,
       orientation: 0,
       origin: 0,
       overflow: 0,
       overlinePosition: "overline-position",
       overlineThickness: "overline-thickness",
       paintOrder: "paint-order",
       panose1: "panose-1",
       pathLength: "pathLength",
       patternContentUnits: "patternContentUnits",
       patternTransform: "patternTransform",
       patternUnits: "patternUnits",
       pointerEvents: "pointer-events",
       points: 0,
       pointsAtX: "pointsAtX",
       pointsAtY: "pointsAtY",
       pointsAtZ: "pointsAtZ",
       preserveAlpha: "preserveAlpha",
       preserveAspectRatio: "preserveAspectRatio",
       primitiveUnits: "primitiveUnits",
       r: 0,
       radius: 0,
       refX: "refX",
       refY: "refY",
       renderingIntent: "rendering-intent",
       repeatCount: "repeatCount",
       repeatDur: "repeatDur",
       requiredExtensions: "requiredExtensions",
       requiredFeatures: "requiredFeatures",
       restart: 0,
       result: 0,
       rotate: 0,
       rx: 0,
       ry: 0,
       scale: 0,
       seed: 0,
       shapeRendering: "shape-rendering",
       slope: 0,
       spacing: 0,
       specularConstant: "specularConstant",
       specularExponent: "specularExponent",
       speed: 0,
       spreadMethod: "spreadMethod",
       startOffset: "startOffset",
       stdDeviation: "stdDeviation",
       stemh: 0,
       stemv: 0,
       stitchTiles: "stitchTiles",
       stopColor: "stop-color",
       stopOpacity: "stop-opacity",
       strikethroughPosition: "strikethrough-position",
       strikethroughThickness: "strikethrough-thickness",
       string: 0,
       stroke: 0,
       strokeDasharray: "stroke-dasharray",
       strokeDashoffset: "stroke-dashoffset",
       strokeLinecap: "stroke-linecap",
       strokeLinejoin: "stroke-linejoin",
       strokeMiterlimit: "stroke-miterlimit",
       strokeOpacity: "stroke-opacity",
       strokeWidth: "stroke-width",
       surfaceScale: "surfaceScale",
       systemLanguage: "systemLanguage",
       tableValues: "tableValues",
       targetX: "targetX",
       targetY: "targetY",
       textAnchor: "text-anchor",
       textDecoration: "text-decoration",
       textRendering: "text-rendering",
       textLength: "textLength",
       to: 0,
       transform: 0,
       u1: 0,
       u2: 0,
       underlinePosition: "underline-position",
       underlineThickness: "underline-thickness",
       unicode: 0,
       unicodeBidi: "unicode-bidi",
       unicodeRange: "unicode-range",
       unitsPerEm: "units-per-em",
       vAlphabetic: "v-alphabetic",
       vHanging: "v-hanging",
       vIdeographic: "v-ideographic",
       vMathematical: "v-mathematical",
       values: 0,
       vectorEffect: "vector-effect",
       version: 0,
       vertAdvY: "vert-adv-y",
       vertOriginX: "vert-origin-x",
       vertOriginY: "vert-origin-y",
       viewBox: "viewBox",
       viewTarget: "viewTarget",
       visibility: 0,
       widths: 0,
       wordSpacing: "word-spacing",
       writingMode: "writing-mode",
       x: 0,
       xHeight: "x-height",
       x1: 0,
       x2: 0,
       xChannelSelector: "xChannelSelector",
       xlinkActuate: "xlink:actuate",
       xlinkArcrole: "xlink:arcrole",
       xlinkHref: "xlink:href",
       xlinkRole: "xlink:role",
       xlinkShow: "xlink:show",
       xlinkTitle: "xlink:title",
       xlinkType: "xlink:type",
       xmlBase: "xml:base",
       xmlns: 0,
       xmlnsXlink: "xmlns:xlink",
       xmlLang: "xml:lang",
       xmlSpace: "xml:space",
       y: 0,
       y1: 0,
       y2: 0,
       yChannelSelector: "yChannelSelector",
       z: 0,
       zoomAndPan: "zoomAndPan"
      },
      i = {
       Properties: {},
       DOMAttributeNamespaces: {
        xlinkActuate: n.xlink,
        xlinkArcrole: n.xlink,
        xlinkHref: n.xlink,
        xlinkRole: n.xlink,
        xlinkShow: n.xlink,
        xlinkTitle: n.xlink,
        xlinkType: n.xlink,
        xmlBase: n.xml,
        xmlLang: n.xml,
        xmlSpace: n.xml
       },
       DOMAttributeNames: {}
      };
     Object.keys(r).forEach(function(e) {
      i.Properties[e] = 0, r[e] && (i.DOMAttributeNames[e] = r[e])
     }), t.exports = i
    }, {}],
    91: [function(e, t) {
     function n(e) {
      if ("selectionStart" in e && u.hasSelectionCapabilities(e)) return {
       start: e.selectionStart,
       end: e.selectionEnd
      };
      if (window.getSelection) {
       var t = window.getSelection();
       return {
        anchorNode: t.anchorNode,
        anchorOffset: t.anchorOffset,
        focusNode: t.focusNode,
        focusOffset: t.focusOffset
       }
      }
      if (document.selection) {
       var n = document.selection.createRange();
       return {
        parentElement: n.parentElement(),
        text: n.text,
        top: n.boundingTop,
        left: n.boundingLeft
       }
      }
     }

     function r(e, t) {
      if (w || null == v || v !== c()) return null;
      var r = n(v);
      if (!b || !d(b, r)) {
       b = r;
       var i = l.getPooled(g.select, y, e, t);
       return i.type = "select", i.target = v, o.accumulateTwoPhaseDispatches(i), i
      }
      return null
     }
     var i = e(16),
      o = e(20),
      a = e(140),
      s = e(40),
      u = e(64),
      l = e(97),
      c = e(149),
      h = e(129),
      p = e(158),
      d = e(160),
      f = i.topLevelTypes,
      m = a.canUseDOM && "documentMode" in document && document.documentMode <= 11,
      g = {
       select: {
        phasedRegistrationNames: {
         bubbled: p({
          onSelect: null
         }),
         captured: p({
          onSelectCapture: null
         })
        },
        dependencies: [f.topBlur, f.topContextMenu, f.topFocus, f.topKeyDown, f.topMouseDown, f.topMouseUp, f.topSelectionChange]
       }
      },
      v = null,
      y = null,
      b = null,
      w = !1,
      x = !1,
      _ = p({
       onSelect: null
      }),
      S = {
       eventTypes: g,
       extractEvents: function(e, t, n, i) {
        if (!x) return null;
        var o = t ? s.getNodeFromInstance(t) : window;
        switch (e) {
         case f.topFocus:
          (h(o) || "true" === o.contentEditable) && (v = o, y = t, b = null);
          break;
         case f.topBlur:
          v = null, y = null, b = null;
          break;
         case f.topMouseDown:
          w = !0;
          break;
         case f.topContextMenu:
         case f.topMouseUp:
          return w = !1, r(n, i);
         case f.topSelectionChange:
          if (m) break;
         case f.topKeyDown:
         case f.topKeyUp:
          return r(n, i)
        }
        return null
       },
       didPutListener: function(e, t) {
        t === _ && (x = !0)
       }
      };
     t.exports = S
    }, {
     129: 129,
     140: 140,
     149: 149,
     158: 158,
     16: 16,
     160: 160,
     20: 20,
     40: 40,
     64: 64,
     97: 97
    }],
    92: [function(e, t) {
     function n(e) {
      return "." + e._rootNodeID
     }
     var r = e(132),
      i = e(16),
      o = e(139),
      a = e(20),
      s = e(40),
      u = e(93),
      l = e(94),
      c = e(97),
      h = e(98),
      p = e(100),
      d = e(101),
      f = e(96),
      m = e(102),
      g = e(103),
      v = e(104),
      y = e(105),
      b = e(146),
      w = e(118),
      x = (e(154), e(158)),
      _ = i.topLevelTypes,
      S = {
       abort: {
        phasedRegistrationNames: {
         bubbled: x({
          onAbort: !0
         }),
         captured: x({
          onAbortCapture: !0
         })
        }
       },
       animationEnd: {
        phasedRegistrationNames: {
         bubbled: x({
          onAnimationEnd: !0
         }),
         captured: x({
          onAnimationEndCapture: !0
         })
        }
       },
       animationIteration: {
        phasedRegistrationNames: {
         bubbled: x({
          onAnimationIteration: !0
         }),
         captured: x({
          onAnimationIterationCapture: !0
         })
        }
       },
       animationStart: {
        phasedRegistrationNames: {
         bubbled: x({
          onAnimationStart: !0
         }),
         captured: x({
          onAnimationStartCapture: !0
         })
        }
       },
       blur: {
        phasedRegistrationNames: {
         bubbled: x({
          onBlur: !0
         }),
         captured: x({
          onBlurCapture: !0
         })
        }
       },
       canPlay: {
        phasedRegistrationNames: {
         bubbled: x({
          onCanPlay: !0
         }),
         captured: x({
          onCanPlayCapture: !0
         })
        }
       },
       canPlayThrough: {
        phasedRegistrationNames: {
         bubbled: x({
          onCanPlayThrough: !0
         }),
         captured: x({
          onCanPlayThroughCapture: !0
         })
        }
       },
       click: {
        phasedRegistrationNames: {
         bubbled: x({
          onClick: !0
         }),
         captured: x({
          onClickCapture: !0
         })
        }
       },
       contextMenu: {
        phasedRegistrationNames: {
         bubbled: x({
          onContextMenu: !0
         }),
         captured: x({
          onContextMenuCapture: !0
         })
        }
       },
       copy: {
        phasedRegistrationNames: {
         bubbled: x({
          onCopy: !0
         }),
         captured: x({
          onCopyCapture: !0
         })
        }
       },
       cut: {
        phasedRegistrationNames: {
         bubbled: x({
          onCut: !0
         }),
         captured: x({
          onCutCapture: !0
         })
        }
       },
       doubleClick: {
        phasedRegistrationNames: {
         bubbled: x({
          onDoubleClick: !0
         }),
         captured: x({
          onDoubleClickCapture: !0
         })
        }
       },
       drag: {
        phasedRegistrationNames: {
         bubbled: x({
          onDrag: !0
         }),
         captured: x({
          onDragCapture: !0
         })
        }
       },
       dragEnd: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragEnd: !0
         }),
         captured: x({
          onDragEndCapture: !0
         })
        }
       },
       dragEnter: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragEnter: !0
         }),
         captured: x({
          onDragEnterCapture: !0
         })
        }
       },
       dragExit: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragExit: !0
         }),
         captured: x({
          onDragExitCapture: !0
         })
        }
       },
       dragLeave: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragLeave: !0
         }),
         captured: x({
          onDragLeaveCapture: !0
         })
        }
       },
       dragOver: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragOver: !0
         }),
         captured: x({
          onDragOverCapture: !0
         })
        }
       },
       dragStart: {
        phasedRegistrationNames: {
         bubbled: x({
          onDragStart: !0
         }),
         captured: x({
          onDragStartCapture: !0
         })
        }
       },
       drop: {
        phasedRegistrationNames: {
         bubbled: x({
          onDrop: !0
         }),
         captured: x({
          onDropCapture: !0
         })
        }
       },
       durationChange: {
        phasedRegistrationNames: {
         bubbled: x({
          onDurationChange: !0
         }),
         captured: x({
          onDurationChangeCapture: !0
         })
        }
       },
       emptied: {
        phasedRegistrationNames: {
         bubbled: x({
          onEmptied: !0
         }),
         captured: x({
          onEmptiedCapture: !0
         })
        }
       },
       encrypted: {
        phasedRegistrationNames: {
         bubbled: x({
          onEncrypted: !0
         }),
         captured: x({
          onEncryptedCapture: !0
         })
        }
       },
       ended: {
        phasedRegistrationNames: {
         bubbled: x({
          onEnded: !0
         }),
         captured: x({
          onEndedCapture: !0
         })
        }
       },
       error: {
        phasedRegistrationNames: {
         bubbled: x({
          onError: !0
         }),
         captured: x({
          onErrorCapture: !0
         })
        }
       },
       focus: {
        phasedRegistrationNames: {
         bubbled: x({
          onFocus: !0
         }),
         captured: x({
          onFocusCapture: !0
         })
        }
       },
       input: {
        phasedRegistrationNames: {
         bubbled: x({
          onInput: !0
         }),
         captured: x({
          onInputCapture: !0
         })
        }
       },
       invalid: {
        phasedRegistrationNames: {
         bubbled: x({
          onInvalid: !0
         }),
         captured: x({
          onInvalidCapture: !0
         })
        }
       },
       keyDown: {
        phasedRegistrationNames: {
         bubbled: x({
          onKeyDown: !0
         }),
         captured: x({
          onKeyDownCapture: !0
         })
        }
       },
       keyPress: {
        phasedRegistrationNames: {
         bubbled: x({
          onKeyPress: !0
         }),
         captured: x({
          onKeyPressCapture: !0
         })
        }
       },
       keyUp: {
        phasedRegistrationNames: {
         bubbled: x({
          onKeyUp: !0
         }),
         captured: x({
          onKeyUpCapture: !0
         })
        }
       },
       load: {
        phasedRegistrationNames: {
         bubbled: x({
          onLoad: !0
         }),
         captured: x({
          onLoadCapture: !0
         })
        }
       },
       loadedData: {
        phasedRegistrationNames: {
         bubbled: x({
          onLoadedData: !0
         }),
         captured: x({
          onLoadedDataCapture: !0
         })
        }
       },
       loadedMetadata: {
        phasedRegistrationNames: {
         bubbled: x({
          onLoadedMetadata: !0
         }),
         captured: x({
          onLoadedMetadataCapture: !0
         })
        }
       },
       loadStart: {
        phasedRegistrationNames: {
         bubbled: x({
          onLoadStart: !0
         }),
         captured: x({
          onLoadStartCapture: !0
         })
        }
       },
       mouseDown: {
        phasedRegistrationNames: {
         bubbled: x({
          onMouseDown: !0
         }),
         captured: x({
          onMouseDownCapture: !0
         })
        }
       },
       mouseMove: {
        phasedRegistrationNames: {
         bubbled: x({
          onMouseMove: !0
         }),
         captured: x({
          onMouseMoveCapture: !0
         })
        }
       },
       mouseOut: {
        phasedRegistrationNames: {
         bubbled: x({
          onMouseOut: !0
         }),
         captured: x({
          onMouseOutCapture: !0
         })
        }
       },
       mouseOver: {
        phasedRegistrationNames: {
         bubbled: x({
          onMouseOver: !0
         }),
         captured: x({
          onMouseOverCapture: !0
         })
        }
       },
       mouseUp: {
        phasedRegistrationNames: {
         bubbled: x({
          onMouseUp: !0
         }),
         captured: x({
          onMouseUpCapture: !0
         })
        }
       },
       paste: {
        phasedRegistrationNames: {
         bubbled: x({
          onPaste: !0
         }),
         captured: x({
          onPasteCapture: !0
         })
        }
       },
       pause: {
        phasedRegistrationNames: {
         bubbled: x({
          onPause: !0
         }),
         captured: x({
          onPauseCapture: !0
         })
        }
       },
       play: {
        phasedRegistrationNames: {
         bubbled: x({
          onPlay: !0
         }),
         captured: x({
          onPlayCapture: !0
         })
        }
       },
       playing: {
        phasedRegistrationNames: {
         bubbled: x({
          onPlaying: !0
         }),
         captured: x({
          onPlayingCapture: !0
         })
        }
       },
       progress: {
        phasedRegistrationNames: {
         bubbled: x({
          onProgress: !0
         }),
         captured: x({
          onProgressCapture: !0
         })
        }
       },
       rateChange: {
        phasedRegistrationNames: {
         bubbled: x({
          onRateChange: !0
         }),
         captured: x({
          onRateChangeCapture: !0
         })
        }
       },
       reset: {
        phasedRegistrationNames: {
         bubbled: x({
          onReset: !0
         }),
         captured: x({
          onResetCapture: !0
         })
        }
       },
       scroll: {
        phasedRegistrationNames: {
         bubbled: x({
          onScroll: !0
         }),
         captured: x({
          onScrollCapture: !0
         })
        }
       },
       seeked: {
        phasedRegistrationNames: {
         bubbled: x({
          onSeeked: !0
         }),
         captured: x({
          onSeekedCapture: !0
         })
        }
       },
       seeking: {
        phasedRegistrationNames: {
         bubbled: x({
          onSeeking: !0
         }),
         captured: x({
          onSeekingCapture: !0
         })
        }
       },
       stalled: {
        phasedRegistrationNames: {
         bubbled: x({
          onStalled: !0
         }),
         captured: x({
          onStalledCapture: !0
         })
        }
       },
       submit: {
        phasedRegistrationNames: {
         bubbled: x({
          onSubmit: !0
         }),
         captured: x({
          onSubmitCapture: !0
         })
        }
       },
       suspend: {
        phasedRegistrationNames: {
         bubbled: x({
          onSuspend: !0
         }),
         captured: x({
          onSuspendCapture: !0
         })
        }
       },
       timeUpdate: {
        phasedRegistrationNames: {
         bubbled: x({
          onTimeUpdate: !0
         }),
         captured: x({
          onTimeUpdateCapture: !0
         })
        }
       },
       touchCancel: {
        phasedRegistrationNames: {
         bubbled: x({
          onTouchCancel: !0
         }),
         captured: x({
          onTouchCancelCapture: !0
         })
        }
       },
       touchEnd: {
        phasedRegistrationNames: {
         bubbled: x({
          onTouchEnd: !0
         }),
         captured: x({
          onTouchEndCapture: !0
         })
        }
       },
       touchMove: {
        phasedRegistrationNames: {
         bubbled: x({
          onTouchMove: !0
         }),
         captured: x({
          onTouchMoveCapture: !0
         })
        }
       },
       touchStart: {
        phasedRegistrationNames: {
         bubbled: x({
          onTouchStart: !0
         }),
         captured: x({
          onTouchStartCapture: !0
         })
        }
       },
       transitionEnd: {
        phasedRegistrationNames: {
         bubbled: x({
          onTransitionEnd: !0
         }),
         captured: x({
          onTransitionEndCapture: !0
         })
        }
       },
       volumeChange: {
        phasedRegistrationNames: {
         bubbled: x({
          onVolumeChange: !0
         }),
         captured: x({
          onVolumeChangeCapture: !0
         })
        }
       },
       waiting: {
        phasedRegistrationNames: {
         bubbled: x({
          onWaiting: !0
         }),
         captured: x({
          onWaitingCapture: !0
         })
        }
       },
       wheel: {
        phasedRegistrationNames: {
         bubbled: x({
          onWheel: !0
         }),
         captured: x({
          onWheelCapture: !0
         })
        }
       }
      },
      C = {
       topAbort: S.abort,
       topAnimationEnd: S.animationEnd,
       topAnimationIteration: S.animationIteration,
       topAnimationStart: S.animationStart,
       topBlur: S.blur,
       topCanPlay: S.canPlay,
       topCanPlayThrough: S.canPlayThrough,
       topClick: S.click,
       topContextMenu: S.contextMenu,
       topCopy: S.copy,
       topCut: S.cut,
       topDoubleClick: S.doubleClick,
       topDrag: S.drag,
       topDragEnd: S.dragEnd,
       topDragEnter: S.dragEnter,
       topDragExit: S.dragExit,
       topDragLeave: S.dragLeave,
       topDragOver: S.dragOver,
       topDragStart: S.dragStart,
       topDrop: S.drop,
       topDurationChange: S.durationChange,
       topEmptied: S.emptied,
       topEncrypted: S.encrypted,
       topEnded: S.ended,
       topError: S.error,
       topFocus: S.focus,
       topInput: S.input,
       topInvalid: S.invalid,
       topKeyDown: S.keyDown,
       topKeyPress: S.keyPress,
       topKeyUp: S.keyUp,
       topLoad: S.load,
       topLoadedData: S.loadedData,
       topLoadedMetadata: S.loadedMetadata,
       topLoadStart: S.loadStart,
       topMouseDown: S.mouseDown,
       topMouseMove: S.mouseMove,
       topMouseOut: S.mouseOut,
       topMouseOver: S.mouseOver,
       topMouseUp: S.mouseUp,
       topPaste: S.paste,
       topPause: S.pause,
       topPlay: S.play,
       topPlaying: S.playing,
       topProgress: S.progress,
       topRateChange: S.rateChange,
       topReset: S.reset,
       topScroll: S.scroll,
       topSeeked: S.seeked,
       topSeeking: S.seeking,
       topStalled: S.stalled,
       topSubmit: S.submit,
       topSuspend: S.suspend,
       topTimeUpdate: S.timeUpdate,
       topTouchCancel: S.touchCancel,
       topTouchEnd: S.touchEnd,
       topTouchMove: S.touchMove,
       topTouchStart: S.touchStart,
       topTransitionEnd: S.transitionEnd,
       topVolumeChange: S.volumeChange,
       topWaiting: S.waiting,
       topWheel: S.wheel
      };
     for (var E in C) C[E].dependencies = [E];
     var T = x({
       onClick: null
      }),
      M = {},
      A = {
       eventTypes: S,
       extractEvents: function(e, t, n, i) {
        var o = C[e];
        if (!o) return null;
        var s;
        switch (e) {
         case _.topAbort:
         case _.topCanPlay:
         case _.topCanPlayThrough:
         case _.topDurationChange:
         case _.topEmptied:
         case _.topEncrypted:
         case _.topEnded:
         case _.topError:
         case _.topInput:
         case _.topInvalid:
         case _.topLoad:
         case _.topLoadedData:
         case _.topLoadedMetadata:
         case _.topLoadStart:
         case _.topPause:
         case _.topPlay:
         case _.topPlaying:
         case _.topProgress:
         case _.topRateChange:
         case _.topReset:
         case _.topSeeked:
         case _.topSeeking:
         case _.topStalled:
         case _.topSubmit:
         case _.topSuspend:
         case _.topTimeUpdate:
         case _.topVolumeChange:
         case _.topWaiting:
          s = c;
          break;
         case _.topKeyPress:
          if (0 === w(n)) return null;
         case _.topKeyDown:
         case _.topKeyUp:
          s = p;
          break;
         case _.topBlur:
         case _.topFocus:
          s = h;
          break;
         case _.topClick:
          if (2 === n.button) return null;
         case _.topContextMenu:
         case _.topDoubleClick:
         case _.topMouseDown:
         case _.topMouseMove:
         case _.topMouseOut:
         case _.topMouseOver:
         case _.topMouseUp:
          s = d;
          break;
         case _.topDrag:
         case _.topDragEnd:
         case _.topDragEnter:
         case _.topDragExit:
         case _.topDragLeave:
         case _.topDragOver:
         case _.topDragStart:
         case _.topDrop:
          s = f;
          break;
         case _.topTouchCancel:
         case _.topTouchEnd:
         case _.topTouchMove:
         case _.topTouchStart:
          s = m;
          break;
         case _.topAnimationEnd:
         case _.topAnimationIteration:
         case _.topAnimationStart:
          s = u;
          break;
         case _.topTransitionEnd:
          s = g;
          break;
         case _.topScroll:
          s = v;
          break;
         case _.topWheel:
          s = y;
          break;
         case _.topCopy:
         case _.topCut:
         case _.topPaste:
          s = l
        }
        s ? void 0 : r("86", e);
        var b = s.getPooled(o, t, n, i);
        return a.accumulateTwoPhaseDispatches(b), b
       },
       didPutListener: function(e, t) {
        if (t === T) {
         var r = n(e),
          i = s.getNodeFromInstance(e);
         M[r] || (M[r] = o.listen(i, "click", b))
        }
       },
       willDeleteListener: function(e, t) {
        if (t === T) {
         var r = n(e);
         M[r].remove(), delete M[r]
        }
       }
      };
     t.exports = A
    }, {
     100: 100,
     101: 101,
     102: 102,
     103: 103,
     104: 104,
     105: 105,
     118: 118,
     132: 132,
     139: 139,
     146: 146,
     154: 154,
     158: 158,
     16: 16,
     20: 20,
     40: 40,
     93: 93,
     94: 94,
     96: 96,
     97: 97,
     98: 98
    }],
    93: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = {
       animationName: null,
       elapsedTime: null,
       pseudoElement: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     97: 97
    }],
    94: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = {
       clipboardData: function(e) {
        return "clipboardData" in e ? e.clipboardData : window.clipboardData
       }
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     97: 97
    }],
    95: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = {
       data: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     97: 97
    }],
    96: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(101),
      i = {
       dataTransfer: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     101: 101
    }],
    97: [function(e, t) {
     function n(e, t, n, r) {
      this.dispatchConfig = e, this._targetInst = t, this.nativeEvent = n;
      var i = this.constructor.Interface;
      for (var a in i)
       if (i.hasOwnProperty(a)) {
        var s = i[a];
        s ? this[a] = s(n) : "target" === a ? this.target = r : this[a] = n[a]
       } var u = null != n.defaultPrevented ? n.defaultPrevented : n.returnValue === !1;
      return this.isDefaultPrevented = u ? o.thatReturnsTrue : o.thatReturnsFalse, this.isPropagationStopped = o.thatReturnsFalse, this
     }
     var r = e(162),
      i = e(25),
      o = e(146),
      a = (e(161), ["dispatchConfig", "_targetInst", "nativeEvent", "isDefaultPrevented", "isPropagationStopped", "_dispatchListeners", "_dispatchInstances"]),
      s = {
       type: null,
       target: null,
       currentTarget: o.thatReturnsNull,
       eventPhase: null,
       bubbles: null,
       cancelable: null,
       timeStamp: function(e) {
        return e.timeStamp || Date.now()
       },
       defaultPrevented: null,
       isTrusted: null
      };
     r(n.prototype, {
      preventDefault: function() {
       this.defaultPrevented = !0;
       var e = this.nativeEvent;
       e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, this.isDefaultPrevented = o.thatReturnsTrue)
      },
      stopPropagation: function() {
       var e = this.nativeEvent;
       e && (e.stopPropagation ? e.stopPropagation() : "unknown" != typeof e.cancelBubble && (e.cancelBubble = !0), this.isPropagationStopped = o.thatReturnsTrue)
      },
      persist: function() {
       this.isPersistent = o.thatReturnsTrue
      },
      isPersistent: o.thatReturnsFalse,
      destructor: function() {
       var e = this.constructor.Interface;
       for (var t in e) this[t] = null;
       for (var n = 0; n < a.length; n++) this[a[n]] = null
      }
     }), n.Interface = s, n.augmentClass = function(e, t) {
      var n = this,
       o = function() {};
      o.prototype = n.prototype;
      var a = new o;
      r(a, e.prototype), e.prototype = a, e.prototype.constructor = e, e.Interface = r({}, n.Interface, t), e.augmentClass = n.augmentClass, i.addPoolingTo(e, i.fourArgumentPooler)
     }, i.addPoolingTo(n, i.fourArgumentPooler), t.exports = n
    }, {
     146: 146,
     161: 161,
     162: 162,
     25: 25
    }],
    98: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(104),
      i = {
       relatedTarget: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     104: 104
    }],
    99: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = {
       data: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     97: 97
    }],
    100: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(104),
      i = e(118),
      o = e(119),
      a = e(120),
      s = {
       key: o,
       location: null,
       ctrlKey: null,
       shiftKey: null,
       altKey: null,
       metaKey: null,
       repeat: null,
       locale: null,
       getModifierState: a,
       charCode: function(e) {
        return "keypress" === e.type ? i(e) : 0
       },
       keyCode: function(e) {
        return "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
       },
       which: function(e) {
        return "keypress" === e.type ? i(e) : "keydown" === e.type || "keyup" === e.type ? e.keyCode : 0
       }
      };
     r.augmentClass(n, s), t.exports = n
    }, {
     104: 104,
     118: 118,
     119: 119,
     120: 120
    }],
    101: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(104),
      i = e(107),
      o = e(120),
      a = {
       screenX: null,
       screenY: null,
       clientX: null,
       clientY: null,
       ctrlKey: null,
       shiftKey: null,
       altKey: null,
       metaKey: null,
       getModifierState: o,
       button: function(e) {
        var t = e.button;
        return "which" in e ? t : 2 === t ? 2 : 4 === t ? 1 : 0
       },
       buttons: null,
       relatedTarget: function(e) {
        return e.relatedTarget || (e.fromElement === e.srcElement ? e.toElement : e.fromElement)
       },
       pageX: function(e) {
        return "pageX" in e ? e.pageX : e.clientX + i.currentScrollLeft
       },
       pageY: function(e) {
        return "pageY" in e ? e.pageY : e.clientY + i.currentScrollTop
       }
      };
     r.augmentClass(n, a), t.exports = n
    }, {
     104: 104,
     107: 107,
     120: 120
    }],
    102: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(104),
      i = e(120),
      o = {
       touches: null,
       targetTouches: null,
       changedTouches: null,
       altKey: null,
       metaKey: null,
       ctrlKey: null,
       shiftKey: null,
       getModifierState: i
      };
     r.augmentClass(n, o), t.exports = n
    }, {
     104: 104,
     120: 120
    }],
    103: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = {
       propertyName: null,
       elapsedTime: null,
       pseudoElement: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     97: 97
    }],
    104: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(97),
      i = e(121),
      o = {
       view: function(e) {
        if (e.view) return e.view;
        var t = i(e);
        if (t.window === t) return t;
        var n = t.ownerDocument;
        return n ? n.defaultView || n.parentWindow : window
       },
       detail: function(e) {
        return e.detail || 0
       }
      };
     r.augmentClass(n, o), t.exports = n
    }, {
     121: 121,
     97: 97
    }],
    105: [function(e, t) {
     function n(e, t, n, i) {
      return r.call(this, e, t, n, i)
     }
     var r = e(101),
      i = {
       deltaX: function(e) {
        return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0
       },
       deltaY: function(e) {
        return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0
       },
       deltaZ: null,
       deltaMode: null
      };
     r.augmentClass(n, i), t.exports = n
    }, {
     101: 101
    }],
    106: [function(e, t) {
     var n = e(132),
      r = (e(154), {
       reinitializeTransaction: function() {
        this.transactionWrappers = this.getTransactionWrappers(), this.wrapperInitData ? this.wrapperInitData.length = 0 : this.wrapperInitData = [], this._isInTransaction = !1
       },
       _isInTransaction: !1,
       getTransactionWrappers: null,
       isInTransaction: function() {
        return !!this._isInTransaction
       },
       perform: function(e, t, r, i, o, a, s, u) {
        this.isInTransaction() ? n("27") : void 0;
        var l, c;
        try {
         this._isInTransaction = !0, l = !0, this.initializeAll(0), c = e.call(t, r, i, o, a, s, u), l = !1
        } finally {
         try {
          if (l) try {
           this.closeAll(0)
          } catch (e) {} else this.closeAll(0)
         } finally {
          this._isInTransaction = !1
         }
        }
        return c
       },
       initializeAll: function(e) {
        for (var t = this.transactionWrappers, n = e; n < t.length; n++) {
         var r = t[n];
         try {
          this.wrapperInitData[n] = i.OBSERVED_ERROR, this.wrapperInitData[n] = r.initialize ? r.initialize.call(this) : null
         } finally {
          if (this.wrapperInitData[n] === i.OBSERVED_ERROR) try {
           this.initializeAll(n + 1)
          } catch (e) {}
         }
        }
       },
       closeAll: function(e) {
        this.isInTransaction() ? void 0 : n("28");
        for (var t = this.transactionWrappers, r = e; r < t.length; r++) {
         var o, a = t[r],
          s = this.wrapperInitData[r];
         try {
          o = !0, s !== i.OBSERVED_ERROR && a.close && a.close.call(this, s), o = !1
         } finally {
          if (o) try {
           this.closeAll(r + 1)
          } catch (e) {}
         }
        }
        this.wrapperInitData.length = 0
       }
      }),
      i = {
       Mixin: r,
       OBSERVED_ERROR: {}
      };
     t.exports = i
    }, {
     132: 132,
     154: 154
    }],
    107: [function(e, t) {
     var n = {
      currentScrollLeft: 0,
      currentScrollTop: 0,
      refreshScrollValues: function(e) {
       n.currentScrollLeft = e.x, n.currentScrollTop = e.y
      }
     };
     t.exports = n
    }, {}],
    108: [function(e, t) {
     function n(e, t) {
      return null == t ? r("30") : void 0, null == e ? t : Array.isArray(e) ? Array.isArray(t) ? (e.push.apply(e, t), e) : (e.push(t), e) : Array.isArray(t) ? [e].concat(t) : [e, t]
     }
     var r = e(132);
     e(154), t.exports = n
    }, {
     132: 132,
     154: 154
    }],
    109: [function(e, t) {
     function n(e) {
      for (var t = 1, n = 0, i = 0, o = e.length, a = -4 & o; a > i;) {
       for (var s = Math.min(i + 4096, a); s > i; i += 4) n += (t += e.charCodeAt(i)) + (t += e.charCodeAt(i + 1)) + (t += e.charCodeAt(i + 2)) + (t += e.charCodeAt(i + 3));
       t %= r, n %= r
      }
      for (; o > i; i++) n += t += e.charCodeAt(i);
      return t %= r, n %= r, t | n << 16
     }
     var r = 65521;
     t.exports = n
    }, {}],
    110: [function(e, t) {
     var n = !1;
     t.exports = n
    }, {}],
    111: [function(e, t) {
     (function(n) {
      function r(e, t, n, r) {
       for (var u in e)
        if (e.hasOwnProperty(u)) {
         var l;
         try {
          "function" != typeof e[u] ? i("84", r || "React class", o[n], u) : void 0, l = e[u](t, u, r, n, null, a)
         } catch (e) {
          l = e
         }
         l instanceof Error && !(l.message in s) && (s[l.message] = !0)
        }
      }
      var i = e(132),
       o = e(74),
       a = e(77);
      e(154), e(161), "undefined" != typeof n && n.env, 1;
      var s = {};
      t.exports = r
     }).call(this, void 0)
    }, {
     132: 132,
     154: 154,
     161: 161,
     74: 74,
     77: 77
    }],
    112: [function(e, t) {
     var n = function(e) {
      return "undefined" != typeof MSApp && MSApp.execUnsafeLocalFunction ? function(t, n, r, i) {
       MSApp.execUnsafeLocalFunction(function() {
        return e(t, n, r, i)
       })
      } : e
     };
     t.exports = n
    }, {}],
    113: [function(e, t) {
     function n(e, t) {
      var n = null == t || "boolean" == typeof t || "" === t;
      if (n) return "";
      var r = isNaN(t);
      return r || 0 === t || i.hasOwnProperty(e) && i[e] ? "" + t : ("string" == typeof t && (t = t.trim()), t + "px")
     }
     var r = e(3),
      i = (e(161), r.isUnitlessNumber);
     t.exports = n
    }, {
     161: 161,
     3: 3
    }],
    114: [function(e, t) {
     function n(e) {
      var t = "" + e,
       n = i.exec(t);
      if (!n) return t;
      var r, o = "",
       a = 0,
       s = 0;
      for (a = n.index; a < t.length; a++) {
       switch (t.charCodeAt(a)) {
        case 34:
         r = "&quot;";
         break;
        case 38:
         r = "&amp;";
         break;
        case 39:
         r = "&#x27;";
         break;
        case 60:
         r = "&lt;";
         break;
        case 62:
         r = "&gt;";
         break;
        default:
         continue
       }
       s !== a && (o += t.substring(s, a)), s = a + 1, o += r
      }
      return s !== a ? o + t.substring(s, a) : o
     }

     function r(e) {
      return "boolean" == typeof e || "number" == typeof e ? "" + e : n(e)
     }
     var i = /["'&<>]/;
     t.exports = r
    }, {}],
    115: [function(e, t) {
     function n(e) {
      if (null == e) return null;
      if (1 === e.nodeType) return e;
      var t = o.get(e);
      return t ? (t = a(t), t ? i.getNodeFromInstance(t) : null) : void("function" == typeof e.render ? r("44") : r("45", Object.keys(e)))
     }
     var r = e(132),
      i = (e(35), e(40)),
      o = e(65),
      a = e(122);
     e(154), e(161), t.exports = n
    }, {
     122: 122,
     132: 132,
     154: 154,
     161: 161,
     35: 35,
     40: 40,
     65: 65
    }],
    116: [function(e, t) {
     (function(n) {
      function r(e, t, n) {
       if (e && "object" == typeof e) {
        var r = e,
         i = void 0 === r[n];
        i && null != t && (r[n] = t)
       }
      }

      function i(e) {
       if (null == e) return e;
       var t = {};
       return o(e, r, t), t
      }
      var o = (e(23), e(137));
      e(161), "undefined" != typeof n && n.env, t.exports = i
     }).call(this, void 0)
    }, {
     137: 137,
     161: 161,
     23: 23
    }],
    117: [function(e, t) {
     function n(e, t, n) {
      Array.isArray(e) ? e.forEach(t, n) : e && t.call(n, e)
     }
     t.exports = n
    }, {}],
    118: [function(e, t) {
     function n(e) {
      var t, n = e.keyCode;
      return "charCode" in e ? (t = e.charCode, 0 === t && 13 === n && (t = 13)) : t = n, t >= 32 || 13 === t ? t : 0
     }
     t.exports = n
    }, {}],
    119: [function(e, t) {
     function n(e) {
      if (e.key) {
       var t = i[e.key] || e.key;
       if ("Unidentified" !== t) return t
      }
      if ("keypress" === e.type) {
       var n = r(e);
       return 13 === n ? "Enter" : String.fromCharCode(n)
      }
      return "keydown" === e.type || "keyup" === e.type ? o[e.keyCode] || "Unidentified" : ""
     }
     var r = e(118),
      i = {
       Esc: "Escape",
       Spacebar: " ",
       Left: "ArrowLeft",
       Up: "ArrowUp",
       Right: "ArrowRight",
       Down: "ArrowDown",
       Del: "Delete",
       Win: "OS",
       Menu: "ContextMenu",
       Apps: "ContextMenu",
       Scroll: "ScrollLock",
       MozPrintableKey: "Unidentified"
      },
      o = {
       8: "Backspace",
       9: "Tab",
       12: "Clear",
       13: "Enter",
       16: "Shift",
       17: "Control",
       18: "Alt",
       19: "Pause",
       20: "CapsLock",
       27: "Escape",
       32: " ",
       33: "PageUp",
       34: "PageDown",
       35: "End",
       36: "Home",
       37: "ArrowLeft",
       38: "ArrowUp",
       39: "ArrowRight",
       40: "ArrowDown",
       45: "Insert",
       46: "Delete",
       112: "F1",
       113: "F2",
       114: "F3",
       115: "F4",
       116: "F5",
       117: "F6",
       118: "F7",
       119: "F8",
       120: "F9",
       121: "F10",
       122: "F11",
       123: "F12",
       144: "NumLock",
       145: "ScrollLock",
       224: "Meta"
      };
     t.exports = n
    }, {
     118: 118
    }],
    120: [function(e, t) {
     function n(e) {
      var t = this,
       n = t.nativeEvent;
      if (n.getModifierState) return n.getModifierState(e);
      var r = i[e];
      return !!r && !!n[r]
     }

     function r() {
      return n
     }
     var i = {
      Alt: "altKey",
      Control: "ctrlKey",
      Meta: "metaKey",
      Shift: "shiftKey"
     };
     t.exports = r
    }, {}],
    121: [function(e, t) {
     function n(e) {
      var t = e.target || e.srcElement || window;
      return t.correspondingUseElement && (t = t.correspondingUseElement), 3 === t.nodeType ? t.parentNode : t
     }
     t.exports = n
    }, {}],
    122: [function(e, t) {
     function n(e) {
      for (var t;
       (t = e._renderedNodeType) === r.COMPOSITE;) e = e._renderedComponent;
      return t === r.HOST ? e._renderedComponent : t === r.EMPTY ? null : void 0
     }
     var r = e(71);
     t.exports = n
    }, {
     71: 71
    }],
    123: [function(e, t) {
     function n(e) {
      var t = e && (r && e[r] || e[i]);
      return "function" == typeof t ? t : void 0
     }
     var r = "function" == typeof Symbol && Symbol.iterator,
      i = "@@iterator";
     t.exports = n
    }, {}],
    124: [function(e, t) {
     function n(e) {
      for (; e && e.firstChild;) e = e.firstChild;
      return e
     }

     function r(e) {
      for (; e;) {
       if (e.nextSibling) return e.nextSibling;
       e = e.parentNode
      }
     }

     function i(e, t) {
      for (var i = n(e), o = 0, a = 0; i;) {
       if (3 === i.nodeType) {
        if (a = o + i.textContent.length, t >= o && a >= t) return {
         node: i,
         offset: t - o
        };
        o = a
       }
       i = n(r(i))
      }
     }
     t.exports = i
    }, {}],
    125: [function(e, t) {
     function n() {
      return !i && r.canUseDOM && (i = "textContent" in document.documentElement ? "textContent" : "innerText"), i
     }
     var r = e(140),
      i = null;
     t.exports = n
    }, {
     140: 140
    }],
    126: [function(e, t) {
     function n(e, t) {
      var n = {};
      return n[e.toLowerCase()] = t.toLowerCase(), n["Webkit" + e] = "webkit" + t, n["Moz" + e] = "moz" + t, n["ms" + e] = "MS" + t, n["O" + e] = "o" + t.toLowerCase(), n
     }

     function r(e) {
      if (a[e]) return a[e];
      if (!o[e]) return e;
      var t = o[e];
      for (var n in t)
       if (t.hasOwnProperty(n) && n in s) return a[e] = t[n];
      return ""
     }
     var i = e(140),
      o = {
       animationend: n("Animation", "AnimationEnd"),
       animationiteration: n("Animation", "AnimationIteration"),
       animationstart: n("Animation", "AnimationStart"),
       transitionend: n("Transition", "TransitionEnd")
      },
      a = {},
      s = {};
     i.canUseDOM && (s = document.createElement("div").style, "AnimationEvent" in window || (delete o.animationend.animation, delete o.animationiteration.animation, delete o.animationstart.animation), "TransitionEvent" in window || delete o.transitionend.transition), t.exports = r
    }, {
     140: 140
    }],
    127: [function(e, t) {
     function n(e) {
      if (e) {
       var t = e.getName();
       if (t) return " Check the render method of `" + t + "`."
      }
      return ""
     }

     function r(e) {
      return "function" == typeof e && "undefined" != typeof e.prototype && "function" == typeof e.prototype.mountComponent && "function" == typeof e.prototype.receiveComponent
     }

     function i(e) {
      var t;
      if (null === e || e === !1) t = u.create(i);
      else if ("object" == typeof e) {
       var a = e;
       !a || "function" != typeof a.type && "string" != typeof a.type ? o("130", null == a.type ? a.type : typeof a.type, n(a._owner)) : void 0, "string" == typeof a.type ? t = l.createInternalComponent(a) : r(a.type) ? (t = new a.type(a), t.getHostNode || (t.getHostNode = t.getNativeNode)) : t = new c(a)
      } else "string" == typeof e || "number" == typeof e ? t = l.createInstanceForText(e) : o("131", typeof e);
      return t._mountIndex = 0, t._mountImage = null, t
     }
     var o = e(132),
      a = e(162),
      s = e(34),
      u = e(57),
      l = e(62),
      c = (e(154), e(161), function(e) {
       this.construct(e)
      });
     a(c.prototype, s.Mixin, {
      _instantiateReactComponent: i
     }), t.exports = i
    }, {
     132: 132,
     154: 154,
     161: 161,
     162: 162,
     34: 34,
     57: 57,
     62: 62
    }],
    128: [function(e, t) {
     function n(e, t) {
      if (!i.canUseDOM || t && !("addEventListener" in document)) return !1;
      var n = "on" + e,
       o = n in document;
      if (!o) {
       var a = document.createElement("div");
       a.setAttribute(n, "return;"), o = "function" == typeof a[n]
      }
      return !o && r && "wheel" === e && (o = document.implementation.hasFeature("Events.wheel", "3.0")), o
     }
     var r, i = e(140);
     i.canUseDOM && (r = document.implementation && document.implementation.hasFeature && document.implementation.hasFeature("", "") !== !0), t.exports = n
    }, {
     140: 140
    }],
    129: [function(e, t) {
     function n(e) {
      var t = e && e.nodeName && e.nodeName.toLowerCase();
      return "input" === t ? !!r[e.type] : "textarea" === t
     }
     var r = {
      color: !0,
      date: !0,
      datetime: !0,
      "datetime-local": !0,
      email: !0,
      month: !0,
      number: !0,
      password: !0,
      range: !0,
      search: !0,
      tel: !0,
      text: !0,
      time: !0,
      url: !0,
      week: !0
     };
     t.exports = n
    }, {}],
    130: [function(e, t) {
     function n(e) {
      return i.isValidElement(e) ? void 0 : r("143"), e
     }
     var r = e(132),
      i = e(56);
     e(154), t.exports = n
    }, {
     132: 132,
     154: 154,
     56: 56
    }],
    131: [function(e, t) {
     function n(e) {
      return '"' + r(e) + '"'
     }
     var r = e(114);
     t.exports = n
    }, {
     114: 114
    }],
    132: [function(e, t) {
     function n(e) {
      for (var t = arguments.length - 1, n = "Minified React error #" + e + "; visit http://facebook.github.io/react/docs/error-decoder.html?invariant=" + e, r = 0; t > r; r++) n += "&args[]=" + encodeURIComponent(arguments[r + 1]);
      n += " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
      var i = new Error(n);
      throw i.name = "Invariant Violation", i.framesToPop = 1, i
     }
     t.exports = n
    }, {}],
    133: [function(e, t) {
     var n = e(68);
     t.exports = n.renderSubtreeIntoContainer
    }, {
     68: 68
    }],
    134: [function(e, t) {
     var n, r = e(140),
      i = e(9),
      o = /^[ \r\n\t\f]/,
      a = /<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,
      s = e(112),
      u = s(function(e, t) {
       if (e.namespaceURI !== i.svg || "innerHTML" in e) e.innerHTML = t;
	  
       else {
        n = n || document.createElement("div"), n.innerHTML = "<svg>" + t + "</svg>";
		
		
        for (var r = n.firstChild.childNodes, o = 0; o < r.length; o++) e.appendChild(r[o])
       }

      });
     if (r.canUseDOM) {
      var l = document.createElement("div");
      l.innerHTML = " ", "" === l.innerHTML && (u = function(e, t) {
       if (e.parentNode && e.parentNode.replaceChild(e, e), o.test(t) || "<" === t[0] && a.test(t)) {
        e.innerHTML = String.fromCharCode(65279) + t;
        var n = e.firstChild;
        1 === n.data.length ? e.removeChild(n) : n.deleteData(0, 1)
       } else e.innerHTML = t
      }), l = null
     }
     t.exports = u
    }, {
     112: 112,
     140: 140,
     9: 9
    }],
    135: [function(e, t) {
     var n = e(140),
      r = e(114),
      i = e(134),
      o = function(e, t) {
       if (t) {
        var n = e.firstChild;
        if (n && n === e.lastChild && 3 === n.nodeType) return void(n.nodeValue = t)
       }
       e.textContent = t
      };
     n.canUseDOM && ("textContent" in document.documentElement || (o = function(e, t) {
      i(e, r(t))
     })), t.exports = o
    }, {
     114: 114,
     134: 134,
     140: 140
    }],
    136: [function(e, t) {
     function n(e, t) {
      var n = null === e || e === !1,
       r = null === t || t === !1;
      if (n || r) return n === r;
      var i = typeof e,
       o = typeof t;
      return "string" === i || "number" === i ? "string" === o || "number" === o : "object" === o && e.type === t.type && e.key === t.key
     }
     t.exports = n
    }, {}],
    137: [function(e, t) {
     function n(e, t) {
      return e && "object" == typeof e && null != e.key ? u.escape(e.key) : t.toString(36)
     }

     function r(e, t, i, h) {
      var p = typeof e;
      if ("undefined" !== p && "boolean" !== p || (e = null), null === e || "string" === p || "number" === p || a.isValidElement(e)) return i(h, e, "" === t ? l + n(e, 0) : t), 1;
      var d, f, m = 0,
       g = "" === t ? l : t + c;
      if (Array.isArray(e))
       for (var v = 0; v < e.length; v++) d = e[v], f = g + n(d, v), m += r(d, f, i, h);
      else {
       var y = s(e);
       if (y) {
        var b, w = y.call(e);
        if (y !== e.entries)
         for (var x = 0; !(b = w.next()).done;) d = b.value, f = g + n(d, x++), m += r(d, f, i, h);
        else
         for (; !(b = w.next()).done;) {
          var _ = b.value;
          _ && (d = _[1], f = g + u.escape(_[0]) + c + n(d, 0), m += r(d, f, i, h))
         }
       } else if ("object" === p) {
        var S = "",
         C = String(e);
        o("31", "[object Object]" === C ? "object with keys {" + Object.keys(e).join(", ") + "}" : C, S)
       }
      }
      return m
     }

     function i(e, t, n) {
      return null == e ? 0 : r(e, "", t, n)
     }
     var o = e(132),
      a = (e(35), e(56)),
      s = e(123),
      u = (e(154), e(23)),
      l = (e(161), "."),
      c = ":";
     t.exports = i
    }, {
     123: 123,
     132: 132,
     154: 154,
     161: 161,
     23: 23,
     35: 35,
     56: 56
    }],
    138: [function(e, t) {
     var n = (e(162), e(146)),
      r = (e(161), n);
     t.exports = r
    }, {
     146: 146,
     161: 161,
     162: 162
    }],
    139: [function(e, t) {
     var n = e(146),
      r = {
       listen: function(e, t, n) {
        return e.addEventListener ? (e.addEventListener(t, n, !1), {
         remove: function() {
          e.removeEventListener(t, n, !1)
         }
        }) : e.attachEvent ? (e.attachEvent("on" + t, n), {
         remove: function() {
          e.detachEvent("on" + t, n)
         }
        }) : void 0
       },
       capture: function(e, t, r) {
        return e.addEventListener ? (e.addEventListener(t, r, !0), {
         remove: function() {
          e.removeEventListener(t, r, !0)
         }
        }) : {
         remove: n
        }
       },
       registerDefault: function() {}
      };
     t.exports = r
    }, {
     146: 146
    }],
    140: [function(e, t) {
     var n = !("undefined" == typeof window || !window.document || !window.document.createElement),
      r = {
       canUseDOM: n,
       canUseWorkers: "undefined" != typeof Worker,
       canUseEventListeners: n && !(!window.addEventListener && !window.attachEvent),
       canUseViewport: n && !!window.screen,
       isInWorker: !n
      };
     t.exports = r
    }, {}],
    141: [function(e, t) {
     function n(e) {
      return e.replace(r, function(e, t) {
       return t.toUpperCase()
      })
     }
     var r = /-(.)/g;
     t.exports = n
    }, {}],
    142: [function(e, t) {
     function n(e) {
      return r(e.replace(i, "ms-"))
     }
     var r = e(141),
      i = /^-ms-/;
     t.exports = n
    }, {
     141: 141
    }],
    143: [function(e, t) {
     function n(e, t) {
      return !!(e && t && (e === t || !r(e) && (r(t) ? n(e, t.parentNode) : "contains" in e ? e.contains(t) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(t))))
     }
     var r = e(156);
     t.exports = n
    }, {
     156: 156
    }],
    144: [function(e, t) {
     function n(e) {
      var t = e.length;
      if (Array.isArray(e) || "object" != typeof e && "function" != typeof e ? o(!1) : void 0, "number" != typeof t ? o(!1) : void 0, 0 === t || t - 1 in e ? void 0 : o(!1), "function" == typeof e.callee ? o(!1) : void 0, e.hasOwnProperty) try {
       return Array.prototype.slice.call(e)
      } catch (e) {}
      for (var n = Array(t), r = 0; t > r; r++) n[r] = e[r];
      return n
     }

     function r(e) {
      return !!e && ("object" == typeof e || "function" == typeof e) && "length" in e && !("setInterval" in e) && "number" != typeof e.nodeType && (Array.isArray(e) || "callee" in e || "item" in e)
     }

     function i(e) {
      return r(e) ? Array.isArray(e) ? e.slice() : n(e) : [e]
     }
     var o = e(154);
     t.exports = i
    }, {
     154: 154
    }],
    145: [function(e, t) {
     function n(e) {
      var t = e.match(l);
      return t && t[1].toLowerCase()
     }

     function r(e, t) {
      var r = u;
      u ? void 0 : s(!1);
      var i = n(e),
       l = i && a(i);
      if (l) {
       r.innerHTML = l[1] + e + l[2];
       for (var c = l[0]; c--;) r = r.lastChild
      } else r.innerHTML = e;
      var h = r.getElementsByTagName("script");
      h.length && (t ? void 0 : s(!1), o(h).forEach(t));
      for (var p = Array.from(r.childNodes); r.lastChild;) r.removeChild(r.lastChild);
      return p
     }
     var i = e(140),
      o = e(144),
      a = e(150),
      s = e(154),
      u = i.canUseDOM ? document.createElement("div") : null,
      l = /^\s*<(\w+)/;
     t.exports = r
    }, {
     140: 140,
     144: 144,
     150: 150,
     154: 154
    }],
    146: [function(e, t) {
     function n(e) {
      return function() {
       return e
      }
     }
     var r = function() {};
     r.thatReturns = n, r.thatReturnsFalse = n(!1), r.thatReturnsTrue = n(!0), r.thatReturnsNull = n(null), r.thatReturnsThis = function() {
      return this
     }, r.thatReturnsArgument = function(e) {
      return e
     }, t.exports = r
    }, {}],
    147: [function(e, t) {
     var n = {};
     t.exports = n
    }, {}],
    148: [function(e, t) {
     function n(e) {
      try {
       e.focus()
      } catch (e) {}
     }
     t.exports = n
    }, {}],
    149: [function(e, t) {
     function n() {
      if ("undefined" == typeof document) return null;
      try {
       return document.activeElement || document.body
      } catch (e) {
       return document.body
      }
     }
     t.exports = n
    }, {}],
    150: [function(e, t) {
     function n(e) {
      return o ? void 0 : i(!1), h.hasOwnProperty(e) || (e = "*"), a.hasOwnProperty(e) || (o.innerHTML = "*" === e ? "<link />" : "<" + e + "></" + e + ">", a[e] = !o.firstChild), a[e] ? h[e] : null
     }
     var r = e(140),
      i = e(154),
      o = r.canUseDOM ? document.createElement("div") : null,
      a = {},
      s = [1, '<select multiple="true">', "</select>"],
      u = [1, "<table>", "</table>"],
      l = [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      c = [1, '<svg xmlns="http://www.w3.org/2000/svg">', "</svg>"],
      h = {
       "*": [1, "?<div>", "</div>"],
       area: [1, "<map>", "</map>"],
       col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
       legend: [1, "<fieldset>", "</fieldset>"],
       param: [1, "<object>", "</object>"],
       tr: [2, "<table><tbody>", "</tbody></table>"],
       optgroup: s,
       option: s,
       caption: u,
       colgroup: u,
       tbody: u,
       tfoot: u,
       thead: u,
       td: l,
       th: l
      },
      p = ["circle", "clipPath", "defs", "ellipse", "g", "image", "line", "linearGradient", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "text", "tspan"];
	  
		 
     p.forEach(function(e) {
      h[e] = c, a[e] = !0
     }), t.exports = n
	 

    }, {
     140: 140,
     154: 154
    }],
    151: [function(e, t) {
     function n(e) {
      return e === window ? {
       x: window.pageXOffset || document.documentElement.scrollLeft,
       y: window.pageYOffset || document.documentElement.scrollTop
      } : {
       x: e.scrollLeft,
       y: e.scrollTop
      }
     }
     t.exports = n
    }, {}],
    152: [function(e, t) {
     function n(e) {
      return e.replace(r, "-$1").toLowerCase()
     }
     var r = /([A-Z])/g;
     t.exports = n
    }, {}],
    153: [function(e, t) {
     function n(e) {
      return r(e).replace(i, "-ms-")
     }
     var r = e(152),
      i = /^ms-/;
     t.exports = n
    }, {
     152: 152
    }],
    154: [function(e, t) {
     function n(e, t, n, r, i, o, a, s) {
      if (!e) {
       var u;
       if (void 0 === t) u = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
       else {
        var l = [n, r, i, o, a, s],
         c = 0;
        u = new Error(t.replace(/%s/g, function() {
         return l[c++]
        })), u.name = "Invariant Violation"
       }
       throw u.framesToPop = 1, u
      }
     }
     t.exports = n
    }, {}],
    155: [function(e, t) {
     function n(e) {
      return !(!e || !("function" == typeof Node ? e instanceof Node : "object" == typeof e && "number" == typeof e.nodeType && "string" == typeof e.nodeName))
     }
     t.exports = n
    }, {}],
    156: [function(e, t) {
     function n(e) {
      return r(e) && 3 == e.nodeType
     }
     var r = e(155);
     t.exports = n
    }, {
     155: 155
    }],
    157: [function(e, t) {
     var n = e(154),
      r = function(e) {
       var t, r = {};
       e instanceof Object && !Array.isArray(e) ? void 0 : n(!1);
       for (t in e) e.hasOwnProperty(t) && (r[t] = t);
       return r
      };
     t.exports = r
    }, {
     154: 154
    }],
    158: [function(e, t) {
     var n = function(e) {
      var t;
      for (t in e)
       if (e.hasOwnProperty(t)) return t;
      return null
     };
     t.exports = n
    }, {}],
    159: [function(e, t) {
     function n(e) {
      var t = {};
      return function(n) {
       return t.hasOwnProperty(n) || (t[n] = e.call(this, n)), t[n]
      }
     }
     t.exports = n
    }, {}],
    160: [function(e, t) {
     function n(e, t) {
      return e === t ? 0 !== e || 1 / e === 1 / t : e !== e && t !== t
     }

     function r(e, t) {
      if (n(e, t)) return !0;
      if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
      var r = Object.keys(e),
       o = Object.keys(t);
      if (r.length !== o.length) return !1;
      for (var a = 0; a < r.length; a++)
       if (!i.call(t, r[a]) || !n(e[r[a]], t[r[a]])) return !1;
      return !0
     }
     var i = Object.prototype.hasOwnProperty;
     t.exports = r
    }, {}],
    161: [function(e, t) {
     var n = e(146),
      r = n;
     t.exports = r
    }, {
     146: 146
    }],
    162: [function(e, t) {
     function n(e) {
      if (null === e || void 0 === e) throw new TypeError("Object.assign cannot be called with null or undefined");
      return Object(e)
     }

     function r() {
      try {
       if (!Object.assign) return !1;
       var e = new String("abc");
       if (e[5] = "de", "5" === Object.getOwnPropertyNames(e)[0]) return !1;
       for (var t = {}, n = 0; 10 > n; n++) t["_" + String.fromCharCode(n)] = n;
       var r = Object.getOwnPropertyNames(t).map(function(e) {
        return t[e]
       });
       if ("0123456789" !== r.join("")) return !1;
       var i = {};
       return "abcdefghijklmnopqrst".split("").forEach(function(e) {
        i[e] = e
       }), "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, i)).join("")
      } catch (e) {
       return !1
      }
     }
     var i = Object.prototype.hasOwnProperty,
      o = Object.prototype.propertyIsEnumerable;
     t.exports = r() ? Object.assign : function(e) {
      for (var t, r, a = n(e), s = 1; s < arguments.length; s++) {
       t = Object(arguments[s]);
       for (var u in t) i.call(t, u) && (a[u] = t[u]);
       if (Object.getOwnPropertySymbols) {
        r = Object.getOwnPropertySymbols(t);
        for (var l = 0; l < r.length; l++) o.call(t, r[l]) && (a[r[l]] = t[r[l]])
       }
      }
      return a
     }
    }, {}]
   }, {}, [86])(86)
  }), e = n.exports
 }();
 var t, n = function(e) {
  function t(e) {
   return "function" == typeof e || "object" == typeof e && null !== e
  }

  function n(e) {
   return "function" == typeof e
  }

  function r(e) {
   G = e
  }

  function i(e) {
   W = e
  }

  function o() {
   return function() {
    process.nextTick(l)
   }
  }

  function a() {
   var e = 0,
    t = new Q(l),
    n = document.createTextNode("");
   return t.observe(n, {
     characterData: !0
    }),
    function() {
     n.data = e = ++e % 2
    }
  }

  function s() {
   var e = new MessageChannel;
   return e.port1.onmessage = l,
    function() {
     e.port2.postMessage(0)
    }
  }

  function u() {
   return function() {
    setTimeout(l, 1)
   }
  }

  function l() {
   for (var e = 0; q > e; e += 2) {
    var t = $[e],
     n = $[e + 1];
    t(n), $[e] = void 0, $[e + 1] = void 0
   }
   q = 0
  }

  function c(e, t) {
   var n = this,
    r = new this.constructor(p);
   void 0 === r[tt] && I(r);
   var i = n._state;
   if (i) {
    var o = arguments[i - 1];
    W(function() {
     A(i, r, o, n._result)
    })
   } else C(n, r, e, t);
   return r
  }

  function h(e) {
   var t = this;
   if (e && "object" == typeof e && e.constructor === t) return e;
   var n = new t(p);
   return w(n, e), n
  }

  function p() {}

  function d() {
   return new TypeError("You cannot resolve a promise with itself")
  }

  function f() {
   return new TypeError("A promises callback cannot return that same promise.")
  }

  function m(e) {
   try {
    return e.then
   } catch (t) {
    return ot.error = t, ot
   }
  }

  function g(e, t, n, r) {
   try {
    e.call(t, n, r)
   } catch (i) {
    return i
   }
  }

  function v(e, t, n) {
   W(function(e) {
    var r = !1,
     i = g(n, t, function(n) {
      r || (r = !0, t !== n ? w(e, n) : _(e, n))
     }, function(t) {
      r || (r = !0, S(e, t))
     }, "Settle: " + (e._label || " unknown promise"));
    !r && i && (r = !0, S(e, i))
   }, e)
  }

  function y(e, t) {
   t._state === rt ? _(e, t._result) : t._state === it ? S(e, t._result) : C(t, void 0, function(t) {
    w(e, t)
   }, function(t) {
    S(e, t)
   })
  }

  function b(e, t, r) {
   t.constructor === e.constructor && r === J && constructor.resolve === et ? y(e, t) : r === ot ? S(e, ot.error) : void 0 === r ? _(e, t) : n(r) ? v(e, t, r) : _(e, t)
  }

  function w(e, n) {
   e === n ? S(e, d()) : t(n) ? b(e, n, m(n)) : _(e, n)
  }

  function x(e) {
   e._onerror && e._onerror(e._result), E(e)
  }

  function _(e, t) {
   e._state === nt && (e._result = t, e._state = rt, 0 !== e._subscribers.length && W(E, e))
  }

  function S(e, t) {
   e._state === nt && (e._state = it, e._result = t, W(x, e))
  }

  function C(e, t, n, r) {
   var i = e._subscribers,
    o = i.length;
   e._onerror = null, i[o] = t, i[o + rt] = n, i[o + it] = r, 0 === o && e._state && W(E, e)
  }

  function E(e) {
   var t = e._subscribers,
    n = e._state;
   if (0 !== t.length) {
    for (var r, i, o = e._result, a = 0; a < t.length; a += 3) r = t[a], i = t[a + n], r ? A(n, r, i, o) : i(o);
    e._subscribers.length = 0
   }
  }

  function T() {
   this.error = null
  }

  function M(e, t) {
   try {
    return e(t)
   } catch (n) {
    return at.error = n, at
   }
  }

  function A(e, t, r, i) {
   var o, a, s, u, l = n(r);
   if (l) {
    if (o = M(r, i), o === at ? (u = !0, a = o.error, o = null) : s = !0, t === o) return S(t, f()), void 0
   } else o = i, s = !0;
   t._state !== nt || (l && s ? w(t, o) : u ? S(t, a) : e === rt ? _(t, o) : e === it && S(t, o))
  }

  function P(e, t) {
   try {
    t(function(t) {
     w(e, t)
    }, function(t) {
     S(e, t)
    })
   } catch (n) {
    S(e, n)
   }
  }

  function R() {
   return st++
  }

  function I(e) {
   e[tt] = st++, e._state = void 0, e._result = void 0, e._subscribers = []
  }

  function k(e) {
   return new pt(this, e).promise
  }

  function D(e) {
   var t = this;
   return j(e) ? new t(function(n, r) {
    for (var i = e.length, o = 0; i > o; o++) t.resolve(e[o]).then(n, r)
   }) : new t(function(e, t) {
    t(new TypeError("You must pass an array to race."))
   })
  }

  function V(e) {
   var t = this,
    n = new t(p);
   return S(n, e), n
  }

  function L() {
   throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
  }

  function B() {
   throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
  }

  function O(e) {
   this[tt] = R(), this._result = this._state = void 0, this._subscribers = [], p !== e && ("function" != typeof e && L(), this instanceof O ? P(this, e) : B())
  }

  function N(e, t) {
   this._instanceConstructor = e, this.promise = new e(p), this.promise[tt] || I(this.promise), Array.isArray(t) ? (this._input = t, this.length = t.length, this._remaining = t.length, this._result = new Array(this.length), 0 === this.length ? _(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(), 0 === this._remaining && _(this.promise, this._result))) : S(this.promise, F())
  }

  function F() {
   return new Error("Array Methods must be provided an Array")
  }

  function U() {
   var e;
   if ("undefined" != typeof global) e = global;
   else if ("undefined" != typeof self) e = self;
   else try {
    e = Function("return this")()
   } catch (t) {
    throw new Error("polyfill failed because global object is unavailable in this environment")
   }
   var n = e.Promise;
   (!n || "[object Promise]" !== Object.prototype.toString.call(n.resolve()) || n.cast) && (e.Promise = ht)
  }
  var z;
  z = Array.isArray ? Array.isArray : function(e) {
   return "[object Array]" === Object.prototype.toString.call(e)
  };
  var G, H, j = z,
   q = 0,
   W = function(e, t) {
    $[q] = e, $[q + 1] = t, q += 2, 2 === q && (G ? G(l) : H())
   },
   X = "undefined" != typeof window ? window : void 0,
   Y = X || {},
   Q = Y.MutationObserver || Y.WebKitMutationObserver,
   Z = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process),
   K = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel,
   $ = new Array(1e3);
  H = Z ? o() : Q ? a() : K ? s() : u();
  var J = c,
   et = h,
   tt = Math.random().toString(36).substring(16),
   nt = void 0,
   rt = 1,
   it = 2,
   ot = new T,
   at = new T,
   st = 0,
   ut = k,
   lt = D,
   ct = V,
   ht = O;
  O.all = ut, O.race = lt, O.resolve = et, O.reject = ct, O._setScheduler = r, O._setAsap = i, O._asap = W, O.prototype = {
   constructor: O,
   then: J,
   "catch": function(e) {
    return this.then(null, e)
   }
  };
  var pt = N;
  N.prototype._enumerate = function() {
   for (var e = this.length, t = this._input, n = 0; this._state === nt && e > n; n++) this._eachEntry(t[n], n)
  }, N.prototype._eachEntry = function(e, t) {
   var n = this._instanceConstructor,
    r = n.resolve;
   if (r === et) {
    var i = m(e);
    if (i === J && e._state !== nt) this._settledAt(e._state, t, e._result);
    else if ("function" != typeof i) this._remaining--, this._result[t] = e;
    else if (n === ht) {
     var o = new n(p);
     b(o, e, i), this._willSettleAt(o, t)
    } else this._willSettleAt(new n(function(t) {
     t(e)
    }), t)
   } else this._willSettleAt(r(e), t)
  }, N.prototype._settledAt = function(e, t, n) {
   var r = this.promise;
   r._state === nt && (this._remaining--, e === it ? S(r, n) : this._result[t] = n), 0 === this._remaining && _(r, this._result)
  }, N.prototype._willSettleAt = function(e, t) {
   var n = this;
   C(e, void 0, function(e) {
    n._settledAt(rt, t, e)
   }, function(e) {
    n._settledAt(it, t, e)
   })
  };
  var dt = U,
   ft = {
    Promise: ht,
    polyfill: dt
   };
  dt(), e.ES6Promise = ft
 };
 if ("undefined" != typeof window && window && window.Promise) t = window.Promise;
 else if ("undefined" != typeof global && global && global.Promise) t = global.Promise;
 else {
  var r = {};
  n(r), t = r.ES6Promise.Promise
 }
 var i;
 ! function(e) {
  e.VERSION = {
   number: "1.1.0",
   date: "Dec 11 2016"
  }
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     return e.creator && e.chunkSize
    }

    function n(e, t, n, r, i) {
     return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.current[e.currentIndex++] = r, e.current[e.currentIndex++] = i, e.elementCount++
    }

    function r(e, t, n, r) {
     return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.current[e.currentIndex++] = r, e.elementCount++
    }

    function i(e, t, n) {
     return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.elementCount++
    }

    function o(e, t) {
     return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.elementCount++
    }

    function a(e) {
     var t, n = e.creator(e.elementSize * e.elementCount),
      r = (e.parts.length - 1) * e.chunkSize,
      i = 0;
     if (e.parts.length > 1)
      if (e.parts[0].buffer)
       for (var o = 0; o < e.parts.length - 1; o++) n.set(e.parts[o], e.chunkSize * o);
      else
       for (var o = 0; o < e.parts.length - 1; o++) {
        i = e.chunkSize * o, t = e.parts[o];
        for (var a = 0; a < e.chunkSize; a++) n[i + a] = t[a]
       }
     if (e.current.buffer && e.currentIndex >= e.chunkSize) n.set(e.current, e.chunkSize * (e.parts.length - 1));
     else
      for (var o = 0; o < e.currentIndex; o++) n[r + o] = e.current[o];
     return n
    }

    function s(e) {
     return void 0 === e && (e = 262144), f(function(e) {
      return new Float32Array(e)
     }, e, 3)
    }

    function u(e) {
     return void 0 === e && (e = 262144), f(function(e) {
      return new Uint32Array(e)
     }, e, 3)
    }

    function l(e) {
     return void 0 === e && (e = 131072), f(function(e) {
      return new Int32Array(e)
     }, e, 2)
    }

    function c(e) {
     return void 0 === e && (e = 131072), f(function(e) {
      return new Int32Array(e)
     }, e, 1)
    }

    function h(e) {
     return void 0 === e && (e = 131072), f(function(e) {
      return new Int32Array(e)
     }, e, 1)
    }

    function p(e) {
     return void 0 === e && (e = 131072), f(function(e) {
      return new Float32Array(e)
     }, e, 1)
    }

    function d(e) {
     return void 0 === e && (e = 131072), f(function() {
      return []
     }, e, 1)
    }

    function f(e, t, n) {
     t = 0 | t, 0 >= t && (t = 1);
     var r = t * n,
      i = e(r);
     return {
      elementSize: n,
      chunkSize: r,
      creator: e,
      current: i,
      parts: [i],
      currentIndex: 0,
      elementCount: 0
     }
    }
    e.is = t, e.add4 = n, e.add3 = r, e.add2 = i, e.add = o, e.compact = a, e.forVertex3D = s, e.forIndexBuffer = u, e.forTokenIndices = l, e.forIndices = c, e.forInt32 = h, e.forFloat32 = p, e.forArray = d, e.create = f
   }(t = e.ChunkedArray || (e.ChunkedArray = {}))
  }(t = e.Utils || (e.Utils = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e, t, r) {
     for (; r > t && 32 === e.charCodeAt(t);) t++;
     return n(e, t, r)
    }

    function n(e, t, n) {
     var r = 0,
      i = 1;
     for (45 === e.charCodeAt(t) && (i = -1, t++); n > t; t++) {
      var o = e.charCodeAt(t) - 48;
      if (o > 9 || 0 > o) return i * r | 0;
      r = 10 * r + o | 0
     }
     return i * r
    }

    function r(e, t, r, i) {
     return e * Math.pow(10, n(t, r, i))
    }

    function i(e, t, n) {
     for (; n > t && 32 === e.charCodeAt(t);) t++;
     return o(e, t, n)
    }

    function o(e, t, n) {
     var i = 1,
      o = 0,
      a = 0,
      s = 1;
     for (45 === e.charCodeAt(t) && (i = -1, ++t); n > t;) {
      var u = e.charCodeAt(t) - 48;
      if (!(u >= 0 && 10 > u)) {
       if (-2 === u) {
        for (++t; n > t;) {
         if (u = e.charCodeAt(t) - 48, !(u >= 0 && 10 > u)) return 53 === u || 21 === u ? r(i * (o + a / s), e, t + 1, n) : i * (o + a / s);
         a = 10 * a + u, s = 10 * s, ++t
        }
        return i * (o + a / s)
       }
       if (53 === u || 21 === u) return r(i * o, e, t + 1, n);
       break
      }
      o = 10 * o + u, ++t
     }
     return i * o
    }
    e.parseIntSkipTrailingWhitespace = t, e.parseInt = n, e.parseScientific = r, e.parseFloatSkipTrailingWhitespace = i, e.parseFloat = o
   }(t = e.FastNumberParsers || (e.FastNumberParsers = {}))
  }(t = e.Utils || (e.Utils = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t = [];
   ! function() {
    for (var e = "", n = 0; 512 > n; n++) t[n] = e, e += " "
   }();
   var n;
   ! function(e) {
    function n(e) {
     return void 0 === e && (e = 512), {
      chunkData: [],
      chunkOffset: 0,
      chunkCapacity: e,
      data: []
     }
    }

    function r(e) {
     return e.data.length ? (e.chunkOffset > 0 && (e.data[e.data.length] = e.chunkData.splice(0, e.chunkOffset).join("")), e.data.join("")) : e.chunkData.length === e.chunkOffset ? e.chunkData.join("") : e.chunkData.splice(0, e.chunkOffset).join("")
    }

    function i(e, t) {
     o(e);
     for (var n = 0, r = e.data; n < r.length; n++) {
      var i = r[n];
      t.writeString(i)
     }
    }

    function o(e) {
     e.chunkOffset > 0 && (e.data[e.data.length] = e.chunkData.length === e.chunkOffset ? e.chunkData.join("") : e.chunkData.splice(0, e.chunkOffset).join(""), e.chunkOffset = 0)
    }

    function a(e) {
     u(e, "\n")
    }

    function s(e, n) {
     u(e, t[n])
    }

    function u(e, t) {
     void 0 !== t && null !== t && (e.chunkOffset === e.chunkCapacity && (e.data[e.data.length] = e.chunkData.join(""), e.chunkOffset = 0), e.chunkData[e.chunkOffset++] = t)
    }

    function l(e, t) {
     e.chunkOffset === e.chunkCapacity && (e.data[e.data.length] = e.chunkData.join(""), e.chunkOffset = 0), e.chunkData[e.chunkOffset++] = t
    }

    function c(e, n, r) {
     (void 0 === n || null === n) && u(e, t[r]);
     var i = r - n.length;
     i > 0 && u(e, t[i]), u(e, n)
    }

    function h(e, n, r) {
     (void 0 === n || null === n) && u(e, t[r]);
     var i = r - n.length;
     u(e, n), i > 0 && u(e, t[i])
    }

    function p(e, t) {
     u(e, "" + t)
    }

    function d(e, n, r) {
     var i = "" + n,
      o = r - i.length;
     o > 0 && u(e, t[o]), u(e, i)
    }

    function f(e, n, r) {
     var i = "" + n,
      o = r - i.length;
     u(e, i), o > 0 && u(e, t[o])
    }

    function m(e, t, n) {
     u(e, "" + Math.round(n * t) / n)
    }

    function g(e, n, r, i) {
     var o = "" + Math.round(r * n) / r,
      a = i - o.length;
     a > 0 && u(e, t[a]), u(e, o)
    }

    function v(e, n, r, i) {
     var o = "" + Math.round(r * n) / r,
      a = i - o.length;
     u(e, o), a > 0 && u(e, t[a])
    }
    e.create = n, e.asString = r, e.writeTo = i, e.newline = a, e.whitespace = s, e.write = u, e.writeSafe = l, e.writePadLeft = c, e.writePadRight = h, e.writeInteger = p, e.writeIntegerPadLeft = d, e.writeIntegerPadRight = f, e.writeFloat = m, e.writeFloatPadLeft = g, e.writeFloatPadRight = v
   }(n = e.StringWriter || (e.StringWriter = {}))
  }(t = e.Utils || (e.Utils = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t = function() {
   function e() {
    this.isDefined = !1
   }
   return e.prototype.getString = function() {
    return null
   }, e.prototype.getInteger = function() {
    return 0
   }, e.prototype.getFloat = function() {
    return 0
   }, e.prototype.getValuePresence = function() {
    return 1
   }, e.prototype.areValuesEqual = function() {
    return !0
   }, e.prototype.stringEquals = function(e, t) {
    return null === t
   }, e
  }();
  e.UndefinedColumn = new t;
  var n;
  ! function(e) {
   function t(e, t, n, r, i) {
    for (var o = [], a = 1; n >= a; a++) {
     for (var s = [], u = 1; r >= u; u++) s[u - 1] = e.getColumn(t + "[" + a + "][" + u + "]").getFloat(i);
     o[a - 1] = s
    }
    return o
   }

   function n(e, t, n, r, i) {
    for (var o = [], a = 1; n >= a; a++) o[a - 1] = e.getColumn(t + "[" + a + "]").getFloat(i);
    return o
   }
   e.getMatrix = t, e.getVector = n
  }(n = e.Category || (e.Category = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   function t(e, t) {
    return void 0 === t && (t = -1), new n(e, t)
   }

   function i(e, t) {
    return void 0 === t && (t = []), new r(e, t)
   }
   e.error = t, e.success = i
  }(t = e.ParserResult || (e.ParserResult = {}));
  var n = function() {
   function e(e, t) {
    this.message = e, this.line = t, this.isError = !0
   }
   return e.prototype.toString = function() {
    return this.line >= 0 ? "[Line " + this.line + "] " + this.message : this.message
   }, e
  }();
  e.ParserError = n;
  var r = function() {
   function e(e, t) {
    this.result = e, this.warnings = t, this.isError = !1
   }
   return e
  }();
  e.ParserSuccess = r
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(e) {
    function t() {
     return new Map
    }

    function n(e, t) {
     if (t.length > 6) return t;
     var n = e.get(t);
     return void 0 !== n ? n : (e.set(t, t), t)
    }
    e.create = t, e.get = n
   }(n || (n = {}));
   var r = function() {
    function e(e) {
     this.dataBlocks = [], this.data = e
    }
    return e.prototype.toJSON = function() {
     return this.dataBlocks.map(function(e) {
      return e.toJSON()
     })
    }, e
   }();
   t.File = r;
   var i = function() {
    function e(e, t) {
     this.header = t, this.data = e, this.categoryList = [], this.additionalData = {}, this.categoryMap = new Map
    }
    return Object.defineProperty(e.prototype, "categories", {
     get: function() {
      return this.categoryList
     },
     enumerable: !0,
     configurable: !0
    }), e.prototype.getCategory = function(e) {
     return this.categoryMap.get(e)
    }, e.prototype.addCategory = function(e) {
     this.categoryList[this.categoryList.length] = e, this.categoryMap.set(e.name, e)
    }, e.prototype.toJSON = function() {
     return {
      id: this.header,
      categories: this.categoryList.map(function(e) {
       return e.toJSON()
      }),
      additionalData: this.additionalData
     }
    }, e
   }();
   t.DataBlock = i;
   var o = function() {
    function t(e, t, n, r, i, o, a) {
     this.name = t, this.tokens = o, this.data = e, this.startIndex = n, this.endIndex = r, this.columnCount = i.length, this.rowCount = a / i.length | 0, this.columnIndices = new Map, this.columnNameList = [];
     for (var s = 0; s < i.length; s++) {
      var u = i[s].substr(t.length + 1);
      this.columnIndices.set(u, s), this.columnNameList.push(u)
     }
    }
    return Object.defineProperty(t.prototype, "columnNames", {
     get: function() {
      return this.columnNameList
     },
     enumerable: !0,
     configurable: !0
    }), t.prototype.getColumn = function(t) {
     var n = this.columnIndices.get(t);
     return void 0 !== n ? new u(this, this.data, t, n) : e.UndefinedColumn
    }, t.prototype.toJSON = function() {
     for (var e = [], t = this.data, r = this.tokens, i = this.columnNameList, o = n.create(), a = 0; a < this.rowCount; a++) {
      for (var s = {}, u = 0; u < this.columnCount; u++) {
       var l = 2 * (a * this.columnCount + u);
       s[i[u]] = n.get(o, t.substring(r[l], r[l + 1]))
      }
      e[a] = s
     }
     return {
      name: this.name,
      columns: i,
      rows: e
     }
    }, t
   }();
   t.Category = o;
   var a = e.Utils.FastNumberParsers.parseInt,
    s = e.Utils.FastNumberParsers.parseFloat,
    u = function() {
     function e(e, t, r, i) {
      this.data = t, this.name = r, this.index = i, this.stringPool = n.create(), this.isDefined = !0, this.tokens = e.tokens, this.columnCount = e.columnCount
     }
     return e.prototype.getString = function(e) {
      var t = 2 * (e * this.columnCount + this.index),
       r = n.get(this.stringPool, this.data.substring(this.tokens[t], this.tokens[t + 1]));
      return "." === r || "?" === r ? null : r
     }, e.prototype.getInteger = function(e) {
      var t = 2 * (e * this.columnCount + this.index);
      return a(this.data, this.tokens[t], this.tokens[t + 1])
     }, e.prototype.getFloat = function(e) {
      var t = 2 * (e * this.columnCount + this.index);
      return s(this.data, this.tokens[t], this.tokens[t + 1])
     }, e.prototype.stringEquals = function(e, t) {
      var n = 2 * (e * this.columnCount + this.index),
       r = this.tokens[n],
       i = t.length;
      if (i !== this.tokens[n + 1] - r) return !1;
      for (var o = 0; i > o; o++)
       if (this.data.charCodeAt(o + r) !== t.charCodeAt(o)) return !1;
      return !0
     }, e.prototype.areValuesEqual = function(e, t) {
      var n = 2 * (e * this.columnCount + this.index),
       r = 2 * (t * this.columnCount + this.index),
       i = this.tokens[n],
       o = this.tokens[r],
       a = this.tokens[n + 1] - i;
      if (a !== this.tokens[r + 1] - o) return !1;
      for (var s = 0; a > s; s++)
       if (this.data.charCodeAt(s + i) !== this.data.charCodeAt(s + o)) return !1;
      return !0
     }, e.prototype.getValuePresence = function(e) {
      var t = e * this.columnCount + this.index,
       n = this.tokens[2 * t];
      if (this.tokens[2 * t + 1] - n !== 1) return 0;
      var r = this.data.charCodeAt(n);
      return 46 === r ? 1 : 63 === r ? 2 : 0
     }, e
    }();
   t.Column = u
  }(t = e.Text || (e.Text = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   function n(e) {
    for (; e.position < e.length;) switch (e.data.charCodeAt(e.position)) {
     case 9:
     case 10:
     case 13:
     case 32:
      return e.currentTokenEnd = e.position, void 0;
     default:
      ++e.position
    }
    e.currentTokenEnd = e.position
   }

   function r(e, t) {
    var n, r;
    for (++e.position; e.position < e.length;)
     if (r = e.data.charCodeAt(e.position), r === t) switch (n = e.data.charCodeAt(e.position + 1)) {
      case 9:
      case 10:
      case 13:
      case 32:
       return e.currentTokenStart++, e.currentTokenEnd = e.position, e.isEscaped = !0, ++e.position, void 0;
      default:
       if (void 0 === n) return e.currentTokenStart++, e.currentTokenEnd = e.position, e.isEscaped = !0, ++e.position, void 0;
       ++e.position
     } else {
      if (10 === r || 13 === r) return e.currentTokenEnd = e.position, void 0;
      ++e.position
     }
    e.currentTokenEnd = e.position
   }

   function i(e) {
    for (var t, n = 59, r = e.position + 1; r < e.length;) {
     if (t = e.data.charCodeAt(r), 59 === t && (10 === n || 13 === n)) {
      for (e.position = r + 1, e.currentTokenStart++, r--, t = e.data.charCodeAt(r); 10 === t || 13 === t;) r--, t = e.data.charCodeAt(r);
      return e.currentTokenEnd = r + 1, e.isEscaped = !0, void 0
     }
     13 === t ? e.currentLineNumber++ : 10 === t && 13 !== n && e.currentLineNumber++, n = t, ++r
    }
    return e.position = r, n
   }

   function o(e) {
    for (; e.position < e.length;) {
     var t = e.data.charCodeAt(e.position);
     if (10 === t || 13 === t) return;
     ++e.position
    }
   }

   function a(e) {
    for (var t = 10; e.position < e.length;) {
     var n = e.data.charCodeAt(e.position);
     switch (n) {
      case 9:
      case 32:
       t = n, ++e.position;
       break;
      case 10:
       13 !== t && ++e.currentLineNumber, t = n, ++e.position;
       break;
      case 13:
       t = n, ++e.position, ++e.currentLineNumber;
       break;
      default:
       return t
     }
    }
    return t
   }

   function s(e) {
    var t = e.data.charCodeAt(e.currentTokenStart);
    return 68 !== t && 100 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 1), 65 !== t && 97 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 2), 84 !== t && 116 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 3), 65 !== t && 97 !== t ? !1 : !0)))
   }

   function u(e) {
    var t = e.data.charCodeAt(e.currentTokenStart);
    return 83 !== t && 115 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 1), 65 !== t && 97 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 2), 86 !== t && 118 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 3), 69 !== t && 101 !== t ? !1 : !0)))
   }

   function l(e) {
    if (e.currentTokenEnd - e.currentTokenStart !== 5) return !1;
    var t = e.data.charCodeAt(e.currentTokenStart);
    return 76 !== t && 108 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 1), 79 !== t && 111 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 2), 79 !== t && 111 !== t ? !1 : (t = e.data.charCodeAt(e.currentTokenStart + 3), 80 !== t && 112 !== t ? !1 : !0)))
   }

   function c(e, t, n) {
    var r, i = n - t,
     o = e.currentTokenStart - t,
     a = e.currentTokenEnd - e.currentTokenStart;
    if (i > a) return !1;
    for (r = t; n > r; ++r)
     if (e.data.charCodeAt(r) !== e.data.charCodeAt(r + o)) return !1;
    return i === a ? !0 : 46 === e.data.charCodeAt(r + o) ? !0 : !1
   }

   function h(e) {
    var t;
    for (t = e.currentTokenStart; t < e.currentTokenEnd; ++t)
     if (46 === e.data.charCodeAt(t)) return t;
    return t
   }

   function p(e, t) {
    return e.data.substring(e.currentTokenStart, t)
   }

   function d(e) {
    return e.data.substring(e.currentTokenStart, e.currentTokenEnd)
   }

   function f(e) {
    var t = a(e);
    if (e.position >= e.length) return e.currentTokenType = 6, void 0;
    e.currentTokenStart = e.position, e.currentTokenEnd = e.position, e.isEscaped = !1;
    var c = e.data.charCodeAt(e.position);
    switch (c) {
     case 35:
      o(e), e.currentTokenType = 5;
      break;
     case 34:
     case 39:
      r(e, c), e.currentTokenType = 3;
      break;
     case 59:
      10 === t || 13 === t ? i(e) : n(e), e.currentTokenType = 3;
      break;
     default:
      n(e), e.currentTokenType = e.isEscaped ? 3 : 95 === e.data.charCodeAt(e.currentTokenStart) ? 4 : e.currentTokenEnd - e.currentTokenStart >= 5 && 95 === e.data.charCodeAt(e.currentTokenStart + 4) ? s(e) ? 0 : u(e) ? 1 : l(e) ? 2 : 3 : 3
    }
   }

   function m(e) {
    for (f(e); 5 === e.currentTokenType;) f(e)
   }

   function g(e) {
    return {
     data: e,
     length: e.length,
     position: 0,
     currentTokenStart: 0,
     currentTokenEnd: 0,
     currentTokenType: 6,
     currentLineNumber: 1,
     isEscaped: !1
    }
   }

   function v(e, n) {
    for (var r, i = e.currentTokenStart, o = h(e), a = p(e, o), s = [], u = S.create(512), l = 0, f = !0; f;) {
     if (4 !== e.currentTokenType || !c(e, i, o)) {
      f = !1;
      break
     }
     if (r = d(e), m(e), 3 !== e.currentTokenType) return {
      hasError: !0,
      errorLine: e.currentLineNumber,
      errorMessage: "Expected value."
     };
     s[s.length] = r, S.addToken(u, e.currentTokenStart, e.currentTokenEnd), l++, m(e)
    }
    return n.addCategory(new t.Category(n.data, a, i, e.currentTokenStart, s, u.tokens, l)), {
     hasError: !1,
     errorLine: 0,
     errorMessage: ""
    }
   }

   function y(e, n) {
    var r = e.currentTokenStart,
     i = e.currentLineNumber;
    m(e);
    for (var o = p(e, h(e)), a = [], s = S.create("_atom_site" === o ? n.data.length / 1.85 | 0 : 1024), u = 0; 4 === e.currentTokenType;) a[a.length] = d(e), m(e);
    for (; 3 === e.currentTokenType;) S.addToken(s, e.currentTokenStart, e.currentTokenEnd), u++, m(e);
    return u % a.length !== 0 ? {
     hasError: !0,
     errorLine: e.currentLineNumber,
     errorMessage: "The number of values for loop starting at line " + i + " is not a multiple of the number of columns."
    } : (n.addCategory(new t.Category(n.data, o, r, e.currentTokenStart, a, s.tokens, u)), {
     hasError: !1,
     errorLine: 0,
     errorMessage: ""
    })
   }

   function b(t, n) {
    return e.ParserResult.error(n, t)
   }

   function w(t) {
    return e.ParserResult.success(t)
   }

   function x(e) {
    var n, r, i, o = g(e),
     a = new t.File(e),
     s = new t.DataBlock(e, "default"),
     u = new t.DataBlock(e, "empty"),
     l = !1;
    for (m(o); 6 !== o.currentTokenType;) {
     var c = o.currentTokenType;
     if (0 === c) {
      if (l) return b(o.currentLineNumber, "Unexpected data block inside a save frame.");
      s.categories.length > 0 && a.dataBlocks.push(s), s = new t.DataBlock(e, e.substring(o.currentTokenStart + 5, o.currentTokenEnd)), m(o)
     } else if (1 === c) {
      if (r = e.substring(o.currentTokenStart + 5, o.currentTokenEnd), 0 === r.length) u.categories.length > 0 && (i = s.additionalData.saveFrames, i || (i = [], s.additionalData.saveFrames = i), i[i.length] = u), l = !1;
      else {
       if (l) return b(o.currentLineNumber, "Save frames cannot be nested.");
       l = !0, u = new t.DataBlock(e, r)
      }
      m(o)
     } else if (2 === c) {
      if (n = y(o, l ? u : s), n.hasError) return b(n.errorLine, n.errorMessage)
     } else {
      if (4 !== c) return b(o.currentLineNumber, "Unexpected token. Expected data_, loop_, or data name.");
      if (n = v(o, l ? u : s), n.hasError) return b(n.errorLine, n.errorMessage)
     }
    }
    return l ? b(o.currentLineNumber, "Unfinished save frame (`" + u.header + "`).") : (s.categories.length > 0 && a.dataBlocks.push(s), w(a))
   }

   function _(e) {
    return x(e)
   }
   var S;
   ! function(e) {
    function t(e) {
     var t = new Int32Array(1.61 * e.tokens.length | 0);
     t.set(e.tokens), e.tokens = t, e.tokensLenMinus2 = t.length - 2 | 0
    }

    function n(e, n, r) {
     e.count >= e.tokensLenMinus2 && t(e), e.tokens[e.count++] = n, e.tokens[e.count++] = r
    }

    function r(e) {
     return {
      tokensLenMinus2: e - 2 | 0,
      count: 0,
      tokens: new Int32Array(e)
     }
    }
    e.addToken = n, e.create = r
   }(S || (S = {})), t.parse = _
  }(t = e.Text || (e.Text = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   function n(e) {
    return !!e && e.indexOf("\n") >= 0
   }

   function r(e, t) {
    for (var r = e.desc.fields, i = e.data, o = r.reduce(function(e, t) {
      return Math.max(e, t.name.length)
     }, 0) + e.desc.name.length + 5, h = 0, p = r; h < p.length; h++) {
     var d = p[h];
     c.writePadRight(t, e.desc.name + "." + d.name, o);
     var f = d.presence,
      m = void 0;
     if (f && 0 !== (m = f(i, 0))) 1 === m ? a(t) : s(t);
     else {
      var g = d.string(i, 0);
      n(g) ? (l(t, g), c.newline(t)) : u(t, g)
     }
     c.newline(t)
    }
    c.write(t, "#\n")
   }

   function i(e, t) {
    o(t, "loop_");
    for (var r = e[0], i = r.desc.fields, h = 0, p = i; h < p.length; h++) {
     var d = p[h];
     o(t, r.desc.name + "." + d.name)
    }
    for (var f = 0, m = e; f < m.length; f++)
     for (var g = m[f], v = g.data, y = g.count, b = 0; y > b; b++) {
      for (var w = 0, x = i; w < x.length; w++) {
       var d = x[w],
        _ = d.presence,
        S = void 0;
       if (_ && 0 !== (S = _(v, b))) 1 === S ? a(t) : s(t);
       else {
        var C = d.string(v, b);
        n(C) ? (l(t, C), c.newline(t)) : u(t, C)
       }
      }
      c.newline(t)
     }
    c.write(t, "#\n")
   }

   function o(e, t) {
    c.write(e, t), c.newline(e)
   }

   function a(e) {
    c.writeSafe(e, ". ")
   }

   function s(e) {
    c.writeSafe(e, "? ")
   }

   function u(e, t) {
    if (!t) return c.writeSafe(e, ". "), void 0;
    for (var n = !1, r = "'", i = "' ", o = !1, a = !1, s = !1, u = 0, l = t.length - 1; l > u; u++) {
     var h = t.charCodeAt(u);
     switch (h) {
      case 9:
       o = !0;
       break;
      case 10:
       return c.writeSafe(e, "\n;" + t), c.writeSafe(e, "\n; "), void 0;
      case 32:
       o = !0;
       break;
      case 34:
       if (a) return c.writeSafe(e, "\n;" + t), c.writeSafe(e, "\n; "), void 0;
       s = !0, n = !0, r = "'", i = "' ";
       break;
      case 39:
       if (s) return c.writeSafe(e, "\n;" + t), c.writeSafe(e, "\n; "), void 0;
       n = !0, a = !0, r = '"', i = '" '
     }
    }
    var p = t.charCodeAt(0);
    n || 35 !== p && 59 !== p && !o || (r = "'", i = "' ", n = !0), n ? c.writeSafe(e, r + t + i) : (c.write(e, t), c.writeSafe(e, " "))
   }

   function l(e, t) {
    c.writeSafe(e, "\n;" + t), c.writeSafe(e, "\n; ")
   }
   var c = e.Utils.StringWriter,
    h = function() {
     function e() {
      this.writer = c.create(), this.encoded = !1, this.dataBlockCreated = !1
     }
     return e.prototype.startDataBlock = function(e) {
      this.dataBlockCreated = !0, c.write(this.writer, "data_" + (e || "").replace(/[ \n\t]/g, "").toUpperCase() + "\n#\n")
     }, e.prototype.writeCategory = function(e, t) {
      if (this.encoded) throw new Error("The writer contents have already been encoded, no more writing.");
      if (!this.dataBlockCreated) throw new Error("No data block created.");
      var n = t && t.length ? t.map(function(t) {
        return e(t)
       }) : [e(void 0)],
       o = n.filter(function(e) {
        return e && e.count > 0
       });
      if (o.length) {
       var a = o.reduce(function(e, t) {
        return e + (void 0 === t.count ? 1 : t.count)
       }, 0);
       a && (1 === a ? r(o[0], this.writer) : i(o, this.writer))
      }
     }, e.prototype.encode = function() {
      this.encoded = !0
     }, e.prototype.flush = function(e) {
      c.writeTo(this.writer, e)
     }, e
    }();
   t.Writer = h
  }(t = e.Text || (e.Text = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e, t) {
     for (var n = {}, r = 0; t > r; r++) {
      var i = o(e);
      n[i] = o(e)
     }
     return n
    }

    function n(e, t) {
     for (var n = new Uint8Array(t), r = e.offset, i = 0; t > i; i++) n[i] = e.buffer[i + r];
     return e.offset += t, n
    }

    function r(t, n) {
     var r = e.utf8Read(t.buffer, t.offset, n);
     return t.offset += n, r
    }

    function i(e, t) {
     for (var n = new Array(t), r = 0; t > r; r++) n[r] = o(e);
     return n
    }

    function o(e) {
     var o, a, s = e.buffer[e.offset];
     if (0 === (128 & s)) return e.offset++, s;
     if (128 === (240 & s)) return a = 15 & s, e.offset++, t(e, a);
     if (144 === (240 & s)) return a = 15 & s, e.offset++, i(e, a);
     if (160 === (224 & s)) return a = 31 & s, e.offset++, r(e, a);
     if (224 === (224 & s)) return o = e.dataView.getInt8(e.offset), e.offset++, o;
     switch (s) {
      case 192:
       return e.offset++, null;
      case 194:
       return e.offset++, !1;
      case 195:
       return e.offset++, !0;
      case 196:
       return a = e.dataView.getUint8(e.offset + 1), e.offset += 2, n(e, a);
      case 197:
       return a = e.dataView.getUint16(e.offset + 1), e.offset += 3, n(e, a);
      case 198:
       return a = e.dataView.getUint32(e.offset + 1), e.offset += 5, n(e, a);
      case 202:
       return o = e.dataView.getFloat32(e.offset + 1), e.offset += 5, o;
      case 203:
       return o = e.dataView.getFloat64(e.offset + 1), e.offset += 9, o;
      case 204:
       return o = e.buffer[e.offset + 1], e.offset += 2, o;
      case 205:
       return o = e.dataView.getUint16(e.offset + 1), e.offset += 3, o;
      case 206:
       return o = e.dataView.getUint32(e.offset + 1), e.offset += 5, o;
      case 208:
       return o = e.dataView.getInt8(e.offset + 1), e.offset += 2, o;
      case 209:
       return o = e.dataView.getInt16(e.offset + 1), e.offset += 3, o;
      case 210:
       return o = e.dataView.getInt32(e.offset + 1), e.offset += 5, o;
      case 217:
       return a = e.dataView.getUint8(e.offset + 1), e.offset += 2, r(e, a);
      case 218:
       return a = e.dataView.getUint16(e.offset + 1), e.offset += 3, r(e, a);
      case 219:
       return a = e.dataView.getUint32(e.offset + 1), e.offset += 5, r(e, a);
      case 220:
       return a = e.dataView.getUint16(e.offset + 1), e.offset += 3, i(e, a);
      case 221:
       return a = e.dataView.getUint32(e.offset + 1), e.offset += 5, i(e, a);
      case 222:
       return a = e.dataView.getUint16(e.offset + 1), e.offset += 3, t(e, a);
      case 223:
       return a = e.dataView.getUint32(e.offset + 1), e.offset += 5, t(e, a)
     }
     throw new Error("Unknown type 0x" + s.toString(16))
    }

    function a(e) {
     return o({
      buffer: e,
      offset: 0,
      dataView: new DataView(e.buffer)
     })
    }
    e.decode = a
   }(t = e.MessagePack || (e.MessagePack = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     var t = new ArrayBuffer(n(e)),
      i = new DataView(t),
      o = new Uint8Array(t);
     return r(e, i, o, 0), o
    }

    function n(t) {
     var r = typeof t;
     if ("string" === r) {
      var i = e.utf8ByteCount(t);
      if (32 > i) return 1 + i;
      if (256 > i) return 2 + i;
      if (65536 > i) return 3 + i;
      if (4294967296 > i) return 5 + i
     }
     if (t instanceof Uint8Array) {
      var o = t.byteLength;
      if (256 > o) return 2 + o;
      if (65536 > o) return 3 + o;
      if (4294967296 > o) return 5 + o
     }
     if ("number" === r) {
      if (Math.floor(t) !== t) return 9;
      if (t >= 0) {
       if (128 > t) return 1;
       if (256 > t) return 2;
       if (65536 > t) return 3;
       if (4294967296 > t) return 5;
       throw new Error("Number too big 0x" + t.toString(16))
      }
      if (t >= -32) return 1;
      if (t >= -128) return 2;
      if (t >= -32768) return 3;
      if (t >= -2147483648) return 5;
      throw new Error("Number too small -0x" + t.toString(16).substr(1))
     }
     if ("boolean" === r || null === t || void 0 === t) return 1;
     if ("object" === r) {
      var a, s = 0;
      if (Array.isArray(t)) {
       a = t.length;
       for (var u = 0; a > u; u++) s += n(t[u])
      } else {
       var l = Object.keys(t);
       a = l.length;
       for (var u = 0; a > u; u++) {
        var c = l[u];
        s += n(c) + n(t[c])
       }
      }
      if (16 > a) return 1 + s;
      if (65536 > a) return 3 + s;
      if (4294967296 > a) return 5 + s;
      throw new Error("Array or object too long 0x" + a.toString(16))
     }
     throw new Error("Unknown type " + r)
    }

    function r(t, n, i, o) {
     var a = typeof t;
     if ("string" === a) {
      var s = e.utf8ByteCount(t);
      if (32 > s) return n.setUint8(o, 160 | s), e.utf8Write(i, o + 1, t), 1 + s;
      if (256 > s) return n.setUint8(o, 217), n.setUint8(o + 1, s), e.utf8Write(i, o + 2, t), 2 + s;
      if (65536 > s) return n.setUint8(o, 218), n.setUint16(o + 1, s), e.utf8Write(i, o + 3, t), 3 + s;
      if (4294967296 > s) return n.setUint8(o, 219), n.setUint32(o + 1, s), e.utf8Write(i, o + 5, t), 5 + s
     }
     if (t instanceof Uint8Array) {
      var u = t.byteLength,
       l = new Uint8Array(n.buffer);
      if (256 > u) return n.setUint8(o, 196), n.setUint8(o + 1, u), l.set(t, o + 2), 2 + u;
      if (65536 > u) return n.setUint8(o, 197), n.setUint16(o + 1, u), l.set(t, o + 3), 3 + u;
      if (4294967296 > u) return n.setUint8(o, 198), n.setUint32(o + 1, u), l.set(t, o + 5), 5 + u
     }
     if ("number" === a) {
      if (!isFinite(t)) throw new Error("Number not finite: " + t);
      if (Math.floor(t) !== t) return n.setUint8(o, 203), n.setFloat64(o + 1, t), 9;
      if (t >= 0) {
       if (128 > t) return n.setUint8(o, t), 1;
       if (256 > t) return n.setUint8(o, 204), n.setUint8(o + 1, t), 2;
       if (65536 > t) return n.setUint8(o, 205), n.setUint16(o + 1, t), 3;
       if (4294967296 > t) return n.setUint8(o, 206), n.setUint32(o + 1, t), 5;
       throw new Error("Number too big 0x" + t.toString(16))
      }
      if (t >= -32) return n.setInt8(o, t), 1;
      if (t >= -128) return n.setUint8(o, 208), n.setInt8(o + 1, t), 2;
      if (t >= -32768) return n.setUint8(o, 209), n.setInt16(o + 1, t), 3;
      if (t >= -2147483648) return n.setUint8(o, 210), n.setInt32(o + 1, t), 5;
      throw new Error("Number too small -0x" + (-t).toString(16).substr(1))
     }
     if (null === t || void 0 === t) return n.setUint8(o, 192), 1;
     if ("boolean" === a) return n.setUint8(o, t ? 195 : 194), 1;
     if ("object" === a) {
      var c, h = 0,
       p = Array.isArray(t),
       d = void 0;
      if (p ? c = t.length : (d = Object.keys(t), c = d.length), 16 > c ? (n.setUint8(o, c | (p ? 144 : 128)), h = 1) : 65536 > c ? (n.setUint8(o, p ? 220 : 222), n.setUint16(o + 1, c), h = 3) : 4294967296 > c && (n.setUint8(o, p ? 221 : 223), n.setUint32(o + 1, c), h = 5), p)
       for (var f = 0; c > f; f++) h += r(t[f], n, i, o + h);
      else
       for (var m = 0, g = d; m < g.length; m++) {
        var v = g[m];
        h += r(v, n, i, o + h), h += r(t[v], n, i, o + h)
       }
      return h
     }
     throw new Error("Unknown type " + a)
    }
    e.encode = t
   }(t = e.MessagePack || (e.MessagePack = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e, t, n) {
     for (var r = (e.byteLength, 0), i = n.length; i > r; r++) {
      var o = n.charCodeAt(r);
      if (128 > o) e[t++] = o >>> 0 & 127 | 0;
      else if (2048 > o) e[t++] = o >>> 6 & 31 | 192, e[t++] = o >>> 0 & 63 | 128;
      else if (65536 > o) e[t++] = o >>> 12 & 15 | 224, e[t++] = o >>> 6 & 63 | 128, e[t++] = o >>> 0 & 63 | 128;
      else {
       if (!(1114112 > o)) throw new Error("bad codepoint " + o);
       e[t++] = o >>> 18 & 7 | 240, e[t++] = o >>> 12 & 63 | 128, e[t++] = o >>> 6 & 63 | 128, e[t++] = o >>> 0 & 63 | 128
      }
     }
    }

    function n(e, t, n) {
     for (var r = [], i = t, o = t + n; o > i; i++) {
      var a = e[i];
      if (0 !== (128 & a))
       if (192 !== (224 & a))
        if (224 !== (240 & a)) {
         if (240 !== (248 & a)) throw new Error("Invalid byte " + a.toString(16));
         r[r.length] = String.fromCharCode((7 & a) << 18 | (63 & e[++i]) << 12 | (63 & e[++i]) << 6 | (63 & e[++i]) << 0)
        } else r[r.length] = String.fromCharCode((15 & a) << 12 | (63 & e[++i]) << 6 | (63 & e[++i]) << 0);
      else r[r.length] = String.fromCharCode((15 & a) << 6 | 63 & e[++i]);
      else r[r.length] = String.fromCharCode(a)
     }
     return r.join("")
    }

    function r(e) {
     for (var t = 0, n = 0, r = e.length; r > n; n++) {
      var i = e.charCodeAt(n);
      if (128 > i) t += 1;
      else if (2048 > i) t += 2;
      else if (65536 > i) t += 3;
      else {
       if (!(1114112 > i)) throw new Error("bad codepoint " + i);
       t += 4
      }
     }
     return t
    }
    e.utf8Write = t, e.utf8Read = n, e.utf8ByteCount = r
   }(t = e.MessagePack || (e.MessagePack = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   function t(e) {
    for (var t = e.data, r = e.encoding.length - 1; r >= 0; r--) t = n.decodeStep(t, e.encoding[r]);
    return t
   }
   e.decode = t;
   var n;
   ! function(e) {
    function n(e, t) {
     switch (t.kind) {
      case "ByteArray":
       switch (t.type) {
        case 4:
         return e;
        case 1:
         return o(e);
        case 2:
         return u(e);
        case 5:
         return l(e);
        case 3:
         return c(e);
        case 6:
         return h(e);
        case 32:
         return p(e);
        case 33:
         return d(e);
        default:
         throw new Error("Unsupported ByteArray type.")
       }
      case "FixedPoint":
       return f(e, t);
      case "IntervalQuantization":
       return m(e, t);
      case "RunLength":
       return g(e, t);
      case "Delta":
       return v(e, t);
      case "IntegerPacking":
       return w(e, t);
      case "StringArray":
       return x(e, t)
     }
    }

    function r(e, t) {
     switch (e) {
      case 1:
       return new Int8Array(t);
      case 2:
       return new Int16Array(t);
      case 3:
       return new Int32Array(t);
      case 4:
       return new Uint8Array(t);
      case 5:
       return new Uint16Array(t);
      case 6:
       return new Uint32Array(t);
      default:
       throw new Error("Unsupported integer data type.")
     }
    }

    function i(e, t) {
     switch (e) {
      case 32:
       return new Float32Array(t);
      case 33:
       return new Float64Array(t);
      default:
       throw new Error("Unsupported floating data type.")
     }
    }

    function o(e) {
     return new Int8Array(e.buffer, e.byteOffset)
    }

    function a(e, t) {
     for (var n = new ArrayBuffer(e.length), r = new Uint8Array(n), i = 0, o = e.length; o > i; i += t)
      for (var a = 0; t > a; a++) r[i + t - a - 1] = e[i + a];
     return n
    }

    function s(e, t, n) {
     return _ ? new n(e.buffer) : new n(a(e, t))
    }

    function u(e) {
     return s(e, 2, Int16Array)
    }

    function l(e) {
     return s(e, 2, Uint16Array)
    }

    function c(e) {
     return s(e, 4, Int32Array)
    }

    function h(e) {
     return s(e, 4, Uint32Array)
    }

    function p(e) {
     return s(e, 4, Float32Array)
    }

    function d(e) {
     return s(e, 8, Float64Array)
    }

    function f(e, t) {
     for (var n = e.length, r = i(t.srcType, n), o = 1 / t.factor, a = 0; n > a; a++) r[a] = o * e[a];
     return r
    }

    function m(e, t) {
     for (var n = e.length, r = i(t.srcType, n), o = (t.max - t.min) / (t.numSteps - 1), a = t.min, s = 0; n > s; s++) r[s] = a + o * e[s];
     return r
    }

    function g(e, t) {
     for (var n = r(t.srcType, t.srcSize), i = 0, o = 0, a = e.length; a > o; o += 2)
      for (var s = e[o], u = e[o + 1], l = 0; u > l; ++l) n[i++] = s;
     return n
    }

    function v(e, t) {
     var n = e.length,
      i = r(t.srcType, n);
     if (!n) return i;
     i[0] = e[0] + (0 | t.origin);
     for (var o = 1; n > o; ++o) i[o] = e[o] + i[o - 1];
     return i
    }

    function y(e, t) {
     for (var n = 1 === t.byteCount ? 127 : 32767, r = -n - 1, i = e.length, o = new Int32Array(t.srcSize), a = 0, s = 0; i > a;) {
      for (var u = 0, l = e[a]; l === n || l === r;) u += l, a++, l = e[a];
      u += l, o[s] = u, a++, s++
     }
     return o
    }

    function b(e, t) {
     for (var n = 1 === t.byteCount ? 255 : 65535, r = e.length, i = new Int32Array(t.srcSize), o = 0, a = 0; r > o;) {
      for (var s = 0, u = e[o]; u === n;) s += u, o++, u = e[o];
      s += u, i[a] = s, o++, a++
     }
     return i
    }

    function w(e, t) {
     return t.isUnsigned ? b(e, t) : y(e, t)
    }

    function x(e, n) {
     for (var r = n.stringData, i = t({
       encoding: n.offsetEncoding,
       data: n.offsets
      }), o = t({
       encoding: n.dataEncoding,
       data: e
      }), a = new Map, s = new Array(o.length), u = 0, l = 0, c = o; l < c.length; l++) {
      var h = c[l];
      if (0 > h) s[u++] = null;
      else {
       var p = a.get(h);
       void 0 === p && (p = r.substring(i[h], i[h + 1]), a.set(h, p)), s[u++] = p
      }
     }
     return s
    }
    e.decodeStep = n;
    var _ = function() {
     var e = new ArrayBuffer(2),
      t = new Uint8Array(e),
      n = new Uint16Array(e);
     return t[0] = 170, t[1] = 187, 48042 === n[0] ? !0 : !1
    }()
   }(n || (n = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   function n(n) {
    if (!n.data.data) return e.UndefinedColumn;
    var r = t.decode(n.data),
     i = void 0;
    return n.mask && (i = t.decode(n.mask)), r.buffer && r.byteLength && r.BYTES_PER_ELEMENT ? i ? new l(r, i) : new u(r) : i ? new h(r, i) : new c(r)
   }
   var r = function() {
    function e(e) {
     this.dataBlocks = e.dataBlocks.map(function(e) {
      return new i(e)
     })
    }
    return e.prototype.toJSON = function() {
     return this.dataBlocks.map(function(e) {
      return e.toJSON()
     })
    }, e
   }();
   t.File = r;
   var i = function() {
    function e(e) {
     this.additionalData = {}, this.header = e.header, this.categoryList = e.categories.map(function(e) {
      return new o(e)
     }), this.categoryMap = new Map;
     for (var t = 0, n = this.categoryList; t < n.length; t++) {
      var r = n[t];
      this.categoryMap.set(r.name, r)
     }
    }
    return Object.defineProperty(e.prototype, "categories", {
     get: function() {
      return this.categoryList
     },
     enumerable: !0,
     configurable: !0
    }), e.prototype.getCategory = function(e) {
     return this.categoryMap.get(e)
    }, e.prototype.toJSON = function() {
     return {
      id: this.header,
      categories: this.categoryList.map(function(e) {
       return e.toJSON()
      }),
      additionalData: this.additionalData
     }
    }, e
   }();
   t.DataBlock = i;
   var o = function() {
    function t(e) {
     this.name = e.name, this.columnCount = e.columns.length, this.rowCount = e.rowCount, this.columnNameList = [], this.encodedColumns = new Map;
     for (var t = 0, n = e.columns; t < n.length; t++) {
      var r = n[t];
      this.encodedColumns.set(r.name, r), this.columnNameList.push(r.name)
     }
    }
    return Object.defineProperty(t.prototype, "columnNames", {
     get: function() {
      return this.columnNameList
     },
     enumerable: !0,
     configurable: !0
    }), t.prototype.getColumn = function(t) {
     var r = this.encodedColumns.get(t);
     return r ? n(r) : e.UndefinedColumn
    }, t.prototype.toJSON = function() {
     for (var e = this, t = [], n = this.columnNameList.map(function(t) {
       return {
        name: t,
        column: e.getColumn(t)
       }
      }), r = 0; r < this.rowCount; r++) {
      for (var i = {}, o = 0, a = n; o < a.length; o++) {
       var s = a[o],
        u = s.column.getValuePresence(r);
       i[s.name] = 0 === u ? s.column.getString(r) : 1 === u ? "." : "?"
      }
      t[r] = i
     }
     return {
      name: this.name,
      columns: this.columnNames,
      rows: t
     }
    }, t
   }();
   t.Category = o;
   var a = e.Utils.FastNumberParsers.parseInt,
    s = e.Utils.FastNumberParsers.parseFloat,
    u = function() {
     function e(e) {
      this.data = e, this.isDefined = !0
     }
     return e.prototype.getString = function(e) {
      return "" + this.data[e]
     }, e.prototype.getInteger = function(e) {
      return 0 | this.data[e]
     }, e.prototype.getFloat = function(e) {
      return 1 * this.data[e]
     }, e.prototype.stringEquals = function(e, t) {
      return this.data[e] === s(t, 0, t.length)
     }, e.prototype.areValuesEqual = function(e, t) {
      return this.data[e] === this.data[t]
     }, e.prototype.getValuePresence = function() {
      return 0
     }, e
    }(),
    l = function() {
     function e(e, t) {
      this.data = e, this.mask = t, this.isDefined = !0
     }
     return e.prototype.getString = function(e) {
      return 0 === this.mask[e] ? "" + this.data[e] : null
     }, e.prototype.getInteger = function(e) {
      return 0 === this.mask[e] ? this.data[e] : 0
     }, e.prototype.getFloat = function(e) {
      return 0 === this.mask[e] ? this.data[e] : 0
     }, e.prototype.stringEquals = function(e, t) {
      return 0 === this.mask[e] ? this.data[e] === s(t, 0, t.length) : null === t || void 0 === t
     }, e.prototype.areValuesEqual = function(e, t) {
      return this.data[e] === this.data[t]
     }, e.prototype.getValuePresence = function(e) {
      return this.mask[e]
     }, e
    }(),
    c = function() {
     function e(e) {
      this.data = e, this.isDefined = !0
     }
     return e.prototype.getString = function(e) {
      return this.data[e]
     }, e.prototype.getInteger = function(e) {
      var t = this.data[e];
      return a(t, 0, t.length)
     }, e.prototype.getFloat = function(e) {
      var t = this.data[e];
      return s(t, 0, t.length)
     }, e.prototype.stringEquals = function(e, t) {
      return this.data[e] === t
     }, e.prototype.areValuesEqual = function(e, t) {
      return this.data[e] === this.data[t]
     }, e.prototype.getValuePresence = function() {
      return 0
     }, e
    }(),
    h = function() {
     function e(e, t) {
      this.data = e, this.mask = t, this.isDefined = !0
     }
     return e.prototype.getString = function(e) {
      return 0 === this.mask[e] ? this.data[e] : null
     }, e.prototype.getInteger = function(e) {
      if (0 !== this.mask[e]) return 0;
      var t = this.data[e];
      return a(t || "", 0, (t || "").length)
     }, e.prototype.getFloat = function(e) {
      if (0 !== this.mask[e]) return 0;
      var t = this.data[e];
      return s(t || "", 0, (t || "").length)
     }, e.prototype.stringEquals = function(e, t) {
      return this.data[e] === t
     }, e.prototype.areValuesEqual = function(e, t) {
      return this.data[e] === this.data[t]
     }, e.prototype.getValuePresence = function(e) {
      return this.mask[e]
     }, e
    }()
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   var n = function() {
    function e(e) {
     this.providers = e
    }
    return e.prototype.and = function(t) {
     return new e(this.providers.concat([t]))
    }, e.prototype.encode = function(e) {
     for (var t = [], n = 0, r = this.providers; n < r.length; n++) {
      var i = r[n],
       o = i(e);
      if (!o.encodings.length) throw new Error("Encodings must be non-empty.");
      e = o.data;
      for (var a = 0, s = o.encodings; a < s.length; a++) {
       var u = s[a];
       t.push(u)
      }
     }
     if (!(e instanceof Uint8Array)) throw new Error("The encoding must result in a Uint8Array. Fix your encoding chain.");
     return {
      encoding: t,
      data: e
     }
    }, e
   }();
   t.Encoder = n;
   var n;
   ! function(n) {
    function r(e) {
     return new n([e])
    }

    function i(e) {
     return {
      encodings: [{
       kind: "ByteArray",
       type: 4
      }],
      data: e
     }
    }

    function o(e) {
     return {
      encodings: [{
       kind: "ByteArray",
       type: 1
      }],
      data: new Uint8Array(e.buffer, e.byteOffset)
     }
    }

    function a(e) {
     var n = t.Encoding.getDataType(e);
     if (1 === n) return o(e);
     if (4 === n) return i(e);
     for (var r = new Uint8Array(e.length * w[n]), a = b[n], s = new DataView(r.buffer), u = 0, l = e.length; l > u; u++) a(s, u, e[u]);
     return {
      encodings: [{
       kind: "ByteArray",
       type: n
      }],
      data: r
     }
    }

    function s(e, n) {
     for (var r = t.Encoding.getDataType(e), i = new Int32Array(e.length), o = 0, a = e.length; a > o; o++) i[o] = Math.round(e[o] * n);
     return {
      encodings: [{
       kind: "FixedPoint",
       factor: n,
       srcType: r
      }],
      data: i
     }
    }

    function u(e) {
     return function(t) {
      return s(t, e)
     }
    }

    function l(e, n, r, i) {
     var o = t.Encoding.getDataType(e);
     if (!e.length) return {
      encodings: [{
       kind: "IntervalQuantization",
       min: n,
       max: r,
       numSteps: i,
       srcType: o
      }],
      data: new Int32Array(0)
     };
     if (n > r) {
      var a = n;
      n = r, r = a
     }
     for (var s = (r - n) / (i - 1), u = new Int32Array(e.length), l = 0, c = e.length; c > l; l++) {
      var h = e[l];
      u[l] = n >= h ? 0 : h >= r ? i : 0 | Math.round((h - n) / s)
     }
     return {
      encodings: [{
       kind: "IntervalQuantization",
       min: n,
       max: r,
       numSteps: i,
       srcType: o
      }],
      data: u
     }
    }

    function c(e, t, n) {
     return function(r) {
      return l(r, e, t, n)
     }
    }

    function h(e) {
     var n = t.Encoding.getDataType(e);
     if (void 0 === n && (e = new Int32Array(e), n = 3), !e.length) return {
      encodings: [{
       kind: "RunLength",
       srcType: n,
       srcSize: 0
      }],
      data: new Int32Array(0)
     };
     for (var r = 2, i = 1, o = e.length; o > i; i++) e[i - 1] !== e[i] && (r += 2);
     for (var a = new Int32Array(r), s = 0, u = 1, i = 1, o = e.length; o > i; i++) e[i - 1] !== e[i] ? (a[s] = e[i - 1], a[s + 1] = u, u = 1, s += 2) : ++u;
     return a[s] = e[e.length - 1], a[s + 1] = u, {
      encodings: [{
       kind: "RunLength",
       srcType: n,
       srcSize: e.length
      }],
      data: a
     }
    }

    function p(e) {
     if (!t.Encoding.isSignedIntegerDataType(e)) throw new Error("Only signed integer types can be encoded using delta encoding.");
     var n = t.Encoding.getDataType(e);
     if (void 0 === n && (e = new Int32Array(e), n = 3), !e.length) return {
      encodings: [{
       kind: "Delta",
       origin: 0,
       srcType: n
      }],
      data: new e.constructor(0)
     };
     var r = new e.constructor(e.length),
      i = e[0];
     r[0] = e[0];
     for (var o = 1, a = e.length; a > o; o++) r[o] = e[o] - e[o - 1];
     return r[0] = 0, {
      encodings: [{
       kind: "Delta",
       origin: i,
       srcType: n
      }],
      data: r
     }
    }

    function d(e) {
     for (var t = 0, n = e.length; n > t; t++)
      if (e[t] < 0) return !0;
     return !1
    }

    function f(e, t) {
     for (var n = -t - 1, r = 0, i = 0, o = e.length; o > i; i++) {
      var a = e[i];
      r += 0 === a ? 1 : a === t || a === n ? 2 : a > 0 ? Math.ceil(a / t) : Math.ceil(a / n)
     }
     return r
    }

    function m(e) {
     var t = d(e),
      n = t ? f(e, 127) : f(e, 255),
      r = t ? f(e, 32767) : f(e, 65535);
     return 4 * e.length < 2 * r ? {
      isSigned: t,
      size: e.length,
      bytesPerElement: 4
     } : n > 2 * r ? {
      isSigned: t,
      size: r,
      bytesPerElement: 2
     } : {
      isSigned: t,
      size: n,
      bytesPerElement: 1
     }
    }

    function g(e, t) {
     for (var n = t.isSigned ? 1 === t.bytesPerElement ? 127 : 32767 : 1 === t.bytesPerElement ? 255 : 65535, r = -n - 1, i = e.length, o = t.isSigned ? 1 === t.bytesPerElement ? new Int8Array(t.size) : new Int16Array(t.size) : 1 === t.bytesPerElement ? new Uint8Array(t.size) : new Uint16Array(t.size), s = 0, u = 0; i > u; u++) {
      var l = e[u];
      if (l >= 0)
       for (; l >= n;) o[s] = n, ++s, l -= n;
      else
       for (; r >= l;) o[s] = r, ++s, l -= r;
      o[s] = l, ++s
     }
     var c = a(o);
     return {
      encodings: [{
       kind: "IntegerPacking",
       byteCount: t.bytesPerElement,
       isUnsigned: !t.isSigned,
       srcSize: i
      }, c.encodings[0]],
      data: c.data
     }
    }

    function v(e) {
     if (!(e instanceof Int32Array)) throw new Error("Integer packing can only be applied to Int32 data.");
     var t = m(e);
     return 4 === t.bytesPerElement ? a(e) : g(e, t)
    }

    function y(t) {
     var r = new Map,
      i = [],
      o = 0,
      a = e.Utils.ChunkedArray.create(function(e) {
       return new Int32Array(e)
      }, 1024, 1),
      s = new Int32Array(t.length);
     e.Utils.ChunkedArray.add(a, 0);
     for (var u = 0, l = 0, c = t; l < c.length; l++) {
      var d = c[l];
      if (null !== d && void 0 !== d) {
       var f = r.get(d);
       void 0 === f && (o += d.length, f = i.length, i[f] = d, r.set(d, f), e.Utils.ChunkedArray.add(a, o)), s[u++] = f
      } else s[u++] = -1
     }
     var m = n.by(p).and(v).encode(e.Utils.ChunkedArray.compact(a)),
      g = n.by(p).and(h).and(v).encode(s);
     return {
      encodings: [{
       kind: "StringArray",
       dataEncoding: g.encoding,
       stringData: i.join(""),
       offsetEncoding: m.encoding,
       offsets: m.data
      }],
      data: g.data
     }
    }
    n.by = r;
    var b = (x = {}, x[2] = function(e, t, n) {
      e.setInt16(2 * t, n, !0)
     }, x[5] = function(e, t, n) {
      e.setUint16(2 * t, n, !0)
     }, x[3] = function(e, t, n) {
      e.setInt32(4 * t, n, !0)
     }, x[6] = function(e, t, n) {
      e.setUint32(4 * t, n, !0)
     }, x[32] = function(e, t, n) {
      e.setFloat32(4 * t, n, !0)
     }, x[33] = function(e, t, n) {
      e.setFloat64(8 * t, n, !0)
     }, x),
     w = (_ = {}, _[2] = 2, _[5] = 2, _[3] = 4, _[6] = 4, _[32] = 4, _[33] = 8, _);
    n.byteArray = a, n.fixedPoint = u, n.intervalQuantizaiton = c, n.runLength = h, n.delta = p, n.integerPacking = v, n.stringArray = y;
    var x, _
   }(n = t.Encoder || (t.Encoder = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   e.VERSION = "0.3.0";
   var t;
   ! function(e) {
    function t(e) {
     var t;
     if (e instanceof Int8Array) t = 1;
     else if (e instanceof Int16Array) t = 2;
     else if (e instanceof Int32Array) t = 3;
     else if (e instanceof Uint8Array) t = 4;
     else if (e instanceof Uint16Array) t = 5;
     else if (e instanceof Uint32Array) t = 6;
     else if (e instanceof Float32Array) t = 32;
     else {
      if (!(e instanceof Float64Array)) throw new Error("Unsupported integer data type.");
      t = 33
     }
     return t
    }

    function n(e) {
     return e instanceof Int8Array || e instanceof Int16Array || e instanceof Int32Array
    }
    e.getDataType = t, e.isSignedIntegerDataType = n
   }(t = e.Encoding || (e.Encoding = {}))
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(t) {
   function n(e, t) {
    for (var n = 0; 2 > n; n++)
     if (e[n] > t[n]) return !1;
    return !0
   }

   function r(r) {
    var i = [0, 3];
    try {
     var o = new Uint8Array(r),
      a = t.MessagePack.decode(o);
     if (!n(i, a.version.match(/(\d)\.(\d)\.\d/).slice(1))) return e.ParserResult.error("Unsupported format version. Current " + a.version + ", required " + i.join(".") + ".");
     var s = new t.File(a);
     return e.ParserResult.success(s)
    } catch (u) {
     return e.ParserResult.error("" + u)
    }
   }
   t.parse = r
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var i;
 ! function(e) {
  var t;
  ! function(e) {
   function t(t, n, r) {
    var i, o = !1;
    t.typedArray ? i = new t.typedArray(r) : (o = !0, i = new Array(r));
    for (var a = new Uint8Array(r), s = t.presence, u = t.number ? t.number : t.string, l = !0, c = 0, h = 0, p = n; h < p.length; h++)
     for (var d = p[h], f = d.data, m = 0, g = d.count; g > m; m++) {
      var v = void 0;
      s && 0 !== (v = s(f, m)) ? (a[c] = v, o && (i[c] = null), l = !1) : (a[c] = 0, i[c] = u(f, m)), c++
     }
    var y = t.encoder ? t.encoder : e.Encoder.by(e.Encoder.stringArray),
     b = y.encode(i),
     w = void 0;
    if (!l) {
     var x = e.Encoder.by(e.Encoder.runLength).and(e.Encoder.byteArray).encode(a);
     w = x.data.length < a.length ? x : e.Encoder.by(e.Encoder.byteArray).encode(a)
    }
    return {
     name: t.name,
     data: b,
     mask: w
    }
   }
   var n = function() {
    function n(t) {
     this.dataBlocks = [], this.data = {
      encoder: t,
      version: e.VERSION,
      dataBlocks: this.dataBlocks
     }
    }
    return n.prototype.startDataBlock = function(e) {
     this.dataBlocks.push({
      header: (e || "").replace(/[ \n\t]/g, "").toUpperCase(),
      categories: []
     })
    }, n.prototype.writeCategory = function(e, n) {
     if (!this.data) throw new Error("The writer contents have already been encoded, no more writing.");
     if (!this.dataBlocks.length) throw new Error("No data block created.");
     var r = n && n.length ? n.map(function(t) {
       return e(t)
      }) : [e(void 0)],
      i = r.filter(function(e) {
       return e && e.count > 0
      });
     if (i.length) {
      var o = i.reduce(function(e, t) {
       return e + t.count
      }, 0);
      if (o) {
       for (var a = i[0], s = {
         name: a.desc.name,
         columns: [],
         rowCount: o
        }, u = i.map(function(e) {
         return {
          data: e.data,
          count: e.count
         }
        }), l = 0, c = a.desc.fields; l < c.length; l++) {
        var h = c[l];
        s.columns.push(t(h, u, o))
       }
       this.dataBlocks[this.dataBlocks.length - 1].categories.push(s)
      }
     }
    }, n.prototype.encode = function() {
     this.encodedData = e.MessagePack.encode(this.data), this.data = null, this.dataBlocks = null
    }, n.prototype.flush = function(e) {
     e.writeBinary(this.encodedData)
    }, n
   }();
   e.Writer = n
  }(t = e.Binary || (e.Binary = {}))
 }(i || (i = {}));
 var o = {};
 (function(e, t, n) {
  function r(e) {
   return e && e.Object === Object ? e : null
  }

  function i(e) {
   for (var t = e.length, n = new Array(t), r = 0; t > r; r++) n[r] = e[r];
   return n
  }

  function o(e) {
   return function() {
    try {
     return e.apply(this, arguments)
    } catch (t) {
     return St.e = t, St
    }
   }
  }

  function a(e) {
   throw e
  }

  function s(e, t) {
   if (Et && t.stack && "object" == typeof e && null !== e && e.stack && -1 === e.stack.indexOf(Pt)) {
    for (var n = [], r = t; r; r = r.source) r.stack && n.unshift(r.stack);
    n.unshift(e.stack);
    var i = n.join("\n" + Pt + "\n");
    e.stack = u(i)
   }
  }

  function u(e) {
   for (var t = e.split("\n"), n = [], r = 0, i = t.length; i > r; r++) {
    var o = t[r];
    l(o) || c(o) || !o || n.push(o)
   }
   return n.join("\n")
  }

  function l(e) {
   var t = p(e);
   if (!t) return !1;
   var n = t[0],
    r = t[1];
   return n === Mt && r >= At && wo >= r
  }

  function c(e) {
   return -1 !== e.indexOf("(module.js:") || -1 !== e.indexOf("(node.js:")
  }

  function h() {
   if (Et) try {
    throw new Error
   } catch (e) {
    var t = e.stack.split("\n"),
     n = t[0].indexOf("@") > 0 ? t[1] : t[2],
     r = p(n);
    if (!r) return;
    return Mt = r[0], r[1]
   }
  }

  function p(e) {
   var t = /at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);
   if (t) return [t[1], Number(t[2])];
   var n = /at ([^ ]+):(\d+):(?:\d+)$/.exec(e);
   if (n) return [n[1], Number(n[2])];
   var r = /.*@(.+):(\d+)$/.exec(e);
   return r ? [r[1], Number(r[2])] : void 0
  }

  function d(e, t, r, i, o, a) {
   var s = vn(e),
    u = s.length,
    l = vn(t),
    c = l.length;
   if (u !== c && !i) return !1;
   for (var h, p = u; p--;)
    if (h = s[p], !(i ? h in t : fn.call(t, h))) return !1;
   for (var d = i; ++p < u;) {
    h = s[p];
    var f, m = e[h],
     g = t[h];
    if (!(f === n ? r(m, g, i, o, a) : f)) return !1;
    d || (d = "constructor" === h)
   }
   if (!d) {
    var v = e.constructor,
     y = t.constructor;
    if (v !== y && "constructor" in e && "constructor" in t && !("function" == typeof v && v instanceof v && "function" == typeof y && y instanceof y)) return !1
   }
   return !0
  }

  function f(e, t, n) {
   switch (n) {
    case jt:
    case qt:
     return +e === +t;
    case Wt:
     return e.name === t.name && e.message === t.message;
    case Qt:
     return e !== +e ? t !== +t : e === +t;
    case Kt:
    case Jt:
     return e === t + ""
   }
   return !1
  }

  function m(e) {
   return !!e && "object" == typeof e
  }

  function g(e) {
   return "number" == typeof e && e > -1 && e % 1 === 0 && gn >= e
  }

  function v(e) {
   return m(e) && g(e.length) && !!pn[mn.call(e)]
  }

  function y(e, t) {
   for (var n = -1, r = e.length; ++n < r;)
    if (t(e[n], n, e)) return !0;
   return !1
  }

  function b(e, t, r, i, o, a) {
   var s = -1,
    u = e.length,
    l = t.length;
   if (u !== l && !(i && l > u)) return !1;
   for (; ++s < u;) {
    var c, h = e[s],
     p = t[s];
    if (c !== n) {
     if (c) continue;
     return !1
    }
    if (i) {
     if (!y(t, function(e) {
       return h === e || r(h, e, i, o, a)
      })) return !1
    } else if (h !== p && !r(h, p, i, o, a)) return !1
   }
   return !0
  }

  function w(e, t, n, r, i, o) {
   var a = wn(e),
    s = wn(t),
    u = Ht,
    l = Ht;
   a || (u = mn.call(e), u === Gt ? u = Zt : u !== Zt && (a = v(e))), s || (l = mn.call(t), l === Gt && (l = Zt));
   var c = u === Zt && !bn(e),
    h = l === Zt && !bn(t),
    p = u === l;
   if (p && !a && !c) return f(e, t, u);
   if (!r) {
    var m = c && fn.call(e, "__wrapped__"),
     g = h && fn.call(t, "__wrapped__");
    if (m || g) return n(m ? e.value() : e, g ? t.value() : t, r, i, o)
   }
   if (!p) return !1;
   i || (i = []), o || (o = []);
   for (var y = i.length; y--;)
    if (i[y] === e) return o[y] === t;
   i.push(e), o.push(t);
   var w = (a ? b : d)(e, t, n, r, i, o);
   return i.pop(), o.pop(), w
  }

  function x(e, t, n, r, i) {
   return e === t ? !0 : null == e || null == t || !yn(e) && !m(t) ? e !== e && t !== t : w(e, t, x, n, r, i)
  }

  function _(e, t) {
   for (var n = new Array(e), r = 0; e > r; r++) n[r] = t();
   return n
  }

  function S(e, t) {
   this.id = e, this.value = t
  }

  function C(e) {
   this._s = e, this.isDisposed = !1
  }

  function E(e) {
   this._s = e
  }

  function T(e) {
   this._s = e, this._l = e.length, this._i = 0
  }

  function M(e) {
   this._a = e
  }

  function A(e) {
   this._a = e, this._l = k(e), this._i = 0
  }

  function P(e) {
   return "number" == typeof e && dt.isFinite(e)
  }

  function R(e) {
   var t, r = e[Bt];
   if (!r && "string" == typeof e) return t = new E(e), t[Bt]();
   if (!r && e.length !== n) return t = new M(e), t[Bt]();
   if (!r) throw new TypeError("Object is not iterable");
   return e[Bt]()
  }

  function I(e) {
   var t = +e;
   return 0 === t ? t : isNaN(t) ? t : 0 > t ? -1 : 1
  }

  function k(e) {
   var t = +e.length;
   return isNaN(t) ? 0 : 0 !== t && P(t) ? (t = I(t) * Math.floor(Math.abs(t)), 0 >= t ? 0 : t > Pr ? Pr : t) : t
  }

  function D(e, t) {
   return Fn(e) || (e = qn), new Ir(t, e)
  }

  function V(e, t) {
   this.observer = e, this.parent = t
  }

  function L() {
   return !1
  }

  function B() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   return t
  }

  function L() {
   return !1
  }

  function B() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   return t
  }

  function L() {
   return !1
  }

  function O() {
   return []
  }

  function L() {
   return !1
  }

  function O() {
   return []
  }

  function B() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   return t
  }

  function N(e) {
   return function(t) {
    return e.subscribe(t)
   }
  }

  function F(e) {
   return {
    "@@iterator": function() {
     return {
      next: function() {
       return {
        done: !1,
        value: e
       }
      }
     }
    }
   }
  }

  function F(e) {
   return {
    "@@iterator": function() {
     return {
      next: function() {
       return {
        done: !1,
        value: e
       }
      }
     }
    }
   }
  }

  function U(e, t) {
   return function(r) {
    for (var i = r, o = 0; t > o; o++) {
     var a = i[e[o]];
     if ("undefined" == typeof a) return n;
     i = a
    }
    return i
   }
  }

  function z(e, t, n, r) {
   var i = new go;
   return r.push(G(i, t, n)), e.apply(t, r), i.asObservable()
  }

  function G(e, t, n) {
   return function() {
    for (var r = arguments.length, i = new Array(r), o = 0; r > o; o++) i[o] = arguments[o];
    if (_t(n)) {
     if (i = Ct(n).apply(t, i), i === St) return e.onError(i.e);
     e.onNext(i)
    } else i.length <= 1 ? e.onNext(i[0]) : e.onNext(i);
    e.onCompleted()
   }
  }

  function H(e, t, n, r) {
   var i = new go;
   return r.push(j(i, t, n)), e.apply(t, r), i.asObservable()
  }

  function j(e, t, n) {
   return function() {
    var r = arguments[0];
    if (r) return e.onError(r);
    for (var i = arguments.length, o = [], a = 1; i > a; a++) o[a - 1] = arguments[a];
    if (_t(n)) {
     var o = Ct(n).apply(t, o);
     if (o === St) return e.onError(o.e);
     e.onNext(o)
    } else o.length <= 1 ? e.onNext(o[0]) : e.onNext(o);
    e.onCompleted()
   }
  }

  function q(e) {
   return dt.StaticNodeList ? e instanceof dt.StaticNodeList || e instanceof dt.NodeList : "[object NodeList]" === Object.prototype.toString.call(e)
  }

  function W(e, t, n) {
   this._e = e, this._n = t, this._fn = n, this._e.addEventListener(this._n, this._fn, !1), this.isDisposed = !1
  }

  function X(e, t, n) {
   var r = new Cn,
    i = Object.prototype.toString.call(e);
   if (q(e) || "[object HTMLCollection]" === i)
    for (var o = 0, a = e.length; a > o; o++) r.add(X(e.item(o), t, n));
   else e && r.add(new W(e, t, n));
   return r
  }

  function Y(e, t) {
   return new Zi(e, t)
  }

  function Q(e, t, n) {
   return new ho(function(r) {
    var i = e,
     o = Nn(t);
    return n.scheduleRecursiveFuture(0, i, function(e, t) {
     if (o > 0) {
      var a = n.now();
      i = new Date(i.getTime() + o), i.getTime() <= a && (i = new Date(a + o))
     }
     r.onNext(e), t(e + 1, new Date(i))
    })
   })
  }

  function Z(e, t, n) {
   return e === t ? new ho(function(e) {
    return n.schedulePeriodic(0, t, function(t) {
     return e.onNext(t), t + 1
    })
   }) : Cr(function() {
    return Q(new Date(n.now() + e), t, n)
   })
  }

  function K(e, t, n) {
   return new ho(function(r) {
    var i, o = !1,
     a = new Dn,
     s = null,
     u = [],
     l = !1;
    return i = e.materialize().timestamp(n).subscribe(function(e) {
     var i, c;
     "E" === e.value.kind ? (u = [], u.push(e), s = e.value.error, c = !l) : (u.push({
      value: e.value,
      timestamp: e.timestamp + t
     }), c = !o, o = !0), c && (null !== s ? r.onError(s) : (i = new kn, a.setDisposable(i), i.setDisposable(n.scheduleRecursiveFuture(null, t, function(e, t) {
      var i, a, c, h;
      if (null === s) {
       l = !0;
       do c = null, u.length > 0 && u[0].timestamp - n.now() <= 0 && (c = u.shift().value), null !== c && c.accept(r); while (null !== c);
       h = !1, a = 0, u.length > 0 ? (h = !0, a = Math.max(0, u[0].timestamp - n.now())) : o = !1, i = s, l = !1, null !== i ? r.onError(i) : h && t(null, a)
      }
     }))))
    }), new Vn(i, a)
   }, e)
  }

  function $(e, t, n) {
   return Cr(function() {
    return K(e, t - n.now(), n)
   })
  }

  function J(e, t, n) {
   var r, i;
   return _t(t) ? i = t : (r = t, i = n), new ho(function(t) {
    function n() {
     u.setDisposable(e.subscribe(function(e) {
      var n = Ct(i)(e);
      if (n === St) return t.onError(n.e);
      var r = new kn;
      a.add(r), r.setDisposable(n.subscribe(function() {
       t.onNext(e), a.remove(r), o()
      }, function(e) {
       t.onError(e)
      }, function() {
       t.onNext(e), a.remove(r), o()
      }))
     }, function(e) {
      t.onError(e)
     }, function() {
      s = !0, u.dispose(), o()
     }))
    }

    function o() {
     s && 0 === a.length && t.onCompleted()
    }
    var a = new Cn,
     s = !1,
     u = new Dn;
    return r ? u.setDisposable(r.subscribe(n, function(e) {
     t.onError(e)
    }, n)) : n(), new Vn(u, a)
   }, e)
  }

  function et(e, t) {
   return new ho(function(n) {
    var r, i = !1,
     o = new Dn,
     a = 0,
     s = e.subscribe(function(e) {
      var s = Ct(t)(e);
      if (s === St) return n.onError(s.e);
      xt(s) && (s = Wi(s)), i = !0, r = e, a++;
      var u = a,
       l = new kn;
      o.setDisposable(l), l.setDisposable(s.subscribe(function() {
       i && a === u && n.onNext(r), i = !1, l.dispose()
      }, function(e) {
       n.onError(e)
      }, function() {
       i && a === u && n.onNext(r), i = !1, l.dispose()
      }))
     }, function(e) {
      o.dispose(), n.onError(e), i = !1, a++
     }, function() {
      o.dispose(), i && n.onNext(r), n.onCompleted(), i = !1, a++
     });
    return new Vn(s, o)
   }, e)
  }

  function tt(e, t, n, r) {
   return _t(t) && (r = n, n = t, t = Lr()), hr.isObservable(r) || (r = zr(new oo)), new ho(function(i) {
    function o(e) {
     function t() {
      return h = n === c
     }
     var n = c,
      o = new kn;
     u.setDisposable(o), o.setDisposable(e.subscribe(function() {
      t() && s.setDisposable(r.subscribe(i)), o.dispose()
     }, function(e) {
      t() && i.onError(e)
     }, function() {
      t() && s.setDisposable(r.subscribe(i))
     }))
    }

    function a() {
     var e = !h;
     return e && c++, e
    }
    var s = new Dn,
     u = new Dn,
     l = new kn;
    s.setDisposable(l);
    var c = 0,
     h = !1;
    return o(t), l.setDisposable(e.subscribe(function(e) {
     if (a()) {
      i.onNext(e);
      var t = Ct(n)(e);
      if (t === St) return i.onError(t.e);
      o(xt(t) ? Wi(t) : t)
     }
    }, function(e) {
     a() && i.onError(e)
    }, function() {
     a() && i.onCompleted()
    })), new Vn(s, u)
   }, e)
  }

  function nt(e, t, n, r) {
   return Fn(n) && (r = n, n = zr(new oo)), n instanceof Error && (n = zr(n)), Fn(r) || (r = Zn), hr.isObservable(n) || (n = zr(new oo)), new ho(function(i) {
    function o() {
     var e = a;
     c.setDisposable(r.scheduleFuture(null, t, function() {
      l = a === e, l && (xt(n) && (n = Wi(n)), u.setDisposable(n.subscribe(i)))
     }))
    }
    var a = 0,
     s = new kn,
     u = new Dn,
     l = !1,
     c = new Dn;
    return u.setDisposable(s), o(), s.setDisposable(e.subscribe(function(e) {
     l || (a++, i.onNext(e), o())
    }, function(e) {
     l || (a++, i.onError(e))
    }, function() {
     l || (a++, i.onCompleted())
    })), new Vn(u, c)
   }, e)
  }

  function rt(e, t, n) {
   return new ho(function(r) {
    function i(e, t) {
     if (l[t] = e, a[t] = !0, s || (s = a.every(gt))) {
      if (o) return r.onError(o);
      var i = Ct(n).apply(null, l);
      if (i === St) return r.onError(i.e);
      r.onNext(i)
     }
     u && l[1] && r.onCompleted()
    }
    var o, a = [!1, !1],
     s = !1,
     u = !1,
     l = new Array(2);
    return new Vn(e.subscribe(function(e) {
     i(e, 0)
    }, function(e) {
     l[1] ? r.onError(e) : o = e
    }, function() {
     u = !0, l[1] && r.onCompleted()
    }), t.subscribe(function(e) {
     i(e, 1)
    }, function(e) {
     r.onError(e)
    }, function() {
     u = !0, i(!0, 1)
    }))
   }, e)
  }

  function it(e) {
   return {
    "@@transducer/init": function() {
     return e
    },
    "@@transducer/step": function(e, t) {
     return e.onNext(t)
    },
    "@@transducer/result": function(e) {
     return e.onCompleted()
    }
   }
  }
  var ot = {
    "function": !0,
    object: !0
   },
   at = ot[typeof exports] && exports && !exports.nodeType ? exports : null,
   st = ot[typeof module] && module && !module.nodeType ? module : null,
   ut = r(at && st && "object" == typeof global && global),
   lt = r(ot[typeof self] && self),
   ct = r(ot[typeof window] && window),
   ht = st && st.exports === at ? at : null,
   pt = r(ot[typeof this] && this),
   dt = ut || ct !== (pt && pt.window) && ct || lt || pt || Function("return this")(),
   ft = {
    internals: {},
    config: {
     Promise: t
    },
    helpers: {}
   },
   mt = ft.helpers.noop = function() {},
   gt = ft.helpers.identity = function(e) {
    return e
   },
   vt = ft.helpers.defaultNow = Date.now,
   yt = ft.helpers.defaultComparer = function(e, t) {
    return xn(e, t)
   },
   bt = ft.helpers.defaultSubComparer = function(e, t) {
    return e > t ? 1 : t > e ? -1 : 0
   },
   wt = (ft.helpers.defaultKeySerializer = function(e) {
    return e.toString()
   }, ft.helpers.defaultError = function(e) {
    throw e
   }),
   xt = ft.helpers.isPromise = function(e) {
    return !!e && "function" != typeof e.subscribe && "function" == typeof e.then
   },
   _t = ft.helpers.isFunction = function() {
    var e = function(e) {
     return "function" == typeof e || !1
    };
    return e(/x/) && (e = function(e) {
     return "function" == typeof e && "[object Function]" == toString.call(e)
    }), e
   }(),
   St = {
    e: {}
   },
   Ct = ft.internals.tryCatch = function(e) {
    if (!_t(e)) throw new TypeError("fn must be a function");
    return o(e)
   };
  ft.config.longStackSupport = !1;
  var Et = !1,
   Tt = Ct(function() {
    throw new Error
   })();
  Et = !!Tt.e && !!Tt.e.stack;
  var Mt, At = h(),
   Pt = "From previous event:",
   Rt = ft.EmptyError = function() {
    this.message = "Sequence contains no elements.", Error.call(this)
   };
  Rt.prototype = Object.create(Error.prototype), Rt.prototype.name = "EmptyError";
  var It = ft.ObjectDisposedError = function() {
   this.message = "Object has been disposed", Error.call(this)
  };
  It.prototype = Object.create(Error.prototype), It.prototype.name = "ObjectDisposedError";
  var kt = ft.ArgumentOutOfRangeError = function() {
   this.message = "Argument out of range", Error.call(this)
  };
  kt.prototype = Object.create(Error.prototype), kt.prototype.name = "ArgumentOutOfRangeError";
  var Dt = ft.NotSupportedError = function(e) {
   this.message = e || "This operation is not supported", Error.call(this)
  };
  Dt.prototype = Object.create(Error.prototype), Dt.prototype.name = "NotSupportedError";
  var Vt = ft.NotImplementedError = function(e) {
   this.message = e || "This operation is not implemented", Error.call(this)
  };
  Vt.prototype = Object.create(Error.prototype), Vt.prototype.name = "NotImplementedError";
  var Lt = ft.helpers.notImplemented = function() {
    throw new Vt
   },
   Bt = (ft.helpers.notSupported = function() {
    throw new Dt
   }, "function" == typeof Symbol && Symbol.iterator || "_es6shim_iterator_");
  dt.Set && "function" == typeof(new dt.Set)["@@iterator"] && (Bt = "@@iterator");
  var Ot = ft.doneEnumerator = {
    done: !0,
    value: n
   },
   Nt = ft.helpers.isIterable = function(e) {
    return e && e[Bt] !== n
   },
   Ft = ft.helpers.isArrayLike = function(e) {
    return e && e.length !== n
   };
  ft.helpers.iterator = Bt;
  var Ut = ft.internals.bindCallback = function(e, t, n) {
    if ("undefined" == typeof t) return e;
    switch (n) {
     case 0:
      return function() {
       return e.call(t)
      };
     case 1:
      return function(n) {
       return e.call(t, n)
      };
     case 2:
      return function(n, r) {
       return e.call(t, n, r)
      };
     case 3:
      return function(n, r, i) {
       return e.call(t, n, r, i)
      }
    }
    return function() {
     return e.apply(t, arguments)
    }
   },
   zt = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
   Gt = (zt.length, "[object Arguments]"),
   Ht = "[object Array]",
   jt = "[object Boolean]",
   qt = "[object Date]",
   Wt = "[object Error]",
   Xt = "[object Function]",
   Yt = "[object Map]",
   Qt = "[object Number]",
   Zt = "[object Object]",
   Kt = "[object RegExp]",
   $t = "[object Set]",
   Jt = "[object String]",
   en = "[object WeakMap]",
   tn = "[object ArrayBuffer]",
   nn = "[object Float32Array]",
   rn = "[object Float64Array]",
   on = "[object Int8Array]",
   an = "[object Int16Array]",
   sn = "[object Int32Array]",
   un = "[object Uint8Array]",
   ln = "[object Uint8ClampedArray]",
   cn = "[object Uint16Array]",
   hn = "[object Uint32Array]",
   pn = {};
  pn[nn] = pn[rn] = pn[on] = pn[an] = pn[sn] = pn[un] = pn[ln] = pn[cn] = pn[hn] = !0, pn[Gt] = pn[Ht] = pn[tn] = pn[jt] = pn[qt] = pn[Wt] = pn[Xt] = pn[Yt] = pn[Qt] = pn[Zt] = pn[Kt] = pn[$t] = pn[Jt] = pn[en] = !1;
  var dn = Object.prototype,
   fn = dn.hasOwnProperty,
   mn = dn.toString,
   gn = Math.pow(2, 53) - 1,
   vn = Object.keys || function() {
    var e = Object.prototype.hasOwnProperty,
     t = !{
      toString: null
     }.propertyIsEnumerable("toString"),
     n = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
     r = n.length;
    return function(i) {
     if ("object" != typeof i && ("function" != typeof i || null === i)) throw new TypeError("Object.keys called on non-object");
     var o, a, s = [];
     for (o in i) e.call(i, o) && s.push(o);
     if (t)
      for (a = 0; r > a; a++) e.call(i, n[a]) && s.push(n[a]);
     return s
    }
   }(),
   yn = ft.internals.isObject = function(e) {
    var t = typeof e;
    return !!e && ("object" === t || "function" === t)
   },
   bn = function() {
    try {
     Object({
      toString: 0
     } + "")
    } catch (e) {
     return function() {
      return !1
     }
    }
    return function(e) {
     return "function" != typeof e.toString && "string" == typeof(e + "")
    }
   }(),
   wn = Array.isArray || function(e) {
    return m(e) && g(e.length) && mn.call(e) === Ht
   },
   xn = ft.internals.isEqual = function(e, t) {
    return x(e, t)
   },
   _n = ({}.hasOwnProperty, Array.prototype.slice, ft.internals.inherits = function(e, t) {
    function n() {
     this.constructor = e
    }
    n.prototype = t.prototype, e.prototype = new n
   }),
   Sn = ft.internals.addProperties = function(e) {
    for (var t = [], n = 1, r = arguments.length; r > n; n++) t.push(arguments[n]);
    for (var i = 0, o = t.length; o > i; i++) {
     var a = t[i];
     for (var s in a) e[s] = a[s]
    }
   },
   Cn = (ft.internals.addRef = function(e, t) {
    return new ho(function(n) {
     return new Vn(t.getDisposable(), e.subscribe(n))
    })
   }, ft.CompositeDisposable = function() {
    var e, t, n = [];
    if (Array.isArray(arguments[0])) n = arguments[0];
    else
     for (t = arguments.length, n = new Array(t), e = 0; t > e; e++) n[e] = arguments[e];
    this.disposables = n, this.isDisposed = !1, this.length = n.length
   }),
   En = Cn.prototype;
  En.add = function(e) {
   this.isDisposed ? e.dispose() : (this.disposables.push(e), this.length++)
  }, En.remove = function(e) {
   var t = !1;
   if (!this.isDisposed) {
    var n = this.disposables.indexOf(e); - 1 !== n && (t = !0, this.disposables.splice(n, 1), this.length--, e.dispose())
   }
   return t
  }, En.dispose = function() {
   if (!this.isDisposed) {
    this.isDisposed = !0;
    for (var e = this.disposables.length, t = new Array(e), n = 0; e > n; n++) t[n] = this.disposables[n];
    for (this.disposables = [], this.length = 0, n = 0; e > n; n++) t[n].dispose()
   }
  };
  var Tn = ft.Disposable = function(e) {
   this.isDisposed = !1, this.action = e || mt
  };
  Tn.prototype.dispose = function() {
   this.isDisposed || (this.action(), this.isDisposed = !0)
  };
  var Mn = Tn.create = function(e) {
    return new Tn(e)
   },
   An = Tn.empty = {
    dispose: mt
   },
   Pn = Tn.isDisposable = function(e) {
    return e && _t(e.dispose)
   },
   Rn = Tn.checkDisposed = function(e) {
    if (e.isDisposed) throw new It
   },
   In = Tn._fixup = function(e) {
    return Pn(e) ? e : An
   },
   kn = ft.SingleAssignmentDisposable = function() {
    this.isDisposed = !1, this.current = null
   };
  kn.prototype.getDisposable = function() {
   return this.current
  }, kn.prototype.setDisposable = function(e) {
   if (this.current) throw new Error("Disposable has already been assigned");
   var t = this.isDisposed;
   !t && (this.current = e), t && e && e.dispose()
  }, kn.prototype.dispose = function() {
   if (!this.isDisposed) {
    this.isDisposed = !0;
    var e = this.current;
    this.current = null, e && e.dispose()
   }
  };
  var Dn = ft.SerialDisposable = function() {
   this.isDisposed = !1, this.current = null
  };
  Dn.prototype.getDisposable = function() {
   return this.current
  }, Dn.prototype.setDisposable = function(e) {
   var t = this.isDisposed;
   if (!t) {
    var n = this.current;
    this.current = e
   }
   n && n.dispose(), t && e && e.dispose()
  }, Dn.prototype.dispose = function() {
   if (!this.isDisposed) {
    this.isDisposed = !0;
    var e = this.current;
    this.current = null
   }
   e && e.dispose()
  };
  var Vn = ft.BinaryDisposable = function(e, t) {
   this._first = e, this._second = t, this.isDisposed = !1
  };
  Vn.prototype.dispose = function() {
   if (!this.isDisposed) {
    this.isDisposed = !0;
    var e = this._first;
    this._first = null, e && e.dispose();
    var t = this._second;
    this._second = null, t && t.dispose()
   }
  };
  var Ln = ft.NAryDisposable = function(e) {
   this._disposables = e, this.isDisposed = !1
  };
  Ln.prototype.dispose = function() {
   if (!this.isDisposed) {
    this.isDisposed = !0;
    for (var e = 0, t = this._disposables.length; t > e; e++) this._disposables[e].dispose();
    this._disposables.length = 0
   }
  };
  var Bn = (ft.RefCountDisposable = function() {
   function e(e) {
    this.disposable = e, this.disposable.count++, this.isInnerDisposed = !1
   }

   function t(e) {
    this.underlyingDisposable = e, this.isDisposed = !1, this.isPrimaryDisposed = !1, this.count = 0
   }
   return e.prototype.dispose = function() {
    this.disposable.isDisposed || this.isInnerDisposed || (this.isInnerDisposed = !0, this.disposable.count--, 0 === this.disposable.count && this.disposable.isPrimaryDisposed && (this.disposable.isDisposed = !0, this.disposable.underlyingDisposable.dispose()))
   }, t.prototype.dispose = function() {
    this.isDisposed || this.isPrimaryDisposed || (this.isPrimaryDisposed = !0, 0 === this.count && (this.isDisposed = !0, this.underlyingDisposable.dispose()))
   }, t.prototype.getDisposable = function() {
    return this.isDisposed ? An : new e(this)
   }, t
  }(), ft.internals.ScheduledItem = function(e, t, n, r, i) {
   this.scheduler = e, this.state = t, this.action = n, this.dueTime = r, this.comparer = i || bt, this.disposable = new kn
  });
  Bn.prototype.invoke = function() {
   this.disposable.setDisposable(this.invokeCore())
  }, Bn.prototype.compareTo = function(e) {
   return this.comparer(this.dueTime, e.dueTime)
  }, Bn.prototype.isCancelled = function() {
   return this.disposable.isDisposed
  }, Bn.prototype.invokeCore = function() {
   return In(this.action(this.scheduler, this.state))
  };
  var On = ft.Scheduler = function() {
    function e() {}
    e.isScheduler = function(t) {
     return t instanceof e
    };
    var t = e.prototype;
    return t.schedule = function() {
     throw new Vt
    }, t.scheduleFuture = function(t, n, r) {
     var i = n;
     return i instanceof Date && (i -= this.now()), i = e.normalize(i), 0 === i ? this.schedule(t, r) : this._scheduleFuture(t, i, r)
    }, t._scheduleFuture = function() {
     throw new Vt
    }, e.now = vt, e.prototype.now = vt, e.normalize = function(e) {
     return 0 > e && (e = 0), e
    }, e
   }(),
   Nn = On.normalize,
   Fn = On.isScheduler;
  ! function(e) {
   function t(e, t) {
    function n(t) {
     function r(e, t) {
      return a ? o.remove(u) : s = !0, i(t, n), An
     }
     var a = !1,
      s = !1,
      u = e.schedule(t, r);
     s || (o.add(u), a = !0)
    }
    var r = t[0],
     i = t[1],
     o = new Cn;
    return i(r, n), o
   }

   function n(e, t) {
    function n(t, r) {
     function a(e, t) {
      return s ? o.remove(l) : u = !0, i(t, n), An
     }
     var s = !1,
      u = !1,
      l = e.scheduleFuture(t, r, a);
     u || (o.add(l), s = !0)
    }
    var r = t[0],
     i = t[1],
     o = new Cn;
    return i(r, n), o
   }
   e.scheduleRecursive = function(e, n) {
    return this.schedule([e, n], t)
   }, e.scheduleRecursiveFuture = function(e, t, r) {
    return this.scheduleFuture([e, r], t, n)
   }
  }(On.prototype),
  function(e) {
   e.schedulePeriodic = function(e, t, n) {
    if ("undefined" == typeof dt.setInterval) throw new Dt;
    t = Nn(t);
    var r = e,
     i = dt.setInterval(function() {
      r = n(r)
     }, t);
    return Mn(function() {
     dt.clearInterval(i)
    })
   }
  }(On.prototype);
  var Un, zn, Gn = function(e) {
    function t() {
     e.call(this)
    }
    return _n(t, e), t.prototype.schedule = function(e, t) {
     return In(t(this, e))
    }, t
   }(On),
   Hn = On.immediate = new Gn,
   jn = function(e) {
    function t() {
     for (; r.length > 0;) {
      var e = r.dequeue();
      !e.isCancelled() && e.invoke()
     }
    }

    function n() {
     e.call(this)
    }
    var r;
    return _n(n, e), n.prototype.schedule = function(e, n) {
     var i = new Bn(this, e, n, this.now());
     if (r) r.enqueue(i);
     else {
      r = new Kn(4), r.enqueue(i);
      var o = Ct(t)();
      r = null, o === St && a(o.e)
     }
     return i.disposable
    }, n.prototype.scheduleRequired = function() {
     return !r
    }, n
   }(On),
   qn = On.currentThread = new jn,
   Wn = (ft.internals.SchedulePeriodicRecursive = function() {
    function e(e) {
     return function(t, n) {
      n(0, e._period);
      var r = Ct(e._action)(e._state);
      r === St && (e._cancel.dispose(), a(r.e)), e._state = r
     }
    }

    function t(e, t, n, r) {
     this._scheduler = e, this._state = t, this._period = n, this._action = r
    }
    return t.prototype.start = function() {
     var t = new kn;
     return this._cancel = t, t.setDisposable(this._scheduler.scheduleRecursiveFuture(0, this._period, e(this))), t
    }, t
   }(), function() {
    var e, t = mt;
    if (dt.setTimeout) e = dt.setTimeout, t = dt.clearTimeout;
    else {
     if (!dt.WScript) throw new Dt;
     e = function(e, t) {
      dt.WScript.Sleep(t), e()
     }
    }
    return {
     setTimeout: e,
     clearTimeout: t
    }
   }()),
   Xn = Wn.setTimeout,
   Yn = Wn.clearTimeout;
  ! function() {
   function e(t) {
    if (i) Xn(function() {
     e(t)
    }, 0);
    else {
     var n = r[t];
     if (n) {
      i = !0;
      var o = Ct(n)();
      zn(t), i = !1, o === St && a(o.e)
     }
    }
   }

   function t() {
    if (!dt.postMessage || dt.importScripts) return !1;
    var e = !1,
     t = dt.onmessage;
    return dt.onmessage = function() {
     e = !0
    }, dt.postMessage("", "*"), dt.onmessage = t, e
   }
   var n = 1,
    r = {},
    i = !1;
   zn = function(e) {
    delete r[e]
   };
   var o = new RegExp("^" + String(toString).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/toString| for [^\]]+/g, ".*?") + "$"),
    s = "function" == typeof(s = ut && ht && ut.setImmediate) && !o.test(s) && s;
   if (_t(s)) Un = function(t) {
    var i = n++;
    return r[i] = t, s(function() {
     e(i)
    }), i
   };
   else if ("undefined" != typeof process && "[object process]" === {}.toString.call(process)) Un = function(t) {
    var i = n++;
    return r[i] = t, process.nextTick(function() {
     e(i)
    }), i
   };
   else if (t()) {
    var u = "ms.rx.schedule" + Math.random(),
     l = function(t) {
      "string" == typeof t.data && t.data.substring(0, u.length) === u && e(t.data.substring(u.length))
     };
    dt.addEventListener("message", l, !1), Un = function(e) {
     var t = n++;
     return r[t] = e, dt.postMessage(u + t, "*"), t
    }
   } else if (dt.MessageChannel) {
    var c = new dt.MessageChannel;
    c.port1.onmessage = function(t) {
     e(t.data)
    }, Un = function(e) {
     var t = n++;
     return r[t] = e, c.port2.postMessage(t), t
    }
   } else Un = "document" in dt && "onreadystatechange" in dt.document.createElement("script") ? function(t) {
    var i = dt.document.createElement("script"),
     o = n++;
    return r[o] = t, i.onreadystatechange = function() {
     e(o), i.onreadystatechange = null, i.parentNode.removeChild(i), i = null
    }, dt.document.documentElement.appendChild(i), o
   } : function(t) {
    var i = n++;
    return r[i] = t, Xn(function() {
     e(i)
    }, 0), i
   }
  }();
  var Qn = function(e) {
    function t() {
     e.call(this)
    }

    function n(e, t, n, r) {
     return function() {
      e.setDisposable(Tn._fixup(t(n, r)))
     }
    }

    function r(e) {
     this._id = e, this.isDisposed = !1
    }

    function i(e) {
     this._id = e, this.isDisposed = !1
    }

    function o(e, t, n) {
     return function() {
      t(e, n)
     }
    }
    return _n(t, e), r.prototype.dispose = function() {
     this.isDisposed || (this.isDisposed = !0, zn(this._id))
    }, i.prototype.dispose = function() {
     this.isDisposed || (this.isDisposed = !0, Yn(this._id))
    }, t.prototype.schedule = function(e, t) {
     var i = new kn,
      o = Un(n(i, t, this, e));
     return new Vn(i, new r(o))
    }, t.prototype._scheduleFuture = function(e, t, r) {
     if (0 === t) return this.schedule(e, r);
     var o = new kn,
      a = Xn(n(o, r, this, e), t);
     return new Vn(o, new i(a))
    }, t.prototype.scheduleLongRunning = function(e, t) {
     var n = Mn(mt);
     return Un(o(e, t, n)), n
    }, t
   }(On),
   Zn = On["default"] = On.async = new Qn;
  S.prototype.compareTo = function(e) {
   var t = this.value.compareTo(e.value);
   return 0 === t && (t = this.id - e.id), t
  };
  var Kn = ft.internals.PriorityQueue = function(e) {
    this.items = new Array(e), this.length = 0
   },
   $n = Kn.prototype;
  $n.isHigherPriority = function(e, t) {
   return this.items[e].compareTo(this.items[t]) < 0
  }, $n.percolate = function(e) {
   if (!(e >= this.length || 0 > e)) {
    var t = e - 1 >> 1;
    if (!(0 > t || t === e) && this.isHigherPriority(e, t)) {
     var n = this.items[e];
     this.items[e] = this.items[t], this.items[t] = n, this.percolate(t)
    }
   }
  }, $n.heapify = function(e) {
   if (+e || (e = 0), !(e >= this.length || 0 > e)) {
    var t = 2 * e + 1,
     n = 2 * e + 2,
     r = e;
    if (t < this.length && this.isHigherPriority(t, r) && (r = t), n < this.length && this.isHigherPriority(n, r) && (r = n), r !== e) {
     var i = this.items[e];
     this.items[e] = this.items[r], this.items[r] = i, this.heapify(r)
    }
   }
  }, $n.peek = function() {
   return this.items[0].value
  }, $n.removeAt = function(e) {
   this.items[e] = this.items[--this.length], this.items[this.length] = n, this.heapify()
  }, $n.dequeue = function() {
   var e = this.peek();
   return this.removeAt(0), e
  }, $n.enqueue = function(e) {
   var t = this.length++;
   this.items[t] = new S(Kn.count++, e), this.percolate(t)
  }, $n.remove = function(e) {
   for (var t = 0; t < this.length; t++)
    if (this.items[t].value === e) return this.removeAt(t), !0;
   return !1
  }, Kn.count = 0;
  var Jn, er = ft.Notification = function() {
    function e() {}
    return e.prototype._accept = function() {
     throw new Vt
    }, e.prototype._acceptObserver = function() {
     throw new Vt
    }, e.prototype.accept = function(e, t, n) {
     return e && "object" == typeof e ? this._acceptObserver(e) : this._accept(e, t, n)
    }, e.prototype.toObservable = function(e) {
     var t = this;
     return Fn(e) || (e = Hn), new ho(function(n) {
      return e.schedule(t, function(e, t) {
       t._acceptObserver(n), "N" === t.kind && n.onCompleted()
      })
     })
    }, e
   }(),
   tr = function(e) {
    function t(e) {
     this.value = e, this.kind = "N"
    }
    return _n(t, e), t.prototype._accept = function(e) {
     return e(this.value)
    }, t.prototype._acceptObserver = function(e) {
     return e.onNext(this.value)
    }, t.prototype.toString = function() {
     return "OnNext(" + this.value + ")"
    }, t
   }(er),
   nr = function(e) {
    function t(e) {
     this.error = e, this.kind = "E"
    }
    return _n(t, e), t.prototype._accept = function(e, t) {
     return t(this.error)
    }, t.prototype._acceptObserver = function(e) {
     return e.onError(this.error)
    }, t.prototype.toString = function() {
     return "OnError(" + this.error + ")"
    }, t
   }(er),
   rr = function(e) {
    function t() {
     this.kind = "C"
    }
    return _n(t, e), t.prototype._accept = function(e, t, n) {
     return n()
    }, t.prototype._acceptObserver = function(e) {
     return e.onCompleted()
    }, t.prototype.toString = function() {
     return "OnCompleted()"
    }, t
   }(er),
   ir = er.createOnNext = function(e) {
    return new tr(e)
   },
   or = er.createOnError = function(e) {
    return new nr(e)
   },
   ar = er.createOnCompleted = function() {
    return new rr
   },
   sr = ft.Observer = function() {},
   ur = sr.create = function(e, t, n) {
    return e || (e = mt), t || (t = wt), n || (n = mt), new cr(e, t, n)
   },
   lr = ft.internals.AbstractObserver = function(e) {
    function t() {
     this.isStopped = !1
    }
    return _n(t, e), t.prototype.next = Lt, t.prototype.error = Lt, t.prototype.completed = Lt, t.prototype.onNext = function(e) {
     !this.isStopped && this.next(e)
    }, t.prototype.onError = function(e) {
     this.isStopped || (this.isStopped = !0, this.error(e))
    }, t.prototype.onCompleted = function() {
     this.isStopped || (this.isStopped = !0, this.completed())
    }, t.prototype.dispose = function() {
     this.isStopped = !0
    }, t.prototype.fail = function(e) {
     return this.isStopped ? !1 : (this.isStopped = !0, this.error(e), !0)
    }, t
   }(sr),
   cr = ft.AnonymousObserver = function(e) {
    function t(t, n, r) {
     e.call(this), this._onNext = t, this._onError = n, this._onCompleted = r
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._onNext(e)
    }, t.prototype.error = function(e) {
     this._onError(e)
    }, t.prototype.completed = function() {
     this._onCompleted()
    }, t
   }(lr),
   hr = ft.Observable = function() {
    function e(e, t) {
     return function(n) {
      var r = n.onError;
      return n.onError = function(t) {
       s(t, e), r.call(n, t)
      }, t.call(e, n)
     }
    }

    function t() {
     if (ft.config.longStackSupport && Et) {
      var t = this._subscribe,
       n = Ct(a)(new Error).e;
      this.stack = n.stack.substring(n.stack.indexOf("\n") + 1), this._subscribe = e(this, t)
     }
    }
    return Jn = t.prototype, t.isObservable = function(e) {
     return e && _t(e.subscribe)
    }, Jn.subscribe = Jn.forEach = function(e, t, n) {
     return this._subscribe("object" == typeof e ? e : ur(e, t, n))
    }, Jn.subscribeOnNext = function(e, t) {
     return this._subscribe(ur("undefined" != typeof t ? function(n) {
      e.call(t, n)
     } : e))
    }, Jn.subscribeOnError = function(e, t) {
     return this._subscribe(ur(null, "undefined" != typeof t ? function(n) {
      e.call(t, n)
     } : e))
    }, Jn.subscribeOnCompleted = function(e, t) {
     return this._subscribe(ur(null, null, "undefined" != typeof t ? function() {
      e.call(t)
     } : e))
    }, t
   }(),
   pr = ft.internals.ScheduledObserver = function(e) {
    function t(t, n) {
     e.call(this), this.scheduler = t, this.observer = n, this.isAcquired = !1, this.hasFaulted = !1, this.queue = [], this.disposable = new Dn
    }

    function n(e, t) {
     return function() {
      e.onNext(t)
     }
    }

    function r(e, t) {
     return function() {
      e.onError(t)
     }
    }

    function i(e) {
     return function() {
      e.onCompleted()
     }
    }

    function o(e, t) {
     var n;
     if (!(e.queue.length > 0)) return e.isAcquired = !1, void 0;
     n = e.queue.shift();
     var r = Ct(n)();
     return r === St ? (e.queue = [], e.hasFaulted = !0, a(r.e)) : (t(e), void 0)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this.queue.push(n(this.observer, e))
    }, t.prototype.error = function(e) {
     this.queue.push(r(this.observer, e))
    }, t.prototype.completed = function() {
     this.queue.push(i(this.observer))
    }, t.prototype.ensureActive = function() {
     var e = !1;
     !this.hasFaulted && this.queue.length > 0 && (e = !this.isAcquired, this.isAcquired = !0), e && this.disposable.setDisposable(this.scheduler.scheduleRecursive(this, o))
    }, t.prototype.dispose = function() {
     e.prototype.dispose.call(this), this.disposable.dispose()
    }, t
   }(lr),
   dr = ft.ObservableBase = function(e) {
    function t(e) {
     return e && _t(e.dispose) ? e : _t(e) ? Mn(e) : An
    }

    function n(e, n) {
     var r = n[0],
      i = n[1],
      o = Ct(i.subscribeCore).call(i, r);
     o !== St || r.fail(St.e) || a(St.e), r.setDisposable(t(o))
    }

    function r() {
     e.call(this)
    }
    return _n(r, e), r.prototype._subscribe = function(e) {
     var t = new po(e),
      r = [t, this];
     return qn.scheduleRequired() ? qn.schedule(r, n) : n(null, r), t
    }, r.prototype.subscribeCore = Lt, r
   }(hr),
   fr = ft.FlatMapObservable = function(e) {
    function t(t, n, r, i) {
     this.resultSelector = _t(r) ? r : null, this.selector = Ut(_t(n) ? n : function() {
      return n
     }, i, 3), this.source = t, e.call(this)
    }

    function n(e, t, n, r) {
     this.i = 0, this.selector = t, this.resultSelector = n, this.source = r, this.o = e, lr.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new n(e, this.selector, this.resultSelector, this))
    }, _n(n, lr), n.prototype._wrapResult = function(e, t, n) {
     return this.resultSelector ? e.map(function(e, r) {
      return this.resultSelector(t, e, n, r)
     }, this) : e
    }, n.prototype.next = function(e) {
     var t = this.i++,
      n = Ct(this.selector)(e, t, this.source);
     return n === St ? this.o.onError(n.e) : (xt(n) && (n = Wi(n)), (Ft(n) || Nt(n)) && (n = hr.from(n)), this.o.onNext(this._wrapResult(n, e, t)), void 0)
    }, n.prototype.error = function(e) {
     this.o.onError(e)
    }, n.prototype.completed = function() {
     this.o.onCompleted()
    }, t
   }(dr),
   mr = ft.internals.Enumerable = function() {};
  C.prototype.dispose = function() {
   this.isDisposed || (this.isDisposed = !0, this._s.isDisposed = !0)
  };
  var gr = function(e) {
   function t(t) {
    this.sources = t, e.call(this)
   }

   function n(e, t) {
    if (!e.isDisposed) {
     var n = Ct(e.e.next).call(e.e);
     if (n === St) return e.o.onError(n.e);
     if (n.done) return e.o.onCompleted();
     var i = n.value;
     xt(i) && (i = Wi(i));
     var o = new kn;
     e.subscription.setDisposable(o), o.setDisposable(i.subscribe(new r(e, t)))
    }
   }

   function r(e, t) {
    this._state = e, this._recurse = t, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = new Dn,
     r = {
      isDisposed: !1,
      o: e,
      subscription: t,
      e: this.sources[Bt]()
     },
     i = qn.scheduleRecursive(r, n);
    return new Ln([t, i, new C(r)])
   }, _n(r, lr), r.prototype.next = function(e) {
    this._state.o.onNext(e)
   }, r.prototype.error = function(e) {
    this._state.o.onError(e)
   }, r.prototype.completed = function() {
    this._recurse(this._state)
   }, t
  }(dr);
  mr.prototype.concat = function() {
   return new gr(this)
  };
  var vr = function(e) {
   function t(t) {
    this.sources = t, e.call(this)
   }

   function n(e, t) {
    if (!e.isDisposed) {
     var n = Ct(e.e.next).call(e.e);
     if (n === St) return e.o.onError(n.e);
     if (n.done) return null !== e.lastError ? e.o.onError(e.lastError) : e.o.onCompleted();
     var i = n.value;
     xt(i) && (i = Wi(i));
     var o = new kn;
     e.subscription.setDisposable(o), o.setDisposable(i.subscribe(new r(e, t)))
    }
   }

   function r(e, t) {
    this._state = e, this._recurse = t, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = new Dn,
     r = {
      isDisposed: !1,
      e: this.sources[Bt](),
      subscription: t,
      lastError: null,
      o: e
     },
     i = qn.scheduleRecursive(r, n);
    return new Ln([t, i, new C(r)])
   }, _n(r, lr), r.prototype.next = function(e) {
    this._state.o.onNext(e)
   }, r.prototype.error = function(e) {
    this._state.lastError = e, this._recurse(this._state)
   }, r.prototype.completed = function() {
    this._state.o.onCompleted()
   }, t
  }(dr);
  mr.prototype.catchError = function() {
   return new vr(this)
  };
  var yr = function(e) {
    function t(e, t) {
     this.v = e, this.c = null == t ? -1 : t
    }

    function n(e) {
     this.v = e.v, this.l = e.c
    }
    return _n(t, e), t.prototype[Bt] = function() {
     return new n(this)
    }, n.prototype.next = function() {
     return 0 === this.l ? Ot : (this.l > 0 && this.l--, {
      done: !1,
      value: this.v
     })
    }, t
   }(mr),
   br = mr.repeat = function(e, t) {
    return new yr(e, t)
   },
   wr = function(e) {
    function t(e, t, n) {
     this.s = e, this.fn = t ? Ut(t, n, 3) : null
    }

    function n(e) {
     this.i = -1, this.s = e.s, this.l = this.s.length, this.fn = e.fn
    }
    return _n(t, e), t.prototype[Bt] = function() {
     return new n(this)
    }, n.prototype.next = function() {
     return ++this.i < this.l ? {
      done: !1,
      value: this.fn ? this.fn(this.s[this.i], this.i, this.s) : this.s[this.i]
     } : Ot
    }, t
   }(mr),
   xr = mr.of = function(e, t, n) {
    return new wr(e, t, n)
   },
   _r = function(e) {
    function t(t) {
     this.source = t, e.call(this)
    }

    function n(e) {
     this.o = e, this.a = [], lr.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new n(e))
    }, _n(n, lr), n.prototype.next = function(e) {
     this.a.push(e)
    }, n.prototype.error = function(e) {
     this.o.onError(e)
    }, n.prototype.completed = function() {
     this.o.onNext(this.a), this.o.onCompleted()
    }, t
   }(dr);
  Jn.toArray = function() {
   return new _r(this)
  }, hr.create = function(e, t) {
   return new ho(e, t)
  };
  var Sr = function(e) {
    function t(t) {
     this._f = t, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = Ct(this._f)();
     return t === St ? zr(t.e).subscribe(e) : (xt(t) && (t = Wi(t)), t.subscribe(e))
    }, t
   }(dr),
   Cr = hr.defer = function(e) {
    return new Sr(e)
   },
   Er = function(e) {
    function t(t) {
     this.scheduler = t, e.call(this)
    }

    function n(e, t) {
     this.observer = e, this.scheduler = t
    }

    function r(e, t) {
     return t.onCompleted(), An
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new n(e, this.scheduler);
     return t.run()
    }, n.prototype.run = function() {
     var e = this.observer;
     return this.scheduler === Hn ? r(null, e) : this.scheduler.schedule(e, r)
    }, t
   }(dr),
   Tr = new Er(Hn),
   Mr = hr.empty = function(e) {
    return Fn(e) || (e = Hn), e === Hn ? Tr : new Er(e)
   },
   Ar = function(e) {
    function t(t, n, r) {
     this._iterable = t, this._fn = n, this._scheduler = r, e.call(this)
    }

    function n(e, t, n) {
     return function(r, i) {
      var o = Ct(t.next).call(t);
      if (o === St) return e.onError(o.e);
      if (o.done) return e.onCompleted();
      var a = o.value;
      return _t(n) && (a = Ct(n)(a, r), a === St) ? e.onError(a.e) : (e.onNext(a), i(r + 1), void 0)
     }
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = Object(this._iterable),
      r = R(t);
     return this._scheduler.scheduleRecursive(0, n(e, r, this._fn))
    }, t
   }(dr),
   Pr = Math.pow(2, 53) - 1;
  E.prototype[Bt] = function() {
   return new T(this._s)
  }, T.prototype[Bt] = function() {
   return this
  }, T.prototype.next = function() {
   return this._i < this._l ? {
    done: !1,
    value: this._s.charAt(this._i++)
   } : Ot
  }, M.prototype[Bt] = function() {
   return new A(this._a)
  }, A.prototype[Bt] = function() {
   return this
  }, A.prototype.next = function() {
   return this._i < this._l ? {
    done: !1,
    value: this._a[this._i++]
   } : Ot
  };
  var Rr = hr.from = function(e, t, n, r) {
    if (null == e) throw new Error("iterable cannot be null.");
    if (t && !_t(t)) throw new Error("mapFn when provided must be a function");
    if (t) var i = Ut(t, n, 2);
    return Fn(r) || (r = qn), new Ar(e, i, r)
   },
   Ir = function(e) {
    function t(t, n) {
     this._args = t, this._scheduler = n, e.call(this)
    }

    function n(e, t) {
     var n = t.length;
     return function(r, i) {
      n > r ? (e.onNext(t[r]), i(r + 1)) : e.onCompleted()
     }
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this._scheduler.scheduleRecursive(0, n(e, this._args))
    }, t
   }(dr),
   kr = hr.fromArray = function(e, t) {
    return Fn(t) || (t = qn), new Ir(e, t)
   },
   Dr = function(e) {
    function t() {
     e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function() {
     return An
    }, t
   }(dr),
   Vr = new Dr,
   Lr = hr.never = function() {
    return Vr
   };
  hr.of = function() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   return new Ir(t, qn)
  }, hr.ofWithScheduler = function(e) {
   for (var t = arguments.length, n = new Array(t - 1), r = 1; t > r; r++) n[r - 1] = arguments[r];
   return new Ir(n, e)
  };
  var Br = function(e) {
   function t(t, n) {
    this._o = t, this._keys = Object.keys(t), this._scheduler = n, e.call(this)
   }

   function n(e, t, n) {
    return function(r, i) {
     if (r < n.length) {
      var o = n[r];
      e.onNext([o, t[o]]), i(r + 1)
     } else e.onCompleted()
    }
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this._scheduler.scheduleRecursive(0, n(e, this._o, this._keys))
   }, t
  }(dr);
  hr.pairs = function(e, t) {
   return t || (t = qn), new Br(e, t)
  };
  var Or = function(e) {
   function t(t, n, r) {
    this.start = t, this.rangeCount = n, this.scheduler = r, e.call(this)
   }

   function n(e, t, n) {
    return function(r, i) {
     t > r ? (n.onNext(e + r), i(r + 1)) : n.onCompleted()
    }
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.scheduler.scheduleRecursive(0, n(this.start, this.rangeCount, e))
   }, t
  }(dr);
  hr.range = function(e, t, n) {
   return Fn(n) || (n = qn), new Or(e, t, n)
  };
  var Nr = function(e) {
   function t(t, n, r) {
    this.value = t, this.repeatCount = null == n ? -1 : n, this.scheduler = r, e.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = new V(e, this);
    return t.run()
   }, t
  }(dr);
  V.prototype.run = function() {
   function e(e, r) {
    return (-1 === e || e > 0) && (t.onNext(n), e > 0 && e--), 0 === e ? t.onCompleted() : (r(e), void 0)
   }
   var t = this.observer,
    n = this.parent.value;
   return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount, e)
  }, hr.repeat = function(e, t, n) {
   return Fn(n) || (n = qn), new Nr(e, t, n)
  };
  var Fr = function(e) {
    function t(t, n) {
     this._value = t, this._scheduler = n, e.call(this)
    }

    function n(e, t) {
     var n = t[0],
      r = t[1];
     return r.onNext(n), r.onCompleted(), An
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = [this._value, e];
     return this._scheduler === Hn ? n(null, t) : this._scheduler.schedule(t, n)
    }, t
   }(dr),
   Ur = (hr["return"] = hr.just = function(e, t) {
    return Fn(t) || (t = Hn), new Fr(e, t)
   }, function(e) {
    function t(t, n) {
     this._error = t, this._scheduler = n, e.call(this)
    }

    function n(e, t) {
     var n = t[0],
      r = t[1];
     return r.onError(n), An
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = [this._error, e];
     return this._scheduler === Hn ? n(null, t) : this._scheduler.schedule(t, n)
    }, t
   }(dr)),
   zr = hr["throw"] = function(e, t) {
    return Fn(t) || (t = Hn), new Ur(e, t)
   },
   Gr = function(e) {
    function t(t, n) {
     this.source = t, this._fn = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new kn,
      n = new Dn;
     return n.setDisposable(t), t.setDisposable(this.source.subscribe(new Hr(e, n, this._fn))), n
    }, t
   }(dr),
   Hr = function(e) {
    function t(t, n, r) {
     this._o = t, this._s = n, this._fn = r, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._o.onNext(e)
    }, t.prototype.completed = function() {
     return this._o.onCompleted()
    }, t.prototype.error = function(e) {
     var t = Ct(this._fn)(e);
     if (t === St) return this._o.onError(t.e);
     xt(t) && (t = Wi(t));
     var n = new kn;
     this._s.setDisposable(n), n.setDisposable(t.subscribe(this._o))
    }, t
   }(lr);
  Jn["catch"] = function(e) {
   return _t(e) ? new Gr(this, e) : jr([this, e])
  };
  var jr = hr["catch"] = function() {
   var e;
   if (Array.isArray(arguments[0])) e = arguments[0];
   else {
    var t = arguments.length;
    e = new Array(t);
    for (var n = 0; t > n; n++) e[n] = arguments[n]
   }
   return xr(e).catchError()
  };
  Jn.combineLatest = function() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   return Array.isArray(t[0]) ? t[0].unshift(this) : t.unshift(this), Xr.apply(this, t)
  };
  var qr = function(e) {
    function t(t, n) {
     this._params = t, this._cb = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     for (var t = this._params.length, n = new Array(t), r = {
       hasValue: _(t, L),
       hasValueAll: !1,
       isDone: _(t, L),
       values: new Array(t)
      }, i = 0; t > i; i++) {
      var o = this._params[i],
       a = new kn;
      n[i] = a, xt(o) && (o = Wi(o)), a.setDisposable(o.subscribe(new Wr(e, i, this._cb, r)))
     }
     return new Ln(n)
    }, t
   }(dr),
   Wr = function(e) {
    function t(t, n, r, i) {
     this._o = t, this._i = n, this._cb = r, this._state = i, e.call(this)
    }

    function n(e) {
     return function(t, n) {
      return n !== e
     }
    }
    return _n(t, e), t.prototype.next = function(e) {
     if (this._state.values[this._i] = e, this._state.hasValue[this._i] = !0, this._state.hasValueAll || (this._state.hasValueAll = this._state.hasValue.every(gt))) {
      var t = Ct(this._cb).apply(null, this._state.values);
      if (t === St) return this._o.onError(t.e);
      this._o.onNext(t)
     } else this._state.isDone.filter(n(this._i)).every(gt) && this._o.onCompleted()
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._state.isDone[this._i] = !0, this._state.isDone.every(gt) && this._o.onCompleted()
    }, t
   }(lr),
   Xr = hr.combineLatest = function() {
    for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
    var r = _t(t[e - 1]) ? t.pop() : B;
    return Array.isArray(t[0]) && (t = t[0]), new qr(t, r)
   };
  Jn.concat = function() {
   for (var e = [], t = 0, n = arguments.length; n > t; t++) e.push(arguments[t]);
   return e.unshift(this), Zr.apply(null, e)
  };
  var Yr = function(e) {
    function t(t, n) {
     this._s = t, this._fn = n, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._s.o.onNext(e)
    }, t.prototype.error = function(e) {
     this._s.o.onError(e)
    }, t.prototype.completed = function() {
     this._s.i++, this._fn(this._s)
    }, t
   }(lr),
   Qr = function(e) {
    function t(t) {
     this._sources = t, e.call(this)
    }

    function n(e, t) {
     if (!e.disposable.isDisposed) {
      if (e.i === e.sources.length) return e.o.onCompleted();
      var n = e.sources[e.i];
      xt(n) && (n = Wi(n));
      var r = new kn;
      e.subscription.setDisposable(r), r.setDisposable(n.subscribe(new Yr(e, t)))
     }
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new Dn,
      r = Mn(mt),
      i = {
       o: e,
       i: 0,
       subscription: t,
       disposable: r,
       sources: this._sources
      },
      o = Hn.scheduleRecursive(i, n);
     return new Ln([t, r, o])
    }, t
   }(dr),
   Zr = hr.concat = function() {
    var e;
    if (Array.isArray(arguments[0])) e = arguments[0];
    else {
     e = new Array(arguments.length);
     for (var t = 0, n = arguments.length; n > t; t++) e[t] = arguments[t]
    }
    return new Qr(e)
   };
  Jn.concatAll = function() {
   return this.merge(1)
  };
  var Kr = function(e) {
    function t(t, n) {
     this.source = t, this.maxConcurrent = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new Cn;
     return t.add(this.source.subscribe(new $r(e, this.maxConcurrent, t))), t
    }, t
   }(dr),
   $r = function(e) {
    function t(t, n, r) {
     this.o = t, this.max = n, this.g = r, this.done = !1, this.q = [], this.activeCount = 0, e.call(this)
    }

    function n(t, n) {
     this.parent = t, this.sad = n, e.call(this)
    }
    return _n(t, e), t.prototype.handleSubscribe = function(e) {
     var t = new kn;
     this.g.add(t), xt(e) && (e = Wi(e)), t.setDisposable(e.subscribe(new n(this, t)))
    }, t.prototype.next = function(e) {
     this.activeCount < this.max ? (this.activeCount++, this.handleSubscribe(e)) : this.q.push(e)
    }, t.prototype.error = function(e) {
     this.o.onError(e)
    }, t.prototype.completed = function() {
     this.done = !0, 0 === this.activeCount && this.o.onCompleted()
    }, _n(n, e), n.prototype.next = function(e) {
     this.parent.o.onNext(e)
    }, n.prototype.error = function(e) {
     this.parent.o.onError(e)
    }, n.prototype.completed = function() {
     this.parent.g.remove(this.sad), this.parent.q.length > 0 ? this.parent.handleSubscribe(this.parent.q.shift()) : (this.parent.activeCount--, this.parent.done && 0 === this.parent.activeCount && this.parent.o.onCompleted())
    }, t
   }(lr);
  Jn.merge = function(e) {
   return "number" != typeof e ? Jr(this, e) : new Kr(this, e)
  };
  var Jr = hr.merge = function() {
    var e, t, n = [],
     r = arguments.length;
    if (arguments[0])
     if (Fn(arguments[0]))
      for (e = arguments[0], t = 1; r > t; t++) n.push(arguments[t]);
     else
      for (e = Hn, t = 0; r > t; t++) n.push(arguments[t]);
    else
     for (e = Hn, t = 1; r > t; t++) n.push(arguments[t]);
    return Array.isArray(n[0]) && (n = n[0]), D(e, n).mergeAll()
   },
   ei = ft.CompositeError = function(e) {
    this.innerErrors = e, this.message = "This contains multiple errors. Check the innerErrors", Error.call(this)
   };
  ei.prototype = Object.create(Error.prototype), ei.prototype.name = "CompositeError";
  var ti = function(e) {
    function t(t) {
     this.source = t, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new Cn,
      n = new kn,
      r = {
       isStopped: !1,
       errors: [],
       o: e
      };
     return t.add(n), n.setDisposable(this.source.subscribe(new ni(t, r))), t
    }, t
   }(dr),
   ni = function(e) {
    function t(t, n) {
     this._group = t, this._state = n, e.call(this)
    }

    function n(e, t) {
     0 === t.length ? e.onCompleted() : 1 === t.length ? e.onError(t[0]) : e.onError(new ei(t))
    }

    function r(t, n, r) {
     this._inner = t, this._group = n, this._state = r, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     var t = new kn;
     this._group.add(t), xt(e) && (e = Wi(e)), t.setDisposable(e.subscribe(new r(t, this._group, this._state)))
    }, t.prototype.error = function(e) {
     this._state.errors.push(e), this._state.isStopped = !0, 1 === this._group.length && n(this._state.o, this._state.errors)
    }, t.prototype.completed = function() {
     this._state.isStopped = !0, 1 === this._group.length && n(this._state.o, this._state.errors)
    }, _n(r, e), r.prototype.next = function(e) {
     this._state.o.onNext(e)
    }, r.prototype.error = function(e) {
     this._state.errors.push(e), this._group.remove(this._inner), this._state.isStopped && 1 === this._group.length && n(this._state.o, this._state.errors)
    }, r.prototype.completed = function() {
     this._group.remove(this._inner), this._state.isStopped && 1 === this._group.length && n(this._state.o, this._state.errors)
    }, t
   }(lr);
  hr.mergeDelayError = function() {
   var e;
   if (Array.isArray(arguments[0])) e = arguments[0];
   else {
    var t = arguments.length;
    e = new Array(t);
    for (var n = 0; t > n; n++) e[n] = arguments[n]
   }
   var r = D(null, e);
   return new ti(r)
  };
  var ri = function(e) {
    function t(t) {
     this.source = t, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new Cn,
      n = new kn;
     return t.add(n), n.setDisposable(this.source.subscribe(new ii(e, t))), t
    }, t
   }(dr),
   ii = function(e) {
    function t(t, n) {
     this.o = t, this.g = n, this.done = !1, e.call(this)
    }

    function n(t, n) {
     this.parent = t, this.sad = n, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     var t = new kn;
     this.g.add(t), xt(e) && (e = Wi(e)), t.setDisposable(e.subscribe(new n(this, t)))
    }, t.prototype.error = function(e) {
     this.o.onError(e)
    }, t.prototype.completed = function() {
     this.done = !0, 1 === this.g.length && this.o.onCompleted()
    }, _n(n, e), n.prototype.next = function(e) {
     this.parent.o.onNext(e)
    }, n.prototype.error = function(e) {
     this.parent.o.onError(e)
    }, n.prototype.completed = function() {
     this.parent.g.remove(this.sad), this.parent.done && 1 === this.parent.g.length && this.parent.o.onCompleted()
    }, t
   }(lr);
  Jn.mergeAll = function() {
   return new ri(this)
  };
  var oi = function(e) {
    function t(t, n) {
     this._s = t, this._o = xt(n) ? Wi(n) : n, this._open = !1, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new kn;
     t.setDisposable(this._s.subscribe(new ai(e, this))), xt(this._o) && (this._o = Wi(this._o));
     var n = new kn;
     return n.setDisposable(this._o.subscribe(new si(e, this, n))), new Vn(t, n)
    }, t
   }(dr),
   ai = function(e) {
    function t(t, n) {
     this._o = t, this._p = n, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._p._open && this._o.onNext(e)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.onCompleted = function() {
     this._p._open && this._o.onCompleted()
    }, t
   }(lr),
   si = function(e) {
    function t(t, n, r) {
     this._o = t, this._p = n, this._r = r, e.call(this)
    }
    return _n(t, e), t.prototype.next = function() {
     this._p._open = !0, this._r.dispose()
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.onCompleted = function() {
     this._r.dispose()
    }, t
   }(lr);
  Jn.skipUntil = function(e) {
   return new oi(this, e)
  };
  var ui = function(e) {
   function t(t) {
    this.source = t, e.call(this)
   }

   function n(e, t) {
    this.o = e, this.inner = t, this.stopped = !1, this.latest = 0, this.hasLatest = !1, lr.call(this)
   }

   function r(e, t) {
    this.parent = e, this.id = t, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = new Dn,
     r = this.source.subscribe(new n(e, t));
    return new Vn(r, t)
   }, _n(n, lr), n.prototype.next = function(e) {
    var t = new kn,
     n = ++this.latest;
    this.hasLatest = !0, this.inner.setDisposable(t), xt(e) && (e = Wi(e)), t.setDisposable(e.subscribe(new r(this, n)))
   }, n.prototype.error = function(e) {
    this.o.onError(e)
   }, n.prototype.completed = function() {
    this.stopped = !0, !this.hasLatest && this.o.onCompleted()
   }, _n(r, lr), r.prototype.next = function(e) {
    this.parent.latest === this.id && this.parent.o.onNext(e)
   }, r.prototype.error = function(e) {
    this.parent.latest === this.id && this.parent.o.onError(e)
   }, r.prototype.completed = function() {
    this.parent.latest === this.id && (this.parent.hasLatest = !1, this.parent.stopped && this.parent.o.onCompleted())
   }, t
  }(dr);
  Jn["switch"] = Jn.switchLatest = function() {
   return new ui(this)
  };
  var li = function(e) {
    function t(t, n) {
     this.source = t, this.other = xt(n) ? Wi(n) : n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return new Vn(this.source.subscribe(e), this.other.subscribe(new ci(e)))
    }, t
   }(dr),
   ci = function(e) {
    function t(t) {
     this._o = t, e.call(this)
    }
    return _n(t, e), t.prototype.next = function() {
     this._o.onCompleted()
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.onCompleted = mt, t
   }(lr);
  Jn.takeUntil = function(e) {
   return new li(this, e)
  };
  var hi = function(e) {
    function t(t, n, r) {
     this._s = t, this._ss = n, this._cb = r, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     for (var t = this._ss.length, n = {
       hasValue: _(t, L),
       hasValueAll: !1,
       values: new Array(t)
      }, r = this._ss.length, i = new Array(r + 1), o = 0; r > o; o++) {
      var a = this._ss[o],
       s = new kn;
      xt(a) && (a = Wi(a)), s.setDisposable(a.subscribe(new pi(e, o, n))), i[o] = s
     }
     var u = new kn;
     return u.setDisposable(this._s.subscribe(new di(e, this._cb, n))), i[r] = u, new Ln(i)
    }, t
   }(dr),
   pi = function(e) {
    function t(t, n, r) {
     this._o = t, this._i = n, this._state = r, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._state.values[this._i] = e, this._state.hasValue[this._i] = !0, this._state.hasValueAll = this._state.hasValue.every(gt)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = mt, t
   }(lr),
   di = function(e) {
    function t(t, n, r) {
     this._o = t, this._cb = n, this._state = r, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     var t = [e].concat(this._state.values);
     if (this._state.hasValueAll) {
      var n = Ct(this._cb).apply(null, t);
      return n === St ? this._o.onError(n.e) : (this._o.onNext(n), void 0)
     }
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.withLatestFrom = function() {
   if (0 === arguments.length) throw new Error("invalid arguments");
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   var r = _t(t[e - 1]) ? t.pop() : B;
   return Array.isArray(t[0]) && (t = t[0]), new hi(this, t, r)
  };
  var fi = function(e) {
    function t(t, n) {
     this._s = t, this._cb = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     for (var t = this._s.length, n = new Array(t), r = _(t, L), i = _(t, O), o = 0; t > o; o++) {
      var a = this._s[o],
       s = new kn;
      n[o] = s, xt(a) && (a = Wi(a)), s.setDisposable(a.subscribe(new mi(e, o, this, i, r)))
     }
     return new Ln(n)
    }, t
   }(dr),
   mi = function(e) {
    function t(t, n, r, i, o) {
     this._o = t, this._i = n, this._p = r, this._q = i, this._d = o, e.call(this)
    }

    function n(e) {
     return e.length > 0
    }

    function r(e) {
     return e.shift()
    }

    function i(e) {
     return function(t, n) {
      return n !== e
     }
    }
    return _n(t, e), t.prototype.next = function(e) {
     if (this._q[this._i].push(e), this._q.every(n)) {
      var t = this._q.map(r),
       o = Ct(this._p._cb).apply(null, t);
      if (o === St) return this._o.onError(o.e);
      this._o.onNext(o)
     } else this._d.filter(i(this._i)).every(gt) && this._o.onCompleted()
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._d[this._i] = !0, this._d.every(gt) && this._o.onCompleted()
    }, t
   }(lr);
  Jn.zip = function() {
   if (0 === arguments.length) throw new Error("invalid arguments");
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   var r = _t(t[e - 1]) ? t.pop() : B;
   Array.isArray(t[0]) && (t = t[0]);
   var i = this;
   return t.unshift(i), new fi(t, r)
  }, hr.zip = function() {
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   Array.isArray(t[0]) && (t = _t(t[1]) ? t[0].concat(t[1]) : t[0]);
   var r = t.shift();
   return r.zip.apply(r, t)
  };
  var gi = function(e) {
    function t(t, n) {
     this.sources = t, this._cb = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     for (var t = this.sources, n = t.length, r = new Array(n), i = {
       q: _(n, O),
       done: _(n, L),
       cb: this._cb,
       o: e
      }, o = 0; n > o; o++) ! function(e) {
      var n = t[e],
       o = new kn;
      (Ft(n) || Nt(n)) && (n = Rr(n)), r[e] = o, o.setDisposable(n.subscribe(new vi(i, e)))
     }(o);
     return new Ln(r)
    }, t
   }(dr),
   vi = function(e) {
    function t(t, n) {
     this._s = t, this._i = n, e.call(this)
    }

    function n(e) {
     return e.length > 0
    }

    function r(e) {
     return e.shift()
    }

    function i(e) {
     return function(t, n) {
      return n !== e
     }
    }
    return _n(t, e), t.prototype.next = function(e) {
     if (this._s.q[this._i].push(e), this._s.q.every(n)) {
      var t = this._s.q.map(r),
       o = Ct(this._s.cb).apply(null, t);
      if (o === St) return this._s.o.onError(o.e);
      this._s.o.onNext(o)
     } else this._s.done.filter(i(this._i)).every(gt) && this._s.o.onCompleted()
    }, t.prototype.error = function(e) {
     this._s.o.onError(e)
    }, t.prototype.completed = function() {
     this._s.done[this._i] = !0, this._s.done.every(gt) && this._s.o.onCompleted()
    }, t
   }(lr);
  Jn.zipIterable = function() {
   if (0 === arguments.length) throw new Error("invalid arguments");
   for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
   var r = _t(t[e - 1]) ? t.pop() : B,
    i = this;
   return t.unshift(i), new gi(t, r)
  }, Jn.asObservable = function() {
   return new ho(N(this), this)
  };
  var yi = function(e) {
    function t(t) {
     this.source = t, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new bi(e))
    }, t
   }(dr),
   bi = function(e) {
    function t(t) {
     this._o = t, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     e.accept(this._o)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.dematerialize = function() {
   return new yi(this)
  };
  var wi = function(e) {
    function t(t, n, r) {
     this.source = t, this.keyFn = n, this.comparer = r, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new xi(e, this.keyFn, this.comparer))
    }, t
   }(dr),
   xi = function(e) {
    function t(t, n, r) {
     this.o = t, this.keyFn = n, this.comparer = r, this.hasCurrentKey = !1, this.currentKey = null, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     var t, n = e;
     return _t(this.keyFn) && (n = Ct(this.keyFn)(e), n === St) ? this.o.onError(n.e) : this.hasCurrentKey && (t = Ct(this.comparer)(this.currentKey, n), t === St) ? this.o.onError(t.e) : (this.hasCurrentKey && t || (this.hasCurrentKey = !0, this.currentKey = n, this.o.onNext(e)), void 0)
    }, t.prototype.error = function(e) {
     this.o.onError(e)
    }, t.prototype.completed = function() {
     this.o.onCompleted()
    }, t
   }(lr);
  Jn.distinctUntilChanged = function(e, t) {
   return t || (t = yt), new wi(this, e, t)
  };
  var _i = function(e) {
   function t(t, n, r, i) {
    this.source = t, this._oN = n, this._oE = r, this._oC = i, e.call(this)
   }

   function n(e, t) {
    this.o = e, this.t = !t._oN || _t(t._oN) ? ur(t._oN || mt, t._oE || mt, t._oC || mt) : t._oN, this.isStopped = !1, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new n(e, this))
   }, _n(n, lr), n.prototype.next = function(e) {
    var t = Ct(this.t.onNext).call(this.t, e);
    t === St && this.o.onError(t.e), this.o.onNext(e)
   }, n.prototype.error = function(e) {
    var t = Ct(this.t.onError).call(this.t, e);
    return t === St ? this.o.onError(t.e) : (this.o.onError(e), void 0)
   }, n.prototype.completed = function() {
    var e = Ct(this.t.onCompleted).call(this.t);
    return e === St ? this.o.onError(e.e) : (this.o.onCompleted(), void 0)
   }, t
  }(dr);
  Jn["do"] = Jn.tap = Jn.doAction = function(e, t, n) {
   return new _i(this, e, t, n)
  }, Jn.doOnNext = Jn.tapOnNext = function(e, t) {
   return this.tap("undefined" != typeof t ? function(n) {
    e.call(t, n)
   } : e)
  }, Jn.doOnError = Jn.tapOnError = function(e, t) {
   return this.tap(mt, "undefined" != typeof t ? function(n) {
    e.call(t, n)
   } : e)
  }, Jn.doOnCompleted = Jn.tapOnCompleted = function(e, t) {
   return this.tap(mt, null, "undefined" != typeof t ? function() {
    e.call(t)
   } : e)
  };
  var Si = function(e) {
   function t(t, n, r) {
    this.source = t, this._fn = Ut(n, r, 0), e.call(this)
   }

   function n(e, t) {
    this.isDisposed = !1, this._s = e, this._fn = t
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = Ct(this.source.subscribe).call(this.source, e);
    return t === St && (this._fn(), a(t.e)), new n(t, this._fn)
   }, n.prototype.dispose = function() {
    if (!this.isDisposed) {
     var e = Ct(this._s.dispose).call(this._s);
     this._fn(), e === St && a(e.e)
    }
   }, t
  }(dr);
  Jn["finally"] = function(e, t) {
   return new Si(this, e, t)
  };
  var Ci = function(e) {
   function t(t) {
    this.source = t, e.call(this)
   }

   function n(e) {
    this.o = e, this.isStopped = !1
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new n(e))
   }, n.prototype.onNext = mt, n.prototype.onError = function(e) {
    this.isStopped || (this.isStopped = !0, this.o.onError(e))
   }, n.prototype.onCompleted = function() {
    this.isStopped || (this.isStopped = !0, this.o.onCompleted())
   }, n.prototype.dispose = function() {
    this.isStopped = !0
   }, n.prototype.fail = function(e) {
    return this.isStopped ? !1 : (this.isStopped = !0, this.observer.onError(e), !0)
   }, t
  }(dr);
  Jn.ignoreElements = function() {
   return new Ci(this)
  };
  var Ei = function(e) {
    function t(t) {
     this.source = t, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new Ti(e))
    }, t
   }(dr),
   Ti = function(e) {
    function t(t) {
     this._o = t, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._o.onNext(ir(e))
    }, t.prototype.error = function(e) {
     this._o.onNext(or(e)), this._o.onCompleted()
    }, t.prototype.completed = function() {
     this._o.onNext(ar()), this._o.onCompleted()
    }, t
   }(lr);
  Jn.materialize = function() {
   return new Ei(this)
  }, Jn.repeat = function(e) {
   return br(this, e).concat()
  }, Jn.retry = function(e) {
   return br(this, e).catchError()
  };
  var Mi = function(e) {
   function t(e) {
    return {
     isDisposed: !1,
     dispose: function() {
      this.isDisposed || (this.isDisposed = !0, e.isDisposed = !0)
     }
    }
   }

   function n(t, n) {
    this.source = t, this._notifier = n, e.call(this)
   }
   return _n(n, e), n.prototype.subscribeCore = function(e) {
    var n, r = new mo,
     i = new mo,
     o = this._notifier(r),
     a = o.subscribe(i),
     s = this.source["@@iterator"](),
     u = {
      isDisposed: !1
     },
     l = new Dn,
     c = qn.scheduleRecursive(null, function(t, o) {
      if (!u.isDisposed) {
       var a = s.next();
       if (a.done) return n ? e.onError(n) : e.onCompleted(), void 0;
       var c = a.value;
       xt(c) && (c = Wi(c));
       var h = new kn,
        p = new kn;
       l.setDisposable(new Vn(p, h)), h.setDisposable(c.subscribe(function(t) {
        e.onNext(t)
       }, function(t) {
        p.setDisposable(i.subscribe(o, function(t) {
         e.onError(t)
        }, function() {
         e.onCompleted()
        })), r.onNext(t), h.dispose()
       }, function() {
        e.onCompleted()
       }))
      }
     });
    return new Ln([a, l, c, t(u)])
   }, n
  }(dr);
  Jn.retryWhen = function(e) {
   return new Mi(F(this), e)
  };
  var Ai = function(e) {
   function t(e) {
    return {
     isDisposed: !1,
     dispose: function() {
      this.isDisposed || (this.isDisposed = !0, e.isDisposed = !0)
     }
    }
   }

   function n(t, n) {
    this.source = t, this._notifier = n, e.call(this)
   }
   return _n(n, e), n.prototype.subscribeCore = function(e) {
    var n, r = new mo,
     i = new mo,
     o = this._notifier(r),
     a = o.subscribe(i),
     s = this.source["@@iterator"](),
     u = {
      isDisposed: !1
     },
     l = new Dn,
     c = qn.scheduleRecursive(null, function(t, o) {
      if (!u.isDisposed) {
       var a = s.next();
       if (a.done) return n ? e.onError(n) : e.onCompleted(), void 0;
       var c = a.value;
       xt(c) && (c = Wi(c));
       var h = new kn,
        p = new kn;
       l.setDisposable(new Vn(p, h)), h.setDisposable(c.subscribe(function(t) {
        e.onNext(t)
       }, function(t) {
        e.onError(t)
       }, function() {
        p.setDisposable(i.subscribe(o, function(t) {
         e.onError(t)
        }, function() {
         e.onCompleted()
        })), r.onNext(null), h.dispose()
       }))
      }
     });
    return new Ln([a, l, c, t(u)])
   }, n
  }(dr);
  Jn.repeatWhen = function(e) {
   return new Ai(F(this), e)
  };
  var Pi = function(e) {
    function t(t, n, r, i) {
     this.source = t, this.accumulator = n, this.hasSeed = r, this.seed = i, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new Ri(e, this))
    }, t
   }(dr),
   Ri = function(e) {
    function t(t, n) {
     this._o = t, this._p = n, this._fn = n.accumulator, this._hs = n.hasSeed, this._s = n.seed, this._ha = !1, this._a = null, this._hv = !1, this._i = 0, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     return !this._hv && (this._hv = !0), this._ha ? this._a = Ct(this._fn)(this._a, e, this._i, this._p) : (this._a = this._hs ? Ct(this._fn)(this._s, e, this._i, this._p) : e, this._ha = !0), this._a === St ? this._o.onError(this._a.e) : (this._o.onNext(this._a), this._i++, void 0)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     !this._hv && this._hs && this._o.onNext(this._s), this._o.onCompleted()
    }, t
   }(lr);
  Jn.scan = function() {
   var e, t = !1,
    n = arguments[0];
   return 2 === arguments.length && (t = !0, e = arguments[1]), new Pi(this, n, t, e)
  };
  var Ii = function(e) {
    function t(t, n) {
     this.source = t, this._c = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new ki(e, this._c))
    }, t
   }(dr),
   ki = function(e) {
    function t(t, n) {
     this._o = t, this._c = n, this._q = [], e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._q.push(e), this._q.length > this._c && this._o.onNext(this._q.shift())
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.skipLast = function(e) {
   if (0 > e) throw new kt;
   return new Ii(this, e)
  }, Jn.startWith = function() {
   var e, t = 0;
   arguments.length && Fn(arguments[0]) ? (e = arguments[0], t = 1) : e = Hn;
   for (var n = [], r = t, i = arguments.length; i > r; r++) n.push(arguments[r]);
   return Zr.apply(null, [kr(n, e), this])
  };
  var Di = function(e) {
   function t(t, n) {
    this._o = t, this._c = n, this._q = [], e.call(this)
   }
   return _n(t, e), t.prototype.next = function(e) {
    this._q.push(e), this._q.length > this._c && this._q.shift()
   }, t.prototype.error = function(e) {
    this._o.onError(e)
   }, t.prototype.completed = function() {
    for (; this._q.length > 0;) this._o.onNext(this._q.shift());
    this._o.onCompleted()
   }, t
  }(lr);
  Jn.takeLast = function(e) {
   if (0 > e) throw new kt;
   var t = this;
   return new ho(function(n) {
    return t.subscribe(new Di(n, e))
   }, t)
  }, Jn.flatMapConcat = Jn.concatMap = function(e, t, n) {
   return new fr(this, e, t, n).merge(1)
  };
  var Vi = function(e) {
   function t(t, n, r) {
    this.source = t, this.selector = Ut(n, r, 3), e.call(this)
   }

   function n(e, t) {
    return function(n, r, i) {
     return e.call(this, t.selector(n, r, i), r, i)
    }
   }

   function r(e, t, n) {
    this.o = e, this.selector = t, this.source = n, this.i = 0, lr.call(this)
   }
   return _n(t, e), t.prototype.internalMap = function(e, r) {
    return new t(this.source, n(e, this), r)
   }, t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new r(e, this.selector, this))
   }, _n(r, lr), r.prototype.next = function(e) {
    var t = Ct(this.selector)(e, this.i++, this.source);
    return t === St ? this.o.onError(t.e) : (this.o.onNext(t), void 0)
   }, r.prototype.error = function(e) {
    this.o.onError(e)
   }, r.prototype.completed = function() {
    this.o.onCompleted()
   }, t
  }(dr);
  Jn.map = Jn.select = function(e, t) {
   var n = "function" == typeof e ? e : function() {
    return e
   };
   return this instanceof Vi ? this.internalMap(n, t) : new Vi(this, n, t)
  }, Jn.pluck = function() {
   var e = arguments.length,
    t = new Array(e);
   if (0 === e) throw new Error("List of properties cannot be empty.");
   for (var n = 0; e > n; n++) t[n] = arguments[n];
   return this.map(U(t, e))
  }, Jn.flatMap = Jn.selectMany = Jn.mergeMap = function(e, t, n) {
   return new fr(this, e, t, n).mergeAll()
  }, Jn.flatMapLatest = Jn.switchMap = function(e, t, n) {
   return new fr(this, e, t, n).switchLatest()
  };
  var Li = function(e) {
   function t(t, n) {
    this.source = t, this._count = n, e.call(this)
   }

   function n(e, t) {
    this._o = e, this._r = t, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new n(e, this._count))
   }, _n(n, lr), n.prototype.next = function(e) {
    this._r <= 0 ? this._o.onNext(e) : this._r--
   }, n.prototype.error = function(e) {
    this._o.onError(e)
   }, n.prototype.completed = function() {
    this._o.onCompleted()
   }, t
  }(dr);
  Jn.skip = function(e) {
   if (0 > e) throw new kt;
   return new Li(this, e)
  };
  var Bi = function(e) {
    function t(t, n) {
     this.source = t, this._fn = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new Oi(e, this))
    }, t
   }(dr),
   Oi = function(e) {
    function t(t, n) {
     this._o = t, this._p = n, this._i = 0, this._r = !1, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     if (!this._r) {
      var t = Ct(this._p._fn)(e, this._i++, this._p);
      if (t === St) return this._o.onError(t.e);
      this._r = !t
     }
     this._r && this._o.onNext(e)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.skipWhile = function(e, t) {
   var n = Ut(e, t, 3);
   return new Bi(this, n)
  };
  var Ni = function(e) {
   function t(t, n) {
    this.source = t, this._count = n, e.call(this)
   }

   function n(e, t) {
    this._o = e, this._c = t, this._r = t, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new n(e, this._count))
   }, _n(n, lr), n.prototype.next = function(e) {
    this._r-- > 0 && (this._o.onNext(e), this._r <= 0 && this._o.onCompleted())
   }, n.prototype.error = function(e) {
    this._o.onError(e)
   }, n.prototype.completed = function() {
    this._o.onCompleted()
   }, t
  }(dr);
  Jn.take = function(e, t) {
   if (0 > e) throw new kt;
   return 0 === e ? Mr(t) : new Ni(this, e)
  };
  var Fi = function(e) {
    function t(t, n) {
     this.source = t, this._fn = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new Ui(e, this))
    }, t
   }(dr),
   Ui = function(e) {
    function t(t, n) {
     this._o = t, this._p = n, this._i = 0, this._r = !0, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     return this._r && (this._r = Ct(this._p._fn)(e, this._i++, this._p), this._r === St) ? this._o.onError(this._r.e) : (this._r ? this._o.onNext(e) : this._o.onCompleted(), void 0)
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.takeWhile = function(e, t) {
   var n = Ut(e, t, 3);
   return new Fi(this, n)
  };
  var zi = function(e) {
   function t(t, n, r) {
    this.source = t, this.predicate = Ut(n, r, 3), e.call(this)
   }

   function n(e, t) {
    return function(n, r, i) {
     return t.predicate(n, r, i) && e.call(this, n, r, i)
    }
   }

   function r(e, t, n) {
    this.o = e, this.predicate = t, this.source = n, this.i = 0, lr.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return this.source.subscribe(new r(e, this.predicate, this))
   }, t.prototype.internalFilter = function(e, r) {
    return new t(this.source, n(e, this), r)
   }, _n(r, lr), r.prototype.next = function(e) {
    var t = Ct(this.predicate)(e, this.i++, this.source);
    return t === St ? this.o.onError(t.e) : (t && this.o.onNext(e), void 0)
   }, r.prototype.error = function(e) {
    this.o.onError(e)
   }, r.prototype.completed = function() {
    this.o.onCompleted()
   }, t
  }(dr);
  Jn.filter = Jn.where = function(e, t) {
   return this instanceof zi ? this.internalFilter(e, t) : new zi(this, e, t)
  }, hr.fromCallback = function(e, t, n) {
   return function() {
    "undefined" == typeof t && (t = this);
    for (var r = arguments.length, i = new Array(r), o = 0; r > o; o++) i[o] = arguments[o];
    return z(e, t, n, i)
   }
  }, hr.fromNodeCallback = function(e, t, n) {
   return function() {
    "undefined" == typeof t && (t = this);
    for (var r = arguments.length, i = new Array(r), o = 0; r > o; o++) i[o] = arguments[o];
    return H(e, t, n, i)
   }
  }, W.prototype.dispose = function() {
   this.isDisposed || (this._e.removeEventListener(this._n, this._fn, !1), this.isDisposed = !0)
  }, ft.config.useNativeEvents = !1;
  var Gi = function(e) {
   function t(t, n, r) {
    this._el = t, this._n = n, this._fn = r, e.call(this)
   }

   function n(e, t) {
    return function() {
     var n = arguments[0];
     return _t(t) && (n = Ct(t).apply(null, arguments), n === St) ? e.onError(n.e) : (e.onNext(n), void 0)
    }
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    return X(this._el, this._n, n(e, this._fn))
   }, t
  }(dr);
  hr.fromEvent = function(e, t, n) {
   return e.addListener ? ji(function(n) {
    e.addListener(t, n)
   }, function(n) {
    e.removeListener(t, n)
   }, n) : ft.config.useNativeEvents || "function" != typeof e.on || "function" != typeof e.off ? new Gi(e, t, n).publish().refCount() : ji(function(n) {
    e.on(t, n)
   }, function(n) {
    e.off(t, n)
   }, n)
  };
  var Hi = function(e) {
    function t(t, n, r) {
     this._add = t, this._del = n, this._fn = r, e.call(this)
    }

    function n(e, t) {
     return function() {
      var n = arguments[0];
      return _t(t) && (n = Ct(t).apply(null, arguments), n === St) ? e.onError(n.e) : (e.onNext(n), void 0)
     }
    }

    function r(e, t, n) {
     this._del = e, this._fn = t, this._ret = n, this.isDisposed = !1
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = n(e, this._fn),
      i = this._add(t);
     return new r(this._del, t, i)
    }, r.prototype.dispose = function() {
     this.isDisposed || (_t(this._del) && this._del(this._fn, this._ret), this.isDisposed = !0)
    }, t
   }(dr),
   ji = hr.fromEventPattern = function(e, t, n) {
    return new Hi(e, t, n).publish().refCount()
   },
   qi = function(e) {
    function t(t, n) {
     this._p = t, this._s = n, e.call(this)
    }

    function n(e, t) {
     var n = t[0],
      r = t[1];
     n.onNext(r), n.onCompleted()
    }

    function r(e, t) {
     var n = t[0],
      r = t[1];
     n.onError(r)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new kn,
      i = this,
      o = this._p;
     return _t(o) && (o = Ct(o)(), o === St) ? (e.onError(o.e), t) : (o.then(function(r) {
      t.setDisposable(i._s.schedule([e, r], n))
     }, function(n) {
      t.setDisposable(i._s.schedule([e, n], r))
     }), t)
    }, t
   }(dr),
   Wi = hr.fromPromise = function(e, t) {
    return t || (t = Zn), new qi(e, t)
   };
  Jn.toPromise = function(e) {
   if (e || (e = ft.config.Promise), !e) throw new Dt("Promise type not provided nor in Rx.config.Promise");
   var t = this;
   return new e(function(e, n) {
    var r;
    t.subscribe(function(e) {
     r = e
    }, n, function() {
     e(r)
    })
   })
  }, hr.startAsync = function(e) {
   var t = Ct(e)();
   return t === St ? zr(t.e) : Wi(t)
  };
  var Xi = function(e) {
   function t(t, n, r) {
    this.source = t, this._fn1 = n, this._fn2 = r, e.call(this)
   }
   return _n(t, e), t.prototype.subscribeCore = function(e) {
    var t = this.source.multicast(this._fn1());
    return new Vn(this._fn2(t).subscribe(e), t.connect())
   }, t
  }(dr);
  Jn.multicast = function(e, t) {
   return _t(e) ? new Xi(this, e, t) : new Qi(this, e)
  }, Jn.publish = function(e) {
   return e && _t(e) ? this.multicast(function() {
    return new mo
   }, e) : this.multicast(new mo)
  }, Jn.share = function() {
   return this.publish().refCount()
  }, Jn.publishLast = function(e) {
   return e && _t(e) ? this.multicast(function() {
    return new go
   }, e) : this.multicast(new go)
  }, Jn.publishValue = function(e, t) {
   return 2 === arguments.length ? this.multicast(function() {
    return new yo(t)
   }, e) : this.multicast(new yo(e))
  }, Jn.shareValue = function(e) {
   return this.publishValue(e).refCount()
  }, Jn.replay = function(e, t, n, r) {
   return e && _t(e) ? this.multicast(function() {
    return new bo(t, n, r)
   }, e) : this.multicast(new bo(t, n, r))
  }, Jn.shareReplay = function(e, t, n) {
   return this.replay(null, e, t, n).refCount()
  }; {
   var Yi = function(e) {
     function t(t) {
      this.source = t, this._count = 0, this._connectableSubscription = null, e.call(this)
     }

     function n(e, t) {
      this._p = e, this._s = t, this.isDisposed = !1
     }
     return _n(t, e), t.prototype.subscribeCore = function(e) {
      var t = this.source.subscribe(e);
      return 1 === ++this._count && (this._connectableSubscription = this.source.connect()), new n(this, t)
     }, n.prototype.dispose = function() {
      this.isDisposed || (this.isDisposed = !0, this._s.dispose(), 0 === --this._p._count && this._p._connectableSubscription.dispose())
     }, t
    }(dr),
    Qi = ft.ConnectableObservable = function(e) {
     function t(t, n) {
      this.source = t, this._connection = null, this._source = t.asObservable(), this._subject = n, e.call(this)
     }

     function n(e, t) {
      this._p = e, this._s = t
     }
     return _n(t, e), n.prototype.dispose = function() {
      this._s && (this._s.dispose(), this._s = null, this._p._connection = null)
     }, t.prototype.connect = function() {
      if (!this._connection) {
       if (this._subject.isStopped) return An;
       var e = this._source.subscribe(this._subject);
       this._connection = new n(this, e)
      }
      return this._connection
     }, t.prototype._subscribe = function(e) {
      return this._subject.subscribe(e)
     }, t.prototype.refCount = function() {
      return new Yi(this)
     }, t
    }(hr),
    Zi = function(e) {
     function t(t, n) {
      this._dt = t, this._s = n, e.call(this)
     }

     function n(e, t) {
      t.onNext(0), t.onCompleted()
     }
     return _n(t, e), t.prototype.subscribeCore = function(e) {
      return this._s.scheduleFuture(e, this._dt, n)
     }, t
    }(dr),
    Ki = hr.interval = function(e, t) {
     return Z(e, e, Fn(t) ? t : Zn)
    };
   hr.timer = function(e, t, r) {
    var i;
    return Fn(r) || (r = Zn), null != t && "number" == typeof t ? i = t : Fn(t) && (r = t), (e instanceof Date || "number" == typeof e) && i === n ? Y(e, r) : e instanceof Date && i !== n ? Q(e, t, r) : Z(e, i, r)
   }
  }
  Jn.delay = function() {
   var e = arguments[0];
   if ("number" == typeof e || e instanceof Date) {
    var t = e,
     n = arguments[1];
    return Fn(n) || (n = Zn), t instanceof Date ? $(this, t, n) : K(this, t, n)
   }
   if (hr.isObservable(e) || _t(e)) return J(this, e, arguments[1]);
   throw new Error("Invalid arguments")
  };
  var $i = function(e) {
    function t(t, n, r) {
     Fn(r) || (r = Zn), this.source = t, this._dt = n, this._s = r, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = new Dn;
     return new Vn(this.source.subscribe(new Ji(e, this._dt, this._s, t)), t)
    }, t
   }(dr),
   Ji = function(e) {
    function t(t, n, r, i) {
     this._o = t, this._d = n, this._scheduler = r, this._c = i, this._v = null, this._hv = !1, this._id = 0, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._hv = !0, this._v = e;
     var t = ++this._id,
      n = new kn;
     this._c.setDisposable(n), n.setDisposable(this._scheduler.scheduleFuture(this, this._d, function(n, r) {
      r._hv && r._id === t && r._o.onNext(e), r._hv = !1
     }))
    }, t.prototype.error = function(e) {
     this._c.dispose(), this._o.onError(e), this._hv = !1, this._id++
    }, t.prototype.completed = function() {
     this._c.dispose(), this._hv && this._o.onNext(this._v), this._o.onCompleted(), this._hv = !1, this._id++
    }, t
   }(lr);
  Jn.debounce = function() {
   if (_t(arguments[0])) return et(this, arguments[0]);
   if ("number" == typeof arguments[0]) return new $i(this, arguments[0], arguments[1]);
   throw new Error("Invalid arguments")
  };
  var eo = function(e) {
    function t(t, n) {
     this.source = t, this._s = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     return this.source.subscribe(new to(e, this._s))
    }, t
   }(dr),
   to = function(e) {
    function t(t, n) {
     this._o = t, this._s = n, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._o.onNext({
      value: e,
      timestamp: this._s.now()
     })
    }, t.prototype.error = function(e) {
     this._o.onError(e)
    }, t.prototype.completed = function() {
     this._o.onCompleted()
    }, t
   }(lr);
  Jn.timestamp = function(e) {
   return Fn(e) || (e = Zn), new eo(this, e)
  };
  var no = function(e) {
    function t(t, n) {
     this.source = t, this._sampler = n, e.call(this)
    }
    return _n(t, e), t.prototype.subscribeCore = function(e) {
     var t = {
      o: e,
      atEnd: !1,
      value: null,
      hasValue: !1,
      sourceSubscription: new kn
     };
     return t.sourceSubscription.setDisposable(this.source.subscribe(new io(t))), new Vn(t.sourceSubscription, this._sampler.subscribe(new ro(t)))
    }, t
   }(dr),
   ro = function(e) {
    function t(t) {
     this._s = t, e.call(this)
    }
    return _n(t, e), t.prototype._handleMessage = function() {
     this._s.hasValue && (this._s.hasValue = !1, this._s.o.onNext(this._s.value)), this._s.atEnd && this._s.o.onCompleted()
    }, t.prototype.next = function() {
     this._handleMessage()
    }, t.prototype.error = function(e) {
     this._s.onError(e)
    }, t.prototype.completed = function() {
     this._handleMessage()
    }, t
   }(lr),
   io = function(e) {
    function t(t) {
     this._s = t, e.call(this)
    }
    return _n(t, e), t.prototype.next = function(e) {
     this._s.hasValue = !0, this._s.value = e
    }, t.prototype.error = function(e) {
     this._s.o.onError(e)
    }, t.prototype.completed = function() {
     this._s.atEnd = !0, this._s.sourceSubscription.dispose()
    }, t
   }(lr);
  Jn.sample = function(e, t) {
   return Fn(t) || (t = Zn), "number" == typeof e ? new no(this, Ki(e, t)) : new no(this, e)
  };
  var oo = ft.TimeoutError = function(e) {
   this.message = e || "Timeout has occurred", this.name = "TimeoutError", Error.call(this)
  };
  oo.prototype = Object.create(Error.prototype), Jn.timeout = function() {
   var e = arguments[0];
   if (e instanceof Date || "number" == typeof e) return nt(this, e, arguments[1], arguments[2]);
   if (hr.isObservable(e) || _t(e)) return tt(this, e, arguments[1], arguments[2]);
   throw new Error("Invalid arguments")
  }, Jn.throttle = function(e, t) {
   Fn(t) || (t = Zn);
   var n = +e || 0;
   if (0 >= n) throw new RangeError("windowDuration cannot be less or equal zero.");
   var r = this;
   return new ho(function(e) {
    var i = 0;
    return r.subscribe(function(r) {
     var o = t.now();
     (0 === i || o - i >= n) && (i = o, e.onNext(r))
    }, function(t) {
     e.onError(t)
    }, function() {
     e.onCompleted()
    })
   }, r)
  };
  var ao = function(e) {
   function t(t, n) {
    this.source = t, this.controller = new mo, this.paused = !0, this.pauser = n && n.subscribe ? this.controller.merge(n) : this.controller, e.call(this)
   }
   return _n(t, e), t.prototype._subscribe = function(e) {
    var t = this.source.publish(),
     n = t.subscribe(e),
     r = An,
     i = this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(e) {
      e ? r = t.connect() : (r.dispose(), r = An)
     });
    return new Ln([n, r, i])
   }, t.prototype.pause = function() {
    this.paused = !0, this.controller.onNext(!1)
   }, t.prototype.resume = function() {
    this.paused = !1, this.controller.onNext(!0)
   }, t
  }(hr);
  Jn.pausable = function(e) {
   return new ao(this, e)
  };
  var so = function(e) {
   function t(t, n) {
    this.source = t, this.controller = new mo, this.paused = !0, this.pauser = n && n.subscribe ? this.controller.merge(n) : this.controller, e.call(this)
   }
   return _n(t, e), t.prototype._subscribe = function(e) {
    function t() {
     for (; i.length > 0;) e.onNext(i.shift())
    }
    var r, i = [],
     o = rt(this.source, this.pauser.startWith(!this.paused).distinctUntilChanged(), function(e, t) {
      return {
       data: e,
       shouldFire: t
      }
     }).subscribe(function(o) {
      r !== n && o.shouldFire !== r ? (r = o.shouldFire, o.shouldFire && t()) : (r = o.shouldFire, o.shouldFire ? e.onNext(o.data) : i.push(o.data))
     }, function(n) {
      t(), e.onError(n)
     }, function() {
      t(), e.onCompleted()
     });
    return o
   }, t.prototype.pause = function() {
    this.paused = !0, this.controller.onNext(!1)
   }, t.prototype.resume = function() {
    this.paused = !1, this.controller.onNext(!0)
   }, t
  }(hr);
  Jn.pausableBuffered = function(e) {
   return new so(this, e)
  };
  var uo = function(e) {
    function t(t, n, r) {
     e.call(this), this.subject = new lo(n, r), this.source = t.multicast(this.subject).refCount()
    }
    return _n(t, e), t.prototype._subscribe = function(e) {
     return this.source.subscribe(e)
    }, t.prototype.request = function(e) {
     return this.subject.request(null == e ? -1 : e)
    }, t
   }(hr),
   lo = function(e) {
    function t(t, n) {
     null == t && (t = !0), e.call(this), this.subject = new mo, this.enableQueue = t, this.queue = t ? [] : null, this.requestedCount = 0, this.requestedDisposable = null, this.error = null, this.hasFailed = !1, this.hasCompleted = !1, this.scheduler = n || qn
    }
    return _n(t, e), Sn(t.prototype, sr, {
     _subscribe: function(e) {
      return this.subject.subscribe(e)
     },
     onCompleted: function() {
      this.hasCompleted = !0, this.enableQueue && 0 !== this.queue.length ? this.queue.push(er.createOnCompleted()) : (this.subject.onCompleted(), this.disposeCurrentRequest())
     },
     onError: function(e) {
      this.hasFailed = !0, this.error = e, this.enableQueue && 0 !== this.queue.length ? this.queue.push(er.createOnError(e)) : (this.subject.onError(e), this.disposeCurrentRequest())
     },
     onNext: function(e) {
      this.requestedCount <= 0 ? this.enableQueue && this.queue.push(er.createOnNext(e)) : (0 === this.requestedCount-- && this.disposeCurrentRequest(), this.subject.onNext(e))
     },
     _processRequest: function(e) {
      if (this.enableQueue)
       for (; this.queue.length > 0 && (e > 0 || "N" !== this.queue[0].kind);) {
        var t = this.queue.shift();
        t.accept(this.subject), "N" === t.kind ? e-- : (this.disposeCurrentRequest(), this.queue = [])
       }
      return e
     },
     request: function(e) {
      this.disposeCurrentRequest();
      var t = this;
      return this.requestedDisposable = this.scheduler.schedule(e, function(e, n) {
       var r = t._processRequest(n),
        i = t.hasCompleted || t.hasFailed;
       return !i && r > 0 ? (t.requestedCount = r, Mn(function() {
        t.requestedCount = 0
       })) : void 0
      }), this.requestedDisposable
     },
     disposeCurrentRequest: function() {
      this.requestedDisposable && (this.requestedDisposable.dispose(), this.requestedDisposable = null)
     }
    }), t
   }(hr);
  Jn.controlled = function(e, t) {
   return e && Fn(e) && (t = e, e = !0), null == e && (e = !0), new uo(this, e, t)
  }, Jn.pipe = function(e) {
   function t() {
    n.resume()
   }
   var n = this.pausableBuffered();
   return e.addListener("drain", t), n.subscribe(function(t) {
    !e.write(t) && n.pause()
   }, function(t) {
    e.emit("error", t)
   }, function() {
    !e._isStdio && e.end(), e.removeListener("drain", t)
   }), n.resume(), e
  };
  var co = function(e) {
   function t(t, n) {
    this._o = t, this._xform = n, e.call(this)
   }
   return _n(t, e), t.prototype.next = function(e) {
    var t = Ct(this._xform["@@transducer/step"]).call(this._xform, this._o, e);
    t === St && this._o.onError(t.e)
   }, t.prototype.error = function(e) {
    this._o.onError(e)
   }, t.prototype.completed = function() {
    this._xform["@@transducer/result"](this._o)
   }, t
  }(lr);
  Jn.transduce = function(e) {
   var t = this;
   return new ho(function(n) {
    var r = e(it(n));
    return t.subscribe(new co(n, r))
   }, t)
  };
  var ho = ft.AnonymousObservable = function(e) {
    function t(e) {
     return e && _t(e.dispose) ? e : _t(e) ? Mn(e) : An
    }

    function n(e, n) {
     var r = n[0],
      i = n[1],
      o = Ct(i.__subscribe).call(i, r);
     o !== St || r.fail(St.e) || a(St.e), r.setDisposable(t(o))
    }

    function r(t, n) {
     this.source = n, this.__subscribe = t, e.call(this)
    }
    return _n(r, e), r.prototype._subscribe = function(e) {
     var t = new po(e),
      r = [t, this];
     return qn.scheduleRequired() ? qn.schedule(r, n) : n(null, r), t
    }, r
   }(hr),
   po = function(e) {
    function t(t) {
     e.call(this), this.observer = t, this.m = new kn
    }
    _n(t, e);
    var n = t.prototype;
    return n.next = function(e) {
     var t = Ct(this.observer.onNext).call(this.observer, e);
     t === St && (this.dispose(), a(t.e))
    }, n.error = function(e) {
     var t = Ct(this.observer.onError).call(this.observer, e);
     this.dispose(), t === St && a(t.e)
    }, n.completed = function() {
     var e = Ct(this.observer.onCompleted).call(this.observer);
     this.dispose(), e === St && a(e.e)
    }, n.setDisposable = function(e) {
     this.m.setDisposable(e)
    }, n.getDisposable = function() {
     return this.m.getDisposable()
    }, n.dispose = function() {
     e.prototype.dispose.call(this), this.m.dispose()
    }, t
   }(lr),
   fo = function(e, t) {
    this._s = e, this._o = t
   };
  fo.prototype.dispose = function() {
   if (!this._s.isDisposed && null !== this._o) {
    var e = this._s.observers.indexOf(this._o);
    this._s.observers.splice(e, 1), this._o = null
   }
  };
  var mo = ft.Subject = function(e) {
    function t() {
     e.call(this), this.isDisposed = !1, this.isStopped = !1, this.observers = [], this.hasError = !1
    }
    return _n(t, e), Sn(t.prototype, sr.prototype, {
     _subscribe: function(e) {
      return Rn(this), this.isStopped ? this.hasError ? (e.onError(this.error), An) : (e.onCompleted(), An) : (this.observers.push(e), new fo(this, e))
     },
     hasObservers: function() {
      return Rn(this), this.observers.length > 0
     },
     onCompleted: function() {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0;
       for (var e = 0, t = i(this.observers), n = t.length; n > e; e++) t[e].onCompleted();
       this.observers.length = 0
      }
     },
     onError: function(e) {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0, this.error = e, this.hasError = !0;
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) n[t].onError(e);
       this.observers.length = 0
      }
     },
     onNext: function(e) {
      if (Rn(this), !this.isStopped)
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) n[t].onNext(e)
     },
     dispose: function() {
      this.isDisposed = !0, this.observers = null
     }
    }), t.create = function(e, t) {
     return new vo(e, t)
    }, t
   }(hr),
   go = ft.AsyncSubject = function(e) {
    function t() {
     e.call(this), this.isDisposed = !1, this.isStopped = !1, this.hasValue = !1, this.observers = [], this.hasError = !1
    }
    return _n(t, e), Sn(t.prototype, sr.prototype, {
     _subscribe: function(e) {
      return Rn(this), this.isStopped ? (this.hasError ? e.onError(this.error) : this.hasValue ? (e.onNext(this.value), e.onCompleted()) : e.onCompleted(), An) : (this.observers.push(e), new fo(this, e))
     },
     hasObservers: function() {
      return Rn(this), this.observers.length > 0
     },
     onCompleted: function() {
      var e, t;
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0;
       var n = i(this.observers),
        t = n.length;
       if (this.hasValue)
        for (e = 0; t > e; e++) {
         var r = n[e];
         r.onNext(this.value), r.onCompleted()
        } else
         for (e = 0; t > e; e++) n[e].onCompleted();
       this.observers.length = 0
      }
     },
     onError: function(e) {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0, this.hasError = !0, this.error = e;
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) n[t].onError(e);
       this.observers.length = 0
      }
     },
     onNext: function(e) {
      Rn(this), this.isStopped || (this.value = e, this.hasValue = !0)
     },
     dispose: function() {
      this.isDisposed = !0, this.observers = null, this.error = null, this.value = null
     }
    }), t
   }(hr),
   vo = ft.AnonymousSubject = function(e) {
    function t(t, n) {
     this.observer = t, this.observable = n, e.call(this)
    }
    return _n(t, e), Sn(t.prototype, sr.prototype, {
     _subscribe: function(e) {
      return this.observable.subscribe(e)
     },
     onCompleted: function() {
      this.observer.onCompleted()
     },
     onError: function(e) {
      this.observer.onError(e)
     },
     onNext: function(e) {
      this.observer.onNext(e)
     }
    }), t
   }(hr),
   yo = ft.BehaviorSubject = function(e) {
    function t(t) {
     e.call(this), this.value = t, this.observers = [], this.isDisposed = !1, this.isStopped = !1, this.hasError = !1
    }
    return _n(t, e), Sn(t.prototype, sr.prototype, {
     _subscribe: function(e) {
      return Rn(this), this.isStopped ? (this.hasError ? e.onError(this.error) : e.onCompleted(), An) : (this.observers.push(e), e.onNext(this.value), new fo(this, e))
     },
     getValue: function() {
      return Rn(this), this.hasError && a(this.error), this.value
     },
     hasObservers: function() {
      return Rn(this), this.observers.length > 0
     },
     onCompleted: function() {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0;
       for (var e = 0, t = i(this.observers), n = t.length; n > e; e++) t[e].onCompleted();
       this.observers.length = 0
      }
     },
     onError: function(e) {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0, this.hasError = !0, this.error = e;
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) n[t].onError(e);
       this.observers.length = 0
      }
     },
     onNext: function(e) {
      if (Rn(this), !this.isStopped) {
       this.value = e;
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) n[t].onNext(e)
      }
     },
     dispose: function() {
      this.isDisposed = !0, this.observers = null, this.value = null, this.error = null
     }
    }), t
   }(hr),
   bo = ft.ReplaySubject = function(e) {
    function t(e, t) {
     return Mn(function() {
      t.dispose(), !e.isDisposed && e.observers.splice(e.observers.indexOf(t), 1)
     })
    }

    function n(t, n, i) {
     this.bufferSize = null == t ? r : t, this.windowSize = null == n ? r : n, this.scheduler = i || qn, this.q = [], this.observers = [], this.isStopped = !1, this.isDisposed = !1, this.hasError = !1, this.error = null, e.call(this)
    }
    var r = Math.pow(2, 53) - 1;
    return _n(n, e), Sn(n.prototype, sr.prototype, {
     _subscribe: function(e) {
      Rn(this);
      var n = new pr(this.scheduler, e),
       r = t(this, n);
      this._trim(this.scheduler.now()), this.observers.push(n);
      for (var i = 0, o = this.q.length; o > i; i++) n.onNext(this.q[i].value);
      return this.hasError ? n.onError(this.error) : this.isStopped && n.onCompleted(), n.ensureActive(), r
     },
     hasObservers: function() {
      return Rn(this), this.observers.length > 0
     },
     _trim: function(e) {
      for (; this.q.length > this.bufferSize;) this.q.shift();
      for (; this.q.length > 0 && e - this.q[0].interval > this.windowSize;) this.q.shift()
     },
     onNext: function(e) {
      if (Rn(this), !this.isStopped) {
       var t = this.scheduler.now();
       this.q.push({
        interval: t,
        value: e
       }), this._trim(t);
       for (var n = 0, r = i(this.observers), o = r.length; o > n; n++) {
        var a = r[n];
        a.onNext(e), a.ensureActive()
       }
      }
     },
     onError: function(e) {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0, this.error = e, this.hasError = !0;
       var t = this.scheduler.now();
       this._trim(t);
       for (var n = 0, r = i(this.observers), o = r.length; o > n; n++) {
        var a = r[n];
        a.onError(e), a.ensureActive()
       }
       this.observers.length = 0
      }
     },
     onCompleted: function() {
      if (Rn(this), !this.isStopped) {
       this.isStopped = !0;
       var e = this.scheduler.now();
       this._trim(e);
       for (var t = 0, n = i(this.observers), r = n.length; r > t; t++) {
        var o = n[t];
        o.onCompleted(), o.ensureActive()
       }
       this.observers.length = 0
      }
     },
     dispose: function() {
      this.isDisposed = !0, this.observers = null
     }
    }), n
   }(hr);
  ft.Pauser = function(e) {
   function t() {
    e.call(this)
   }
   return _n(t, e), t.prototype.pause = function() {
    this.onNext(!1)
   }, t.prototype.resume = function() {
    this.onNext(!0)
   }, t
  }(mo), e.Rx = ft;
  var wo = h()
 }).call(this, o, t);
 var a, s = o.Rx;
 ! function(e) {
  var n;
  ! function(e) {
   e.Rx = s, e.Promise = t;
   var n;
   ! function(e) {
    e.CIF = i
   }(n = e.Formats || (e.Formats = {}))
  }(n = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   e.VERSION = {
    number: "2.4.11",
    date: "Dec 11 2016"
   }
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n = function() {
    function e(e) {
     this.computation = e
    }
    return e.prototype.bind = function(t) {
     var n = this;
     return e.create(function(e) {
      n.run(e).result.then(function(n) {
       t(n).run(e).result.then(e.resolve).catch(e.reject)
      }).catch(e.reject)
     })
    }, e.prototype.map = function(t) {
     var n = this;
     return e.create(function(e) {
      n.run(e).result.then(function(n) {
       return e.resolve(t(n))
      }).catch(e.reject)
     })
    }, e.prototype.run = function(n) {
     var r = this,
      i = n ? n : new e.Context;
     return {
      progress: i.progressStream,
      result: new t.Promise(function(e, t) {
       try {
        i.__push(e, t), r.computation(i)
       } catch (n) {
        i.reject(n)
       }
      })
     }
    }, e
   }();
   t.Computation = n,
    function(n) {
     function r(e) {
      return new n(e)
     }

     function i(e) {
      return r(function(t) {
       return t.resolve(e)
      })
     }

     function o(t, n, r) {
      return void 0 === r && (r = 0), new e.Core.Promise(function(e) {
       return t.schedule(function() {
        try {
         e(n())
        } finally {
         e(void 0)
        }
       }, r)
      })
     }
     n.create = r, n.resolve = i, n.schedule = o;
     var a = function() {
      function e() {
       var e = this;
       this._abortRequested = !1, this._abortRequest = function() {
        return e._abortRequested = !0
       }, this.progressTick = new t.Rx.Subject, this.progress = {
        message: "Working...",
        current: 0,
        max: 0,
        isIndeterminate: !1,
        requestAbort: void 0
       }, this.progressStream = new t.Rx.BehaviorSubject(this.progress), this.promiseStack = [], this.resolve = this._resolve.bind(this), this.reject = this._reject.bind(this), this.progressTick.throttle(1e3 / 30).subscribe(function(t) {
        e.progressStream.onNext({
         message: t.message,
         isIndeterminate: t.isIndeterminate,
         current: t.current,
         max: t.max,
         requestAbort: t.requestAbort
        })
       })
      }
      return e.prototype.schedule = function(e, t) {
       var n = this;
       void 0 === t && (t = 0), setTimeout(function() {
        try {
         e()
        } catch (t) {
         n.reject(t)
        }
       }, t)
      }, Object.defineProperty(e.prototype, "abortRequested", {
       get: function() {
        return this._abortRequested
       },
       enumerable: !0,
       configurable: !0
      }), e.prototype.setRequestAbort = function(e) {
       this.progress.requestAbort = e
      }, Object.defineProperty(e.prototype, "abortRequest", {
       get: function() {
        return this._abortRequest
       },
       enumerable: !0,
       configurable: !0
      }), e.prototype.update = function(e, t, n, r) {
       void 0 === n && (n = 0 / 0), void 0 === r && (r = 0 / 0), this.progress.message = e, this.progress.requestAbort = t, isNaN(n) ? this.progress.isIndeterminate = !0 : (this.progress.isIndeterminate = !1, this.progress.current = n, this.progress.max = r), this.progressTick.onNext(this.progress)
      }, e.prototype.__push = function(e, t) {
       this.promiseStack.push({
        resolve: e,
        reject: t
       })
      }, e.prototype._resolve = function(e) {
       var t = this.promiseStack.pop();
       if (!t) throw "Bug in code somewhere, Computation.resolve/reject called too many times.";
       t.resolve(e), this.promiseStack.length || (this.progressTick.onCompleted(), this.progressStream.onCompleted())
      }, e.prototype._reject = function(e) {
       var t = this.promiseStack.pop();
       if (!t) throw "Bug in code somewhere, Computation.resolve/reject called too many times.";
       t.reject(e), this.promiseStack.length || (this.progressTick.onCompleted(), this.progressStream.onCompleted())
      }, e.prototype.abort = function() {
       this.reject("Aborted.")
      }, e
     }();
     n.Context = a
    }(n = t.Computation || (t.Computation = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e, t, n) {
     for (var r, i = t, o = e, a = n, s = 0, u = Object.keys(t); s < u.length; s++) {
      var l = u[s];
      r = i[l], void 0 !== r ? o[l] = r : n && (o[l] = a[l])
     }
     if (n)
      for (var c = 0, h = Object.keys(n); c < h.length; c++) {
       var l = h[c];
       r = o[l], void 0 === r && (o[l] = a[l])
      }
     return e
    }

    function n(e, t) {
     var n, r, i, o, a, s, u, l = 0,
      c = 0,
      h = !0,
      p = !1;
     t = Math.max(0, t) || 0;
     var d = function() {
       var c = t - (performance.now() - o);
       if (0 >= c) {
        r && clearTimeout(r);
        var h = u;
        r = s = u = void 0, h && (l = performance.now(), i = e.apply(a, n), s || r || (n = a = null))
       } else s = setTimeout(d, c)
      },
      f = function() {
       s && clearTimeout(s), r = s = u = void 0, (h || c !== t) && (l = performance.now(), i = e.apply(a, n), s || r || (n = a = null))
      };
     return function() {
      n = arguments, o = performance.now(), a = this, u = h && (s || !p);
      var m = !1,
       g = !1;
      if (0 === c);
      else {
       r || p || (l = o);
       var v = c - (o - l),
        y = 0 >= v;
       y ? (r && (r = clearTimeout(r)), l = o, i = e.apply(a, n)) : r || (r = setTimeout(f, v))
      }
      return m && s ? s = clearTimeout(s) : s || t === c || (s = setTimeout(d, t)), g && (m = !0, i = e.apply(a, n)), !m || s || r || (n = a = null), i
     }
    }
    e.extend = t, e.debounce = n
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     var t = new Int32Array(e.size);
     return e.forEach(function(e) {
      this.array[this.index++] = e
     }, {
      array: t,
      index: 0
     }), Array.prototype.sort.call(t, function(e, t) {
      return e - t
     }), t
    }

    function n(e) {
     for (var t = [], n = 0; e > n; n++) t[n] = 0;
     return t
    }

    function r(e) {
     var t = [];
     if (!e) return t;
     t[0] = .1;
     for (var n = 0; e > n; n++) t[n] = 0;
     return t
    }
    e.integerSetToSortedTypedArray = t, e.makeNativeIntArray = n, e.makeNativeFloatArray = r;
    var i;
    ! function(e) {
     function t(e) {
      return e.creator && e.chunkSize
     }

     function n(e, t, n, r, i) {
      return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.current[e.currentIndex++] = r, e.current[e.currentIndex++] = i, e.elementCount++
     }

     function r(e, t, n, r) {
      return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.current[e.currentIndex++] = r, e.elementCount++
     }

     function i(e, t, n) {
      return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.current[e.currentIndex++] = n, e.elementCount++
     }

     function o(e, t) {
      return e.currentIndex >= e.chunkSize && (e.currentIndex = 0, e.current = e.creator(e.chunkSize), e.parts[e.parts.length] = e.current), e.current[e.currentIndex++] = t, e.elementCount++
     }

     function a(e) {
      var t, n = e.creator(e.elementSize * e.elementCount),
       r = (e.parts.length - 1) * e.chunkSize,
       i = 0;
      if (e.parts.length > 1)
       if (e.parts[0].buffer)
        for (var o = 0; o < e.parts.length - 1; o++) n.set(e.parts[o], e.chunkSize * o);
       else
        for (var o = 0; o < e.parts.length - 1; o++) {
         i = e.chunkSize * o, t = e.parts[o];
         for (var a = 0; a < e.chunkSize; a++) n[i + a] = t[a]
        }
      if (e.current.buffer && e.currentIndex >= e.chunkSize) n.set(e.current, e.chunkSize * (e.parts.length - 1));
      else
       for (var o = 0; o < e.currentIndex; o++) n[r + o] = e.current[o];
      return n
     }

     function s(e) {
      return void 0 === e && (e = 262144), f(function(e) {
       return new Float32Array(e)
      }, e, 3)
     }

     function u(e) {
      return void 0 === e && (e = 262144), f(function(e) {
       return new Uint32Array(e)
      }, e, 3)
     }

     function l(e) {
      return void 0 === e && (e = 131072), f(function(e) {
       return new Int32Array(e)
      }, e, 2)
     }

     function c(e) {
      return void 0 === e && (e = 131072), f(function(e) {
       return new Int32Array(e)
      }, e, 1)
     }

     function h(e) {
      return void 0 === e && (e = 131072), f(function(e) {
       return new Int32Array(e)
      }, e, 1)
     }

     function p(e) {
      return void 0 === e && (e = 131072), f(function(e) {
       return new Float32Array(e)
      }, e, 1)
     }

     function d(e) {
      return void 0 === e && (e = 131072), f(function() {
       return []
      }, e, 1)
     }

     function f(e, t, n) {
      t = 0 | t, 0 >= t && (t = 1);
      var r = t * n,
       i = e(r);
      return {
       elementSize: n,
       chunkSize: r,
       creator: e,
       current: i,
       parts: [i],
       currentIndex: 0,
       elementCount: 0
      }
     }
     e.is = t, e.add4 = n, e.add3 = r, e.add2 = i, e.add = o, e.compact = a, e.forVertex3D = s, e.forIndexBuffer = u, e.forTokenIndices = l, e.forIndices = c, e.forInt32 = h, e.forFloat32 = p, e.forArray = d, e.create = f
    }(i = e.ChunkedArray || (e.ChunkedArray = {}));
    var o;
    ! function(e) {
     function t(e, t, n, r) {
      var i = e.array;
      i[e.currentIndex++] = t, i[e.currentIndex++] = n, i[e.currentIndex++] = r, e.elementCount++
     }

     function n(e, t, n) {
      var r = e.array;
      r[e.currentIndex++] = t, r[e.currentIndex++] = n, e.elementCount++
     }

     function r(e, t) {
      e.array[e.currentIndex++] = t, e.elementCount++
     }

     function i(e) {
      return h(function(e) {
       return new Float32Array(e)
      }, e, 3)
     }

     function o(e) {
      return h(function(e) {
       return new Int32Array(e)
      }, e, 3)
     }

     function a(e) {
      return h(function(e) {
       return new Int32Array(e)
      }, e, 2)
     }

     function s(e) {
      return h(function(e) {
       return new Int32Array(e)
      }, e, 1)
     }

     function u(e) {
      return h(function(e) {
       return new Int32Array(e)
      }, e, 1)
     }

     function l(e) {
      return h(function(e) {
       return new Float32Array(e)
      }, e, 1)
     }

     function c(e) {
      return h(function() {
       return []
      }, e, 1)
     }

     function h(e, t, n) {
      return t = 0 | t, {
       array: e(t * n),
       currentIndex: 0,
       elementCount: 0
      }
     }
     e.add3 = t, e.add2 = n, e.add = r, e.forVertex3D = i, e.forIndexBuffer = o, e.forTokenIndices = a, e.forIndices = s, e.forInt32 = u, e.forFloat32 = l, e.forArray = c, e.create = h
    }(o = e.ArrayBuilder || (e.ArrayBuilder = {}))
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     function t(e, t, r) {
      for (; r > t && 32 === e.charCodeAt(t);) t++;
      return n(e, t, r)
     }

     function n(e, t, n) {
      var r = 0,
       i = 1;
      for (45 === e.charCodeAt(t) && (i = -1, t++); n > t; t++) {
       var o = e.charCodeAt(t) - 48;
       if (o > 9 || 0 > o) return i * r | 0;
       r = 10 * r + o | 0
      }
      return i * r
     }

     function r(e, t, r, i) {
      return e * Math.pow(10, n(t, r, i))
     }

     function i(e, t, n) {
      for (; n > t && 32 === e.charCodeAt(t);) t++;
      return o(e, t, n)
     }

     function o(e, t, n) {
      var i = 1,
       o = 0,
       a = 0,
       s = 1;
      for (45 === e.charCodeAt(t) && (i = -1, ++t); n > t;) {
       var u = e.charCodeAt(t) - 48;
       if (!(u >= 0 && 10 > u)) {
        if (-2 === u) {
         for (++t; n > t;) {
          if (u = e.charCodeAt(t) - 48, !(u >= 0 && 10 > u)) return 53 === u || 21 === u ? r(i * (o + a / s), e, t + 1, n) : i * (o + a / s);
          a = 10 * a + u, s = 10 * s, ++t
         }
         return i * (o + a / s)
        }
        if (53 === u || 21 === u) return r(i * o, e, t + 1, n);
        break
       }
       o = 10 * o + u, ++t
      }
      return i * o
     }
     e.parseIntSkipTrailingWhitespace = t, e.parseInt = n, e.parseScientific = r, e.parseFloatSkipTrailingWhitespace = i, e.parseFloat = o
    }(t = e.FastNumberParsers || (e.FastNumberParsers = {}))
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     e.perfGetTime = function() {
      return "undefined" != typeof window && window.performance ? function() {
       return window.performance.now()
      } : "undefined" != typeof process && "undefined" !== process.hrtime ? function() {
       var e = process.hrtime();
       return 1e3 * e[0] + e[1] / 1e6
      } : function() {
       return +new Date
      }
     }()
    }(t || (t = {}));
    var n = function() {
     function e() {
      this.starts = new Map, this.ends = new Map
     }
     return e.currentTime = function() {
      return t.perfGetTime()
     }, e.prototype.start = function(e) {
      this.starts.set(e, t.perfGetTime())
     }, e.prototype.end = function(e) {
      this.ends.set(e, t.perfGetTime())
     }, e.format = function(e) {
      if (isNaN(e)) return "n/a";
      for (var t = Math.floor(e / 36e5), n = Math.floor(e / 6e4 % 60), r = Math.floor(e / 1e3 % 60), i = Math.floor(e % 1e3).toString(); i.length < 3;) i = "0" + i;
      return t > 0 ? t + "h" + n + "m" + r + "." + i + "s" : n > 0 ? n + "m" + r + "." + i + "s" : r > 0 ? r + "." + i + "s" : e.toFixed(0) + "ms"
     }, e.prototype.formatTime = function(t) {
      return e.format(this.time(t))
     }, e.prototype.formatTimeSum = function() {
      for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
      return e.format(this.timeSum.apply(this, t))
     }, e.prototype.time = function(e) {
      var t = this.starts.get(e),
       n = this.ends.get(e);
      return this.starts.delete(e), this.ends.delete(e), n - t
     }, e.prototype.timeSum = function() {
      for (var e = this, t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
      for (var r = 0, i = 0, o = t.map(function(t) {
        return e.ends.get(t) - e.starts.get(t)
       }); i < o.length; i++) {
       var a = o[i];
       r += a
      }
      return r
     }, e
    }();
    e.PerformanceMonitor = n
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     function t(e) {
      return e.name && e.parse
     }

     function n(e, t) {
      t = t.toLowerCase().trim();
      for (var n = 0, r = e; n < r.length; n++)
       for (var i = r[n], o = 0, a = i.shortcuts; o < a.length; o++) {
        var s = a[o];
        if (s.toLowerCase() === t) return i
       }
      return void 0
     }

     function r(e) {
      return new RegExp(e.extensions.map(function(e) {
       return "(\\" + e + ")"
      }).join("|") + "(\\.gz){0,1}$", "i")
     }

     function i(e) {
      return e.map(function(e) {
       return e.extensions.map(function(e) {
        return e + "," + e + ".gz"
       }).join(",")
      }).join(",")
     }

     function o(e, t) {
      for (var n = 0, i = t; n < i.length; n++) {
       var o = i[n];
       if (r(o).test(e)) return o
      }
      return void 0
     }
     e.is = t, e.fromShortcut = n, e.formatRegExp = r, e.formatFileFilters = i, e.getFormat = o
    }(t = e.FormatInfo || (e.FormatInfo = {}));
    var n;
    ! function(e) {
     function t(e, t) {
      return void 0 === t && (t = -1), new r(e, t)
     }

     function n(e, t) {
      return void 0 === t && (t = []), new i(e, t)
     }
     e.error = t, e.success = n
    }(n = e.ParserResult || (e.ParserResult = {}));
    var r = function() {
     function e(e, t) {
      this.message = e, this.line = t, this.isError = !0
     }
     return e.prototype.toString = function() {
      return this.line >= 0 ? "[Line " + this.line + "] " + this.message : this.message
     }, e
    }();
    e.ParserError = r;
    var i = function() {
     function e(e, t) {
      this.result = e, this.warnings = t, this.isError = !1
     }
     return e
    }();
    e.ParserSuccess = i;
    var o;
    ! function(e) {
     function t(e) {
      var t = new Int32Array(1.61 * e.tokens.length | 0);
      t.set(e.tokens), e.tokens = t, e.tokensLenMinus2 = t.length - 2 | 0
     }

     function n(e, n, r) {
      e.count >= e.tokensLenMinus2 && t(e), e.tokens[e.count++] = n, e.tokens[e.count++] = r
     }

     function r(e) {
      return {
       tokensLenMinus2: e - 2 | 0,
       count: 0,
       tokens: new Int32Array(e)
      }
     }
     e.addToken = n, e.create = r
    }(o = e.TokenIndexBuilder || (e.TokenIndexBuilder = {}));
    var a;
    ! function(e) {
     function t() {
      return new Map
     }

     function n(e, t) {
      if (t.length > 6) return t;
      var n = e.get(t);
      return void 0 !== n ? n : (e.set(t, t), t)
     }
     e.create = t, e.get = n
    }(a = e.ShortStringPool || (e.ShortStringPool = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     var n;
     ! function(t) {
      function n(t, n, r, i) {
       var o, a, s, u = e.Geometry.LinearAlgebra.Matrix4.identity();
       for (o = 1; 3 >= o; o++) {
        for (a = 1; 3 >= a; a++) s = n + "[" + o + "][" + a + "]", e.Geometry.LinearAlgebra.Matrix4.setValue(u, o - 1, a - 1, t.getColumn(n + "[" + o + "][" + a + "]").getFloat(i));
        e.Geometry.LinearAlgebra.Matrix4.setValue(u, o - 1, 3, t.getColumn(r + "[" + o + "]").getFloat(i))
       }
       return u
      }

      function r(e, t, n) {
       var r = 0;
       if (!n || !n.isDefined) return t;
       for (r = e + 1; t > r && n.areValuesEqual(r - 1, r); r++);
       return r
      }

      function i(e) {
       for (var t = new Map, n = 0, r = C; n < r.length; n++) {
        var i = r[n];
        t.set(i, e.getColumn(i))
       }
       return t
      }

      function o(t, n, i) {
       for (var o = r(t, n, i.get("pdbx_PDB_model_num")), a = new e.Structure.DataTableBuilder(o - t), s = a.addColumn("id", function(e) {
         return new Int32Array(e)
        }), u = i.get("id"), l = a.addColumn("x", function(e) {
         return new Float32Array(e)
        }), c = i.get("Cartn_x"), h = a.addColumn("y", function(e) {
         return new Float32Array(e)
        }), p = i.get("Cartn_y"), d = a.addColumn("z", function(e) {
         return new Float32Array(e)
        }), f = i.get("Cartn_z"), m = a.addColumn("altLoc", function(e) {
         return new Array(e)
        }), g = i.get("label_alt_id"), v = a.addColumn("rowIndex", function(e) {
         return new Int32Array(e)
        }), y = a.addColumn("residueIndex", function(e) {
         return new Int32Array(e)
        }), b = a.addColumn("chainIndex", function(e) {
         return new Int32Array(e)
        }), w = a.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        }), x = a.addColumn("name", function(e) {
         return new Array(e)
        }), _ = i.get("label_atom_id"), C = a.addColumn("elementSymbol", function(e) {
         return new Array(e)
        }), E = i.get("type_symbol"), T = a.addColumn("occupancy", function(e) {
         return new Float32Array(e)
        }), M = i.get("occupancy"), A = a.addColumn("tempFactor", function(e) {
         return new Float32Array(e)
        }), P = i.get("B_iso_or_equiv"), R = a.addColumn("authName", function(e) {
         return new Array(e)
        }), I = i.get("auth_atom_id"), k = (i.get("label_seq_id"), i.get("label_asym_id")), D = i.get("label_entity_id"), V = i.get("pdbx_PDB_ins_code"), L = i.get("auth_seq_id"), B = i.get("pdbx_PDB_model_num"), O = 0, N = 0, F = 0, U = t, z = t; o > z; z++) {
        var G = z - t;
        s[G] = u.getInteger(z), l[G] = c.getFloat(z), h[G] = p.getFloat(z), d[G] = f.getFloat(z), C[G] = E.getString(z) || S.ElementSymbol, x[G] = _.getString(z) || C[G], R[G] = I.getString(z) || x[G], m[G] = g.getString(z), T[G] = M.getFloat(z), A[G] = P.getFloat(z);
        var H = !1,
         j = !L.areValuesEqual(U, z) || !V.areValuesEqual(U, z);
        k.areValuesEqual(U, z) || (H = !0, j = !0), D.areValuesEqual(U, z) || (F++, H = !0, j = !0), j && N++, H && O++, v[G] = z, y[G] = N, b[G] = O, w[G] = F, U = z
       }
       var q = B.isDefined ? B.getString(t) || S.ModelId : S.ModelId;
       return {
        atoms: a.seal(),
        modelId: q,
        endRow: o
       }
      }

      function a(t, n) {
       var r = n.count,
        i = n.residueIndex,
        o = n.chainIndex,
        a = n.entityIndex,
        s = new e.Structure.DataTableBuilder(n.residueIndex[n.count - 1] + 1),
        u = new e.Structure.DataTableBuilder(n.chainIndex[n.count - 1] + 1),
        l = new e.Structure.DataTableBuilder(n.entityIndex[n.count - 1] + 1),
        c = s.addColumn("name", function(e) {
         return new Array(e)
        }),
        h = s.addColumn("seqNumber", function(e) {
         return new Int32Array(e)
        }),
        p = s.addColumn("asymId", function(e) {
         return new Array(e)
        }),
        d = s.addColumn("authName", function(e) {
         return new Array(e)
        }),
        f = s.addColumn("authSeqNumber", function(e) {
         return new Int32Array(e)
        }),
        m = s.addColumn("authAsymId", function(e) {
         return new Array(e)
        }),
        g = s.addColumn("insCode", function(e) {
         return new Array(e)
        }),
        v = s.addColumn("entityId", function(e) {
         return new Array(e)
        }),
        y = s.addColumn("isHet", function(e) {
         return new Int8Array(e)
        }),
        b = s.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        w = s.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        x = s.addColumn("chainIndex", function(e) {
         return new Int32Array(e)
        }),
        _ = s.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        }),
        C = (s.addColumn("secondaryStructureIndex", function(e) {
         return new Int32Array(e)
        }), u.addColumn("asymId", function() {
         return []
        })),
        E = u.addColumn("entityId", function() {
         return []
        }),
        T = u.addColumn("authAsymId", function() {
         return []
        }),
        M = u.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        A = u.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        P = u.addColumn("residueStartIndex", function(e) {
         return new Int32Array(e)
        }),
        R = u.addColumn("residueEndIndex", function(e) {
         return new Int32Array(e)
        }),
        I = u.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        }),
        k = l.addColumn("entityId", function() {
         return []
        }),
        D = l.addColumn("entityType", function() {
         return []
        }),
        V = l.addColumn("type", function() {
         return []
        }),
        L = l.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        B = l.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        O = l.addColumn("residueStartIndex", function(e) {
         return new Int32Array(e)
        }),
        N = l.addColumn("residueEndIndex", function(e) {
         return new Int32Array(e)
        }),
        F = l.addColumn("chainStartIndex", function(e) {
         return new Int32Array(e)
        }),
        U = l.addColumn("chainEndIndex", function(e) {
         return new Int32Array(e)
        }),
        z = t.get("label_comp_id"),
        G = t.get("label_seq_id"),
        H = t.get("label_asym_id"),
        j = t.get("auth_comp_id"),
        q = t.get("auth_seq_id"),
        W = t.get("auth_asym_id"),
        X = t.get("group_PDB"),
        Y = t.get("label_entity_id"),
        Q = t.get("pdbx_PDB_ins_code"),
        Z = 0,
        K = 0,
        $ = 0,
        J = 0,
        et = 0,
        tt = 0,
        nt = 0,
        rt = 0,
        it = 0,
        ot = 0;
       for (ot = 0; r > ot; ot++) i[ot] !== i[Z] && (c[nt] = z.getString(Z) || S.ResidueName, h[nt] = G.getInteger(Z), p[nt] = H.getString(Z) || S.AsymId, d[nt] = j.getString(Z) || c[nt], f[nt] = q.getInteger(Z), m[nt] = W.getString(Z) || p[nt], g[nt] = Q.getString(Z), v[nt] = Y.getString(Z) || S.EntityId, y[nt] = X.stringEquals(Z, "HETATM") ? 1 : 0, b[nt] = Z, w[nt] = ot, x[nt] = rt, _[nt] = it, nt++, Z = ot), o[ot] !== o[K] && (C[rt] = H.getString(K) || S.AsymId, T[rt] = W.getString(K) || C[rt], E[rt] = Y.getString(K) || S.EntityId, P[rt] = tt, R[rt] = nt, M[rt] = K, A[rt] = ot, I[rt] = it, rt++, K = ot, tt = nt), a[ot] !== a[$] && (k[it] = Y.getString($) || S.EntityId, D[it] = e.Structure.EntityType.Unknown, V[it] = "unknown", L[it] = $, B[it] = ot, O[it] = et, N[it] = nt, F[it] = J, U[it] = rt, it++, $ = ot, J = rt, et = nt);
       return k[it] = Y.getString($) || S.EntityId, D[it] = e.Structure.EntityType.Unknown, V[it] = "unknown", L[it] = $, B[it] = ot, O[it] = et, N[it] = nt + 1, F[it] = J, U[it] = rt + 1, C[rt] = H.getString(K) || S.AsymId, T[rt] = W.getString(K) || C[rt], E[rt] = Y.getString(K) || S.EntityId, P[rt] = tt, R[rt] = nt + 1, M[rt] = K, A[rt] = ot, I[rt] = it, c[nt] = z.getString(Z) || S.ResidueName, h[nt] = G.getInteger(Z), p[nt] = H.getString(Z) || S.AsymId, d[nt] = j.getString(Z) || c[nt], f[nt] = q.getInteger(Z), m[nt] = W.getString(Z) || p[nt], g[nt] = Q.getString(Z), b[nt] = Z, w[nt] = ot, x[nt] = rt, _[nt] = it, y[nt] = X.stringEquals(Z, "HETATM") ? 1 : 0, {
        residues: s.seal(),
        chains: u.seal(),
        entities: l.seal()
       }
      }

      function s(t, n) {
       var r;
       for (r = 0; r < n.count; r++) n.entityType[r] = e.Structure.EntityType.Unknown;
       if (t) {
        var i, o = {},
         a = {},
         s = t.getColumn("type"),
         u = t.getColumn("id");
        for (r = 0; r < t.rowCount; r++) {
         var l = (s.getString(r) || "").toLowerCase();
         switch (l) {
          case "polymer":
           i = e.Structure.EntityType.Polymer;
           break;
          case "non-polymer":
           i = e.Structure.EntityType.NonPolymer;
           break;
          case "water":
           i = e.Structure.EntityType.Water;
           break;
          default:
           i = e.Structure.EntityType.Unknown
         }
         var c = u.getString(r) || S.EntityId;
         o[c] = i, a[c] = "" !== l ? l : "unknown"
        }
        for (r = 0; r < n.count; r++) i = o[n.entityId[r]], void 0 !== i && (n.entityType[r] = i, n.type[r] = a[n.entityId[r]])
       }
      }

      function u(t, n, r, i) {
       return new e.Structure.PolyResidueIdentifier(n.getString(t) || S.AsymId, r.getInteger(t), i.getString(t))
      }

      function l(t, n, r, i) {
       if (r.entityType[n.entityIndex[i]] !== e.Structure.EntityType.Polymer) return !1;
       for (var o = !1, a = !1, s = t.name, u = 0, l = n.atomStartIndex[i], c = n.atomEndIndex[i]; c > l; l++) {
        var h = s[l];
        if (o || "CA" !== h ? a || "O" !== h || (a = !0, u++) : (o = !0, u++), 2 === u) break
       }
       return o && a || o && !n.isHet[i]
      }

      function c(t, n, r, i) {
       if (E[n.name[i]] || r.entityType[n.entityIndex[i]] !== e.Structure.EntityType.Polymer) return !1;
       var o = !1,
        a = !1,
        s = !1,
        u = !1,
        l = t.name,
        c = 0,
        h = n.atomStartIndex[i],
        p = n.atomEndIndex[i];
       if (p - h === 1 && !n.isHet[h] && "P" === l[h]) return !0;
       for (var d = h; p > d; d++) {
        var f = l[d];
        if (o || "O5'" !== f ? a || "C3'" !== f ? s || "N3" !== f ? u || "P" !== f || (u = !0, c++) : (s = !0, c++) : (a = !0, c++) : (o = !0, c++), 4 === c) break
       }
       return o && a && s && u
      }

      function h(t, n, r, i, o, a) {
       for (var s = n.asymId, u = n.entityIndex, h = 0, p = i, d = i, f = o; f > p;) {
        if (c(t, n, r, p)) {
         for (d = p + 1; f > d && s[p] === s[d] && u[p] === u[d] && c(t, n, r, d);) d++;
         h = 5
        } else if (l(t, n, r, p)) {
         for (d = p + 1; f > d && s[p] === s[d] && u[p] === u[d] && l(t, n, r, d);) d++;
         h = 4
        } else {
         for (d = p + 1; f > d && s[p] === s[d] && u[p] === u[d] && !c(t, n, r, d) && !l(t, n, r, d);) d++;
         h = 0
        }
        var m = new e.Structure.SecondaryStructureElement(h, new e.Structure.PolyResidueIdentifier(n.asymId[p], n.seqNumber[p], n.insCode[p]), new e.Structure.PolyResidueIdentifier(n.asymId[d - 1], n.seqNumber[d - 1], n.insCode[d - 1]));
        m.startResidueIndex = p, m.endResidueIndex = d, a[a.length] = m, p = d
       }
      }

      function p(t, n) {
       for (var r = [], i = t.authSeqNumber, o = 0, a = n; o < a.length; o++) {
        for (var s = a[o], u = s.startResidueIndex, l = s.endResidueIndex - 1, c = s.startResidueIndex; l > c; c++)
         if (i[c + 1] - i[c] !== 1) {
          var h = new e.Structure.SecondaryStructureElement(s.type, s.startResidueId, s.endResidueId, s.info);
          h.startResidueIndex = u, h.endResidueIndex = c + 1, r[r.length] = h, u = c + 1
         } if (u === s.startResidueIndex) r[r.length] = s;
        else {
         var h = new e.Structure.SecondaryStructureElement(s.type, s.startResidueId, s.endResidueId, s.info);
         h.startResidueIndex = u, h.endResidueIndex = s.endResidueIndex, r[r.length] = h
        }
       }
       return r
      }

      function d(e, t) {
       for (var n = t.residues, r = n.count, i = n.asymId, o = n.seqNumber, a = n.insCode, s = void 0, u = "", l = new Map, c = new Map, h = 0, p = e; h < p.length; h++) {
        var d = p[h];
        u = d.startResidueId.asymId + " " + d.startResidueId.seqNumber, d.startResidueId.insCode && (u += " " + d.startResidueId.insCode), l.set(u, d), u = d.endResidueId.asymId + " " + d.endResidueId.seqNumber, d.endResidueId.insCode && (u += " " + d.endResidueId.insCode), c.set(u, d)
       }
       for (var m = 0; r > m; m++) u = i[m] + " " + o[m], a[m] && (u += " " + a[m]), s = l.get(u), s && (s.startResidueIndex = m, s.endResidueIndex = m + 1), s = c.get(u), s && (s.startResidueIndex < 0 && (s.startResidueIndex = m), s.endResidueIndex = m + 1);
       s && (s.endResidueIndex = r);
       for (var g = [], v = 0, y = e; v < y.length; v++) {
        var d = y[v];
        d.startResidueIndex < 0 || d.endResidueIndex < 0 || 3 === d.type && d.length < 3 || d.endResidueIndex >= 0 && d.startResidueIndex >= 0 && (g[g.length] = d)
       }
       g.sort(function(e, t) {
        return e.startResidueIndex - t.startResidueIndex
       });
       for (var m = 0; m < g.length - 1; m++) g[m + 1].startResidueIndex - g[m].endResidueIndex === -1 && g[m + 1].startResidueIndex++;
       if (!g.length) return g;
       for (var b = [g[0]], m = 1; m < g.length; m++) {
        var w = b[b.length - 1],
         x = g[m];
        x.startResidueIndex < w.endResidueIndex ? f(w, x) : b[b.length] = x
       }
       return b
      }

      function f(e, t) {
       t.endResidueIndex > e.endResidueIndex && (e.endResidueIndex = t.endResidueIndex)
      }

      function m(t, n, r) {
       var i, o = [],
        a = [],
        s = t.getCategory("_struct_conf"),
        l = t.getCategory("_struct_sheet_range");
       if (s) {
        var c = s.getColumn("conf_type_id");
        if (c) {
         var f = s.getColumn("beg_label_asym_id"),
          m = s.getColumn("beg_label_seq_id"),
          g = s.getColumn("pdbx_beg_PDB_ins_code"),
          v = s.getColumn("end_label_asym_id"),
          y = s.getColumn("end_label_seq_id"),
          b = s.getColumn("pdbx_end_PDB_ins_code"),
          w = s.getColumn("pdbx_PDB_helix_class");
         for (i = 0; i < s.rowCount; i++) {
          var x = void 0;
          switch ((c.getString(i) || "").toUpperCase()) {
           case "HELX_P":
            x = 1;
            break;
           case "TURN_P":
            x = 2
          }
          x && (o[o.length] = new e.Structure.SecondaryStructureElement(x, u(i, f, m, g), u(i, v, y, b), {
           helixClass: w.getString(i)
          }))
         }
        }
       }
       if (l) {
        {
         var f = l.getColumn("beg_label_asym_id"),
          m = l.getColumn("beg_label_seq_id"),
          g = l.getColumn("pdbx_beg_PDB_ins_code"),
          v = l.getColumn("end_label_asym_id"),
          y = l.getColumn("end_label_seq_id"),
          b = l.getColumn("pdbx_end_PDB_ins_code"),
          _ = l.getColumn("symmetry"),
          S = l.getColumn("sheet_id");
         l.getColumn("id")
        }
        for (i = 0; i < l.rowCount; i++) o[o.length] = new e.Structure.SecondaryStructureElement(3, u(i, f, m, g), u(i, v, y, b), {
         symmetry: _.getString(i),
         sheetId: S.getString(i),
         id: S.getString(i)
        })
       }
       var C = o.length > 0 ? d(o, r) : [],
        E = r.residues,
        T = E.count;
       if (0 === C.length) return h(n, E, r.entities, 0, T, a), p(E, a);
       var M = C.length - 1;
       for (C[0].startResidueIndex > 0 && h(n, E, r.entities, 0, C[0].startResidueIndex, a), i = 0; M > i; i++) a[a.length] = C[i], C[i + 1].startResidueIndex - C[i].endResidueIndex > 0 && h(n, E, r.entities, C[i].endResidueIndex, C[i + 1].startResidueIndex, a);
       return a[a.length] = C[M], C[M].endResidueIndex < T && h(n, E, r.entities, C[M].endResidueIndex, T, a), p(E, a)
      }

      function g(e, t) {
       for (var n = e.secondaryStructureIndex, r = 0, i = 0, o = t; i < o.length; i++) {
        for (var a = o[i], s = a.startResidueIndex; s < a.endResidueIndex; s++) n[s] = r;
        r++
       }
       return n
      }

      function v(e) {
       for (var t, n = /\(?([^\(\)]+)\)?]*/g, r = [], i = []; t = n.exec(e);) r[r.length] = t[1];
       return r.forEach(function(e) {
        var t = [];
        e.split(",").forEach(function(e) {
         var n = e.indexOf("-");
         if (n > 0)
          for (var r = parseInt(e.substring(0, n)), i = parseInt(e.substr(n + 1)), o = r; i >= o; o++) t[t.length] = o.toString();
         else t[t.length] = e.trim()
        }), i[i.length] = t
       }), i
      }

      function y(t) {
       var r = t.getCategory("_pdbx_struct_assembly"),
        i = t.getCategory("_pdbx_struct_assembly_gen"),
        o = t.getCategory("_pdbx_struct_oper_list");
       if (!r || !i || !o) return void 0;
       var a, s = {},
        u = [],
        l = new Map,
        c = i.getColumn("assembly_id"),
        h = i.getColumn("oper_expression"),
        p = i.getColumn("asym_id_list");
       for (a = 0; a < i.rowCount; a++) {
        var d = c.getString(a);
        if (!d) return void 0;
        var f = l.get(d);
        f || (f = new e.Structure.AssemblyGen(d), l.set(d, f), u.push(f)), f.gens.push(new e.Structure.AssemblyGenEntry(v(h.getString(a)), p.getString(a).split(",")))
       }
       var m = o.getColumn("id"),
        g = o.getColumn("name");
       for (a = 0; a < o.rowCount; a++) {
        var y = n(o, "matrix", "vector", a);
        if (!y) return void 0;
        var b = new e.Structure.AssemblyOperator(m.getString(a), g.getString(a), y);
        s[b.id] = b
       }
       return new e.Structure.AssemblyInfo(s, u)
      }

      function b(t) {
       var r = t.getCategory("_cell"),
        i = t.getCategory("_symmetry"),
        o = t.getCategory("_atom_sites"),
        a = "",
        s = [1, 1, 1],
        u = [90, 90, 90],
        l = e.Geometry.LinearAlgebra.Matrix4.identity(),
        c = !1;
       if (!r || !i) return void 0;
       if (a = i.getColumn("space_group_name_H-M").getString(0), s = [r.getColumn("length_a").getFloat(0), r.getColumn("length_b").getFloat(0), r.getColumn("length_c").getFloat(0)], u = [r.getColumn("angle_alpha").getFloat(0), r.getColumn("angle_beta").getFloat(0), r.getColumn("angle_gamma").getFloat(0)], !a || s.every(function(e) {
         return isNaN(e) || 0 === e
        }) || s.every(function(e) {
         return isNaN(e) || 0 === e
        })) return void 0;
       var h = function(e) {
         return e * e
        },
        p = function(e) {
         return e * Math.PI / 180
        },
        d = s[0],
        f = s[1],
        m = s[2],
        g = p(u[0]),
        v = p(u[1]),
        y = p(u[2]),
        b = d * f * m * Math.sqrt(1 - h(Math.cos(g)) - h(Math.cos(v)) - h(Math.cos(y)) + 2 * Math.cos(g) * Math.cos(v) * Math.cos(y)),
        w = e.Geometry.LinearAlgebra.Matrix4.ofRows([
         [d, f * Math.cos(y), m * Math.cos(v), 0],
         [0, f * Math.sin(y), m * (Math.cos(g) - Math.cos(v) * Math.cos(y)) / Math.sin(y), 0],
         [0, 0, b / (d * f * Math.sin(y)), 0],
         [0, 0, 0, 1]
        ]),
        x = e.Geometry.LinearAlgebra.Matrix4.identity();
       if (e.Geometry.LinearAlgebra.Matrix4.invert(x, w), o) {
        var _ = n(o, "fract_transf_matrix", "fract_transf_vector", 0);
        _ && (l = _, e.Geometry.LinearAlgebra.Matrix4.areEqual(x, _, 1e-4) || (c = !0))
       } else l = x;
       return new e.Structure.SymmetryInfo(a, s, u, l, c)
      }

      function w(t) {
       if (!t || !t.rowCount) return void 0;
       for (var n = new e.Structure.ComponentBondInfo, r = t.getColumn("comp_id"), i = t.getColumn("atom_id_1"), o = t.getColumn("atom_id_2"), a = t.getColumn("value_order"), s = t.rowCount, u = n.newEntry(r.getString(0)), l = 0; s > l; l++) {
        var c = r.getString(l),
         h = i.getString(l),
         p = o.getString(l),
         d = a.getString(l);
        u.id !== c && (u = n.newEntry(c));
        var f = void 0;
        switch (d.toLowerCase()) {
         case "sing":
          f = 1;
          break;
         case "doub":
         case "delo":
          f = 2;
          break;
         case "trip":
          f = 3;
          break;
         case "quad":
          f = 4;
          break;
         default:
          f = 0
        }
        u.add(h, p, f)
       }
       return n
      }

      function x(t, n, r) {
       var i, u = o(t, n.getCategory("_atom_site").rowCount, r),
        l = u.atoms,
        c = u.modelId,
        h = u.endRow,
        p = a(r, l),
        d = n.getCategory("_entry");
       i = d && d.getColumn("id").isDefined ? d.getColumn("id").getString(0) : n.header, s(n.getCategory("_entity"), p.entities);
       var f = m(n, l, p);
       return g(p.residues, f), {
        model: new e.Structure.MoleculeModel({
         id: i,
         modelId: c,
         atoms: l,
         residues: p.residues,
         chains: p.chains,
         entities: p.entities,
         componentBonds: w(n.getCategory("_chem_comp_bond")),
         secondaryStructure: f,
         symmetryInfo: b(n),
         assemblyInfo: y(n),
         source: e.Structure.MoleculeModelSource.File
        }),
        endRow: h
       }
      }

      function _(t) {
       var n = [],
        r = t.getCategory("_atom_site"),
        o = 0;
       if (!r) throw "'_atom_site' category is missing in the input.";
       var a, s = t.getCategory("_entry"),
        u = i(r);
       for (a = s && s.getColumn("id").isDefined ? s.getColumn("id").getString(0) : t.header; o < r.rowCount;) {
        var l = x(o, t, u),
         c = l.model,
         h = l.endRow;
        n.push(c), o = h
       }
       var p = void 0,
        d = t.getCategory("_exptl");
       return d && (p = d.getColumn("method").getString(0) || void 0), new e.Structure.Molecule(a, n, {
        experimentMethod: p
       })
      }
      var S;
      ! function(e) {
       e.ElementSymbol = "X", e.ResidueName = "UNK", e.AsymId = "", e.EntityId = "1", e.ModelId = "1"
      }(S || (S = {}));
      var C = ["id", "Cartn_x", "Cartn_y", "Cartn_z", "label_atom_id", "type_symbol", "occupancy", "B_iso_or_equiv", "auth_atom_id", "label_alt_id", "label_comp_id", "label_seq_id", "label_asym_id", "auth_comp_id", "auth_seq_id", "auth_asym_id", "group_PDB", "label_entity_id", "pdbx_PDB_ins_code", "pdbx_PDB_model_num"],
       E = {
        ALA: !0,
        ARG: !0,
        ASP: !0,
        CYS: !0,
        GLN: !0,
        GLU: !0,
        GLY: !0,
        HIS: !0,
        ILE: !0,
        LEU: !0,
        LYS: !0,
        MET: !0,
        PHE: !0,
        PRO: !0,
        SER: !0,
        THR: !0,
        TRP: !0,
        TYR: !0,
        VAL: !0,
        ASN: !0,
        PYL: !0,
        SEC: !0
       };
      t.ofDataBlock = _
     }(n = t.mmCIF || (t.mmCIF = {}))
    }(n = t.Molecule || (t.Molecule = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r;
     ! function(n) {
      var r = function() {
       function e(e, t, n, r) {
        this.header = e, this.crystInfo = t, this.models = n, this.data = r
       }
       return e.prototype.makeEntities = function() {
        var e = ["data_ent", "loop_", "_entity.id", "_entity.type", "_entity.src_method", "_entity.pdbx_description", "_entity.formula_weight", "_entity.pdbx_number_of_molecules", "_entity.details", "_entity.pdbx_mutation", "_entity.pdbx_fragment", "_entity.pdbx_ec", "1 polymer man polymer 0.0 0 ? ? ? ?", "2 non-polymer syn non-polymer 0.0 0 ? ? ? ?", "3 water nat water 0.0 0 ? ? ? ?"].join("\n"),
         n = t.CIF.Text.parse(e);
        if (n.isError) throw n.toString();
        return n.result.dataBlocks[0].getCategory("_entity")
       }, e.prototype.toCifFile = function() {
        var e = {
          dot: n.Parser.getDotRange(this.data.length),
          question: n.Parser.getQuestionmarkRange(this.data.length),
          numberTokens: n.Parser.getNumberRanges(this.data.length),
          data: this.data
         },
         r = new t.CIF.Text.File(this.data),
         i = new t.CIF.Text.DataBlock(this.data, this.header.id);
        if (r.dataBlocks.push(i), i.addCategory(this.makeEntities()), this.crystInfo) {
         var o = this.crystInfo.toCifCategory(this.header.id),
          a = o.cell,
          s = o.symm;
         i.addCategory(a), i.addCategory(s)
        }
        return i.addCategory(this.models.toCifCategory(i, e)), r
       }, e
      }();
      n.MoleculeData = r;
      var i = function() {
       function e(e) {
        this.id = e
       }
       return e
      }();
      n.Header = i;
      var o = function() {
       function e(e) {
        this.record = e
       }
       return e.prototype.getValue = function() {
        var e = this.record.substr(6, 9).trim();
        return e.length ? e : "."
       }, e.prototype.toCifCategory = function(e) {
        var n = ["_cell.entry_id           '" + e + "'", "_cell.length_a           " + this.getValue(6, 9), "_cell.length_b           " + this.getValue(15, 9), "_cell.length_c           " + this.getValue(24, 9), "_cell.angle_alpha        " + this.getValue(33, 7), "_cell.angle_beta         " + this.getValue(40, 7), "_cell.angle_gamma        " + this.getValue(48, 7), "_cell.Z_PDB              " + this.getValue(66, 4), "_cell.pdbx_unique_axis   ?", "_symmetry.entry_id                         '" + e + "'", "_symmetry.space_group_name_H-M             '" + this.getValue(55, 11) + "'", "_symmetry.pdbx_full_space_group_name_H-M   ?", "_symmetry.cell_setting                     ?", "_symmetry.Int_Tables_number                ?", "_symmetry.space_group_name_Hall            ?"].join("\n"),
         r = t.CIF.Text.parse(n);
        if (r.isError) throw new Error(r.toString());
        return {
         cell: r.result.dataBlocks[0].getCategory("_cell"),
         symm: r.result.dataBlocks[0].getCategory("_symmetry")
        }
       }, e
      }();
      n.CrystStructureInfo = o;
      var a = function() {
       function e(e, t) {
        this.helixTokens = e, this.sheetTokens = t
       }
       return e.prototype.toCifCategory = function() {
        return void 0
       }, e
      }();
      n.SecondaryStructure = a;
      var s = function() {
       function t(e, t, n) {
        this.idToken = e, this.atomTokens = t, this.atomCount = n
       }
       return t.prototype.writeToken = function(t, n) {
        e.Utils.ArrayBuilder.add2(n, this.atomTokens[2 * t], this.atomTokens[2 * t + 1])
       }, t.prototype.writeTokenCond = function(t, n, r) {
        var i = this.atomTokens[2 * t],
         o = this.atomTokens[2 * t + 1];
        i === o ? e.Utils.ArrayBuilder.add2(n, r.start, r.end) : e.Utils.ArrayBuilder.add2(n, i, o)
       }, t.prototype.writeRange = function(t, n) {
        e.Utils.ArrayBuilder.add2(n, t.start, t.end)
       }, t.prototype.tokenEquals = function(e, t, n, r) {
        var i = n.length;
        if (i !== t - e) return !1;
        for (var o = n.length - 1; o >= 0; o--)
         if (r.charCodeAt(o + e) !== n.charCodeAt(o)) return !1;
        return !0
       }, t.prototype.getEntityType = function(e, t) {
        var n = 14 * e;
        if (this.tokenEquals(this.atomTokens[2 * n], this.atomTokens[2 * n + 1], "HETATM", t)) {
         var r = this.atomTokens[2 * (n + 4)],
          i = this.atomTokens[2 * (n + 4) + 1];
         return this.tokenEquals(r, i, "HOH", t) || this.tokenEquals(r, i, "WTR", t) || this.tokenEquals(r, i, "SOL", t) ? 3 : 2
        }
        return 1
       }, t.prototype.writeCifTokens = function(e, t, n) {
        for (var r = {
          RECORD: 0,
          SERIAL: 1,
          ATOM_NAME: 2,
          ALT_LOC: 3,
          RES_NAME: 4,
          CHAIN_ID: 5,
          RES_SEQN: 6,
          INS_CODE: 7,
          X: 8,
          Y: 9,
          Z: 10,
          OCCUPANCY: 11,
          TEMP_FACTOR: 12,
          ELEMENT: 13
         }, i = 14, o = 0; o < this.atomCount; o++) {
         var a = o * i;
         this.writeToken(a + r.RECORD, t), this.writeToken(a + r.SERIAL, t), this.writeToken(a + r.ELEMENT, t), this.writeToken(a + r.ATOM_NAME, t), this.writeTokenCond(a + r.ALT_LOC, t, n.dot), this.writeToken(a + r.RES_NAME, t), this.writeToken(a + r.CHAIN_ID, t), this.writeRange(n.numberTokens.get(this.getEntityType(o, n.data)), t), this.writeToken(a + r.RES_SEQN, t), this.writeTokenCond(a + r.INS_CODE, t, n.dot), this.writeToken(a + r.X, t), this.writeToken(a + r.Y, t), this.writeToken(a + r.Z, t), this.writeToken(a + r.OCCUPANCY, t), this.writeToken(a + r.TEMP_FACTOR, t), this.writeRange(n.question, t), this.writeRange(n.question, t), this.writeRange(n.question, t), this.writeRange(n.question, t), this.writeRange(n.question, t), this.writeRange(n.question, t), this.writeToken(a + r.RES_SEQN, t), this.writeToken(a + r.RES_NAME, t), this.writeToken(a + r.CHAIN_ID, t), this.writeToken(a + r.ATOM_NAME, t), this.writeRange(e, t)
        }
       }, t
      }();
      s.COLUMNS = ["_atom_site.group_PDB", "_atom_site.id", "_atom_site.type_symbol", "_atom_site.label_atom_id", "_atom_site.label_alt_id", "_atom_site.label_comp_id", "_atom_site.label_asym_id", "_atom_site.label_entity_id", "_atom_site.label_seq_id", "_atom_site.pdbx_PDB_ins_code", "_atom_site.Cartn_x", "_atom_site.Cartn_y", "_atom_site.Cartn_z", "_atom_site.occupancy", "_atom_site.B_iso_or_equiv", "_atom_site.Cartn_x_esd", "_atom_site.Cartn_y_esd", "_atom_site.Cartn_z_esd", "_atom_site.occupancy_esd", "_atom_site.B_iso_or_equiv_esd", "_atom_site.pdbx_formal_charge", "_atom_site.auth_seq_id", "_atom_site.auth_comp_id", "_atom_site.auth_asym_id", "_atom_site.auth_atom_id", "_atom_site.pdbx_PDB_model_num"], n.ModelData = s;
      var u = function() {
       function n(e) {
        this.models = e
       }
       return n.prototype.toCifCategory = function(n, r) {
        for (var i = 0, o = 0, a = this.models; o < a.length; o++) {
         var u = a[o];
         i += u.atomCount
        }
        for (var l = e.Utils.ArrayBuilder.forTokenIndices(26 * i), c = 0, h = this.models; c < h.length; c++) {
         var u = h[c];
         u.writeCifTokens(u.idToken, l, r)
        }
        return new t.CIF.Text.Category(n.data, "_atom_site", 0, 0, s.COLUMNS, l.array, 26 * i)
       }, n
      }();
      n.ModelsData = u
     }(r = n.PDB || (n.PDB = {}))
    }(n = t.Molecule || (t.Molecule = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(t) {
     var n;
     ! function(t) {
      function n(e, t) {
       return i.parse(e, t)
      }
      var r = function() {
        function t(e) {
         this.data = e, this.trimmedToken = {
          start: 0,
          end: 0
         }, this.line = 0, this.position = 0, this.length = e.length
        }
        return t.prototype.moveToNextLine = function() {
         for (; this.position < this.length && 10 !== this.data.charCodeAt(this.position);) this.position++;
         return this.position++, this.line++, this.position
        }, t.prototype.moveToEndOfLine = function() {
         for (; this.position < this.length;) {
          var e = this.data.charCodeAt(this.position);
          if (10 === e || 13 === e) return this.position;
          this.position++
         }
         return this.position
        }, t.prototype.startsWith = function(e, t) {
         for (var n = t.length - 1; n >= 0; n--)
          if (this.data.charCodeAt(n + e) !== t.charCodeAt(n)) return !1;
         return !0
        }, t.prototype.trim = function(e, t) {
         for (; t > e && 32 === this.data.charCodeAt(e);) e++;
         for (; t > e && 32 === this.data.charCodeAt(t - 1);) t--;
         this.trimmedToken.start = e, this.trimmedToken.end = t
        }, t.prototype.tokenizeAtomRecord = function(t) {
         var n = this.position,
          r = this.position,
          i = this.moveToEndOfLine(),
          o = i - r;
         return 66 > o ? !1 : (this.trim(r, r + 6), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 6, this.trim(r, r + 5), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 12, this.trim(r, r + 4), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), 32 === this.data.charCodeAt(n + 16) ? e.TokenIndexBuilder.addToken(t, 0, 0) : e.TokenIndexBuilder.addToken(t, n + 16, n + 17), r = n + 17, this.trim(r, r + 3), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), e.TokenIndexBuilder.addToken(t, n + 21, n + 22), r = n + 22, this.trim(r, r + 4), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), 32 === this.data.charCodeAt(n + 26) ? e.TokenIndexBuilder.addToken(t, 0, 0) : e.TokenIndexBuilder.addToken(t, n + 26, n + 27), r = n + 30, this.trim(r, r + 8), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 38, this.trim(r, r + 8), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 46, this.trim(r, r + 8), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 54, this.trim(r, r + 6), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), r = n + 60, this.trim(r, r + 6), e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end), o >= 78 ? (r = n + 76, this.trim(r, r + 2), this.trimmedToken.start < this.trimmedToken.end ? e.TokenIndexBuilder.addToken(t, this.trimmedToken.start, this.trimmedToken.end) : e.TokenIndexBuilder.addToken(t, n + 12, n + 13)) : e.TokenIndexBuilder.addToken(t, n + 12, n + 13), !0)
        }, t
       }(),
       i = function() {
        function n(e, t) {
         this.id = e, this.data = t
        }
        return n.tokenizeAtom = function(t, n) {
         return n.tokenizeAtomRecord(t) ? void 0 : new e.ParserError("Invalid ATOM/HETATM record.", n.line)
        }, n.tokenize = function(i, o) {
         for (var a = new r(o), s = o.length, u = e.TokenIndexBuilder.create(4096), l = 0, c = [], h = void 0, p = {
           start: 0,
           end: 0
          }; a.position < s;) {
          var d = !0;
          switch (o.charCodeAt(a.position)) {
           case 65:
            if (a.startsWith(a.position, "ATOM")) {
             u || (u = e.TokenIndexBuilder.create(4096));
             var f = n.tokenizeAtom(u, a);
             if (l++, f) return f
            }
            break;
           case 67:
            if (a.startsWith(a.position, "CRYST1")) {
             var m = a.position,
              g = a.moveToEndOfLine();
             h = new t.CrystStructureInfo(o.substring(m, g))
            }
            break;
           case 69:
            if (a.startsWith(a.position, "ENDMDL") && l > 0) 0 === c.length && (p = {
             start: o.length + 3,
             end: o.length + 4
            }), u && c.push(new t.ModelData(p, u.tokens, l)), l = 0, u = null;
            else if (a.startsWith(a.position, "END")) {
             var m = a.position,
              g = a.moveToEndOfLine();
             a.trim(m, g), a.trimmedToken.end - a.trimmedToken.start === 3 && (d = !1)
            }
            break;
           case 72:
            if (a.startsWith(a.position, "HETATM")) {
             u || (u = e.TokenIndexBuilder.create(4096));
             var f = n.tokenizeAtom(u, a);
             if (l++, f) return f
            }
            break;
           case 77:
            if (a.startsWith(a.position, "MODEL")) {
             l > 0 && (0 === c.length && (p = {
              start: o.length + 3,
              end: o.length + 4
             }), u && c.push(new t.ModelData(p, u.tokens, l)));
             var m = a.position + 6,
              g = a.moveToEndOfLine();
             a.trim(m, g), p = {
              start: a.trimmedToken.start,
              end: a.trimmedToken.end
             }, (l > 0 || !u) && (u = e.TokenIndexBuilder.create(4096)), l = 0
            }
          }
          if (a.moveToNextLine(), !d) break
         }
         var v = o + ".?0123";
         return l > 0 && (0 === c.length && (p = {
          start: o.length + 3,
          end: o.length + 4
         }), u && c.push(new t.ModelData(p, u.tokens, l))), new t.MoleculeData(new t.Header(i), h, new t.ModelsData(c), v)
        }, n.getDotRange = function(e) {
         return {
          start: e - 6,
          end: e - 5
         }
        }, n.getNumberRanges = function(e) {
         for (var t = new Map, n = 0; 4 > n; n++) t.set(n, {
          start: e - 4 + n,
          end: e - 3 + n
         });
         return t
        }, n.getQuestionmarkRange = function(e) {
         return {
          start: e - 5,
          end: e - 4
         }
        }, n.parse = function(t, r) {
         var i = n.tokenize(t, r);
         return i instanceof e.ParserError ? e.ParserResult.error(i.message, i.line) : e.ParserResult.success(i.toCifFile())
        }, n
       }();
      t.Parser = i, t.toCifFile = n
     }(n = t.PDB || (t.PDB = {}))
    }(t = e.Molecule || (e.Molecule = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r;
     ! function(n) {
      function r(n, r) {
       var i = n.split(/\r?\n/g),
        o = i[0].trim();
       o.length || (o = "SDF");
       var a = (i[1], i[2], i[3]),
        s = +a.substr(0, 3),
        u = +a.substr(3, 3);
       return {
        id: r ? r : o,
        atomCount: s,
        bondCount: u,
        atoms: e.Structure.DefaultDataTables.forAtoms(s).table,
        bonds: e.Structure.DefaultDataTables.forBonds(u).table,
        lines: i,
        currentLine: 4,
        error: void 0,
        stringPool: t.ShortStringPool.create()
       }
      }

      function i(n, r) {
       var i = r.lines[r.currentLine],
        o = r.atoms,
        a = t.ShortStringPool.get(r.stringPool, i.substr(31, 3).trim());
       o.id[n] = n, o.elementSymbol[n] = a, o.name[n] = a, o.authName[n] = a, o.occupancy[n] = 1, o.rowIndex[n] = r.currentLine, o.x[n] = e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i, 0, 10), o.y[n] = e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i, 10, 20), o.z[n] = e.Utils.FastNumberParsers.parseFloatSkipTrailingWhitespace(i, 20, 30)
      }

      function o(e) {
       for (var t = 0; t < e.atomCount; t++) i(t, e), e.currentLine++
      }

      function a(t, n) {
       var r = n.lines[n.currentLine],
        i = n.bonds;
       switch (i.atomAIndex[t] = e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r, 0, 3) - 1, i.atomBIndex[t] = e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r, 3, 6) - 1, e.Utils.FastNumberParsers.parseIntSkipTrailingWhitespace(r, 6, 9)) {
        case 1:
         i.type[t] = 1;
         break;
        case 2:
         i.type[t] = 2;
         break;
        case 3:
         i.type[t] = 3;
         break;
        case 4:
         i.type[t] = 4;
         break;
        default:
         i.type[t] = 0
       }
      }

      function s(e) {
       for (var t = 0; t < e.bondCount; t++) a(t, e), e.currentLine++
      }

      function u(t) {
       var n = e.Structure.DefaultDataTables.forResidues(1),
        r = e.Structure.DefaultDataTables.forChains(1),
        i = e.Structure.DefaultDataTables.forEntities(1);
       n.columns.isHet[0] = 1, n.columns.insCode[0] = null, n.columns.name[0] = n.columns.authName[0] = "UNK", n.columns.atomEndIndex[0] = r.columns.atomEndIndex[0] = i.columns.atomEndIndex[0] = t.atomCount, n.columns.asymId[0] = n.columns.authAsymId[0] = r.columns.asymId[0] = r.columns.authAsymId[0] = "X", n.columns.entityId[0] = r.columns.entityId[0] = i.columns.entityId[0] = "1", r.columns.residueEndIndex[0] = i.columns.residueEndIndex[0] = 0, i.columns.chainEndIndex[0] = 1, i.columns.type[0] = "non-polymer", i.columns.entityType[0] = e.Structure.EntityType.NonPolymer;
       var o = new e.Structure.PolyResidueIdentifier("X", 0, null),
        a = [new e.Structure.SecondaryStructureElement(0, o, o)];
       return a[0].startResidueIndex = 0, a[0].endResidueIndex = 1, new e.Structure.MoleculeModel({
        id: t.id,
        modelId: "1",
        atoms: t.atoms,
        residues: n.table,
        chains: r.table,
        entities: i.table,
        covalentBonds: t.bonds,
        componentBonds: void 0,
        secondaryStructure: a,
        symmetryInfo: void 0,
        assemblyInfo: void 0,
        source: e.Structure.MoleculeModelSource.File
       })
      }

      function l(n, i) {
       try {
        var a = r(n, i);
        o(a), s(a);
        var l = u(a);
        if (a.error) return t.ParserResult.error(a.error, a.currentLine + 1);
        var c = new e.Structure.Molecule(i ? i : a.id, [l]);
        return t.ParserResult.success(c)
       } catch (h) {
        return t.ParserResult.error("" + h)
       }
      }
      n.parse = l
     }(r = n.SDF || (n.SDF = {}))
    }(n = t.Molecule || (t.Molecule = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r;
     ! function(r) {
      r.mmCIF = {
       name: "mmCIF",
       shortcuts: ["mmcif", "cif"],
       extensions: [".cif"],
       parse: function(r) {
        return e.Computation.create(function(e) {
         e.update("Parsing..."), e.schedule(function() {
          var i = t.CIF.Text.parse(r);
          if (i.isError) return e.reject(i.toString()), void 0;
          var o = i.result;
          return o.dataBlocks.length ? (e.update("Creating representation..."), e.schedule(function() {
           try {
            var r = n.mmCIF.ofDataBlock(o.dataBlocks[0]);
            e.resolve(t.ParserResult.success(r, o.dataBlocks.length > 1 ? ["The input data contains multiple data blocks, only the first one was parsed. To parse all data blocks, use the function 'mmCIF.ofDataBlock' separately for each block."] : void 0))
           } catch (i) {
            e.reject("" + i)
           }
          }), void 0) : (e.reject("The CIF data does not contain a data block."), void 0)
         })
        })
       }
      }, r.mmBCIF = {
       name: "mmCIF (Binary)",
       shortcuts: ["mmbcif", "bcif", "binarycif"],
       extensions: [".bcif"],
       isBinary: !0,
       parse: function(r) {
        return e.Computation.create(function(e) {
         e.update("Parsing..."), e.schedule(function() {
          var i = t.CIF.Binary.parse(r);
          if (i.isError) return e.reject(i.toString()), void 0;
          var o = i.result;
          return o.dataBlocks.length ? (e.update("Creating representation..."), e.schedule(function() {
           try {
            var r = n.mmCIF.ofDataBlock(o.dataBlocks[0]);
            e.resolve(t.ParserResult.success(r, o.dataBlocks.length > 1 ? ["The input data contains multiple data blocks, only the first one was parsed. To parse all data blocks, use the function 'mmCIF.ofDataBlock' separately for each block."] : void 0))
           } catch (i) {
            e.reject("" + i)
           }
          }), void 0) : (e.reject("The BinaryCIF data does not contain a data block."), void 0)
         })
        })
       }
      }, r.PDB = {
       name: "PDB",
       shortcuts: ["pdb", "ent"],
       extensions: [".pdb", ".ent"],
       parse: function(r, i) {
        return e.Computation.create(function(e) {
         e.update("Parsing..."), e.schedule(function() {
          var o = n.PDB.toCifFile(i && i.id || "PDB", r);
          if (o.isError) return e.reject(o.toString()), void 0;
          var a = o.result;
          return a.dataBlocks.length ? (e.update("Creating representation..."), e.schedule(function() {
           try {
            var r = n.mmCIF.ofDataBlock(a.dataBlocks[0]);
            e.resolve(t.ParserResult.success(r))
           } catch (i) {
            e.reject("" + i)
           }
          }), void 0) : (e.reject("The PDB data does not contain a data block."), void 0)
         })
        })
       }
      }, r.SDF = {
       name: "SDF",
       shortcuts: ["sdf", "mol"],
       extensions: [".sdf", ".mol"],
       parse: function(r, i) {
        return e.Computation.create(function(e) {
         e.update("Parsing..."), e.schedule(function() {
          var o = n.SDF.parse(r, i && i.id || void 0);
          return o.isError ? (e.reject(o.toString()), void 0) : (e.resolve(t.ParserResult.success(o.result)), void 0)
         })
        })
       }
      }, r.All = [r.mmCIF, r.mmBCIF, r.PDB, r.SDF]
     }(r = n.SupportedFormats || (n.SupportedFormats = {}))
    }(n = t.Molecule || (t.Molecule = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     function t(e, t) {
      for (var n = e.length, r = 0; n > r; r++) e[r] = t
     }
     var n = function() {
      function e(e, t) {
       this.data = e, this.dimensions = t, this.len = this.dimensions[0] * this.dimensions[1] * this.dimensions[2], this.nX = this.dimensions[0], this.nY = this.dimensions[1]
      }
      return Object.defineProperty(e.prototype, "length", {
       get: function() {
        return this.len
       },
       enumerable: !0,
       configurable: !0
      }), e.prototype.getAt = function(e) {
       return this.data[e]
      }, e.prototype.setAt = function(e, t) {
       this.data[e] = t
      }, e.prototype.get = function(e, t, n) {
       return this.data[this.nX * (n * this.nY + t) + e | 0]
      }, e.prototype.set = function(e, t, n, r) {
       this.data[this.nX * (n * this.nY + t) + e | 0] = r
      }, e.prototype.fill = function(e) {
       t(this.data, e)
      }, e
     }();
     e.Field3DZYX = n;
     var r;
     ! function(e) {
      function t(e, t, n, r, i, o, a, s, u, l, c) {
       return {
        cellSize: e,
        cellAngles: t,
        origin: n,
        hasSkewMatrix: r,
        skewMatrix: i,
        data: o,
        basis: s,
        startOffset: u,
        dataDimensions: a,
        valuesInfo: l,
        attributes: c ? c : {},
        isNormalized: !1
       }
      }

      function n(e) {
       if (!e.isNormalized) {
        for (var t = e.data, n = e.valuesInfo, r = n.mean, i = n.sigma, o = Number.POSITIVE_INFINITY, a = Number.NEGATIVE_INFINITY, s = 0, u = t.length; u > s; s++) {
         var l = (t.getAt(s) - r) / i;
         t.setAt(s, l), o > l && (o = l), l > a && (a = l)
        }
        e.valuesInfo.min = o, e.valuesInfo.max = a, e.isNormalized = !0
       }
      }

      function r(e) {
       if (e.isNormalized) {
        for (var t = e.data, n = e.valuesInfo, r = n.mean, i = n.sigma, o = Number.POSITIVE_INFINITY, a = Number.NEGATIVE_INFINITY, s = 0, u = t.length; u > s; s++) {
         var l = i * t.getAt(s) + r;
         t.setAt(s, l), o > l && (o = l), l > a && (a = l)
        }
        e.valuesInfo.min = o, e.valuesInfo.max = a, e.isNormalized = !1
       }
      }
      e.create = t, e.normalize = n, e.denormalize = r
     }(r = e.Data || (e.Data = {}))
    }(t = e.Density || (e.Density = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(t) {
     var n;
     ! function(n) {
      function r(e) {
       return i.parse(e)
      }
      n.parse = r;
      var i;
      ! function(n) {
       function r(e, t, n) {
        for (var r = [], i = 0; n > i; i++) r[i] = e(t + i);
        return r
       }

       function i(n) {
        var i = 1024,
         s = !1,
         u = new DataView(n, 0, i),
         l = [],
         c = u.getInt32(12, !1);
        if (2 !== c && (s = !0, c = u.getInt32(12, !0), 2 !== c)) return e.ParserResult.error("Only CCP4 modes 0 and 2 are supported.");
        var h = function(e) {
          return u.getInt32(4 * e, s)
         },
         p = function(e) {
          return u.getFloat32(4 * e, s)
         },
         d = {
          extent: r(h, 0, 3),
          mode: c,
          nxyzStart: r(h, 4, 3),
          grid: r(h, 7, 3),
          cellDimensions: r(p, 10, 3),
          cellAngles: r(p, 13, 3),
          crs2xyz: r(h, 16, 3),
          min: p(19),
          max: p(20),
          mean: p(21),
          spacegroupNumber: h(22),
          symBytes: h(23),
          skewFlag: h(24),
          skewMatrix: r(p, 25, 9),
          skewTranslation: r(p, 34, 3),
          origin2k: r(p, 49, 3)
         },
         f = n.byteLength - 4 * d.extent[0] * d.extent[1] * d.extent[2];
        if (f !== i + d.symBytes)
         if (f === i) l.push("File contains bogus symmetry record.");
         else {
          if (i > f) return e.ParserResult.error("File appears truncated and doesn't match header.");
          if (!(f > i && 1048576 > f)) return e.ParserResult.error("File is MUCH larger than expected and doesn't match header.");
          f = i + d.symBytes, l.push("File is larger than expected and doesn't match header. Continuing file load, good luck!")
         } 0 === d.grid[0] && d.extent[0] > 0 && (d.grid[0] = d.extent[0] - 1, l.push("Fixed X interval count.")), 0 === d.grid[1] && d.extent[1] > 0 && (d.grid[1] = d.extent[1] - 1, l.push("Fixed Y interval count.")), 0 === d.grid[2] && d.extent[2] > 0 && (d.grid[2] = d.extent[2] - 1, l.push("Fixed Z interval count.")), 0 === d.crs2xyz[0] && 0 === d.crs2xyz[1] && 0 === d.crs2xyz[2] && (l.push("All crs2xyz records are zero. Setting crs2xyz to 1, 2, 3."), d.crs2xyz = [1, 2, 3]), 0 === d.cellDimensions[0] && 0 === d.cellDimensions[1] && 0 === d.cellDimensions[2] && (l.push("Cell dimensions are all zero. Setting to 1.0, 1.0, 1.0. Map file will not align with other structures."), d.cellDimensions[0] = 1, d.cellDimensions[1] = 1, d.cellDimensions[2] = 1);
        var m = Math.PI / 180 * d.cellAngles[0],
         g = Math.PI / 180 * d.cellAngles[1],
         v = Math.PI / 180 * d.cellAngles[2],
         y = d.cellDimensions[0] / d.grid[0],
         b = d.cellDimensions[1] / d.grid[1],
         w = d.cellDimensions[2] / d.grid[2],
         x = Math.cos(g),
         _ = (Math.cos(m) - Math.cos(g) * Math.cos(v)) / Math.sin(v),
         S = Math.sqrt(1 - x * x - _ * _),
         C = [y, 0, 0],
         E = [Math.cos(v) * b, Math.sin(v) * b, 0],
         T = [x * w, _ * w, S * w],
         M = [0, 0, 0];
        M[d.crs2xyz[0] - 1] = 0, M[d.crs2xyz[1] - 1] = 1, M[d.crs2xyz[2] - 1] = 2;
        var A;
        A = 0 === d.origin2k[0] && 0 === d.origin2k[1] && 0 === d.origin2k[2] ? [C[0] * d.nxyzStart[M[0]] + E[0] * d.nxyzStart[M[1]] + T[0] * d.nxyzStart[M[2]], E[1] * d.nxyzStart[M[1]] + T[1] * d.nxyzStart[M[2]], T[2] * d.nxyzStart[M[2]]] : [d.origin2k[M[0]], d.origin2k[M[1]], d.origin2k[M[2]]];
        var P, R, I = [d.extent[M[0]], d.extent[M[1]], d.extent[M[2]]],
         k = new Float32Array(16);
        for (P = 0; 3 > P; P++) {
         for (R = 0; 3 > R; R++) k[4 * R + P] = d.skewMatrix[3 * P + R];
         k[12 + P] = d.skewTranslation[P]
        }
        var D = 13330 === new Uint16Array(new Uint8Array([18, 52]).buffer)[0],
         V = s === D ? o(new Float32Array(n, i + d.symBytes, I[0] * I[1] * I[2]), s, I, d.extent, M, d.mean) : a(new DataView(n, i + d.symBytes), s, I, d.extent, M, d.mean),
         L = new t.Field3DZYX(V.data, I),
         B = t.Data.create(d.cellDimensions, d.cellAngles, A, 0 !== d.skewFlag, k, L, I, {
          x: C,
          y: E,
          z: T
         }, [d.nxyzStart[M[0]], d.nxyzStart[M[1]], d.nxyzStart[M[2]]], {
          min: d.min,
          max: d.max,
          mean: d.mean,
          sigma: V.sigma
         }, {
          spacegroupIndex: d.spacegroupNumber - 1
         });
        return e.ParserResult.success(B, l)
       }

       function o(e, t, n, r, i, o) {
        var a, s, u, l, c, h, p, d, f = new Float32Array(n[0] * n[1] * n[2]),
         m = [0, 0, 0],
         g = 0,
         v = .1,
         y = 0,
         b = .1,
         w = i[0],
         x = i[1],
         _ = i[2];
        for (a = r[0], s = r[1], u = r[2], p = n[0], d = n[0] * n[1], h = 0; u > h; h++)
         for (m[2] = h, c = 0; s > c; c++)
          for (m[1] = c, l = 0; a > l; l++) m[0] = l, v = e[g], b = v - o, y += b * b, f[m[w] + m[x] * p + m[_] * d] = v, g += 1;
        return y /= a * s * u, y = Math.sqrt(y), {
         data: f,
         sigma: y
        }
       }

       function a(e, t, n, r, i, o) {
        var a, s, u, l, c, h, p, d, f = new Float32Array(n[0] * n[1] * n[2]),
         m = [0, 0, 0],
         g = 0,
         v = .1,
         y = 0,
         b = .1,
         w = i[0],
         x = i[1],
         _ = i[2];
        for (a = r[0], s = r[1], u = r[2], p = n[0], d = n[0] * n[1], h = 0; u > h; h++)
         for (m[2] = h, c = 0; s > c; c++)
          for (m[1] = c, l = 0; a > l; l++) m[0] = l, v = e.getFloat32(g, t), b = v - o, y += b * b, f[m[w] + m[x] * p + m[_] * d] = v, g += 4;
        return y /= a * s * u, y = Math.sqrt(y), {
         data: f,
         sigma: y
        }
       }
       n.parse = i
      }(i || (i = {}))
     }(n = t.CCP4 || (t.CCP4 = {}))
    }(t = e.Density || (e.Density = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(t) {
     var n;
     ! function(n) {
      function r(e) {
       return i.parse(e)
      }
      n.parse = r;
      var i;
      ! function(n) {
       function r(n) {
        function r(e) {
         for (var t = [], n = 0; 3 > n; n++) t[n] = a.getColumn(e + "[" + n + "]").getFloat(0);
         return t
        }

        function o(e) {
         return a.getColumn(e).getFloat(0)
        }
        var a = n.getCategory("_density_info");
        if (!a) return e.ParserResult.error("_density_info category is missing.");
        if (!n.getCategory("_density_data")) return e.ParserResult.error("_density_data category is missing.");
        var s = {
          name: a.getColumn("name").getString(0),
          grid: r("grid"),
          axisOrder: r("axis_order"),
          extent: r("extent"),
          origin: r("origin"),
          cellSize: r("cell_size"),
          cellAngles: r("cell_angles"),
          mean: o("mean"),
          sigma: o("sigma"),
          spacegroupNumber: 0 | o("spacegroup_number")
         },
         u = Math.PI / 180 * s.cellAngles[0],
         l = Math.PI / 180 * s.cellAngles[1],
         c = Math.PI / 180 * s.cellAngles[2],
         h = s.cellSize[0] / s.grid[0],
         p = s.cellSize[1] / s.grid[1],
         d = s.cellSize[2] / s.grid[2],
         f = Math.cos(l),
         m = (Math.cos(u) - Math.cos(l) * Math.cos(c)) / Math.sin(c),
         g = Math.sqrt(1 - f * f - m * m),
         v = [h, 0, 0],
         y = [Math.cos(c) * p, Math.sin(c) * p, 0],
         b = [f * d, m * d, g * d],
         w = [0, 0, 0];
        w[s.axisOrder[0]] = 0, w[s.axisOrder[1]] = 1, w[s.axisOrder[2]] = 2;
        var x = [s.origin[s.axisOrder[0]], s.origin[s.axisOrder[1]], s.origin[s.axisOrder[2]]],
         _ = [v[0] * x[0] + y[0] * x[1] + b[0] * x[2], y[1] * x[1] + b[1] * x[2], b[2] * x[2]],
         S = [s.extent[w[0]], s.extent[w[1]], s.extent[w[2]]],
         C = i(n.getCategory("_density_data").getColumn("values"), S, s.extent, w, s.mean),
         E = new t.Field3DZYX(C.data, S),
         T = t.Data.create(s.cellSize, s.cellAngles, _, !1, void 0, E, S, {
          x: v,
          y: y,
          z: b
         }, [s.axisOrder[w[0]], s.axisOrder[w[1]], s.axisOrder[w[2]]], {
          min: C.min,
          max: C.max,
          mean: s.mean,
          sigma: s.sigma
         }, {
          spacegroupIndex: s.spacegroupNumber - 1,
          name: s.name
         });
        return e.ParserResult.success(T)
       }

       function i(e, t, n, r) {
        var i, o, a, s, u, l, c, h, p = new Float32Array(t[0] * t[1] * t[2]),
         d = [0, 0, 0],
         f = 0,
         m = .1,
         g = Number.POSITIVE_INFINITY,
         v = Number.NEGATIVE_INFINITY,
         y = r[0],
         b = r[1],
         w = r[2];
        for (i = n[0], o = n[1], a = n[2], c = t[0], h = t[0] * t[1], l = 0; a > l; l++)
         for (d[2] = l, u = 0; o > u; u++)
          for (d[1] = u, s = 0; i > s; s++) d[0] = s, m = e.getFloat(f), g > m ? g = m : m > v && (v = m), p[d[y] + d[b] * c + d[w] * h] = m, f += 1;
        return {
         data: p,
         min: g,
         max: v
        }
       }
       n.parse = r
      }(i || (i = {}))
     }(n = t.CIF || (t.CIF = {}))
    }(t = e.Density || (e.Density = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(t) {
     var n;
     ! function(n) {
      function r(e) {
       return o.parse(e)
      }

      function i(e, t) {
       return e.filter(function(e) {
        return e !== t
       })
      }
      n.parse = r;
      var o;
      ! function(n) {
       function r(n) {
        var r = 512,
         a = !1,
         s = new Uint8Array(n, 0, r),
         u = String.fromCharCode.apply(null, s),
         l = u.search("origin"),
         c = u.search("extent"),
         h = u.search("grid"),
         p = u.search("cell"),
         d = u.search("prod"),
         f = u.search("plus"),
         m = u.search("sigma"),
         g = u.substring(l + "origin".length, c).replace(" ", "").split(" "),
         v = i(g, ""),
         y = u.substring(c + "extent".length, h).split(" "),
         b = i(y, ""),
         w = u.substring(h + "grid".length, p).split(" "),
         x = i(w, ""),
         _ = u.substring(p + "cell".length, d).split(" "),
         S = i(_, ""),
         C = u.substring(d + "prod".length, f).split(" "),
         E = i(C, ""),
         T = u.substring(f + "plus".length, m).split(" "),
         M = i(T, ""),
         A = u.substring(m + "sigma".length, u.length).split(" "),
         P = (i(A, ""), []),
         R = 0,
         I = {
          extent: b.map(function(e) {
           return parseInt(e)
          }),
          mode: R,
          nxyzStart: [0, 0, 0],
          grid: x.map(function(e) {
           return parseInt(e)
          }),
          cellDimensions: S.slice(0, 3).map(function(e) {
           return parseFloat(e)
          }),
          cellAngles: S.slice(3, 6).map(function(e) {
           return parseFloat(e)
          }),
          crs2xyz: [1, 2, 3],
          min: 0,
          max: 0,
          mean: 0,
          symBytes: 0,
          skewFlag: 0,
          skewMatrix: 0,
          skewTranslation: 0,
          origin2k: v.map(function(e) {
           return parseFloat(e)
          }),
          prod: E.map(function(e) {
           return parseFloat(e)
          })[0],
          plus: M.map(function(e) {
           return parseFloat(e)
          })[0]
         },
         k = 512;
        if (k !== r + I.symBytes)
         if (k === r) P.push("File contains bogus symmetry record.");
         else {
          if (r > k) return e.ParserResult.error("File appears truncated and doesn't match header.");
          if (!(k > r && 1048576 > k)) return e.ParserResult.error("File is MUCH larger than expected and doesn't match header.");
          k = r + I.symBytes, P.push("File is larger than expected and doesn't match header. Continuing file load, good luck!")
         } 0 === I.grid[0] && I.extent[0] > 0 && (I.grid[0] = I.extent[0] - 1, P.push("Fixed X interval count.")), 0 === I.grid[1] && I.extent[1] > 0 && (I.grid[1] = I.extent[1] - 1, P.push("Fixed Y interval count.")), 0 === I.grid[2] && I.extent[2] > 0 && (I.grid[2] = I.extent[2] - 1, P.push("Fixed Z interval count.")), 0 === I.crs2xyz[0] && 0 === I.crs2xyz[1] && 0 === I.crs2xyz[2] && (P.push("All crs2xyz records are zero. Setting crs2xyz to 1, 2, 3."), I.crs2xyz = [1, 2, 3]), 0 === I.cellDimensions[0] && 0 === I.cellDimensions[1] && 0 === I.cellDimensions[2] && (P.push("Cell dimensions are all zero. Setting to 1.0, 1.0, 1.0. Map file will not align with other structures."), I.cellDimensions[0] = 1, I.cellDimensions[1] = 1, I.cellDimensions[2] = 1);
        var D = Math.PI / 180 * I.cellAngles[0],
         V = Math.PI / 180 * I.cellAngles[1],
         L = Math.PI / 180 * I.cellAngles[2],
         B = I.cellDimensions[0] / I.grid[0],
         O = I.cellDimensions[1] / I.grid[1],
         N = I.cellDimensions[2] / I.grid[2],
         F = Math.cos(V),
         U = (Math.cos(D) - Math.cos(V) * Math.cos(L)) / Math.sin(L),
         z = Math.sqrt(1 - F * F - U * U),
         G = [B, 0, 0],
         H = [Math.cos(L) * O, Math.sin(L) * O, 0],
         j = [F * N, U * N, z * N],
         q = [0, 0, 0];
        q[I.crs2xyz[0] - 1] = 0, q[I.crs2xyz[1] - 1] = 1, q[I.crs2xyz[2] - 1] = 2;
        var W;
        W = 0 === I.origin2k[0] && 0 === I.origin2k[1] && 0 === I.origin2k[2] ? [G[0] * I.nxyzStart[q[0]] + H[0] * I.nxyzStart[q[1]] + j[0] * I.nxyzStart[q[2]], H[1] * I.nxyzStart[q[1]] + j[1] * I.nxyzStart[q[2]], j[2] * I.nxyzStart[q[2]]] : [I.origin2k[q[0]], I.origin2k[q[1]], I.origin2k[q[2]]];
        var X, Y, Q = [I.extent[q[0]], I.extent[q[1]], I.extent[q[2]]],
         Z = new Float32Array(16);
        for (X = 0; 3 > X; X++) {
         for (Y = 0; 3 > Y; Y++) Z[4 * Y + X] = 0;
         Z[12 + X] = 0
        }
        var K = 13330 === new Uint16Array(new Uint8Array([18, 52]).buffer)[0];
        a = K;
        var $ = o(new Uint8Array(n, r + I.symBytes), a, Q, I.extent, q, I.mean, I.prod, I.plus),
         J = new t.Field3DZYX($.data, Q),
         et = t.Data.create(I.cellDimensions, I.cellAngles, W, 0 !== I.skewFlag, Z, J, Q, {
          x: G,
          y: H,
          z: j
         }, [I.nxyzStart[q[0]], I.nxyzStart[q[1]], I.nxyzStart[q[2]]], {
          min: $.minj,
          max: $.maxj,
          mean: $.meanj,
          sigma: $.sigma
         }, {
          prod: I.prod,
          plus: I.plus
         });
        return e.ParserResult.success(et, P)
       }

       function o(e, t, n, r, i, o, a, s) {
        var u, l, c, h, p, d, f, m, g, v, y, b, w, x, _ = 0,
         S = .1,
         C = 0,
         E = .1,
         T = 0,
         M = 0,
         A = 0,
         P = 8,
         R = 8,
         I = 8,
         k = 8,
         D = P * P * P;
        u = r[0] / 8, l = r[1] / 8, c = r[2] / 8;
        var V = new Float32Array(8 * u * 8 * l * 8 * c);
        for (f = 8 * u, m = 64 * u * l, T = 0, M = 0, A = 0, g = 0; D * u * l * c > g; g++) S = (e[g] - s) / a, A += S, T > S && (T = S), S > M && (M = S);
        for (A /= D * u * l * c, d = 0; c > d; d++)
         for (p = 0; l > p; p++)
          for (h = 0; u > h; h++) {
           for (y = 0; R > y; y++)
            for (v = 0; I > v; v++)
             for (g = 0; k > g; g++) S = (e[_ + g + 8 * v + 64 * y] - s) / a, b = k * h + g, w = I * p + v, x = R * d + y, V[b + f * w + m * x] = S, E = S - A, C += E * E;
           _ += D
          }
        return C /= D * u * l * c, C = Math.sqrt(C), {
         data: V,
         sigma: C,
         minj: T,
         maxj: M,
         meanj: A
        }
       }
       n.parse = r
      }(o || (o = {}))
     }(n = t.DSN6 || (t.DSN6 = {}))
    }(t = e.Density || (e.Density = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     function n(t, n, r) {
      return e.Computation.create(function(e) {
       e.update("Parsing " + n + "...");
       try {
        e.resolve(r(t))
       } catch (i) {
        e.reject("" + i)
       }
      })
     }
     var r;
     ! function(e) {
      e.CCP4 = {
       name: "CCP4",
       shortcuts: ["ccp4", "map"],
       extensions: [".ccp4", ".map"],
       isBinary: !0,
       parse: function(e) {
        return n(e, "CCP4", function(e) {
         return t.CCP4.parse(e)
        })
       }
      }, e.DSN6 = {
       name: "DSN6",
       shortcuts: ["dsn6"],
       extensions: [".dsn6"],
       isBinary: !0,
       parse: function(e) {
        return n(e, "DSN6", function(e) {
         return t.DSN6.parse(e)
        })
       }
      }, e.All = [e.CCP4, e.DSN6]
     }(r = t.SupportedFormats || (t.SupportedFormats = {}))
    }(n = t.Density || (t.Density = {}))
   }(t = e.Formats || (e.Formats = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     var t, n = "undefined" != typeof Float64Array ? function(e) {
      return new Float64Array(e)
     } : function() {
      return []
     };
     ! function(e) {
      function t() {
       return n(16)
      }

      function r() {
       var e = n(16);
       return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = 0, e[13] = 0, e[14] = 0, e[15] = 1, e
      }

      function i(e) {
       var t, r, i, o = n(16);
       for (t = 0; 4 > t; t++)
        for (i = e[t], r = 0; 4 > r; r++) o[4 * r + t] = i[r];
       return o
      }

      function o(e, t, n) {
       for (var r = 0; 16 > r; r++)
        if (Math.abs(e[r] - t[r]) > n) return !1;
       return !0
      }

      function a(e, t, n, r) {
       e[4 * n + t] = r
      }

      function s(e, t) {
       return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e
      }

      function u(t) {
       return e.copy(e.empty(), t)
      }

      function l(e, t) {
       var n = t[0],
        r = t[1],
        i = t[2],
        o = t[3],
        a = t[4],
        s = t[5],
        u = t[6],
        l = t[7],
        c = t[8],
        h = t[9],
        p = t[10],
        d = t[11],
        f = t[12],
        m = t[13],
        g = t[14],
        v = t[15],
        y = n * s - r * a,
        b = n * u - i * a,
        w = n * l - o * a,
        x = r * u - i * s,
        _ = r * l - o * s,
        S = i * l - o * u,
        C = c * m - h * f,
        E = c * g - p * f,
        T = c * v - d * f,
        M = h * g - p * m,
        A = h * v - d * m,
        P = p * v - d * g,
        R = y * P - b * A + w * M + x * T - _ * E + S * C;
       return R ? (R = 1 / R, e[0] = (s * P - u * A + l * M) * R, e[1] = (i * A - r * P - o * M) * R, e[2] = (m * S - g * _ + v * x) * R, e[3] = (p * _ - h * S - d * x) * R, e[4] = (u * T - a * P - l * E) * R, e[5] = (n * P - i * T + o * E) * R, e[6] = (g * w - f * S - v * b) * R, e[7] = (c * S - p * w + d * b) * R, e[8] = (a * A - s * T + l * C) * R, e[9] = (r * T - n * A - o * C) * R, e[10] = (f * _ - m * w + v * y) * R, e[11] = (h * w - c * _ - d * y) * R, e[12] = (s * E - a * M - u * C) * R, e[13] = (n * M - r * E + i * C) * R, e[14] = (m * b - f * x - g * y) * R, e[15] = (c * x - h * b + p * y) * R, e) : null
      }

      function c(e, t, n) {
       var r = t[0],
        i = t[1],
        o = t[2],
        a = t[3],
        s = t[4],
        u = t[5],
        l = t[6],
        c = t[7],
        h = t[8],
        p = t[9],
        d = t[10],
        f = t[11],
        m = t[12],
        g = t[13],
        v = t[14],
        y = t[15],
        b = n[0],
        w = n[1],
        x = n[2],
        _ = n[3];
       return e[0] = b * r + w * s + x * h + _ * m, e[1] = b * i + w * u + x * p + _ * g, e[2] = b * o + w * l + x * d + _ * v, e[3] = b * a + w * c + x * f + _ * y, b = n[4], w = n[5], x = n[6], _ = n[7], e[4] = b * r + w * s + x * h + _ * m, e[5] = b * i + w * u + x * p + _ * g, e[6] = b * o + w * l + x * d + _ * v, e[7] = b * a + w * c + x * f + _ * y, b = n[8], w = n[9], x = n[10], _ = n[11], e[8] = b * r + w * s + x * h + _ * m, e[9] = b * i + w * u + x * p + _ * g, e[10] = b * o + w * l + x * d + _ * v, e[11] = b * a + w * c + x * f + _ * y, b = n[12], w = n[13], x = n[14], _ = n[15], e[12] = b * r + w * s + x * h + _ * m, e[13] = b * i + w * u + x * p + _ * g, e[14] = b * o + w * l + x * d + _ * v, e[15] = b * a + w * c + x * f + _ * y, e
      }

      function h(e, t, n) {
       var r, i, o, a, s, u, l, c, h, p, d, f, m = n[0],
        g = n[1],
        v = n[2];
       return t === e ? (e[12] = t[0] * m + t[4] * g + t[8] * v + t[12], e[13] = t[1] * m + t[5] * g + t[9] * v + t[13], e[14] = t[2] * m + t[6] * g + t[10] * v + t[14], e[15] = t[3] * m + t[7] * g + t[11] * v + t[15]) : (r = t[0], i = t[1], o = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], p = t[9], d = t[10], f = t[11], e[0] = r, e[1] = i, e[2] = o, e[3] = a, e[4] = s, e[5] = u, e[6] = l, e[7] = c, e[8] = h, e[9] = p, e[10] = d, e[11] = f, e[12] = r * m + s * g + h * v + t[12], e[13] = i * m + u * g + p * v + t[13], e[14] = o * m + l * g + d * v + t[14], e[15] = a * m + c * g + f * v + t[15]), e
      }

      function p(e, t) {
       return e[0] = 1, e[1] = 0, e[2] = 0, e[3] = 0, e[4] = 0, e[5] = 1, e[6] = 0, e[7] = 0, e[8] = 0, e[9] = 0, e[10] = 1, e[11] = 0, e[12] = t[0], e[13] = t[1], e[14] = t[2], e[15] = 1, e
      }

      function d(e, t, n) {
       var r = t.x,
        i = t.y,
        o = t.z;
       return e.x = n[0] * r + n[4] * i + n[8] * o + n[12], e.y = n[1] * r + n[5] * i + n[9] * o + n[13], e.z = n[2] * r + n[6] * i + n[10] * o + n[14], e
      }

      function f(e) {
       for (var t = "", n = 0; 4 > n; n++) {
        for (var r = 0; 4 > r; r++) t += e[4 * r + n].toString(), 3 > r && (t += " ");
        3 > n && (t += "\n")
       }
       return t
      }

      function m(e) {
       var t = e[0],
        n = e[1],
        r = e[2],
        i = e[3],
        o = e[4],
        a = e[5],
        s = e[6],
        u = e[7],
        l = e[8],
        c = e[9],
        h = e[10],
        p = e[11],
        d = e[12],
        f = e[13],
        m = e[14],
        g = e[15],
        v = t * a - n * o,
        y = t * s - r * o,
        b = t * u - i * o,
        w = n * s - r * a,
        x = n * u - i * a,
        _ = r * u - i * s,
        S = l * f - c * d,
        C = l * m - h * d,
        E = l * g - p * d,
        T = c * m - h * f,
        M = c * g - p * f,
        A = h * g - p * m;
       return v * A - y * M + b * T + w * E - x * C + _ * S
      }
      e.empty = t, e.identity = r, e.ofRows = i, e.areEqual = o, e.setValue = a, e.copy = s, e.clone = u, e.invert = l, e.mul = c, e.translate = h, e.fromTranslation = p, e.transformVector3 = d, e.makeTable = f, e.determinant = m
     }(t = e.Matrix4 || (e.Matrix4 = {}));
     var r;
     ! function(e) {
      function t() {
       var e = n(4);
       return e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 0, e
      }

      function r(e) {
       var t = n(4);
       return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t
      }

      function i(e, t, r, i) {
       var o = n(4);
       return o[0] = e, o[1] = t, o[2] = r, o[3] = i, o
      }

      function o(e, t, n, r, i) {
       return e[0] = t, e[1] = n, e[2] = r, e[3] = i, e
      }

      function a(e, t) {
       var n = t[0] - e[0],
        r = t[1] - e[1],
        i = t[2] - e[2],
        o = t[3] - e[3];
       return Math.sqrt(n * n + r * r + i * i + o * o)
      }

      function s(e, t) {
       var n = t[0] - e[0],
        r = t[1] - e[1],
        i = t[2] - e[2],
        o = t[3] - e[3];
       return n * n + r * r + i * i + o * o
      }

      function u(e) {
       var t = e[0],
        n = e[1],
        r = e[2],
        i = e[3];
       return Math.sqrt(t * t + n * n + r * r + i * i)
      }

      function l(e) {
       var t = e[0],
        n = e[1],
        r = e[2],
        i = e[3];
       return t * t + n * n + r * r + i * i
      }

      function c(e, t, n) {
       var r = t[0],
        i = t[1],
        o = t[2],
        a = t[3];
       return e[0] = n[0] * r + n[4] * i + n[8] * o + n[12] * a, e[1] = n[1] * r + n[5] * i + n[9] * o + n[13] * a, e[2] = n[2] * r + n[6] * i + n[10] * o + n[14] * a, e[3] = n[3] * r + n[7] * i + n[11] * o + n[15] * a, e
      }
      e.create = t, e.clone = r, e.fromValues = i, e.set = o, e.distance = a, e.squaredDistance = s, e.norm = u, e.squaredNorm = l, e.transform = c
     }(r = e.Vector4 || (e.Vector4 = {}))
    }(t = e.LinearAlgebra || (e.LinearAlgebra = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     function t(e) {
      var t, n = 2 * e.capacity + 1,
       r = new Int32Array(n);
      if (e.count < 32)
       for (t = 0; t < e.count; t++) r[t] = e.indices[t];
      else r.set(e.indices);
      e.indices = r, e.capacity = n
     }

     function n(e, n) {
      this.count + 1 >= this.capacity && t(this), this.indices[this.count++] = n
     }

     function r() {
      this.count = 0
     }

     function i(e) {
      return 1 > e && (e = 1), {
       indices: new Int32Array(e),
       count: 0,
       capacity: e,
       hasPriorities: !1,
       priorities: void 0,
       add: n,
       reset: r
      }
     }
     e.create = i
    }(t = e.SubdivisionTree3DResultIndexBuffer || (e.SubdivisionTree3DResultIndexBuffer = {}));
    var n;
    ! function(e) {
     function t(e) {
      var t, n = 2 * e.capacity + 1,
       r = new Int32Array(n),
       i = new Float32Array(n);
      if (e.count < 32)
       for (t = 0; t < e.count; t++) r[t] = e.indices[t], i[t] = e.priorities[t];
      else r.set(e.indices), i.set(e.priorities);
      e.indices = r, e.priorities = i, e.capacity = n
     }

     function n(e, n) {
      this.count + 1 >= this.capacity && t(this), this.priorities[this.count] = e, this.indices[this.count++] = n
     }

     function r() {
      this.count = 0
     }

     function i(e) {
      return 1 > e && (e = 1), {
       indices: new Int32Array(e),
       count: 0,
       capacity: e,
       hasPriorities: !0,
       priorities: new Float32Array(e),
       add: n,
       reset: r
      }
     }
     e.create = i
    }(n = e.SubdivisionTree3DResultPriorityBuffer || (e.SubdivisionTree3DResultPriorityBuffer = {}));
    var r;
    ! function(e) {
     function t(e, t, n, r) {
      this.pivot[0] = e, this.pivot[1] = t, this.pivot[2] = n, this.radius = r, this.radiusSq = r * r, this.buffer.reset(), a.nearest(this.tree.root, this, 0)
     }

     function n(e, n) {
      return {
       tree: e,
       indices: e.indices,
       positions: e.positions,
       buffer: n,
       pivot: [.1, .1, .1],
       radius: 1.1,
       radiusSq: 1.1 * 1.1,
       nearest: t
      }
     }
     e.create = n
    }(r = e.SubdivisionTree3DQueryContext || (e.SubdivisionTree3DQueryContext = {}));
    var i;
    ! function(e) {
     function i(e, i, o) {
      return void 0 === o && (o = !1), r.create(e, o ? n.create(Math.max(i * i | 0, 8)) : t.create(Math.max(i * i | 0, 8)))
     }

     function o(e, t, n) {
      void 0 === n && (n = 32);
      var r = u.build(e, t, n),
       i = r.root,
       o = r.indices,
       a = r.positions;
      return {
       data: e,
       root: i,
       indices: o,
       positions: a
      }
     }
     e.createContextRadius = i, e.create = o
    }(i = e.SubdivisionTree3D || (e.SubdivisionTree3D = {}));
    var o;
    ! function(e) {
     function t(e, t, n, r) {
      e.data[e._count++] = t, e.data[e._count++] = n, e.data[e._count++] = r, e.boundsMin[0] = Math.min(t, e.boundsMin[0]), e.boundsMin[1] = Math.min(n, e.boundsMin[1]), e.boundsMin[2] = Math.min(r, e.boundsMin[2]), e.boundsMax[0] = Math.max(t, e.boundsMax[0]), e.boundsMax[1] = Math.max(n, e.boundsMax[1]), e.boundsMax[2] = Math.max(r, e.boundsMax[2])
     }

     function n(e) {
      var t = new Float32Array(3 * e | 0),
       n = s.createInfinite(),
       r = n.min,
       i = n.max;
      return {
       _count: 0,
       data: t,
       bounds: n,
       boundsMin: r,
       boundsMax: i
      }
     }
     e.add = t, e.create = n
    }(o || (o = {}));
    var a;
    ! function(e) {
     function t(e, t) {
      var n, r, i, o, a, s, u = t.pivot,
       l = t.indices,
       c = t.positions,
       h = t.radiusSq;
      for (s = e.startIndex; s < e.endIndex; s++) o = 3 * l[s], n = u[0] - c[o], r = u[1] - c[o + 1], i = u[2] - c[o + 2], a = n * n + r * r + i * i, h >= a && t.buffer.add(a, l[s])
     }

     function n(e, t, n) {
      var i = t.pivot[n],
       o = i < e.splitValue;
      (o ? i + t.radius > e.splitValue : i - t.radius < e.splitValue) ? (r(e.left, t, (n + 1) % 3), r(e.right, t, (n + 1) % 3)) : o ? r(e.left, t, (n + 1) % 3) : r(e.right, t, (n + 1) % 3)
     }

     function r(e, r, i) {
      e.startIndex !== e.endIndex && (isNaN(e.splitValue) ? t(e, r) : n(e, r, i))
     }

     function i(e, t, n, r, i) {
      return {
       splitValue: e,
       startIndex: t,
       endIndex: n,
       left: r,
       right: i
      }
     }
     e.nearest = r, e.create = i
    }(a = e.SubdivisionTree3DNode || (e.SubdivisionTree3DNode = {}));
    var s;
    ! function(e) {
     function t() {
      return {
       min: [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE],
       max: [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE]
      }
     }
     e.createInfinite = t
    }(s = e.Box3D || (e.Box3D = {}));
    var u;
    ! function(e) {
     function t(e, n, r, i) {
      var o = r - n + 1;
      if (0 >= o) return e.emptyNode;
      if (o <= e.leafSize) return a.create(0 / 0, n, r + 1, e.emptyNode, e.emptyNode);
      for (var s, u, l, c = e.bounds.min[i], h = e.bounds.max[i], p = .5 * (c + h), d = 0, f = n, m = r; m > f;) {
       for (s = e.indices[m], e.indices[m] = e.indices[f], e.indices[f] = s; r >= f && e.positions[3 * e.indices[f] + i] <= p;) f++;
       for (; m >= n && e.positions[3 * e.indices[m] + i] > p;) m--
      }
      return d = f - 1, e.bounds.max[i] = p, u = t(e, n, d, (i + 1) % 3), e.bounds.max[i] = h, e.bounds.min[i] = p, l = t(e, d + 1, r, (i + 1) % 3), e.bounds.min[i] = c, a.create(p, n, r + 1, u, l)
     }

     function n(e) {
      var t = o.add;
      return function(n, r, i) {
       t(e, n, r, i)
      }
     }

     function r(e, r, i) {
      for (var s = o.create(e.length), u = new Int32Array(e.length), l = n(s), c = 0; c < e.length; c++) u[c] = c, r(e[c], l);
      l = void 0;
      var h = {
        bounds: s.bounds,
        positions: s.data,
        leafSize: i,
        indices: u,
        emptyNode: a.create(0 / 0, -1, -1, void 0, void 0)
       },
       p = t(h, 0, u.length - 1, 0);
      return h = void 0, {
       root: p,
       indices: u,
       positions: s.data
      }
     }
     e.build = r
    }(u || (u = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r(e) {
      if (!e.normals) {
       {
        var t, n, r = new Float32Array(e.vertices.length),
         i = e.vertices,
         o = e.triangleIndices;
        o.length
       }
       for (n = 0; n < o.length; n += 3) {
        var a = 3 * o[n],
         s = 3 * o[n + 1],
         u = 3 * o[n + 2],
         l = i[a + 2] * (i[s + 1] - i[u + 1]) + i[s + 2] * i[u + 1] - i[s + 1] * i[u + 2] + i[a + 1] * (-i[s + 2] + i[u + 2]),
         c = -(i[s + 2] * i[u]) + i[a + 2] * (-i[s] + i[u]) + i[a] * (i[s + 2] - i[u + 2]) + i[s] * i[u + 2],
         h = i[a + 1] * (i[s] - i[u]) + i[s + 1] * i[u] - i[s] * i[u + 1] + i[a] * (-i[s + 1] + i[s + 1]);
        r[a] += l, r[a + 1] += c, r[a + 2] += h, r[s] += l, r[s + 1] += c, r[s + 2] += h, r[u] += l, r[u + 1] += c, r[u + 2] += h
       }
       for (n = 0; n < r.length; n += 3) {
        var l = r[n],
         c = r[n + 1],
         h = r[n + 2];
        t = 1 / Math.sqrt(l * l + c * c + h * h), r[n] *= t, r[n + 1] *= t, r[n + 2] *= t
       }
       e.normals = r
      }
     }

     function i(t) {
      return e.Computation.create(function(e) {
       return t.normals ? (e.resolve(t), void 0) : (e.update("Computing normals..."), e.schedule(function() {
        r(t), e.resolve(t)
       }), void 0)
      })
     }

     function o(e, t, n, r) {
      n[3 * r] += e[3 * t], n[3 * r + 1] += e[3 * t + 1], n[3 * r + 2] += e[3 * t + 2]
     }

     function a(e, t, n) {
      for (var r = e.triangleIndices.length, i = e.vertices, a = e.triangleIndices, s = 0; r > s; s += 3) {
       var u = a[s],
        l = a[s + 1],
        c = a[s + 2];
       o(i, l, n, u), o(i, c, n, u), o(i, u, n, l), o(i, c, n, l), o(i, u, n, c), o(i, l, n, c)
      }
      for (var s = 0, h = e.vertexCount; h > s; s++) {
       var p = t[s] + 2;
       n[3 * s] = (n[3 * s] + 2 * i[3 * s]) / p, n[3 * s + 1] = (n[3 * s + 1] + 2 * i[3 * s + 1]) / p, n[3 * s + 2] = (n[3 * s + 2] + 2 * i[3 * s + 2]) / p
      }
     }

     function s(t, n) {
      return void 0 === n && (n = 1), 1 > n && (n = 0), 0 === n ? e.Computation.resolve(t) : e.Computation.create(function(e) {
       e.update("Smoothing surface...");
       for (var r = new Int32Array(t.vertexCount), i = t.triangleIndices.length, o = t.triangleIndices, s = 0; i > s; s++) r[o[s]] += 2;
       var u = new Float32Array(t.vertices.length),
        l = function(i) {
         if (i >= n) return e.resolve(t), void 0;
         if (i > 0)
          for (var o = 0, s = u.length; s > o; o++) u[o] = 0;
         t.normals = void 0, a(t, r, u);
         var c = t.vertices;
         t.vertices = u, u = c, e.update("Smoothing surface...", e.abortRequest, i + 1, n), e.schedule(function() {
          return l(i + 1)
         })
        };
       l(0)
      })
     }

     function u(t) {
      return e.Computation.create(function(e) {
       return t.boundingSphere ? (e.resolve(t), void 0) : (e.update("Computing bounding sphere..."), e.schedule(function() {
        for (var n = t.vertices, r = 0, i = 0, o = 0, a = 0, s = t.vertices.length; s > a; a += 3) r += n[a], i += n[a + 1], o += n[a + 2];
        r /= t.vertexCount, i /= t.vertexCount, o /= t.vertexCount;
        for (var u = 0, a = 0, s = n.length; s > a; a += 3) {
         var l = r - n[a],
          c = i - n[a + 1],
          h = o - n[a + 2];
         u = Math.max(u, l * l + c * c + h * h)
        }
        t.boundingSphere = {
         center: {
          x: r,
          y: i,
          z: o
         },
         radius: Math.sqrt(u)
        }, e.resolve(t)
       }), void 0)
      })
     }

     function l(e, n) {
      for (var r = {
        x: .1,
        y: .1,
        z: .1
       }, i = t.LinearAlgebra.Matrix4.transformVector3, o = e.vertices, a = 0, s = e.vertices.length; s > a; a += 3) r.x = o[a], r.y = o[a + 1], r.z = o[a + 2], i(r, r, n), o[a] = r.x, o[a + 1] = r.y, o[a + 2] = r.z;
      e.normals = void 0, e.boundingSphere = void 0
     }

     function c(t, n) {
      return e.Computation.create(function(e) {
       e.update("Updating surface..."), e.schedule(function() {
        l(t, n), e.resolve(t)
       })
      })
     }
     n.computeNormalsImmediate = r, n.computeNormals = i, n.laplacianSmooth = s, n.computeBoundingSphere = u, n.transformImmediate = l, n.transform = c
    }(n = t.Surface || (t.Surface = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     function n(t) {
      return e.Computation.create(function(e) {
       var n = new r(t, e);
       n.start()
      })
     }
     t.compute = n;
     var r = function() {
       function t(t, n) {
        var r = this;
        this.ctx = n, this.chunkSize = 512e3, this.done = 0, this.k = 0, this.minX = 0, this.minY = 0, this.minZ = 0, this.maxX = 0, this.maxY = 0, this.maxZ = 0, this._slice = function() {
         try {
          r.slice()
         } catch (e) {
          r.ctx.reject("" + e)
         }
        };
        var o = e.Utils.extend({}, t);
        o.bottomLeft || (o.bottomLeft = [0, 0, 0]), o.topRight || (o.topRight = o.scalarField.dimensions), this.state = new i(o), this.minX = o.bottomLeft[0], this.minY = o.bottomLeft[1], this.minZ = o.bottomLeft[2], this.maxX = o.topRight[0] - 1, this.maxY = o.topRight[1] - 1, this.maxZ = o.topRight[2] - 1, this.k = this.minZ, this.size = (this.maxX - this.minX) * (this.maxY - this.minY) * (this.maxZ - this.minZ), this.sliceSize = (this.maxX - this.minX) * (this.maxY - this.minY)
       }
       return t.prototype.nextSlice = function() {
        return this.ctx.abortRequested ? (this.ctx.abort(), void 0) : (this.done += this.sliceSize, this.ctx.update("Computing surface...", this.ctx.abortRequest, this.done, this.size), this.k >= this.maxZ ? this.finish() : this.ctx.schedule(this._slice), void 0)
       }, t.prototype.slice = function() {
        for (var e = this.minY; e < this.maxY; e++)
         for (var t = this.minX; t < this.maxX; t++) this.state.processCell(t, e, this.k);
        this.k++, this.nextSlice()
       }, t.prototype.finish = function() {
        var t = e.Utils.ChunkedArray.compact(this.state.vertexBuffer),
         n = e.Utils.ChunkedArray.compact(this.state.triangleBuffer);
        this.state.vertexBuffer = void 0, this.state.verticesOnEdges = void 0;
        var r = {
         vertexCount: t.length / 3 | 0,
         triangleCount: n.length / 3 | 0,
         vertices: t,
         triangleIndices: n,
         annotation: this.state.annotate ? e.Utils.ChunkedArray.compact(this.state.annotationBuffer) : void 0
        };
        this.ctx.resolve(r)
       }, t.prototype.start = function() {
        this.ctx.update("Computing surface...", this.ctx.abortRequest, 0, this.size), this.ctx.schedule(this._slice)
       }, t
      }(),
      i = function() {
       function n(t) {
        this.vertList = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], this.i = 0, this.j = 0, this.k = 0, this.nX = t.scalarField.dimensions[0], this.nY = t.scalarField.dimensions[1], this.nZ = t.scalarField.dimensions[2], this.isoLevel = t.isoLevel, this.scalarField = t.scalarField, this.annotationField = t.annotationField;
        var n = t.topRight[0] - t.bottomLeft[0],
         r = t.topRight[1] - t.bottomLeft[1],
         i = t.topRight[2] - t.bottomLeft[2],
         o = Math.min(262144, 0 | Math.max(n * r * i / 16, 1024)),
         a = Math.min(65536, 4 * o);
        this.vertexBuffer = e.Utils.ChunkedArray.forVertex3D(o), this.triangleBuffer = e.Utils.ChunkedArray.create(function(e) {
         return new Uint32Array(e)
        }, a, 3), this.annotate = !!t.annotationField, this.annotate && (this.annotationBuffer = e.Utils.ChunkedArray.forInt32(o)), this.verticesOnEdges = new Int32Array(3 * this.nX * this.nY * this.nZ)
       }
       return n.prototype.get3dOffsetFromEdgeInfo = function(e) {
        return this.nX * ((this.k + e.k) * this.nY + this.j + e.j) + this.i + e.i | 0
       }, n.prototype.interpolate = function(n) {
        var r = t.EdgeIdInfo[n],
         i = 3 * this.get3dOffsetFromEdgeInfo(r) + r.e,
         o = this.verticesOnEdges[i];
        if (o > 0) return o - 1 | 0;
        var a = t.CubeEdges[n],
         s = a.a,
         u = a.b,
         l = s.i + this.i,
         c = s.j + this.j,
         h = s.k + this.k,
         p = u.i + this.i,
         d = u.j + this.j,
         f = u.k + this.k,
         m = this.scalarField.get(l, c, h),
         g = this.scalarField.get(p, d, f),
         v = (this.isoLevel - m) / (m - g),
         y = 0 | e.Utils.ChunkedArray.add3(this.vertexBuffer, l + v * (l - p), c + v * (c - d), h + v * (h - f));
        return this.verticesOnEdges[i] = y + 1, this.annotate && e.Utils.ChunkedArray.add(this.annotationBuffer, this.annotationField.get(this.i, this.j, this.k)), y
       }, n.prototype.processCell = function(n, r, i) {
        var o = 0;
        if (this.scalarField.get(n, r, i) < this.isoLevel && (o |= 1), this.scalarField.get(n + 1, r, i) < this.isoLevel && (o |= 2), this.scalarField.get(n + 1, r + 1, i) < this.isoLevel && (o |= 4), this.scalarField.get(n, r + 1, i) < this.isoLevel && (o |= 8), this.scalarField.get(n, r, i + 1) < this.isoLevel && (o |= 16), this.scalarField.get(n + 1, r, i + 1) < this.isoLevel && (o |= 32), this.scalarField.get(n + 1, r + 1, i + 1) < this.isoLevel && (o |= 64), this.scalarField.get(n, r + 1, i + 1) < this.isoLevel && (o |= 128), 0 !== o && 255 !== o) {
         this.i = n, this.j = r, this.k = i;
         var a = t.EdgeTable[o];
         (1 & a) > 0 && (this.vertList[0] = this.interpolate(0)), (2 & a) > 0 && (this.vertList[1] = this.interpolate(1)), (4 & a) > 0 && (this.vertList[2] = this.interpolate(2)), (8 & a) > 0 && (this.vertList[3] = this.interpolate(3)), (16 & a) > 0 && (this.vertList[4] = this.interpolate(4)), (32 & a) > 0 && (this.vertList[5] = this.interpolate(5)), (64 & a) > 0 && (this.vertList[6] = this.interpolate(6)), (128 & a) > 0 && (this.vertList[7] = this.interpolate(7)), (256 & a) > 0 && (this.vertList[8] = this.interpolate(8)), (512 & a) > 0 && (this.vertList[9] = this.interpolate(9)), (1024 & a) > 0 && (this.vertList[10] = this.interpolate(10)), (2048 & a) > 0 && (this.vertList[11] = this.interpolate(11));
         for (var s = t.TriTable[o], u = 0; u < s.length; u += 3) e.Utils.ChunkedArray.add3(this.triangleBuffer, this.vertList[s[u]], this.vertList[s[u + 1]], this.vertList[s[u + 2]])
        }
       }, n
      }()
    }(n = t.MarchingCubes || (t.MarchingCubes = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     var t = function() {
      function e(e, t, n) {
       this.i = 0 | e, this.j = 0 | t, this.k = 0 | n
      }
      return e
     }();
     e.Index = t;
     var n = function() {
      function e(e, t) {
       this.a = e, this.b = t
      }
      return e
     }();
     e.IndexPair = n, e.EdgesXY = [
      [],
      [0, 3],
      [0, 1],
      [1, 3],
      [1, 2],
      [0, 1, 1, 2, 2, 3, 0, 3],
      [0, 2],
      [2, 3],
      [2, 3],
      [0, 2],
      [0, 1, 1, 2, 2, 3, 0, 3],
      [1, 2],
      [1, 3],
      [0, 1],
      [0, 3],
      []
     ], e.EdgesXZ = [
      [],
      [0, 8],
      [0, 9],
      [9, 8],
      [9, 4],
      [0, 9, 9, 4, 4, 8, 0, 8],
      [0, 4],
      [4, 8],
      [4, 8],
      [0, 4],
      [0, 9, 9, 4, 4, 8, 0, 8],
      [9, 4],
      [9, 8],
      [0, 9],
      [0, 8],
      []
     ], e.EdgesYZ = [
      [],
      [3, 8],
      [3, 11],
      [11, 8],
      [11, 7],
      [3, 11, 11, 7, 7, 8, 3, 8],
      [3, 7],
      [7, 8],
      [7, 8],
      [3, 7],
      [3, 11, 11, 7, 7, 8, 3, 8],
      [11, 7],
      [11, 8],
      [3, 11],
      [3, 8],
      []
     ], e.CubeVertices = [new t(0, 0, 0), new t(1, 0, 0), new t(1, 1, 0), new t(0, 1, 0), new t(0, 0, 1), new t(1, 0, 1), new t(1, 1, 1), new t(0, 1, 1)], e.CubeEdges = [new n(e.CubeVertices[0], e.CubeVertices[1]), new n(e.CubeVertices[1], e.CubeVertices[2]), new n(e.CubeVertices[2], e.CubeVertices[3]), new n(e.CubeVertices[3], e.CubeVertices[0]), new n(e.CubeVertices[4], e.CubeVertices[5]), new n(e.CubeVertices[5], e.CubeVertices[6]), new n(e.CubeVertices[6], e.CubeVertices[7]), new n(e.CubeVertices[7], e.CubeVertices[4]), new n(e.CubeVertices[0], e.CubeVertices[4]), new n(e.CubeVertices[1], e.CubeVertices[5]), new n(e.CubeVertices[2], e.CubeVertices[6]), new n(e.CubeVertices[3], e.CubeVertices[7])], e.EdgeIdInfo = [{
      i: 0,
      j: 0,
      k: 0,
      e: 0
     }, {
      i: 1,
      j: 0,
      k: 0,
      e: 1
     }, {
      i: 0,
      j: 1,
      k: 0,
      e: 0
     }, {
      i: 0,
      j: 0,
      k: 0,
      e: 1
     }, {
      i: 0,
      j: 0,
      k: 1,
      e: 0
     }, {
      i: 1,
      j: 0,
      k: 1,
      e: 1
     }, {
      i: 0,
      j: 1,
      k: 1,
      e: 0
     }, {
      i: 0,
      j: 0,
      k: 1,
      e: 1
     }, {
      i: 0,
      j: 0,
      k: 0,
      e: 2
     }, {
      i: 1,
      j: 0,
      k: 0,
      e: 2
     }, {
      i: 1,
      j: 1,
      k: 0,
      e: 2
     }, {
      i: 0,
      j: 1,
      k: 0,
      e: 2
     }], e.EdgeTable = [0, 265, 515, 778, 1030, 1295, 1541, 1804, 2060, 2309, 2575, 2822, 3082, 3331, 3593, 3840, 400, 153, 915, 666, 1430, 1183, 1941, 1692, 2460, 2197, 2975, 2710, 3482, 3219, 3993, 3728, 560, 825, 51, 314, 1590, 1855, 1077, 1340, 2620, 2869, 2111, 2358, 3642, 3891, 3129, 3376, 928, 681, 419, 170, 1958, 1711, 1445, 1196, 2988, 2725, 2479, 2214, 4010, 3747, 3497, 3232, 1120, 1385, 1635, 1898, 102, 367, 613, 876, 3180, 3429, 3695, 3942, 2154, 2403, 2665, 2912, 1520, 1273, 2035, 1786, 502, 255, 1013, 764, 3580, 3317, 4095, 3830, 2554, 2291, 3065, 2800, 1616, 1881, 1107, 1370, 598, 863, 85, 348, 3676, 3925, 3167, 3414, 2650, 2899, 2137, 2384, 1984, 1737, 1475, 1226, 966, 719, 453, 204, 4044, 3781, 3535, 3270, 3018, 2755, 2505, 2240, 2240, 2505, 2755, 3018, 3270, 3535, 3781, 4044, 204, 453, 719, 966, 1226, 1475, 1737, 1984, 2384, 2137, 2899, 2650, 3414, 3167, 3925, 3676, 348, 85, 863, 598, 1370, 1107, 1881, 1616, 2800, 3065, 2291, 2554, 3830, 4095, 3317, 3580, 764, 1013, 255, 502, 1786, 2035, 1273, 1520, 2912, 2665, 2403, 2154, 3942, 3695, 3429, 3180, 876, 613, 367, 102, 1898, 1635, 1385, 1120, 3232, 3497, 3747, 4010, 2214, 2479, 2725, 2988, 1196, 1445, 1711, 1958, 170, 419, 681, 928, 3376, 3129, 3891, 3642, 2358, 2111, 2869, 2620, 1340, 1077, 1855, 1590, 314, 51, 825, 560, 3728, 3993, 3219, 3482, 2710, 2975, 2197, 2460, 1692, 1941, 1183, 1430, 666, 915, 153, 400, 3840, 3593, 3331, 3082, 2822, 2575, 2309, 2060, 1804, 1541, 1295, 1030, 778, 515, 265, 0], e.TriTable = [
      [],
      [0, 8, 3],
      [0, 1, 9],
      [1, 8, 3, 9, 8, 1],
      [1, 2, 10],
      [0, 8, 3, 1, 2, 10],
      [9, 2, 10, 0, 2, 9],
      [2, 8, 3, 2, 10, 8, 10, 9, 8],
      [3, 11, 2],
      [0, 11, 2, 8, 11, 0],
      [1, 9, 0, 2, 3, 11],
      [1, 11, 2, 1, 9, 11, 9, 8, 11],
      [3, 10, 1, 11, 10, 3],
      [0, 10, 1, 0, 8, 10, 8, 11, 10],
      [3, 9, 0, 3, 11, 9, 11, 10, 9],
      [9, 8, 10, 10, 8, 11],
      [4, 7, 8],
      [4, 3, 0, 7, 3, 4],
      [0, 1, 9, 8, 4, 7],
      [4, 1, 9, 4, 7, 1, 7, 3, 1],
      [1, 2, 10, 8, 4, 7],
      [3, 4, 7, 3, 0, 4, 1, 2, 10],
      [9, 2, 10, 9, 0, 2, 8, 4, 7],
      [2, 10, 9, 2, 9, 7, 2, 7, 3, 7, 9, 4],
      [8, 4, 7, 3, 11, 2],
      [11, 4, 7, 11, 2, 4, 2, 0, 4],
      [9, 0, 1, 8, 4, 7, 2, 3, 11],
      [4, 7, 11, 9, 4, 11, 9, 11, 2, 9, 2, 1],
      [3, 10, 1, 3, 11, 10, 7, 8, 4],
      [1, 11, 10, 1, 4, 11, 1, 0, 4, 7, 11, 4],
      [4, 7, 8, 9, 0, 11, 9, 11, 10, 11, 0, 3],
      [4, 7, 11, 4, 11, 9, 9, 11, 10],
      [9, 5, 4],
      [9, 5, 4, 0, 8, 3],
      [0, 5, 4, 1, 5, 0],
      [8, 5, 4, 8, 3, 5, 3, 1, 5],
      [1, 2, 10, 9, 5, 4],
      [3, 0, 8, 1, 2, 10, 4, 9, 5],
      [5, 2, 10, 5, 4, 2, 4, 0, 2],
      [2, 10, 5, 3, 2, 5, 3, 5, 4, 3, 4, 8],
      [9, 5, 4, 2, 3, 11],
      [0, 11, 2, 0, 8, 11, 4, 9, 5],
      [0, 5, 4, 0, 1, 5, 2, 3, 11],
      [2, 1, 5, 2, 5, 8, 2, 8, 11, 4, 8, 5],
      [10, 3, 11, 10, 1, 3, 9, 5, 4],
      [4, 9, 5, 0, 8, 1, 8, 10, 1, 8, 11, 10],
      [5, 4, 0, 5, 0, 11, 5, 11, 10, 11, 0, 3],
      [5, 4, 8, 5, 8, 10, 10, 8, 11],
      [9, 7, 8, 5, 7, 9],
      [9, 3, 0, 9, 5, 3, 5, 7, 3],
      [0, 7, 8, 0, 1, 7, 1, 5, 7],
      [1, 5, 3, 3, 5, 7],
      [9, 7, 8, 9, 5, 7, 10, 1, 2],
      [10, 1, 2, 9, 5, 0, 5, 3, 0, 5, 7, 3],
      [8, 0, 2, 8, 2, 5, 8, 5, 7, 10, 5, 2],
      [2, 10, 5, 2, 5, 3, 3, 5, 7],
      [7, 9, 5, 7, 8, 9, 3, 11, 2],
      [9, 5, 7, 9, 7, 2, 9, 2, 0, 2, 7, 11],
      [2, 3, 11, 0, 1, 8, 1, 7, 8, 1, 5, 7],
      [11, 2, 1, 11, 1, 7, 7, 1, 5],
      [9, 5, 8, 8, 5, 7, 10, 1, 3, 10, 3, 11],
      [5, 7, 0, 5, 0, 9, 7, 11, 0, 1, 0, 10, 11, 10, 0],
      [11, 10, 0, 11, 0, 3, 10, 5, 0, 8, 0, 7, 5, 7, 0],
      [11, 10, 5, 7, 11, 5],
      [10, 6, 5],
      [0, 8, 3, 5, 10, 6],
      [9, 0, 1, 5, 10, 6],
      [1, 8, 3, 1, 9, 8, 5, 10, 6],
      [1, 6, 5, 2, 6, 1],
      [1, 6, 5, 1, 2, 6, 3, 0, 8],
      [9, 6, 5, 9, 0, 6, 0, 2, 6],
      [5, 9, 8, 5, 8, 2, 5, 2, 6, 3, 2, 8],
      [2, 3, 11, 10, 6, 5],
      [11, 0, 8, 11, 2, 0, 10, 6, 5],
      [0, 1, 9, 2, 3, 11, 5, 10, 6],
      [5, 10, 6, 1, 9, 2, 9, 11, 2, 9, 8, 11],
      [6, 3, 11, 6, 5, 3, 5, 1, 3],
      [0, 8, 11, 0, 11, 5, 0, 5, 1, 5, 11, 6],
      [3, 11, 6, 0, 3, 6, 0, 6, 5, 0, 5, 9],
      [6, 5, 9, 6, 9, 11, 11, 9, 8],
      [5, 10, 6, 4, 7, 8],
      [4, 3, 0, 4, 7, 3, 6, 5, 10],
      [1, 9, 0, 5, 10, 6, 8, 4, 7],
      [10, 6, 5, 1, 9, 7, 1, 7, 3, 7, 9, 4],
      [6, 1, 2, 6, 5, 1, 4, 7, 8],
      [1, 2, 5, 5, 2, 6, 3, 0, 4, 3, 4, 7],
      [8, 4, 7, 9, 0, 5, 0, 6, 5, 0, 2, 6],
      [7, 3, 9, 7, 9, 4, 3, 2, 9, 5, 9, 6, 2, 6, 9],
      [3, 11, 2, 7, 8, 4, 10, 6, 5],
      [5, 10, 6, 4, 7, 2, 4, 2, 0, 2, 7, 11],
      [0, 1, 9, 4, 7, 8, 2, 3, 11, 5, 10, 6],
      [9, 2, 1, 9, 11, 2, 9, 4, 11, 7, 11, 4, 5, 10, 6],
      [8, 4, 7, 3, 11, 5, 3, 5, 1, 5, 11, 6],
      [5, 1, 11, 5, 11, 6, 1, 0, 11, 7, 11, 4, 0, 4, 11],
      [0, 5, 9, 0, 6, 5, 0, 3, 6, 11, 6, 3, 8, 4, 7],
      [6, 5, 9, 6, 9, 11, 4, 7, 9, 7, 11, 9],
      [10, 4, 9, 6, 4, 10],
      [4, 10, 6, 4, 9, 10, 0, 8, 3],
      [10, 0, 1, 10, 6, 0, 6, 4, 0],
      [8, 3, 1, 8, 1, 6, 8, 6, 4, 6, 1, 10],
      [1, 4, 9, 1, 2, 4, 2, 6, 4],
      [3, 0, 8, 1, 2, 9, 2, 4, 9, 2, 6, 4],
      [0, 2, 4, 4, 2, 6],
      [8, 3, 2, 8, 2, 4, 4, 2, 6],
      [10, 4, 9, 10, 6, 4, 11, 2, 3],
      [0, 8, 2, 2, 8, 11, 4, 9, 10, 4, 10, 6],
      [3, 11, 2, 0, 1, 6, 0, 6, 4, 6, 1, 10],
      [6, 4, 1, 6, 1, 10, 4, 8, 1, 2, 1, 11, 8, 11, 1],
      [9, 6, 4, 9, 3, 6, 9, 1, 3, 11, 6, 3],
      [8, 11, 1, 8, 1, 0, 11, 6, 1, 9, 1, 4, 6, 4, 1],
      [3, 11, 6, 3, 6, 0, 0, 6, 4],
      [6, 4, 8, 11, 6, 8],
      [7, 10, 6, 7, 8, 10, 8, 9, 10],
      [0, 7, 3, 0, 10, 7, 0, 9, 10, 6, 7, 10],
      [10, 6, 7, 1, 10, 7, 1, 7, 8, 1, 8, 0],
      [10, 6, 7, 10, 7, 1, 1, 7, 3],
      [1, 2, 6, 1, 6, 8, 1, 8, 9, 8, 6, 7],
      [2, 6, 9, 2, 9, 1, 6, 7, 9, 0, 9, 3, 7, 3, 9],
      [7, 8, 0, 7, 0, 6, 6, 0, 2],
      [7, 3, 2, 6, 7, 2],
      [2, 3, 11, 10, 6, 8, 10, 8, 9, 8, 6, 7],
      [2, 0, 7, 2, 7, 11, 0, 9, 7, 6, 7, 10, 9, 10, 7],
      [1, 8, 0, 1, 7, 8, 1, 10, 7, 6, 7, 10, 2, 3, 11],
      [11, 2, 1, 11, 1, 7, 10, 6, 1, 6, 7, 1],
      [8, 9, 6, 8, 6, 7, 9, 1, 6, 11, 6, 3, 1, 3, 6],
      [0, 9, 1, 11, 6, 7],
      [7, 8, 0, 7, 0, 6, 3, 11, 0, 11, 6, 0],
      [7, 11, 6],
      [7, 6, 11],
      [3, 0, 8, 11, 7, 6],
      [0, 1, 9, 11, 7, 6],
      [8, 1, 9, 8, 3, 1, 11, 7, 6],
      [10, 1, 2, 6, 11, 7],
      [1, 2, 10, 3, 0, 8, 6, 11, 7],
      [2, 9, 0, 2, 10, 9, 6, 11, 7],
      [6, 11, 7, 2, 10, 3, 10, 8, 3, 10, 9, 8],
      [7, 2, 3, 6, 2, 7],
      [7, 0, 8, 7, 6, 0, 6, 2, 0],
      [2, 7, 6, 2, 3, 7, 0, 1, 9],
      [1, 6, 2, 1, 8, 6, 1, 9, 8, 8, 7, 6],
      [10, 7, 6, 10, 1, 7, 1, 3, 7],
      [10, 7, 6, 1, 7, 10, 1, 8, 7, 1, 0, 8],
      [0, 3, 7, 0, 7, 10, 0, 10, 9, 6, 10, 7],
      [7, 6, 10, 7, 10, 8, 8, 10, 9],
      [6, 8, 4, 11, 8, 6],
      [3, 6, 11, 3, 0, 6, 0, 4, 6],
      [8, 6, 11, 8, 4, 6, 9, 0, 1],
      [9, 4, 6, 9, 6, 3, 9, 3, 1, 11, 3, 6],
      [6, 8, 4, 6, 11, 8, 2, 10, 1],
      [1, 2, 10, 3, 0, 11, 0, 6, 11, 0, 4, 6],
      [4, 11, 8, 4, 6, 11, 0, 2, 9, 2, 10, 9],
      [10, 9, 3, 10, 3, 2, 9, 4, 3, 11, 3, 6, 4, 6, 3],
      [8, 2, 3, 8, 4, 2, 4, 6, 2],
      [0, 4, 2, 4, 6, 2],
      [1, 9, 0, 2, 3, 4, 2, 4, 6, 4, 3, 8],
      [1, 9, 4, 1, 4, 2, 2, 4, 6],
      [8, 1, 3, 8, 6, 1, 8, 4, 6, 6, 10, 1],
      [10, 1, 0, 10, 0, 6, 6, 0, 4],
      [4, 6, 3, 4, 3, 8, 6, 10, 3, 0, 3, 9, 10, 9, 3],
      [10, 9, 4, 6, 10, 4],
      [4, 9, 5, 7, 6, 11],
      [0, 8, 3, 4, 9, 5, 11, 7, 6],
      [5, 0, 1, 5, 4, 0, 7, 6, 11],
      [11, 7, 6, 8, 3, 4, 3, 5, 4, 3, 1, 5],
      [9, 5, 4, 10, 1, 2, 7, 6, 11],
      [6, 11, 7, 1, 2, 10, 0, 8, 3, 4, 9, 5],
      [7, 6, 11, 5, 4, 10, 4, 2, 10, 4, 0, 2],
      [3, 4, 8, 3, 5, 4, 3, 2, 5, 10, 5, 2, 11, 7, 6],
      [7, 2, 3, 7, 6, 2, 5, 4, 9],
      [9, 5, 4, 0, 8, 6, 0, 6, 2, 6, 8, 7],
      [3, 6, 2, 3, 7, 6, 1, 5, 0, 5, 4, 0],
      [6, 2, 8, 6, 8, 7, 2, 1, 8, 4, 8, 5, 1, 5, 8],
      [9, 5, 4, 10, 1, 6, 1, 7, 6, 1, 3, 7],
      [1, 6, 10, 1, 7, 6, 1, 0, 7, 8, 7, 0, 9, 5, 4],
      [4, 0, 10, 4, 10, 5, 0, 3, 10, 6, 10, 7, 3, 7, 10],
      [7, 6, 10, 7, 10, 8, 5, 4, 10, 4, 8, 10],
      [6, 9, 5, 6, 11, 9, 11, 8, 9],
      [3, 6, 11, 0, 6, 3, 0, 5, 6, 0, 9, 5],
      [0, 11, 8, 0, 5, 11, 0, 1, 5, 5, 6, 11],
      [6, 11, 3, 6, 3, 5, 5, 3, 1],
      [1, 2, 10, 9, 5, 11, 9, 11, 8, 11, 5, 6],
      [0, 11, 3, 0, 6, 11, 0, 9, 6, 5, 6, 9, 1, 2, 10],
      [11, 8, 5, 11, 5, 6, 8, 0, 5, 10, 5, 2, 0, 2, 5],
      [6, 11, 3, 6, 3, 5, 2, 10, 3, 10, 5, 3],
      [5, 8, 9, 5, 2, 8, 5, 6, 2, 3, 8, 2],
      [9, 5, 6, 9, 6, 0, 0, 6, 2],
      [1, 5, 8, 1, 8, 0, 5, 6, 8, 3, 8, 2, 6, 2, 8],
      [1, 5, 6, 2, 1, 6],
      [1, 3, 6, 1, 6, 10, 3, 8, 6, 5, 6, 9, 8, 9, 6],
      [10, 1, 0, 10, 0, 6, 9, 5, 0, 5, 6, 0],
      [0, 3, 8, 5, 6, 10],
      [10, 5, 6],
      [11, 5, 10, 7, 5, 11],
      [11, 5, 10, 11, 7, 5, 8, 3, 0],
      [5, 11, 7, 5, 10, 11, 1, 9, 0],
      [10, 7, 5, 10, 11, 7, 9, 8, 1, 8, 3, 1],
      [11, 1, 2, 11, 7, 1, 7, 5, 1],
      [0, 8, 3, 1, 2, 7, 1, 7, 5, 7, 2, 11],
      [9, 7, 5, 9, 2, 7, 9, 0, 2, 2, 11, 7],
      [7, 5, 2, 7, 2, 11, 5, 9, 2, 3, 2, 8, 9, 8, 2],
      [2, 5, 10, 2, 3, 5, 3, 7, 5],
      [8, 2, 0, 8, 5, 2, 8, 7, 5, 10, 2, 5],
      [9, 0, 1, 5, 10, 3, 5, 3, 7, 3, 10, 2],
      [9, 8, 2, 9, 2, 1, 8, 7, 2, 10, 2, 5, 7, 5, 2],
      [1, 3, 5, 3, 7, 5],
      [0, 8, 7, 0, 7, 1, 1, 7, 5],
      [9, 0, 3, 9, 3, 5, 5, 3, 7],
      [9, 8, 7, 5, 9, 7],
      [5, 8, 4, 5, 10, 8, 10, 11, 8],
      [5, 0, 4, 5, 11, 0, 5, 10, 11, 11, 3, 0],
      [0, 1, 9, 8, 4, 10, 8, 10, 11, 10, 4, 5],
      [10, 11, 4, 10, 4, 5, 11, 3, 4, 9, 4, 1, 3, 1, 4],
      [2, 5, 1, 2, 8, 5, 2, 11, 8, 4, 5, 8],
      [0, 4, 11, 0, 11, 3, 4, 5, 11, 2, 11, 1, 5, 1, 11],
      [0, 2, 5, 0, 5, 9, 2, 11, 5, 4, 5, 8, 11, 8, 5],
      [9, 4, 5, 2, 11, 3],
      [2, 5, 10, 3, 5, 2, 3, 4, 5, 3, 8, 4],
      [5, 10, 2, 5, 2, 4, 4, 2, 0],
      [3, 10, 2, 3, 5, 10, 3, 8, 5, 4, 5, 8, 0, 1, 9],
      [5, 10, 2, 5, 2, 4, 1, 9, 2, 9, 4, 2],
      [8, 4, 5, 8, 5, 3, 3, 5, 1],
      [0, 4, 5, 1, 0, 5],
      [8, 4, 5, 8, 5, 3, 9, 0, 5, 0, 3, 5],
      [9, 4, 5],
      [4, 11, 7, 4, 9, 11, 9, 10, 11],
      [0, 8, 3, 4, 9, 7, 9, 11, 7, 9, 10, 11],
      [1, 10, 11, 1, 11, 4, 1, 4, 0, 7, 4, 11],
      [3, 1, 4, 3, 4, 8, 1, 10, 4, 7, 4, 11, 10, 11, 4],
      [4, 11, 7, 9, 11, 4, 9, 2, 11, 9, 1, 2],
      [9, 7, 4, 9, 11, 7, 9, 1, 11, 2, 11, 1, 0, 8, 3],
      [11, 7, 4, 11, 4, 2, 2, 4, 0],
      [11, 7, 4, 11, 4, 2, 8, 3, 4, 3, 2, 4],
      [2, 9, 10, 2, 7, 9, 2, 3, 7, 7, 4, 9],
      [9, 10, 7, 9, 7, 4, 10, 2, 7, 8, 7, 0, 2, 0, 7],
      [3, 7, 10, 3, 10, 2, 7, 4, 10, 1, 10, 0, 4, 0, 10],
      [1, 10, 2, 8, 7, 4],
      [4, 9, 1, 4, 1, 7, 7, 1, 3],
      [4, 9, 1, 4, 1, 7, 0, 8, 1, 8, 7, 1],
      [4, 0, 3, 7, 4, 3],
      [4, 8, 7],
      [9, 10, 8, 10, 11, 8],
      [3, 0, 9, 3, 9, 11, 11, 9, 10],
      [0, 1, 10, 0, 10, 8, 8, 10, 11],
      [3, 1, 10, 11, 3, 10],
      [1, 2, 11, 1, 11, 9, 9, 11, 8],
      [3, 0, 9, 3, 9, 11, 1, 2, 9, 2, 11, 9],
      [0, 2, 11, 8, 0, 11],
      [3, 2, 11],
      [2, 3, 8, 2, 8, 10, 10, 8, 9],
      [9, 10, 2, 0, 9, 2],
      [2, 3, 8, 2, 8, 10, 0, 1, 8, 1, 10, 8],
      [1, 10, 2],
      [1, 3, 8, 9, 1, 8],
      [0, 9, 1],
      [0, 3, 8],
      []
     ]
    }(t = e.MarchingCubes || (e.MarchingCubes = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r(t, n) {
      return e.Computation.resolve({
       surface: n,
       usedParameters: t.parameters
      })
     }

     function i(t) {
      return e.Computation.create(function(e) {
       var n = new s(t, e);
       n.start()
      })
     }

     function o(e) {
      return i(e).bind(function(e) {
       return t.MarchingCubes.compute(e.data).bind(function(n) {
        return t.Surface.transform(n, e.transform)
       }).bind(function(n) {
        return t.Surface.laplacianSmooth(n, e.inputParameters.parameters && e.inputParameters.parameters.smoothingIterations || 1).bind(function(t) {
         return r(e, t)
        })
       })
      })
     }
     var a = function() {
       function t(t) {
        e.Utils.extend(this, t, {
         exactBoundary: !1,
         boundaryDelta: {
          dx: 1.5,
          dy: 1.5,
          dz: 1.5
         },
         probeRadius: 1.4,
         atomRadii: function() {
          return 1
         },
         density: 1.1,
         interactive: !1,
         smoothingIterations: 1
        }), this.exactBoundary && (this.boundaryDelta = {
         dx: 0,
         dy: 0,
         dz: 0
        }), this.density < .3 && (this.density = .3)
       }
       return t
      }(),
      s = function() {
       function n(e, t) {
        var n = this;
        this.inputParameters = e, this.ctx = t, this.minX = Number.MAX_VALUE, this.minY = Number.MAX_VALUE, this.minZ = Number.MAX_VALUE, this.maxX = -Number.MAX_VALUE, this.maxY = -Number.MAX_VALUE, this.maxZ = -Number.MAX_VALUE, this.nX = 0, this.nY = 0, this.nZ = 0, this.dX = .1, this.dY = .1, this.dZ = .1, this.field = new Float32Array(0), this.maxField = new Float32Array(0), this.proximityMap = new Int32Array(0), this.minIndex = {
         i: 0,
         j: 0,
         k: 0
        }, this.maxIndex = {
         i: 0,
         j: 0,
         k: 0
        }, this.currentAtom = 0, this.chunkSize = 1e4, this._addChunk = function() {
         try {
          n.addChunk()
         } catch (e) {
          n.ctx.reject(e)
         }
        }, this.parameters = new a(e.parameters);
        var r = e.positions;
        this.x = r.x, this.y = r.y, this.z = r.z, this.atomIndices = e.atomIndices
       }
       return n.prototype.findBounds = function() {
        for (var e = 0, t = this.atomIndices; e < t.length; e++) {
         var n = t[e],
          r = this.parameters.exactBoundary ? 0 : this.parameters.atomRadius(n) + this.parameters.probeRadius,
          i = this.x[n],
          o = this.y[n],
          a = this.z[n];
         0 > r || (this.minX = Math.min(this.minX, i - r), this.minY = Math.min(this.minY, o - r), this.minZ = Math.min(this.minZ, a - r), this.maxX = Math.max(this.maxX, i + r), this.maxY = Math.max(this.maxY, o + r), this.maxZ = Math.max(this.maxZ, a + r))
        }
        this.minX === Number.MAX_VALUE && (this.minX = this.minY = this.minZ = -1, this.maxX = this.maxY = this.maxZ = 1), this.minX -= this.parameters.boundaryDelta.dx, this.minY -= this.parameters.boundaryDelta.dy, this.minZ -= this.parameters.boundaryDelta.dz, this.maxX += this.parameters.boundaryDelta.dx, this.maxY += this.parameters.boundaryDelta.dy, this.maxZ += this.parameters.boundaryDelta.dz, this.nX = Math.floor((this.maxX - this.minX) * this.parameters.density), this.nY = Math.floor((this.maxY - this.minY) * this.parameters.density), this.nZ = Math.floor((this.maxZ - this.minZ) * this.parameters.density), this.nX = Math.min(this.nX, 333), this.nY = Math.min(this.nY, 333), this.nZ = Math.min(this.nZ, 333), this.dX = (this.maxX - this.minX) / (this.nX - 1), this.dY = (this.maxY - this.minY) / (this.nY - 1), this.dZ = (this.maxZ - this.minZ) / (this.nZ - 1)
       }, n.prototype.initData = function() {
        var e = this.nX * this.nY * this.nZ;
        this.field = new Float32Array(e), this.maxField = new Float32Array(e), this.proximityMap = new Int32Array(e);
        for (var t = -Number.MAX_VALUE, n = 0, r = this.proximityMap.length; r > n; n++) this.maxField[n] = t, this.proximityMap[n] = -1
       }, n.prototype.updateMinIndex = function(e, t, n) {
        this.minIndex.i = Math.max(0 | Math.floor((e - this.minX) / this.dX), 0), this.minIndex.j = Math.max(0 | Math.floor((t - this.minY) / this.dY), 0), this.minIndex.k = Math.max(0 | Math.floor((n - this.minZ) / this.dZ), 0)
       }, n.prototype.updateMaxIndex = function(e, t, n) {
        this.maxIndex.i = Math.min(0 | Math.ceil((e - this.minX) / this.dX), this.nX), this.maxIndex.j = Math.min(0 | Math.ceil((t - this.minY) / this.dY), this.nY), this.maxIndex.k = Math.min(0 | Math.ceil((n - this.minZ) / this.dZ), this.nZ)
       }, n.prototype.addBall = function(e, t) {
        var n = t * t,
         r = this.x[e],
         i = this.y[e],
         o = this.z[e];
        this.updateMinIndex(r - t, i - t, o - t), this.updateMaxIndex(r + t, i + t, o + t);
        var a = this.minIndex.i,
         s = this.minIndex.j,
         u = this.minIndex.k,
         l = this.maxIndex.i,
         c = this.maxIndex.j,
         h = this.maxIndex.k;
        r = this.minX - r, i = this.minY - i, o = this.minZ - o;
        for (var p = u; h > p; p++)
         for (var d = o + p * this.dZ, f = d * d, m = p * this.nY, g = s; c > g; g++)
          for (var v = i + g * this.dY, y = f + v * v, b = this.nX * (m + g), w = a; l > w; w++) {
           var x = r + w * this.dX,
            _ = y + x * x,
            S = b + w,
            C = n / (1e-6 + _) - 1;
           C > this.maxField[S] && (this.proximityMap[S] = e, this.maxField[S] = C), C > 0 && (this.field[S] += C)
          }
       }, n.prototype.addChunk = function() {
        for (var e = this.atomIndices.length, t = 0; this.currentAtom < e; this.currentAtom++) {
         var n = this.atomIndices[this.currentAtom],
          r = this.parameters.atomRadius(n) + this.parameters.probeRadius;
         if (t++, !(0 > r) && (this.addBall(n, r), t >= this.chunkSize)) return this.ctx.abortRequested ? (this.ctx.abort(), void 0) : (this.ctx.update("Creating field...", this.ctx.abortRequest, this.currentAtom, this.atomIndices.length), this.ctx.schedule(this._addChunk), void 0)
        }
        this.ctx.update("Creating field...", void 0, this.currentAtom, this.atomIndices.length), this.finish()
       }, n.prototype.finish = function() {
        this.maxField = null;
        var n = t.LinearAlgebra.Matrix4.empty();
        t.LinearAlgebra.Matrix4.fromTranslation(n, [this.minX, this.minY, this.minZ]), n[0] = this.dX, n[5] = this.dY, n[10] = this.dZ;
        var r = {
         data: {
          scalarField: new e.Formats.Density.Field3DZYX(this.field, [this.nX, this.nY, this.nZ]),
          annotationField: this.parameters.interactive ? new e.Formats.Density.Field3DZYX(this.proximityMap, [this.nX, this.nY, this.nZ]) : void 0,
          isoLevel: .05
         },
         bottomLeft: {
          x: this.minX,
          y: this.minY,
          z: this.minZ
         },
         topRight: {
          x: this.maxX,
          y: this.maxY,
          z: this.maxZ
         },
         transform: n,
         inputParameters: this.inputParameters,
         parameters: this.parameters
        };
        this.ctx.resolve(r)
       }, n.prototype.start = function() {
        var e = this;
        this.ctx.update("Initializing..."), this.ctx.schedule(function() {
         try {
          e.findBounds(), e.initData()
         } catch (t) {
          return e.ctx.reject(t), void 0
         }
         return e.ctx.abortRequested ? (e.ctx.abort(), void 0) : (e.ctx.update("Creating field...", e.ctx.abortRequest, 0, e.atomIndices.length), e.ctx.schedule(e._addChunk), void 0)
        })
       }, n
      }();
     n.createMolecularIsoFieldAsync = i, n.computeMolecularSurfaceAsync = o
    }(n = t.MolecularSurface || (t.MolecularSurface = {}))
   }(t = e.Geometry || (e.Geometry = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function e(e, t) {
      this.name = e, this.creator = t
     }
     return e
    }();
    t.DataTableColumnDescriptor = n;
    var r = function() {
     function t(t, n, r) {
      this.count = t, this.indices = new Int32Array(t), this.columns = [];
      for (var i = 0; t > i; i++) this.indices[i] = i;
      for (var o = 0, a = n; o < a.length; o++) {
       var s = a[o],
        u = r[s.name];
       e.Utils.ChunkedArray.is(u) && (u = e.Utils.ChunkedArray.compact(u)), Object.defineProperty(this, s.name, {
        enumerable: !0,
        configurable: !1,
        writable: !1,
        value: u
       }), this.columns[this.columns.length] = s
      }
     }
     return t.prototype.getBuilder = function(e) {
      for (var t = new i(e), n = 0, r = this.columns; n < r.length; n++) {
       var o = r[n];
       t.addColumn(o.name, o.creator)
      }
      return t
     }, t.prototype.getRawData = function() {
      var e = this;
      return this.columns.map(function(t) {
       return e[t.name]
      })
     }, t
    }();
    t.DataTable = r;
    var i = function() {
     function e(e) {
      this.columns = [], this.count = e
     }
     return e.prototype.addColumn = function(e, t) {
      var r = t(this.count);
      return Object.defineProperty(this, e, {
       enumerable: !0,
       configurable: !1,
       writable: !1,
       value: r
      }), this.columns[this.columns.length] = new n(e, t), r
     }, e.prototype.getRawData = function() {
      var e = this;
      return this.columns.map(function(t) {
       return e[t.name]
      })
     }, e.prototype.seal = function() {
      return new r(this.count, this.columns, this)
     }, e
    }();
    t.DataTableBuilder = i;
    var o;
    ! function(e) {
     e[e.Polymer = 0] = "Polymer", e[e.NonPolymer = 1] = "NonPolymer", e[e.Water = 2] = "Water", e[e.Unknown = 3] = "Unknown"
    }(o = t.EntityType || (t.EntityType = {}));
    var a = function() {
     function e(e) {
      this.id = e, this.map = new Map
     }
     return e.prototype.add = function(e, t, n, r) {
      void 0 === r && (r = !0);
      var i = this.map.get(e);
      if (void 0 !== i) {
       var o = i.get(t);
       void 0 === o && i.set(t, n)
      } else {
       var a = new Map;
       a.set(t, n), this.map.set(e, a)
      }
      r && this.add(t, e, n, !1)
     }, e
    }();
    t.ComponentBondInfoEntry = a;
    var s = function() {
     function e() {
      this.entries = new Map
     }
     return e.prototype.newEntry = function(e) {
      var t = new a(e);
      return this.entries.set(e, t), t
     }, e
    }();
    t.ComponentBondInfo = s;
    var u = function() {
     function e(e, t, n) {
      this.asymId = e, this.seqNumber = t, this.insCode = n
     }
     return e.areEqual = function(e, t, n, r, i) {
      return e.asymId === n[t] && e.seqNumber === r[t] && e.insCode === i[t]
     }, e.compare = function(e, t) {
      return e.asymId === t.asymId ? e.seqNumber === t.seqNumber ? e.insCode === t.insCode ? 0 : void 0 === e.insCode ? -1 : void 0 === t.insCode ? 1 : e.insCode < t.insCode ? -1 : 1 : e.seqNumber < t.seqNumber ? -1 : 1 : e.asymId < t.asymId ? -1 : 1
     }, e.compareResidue = function(e, t, n, r, i) {
      return e.asymId === n[t] ? e.seqNumber === r[t] ? e.insCode === i[t] ? 0 : void 0 === e.insCode ? -1 : void 0 === i[t] ? 1 : e.insCode < i[t] ? -1 : 1 : e.seqNumber < r[t] ? -1 : 1 : e.asymId < n[t] ? -1 : 1
     }, e
    }();
    t.PolyResidueIdentifier = u;
    var l = function() {
     function e(e, t, n, r) {
      void 0 === r && (r = {}), this.type = e, this.startResidueId = t, this.endResidueId = n, this.info = r, this.startResidueIndex = -1, this.endResidueIndex = -1
     }
     return Object.defineProperty(e.prototype, "length", {
      get: function() {
       return this.endResidueIndex - this.startResidueIndex
      },
      enumerable: !0,
      configurable: !0
     }), e
    }();
    t.SecondaryStructureElement = l;
    var c = function() {
     function e(e, t, n, r, i) {
      this.spacegroupName = e, this.cellSize = t, this.cellAngles = n, this.toFracTransform = r, this.isNonStandardCrytalFrame = i
     }
     return e
    }();
    t.SymmetryInfo = c;
    var h = function() {
     function e(e, t, n) {
      this.id = e, this.name = t, this.operator = n
     }
     return e
    }();
    t.AssemblyOperator = h;
    var p = function() {
     function e(e, t) {
      this.operators = e, this.asymIds = t
     }
     return e
    }();
    t.AssemblyGenEntry = p;
    var d = function() {
     function e(e) {
      this.name = e, this.gens = []
     }
     return e
    }();
    t.AssemblyGen = d;
    var f = function() {
     function e(e, t) {
      this.operators = e, this.assemblies = t
     }
     return e
    }();
    t.AssemblyInfo = f;
    var m;
    ! function(e) {
     function t(e) {
      var t = new i(e),
       n = {
        id: t.addColumn("id", function(e) {
         return new Int32Array(e)
        }),
        x: t.addColumn("x", function(e) {
         return new Float32Array(e)
        }),
        y: t.addColumn("y", function(e) {
         return new Float32Array(e)
        }),
        z: t.addColumn("z", function(e) {
         return new Float32Array(e)
        }),
        altLoc: t.addColumn("altLoc", function() {
         return []
        }),
        rowIndex: t.addColumn("rowIndex", function(e) {
         return new Int32Array(e)
        }),
        residueIndex: t.addColumn("residueIndex", function(e) {
         return new Int32Array(e)
        }),
        chainIndex: t.addColumn("chainIndex", function(e) {
         return new Int32Array(e)
        }),
        entityIndex: t.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        }),
        name: t.addColumn("name", function() {
         return []
        }),
        elementSymbol: t.addColumn("elementSymbol", function() {
         return []
        }),
        occupancy: t.addColumn("occupancy", function(e) {
         return new Float32Array(e)
        }),
        tempFactor: t.addColumn("tempFactor", function(e) {
         return new Float32Array(e)
        }),
        authName: t.addColumn("authName", function() {
         return []
        })
       };
      return {
       table: t.seal(),
       columns: n
      }
     }

     function n(e) {
      var t = new i(e),
       n = {
        name: t.addColumn("name", function() {
         return []
        }),
        seqNumber: t.addColumn("seqNumber", function(e) {
         return new Int32Array(e)
        }),
        asymId: t.addColumn("asymId", function() {
         return []
        }),
        authName: t.addColumn("authName", function() {
         return []
        }),
        authSeqNumber: t.addColumn("authSeqNumber", function(e) {
         return new Int32Array(e)
        }),
        authAsymId: t.addColumn("authAsymId", function() {
         return []
        }),
        insCode: t.addColumn("insCode", function() {
         return []
        }),
        entityId: t.addColumn("entityId", function() {
         return []
        }),
        isHet: t.addColumn("isHet", function(e) {
         return new Int8Array(e)
        }),
        atomStartIndex: t.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        atomEndIndex: t.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        chainIndex: t.addColumn("chainIndex", function(e) {
         return new Int32Array(e)
        }),
        entityIndex: t.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        }),
        secondaryStructureIndex: t.addColumn("secondaryStructureIndex", function(e) {
         return new Int32Array(e)
        })
       };
      return {
       table: t.seal(),
       columns: n
      }
     }

     function r(e) {
      var t = new i(e),
       n = {
        asymId: t.addColumn("asymId", function() {
         return []
        }),
        entityId: t.addColumn("entityId", function() {
         return []
        }),
        authAsymId: t.addColumn("authAsymId", function() {
         return []
        }),
        atomStartIndex: t.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        atomEndIndex: t.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        residueStartIndex: t.addColumn("residueStartIndex", function(e) {
         return new Int32Array(e)
        }),
        residueEndIndex: t.addColumn("residueEndIndex", function(e) {
         return new Int32Array(e)
        }),
        entityIndex: t.addColumn("entityIndex", function(e) {
         return new Int32Array(e)
        })
       };
      return {
       table: t.seal(),
       columns: n
      }
     }

     function o(e) {
      var t = new i(e),
       n = {
        entityId: t.addColumn("entityId", function() {
         return []
        }),
        entityType: t.addColumn("entityType", function() {
         return []
        }),
        type: t.addColumn("type", function() {
         return []
        }),
        atomStartIndex: t.addColumn("atomStartIndex", function(e) {
         return new Int32Array(e)
        }),
        atomEndIndex: t.addColumn("atomEndIndex", function(e) {
         return new Int32Array(e)
        }),
        residueStartIndex: t.addColumn("residueStartIndex", function(e) {
         return new Int32Array(e)
        }),
        residueEndIndex: t.addColumn("residueEndIndex", function(e) {
         return new Int32Array(e)
        }),
        chainStartIndex: t.addColumn("chainStartIndex", function(e) {
         return new Int32Array(e)
        }),
        chainEndIndex: t.addColumn("chainEndIndex", function(e) {
         return new Int32Array(e)
        })
       };
      return {
       table: t.seal(),
       columns: n
      }
     }

     function a(e) {
      var t = new i(e),
       n = {
        atomAIndex: t.addColumn("atomAIndex", function(e) {
         return new Int32Array(e)
        }),
        atomBIndex: t.addColumn("atomBIndex", function(e) {
         return new Int32Array(e)
        }),
        type: t.addColumn("type", function(e) {
         return new Int8Array(e)
        })
       };
      return {
       table: t.seal(),
       columns: n
      }
     }
     e.forAtoms = t, e.forResidues = n, e.forChains = r, e.forEntities = o, e.forBonds = a
    }(m = t.DefaultDataTables || (t.DefaultDataTables = {}));
    var g;
    ! function(e) {
     e[e.File = 0] = "File", e[e.Computed = 1] = "Computed"
    }(g = t.MoleculeModelSource || (t.MoleculeModelSource = {}));
    var v = function() {
     function t(e, t, n) {
      this.matrix = e, this.id = t, this.isIdentity = n
     }
     return t.prototype.apply = function(t) {
      e.Geometry.LinearAlgebra.Matrix4.transformVector3(t, t, this.matrix)
     }, t.applyToModelUnsafe = function(t, n) {
      for (var r = {
        x: .1,
        y: .1,
        z: .1
       }, i = n.atoms, o = i.x, a = i.y, s = i.z, u = 0, l = n.atoms.count; l > u; u++) r.x = o[u], r.y = a[u], r.z = s[u], e.Geometry.LinearAlgebra.Matrix4.transformVector3(r, r, t), o[u] = r.x, a[u] = r.y, s[u] = r.z
     }, t
    }();
    t.Operator = v;
    var y = function() {
     function e(e) {
      this._queryContext = void 0, this.id = e.id, this.modelId = e.modelId, this.atoms = e.atoms, this.residues = e.residues, this.chains = e.chains, this.entities = e.entities, this.covalentBonds = e.covalentBonds, this.nonCovalentbonds = e.nonCovalentbonds, this.componentBonds = e.componentBonds, this.secondaryStructure = e.secondaryStructure, this.symmetryInfo = e.symmetryInfo, this.assemblyInfo = e.assemblyInfo, this.parent = e.parent, this.source = e.source, this.operators = e.operators
     }
     return Object.defineProperty(e.prototype, "queryContext", {
      get: function() {
       return this._queryContext ? this._queryContext : (this._queryContext = t.Query.Context.ofStructure(this), this._queryContext)
      },
      enumerable: !0,
      configurable: !0
     }), e.prototype.query = function(e) {
      return t.Query.Builder.toQuery(e)(this.queryContext)
     }, e
    }();
    t.MoleculeModel = y;
    var b = function() {
     function e(e, t, n) {
      void 0 === n && (n = {}), this.id = e, this.models = t, this.properties = n
     }
     return e
    }();
    t.Molecule = b,
     function(e) {
      function t(e) {
       for (var t = {}, n = e.atoms, i = 0, o = n.columns; i < o.length; i++) {
        var a = o[i];
        t[a.name] = "x" === a.name || "y" === a.name || "z" === a.name ? a.creator(n.count) : n[a.name]
       }
       return new r(n.count, n.columns, t)
      }

      function n(n, r, i) {
       for (var o = n.atoms, a = o.x, s = o.y, u = o.z, l = t(n), c = l.x, h = l.y, p = l.z, d = {
         x: 0,
         y: 0,
         z: 0
        }, f = 0, m = n.atoms.count; m > f; f++) i(r, a[f], s[f], u[f], d), c[f] = d.x, h[f] = d.y, p[f] = d.z;
       return new e({
        id: n.id,
        modelId: n.modelId,
        atoms: l,
        residues: n.residues,
        chains: n.chains,
        entities: n.entities,
        covalentBonds: n.covalentBonds,
        nonCovalentbonds: n.nonCovalentbonds,
        componentBonds: n.componentBonds,
        secondaryStructure: n.secondaryStructure,
        symmetryInfo: n.symmetryInfo,
        assemblyInfo: n.assemblyInfo,
        parent: n.parent,
        source: n.source,
        operators: n.operators
       })
      }
      e.withTransformedXYZ = n
     }(y = t.MoleculeModel || (t.MoleculeModel = {}))
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = e.Geometry.LinearAlgebra.Matrix4,
     r = e.Geometry.LinearAlgebra.Vector4,
     i = function() {
      function e(e) {
       if (this.info = e, this.temp = n.empty(), this.tempV = new Float64Array(4), void 0 === o.Spacegroup[e.spacegroupName]) throw "'" + e.spacegroupName + "' is not a spacegroup recognized by the library.";
       this.space = this.getSpace(), this.operators = this.getOperators()
      }
      return Object.defineProperty(e.prototype, "operatorCount", {
       get: function() {
        return this.operators.length
       },
       enumerable: !0,
       configurable: !0
      }), e.prototype.getOperatorMatrix = function(e, t, r, i, o) {
       return this.tempV[0] = t, this.tempV[1] = r, this.tempV[2] = i, n.fromTranslation(this.temp, this.tempV), n.mul(o, n.mul(o, n.mul(o, this.space.fromFrac, this.temp), this.operators[e]), this.space.toFrac), o
      }, e.prototype.getSpace = function() {
       var e = this.info.toFracTransform,
        t = n.empty();
       return n.invert(t, e), {
        toFrac: e,
        fromFrac: t,
        baseX: r.transform(r.create(), r.fromValues(1, 0, 0, 1), e),
        baseY: r.transform(r.create(), r.fromValues(0, 1, 0, 1), e),
        baseZ: r.transform(r.create(), r.fromValues(0, 0, 1, 1), e)
       }
      }, e.getOperator = function(e) {
       var t = o.Transform[e[0]],
        r = o.Transform[e[1]],
        i = o.Transform[e[2]];
       return n.ofRows([t, r, i, [0, 0, 0, 1]])
      }, e.prototype.getOperators = function() {
       var t = o.Group[o.Spacegroup[this.info.spacegroupName]];
       return t.map(function(t) {
        return e.getOperator(o.Operator[t])
       })
      }, e
     }();
    t.Spacegroup = i;
    var o;
    ! function(e) {
     e.Transform = [
      [1, 0, 0, 0],
      [0, 1, 0, 0],
      [0, 0, 1, 0],
      [-1, 0, 0, 0],
      [0, -1, 0, 0],
      [0, 0, -1, 0],
      [0, 1, 0, .5],
      [1, 0, 0, .5],
      [-1, 0, 0, .5],
      [0, 0, 1, .5],
      [0, -1, 0, .5],
      [0, 0, -1, .5],
      [1, 0, 0, .25],
      [0, -1, 0, .25],
      [0, 0, 1, .25],
      [-1, 0, 0, .25],
      [0, 1, 0, .25],
      [0, -1, 0, .75],
      [0, 0, 1, .75],
      [0, 1, 0, .75],
      [1, 0, 0, .75],
      [-1, 0, 0, .75],
      [0, 0, -1, .25],
      [0, 0, -1, .75],
      [1, -1, 0, 0],
      [-1, 1, 0, 0],
      [0, 0, 1, .333333333333333],
      [0, 0, 1, .666666666666667],
      [1, 0, 0, .666666666666667],
      [0, 1, 0, .333333333333333],
      [0, -1, 0, .666666666666667],
      [1, -1, 0, .333333333333333],
      [-1, 1, 0, .666666666666667],
      [-1, 0, 0, .333333333333333],
      [1, 0, 0, .333333333333333],
      [0, 1, 0, .666666666666667],
      [0, -1, 0, .333333333333333],
      [1, -1, 0, .666666666666667],
      [-1, 1, 0, .333333333333333],
      [-1, 0, 0, .666666666666667],
      [0, 0, -1, .333333333333333],
      [0, 0, -1, .666666666666667],
      [0, 0, 1, .833333333333333],
      [0, 0, 1, .166666666666667],
      [0, 0, -1, .833333333333333],
      [0, 0, -1, .166666666666667]
     ], e.Operator = [
      [0, 1, 2],
      [3, 4, 5],
      [3, 1, 5],
      [3, 6, 5],
      [7, 6, 2],
      [8, 6, 5],
      [0, 4, 2],
      [0, 4, 9],
      [7, 10, 2],
      [7, 10, 9],
      [0, 10, 2],
      [8, 10, 5],
      [3, 1, 11],
      [3, 6, 11],
      [0, 10, 9],
      [8, 6, 11],
      [3, 4, 2],
      [0, 4, 5],
      [3, 4, 9],
      [7, 10, 5],
      [8, 4, 9],
      [8, 10, 9],
      [8, 10, 2],
      [0, 6, 9],
      [3, 10, 9],
      [0, 10, 11],
      [7, 1, 9],
      [8, 1, 11],
      [7, 4, 11],
      [7, 6, 9],
      [7, 10, 11],
      [3, 10, 2],
      [8, 1, 5],
      [0, 4, 11],
      [3, 1, 2],
      [3, 1, 9],
      [7, 4, 2],
      [8, 1, 2],
      [8, 1, 9],
      [3, 6, 9],
      [7, 4, 9],
      [8, 6, 2],
      [8, 6, 9],
      [3, 6, 2],
      [12, 13, 14],
      [15, 16, 14],
      [12, 17, 18],
      [15, 19, 18],
      [20, 13, 18],
      [21, 16, 18],
      [20, 17, 14],
      [21, 19, 14],
      [0, 1, 5],
      [8, 10, 11],
      [7, 6, 11],
      [7, 6, 5],
      [8, 4, 2],
      [7, 4, 5],
      [7, 1, 5],
      [7, 1, 11],
      [0, 10, 5],
      [0, 1, 11],
      [0, 6, 11],
      [0, 6, 5],
      [3, 10, 11],
      [8, 4, 11],
      [15, 13, 22],
      [12, 16, 22],
      [15, 17, 23],
      [12, 19, 23],
      [21, 13, 23],
      [20, 16, 23],
      [21, 17, 22],
      [20, 19, 22],
      [4, 0, 2],
      [1, 3, 2],
      [4, 0, 14],
      [1, 3, 18],
      [4, 0, 9],
      [1, 3, 9],
      [4, 0, 18],
      [1, 3, 14],
      [10, 7, 9],
      [6, 8, 9],
      [4, 7, 14],
      [6, 3, 18],
      [10, 0, 18],
      [1, 8, 14],
      [1, 3, 5],
      [4, 0, 5],
      [6, 8, 11],
      [10, 7, 11],
      [1, 3, 11],
      [4, 0, 11],
      [10, 7, 2],
      [6, 8, 2],
      [3, 10, 22],
      [7, 1, 23],
      [8, 4, 23],
      [0, 6, 22],
      [1, 0, 5],
      [4, 3, 5],
      [1, 0, 23],
      [4, 3, 22],
      [10, 7, 14],
      [6, 8, 18],
      [8, 6, 22],
      [7, 10, 23],
      [4, 3, 11],
      [1, 0, 11],
      [1, 0, 22],
      [4, 3, 23],
      [10, 7, 18],
      [6, 8, 14],
      [8, 6, 23],
      [7, 10, 22],
      [6, 7, 11],
      [10, 8, 11],
      [8, 1, 23],
      [0, 10, 22],
      [3, 6, 22],
      [7, 4, 23],
      [4, 3, 2],
      [1, 0, 2],
      [10, 8, 2],
      [6, 7, 2],
      [4, 3, 9],
      [1, 0, 9],
      [10, 8, 9],
      [6, 7, 9],
      [4, 8, 14],
      [6, 0, 18],
      [10, 3, 18],
      [1, 7, 14],
      [4, 8, 18],
      [6, 0, 14],
      [10, 3, 14],
      [1, 7, 18],
      [6, 7, 5],
      [10, 8, 5],
      [6, 8, 5],
      [10, 7, 5],
      [8, 1, 22],
      [0, 10, 23],
      [3, 6, 23],
      [7, 4, 22],
      [4, 24, 2],
      [25, 3, 2],
      [4, 24, 26],
      [25, 3, 27],
      [4, 24, 27],
      [25, 3, 26],
      [28, 29, 26],
      [30, 31, 26],
      [32, 33, 26],
      [34, 35, 27],
      [36, 37, 27],
      [38, 39, 27],
      [2, 0, 1],
      [1, 2, 0],
      [1, 25, 5],
      [24, 0, 5],
      [39, 36, 40],
      [35, 38, 40],
      [37, 34, 40],
      [33, 30, 41],
      [29, 32, 41],
      [31, 28, 41],
      [5, 3, 4],
      [4, 5, 3],
      [25, 1, 5],
      [0, 24, 5],
      [24, 4, 5],
      [3, 25, 5],
      [4, 3, 41],
      [25, 1, 40],
      [24, 4, 41],
      [3, 25, 40],
      [4, 3, 40],
      [25, 1, 41],
      [24, 4, 40],
      [3, 25, 41],
      [35, 34, 40],
      [37, 36, 40],
      [39, 38, 40],
      [29, 28, 41],
      [31, 30, 41],
      [33, 32, 41],
      [3, 5, 4],
      [5, 4, 3],
      [25, 1, 2],
      [0, 24, 2],
      [24, 4, 2],
      [3, 25, 2],
      [25, 1, 9],
      [0, 24, 9],
      [24, 4, 9],
      [3, 25, 9],
      [30, 33, 26],
      [32, 29, 26],
      [28, 31, 26],
      [36, 39, 27],
      [38, 35, 27],
      [34, 37, 27],
      [0, 2, 1],
      [2, 1, 0],
      [30, 33, 42],
      [32, 29, 42],
      [28, 31, 42],
      [36, 39, 43],
      [38, 35, 43],
      [34, 37, 43],
      [7, 9, 6],
      [9, 6, 7],
      [25, 1, 11],
      [0, 24, 11],
      [24, 4, 11],
      [3, 25, 11],
      [35, 34, 44],
      [37, 36, 44],
      [39, 38, 44],
      [29, 28, 45],
      [31, 30, 45],
      [33, 32, 45],
      [8, 11, 10],
      [11, 10, 8],
      [1, 25, 2],
      [24, 0, 2],
      [1, 25, 42],
      [24, 0, 43],
      [1, 25, 43],
      [24, 0, 42],
      [1, 25, 27],
      [24, 0, 26],
      [1, 25, 26],
      [24, 0, 27],
      [1, 25, 9],
      [24, 0, 9],
      [4, 24, 5],
      [25, 3, 5],
      [4, 24, 11],
      [25, 3, 11],
      [1, 0, 40],
      [4, 3, 44],
      [0, 24, 45],
      [1, 0, 41],
      [4, 3, 45],
      [0, 24, 44],
      [0, 24, 40],
      [0, 24, 41],
      [2, 3, 4],
      [5, 3, 1],
      [5, 0, 4],
      [4, 2, 3],
      [1, 5, 3],
      [4, 5, 0],
      [2, 7, 6],
      [2, 8, 10],
      [5, 8, 6],
      [5, 7, 10],
      [1, 9, 7],
      [4, 9, 8],
      [1, 11, 8],
      [4, 11, 7],
      [9, 0, 6],
      [9, 3, 10],
      [11, 3, 6],
      [11, 0, 10],
      [6, 2, 7],
      [10, 2, 8],
      [6, 5, 8],
      [10, 5, 7],
      [9, 7, 1],
      [9, 8, 4],
      [11, 8, 1],
      [11, 7, 4],
      [6, 9, 0],
      [10, 9, 3],
      [6, 11, 3],
      [10, 11, 0],
      [9, 7, 6],
      [9, 8, 10],
      [11, 8, 6],
      [11, 7, 10],
      [6, 9, 7],
      [10, 9, 8],
      [6, 11, 8],
      [10, 11, 7],
      [2, 3, 10],
      [5, 8, 1],
      [11, 0, 4],
      [10, 2, 3],
      [1, 5, 8],
      [4, 11, 0],
      [5, 0, 1],
      [2, 0, 4],
      [2, 3, 1],
      [1, 5, 0],
      [4, 2, 0],
      [1, 2, 3],
      [11, 8, 10],
      [11, 7, 6],
      [9, 7, 10],
      [9, 8, 6],
      [10, 11, 8],
      [6, 11, 7],
      [10, 9, 7],
      [6, 9, 8],
      [5, 8, 10],
      [5, 7, 6],
      [2, 7, 10],
      [2, 8, 6],
      [4, 11, 8],
      [1, 11, 7],
      [4, 9, 7],
      [1, 9, 8],
      [11, 3, 10],
      [11, 0, 6],
      [9, 0, 10],
      [9, 3, 6],
      [10, 5, 8],
      [6, 5, 7],
      [10, 2, 7],
      [6, 2, 8],
      [11, 8, 4],
      [11, 7, 1],
      [9, 7, 4],
      [9, 8, 1],
      [10, 11, 3],
      [6, 11, 0],
      [10, 9, 0],
      [6, 9, 3],
      [22, 15, 13],
      [22, 12, 16],
      [14, 12, 13],
      [14, 15, 16],
      [13, 22, 15],
      [16, 22, 12],
      [13, 14, 12],
      [16, 14, 15],
      [22, 21, 17],
      [22, 20, 19],
      [14, 20, 17],
      [14, 21, 19],
      [13, 23, 21],
      [16, 23, 20],
      [13, 18, 20],
      [16, 18, 21],
      [23, 15, 17],
      [23, 12, 19],
      [18, 12, 17],
      [18, 15, 19],
      [17, 22, 21],
      [19, 22, 20],
      [17, 14, 20],
      [19, 14, 21],
      [23, 21, 13],
      [23, 20, 16],
      [18, 20, 13],
      [18, 21, 16],
      [17, 23, 15],
      [19, 23, 12],
      [17, 18, 12],
      [19, 18, 15],
      [5, 0, 6],
      [2, 7, 4],
      [9, 3, 1],
      [6, 5, 0],
      [4, 2, 7],
      [1, 9, 3],
      [0, 2, 4],
      [3, 2, 1],
      [0, 5, 1],
      [2, 1, 3],
      [2, 4, 0],
      [5, 1, 0],
      [7, 9, 10],
      [8, 9, 6],
      [7, 11, 6],
      [9, 6, 8],
      [9, 10, 7],
      [11, 6, 7],
      [1, 7, 11],
      [4, 8, 11],
      [1, 8, 9],
      [4, 7, 9],
      [0, 9, 10],
      [3, 9, 6],
      [3, 11, 10],
      [0, 11, 6],
      [2, 6, 8],
      [2, 10, 7],
      [5, 6, 7],
      [5, 10, 8],
      [6, 0, 11],
      [10, 3, 11],
      [6, 3, 9],
      [10, 0, 9],
      [7, 2, 10],
      [8, 2, 6],
      [8, 5, 10],
      [7, 5, 6],
      [9, 1, 8],
      [9, 4, 7],
      [11, 1, 7],
      [11, 4, 8],
      [7, 9, 4],
      [8, 9, 1],
      [8, 11, 4],
      [7, 11, 1],
      [9, 6, 3],
      [9, 10, 0],
      [11, 6, 0],
      [11, 10, 3],
      [19, 12, 23],
      [13, 15, 22],
      [16, 21, 18],
      [17, 20, 14],
      [20, 14, 17],
      [21, 18, 16],
      [15, 22, 13],
      [12, 23, 19],
      [18, 16, 21],
      [14, 17, 20],
      [23, 19, 12],
      [22, 13, 15],
      [19, 20, 22],
      [13, 21, 23],
      [16, 15, 14],
      [17, 12, 18],
      [20, 18, 13],
      [21, 14, 19],
      [15, 23, 17],
      [12, 22, 16],
      [18, 19, 15],
      [14, 13, 12],
      [23, 16, 20],
      [22, 17, 21],
      [16, 12, 22],
      [17, 15, 23],
      [19, 21, 14],
      [13, 20, 18],
      [12, 14, 13],
      [15, 18, 19],
      [21, 22, 17],
      [20, 23, 16],
      [14, 16, 15],
      [18, 17, 12],
      [22, 19, 20],
      [23, 13, 21],
      [16, 20, 23],
      [17, 21, 22],
      [19, 15, 18],
      [13, 12, 14],
      [12, 18, 17],
      [15, 14, 16],
      [21, 23, 13],
      [20, 22, 19],
      [14, 19, 21],
      [18, 13, 20],
      [22, 16, 12],
      [23, 17, 15],
      [19, 12, 22],
      [17, 21, 23],
      [16, 15, 18],
      [13, 20, 14],
      [20, 14, 13],
      [15, 18, 16],
      [21, 23, 17],
      [12, 22, 19],
      [18, 16, 15],
      [14, 13, 20],
      [22, 19, 12],
      [23, 17, 21],
      [3, 2, 4],
      [3, 5, 1],
      [0, 5, 4],
      [2, 4, 3],
      [5, 1, 3],
      [5, 4, 0],
      [1, 7, 9],
      [4, 8, 9],
      [1, 8, 11],
      [4, 7, 11],
      [0, 9, 6],
      [3, 9, 10],
      [3, 11, 6],
      [0, 11, 10],
      [2, 6, 7],
      [2, 10, 8],
      [5, 6, 8],
      [5, 10, 7],
      [6, 0, 9],
      [10, 3, 9],
      [6, 3, 11],
      [10, 0, 11],
      [7, 2, 6],
      [8, 2, 10],
      [8, 5, 6],
      [7, 5, 10],
      [9, 1, 7],
      [9, 4, 8],
      [11, 1, 8],
      [11, 4, 7],
      [7, 9, 1],
      [8, 9, 4],
      [8, 11, 1],
      [7, 11, 4],
      [9, 6, 0],
      [9, 10, 3],
      [11, 6, 3],
      [11, 10, 0],
      [8, 9, 10],
      [8, 11, 6],
      [7, 11, 10],
      [9, 10, 8],
      [11, 6, 8],
      [11, 10, 7],
      [6, 0, 2],
      [10, 3, 2],
      [6, 3, 5],
      [10, 0, 5],
      [7, 2, 1],
      [8, 2, 4],
      [8, 5, 1],
      [7, 5, 4],
      [9, 1, 0],
      [9, 4, 3],
      [11, 1, 3],
      [11, 4, 0],
      [1, 7, 2],
      [4, 8, 2],
      [1, 8, 5],
      [4, 7, 5],
      [0, 9, 1],
      [3, 9, 4],
      [3, 11, 1],
      [0, 11, 4],
      [2, 6, 0],
      [2, 10, 3],
      [5, 6, 3],
      [5, 10, 0],
      [0, 2, 6],
      [3, 2, 10],
      [3, 5, 6],
      [0, 5, 10],
      [2, 1, 7],
      [2, 4, 8],
      [5, 1, 8],
      [5, 4, 7],
      [16, 12, 14],
      [13, 21, 18],
      [19, 15, 23],
      [17, 20, 22],
      [12, 14, 16],
      [21, 18, 13],
      [15, 23, 19],
      [20, 22, 17],
      [14, 16, 12],
      [18, 13, 21],
      [23, 19, 15],
      [22, 17, 20],
      [19, 20, 18],
      [17, 15, 14],
      [16, 21, 22],
      [13, 12, 23],
      [20, 18, 19],
      [15, 14, 17],
      [21, 22, 16],
      [12, 23, 13],
      [18, 19, 20],
      [14, 17, 15],
      [22, 16, 21],
      [23, 13, 12],
      [6, 0, 5],
      [10, 3, 5],
      [6, 3, 2],
      [10, 0, 2],
      [7, 2, 4],
      [8, 2, 1],
      [8, 5, 4],
      [7, 5, 1],
      [9, 1, 3],
      [9, 4, 0],
      [11, 1, 0],
      [11, 4, 3],
      [1, 7, 5],
      [4, 8, 5],
      [1, 8, 2],
      [4, 7, 2],
      [0, 9, 4],
      [3, 9, 1],
      [3, 11, 4],
      [0, 11, 1],
      [2, 6, 3],
      [2, 10, 0],
      [5, 6, 0],
      [5, 10, 3],
      [0, 2, 10],
      [3, 2, 6],
      [3, 5, 10],
      [0, 5, 6],
      [2, 1, 8],
      [2, 4, 7],
      [5, 1, 7],
      [5, 4, 8],
      [21, 17, 23],
      [20, 16, 22],
      [12, 13, 18],
      [15, 19, 14],
      [23, 21, 17],
      [22, 20, 16],
      [18, 12, 13],
      [14, 15, 19],
      [17, 23, 21],
      [16, 22, 20],
      [13, 18, 12],
      [19, 14, 15],
      [21, 13, 22],
      [20, 19, 23],
      [12, 17, 14],
      [15, 16, 18],
      [23, 15, 13],
      [22, 12, 19],
      [18, 20, 17],
      [14, 21, 16],
      [17, 22, 15],
      [16, 23, 12],
      [13, 14, 20],
      [19, 18, 21],
      [15, 17, 22],
      [12, 16, 23],
      [20, 13, 14],
      [21, 19, 18],
      [22, 21, 13],
      [23, 20, 19],
      [14, 12, 17],
      [18, 15, 16],
      [13, 23, 15],
      [19, 22, 12],
      [17, 18, 20],
      [16, 14, 21],
      [15, 13, 23],
      [12, 19, 22],
      [20, 17, 18],
      [21, 16, 14],
      [22, 15, 17],
      [23, 12, 16],
      [14, 20, 13],
      [18, 21, 19],
      [13, 22, 21],
      [19, 23, 20],
      [17, 14, 12],
      [16, 18, 15],
      [6, 5, 3],
      [4, 9, 3],
      [9, 3, 4],
      [5, 7, 4],
      [4, 5, 7],
      [5, 3, 6]
     ], e.Group = [
      [0],
      [0, 1],
      [0, 2],
      [0, 3],
      [0, 2, 4, 5],
      [0, 6],
      [0, 7],
      [0, 6, 4, 8],
      [0, 7, 4, 9],
      [0, 6, 2, 1],
      [0, 3, 1, 10],
      [0, 6, 2, 1, 4, 8, 5, 11],
      [0, 12, 1, 7],
      [0, 1, 13, 14],
      [0, 12, 1, 7, 4, 15, 11, 9],
      [0, 16, 2, 17],
      [0, 18, 12, 17],
      [0, 16, 5, 19],
      [0, 20, 13, 19],
      [0, 18, 12, 17, 4, 21, 15, 19],
      [0, 16, 2, 17, 4, 22, 5, 19],
      [0, 16, 2, 17, 23, 24, 13, 25, 26, 20, 27, 28, 4, 22, 5, 19],
      [0, 16, 17, 2, 29, 21, 30, 15],
      [0, 20, 13, 19, 29, 31, 32, 33],
      [0, 16, 6, 34],
      [0, 18, 7, 34],
      [0, 16, 7, 35],
      [0, 16, 36, 37],
      [0, 18, 36, 38],
      [0, 16, 14, 39],
      [0, 20, 40, 34],
      [0, 16, 8, 41],
      [0, 18, 8, 42],
      [0, 16, 9, 42],
      [0, 16, 6, 34, 4, 22, 8, 41],
      [0, 18, 7, 34, 4, 21, 9, 41],
      [0, 16, 7, 35, 4, 22, 9, 42],
      [0, 16, 6, 34, 23, 24, 14, 39],
      [0, 16, 10, 43, 23, 24, 7, 35],
      [0, 16, 36, 37, 23, 24, 9, 42],
      [0, 16, 8, 41, 23, 24, 40, 38],
      [0, 16, 6, 34, 23, 24, 14, 39, 26, 20, 40, 38, 4, 22, 8, 41],
      [0, 16, 44, 45, 23, 24, 46, 47, 26, 20, 48, 49, 4, 22, 50, 51],
      [0, 16, 6, 34, 29, 21, 9, 42],
      [0, 16, 8, 41, 29, 21, 7, 35],
      [0, 16, 36, 37, 29, 21, 14, 39],
      [0, 16, 2, 17, 1, 52, 6, 34],
      [0, 16, 2, 17, 53, 54, 9, 42],
      [0, 16, 12, 33, 1, 52, 7, 35],
      [0, 16, 2, 17, 11, 55, 8, 41],
      [0, 56, 2, 57, 1, 58, 6, 37],
      [0, 56, 15, 25, 1, 58, 9, 39],
      [0, 20, 27, 17, 1, 59, 40, 34],
      [0, 56, 12, 28, 1, 58, 7, 38],
      [0, 16, 5, 19, 1, 52, 8, 41],
      [0, 22, 13, 28, 1, 55, 14, 38],
      [0, 18, 13, 60, 1, 61, 14, 43],
      [0, 16, 15, 30, 1, 52, 9, 42],
      [0, 16, 5, 19, 11, 55, 6, 34],
      [0, 21, 12, 19, 1, 54, 7, 41],
      [0, 20, 13, 19, 1, 59, 14, 41],
      [0, 20, 3, 30, 1, 59, 10, 42],
      [0, 18, 12, 17, 1, 61, 7, 34, 4, 21, 15, 19, 11, 54, 9, 41],
      [0, 24, 13, 17, 1, 62, 14, 34, 4, 20, 27, 19, 11, 59, 40, 41],
      [0, 16, 2, 17, 1, 52, 6, 34, 4, 22, 5, 19, 11, 55, 8, 41],
      [0, 16, 12, 33, 1, 52, 7, 35, 4, 22, 15, 30, 11, 55, 9, 42],
      [0, 31, 3, 17, 1, 63, 10, 34, 4, 56, 32, 19, 11, 58, 36, 41],
      [0, 22, 2, 19, 64, 59, 14, 38, 4, 16, 5, 17, 65, 62, 40, 39],
      [0, 16, 2, 17, 1, 52, 6, 34, 23, 24, 13, 25, 64, 62, 14, 39, 26, 20, 27, 28, 65, 59, 40, 38, 4, 22, 5, 19, 11, 55, 8, 41],
      [0, 16, 2, 17, 66, 67, 44, 45, 23, 24, 13, 25, 68, 69, 46, 47, 26, 20, 27, 28, 70, 71, 48, 49, 4, 22, 5, 19, 72, 73, 50, 51],
      [0, 16, 2, 17, 1, 52, 6, 34, 29, 21, 15, 30, 53, 54, 9, 42],
      [0, 16, 5, 19, 1, 52, 8, 41, 29, 21, 12, 33, 53, 54, 7, 35],
      [0, 20, 13, 19, 1, 59, 14, 41, 29, 31, 32, 33, 53, 63, 36, 35],
      [0, 31, 3, 17, 1, 63, 10, 34, 29, 20, 27, 30, 53, 59, 40, 42],
      [0, 16, 74, 75],
      [0, 18, 76, 77],
      [0, 16, 78, 79],
      [0, 18, 80, 81],
      [0, 16, 74, 75, 29, 21, 82, 83],
      [0, 21, 84, 85, 29, 16, 86, 87],
      [0, 16, 88, 89],
      [0, 16, 88, 89, 29, 21, 90, 91],
      [0, 16, 74, 75, 1, 52, 88, 89],
      [0, 16, 78, 79, 1, 52, 92, 93],
      [0, 16, 94, 95, 11, 55, 88, 89],
      [0, 16, 82, 83, 53, 54, 88, 89],
      [0, 16, 74, 75, 1, 52, 88, 89, 29, 21, 82, 83, 53, 54, 90, 91],
      [0, 21, 84, 85, 96, 97, 88, 91, 29, 16, 86, 87, 98, 99, 90, 89],
      [0, 16, 74, 75, 2, 17, 100, 101],
      [0, 16, 94, 95, 5, 19, 100, 101],
      [0, 18, 76, 77, 2, 33, 102, 103],
      [0, 18, 104, 105, 106, 107, 100, 108],
      [0, 16, 78, 79, 2, 17, 109, 108],
      [0, 16, 82, 83, 15, 30, 100, 101],
      [0, 18, 80, 81, 2, 33, 110, 111],
      [0, 18, 112, 113, 114, 115, 100, 108],
      [0, 16, 74, 75, 2, 17, 100, 101, 29, 21, 82, 83, 15, 30, 116, 117],
      [0, 21, 84, 85, 118, 119, 116, 101, 29, 16, 86, 87, 120, 121, 100, 117],
      [0, 16, 74, 75, 6, 34, 122, 123],
      [0, 16, 74, 75, 8, 41, 124, 125],
      [0, 16, 78, 79, 7, 35, 122, 123],
      [0, 16, 82, 83, 9, 42, 122, 123],
      [0, 16, 74, 75, 7, 35, 126, 127],
      [0, 16, 74, 75, 9, 42, 128, 129],
      [0, 16, 78, 79, 6, 34, 126, 127],
      [0, 16, 78, 79, 8, 41, 128, 129],
      [0, 16, 74, 75, 6, 34, 122, 123, 29, 21, 82, 83, 9, 42, 128, 129],
      [0, 16, 74, 75, 7, 35, 126, 127, 29, 21, 82, 83, 8, 41, 124, 125],
      [0, 21, 84, 85, 6, 42, 130, 131, 29, 16, 86, 87, 9, 34, 132, 133],
      [0, 21, 84, 85, 7, 41, 134, 135, 29, 16, 86, 87, 8, 35, 136, 137],
      [0, 16, 89, 88, 2, 17, 122, 123],
      [0, 16, 89, 88, 12, 33, 126, 127],
      [0, 16, 89, 88, 5, 19, 124, 125],
      [0, 16, 89, 88, 15, 30, 128, 129],
      [0, 16, 88, 89, 6, 34, 100, 101],
      [0, 16, 89, 88, 7, 35, 109, 108],
      [0, 16, 89, 88, 8, 41, 138, 139],
      [0, 16, 89, 88, 9, 42, 116, 117],
      [0, 16, 89, 88, 6, 34, 100, 101, 29, 21, 91, 90, 9, 42, 116, 117],
      [0, 16, 89, 88, 7, 35, 109, 108, 29, 21, 91, 90, 8, 41, 138, 139],
      [0, 16, 89, 88, 2, 17, 122, 123, 29, 21, 91, 90, 15, 30, 128, 129],
      [0, 16, 89, 88, 118, 121, 132, 131, 29, 21, 91, 90, 120, 119, 130, 133],
      [0, 16, 74, 75, 2, 17, 100, 101, 1, 52, 88, 89, 6, 34, 122, 123],
      [0, 16, 74, 75, 12, 33, 109, 108, 1, 52, 88, 89, 7, 35, 126, 127],
      [0, 16, 74, 75, 2, 17, 100, 101, 11, 55, 140, 141, 8, 41, 124, 125],
      [0, 16, 74, 75, 2, 17, 100, 101, 53, 54, 90, 91, 9, 42, 128, 129],
      [0, 16, 74, 75, 5, 19, 138, 139, 1, 52, 88, 89, 8, 41, 124, 125],
      [0, 16, 74, 75, 15, 30, 116, 117, 1, 52, 88, 89, 9, 42, 128, 129],
      [0, 16, 94, 95, 5, 19, 100, 101, 11, 55, 88, 89, 6, 34, 124, 125],
      [0, 16, 94, 95, 15, 30, 109, 108, 11, 55, 88, 89, 7, 35, 128, 129],
      [0, 16, 78, 79, 2, 17, 109, 108, 1, 52, 92, 93, 6, 34, 126, 127],
      [0, 16, 78, 79, 12, 33, 100, 101, 1, 52, 92, 93, 7, 35, 122, 123],
      [0, 16, 82, 83, 12, 33, 138, 139, 53, 54, 88, 89, 8, 41, 126, 127],
      [0, 16, 82, 83, 2, 17, 116, 117, 53, 54, 88, 89, 9, 42, 122, 123],
      [0, 16, 78, 79, 5, 19, 116, 117, 1, 52, 92, 93, 8, 41, 128, 129],
      [0, 16, 82, 83, 15, 30, 100, 101, 1, 52, 90, 91, 9, 42, 122, 123],
      [0, 16, 82, 83, 15, 30, 100, 101, 53, 54, 88, 89, 6, 34, 128, 129],
      [0, 16, 82, 83, 5, 19, 109, 108, 53, 54, 88, 89, 7, 35, 124, 125],
      [0, 16, 74, 75, 2, 17, 100, 101, 1, 52, 88, 89, 6, 34, 122, 123, 29, 21, 82, 83, 15, 30, 116, 117, 53, 54, 90, 91, 9, 42, 128, 129],
      [0, 16, 74, 75, 12, 33, 109, 108, 1, 52, 88, 89, 7, 35, 126, 127, 29, 21, 82, 83, 5, 19, 138, 139, 53, 54, 90, 91, 8, 41, 124, 125],
      [0, 21, 84, 85, 118, 119, 116, 101, 96, 97, 88, 91, 9, 34, 132, 133, 29, 16, 86, 87, 120, 121, 100, 117, 98, 99, 90, 89, 6, 42, 130, 131],
      [0, 21, 84, 85, 142, 143, 138, 108, 96, 97, 88, 91, 8, 35, 136, 137, 29, 16, 86, 87, 144, 145, 109, 139, 98, 99, 90, 89, 7, 41, 134, 135],
      [0, 146, 147],
      [0, 148, 149],
      [0, 150, 151],
      [0, 146, 147, 152, 153, 154, 155, 156, 157],
      [0, 158, 159],
      [0, 146, 147, 1, 160, 161],
      [0, 146, 147, 1, 160, 161, 152, 153, 154, 162, 163, 164, 155, 156, 157, 165, 166, 167],
      [0, 158, 159, 1, 168, 169],
      [0, 146, 147, 101, 170, 171],
      [0, 146, 147, 100, 172, 173],
      [0, 148, 149, 174, 175, 171],
      [0, 148, 149, 100, 176, 177],
      [0, 150, 151, 178, 179, 171],
      [0, 150, 151, 100, 180, 181],
      [0, 146, 147, 100, 172, 173, 152, 153, 154, 182, 183, 184, 155, 156, 157, 185, 186, 187],
      [0, 158, 159, 101, 188, 189],
      [0, 146, 147, 122, 190, 191],
      [0, 146, 147, 123, 192, 193],
      [0, 146, 147, 126, 194, 195],
      [0, 146, 147, 127, 196, 197],
      [0, 146, 147, 122, 190, 191, 152, 153, 154, 198, 199, 200, 155, 156, 157, 201, 202, 203],
      [0, 158, 159, 123, 204, 205],
      [0, 146, 147, 126, 194, 195, 152, 153, 154, 206, 207, 208, 155, 156, 157, 209, 210, 211],
      [0, 158, 159, 129, 212, 213],
      [0, 146, 147, 101, 170, 171, 1, 160, 161, 123, 192, 193],
      [0, 146, 147, 108, 214, 215, 1, 160, 161, 127, 196, 197],
      [0, 146, 147, 100, 172, 173, 1, 160, 161, 122, 190, 191],
      [0, 146, 147, 109, 216, 217, 1, 160, 161, 126, 194, 195],
      [0, 146, 147, 100, 172, 173, 1, 160, 161, 122, 190, 191, 152, 153, 154, 182, 183, 184, 162, 163, 164, 198, 199, 200, 155, 156, 157, 185, 186, 187, 165, 166, 167, 201, 202, 203],
      [0, 158, 159, 101, 188, 189, 1, 168, 169, 123, 204, 205],
      [0, 146, 147, 109, 216, 217, 1, 160, 161, 126, 194, 195, 152, 153, 154, 218, 219, 220, 162, 163, 164, 206, 207, 208, 155, 156, 157, 221, 222, 223, 165, 166, 167, 209, 210, 211],
      [0, 158, 159, 117, 224, 225, 1, 168, 169, 129, 212, 213],
      [0, 146, 147, 16, 226, 227],
      [0, 148, 149, 18, 228, 229],
      [0, 150, 151, 18, 230, 231],
      [0, 150, 151, 16, 232, 233],
      [0, 148, 149, 16, 234, 235],
      [0, 146, 147, 18, 236, 237],
      [0, 146, 147, 52, 238, 239],
      [0, 146, 147, 16, 226, 227, 1, 160, 161, 52, 238, 239],
      [0, 146, 147, 18, 236, 237, 1, 160, 161, 61, 240, 241],
      [0, 146, 147, 16, 226, 227, 100, 172, 173, 101, 170, 171],
      [0, 148, 149, 18, 228, 229, 242, 172, 181, 243, 214, 244],
      [0, 150, 151, 18, 230, 231, 245, 172, 177, 246, 214, 247],
      [0, 150, 151, 16, 232, 233, 245, 172, 177, 174, 170, 248],
      [0, 148, 149, 16, 234, 235, 242, 172, 181, 178, 170, 249],
      [0, 146, 147, 18, 236, 237, 100, 172, 173, 108, 214, 215],
      [0, 146, 147, 16, 226, 227, 122, 190, 191, 123, 192, 193],
      [0, 146, 147, 16, 226, 227, 126, 194, 195, 127, 196, 197],
      [0, 146, 147, 18, 236, 237, 126, 194, 195, 123, 192, 193],
      [0, 146, 147, 18, 236, 237, 122, 190, 191, 127, 196, 197],
      [0, 146, 147, 52, 238, 239, 122, 190, 191, 101, 170, 171],
      [0, 146, 147, 61, 240, 241, 126, 194, 195, 101, 170, 171],
      [0, 146, 147, 52, 238, 239, 100, 172, 173, 123, 192, 193],
      [0, 146, 147, 61, 240, 241, 100, 172, 173, 127, 196, 197],
      [0, 146, 147, 16, 226, 227, 100, 172, 173, 101, 170, 171, 1, 160, 161, 52, 239, 238, 122, 190, 191, 123, 192, 193],
      [0, 146, 147, 16, 226, 227, 109, 216, 217, 108, 214, 215, 1, 160, 161, 52, 239, 238, 126, 194, 195, 127, 196, 197],
      [0, 146, 147, 18, 236, 237, 109, 216, 217, 101, 170, 171, 1, 160, 161, 61, 241, 240, 126, 194, 195, 123, 192, 193],
      [0, 146, 147, 18, 236, 237, 100, 172, 173, 108, 214, 215, 1, 160, 161, 61, 241, 240, 122, 190, 191, 127, 196, 197],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 66, 67, 44, 45, 332, 333, 334, 335, 336, 337, 338, 339, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 68, 69, 46, 47, 340, 341, 342, 343, 344, 345, 346, 347, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 70, 71, 48, 49, 348, 349, 350, 351, 352, 353, 354, 355, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 72, 73, 50, 51, 356, 357, 358, 359, 360, 361, 362, 363],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 53, 63, 36, 35, 300, 364, 365, 366, 304, 367, 368, 369],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 138, 139, 95, 94, 406, 407, 408, 409, 410, 411, 412, 413],
      [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 125, 124, 140, 141, 504, 505, 506, 507, 508, 509, 510, 511],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 123, 122, 88, 89, 204, 474, 475, 476, 205, 477, 478, 479, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 129, 128, 90, 91, 212, 512, 513, 514, 213, 515, 516, 517, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 127, 126, 92, 93, 542, 543, 544, 545, 546, 547, 548, 549],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 481, 480, 483, 482, 486, 487, 484, 485, 491, 490, 489, 488, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 493, 492, 495, 494, 498, 499, 496, 497, 503, 502, 501, 500, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 138, 139, 95, 94, 406, 407, 408, 409, 410, 411, 412, 413, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331, 124, 125, 141, 140, 506, 507, 504, 505, 511, 510, 509, 508],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213, 23, 24, 13, 25, 256, 257, 258, 259, 260, 261, 262, 263, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 64, 62, 14, 39, 308, 309, 310, 311, 312, 313, 314, 315, 519, 518, 521, 520, 524, 525, 522, 523, 529, 528, 527, 526, 26, 20, 27, 28, 264, 265, 266, 267, 268, 269, 270, 271, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 65, 59, 40, 38, 316, 317, 318, 319, 320, 321, 322, 323, 531, 530, 533, 532, 536, 537, 534, 535, 541, 540, 539, 538, 4, 22, 5, 19, 272, 273, 274, 275, 276, 277, 278, 279, 109, 108, 79, 78, 598, 599, 600, 601, 602, 603, 604, 605, 11, 55, 8, 41, 324, 325, 326, 327, 328, 329, 330, 331, 126, 127, 93, 92, 544, 545, 542, 543, 549, 548, 547, 546],
      [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 66, 69, 50, 49, 332, 349, 342, 359, 336, 361, 354, 347, 493, 123, 483, 140, 498, 507, 204, 485, 503, 490, 509, 205, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 68, 67, 48, 51, 340, 357, 334, 351, 344, 353, 362, 339, 124, 480, 89, 494, 506, 499, 484, 474, 511, 478, 501, 488, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 70, 73, 46, 45, 348, 333, 358, 343, 352, 345, 338, 363, 122, 492, 141, 482, 475, 487, 496, 505, 479, 510, 489, 500, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 72, 71, 44, 47, 356, 341, 350, 335, 360, 337, 346, 355, 481, 125, 495, 88, 486, 476, 504, 497, 491, 502, 477, 508],
      [0, 24, 5, 28, 158, 265, 258, 275, 159, 277, 270, 263, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 531, 129, 521, 92, 536, 545, 212, 523, 541, 528, 547, 213, 23, 16, 27, 19, 256, 273, 251, 267, 260, 269, 278, 255, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 126, 518, 91, 532, 544, 537, 522, 512, 549, 516, 539, 526, 26, 22, 13, 17, 264, 250, 274, 259, 268, 261, 254, 279, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 128, 530, 93, 520, 513, 525, 534, 543, 517, 548, 527, 538, 4, 20, 2, 25, 272, 257, 266, 252, 276, 253, 262, 271, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 519, 127, 533, 90, 524, 514, 542, 535, 529, 540, 515, 546],
      [0, 16, 2, 17, 158, 250, 251, 252, 159, 253, 254, 255, 100, 101, 75, 74, 370, 371, 188, 372, 373, 374, 375, 189, 1, 52, 6, 34, 168, 294, 295, 296, 169, 297, 298, 299, 122, 123, 89, 88, 475, 476, 204, 474, 479, 478, 477, 205, 29, 21, 15, 30, 280, 281, 282, 283, 284, 285, 286, 287, 116, 117, 83, 82, 376, 377, 224, 378, 379, 380, 381, 225, 53, 54, 9, 42, 300, 301, 302, 303, 304, 305, 306, 307, 128, 129, 91, 90, 513, 514, 212, 512, 517, 516, 515, 213],
      [0, 20, 13, 19, 158, 273, 266, 259, 159, 261, 278, 271, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 1, 59, 14, 41, 168, 325, 318, 311, 169, 313, 330, 323, 551, 550, 553, 552, 556, 557, 554, 555, 561, 560, 559, 558, 29, 31, 32, 33, 280, 288, 289, 290, 284, 291, 292, 293, 450, 415, 440, 429, 454, 431, 420, 445, 458, 447, 436, 425, 53, 63, 36, 35, 300, 364, 365, 366, 304, 367, 368, 369, 563, 562, 565, 564, 568, 569, 566, 567, 573, 572, 571, 570],
      [0, 16],
      [0, 18],
      [0, 16, 26, 20],
      [0, 2, 23, 13],
      [0, 3, 4, 32],
      [0, 2, 29, 15],
      [0, 3, 29, 27],
      [0, 52],
      [0, 63],
      [0, 52, 26, 59],
      [0, 63, 26, 54],
      [0, 52, 16, 1],
      [0, 18, 1, 61],
      [0, 52, 16, 1, 26, 59, 20, 65],
      [0, 31, 1, 63],
      [0, 1, 24, 62],
      [0, 31, 1, 63, 26, 21, 65, 54],
      [0, 2, 57, 56],
      [0, 60, 3, 16],
      [0, 22, 57, 3],
      [0, 2, 28, 20],
      [0, 17, 13, 24],
      [0, 20, 19, 13, 4, 24, 17, 27],
      [0, 22, 57, 3, 4, 16, 60, 32],
      [0, 22, 57, 3, 23, 20, 30, 12, 26, 24, 33, 15, 4, 16, 60, 32],
      [0, 22, 57, 3, 29, 18, 27, 25],
      [0, 22, 3, 57, 1, 55, 10, 37],
      [0, 22, 385, 396, 3, 57, 109, 117],
      [0, 22, 57, 3, 159, 279, 654, 655, 158, 274, 656, 657, 29, 18, 25, 27, 284, 658, 262, 269, 280, 659, 257, 267]
     ], e.Spacegroup = {
      "P 1": 0,
      "P -1": 1,
      "P 1 2 1": 2,
      "P 1 21 1": 3,
      "C 1 2 1": 4,
      "P 1 m 1": 5,
      "P 1 c 1": 6,
      "C 1 m 1": 7,
      "C 1 c 1": 8,
      "P 1 2/m 1": 9,
      "P 1 21/m 1": 10,
      "C 1 2/m 1": 11,
      "P 1 2/c 1": 12,
      "P 1 21/c 1": 13,
      "C 1 2/c 1": 14,
      "P 2 2 2": 15,
      "P 2 2 21": 16,
      "P 21 21 2": 17,
      "P 21 21 21": 18,
      "C 2 2 21": 19,
      "C 2 2 2": 20,
      "F 2 2 2": 21,
      "I 2 2 2": 22,
      "I 21 21 21": 23,
      "P m m 2": 24,
      "P m c 21": 25,
      "P c c 2": 26,
      "P m a 2": 27,
      "P c a 21": 28,
      "P n c 2": 29,
      "P m n 21": 30,
      "P b a 2": 31,
      "P n a 21": 32,
      "P n n 2": 33,
      "C m m 2": 34,
      "C m c 21": 35,
      "C c c 2": 36,
      "A m m 2": 37,
      "A b m 2": 38,
      "A m a 2": 39,
      "A b a 2": 40,
      "F m m 2": 41,
      "F d d 2": 42,
      "I m m 2": 43,
      "I b a 2": 44,
      "I m a 2": 45,
      "P 2/m 2/m 2/m": 46,
      "P m m m": 46,
      "P 2/n 2/n 2/n": 47,
      "P n n n": 47,
      "P 2/c 2/c 2/m": 48,
      "P c c m": 48,
      "P 2/b 2/a 2/n": 49,
      "P b a n": 49,
      "P 21/m 2/m 2/a": 50,
      "P m m a": 50,
      "P 2/n 21/n 2/a": 51,
      "P n n a": 51,
      "P 2/m 2/n 21/a": 52,
      "P m n a": 52,
      "P 21/c 2/c 2/a": 53,
      "P c c a": 53,
      "P 21/b 21/a 2/m": 54,
      "P b a m": 54,
      "P 21/c 21/c 2/n": 55,
      "P c c n": 55,
      "P 2/b 21/c 21/m": 56,
      "P b c m": 56,
      "P 21/n 21/n 2/m": 57,
      "P n n m": 57,
      "P 21/m 21/m 2/n": 58,
      "P m m n": 58,
      "P 21/b 2/c 21/n": 59,
      "P b c n": 59,
      "P 21/b 21/c 21/a": 60,
      "P b c a": 60,
      "P 21/n 21/m 21/a": 61,
      "P n m a": 61,
      "C 2/m 2/c 21/m": 62,
      "C m c m": 62,
      "C 2/m 2/c 21/a": 63,
      "C m c a": 63,
      "C 2/m 2/m 2/m": 64,
      "C m m m": 64,
      "C 2/c 2/c 2/m": 65,
      "C c c m": 65,
      "C 2/m 2/m 2/a": 66,
      "C m m a": 66,
      "C 2/c 2/c 2/a": 67,
      "C c c a": 67,
      "F 2/m 2/m 2/m": 68,
      "F m m m": 68,
      "F 2/d 2/d 2/d": 69,
      "F d d d": 69,
      "I 2/m 2/m 2/m": 70,
      "I m m m": 70,
      "I 2/b 2/a 2/m": 71,
      "I b a m": 71,
      "I 21/b 21/c 21/a": 72,
      "I b c a": 72,
      "I 21/m 21/m 21/a": 73,
      "I m m a": 73,
      "P 4": 74,
      "P 41": 75,
      "P 42": 76,
      "P 43": 77,
      "I 4": 78,
      "I 41": 79,
      "P -4": 80,
      "I -4": 81,
      "P 4/m": 82,
      "P 42/m": 83,
      "P 4/n": 84,
      "P 42/n": 85,
      "I 4/m": 86,
      "I 41/a": 87,
      "P 4 2 2": 88,
      "P 4 21 2": 89,
      "P 41 2 2": 90,
      "P 41 21 2": 91,
      "P 42 2 2": 92,
      "P 42 21 2": 93,
      "P 43 2 2": 94,
      "P 43 21 2": 95,
      "I 4 2 2": 96,
      "I 41 2 2": 97,
      "P 4 m m": 98,
      "P 4 b m": 99,
      "P 42 c m": 100,
      "P 42 n m": 101,
      "P 4 c c": 102,
      "P 4 n c": 103,
      "P 42 m c": 104,
      "P 42 b c": 105,
      "I 4 m m": 106,
      "I 4 c m": 107,
      "I 41 m d": 108,
      "I 41 c d": 109,
      "P -4 2 m": 110,
      "P -4 2 c": 111,
      "P -4 21 m": 112,
      "P -4 21 c": 113,
      "P -4 m 2": 114,
      "P -4 c 2": 115,
      "P -4 b 2": 116,
      "P -4 n 2": 117,
      "I -4 m 2": 118,
      "I -4 c 2": 119,
      "I -4 2 m": 120,
      "I -4 2 d": 121,
      "P 4/m 2/m 2/m": 122,
      "P4/m m m": 122,
      "P 4/m 2/c 2/c": 123,
      "P4/m c c": 123,
      "P 4/n 2/b 2/m": 124,
      "P4/n b m": 124,
      "P 4/n 2/n 2/c": 125,
      "P4/n n c": 125,
      "P 4/m 21/b 2/m": 126,
      "P4/m b m": 126,
      "P 4/m 21/n 2/c": 127,
      "P4/m n c": 127,
      "P 4/n 21/m 2/m": 128,
      "P4/n m m": 128,
      "P 4/n 2/c 2/c": 129,
      "P4/n c c": 129,
      "P 42/m 2/m 2/c": 130,
      "P42/m m c": 130,
      "P 42/m 2/c 2/m": 131,
      "P42/m c m": 131,
      "P 42/n 2/b 2/c": 132,
      "P42/n b c": 132,
      "P 42/n 2/n 2/m": 133,
      "P42/n n m": 133,
      "P 42/m 21/b 2/c": 134,
      "P42/m b c": 134,
      "P 42/m 21/n 2/m": 135,
      "P42/m n m": 135,
      "P 42/n 21/m 2/c": 136,
      "P42/n m c": 136,
      "P 42/n 21/c 2/m": 137,
      "P42/n c m": 137,
      "I 4/m 2/m 2/m": 138,
      "I4/m m m": 138,
      "I 4/m 2/c 2/m": 139,
      "I4/m c m": 139,
      "I 41/a 2/m 2/d": 140,
      "I41/a m d": 140,
      "I 41/a 2/c 2/d": 141,
      "I41/a c d": 141,
      "P 3": 142,
      "P 31": 143,
      "P 32": 144,
      "H 3": 145,
      "R 3": 146,
      "P -3": 147,
      "H -3": 148,
      "R -3": 149,
      "P 3 1 2": 150,
      "P 3 2 1": 151,
      "P 31 1 2": 152,
      "P 31 2 1": 153,
      "P 32 1 2": 154,
      "P 32 2 1": 155,
      "H 3 2": 156,
      "R 3 2": 157,
      "P 3 m 1": 158,
      "P 3 1 m": 159,
      "P 3 c 1": 160,
      "P 3 1 c": 161,
      "H 3 m": 162,
      "R 3 m": 163,
      "H 3 c": 164,
      "R 3 c": 165,
      "P -3 1 2/m": 166,
      "P -3 1 m": 166,
      "P -3 1 2/c": 167,
      "P -3 1 c": 167,
      "P -3 2/m 1": 168,
      "P -3 m 1": 168,
      "P -3 2/c 1": 169,
      "P -3 c 1": 169,
      "H -3 2/m": 170,
      "H -3 m": 170,
      "R -3 2/m": 171,
      "R -3 m": 171,
      "H -3 2/c": 172,
      "H -3 c": 172,
      "R -3 2/c": 173,
      "R -3 c": 173,
      "P 6": 174,
      "P 61": 175,
      "P 65": 176,
      "P 62": 177,
      "P 64": 178,
      "P 63": 179,
      "P -6": 180,
      "P 6/m": 181,
      "P 63/m": 182,
      "P 6 2 2": 183,
      "P 61 2 2": 184,
      "P 65 2 2": 185,
      "P 62 2 2": 186,
      "P 64 2 2": 187,
      "P 63 2 2": 188,
      "P 6 m m": 189,
      "P 6 c c": 190,
      "P 63 c m": 191,
      "P 63 m c": 192,
      "P -6 m 2": 193,
      "P -6 c 2": 194,
      "P -6 2 m": 195,
      "P -6 2 c": 196,
      "P 6/m 2/m 2/m": 197,
      "P 6/m m m": 197,
      "P 6/m 2/c 2/c": 198,
      "P 6/m c c": 198,
      "P 63/m 2/c 2/m": 199,
      "P 63/m c m": 199,
      "P 63/m 2/m 2/c": 200,
      "P 63/m m c": 200,
      "P 2 3": 201,
      "F 2 3": 202,
      "I 2 3": 203,
      "P 21 3": 204,
      "I 21 3": 205,
      "P 2/m -3": 206,
      "P m -3": 206,
      "P 2/n -3": 207,
      "P n -3": 207,
      "F 2/m -3": 208,
      "F m -3": 208,
      "F 2/d -3": 209,
      "F d -3": 209,
      "I 2/m -3": 210,
      "I m -3": 210,
      "P 21/a -3": 211,
      "P a -3": 211,
      "I 21/a -3": 212,
      "I a -3": 212,
      "P 4 3 2": 213,
      "P 42 3 2": 214,
      "F 4 3 2": 215,
      "F 41 3 2": 216,
      "I 4 3 2": 217,
      "P 43 3 2": 218,
      "P 41 3 2": 219,
      "I 41 3 2": 220,
      "P -4 3 m": 221,
      "F -4 3 m": 222,
      "I -4 3 m": 223,
      "P -4 3 n": 224,
      "F -4 3 c": 225,
      "I -4 3 d": 226,
      "P 4/m -3 2/m": 227,
      "P m -3 m": 227,
      "P 4/n -3 2/n": 228,
      "P n -3 n": 228,
      "P 42/m -3 2/n": 229,
      "P m -3 n": 229,
      "P 42/n -3 2/m": 230,
      "P n -3 m": 230,
      "F 4/m -3 2/m": 231,
      "F m -3 m": 231,
      "F 4/m -3 2/c": 232,
      "F m -3 c": 232,
      "F 41/d -3 2/m": 233,
      "F d -3 m": 233,
      "F 41/d -3 2/c": 234,
      "F d -3 c": 234,
      "I 4/m -3 2/m": 235,
      "I m -3 m": 235,
      "I 41/a -3 2/d": 236,
      "I a -3 d": 236,
      "P 1 1 2": 237,
      "P 1 1 21": 238,
      "B 1 1 2": 239,
      "B 2": 239,
      "A 1 2 1": 240,
      "C 1 21 1": 241,
      "I 1 2 1": 242,
      "I 2": 242,
      "I 1 21 1": 243,
      "P 1 1 m": 244,
      "P 1 1 b": 245,
      "B 1 1 m": 246,
      "B 1 1 b": 247,
      "P 1 1 2/m": 248,
      "P 1 1 21/m": 249,
      "B 1 1 2/m": 250,
      "P 1 1 2/b": 251,
      "P 1 1 21/b": 252,
      "B 1 1 2/b": 253,
      "P 21 2 2": 254,
      "P 2 21 2": 255,
      "P 21 21 2 (a)": 256,
      "P 21 2 21": 257,
      "P 2 21 21": 258,
      "C 2 2 21a)": 259,
      "C 2 2 2a": 260,
      "F 2 2 2a": 261,
      "I 2 2 2a": 262,
      "P 21/m 21/m 2/n a": 263,
      "P 42 21 2a": 264,
      "I 2 3a": 265
     }
    }(o = t.SpacegroupTables || (t.SpacegroupTables = {}))
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e, t, n) {
     return o.buildPivotGroupSymmetry(e, t, n)
    }

    function r(e, t) {
     return o.buildMates(e, t)
    }

    function i(e, t) {
     return o.buildAssembly(e, t)
    }
    var o;
    ! function(n) {
     function r(e, t) {
      for (var n = e.x, r = e.y, i = e.z, o = {
        x: 0,
        y: 0,
        z: 0
       }, a = 0, s = t; a < s.length; a++) {
       var l = s[a];
       o.x += n[l], o.y += r[l], o.z += i[l]
      }
      var c = t.length > 0 ? t.length : 1;
      o.x /= c, o.y /= c, o.z /= c;
      for (var h = 0, p = 0, d = t; p < d.length; p++) {
       var l = d[p];
       h = Math.max(u(l, o, e), h)
      }
      return {
       center: o,
       radius: Math.sqrt(h)
      }
     }

     function i() {
      return {
       x: 0,
       y: 0,
       z: 0
      }
     }

     function o(e, t, n) {
      var r = e.x - n.center.x,
       i = e.y - n.center.y,
       o = e.z - n.center.z;
      return Math.sqrt(r * r + i * i + o * o) - (t + n.radius)
     }

     function a(e, t, n, r, i, a) {
      return a.x = n.x[t], a.y = n.y[t], a.z = n.z[t], P.transformVector3(a, a, r), o(a, n.r[t], e) <= i
     }

     function s(e, t, n) {
      var r = n.x[e] - n.cX[t],
       i = n.y[e] - n.cY[t],
       o = n.z[e] - n.cZ[t];
      return r * r + i * i + o * o
     }

     function u(e, t, n) {
      var r = n.x[e] - t.x,
       i = n.y[e] - t.y,
       o = n.z[e] - t.z;
      return r * r + i * i + o * o
     }

     function l(e, t, n, r) {
      return {
       model: e,
       boundingInfo: t,
       spacegroup: n,
       radius: r,
       transform: P.empty(),
       transformed: {
        x: 0,
        y: 0,
        z: 0
       },
       i: 0,
       j: 0,
       k: 0,
       op: 0
      }
     }

     function c(e, t) {
      return P.transformVector3(e.transformed, t, e.transform)
     }

     function h(e) {
      return p(e.i, e.j, e.k, e.op, P.clone(e.transform))
     }

     function p(e, t, n, r, i) {
      return {
       isIdentity: !(e || t || n || r),
       id: r + 1 + "_" + (5 + e) + (5 + t) + (5 + n),
       transform: i
      }
     }

     function d(e, t) {
      for (var n = !0, r = 0; 4 > r; r++) {
       for (var i = 0; 4 > i; i++) {
        var o = t[4 * i + r];
        if (r === i) {
         if (Math.abs(o - 1) > 1e-7) {
          n = !1;
          break
         }
        } else if (Math.abs(o) > 1e-7) {
         n = !1;
         break
        }
       }
       if (!n) break
      }
      return {
       isIdentity: n,
       id: e.toString(),
       transform: t
      }
     }

     function f(e, n) {
      for (var r = e.atoms, o = e.residues, a = e.chains, l = e.entities, c = r.x, h = r.y, p = r.z, d = new t.DataTableBuilder(l.count), f = d.addColumn("x", function(e) {
        return new Float64Array(e)
       }), m = d.addColumn("y", function(e) {
        return new Float64Array(e)
       }), g = d.addColumn("z", function(e) {
        return new Float64Array(e)
       }), v = d.addColumn("r", function(e) {
        return new Float64Array(e)
       }), y = new t.DataTableBuilder(a.count), b = y.addColumn("x", function(e) {
        return new Float64Array(e)
       }), w = y.addColumn("y", function(e) {
        return new Float64Array(e)
       }), x = y.addColumn("z", function(e) {
        return new Float64Array(e)
       }), _ = y.addColumn("r", function(e) {
        return new Float64Array(e)
       }), S = new t.DataTableBuilder(o.count), C = S.addColumn("x", function(e) {
        return new Float64Array(e)
       }), E = S.addColumn("y", function(e) {
        return new Float64Array(e)
       }), T = S.addColumn("z", function(e) {
        return new Float64Array(e)
       }), M = S.addColumn("r", function(e) {
        return new Float64Array(e)
       }), A = i(), P = 0, R = i(), I = 0, k = 0, D = i(), V = 0, L = i(), B = 0, O = i(), N = 0, F = 0, U = l.count; U > F; F++) {
       D.x = 0, D.y = 0, D.z = 0;
       for (var z = l.chainStartIndex[F], G = l.chainEndIndex[F]; G > z; z++) {
        L.x = 0, L.y = 0, L.z = 0;
        for (var H = a.residueStartIndex[z], j = a.residueEndIndex[z]; j > H; H++) {
         O.x = 0, O.y = 0, O.z = 0;
         for (var q = o.atomStartIndex[H], W = o.atomEndIndex[H]; W > q; q++) O.x += c[q], O.y += h[q], O.z += p[q];
         A.x += O.x, A.y += O.y, A.z += O.z, k = o.atomEndIndex[H] - o.atomStartIndex[H], L.x += O.x, L.y += O.y, L.z += O.z, C[H] = O.x / k, E[H] = O.y / k, T[H] = O.z / k
        }
        D.x += L.x, D.y += L.y, D.z += L.z, k = a.atomEndIndex[z] - a.atomStartIndex[z], b[z] = L.x / k, w[z] = L.y / k, x[z] = L.z / k
       }
       k = l.atomEndIndex[F] - l.atomStartIndex[F], f[F] = D.x / k, m[F] = D.y / k, g[F] = D.z / k
      }
      A.x /= r.count, A.y /= r.count, A.z /= r.count;
      for (var X = 0, Y = n; X < Y.length; X++) {
       var q = Y[X];
       R.x += c[q], R.y += h[q], R.z += p[q]
      }
      var Q = n.length > 0 ? n.length : 1;
      R.x /= Q, R.y /= Q, R.z /= Q;
      for (var Z = {
        x: c,
        y: h,
        z: p,
        cX: f,
        cY: m,
        cZ: g
       }, K = {
        x: c,
        y: h,
        z: p,
        cX: b,
        cY: w,
        cZ: x
       }, $ = {
        x: c,
        y: h,
        z: p,
        cX: C,
        cY: E,
        cZ: T
       }, F = 0, U = l.count; U > F; F++) {
       V = 0;
       for (var z = l.chainStartIndex[F], G = l.chainEndIndex[F]; G > z; z++) {
        B = 0;
        for (var H = a.residueStartIndex[z], j = a.residueEndIndex[z]; j > H; H++) {
         N = 0;
         for (var q = o.atomStartIndex[H], W = o.atomEndIndex[H]; W > q; q++) N = Math.max(N, s(q, H, $)), B = Math.max(B, s(q, z, K)), V = Math.max(V, s(q, F, Z)), P = Math.max(P, u(q, A, $));
         N = Math.sqrt(N), M[H] = N
        }
        B = Math.sqrt(B), _[z] = B
       }
       V = Math.sqrt(V), v[F] = V
      }
      P = Math.sqrt(P);
      for (var J = 0, et = n; J < et.length; J++) {
       var q = et[J];
       I = Math.max(I, u(q, R, $))
      }
      return I = Math.sqrt(I), {
       entities: d.seal(),
       chains: y.seal(),
       residues: S.seal(),
       allAtoms: {
        center: A,
        radius: P
       },
       target: {
        center: R,
        radius: I
       }
      }
     }

     function m(e) {
      var t = e.boundingInfo,
       n = e.spacegroup,
       r = [];
      e.transform = P.identity(), r[0] = h(e);
      for (var i = -3; 3 >= i; i++)
       for (var a = -3; 3 >= a; a++)
        for (var s = -3; 3 >= s; s++)
         for (var u = 0 === i && 0 === a && 0 === s ? 1 : 0, l = n.operatorCount; l > u; u++) {
          n.getOperatorMatrix(u, i, a, s, e.transform), e.i = i, e.k = s, e.j = a, e.op = u;
          var p = c(e, t.allAtoms.center),
           d = o(p, t.allAtoms.radius, t.target);
          d < e.radius && (r[r.length] = h(e))
         }
      return r
     }

     function g(t, n) {
      for (var r = t.boundingInfo, i = t.radius, o = r.target, s = t.model, u = (s.atoms, s.residues), l = s.chains, c = s.entities, h = e.Utils.ChunkedArray.create(function(e) {
        return new Int32Array(e)
       }, t.model.residues.count, 1), p = e.Utils.ChunkedArray.create(function(e) {
        return new Int32Array(e)
       }, t.model.residues.count, 1), d = {
        x: 0,
        y: 0,
        z: 0
       }, f = 0, m = 0, g = 0, v = 0, y = 0, b = c.count; b > y; y++) {
       f = 0;
       for (var w = !1, x = 0, _ = n; x < _.length; x++) {
        for (var S = _[x], C = c.chainStartIndex[y], E = c.chainEndIndex[y]; E > C; C++)
         if (a(o, C, r.chains, S.transform, i, d)) {
          for (var T = !1, M = l.residueStartIndex[C], A = l.residueEndIndex[C]; A > M; M++) a(o, M, r.residues, S.transform, i, d) && (e.Utils.ChunkedArray.add(h, M), e.Utils.ChunkedArray.add(p, f), m += u.atomEndIndex[M] - u.atomStartIndex[M], T = !0);
          T && (g += 1, w = !0)
         } f++
       }
       w && v++
      }
      return {
       residues: e.Utils.ChunkedArray.compact(h),
       operators: e.Utils.ChunkedArray.compact(p),
       atomCount: m,
       chainCount: g,
       entityCount: v
      }
     }

     function v(e, t, n, r, i) {
      for (var o = 0; i > o; o++) n[o][r] = e[o][t]
     }

     function y(e, n, r) {
      for (var i, o, a, s, u, l, c, h = e.residues, p = h.chainIndex, d = h.entityIndex, f = h.atomStartIndex, m = h.atomEndIndex, g = e.atoms, y = g.x, w = g.y, x = g.z, _ = new t.DataTableBuilder(n.atomCount), S = [], C = e.entities.getBuilder(n.entityCount), E = C, T = e.entities.getRawData(), M = E.getRawData(), A = E.chainStartIndex, R = E.chainEndIndex, I = E.residueStartIndex, k = E.residueEndIndex, D = E.atomStartIndex, V = E.atomEndIndex, L = 0, B = e.chains.getBuilder(n.chainCount), O = B, N = e.chains.getRawData(), F = O.getRawData(), U = O.residueStartIndex, z = O.residueEndIndex, G = O.atomStartIndex, H = O.atomEndIndex, j = O.asymId, q = O.authAsymId, W = O.entityIndex, X = B.addColumn("sourceChainIndex", function(e) {
        return new Int32Array(e)
       }), Y = B.addColumn("operatorIndex", function(e) {
        return new Int32Array(e)
       }), Q = 0, Z = e.residues.getBuilder(n.residues.length), K = e.residues.getRawData(), $ = Z.getRawData(), J = Z.atomStartIndex, et = Z.atomEndIndex, tt = Z.asymId, nt = Z.authAsymId, rt = Z.chainIndex, it = Z.entityIndex, ot = 0, at = e.atoms.columns; ot < at.length; ot++) {
       var st = at[ot],
        ut = _.addColumn(st.name, st.creator);
       "x" === st.name ? i = ut : "y" === st.name ? o = ut : "z" === st.name ? a = ut : "residueIndex" === st.name ? u = ut : "chainIndex" === st.name ? l = ut : "entityIndex" === st.name ? c = ut : "id" === st.name ? s = ut : S[S.length] = {
        src: g[st.name],
        target: ut
       }
      }
      var lt, ct, ht = n.residues,
       pt = n.operators,
       dt = {
        x: 0,
        y: 0,
        z: 0
       },
       ft = 0,
       mt = ht[0],
       gt = p[mt],
       vt = d[mt],
       yt = pt[0];
      v(T, d[mt], M, 0, T.length), A[0] = 0, I[0] = 0, D[0] = 0, v(N, p[mt], F, 0, N.length), W[0] = 0, U[0] = 0, G[0] = 0, lt = e.chains.asymId[p[mt]], ct = e.chains.authAsymId[p[mt]];
      var bt = r[pt[0]];
      bt && !bt.isIdentity && (j[Q] = e.chains.asymId[p[mt]] + "-" + bt.id, q[Q] = e.chains.authAsymId[p[mt]] + "-" + bt.id, X[Q] = p[mt], Y[Q] = yt, lt = j[Q], ct = q[Q]);
      for (var wt = 0, xt = ht.length; xt > wt; wt++) {
       mt = ht[wt];
       var _t = pt[wt];
       bt = r[_t], v(K, mt, $, wt, $.length);
       var St = d[mt],
        Ct = p[mt],
        Et = !1;
       St !== vt ? (z[Q] = wt, H[Q] = ft, Q += 1, R[L] = Q, k[L] = wt, V[L] = ft, L += 1, v(T, St, M, L, T.length), A[L] = Q, I[L] = wt, D[L] = ft, Et = !0) : Ct !== gt ? (z[Q] = wt, H[Q] = ft, Q += 1, Et = !0) : _t !== yt && (z[Q] = wt, H[Q] = ft, Q += 1, Et = !0), Et && (v(N, Ct, F, Q, N.length), W[Q] = L, U[Q] = wt, G[Q] = ft, bt.isIdentity || (j[Q] = e.chains.asymId[Ct] + "-" + bt.id, q[Q] = e.chains.authAsymId[Ct] + "-" + bt.id), X[Q] = Ct, Y[Q] = _t, lt = j[Q], ct = q[Q]), gt = Ct, vt = St, yt = _t, rt[wt] = Q, it[wt] = L, J[wt] = ft, tt[wt] = lt, nt[wt] = ct;
       for (var Tt = f[mt], Mt = m[mt]; Mt > Tt; Tt++) {
        dt.x = y[Tt], dt.y = w[Tt], dt.z = x[Tt], P.transformVector3(dt, dt, bt.transform), i[ft] = dt.x, o[ft] = dt.y, a[ft] = dt.z, s[ft] = ft + 1, u[ft] = wt, l[ft] = Q, c[ft] = L;
        for (var At = 0, Pt = S; At < Pt.length; At++) {
         var ut = Pt[At];
         ut.target[ft] = ut.src[Tt]
        }
        ft++
       }
       et[wt] = ft
      }
      R[L] = Q + 1, k[L] = ht.length, V[L] = ft, z[Q] = ht.length, H[Q] = ft;
      var Rt = _.seal(),
       It = Z.seal(),
       kt = B.seal(),
       Dt = C.seal(),
       Vt = b(e, n, It);
      return new t.MoleculeModel({
       id: e.id,
       modelId: e.modelId,
       atoms: Rt,
       residues: It,
       chains: kt,
       entities: Dt,
       componentBonds: e.componentBonds,
       secondaryStructure: Vt,
       parent: e,
       source: t.MoleculeModelSource.Computed,
       operators: r.map(function(e) {
        return new t.Operator(e.transform, e.id, e.isIdentity)
       })
      })
     }

     function b(e, n, r) {
      for (var i = e.residues.secondaryStructureIndex, o = e.secondaryStructure, a = r.asymId, s = r.seqNumber, u = r.insCode, l = r.secondaryStructureIndex, c = n.residues, h = n.operators, p = c.length, d = [], f = 0; p > f;) {
       for (var m = f, g = i[c[f]], v = h[f]; p > m && h[m] == v && i[c[m]] == g;) m++;
       var y = o[g],
        b = new t.SecondaryStructureElement(y.type, new t.PolyResidueIdentifier(a[f], s[f], u[f]), new t.PolyResidueIdentifier(a[m - 1], s[m - 1], u[m - 1]), y.info);
       b.startResidueIndex = f, b.endResidueIndex = m;
       for (var w = d.length, x = f; m > x; x++) l[x] = w;
       d[w] = b, f = m
      }
      return d
     }

     function w(e, n, r) {
      var i = e.symmetryInfo;
      if (!i || "P 1" === i.spacegroupName || i.cellSize[0] < 1.1 && i.cellSize[1] < 1.1 && i.cellSize[2] < 1.1) return e;
      var o;
      o = r ? e.query(r).unionAtomIndices() : e.atoms.indices;
      var a = f(e, o),
       s = new t.Spacegroup(i),
       u = l(e, a, s, n),
       c = m(u),
       h = g(u, c);
      return y(e, h, c)
     }

     function x(e, n) {
      for (var i = r(e.atoms, e.atoms.indices), a = new t.Spacegroup(e.symmetryInfo), s = P.empty(), u = {
        x: 0,
        y: 0,
        z: 0
       }, l = [], c = -3; 3 >= c; c++)
       for (var h = -3; 3 >= h; h++)
        for (var d = -3; 3 >= d; d++)
         for (var f = 0; f < a.operatorCount; f++)
          if (a.getOperatorMatrix(f, c, h, d, s), P.transformVector3(u, i.center, s), !(o(u, i.radius, i) > n)) {
           var m = P.empty();
           P.copy(m, s), l.push(p(c, h, d, f, m))
          } return l
     }

     function _(t, n) {
      for (var r = t.atoms, i = (t.residues, t.chains), o = t.entities, a = e.Utils.ArrayBuilder.create(function(e) {
        return new Int32Array(e)
       }, t.residues.count * n.length, 1), s = e.Utils.ArrayBuilder.create(function(e) {
        return new Int32Array(e)
       }, t.residues.count * n.length, 1), u = 0, l = n.length * r.count, c = n.length * i.count, h = t.entities.count, p = 0, d = o.count; d > p; p++) {
       u = 0;
       for (var f = 0, m = n; f < m.length; f++) {
        for (var g = (m[f], o.chainStartIndex[p]), v = o.chainEndIndex[p]; v > g; g++)
         for (var y = i.residueStartIndex[g], b = i.residueEndIndex[g]; b > y; y++) e.Utils.ArrayBuilder.add(a, y), e.Utils.ArrayBuilder.add(s, u);
        u++
       }
      }
      return {
       residues: a.array,
       operators: s.array,
       atomCount: l,
       chainCount: c,
       entityCount: h
      }
     }

     function S(e, t) {
      var n = e.symmetryInfo;
      if (!n || "P 1" === n.spacegroupName || n.cellSize[0] < 1.1 && n.cellSize[1] < 1.1 && n.cellSize[2] < 1.1) return e;
      var r = x(e, t),
       i = _(e, r);
      return y(e, i, r)
     }

     function C(e, t, n, r) {
      if (0 > n) return t[t.length] = r.slice(0), void 0;
      for (var i = e[n], o = i.length, a = 0; o > a; a++) r[n] = i[a], C(e, t, n - 1, r)
     }

     function E(e, t) {
      for (var n = e.assemblyInfo, r = [], i = (P.empty(), 0), o = 0, a = t; o < a.length; o++) {
       for (var s = a[o], u = P.identity(), l = 0; l < s.length; l++) P.mul(u, u, n.operators[s[l]].operator);
       i++, r[r.length] = d(i, u)
      }
      return r
     }

     function T(t, n, r, i) {
      for (var o = (t.atoms, t.residues), a = t.chains, s = t.entities, u = i.residueIndices, l = i.operatorIndices, c = 0, h = 0, p = 0, d = 0, f = 0, m = s.count; m > f; f++) {
       c = i.transformsOffset;
       for (var g = !1, v = 0, y = r; v < y.length; v++) {
        for (var b = (y[v], s.chainStartIndex[f]), w = s.chainEndIndex[f]; w > b; b++) {
         for (var x = !1, _ = a.residueStartIndex[b], S = a.residueEndIndex[b]; S > _; _++) n[_] && (e.Utils.ChunkedArray.add(u, _), e.Utils.ChunkedArray.add(l, c), h += o.atomEndIndex[_] - o.atomStartIndex[_], x = !0);
         x && (p += 1, g = !0)
        }
        c++
       }
       g && d++
      }
      i.atomCount += h, i.chainCount += p, i.entityCount += d
     }

     function M(e, t, n) {
      for (var r = [], i = [], o = 0; o < t.operators.length; o++) i[o] = "";
      C(t.operators, r, t.operators.length - 1, i);
      var a = E(e, r);
      n.transformsOffset += n.transforms.length, (p = n.transforms).push.apply(p, a);
      var s = new Set;
      t.asymIds.forEach(function(e) {
       return s.add(e)
      });
      for (var u = e.residues.asymId, l = e.residues.count, c = n.mask, h = 0; l > h; h++) c[h] = s.has(u[h]);
      T(e, c, a, n);
      var p
     }

     function A(t, n) {
      for (var r = {
        atomCount: 0,
        chainCount: 0,
        entityCount: 0,
        transforms: [],
        transformsOffset: 0,
        mask: new Int8Array(t.residues.count),
        residueIndices: e.Utils.ChunkedArray.create(function(e) {
         return new Int32Array(e)
        }, t.residues.count, 1),
        operatorIndices: e.Utils.ChunkedArray.create(function(e) {
         return new Int32Array(e)
        }, t.residues.count, 1)
       }, i = 0, o = n.gens; i < o.length; i++) {
       var a = o[i];
       M(t, a, r)
      }
      var s = {
       residues: e.Utils.ChunkedArray.compact(r.residueIndices),
       operators: e.Utils.ChunkedArray.compact(r.operatorIndices),
       atomCount: r.atomCount,
       chainCount: r.chainCount,
       entityCount: r.entityCount
      };
      return y(t, s, r.transforms)
     }
     var P = e.Geometry.LinearAlgebra.Matrix4;
     n.buildPivotGroupSymmetry = w, n.buildMates = S, n.buildAssemblyEntry = M, n.buildAssembly = A
    }(o || (o = {})), t.buildPivotGroupSymmetry = n, t.buildSymmetryMates = r, t.buildAssembly = i
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     var n = function() {
      function t(e, t) {
       this.structure = e, this.mask = t
      }
      return Object.defineProperty(t.prototype, "atomCount", {
       get: function() {
        return this.mask.size
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(t.prototype, "isComplete", {
       get: function() {
        return this.mask.size === this.structure.atoms.count
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(t.prototype, "tree", {
       get: function() {
        return this.lazyTree || this.makeTree(), this.lazyTree
       },
       enumerable: !0,
       configurable: !0
      }), t.prototype.hasAtom = function(e) {
       return !!this.mask.has(e)
      }, t.prototype.hasRange = function(e, t) {
       for (var n = e; t > n; n++)
        if (this.mask.has(n)) return !0;
       return !1
      }, t.ofStructure = function(e) {
       return new t(e, t.Mask.ofStructure(e))
      }, t.ofFragments = function(e) {
       return new t(e.context.structure, t.Mask.ofFragments(e))
      }, t.ofAtomIndices = function(e, n) {
       return new t(e, t.Mask.ofIndices(e, n))
      }, t.prototype.makeTree = function() {
       for (var t = new Int32Array(this.mask.size), n = 0, r = this.structure.atoms, i = r.x, o = r.y, a = r.z, s = 0, u = this.structure.atoms.count; u > s; s++) this.mask.has(s) && (t[n++] = s);
       this.lazyTree = e.Geometry.SubdivisionTree3D.create(t, function(e, t) {
        return t(i[e], o[e], a[e])
       })
      }, t
     }();
     t.Context = n,
      function(e) {
       var t;
       ! function(e) {
        function t(e) {
         return new o(e.atoms.count)
        }

        function n(e, t) {
         var n = t.length / e.atoms.count;
         if (.25 > n) {
          for (var r = new Set, o = 0, a = t; o < a.length; o++) {
           var s = a[o];
           r.add(s)
          }
          return r
         }
         for (var u = new Int8Array(e.atoms.count), l = 0, c = t; l < c.length; l++) {
          var s = c[l];
          u[s] = 1
         }
         return new i(u, t.length)
        }

        function r(e) {
         for (var t = 0, n = 0, r = e.fragments; n < r.length; n++) {
          var o = r[n];
          t += o.atomCount
         }
         var a = e.context.structure.atoms.count;
         if (.25 > t / a) {
          for (var s = new Set, u = 0, l = e.fragments; u < l.length; u++)
           for (var o = l[u], c = 0, h = o.atomIndices; c < h.length; c++) {
            var p = h[c];
            s.add(p)
           }
          return s
         }
         for (var s = new Int8Array(a), d = 0, f = e.fragments; d < f.length; d++)
          for (var o = f[d], m = 0, g = o.atomIndices; m < g.length; m++) {
           var p = g[m];
           s[p] = 1
          }
         for (var v = 0, p = 0; a > p; p++) 0 !== s[p] && v++;
         return new i(s, v)
        }
        var i = function() {
          function e(e, t) {
           this.mask = e, this.size = t
          }
          return e.prototype.has = function(e) {
           return this.mask[e]
          }, e
         }(),
         o = function() {
          function e(e) {
           this.size = e
          }
          return e.prototype.has = function() {
           return !0
          }, e
         }();
        e.ofStructure = t, e.ofIndices = n, e.ofFragments = r
       }(t = e.Mask || (e.Mask = {}))
      }(n = t.Context || (t.Context = {}));
     var r = function() {
      function r(e, t, n) {
       this._hashCode = 0, this._hashComputed = !1, this.context = e, this.tag = t, this.atomIndices = n
      }
      return Object.defineProperty(r.prototype, "hashCode", {
       get: function() {
        if (this._hashComputed) return this._hashCode;
        for (var e = 23, t = 0, n = this.atomIndices; t < n.length; t++) {
         var r = n[t];
         e = 31 * e + r | 0
        }
        return this._hashCode = e, this._hashComputed = !0, e
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "id", {
       get: function() {
        return this.context.structure.id + "_" + this.tag
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "atomCount", {
       get: function() {
        return this.atomIndices.length
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "isHet", {
       get: function() {
        var e = this.context.structure.atoms.residueIndex[this.tag];
        return this.context.structure.residues.isHet[e]
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "fingerprint", {
       get: function() {
        if (this._fingerprint) return this._fingerprint;
        for (var e = this.residueIndices, t = (this.context.structure, this.context.structure.residues), n = t.name, r = t.asymId, i = t.seqNumber, o = t.insCode, a = [], s = 0, u = e; s < u.length; s++) {
         var l = u[s],
          c = n[l] + " " + r[l] + " " + i[l];
         o[l] && (c += " i:" + o[l]), a[a.length] = c
        }
        return a.join("-")
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "authFingerprint", {
       get: function() {
        if (this._authFingerprint) return this._authFingerprint;
        for (var e = this.residueIndices, t = (this.context.structure, this.context.structure.residues), n = t.authName, r = t.authAsymId, i = t.authSeqNumber, o = t.insCode, a = [], s = 0, u = e; s < u.length; s++) {
         var l = u[s],
          c = n[l] + " " + r[l] + " " + i[l];
         o[l] && (c += " i:" + o[l]), a[a.length] = c
        }
        return a.join("-")
       },
       enumerable: !0,
       configurable: !0
      }), r.prototype.find = function(e) {
       var r = n.ofFragments(new i(this.context, [this]));
       return t.Builder.toQuery(e)(r)
      }, r.prototype.computeIndices = function() {
       if (!this._residueIndices) {
        for (var t = new Set, n = new Set, r = new Set, i = this.context.structure.atoms.residueIndex, o = this.context.structure.residues.chainIndex, a = this.context.structure.chains.entityIndex, s = 0, u = this.atomIndices; s < u.length; s++) {
         var l = u[s];
         t.add(i[l])
        }
        this._residueIndices = e.Utils.integerSetToSortedTypedArray(t);
        for (var c = 0, h = this._residueIndices; c < h.length; c++) {
         var l = h[c];
         n.add(o[l])
        }
        this._chainIndices = e.Utils.integerSetToSortedTypedArray(n);
        for (var p = 0, d = this._chainIndices; p < d.length; p++) {
         var l = d[p];
         r.add(a[l])
        }
        this._entityIndices = e.Utils.integerSetToSortedTypedArray(r)
       }
      }, Object.defineProperty(r.prototype, "residueIndices", {
       get: function() {
        return this.computeIndices(), this._residueIndices
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "chainIndices", {
       get: function() {
        return this.computeIndices(), this._chainIndices
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "entityIndices", {
       get: function() {
        return this.computeIndices(), this._entityIndices
       },
       enumerable: !0,
       configurable: !0
      }), r.areEqual = function(e, t) {
       if (e.atomCount !== t.atomCount) return !1;
       for (var n = e.atomIndices, r = t.atomIndices, i = 0; i < n.length; i++)
        if (n[i] !== r[i]) return !1;
       return e.tag === t.tag
      }, r.ofSet = function(e, t) {
       var n = new Int32Array(t.size);
       return t.forEach(function(e) {
        this.array[this.index++] = e
       }, {
        array: n,
        index: 0
       }), Array.prototype.sort.call(n, function(e, t) {
        return e - t
       }), new r(e, n[0], n)
      }, r.ofArray = function(e, t, n) {
       return new r(e, t, n)
      }, r.ofIndex = function(e, t) {
       var n = new Int32Array(1);
       return n[0] = t, new r(e, t, n)
      }, r.ofIndexRange = function(e, t, n) {
       for (var i = 0, o = t; n > o; o++) e.hasAtom(o) && i++;
       for (var a = new Int32Array(i), s = 0, o = t; n > o; o++) e.hasAtom(o) && (a[s++] = o);
       return new r(e, t, a)
      }, r
     }();
     t.Fragment = r;
     var i = function() {
      function e(e, t) {
       this.context = e, this.fragments = t
      }
      return e.empty = function(t) {
       return new e(t, [])
      }, Object.defineProperty(e.prototype, "length", {
       get: function() {
        return this.fragments.length
       },
       enumerable: !0,
       configurable: !0
      }), e.prototype.unionAtomIndices = function() {
       if (!this.length) return [];
       if (1 === this.length) return this.fragments[0].atomIndices;
       for (var e = new Int8Array(this.context.structure.atoms.count), t = 0, n = 0, r = this.fragments; n < r.length; n++)
        for (var i = r[n], o = 0, a = i.atomIndices; o < a.length; o++) {
         var s = a[o];
         e[s] = 1
        }
       for (var u = 0, l = e; u < l.length; u++) {
        var s = l[u];
        t += s
       }
       for (var c = new Int32Array(t), h = 0, s = 0, p = e.length; p > s; s++) e[s] && (c[h++] = s);
       return c
      }, e.prototype.unionFragment = function() {
       if (!this.length) return new r(this.context, 0, new Int32Array(0));
       if (1 === this.length) return this.fragments[0];
       var e = this.unionAtomIndices();
       return new r(this.context, e[0], e)
      }, e
     }();
     t.FragmentSeq = i;
     var o = function() {
      function e(e) {
       this.ctx = e, this.fragments = []
      }
      return e.prototype.add = function(e) {
       this.fragments[this.fragments.length] = e
      }, e.prototype.getSeq = function() {
       return new i(this.ctx, this.fragments)
      }, e
     }();
     t.FragmentSeqBuilder = o;
     var a = function() {
      function e(e) {
       this.ctx = e, this.fragments = [], this.byHash = new Map
      }
      return e.prototype.add = function(e) {
       var t = e.hashCode;
       if (this.byHash.has(t)) {
        for (var n = this.byHash.get(t), i = 0, o = n; i < o.length; i++) {
         var a = o[i];
         if (r.areEqual(e, a)) return this
        }
        this.fragments[this.fragments.length] = e, n[n.length] = e
       } else this.fragments[this.fragments.length] = e, this.byHash.set(t, [e]);
       return this
      }, e.prototype.getSeq = function() {
       return new i(this.ctx, this.fragments)
      }, e
     }();
     t.HashFragmentSeqBuilder = a
    }(n = t.Query || (t.Query = {}))
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtoms(e, function(e) {
        return e.atoms.elementSymbol
       })
      })
     }

     function i() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtoms(e, function(e) {
        return e.atoms.name
       })
      })
     }

     function o() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtoms(e, function(e) {
        return e.atoms.id
       })
      })
     }

     function a() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtomRanges(!1, e, function(e) {
        return e.residues
       })
      })
     }

     function s() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtomRanges(!1, e, function(e) {
        return e.chains
       })
      })
     }

     function u() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtomRanges(!1, e, function(e) {
        return e.entities
       })
      })
     }

     function l() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileAtomRanges(!0, e, function(e) {
        return e.entities
       })
      })
     }

     function c() {
      return V.build(function() {
       return L.compileEverything()
      })
     }

     function h(e) {
      return V.build(function() {
       return L.compileFromIndices(!1, e, function(e) {
        return e.entities
       })
      })
     }

     function p(e) {
      return V.build(function() {
       return L.compileFromIndices(!1, e, function(e) {
        return e.chains
       })
      })
     }

     function d(e) {
      return V.build(function() {
       return L.compileFromIndices(!1, e, function(e) {
        return e.residues
       })
      })
     }

     function f(e) {
      return V.build(function() {
       return L.compileAtomIndices(e)
      })
     }

     function m(e, t, n, r) {
      return V.build(function() {
       return L.compileSequence(e, t, n, r)
      })
     }

     function g() {
      return V.build(function() {
       return L.compileHetGroups()
      })
     }

     function v() {
      return V.build(function() {
       return L.compileNonHetPolymer()
      })
     }

     function y() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compilePolymerNames(e, !1)
      })
     }

     function b() {
      return S(V.build(function() {
       return L.compilePolymerNames(["CA", "O", "O5'", "C3'", "N3"], !1)
      }), g(), u({
       type: "water"
      }))
     }

     function w() {
      return V.build(function() {
       return L.compilePolymerNames(["N", "CA", "C", "O", "P", "OP1", "OP2", "O3'", "O5'", "C3'", "C5'", "C4"], !1)
      })
     }

     function x() {
      return V.build(function() {
       return L.compilePolymerNames(["N", "CA", "C", "O", "P", "OP1", "OP2", "O3'", "O5'", "C3'", "C5'", "C4"], !0)
      })
     }

     function _(e, t) {
      return V.build(function() {
       return L.compileAtomsInBox(e, t)
      })
     }

     function S() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return V.build(function() {
       return L.compileOr(e)
      })
     }

     function C(e) {
      return V.build(function() {
       return L.compileComplement(e)
      })
     }

     function E(e, t) {
      return V.build(function() {
       return L.compileAmbientResidues(e, t)
      })
     }

     function T(e) {
      return V.build(function() {
       return L.compileWholeResidues(e)
      })
     }

     function M(e) {
      return V.build(function() {
       return L.compileUnion(e)
      })
     }

     function A(e, t) {
      return V.build(function() {
       return L.compileInside(e, t)
      })
     }

     function P(e, t) {
      return V.build(function() {
       return L.compileIntersectWith(e, t)
      })
     }

     function R(e, t) {
      return V.build(function() {
       return L.compileFlatten(e, t)
      })
     }

     function I() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return a.apply(void 0, e.map(function(e) {
       return {
        name: e
       }
      }))
     }

     function k() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return a.apply(void 0, e.map(function(e) {
       return {
        authSeqNumber: e
       }
      }))
     }

     function D() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return s.apply(void 0, e.map(function(e) {
       return {
        authAsymId: e
       }
      }))
     }
     var V;
     ! function(e) {
      function t(t, n) {
       e.BuilderPrototype[t] = function() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        return n.call.apply(n, [void 0, this].concat(e))
       }
      }

      function n(t) {
       return Object.create(e.BuilderPrototype, {
        compile: {
         writable: !1,
         configurable: !1,
         value: t
        }
       })
      }

      function r(e) {
       return !!e.compile
      }

      function i(e) {
       if ("undefined" == typeof window) throw "parse can only be called from a browser.";
       (void 0, eval)("with (LiteMol.Core.Structure.Query) { window.__LiteMol_query = " + e + "; }");
       var t = window.__LiteMol_query;
       return window.__LiteMol_query = void 0, t.compile()
      }

      function o(e) {
       var t;
       return t = r(e) ? e.compile() : "string" == typeof e || e instanceof String ? i(e) : e
      }
      e.BuilderPrototype = {}, e.registerModifier = t, e.build = n, e.parse = i, e.toQuery = o
     }(V = n.Builder || (n.Builder = {})), n.atomsByElement = r, n.atomsByName = i, n.atomsById = o, n.residues = a, n.chains = s, n.entities = u, n.notEntities = l, n.everything = c, n.entitiesFromIndices = h, n.chainsFromIndices = p, n.residuesFromIndices = d, n.atomsFromIndices = f, n.sequence = m, n.hetGroups = g, n.nonHetPolymer = v, n.polymerTrace = y, n.cartoons = b, n.backbone = w, n.sidechain = x, n.atomsInBox = _, n.or = S, V.registerModifier("complement", C), n.complement = C, V.registerModifier("ambientResidues", E), n.ambientResidues = E, V.registerModifier("wholeResidues", T), n.wholeResidues = T, V.registerModifier("union", M), n.union = M, V.registerModifier("inside", A), n.inside = A, V.registerModifier("intersectWith", P), n.intersectWith = P, V.registerModifier("flatten", R), n.flatten = R, n.residuesByName = I, n.residuesById = k, n.chainsById = D;
     var L;
     ! function(r) {
      function i() {
       return function(e) {
        if (e.isComplete) {
         var t = e.structure.atoms.indices;
         return new n.FragmentSeq(e, [new n.Fragment(e, t[0], t)])
        }
        for (var r = new Int32Array(e.atomCount), i = 0, o = 0, a = e.structure.atoms.indices; o < a.length; o++) {
         var s = a[o];
         e.hasAtom(s) && (r[i++] = s)
        }
        return new n.FragmentSeq(e, [n.Fragment.ofArray(e, r[0], r)])
       }
      }

      function o(e, t) {
       return function(r) {
        for (var i = new Set(e), o = t(r.structure), a = new n.FragmentSeqBuilder(r), s = 0, u = o.length; u > s; s++) r.hasAtom(s) && i.has(o[s]) && a.add(n.Fragment.ofIndex(r, s));
        return a.getSeq()
       }
      }

      function a(e) {
       return function(t) {
        for (var r = 0, i = 0, o = e; i < o.length; i++) {
         var a = o[i];
         t.hasAtom(a) && r++
        }
        if (!r) return n.FragmentSeq.empty(t);
        for (var s = 0, u = new Int32Array(r), l = 0, c = e; l < c.length; l++) {
         var a = c[l];
         t.hasAtom(a) && (u[s++] = a)
        }
        return new n.FragmentSeq(t, [n.Fragment.ofArray(t, u[0], u)])
       }
      }

      function s(e, t, r) {
       return function(i) {
        var o = r(i.structure),
         a = o.atomStartIndex,
         s = o.atomEndIndex,
         u = new n.FragmentSeqBuilder(i);
        if (e)
         for (var l = new Set(t), c = o.count, h = 0; c > h; h++) l.has(h) || i.hasRange(a[h], s[h]) && u.add(n.Fragment.ofIndexRange(i, a[h], s[h]));
        else
         for (var p = 0, d = t; p < d.length; p++) {
          var h = d[p];
          i.hasRange(a[h], s[h]) && u.add(n.Fragment.ofIndexRange(i, a[h], s[h]))
         }
        return u.getSeq()
       }
      }

      function u(e, t, r) {
       return function(i) {
        for (var o = r(i.structure), a = o.atomStartIndex, s = o.atomEndIndex, u = new n.FragmentSeqBuilder(i), l = o.count, c = !1, h = t.map(function(e) {
          return new C(e, o)
         }), p = 0 === h.length, d = 0; l > d; d++)
         if (i.hasRange(a[d], s[d])) {
          c = p;
          for (var f = 0, m = h; f < m.length; f++) {
           var g = m[f];
           if (g.isSatisfied(d)) {
            c = !0;
            break
           }
          }
          e && (c = !c), c && u.add(n.Fragment.ofIndexRange(i, a[d], s[d]))
         } return u.getSeq()
       }
      }

      function l(e, t, r, i) {
       return function(o) {
        for (var a = o.structure.residues, s = o.structure.chains, u = a.seqNumber, l = (a.insCode, a.chainIndex, a.atomStartIndex), c = a.atomEndIndex, h = s.entityId, p = (s.asymId, s.count), d = s.residueStartIndex, f = s.residueEndIndex, m = new n.FragmentSeqBuilder(o), g = o.structure.parent, v = o.structure.chains.sourceChainIndex, y = g && v, b = "string" == typeof t ? {
          asymId: t
         } : t, w = new C(b, y ? g.chains : o.structure.chains), x = 0; p > x; x++)
         if (h[x] === e && w.isSatisfied(y ? v[x] : x)) {
          for (var _ = d[x], S = f[x], E = -1, T = -1; S > _; _++)
           if (u[_] >= r.seqNumber) {
            E = _;
            break
           } if (_ !== S) {
           for (_ = E; S > _ && !(u[_] >= i.seqNumber); _++);
           T = _, o.hasRange(l[E], c[T]) && m.add(n.Fragment.ofIndexRange(o, l[E], c[T]))
          }
         } return m.getSeq()
       }
      }

      function c() {
       return function(e) {
        for (var r = e.structure.residues, i = r.atomStartIndex, o = r.atomEndIndex, a = r.isHet, s = r.entityIndex, u = r.count, l = e.structure.entities.entityType, c = t.EntityType.Water, h = new n.FragmentSeqBuilder(e), p = 0; u > p; p++) e.hasRange(i[p], o[p]) && l[s[p]] !== c && a[p] && h.add(n.Fragment.ofIndexRange(e, i[p], o[p]));
        return h.getSeq()
       }
      }

      function h() {
       return function(e) {
        for (var r = e.structure.residues, i = r.atomStartIndex, o = r.atomEndIndex, a = (r.isHet, r.entityIndex, r.count, e.structure.entities), s = a.entityType, u = a.count, l = a.residueStartIndex, c = a.residueEndIndex, h = t.EntityType.Polymer, p = 0, d = 0; u > d; d++)
         if (s[d] === h)
          for (var f = l[d], m = c[d]; m > f; f++)
           for (var g = i[f], v = o[f]; v > g; g++) e.hasAtom(g) && p++;
        if (!p) return n.FragmentSeq.empty(e);
        for (var y = new Int32Array(p), b = 0, d = 0; u > d; d++)
         if (s[d] === h)
          for (var f = l[d], m = c[d]; m > f; f++)
           for (var g = i[f], v = o[f]; v > g; g++) e.hasAtom(g) && (y[b++] = g);
        return new n.FragmentSeq(e, [n.Fragment.ofArray(e, y[0], y)])
       }
      }

      function p(e, t) {
       return function(r) {
        for (var i = r.structure.atoms, o = i.x, a = i.y, s = i.z, u = i.count, l = [], c = 0; u > c; c++)
         if (r.hasAtom(c)) {
          var h = o[c],
           p = a[c],
           d = s[c];
          h >= e.x && h <= t.x && p >= e.y && p <= t.y && d >= e.z && d <= t.z && (l[l.length] = c)
         } return l.length ? new n.FragmentSeq(r, [new n.Fragment(r, l[0], l)]) : n.FragmentSeq.empty(r)
       }
      }

      function d(e, t) {
       var r = V.toQuery(e),
        i = V.toQuery(t);
       return function(e) {
        return new n.FragmentSeq(e, r(n.Context.ofFragments(i(e))).fragments)
       }
      }

      function f(e, t, r) {
       for (var i = 0, o = 0, a = t.atomIndices; o < a.length; o++) {
        var s = a[o];
        r.has(s) && i++
       }
       if (!i) return void 0;
       for (var u = new Int32Array(i), l = 0, c = 0, h = t.atomIndices; c < h.length; c++) {
        var s = h[c];
        r.has(s) && (u[l++] = s)
       }
       return n.Fragment.ofArray(e, u[0], u)
      }

      function m(e, t) {
       var r = V.toQuery(e),
        i = V.toQuery(t);
       return function(e) {
        for (var t = r(e), o = n.Context.Mask.ofFragments(i(e)), a = new n.FragmentSeqBuilder(e), s = 0, u = t.fragments; s < u.length; s++) {
         var l = u[s],
          c = f(e, l, o);
         c && a.add(c)
        }
        return a.getSeq()
       }
      }

      function g(e, t) {
       var r = V.toQuery(e);
       return function(e) {
        for (var i, o = r(e).fragments, a = new n.FragmentSeqBuilder(e), s = 0; s < o.length; s++) i = o[s], t(i) && a.add(i);
        return a.getSeq()
       }
      }

      function v(e) {
       var t = V.toQuery(e);
       return function(e) {
        for (var r = n.Context.Mask.ofFragments(t(e)), i = 0, o = 0, a = 0, s = e.structure.atoms.count; s > a; a++) e.hasAtom(a) && !r.has(a) && i++;
        if (!i) return n.FragmentSeq.empty(e);
        for (var u = new Int32Array(i), a = 0, s = e.structure.atoms.count; s > a; a++) e.hasAtom(a) && !r.has(a) && (u[o++] = a);
        return new n.FragmentSeq(e, [n.Fragment.ofArray(e, u[0], u)])
       }
      }

      function y(e) {
       var t = e.map(function(e) {
        return V.toQuery(e)
       });
       return function(e) {
        for (var r = new n.HashFragmentSeqBuilder(e), i = 0, o = t; i < o.length; i++)
         for (var a = o[i], s = a(e), u = 0, l = s.fragments; u < l.length; u++) {
          var c = l[u];
          r.add(c)
         }
        return r.getSeq()
       }
      }

      function b(e) {
       var t = V.toQuery(e);
       return function(e) {
        for (var r, i = t(e).fragments, o = new Set, a = 0, s = 0; s < i.length; s++)
         for (r = i[s].atomIndices, a = 0; a < r.length; a++) o.add(r[a]);
        return 0 === o.size ? n.FragmentSeq.empty(e) : new n.FragmentSeq(e, [n.Fragment.ofSet(e, o)])
       }
      }

      function w(e, r) {
       return function(i) {
        var o = i.structure,
         a = o.atoms.name,
         s = [],
         u = 0,
         l = new Set(e);
        if (r) {
         for (var c = 0; c < o.entities.count; c++)
          if (o.entities.entityType[c] === t.EntityType.Polymer)
           for (var h = o.entities.atomStartIndex[c], p = o.entities.atomEndIndex[c], d = h; p > d; d++) i.hasAtom(d) && !l.has(a[d]) && (s[u++] = d)
        } else
         for (var c = 0; c < o.entities.count; c++)
          if (o.entities.entityType[c] === t.EntityType.Polymer)
           for (var h = o.entities.atomStartIndex[c], p = o.entities.atomEndIndex[c], d = h; p > d; d++) i.hasAtom(d) && l.has(a[d]) && (s[u++] = d);
        return s.length ? new n.FragmentSeq(i, [n.Fragment.ofArray(i, s[0], new Int32Array(s))]) : n.FragmentSeq.empty(i)
       }
      }

      function x(t, r) {
       var i = V.toQuery(t);
       return function(t) {
        for (var o = i(t), a = t.tree, s = e.Geometry.SubdivisionTree3D.createContextRadius(a, r, !1), u = s.buffer, l = new n.HashFragmentSeqBuilder(t), c = t.structure.atoms.x, h = t.structure.atoms.y, p = t.structure.atoms.z, d = t.structure.atoms.residueIndex, f = t.structure.residues.atomStartIndex, m = t.structure.residues.atomEndIndex, g = new Set, v = a.data, y = function(e) {
          g.clear();
          for (var i = 0, o = e.atomIndices; i < o.length; i++) {
           var a = o[i];
           g.add(d[a]), s.nearest(c[a], h[a], p[a], r);
           for (var y = 0, b = u.count; b > y; y++) g.add(d[v[u.indices[y]]])
          }
          var w = {
           count: 0,
           start: f,
           end: m
          };
          g.forEach(function(e) {
           this.count += this.end[e] - this.start[e]
          }, w);
          var x = new Int32Array(w.count),
           _ = {
            indices: x,
            offset: 0,
            start: f,
            end: m
           };
          g.forEach(function(e) {
           for (var t = this.start[e], n = this.end[e]; n > t; t++) this.indices[this.offset++] = t
          }, _), Array.prototype.sort.call(x, function(e, t) {
           return e - t
          }), l.add(n.Fragment.ofArray(t, x[0], x))
         }, b = 0, w = o.fragments; b < w.length; b++) {
         var x = w[b];
         y(x)
        }
        return l.getSeq()
       }
      }

      function _(e) {
       var t = V.toQuery(e);
       return function(e) {
        for (var r = t(e), i = new n.HashFragmentSeqBuilder(e), o = e.structure.atoms.residueIndex, a = e.structure.residues.atomStartIndex, s = e.structure.residues.atomEndIndex, u = new Set, l = function(t) {
          u.clear();
          for (var r = 0, l = t.atomIndices; r < l.length; r++) {
           var c = l[r];
           u.add(o[c])
          }
          var h = {
           count: 0,
           start: a,
           end: s
          };
          u.forEach(function(e) {
           this.count += this.end[e] - this.start[e]
          }, h);
          var p = new Int32Array(h.count),
           d = {
            indices: p,
            offset: 0,
            start: a,
            end: s
           };
          u.forEach(function(e) {
           for (var t = this.start[e], n = this.end[e]; n > t; t++) this.indices[this.offset++] = t
          }, d), Array.prototype.sort.call(p, function(e, t) {
           return e - t
          }), i.add(n.Fragment.ofArray(e, p[0], p))
         }, c = 0, h = r.fragments; c < h.length; c++) {
         var p = h[c];
         l(p)
        }
        return i.getSeq()
       }
      }

      function S(e, t) {
       var r = V.toQuery(e);
       return function(e) {
        for (var i = r(e), o = new n.HashFragmentSeqBuilder(e), a = 0, s = i.fragments; a < s.length; a++)
         for (var u = s[a], l = t(u), c = 0, h = l.fragments; c < h.length; c++) {
          var p = h[c];
          o.add(p)
         }
        return o.getSeq()
       }
      }
      var C = function() {
       function e(e, t) {
        this.columns = [];
        for (var n = 0, r = Object.keys(e); n < r.length; n++) {
         var i = r[n];
         void 0 !== e[i] && t[i] && this.columns.push({
          value: e[i],
          array: t[i]
         })
        }
       }
       return e.prototype.isSatisfied = function(e) {
        for (var t = 0, n = this.columns; t < n.length; t++) {
         var r = n[t];
         if (r.value !== r.array[e]) return !1
        }
        return !0
       }, e
      }();
      r.compileEverything = i, r.compileAtoms = o, r.compileAtomIndices = a, r.compileFromIndices = s, r.compileAtomRanges = u, r.compileSequence = l, r.compileHetGroups = c, r.compileNonHetPolymer = h, r.compileAtomsInBox = p, r.compileInside = d, r.compileIntersectWith = m, r.compileFilter = g, r.compileComplement = v, r.compileOr = y, r.compileUnion = b, r.compilePolymerNames = w, r.compileAmbientResidues = x, r.compileWholeResidues = _, r.compileFlatten = S
     }(L = n.Compiler || (n.Compiler = {}))
    }(n = t.Query || (t.Query = {}))
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     var t;
     ! function(t) {
      function n(e) {
       return function(t) {
        return function(n, r) {
         return e(t(n, r))
        }
       }
      }

      function r(e) {
       return function(t, n) {
        return function(r, i) {
         return e(t(r, i), n(r, i))
        }
       }
      }

      function i(e) {
       return function(t, n) {
        return function(r, i) {
         return e(t(r, i), n(r, i))
        }
       }
      }

      function o(e, t, n) {
       return function(r, i) {
        var o = e(r, i);
        return o >= t && n >= o
       }
      }

      function a(e) {
       return function() {
        return e
       }
      }

      function s(e, t, n) {
       return function(r, i) {
        var o = r.structure;
        return n(t(o))[e(o.atoms)[i]]
       }
      }

      function u(t) {
       return e.Builder.build(function() {
        return function(n) {
         for (var r = [], i = 0, o = n.structure.atoms.count; o > i; i++) n.hasAtom(i) && t(n, i) && (r[r.length] = i);
         return r.length ? new e.FragmentSeq(n, [e.Fragment.ofArray(n, r[0], new Int32Array(r))]) : e.FragmentSeq.empty(n)
        }
       })
      }
      t.not = n(function(e) {
       return !e
      }), t.and = r(function(e, t) {
       return e && t
      }), t.or = r(function(e, t) {
       return e || t
      });
      var l = new Set(["N", "CA", "C", "O", "P", "OP1", "OP2", "O3'", "O5'", "C3'", "C5'", "C4"]);
      t.backbone = function(e, n) {
       return "polymer" === t.entityType(e, n) && l.has(t.atomName(e, n))
      }, t.sidechain = function(e, n) {
       return "polymer" === t.entityType(e, n) && !l.has(t.atomName(e, n))
      }, t.equal = i(function(e, t) {
       return e === t
      }), t.notEqual = i(function(e, t) {
       return e !== t
      }), t.greater = i(function(e, t) {
       return e > t
      }), t.lesser = i(function(e, t) {
       return t > e
      }), t.greaterEqual = i(function(e, t) {
       return e >= t
      }), t.lesserEqual = i(function(e, t) {
       return t >= e
      }), t.inRange = o, t.value = a, t.residueSeqNumber = s(function(e) {
       return e.residueIndex
      }, function(e) {
       return e.residues
      }, function(e) {
       return e.seqNumber
      }), t.residueName = s(function(e) {
       return e.residueIndex
      }, function(e) {
       return e.residues
      }, function(e) {
       return e.name
      }), t.elementSymbol = s(function(e) {
       return e.indices
      }, function(e) {
       return e.atoms
      }, function(e) {
       return e.elementSymbol
      }), t.atomName = s(function(e) {
       return e.indices
      }, function(e) {
       return e.atoms
      }, function(e) {
       return e.name
      }), t.entityType = s(function(e) {
       return e.entityIndex
      }, function(e) {
       return e.entities
      }, function(e) {
       return e.type
      }), t.query = u
     }(t = e.Algebraic || (e.Algebraic = {}))
    }(t = e.Query || (e.Query = {}))
   }(t = e.Structure || (e.Structure = {}))
  }(t = e.Core || (e.Core = {}))
 }(a || (a = {}));
 var a, u = function() {
   var e = {
    REVISION: "71"
   };
   return void 0 === Math.sign && (Math.sign = function(e) {
     return 0 > e ? -1 : e > 0 ? 1 : +e
    }), e.log = function() {
     console.log.apply(console, arguments)
    }, e.warn = function() {
     console.warn.apply(console, arguments)
    }, e.error = function() {
     console.error.apply(console, arguments)
    }, e.MOUSE = {
     LEFT: 0,
     MIDDLE: 1,
     RIGHT: 2
    }, e.CullFaceNone = 0, e.CullFaceBack = 1, e.CullFaceFront = 2, e.CullFaceFrontBack = 3, e.FrontFaceDirectionCW = 0, e.FrontFaceDirectionCCW = 1, e.BasicShadowMap = 0, e.PCFShadowMap = 1, e.PCFSoftShadowMap = 2, e.FrontSide = 0, e.BackSide = 1, e.DoubleSide = 2, e.NoShading = 0, e.FlatShading = 1, e.SmoothShading = 2, e.NoColors = 0, e.FaceColors = 1, e.VertexColors = 2, e.NoBlending = 0, e.NormalBlending = 1, e.AdditiveBlending = 2, e.SubtractiveBlending = 3, e.MultiplyBlending = 4, e.CustomBlending = 5, e.AddEquation = 100, e.SubtractEquation = 101, e.ReverseSubtractEquation = 102, e.MinEquation = 103, e.MaxEquation = 104, e.ZeroFactor = 200, e.OneFactor = 201, e.SrcColorFactor = 202, e.OneMinusSrcColorFactor = 203, e.SrcAlphaFactor = 204, e.OneMinusSrcAlphaFactor = 205, e.DstAlphaFactor = 206, e.OneMinusDstAlphaFactor = 207, e.DstColorFactor = 208, e.OneMinusDstColorFactor = 209, e.SrcAlphaSaturateFactor = 210, e.MultiplyOperation = 0, e.MixOperation = 1, e.AddOperation = 2, e.UVMapping = 300, e.CubeReflectionMapping = 301, e.CubeRefractionMapping = 302, e.EquirectangularReflectionMapping = 303, e.EquirectangularRefractionMapping = 304, e.SphericalReflectionMapping = 305, e.RepeatWrapping = 1e3, e.ClampToEdgeWrapping = 1001, e.MirroredRepeatWrapping = 1002, e.NearestFilter = 1003, e.NearestMipMapNearestFilter = 1004, e.NearestMipMapLinearFilter = 1005, e.LinearFilter = 1006, e.LinearMipMapNearestFilter = 1007, e.LinearMipMapLinearFilter = 1008, e.UnsignedByteType = 1009, e.ByteType = 1010, e.ShortType = 1011, e.UnsignedShortType = 1012, e.IntType = 1013, e.UnsignedIntType = 1014, e.FloatType = 1015, e.HalfFloatType = 1025, e.UnsignedShort4444Type = 1016, e.UnsignedShort5551Type = 1017, e.UnsignedShort565Type = 1018, e.AlphaFormat = 1019, e.RGBFormat = 1020, e.RGBAFormat = 1021, e.LuminanceFormat = 1022, e.LuminanceAlphaFormat = 1023, e.RGBEFormat = e.RGBAFormat, e.RGB_S3TC_DXT1_Format = 2001, e.RGBA_S3TC_DXT1_Format = 2002, e.RGBA_S3TC_DXT3_Format = 2003, e.RGBA_S3TC_DXT5_Format = 2004, e.RGB_PVRTC_4BPPV1_Format = 2100, e.RGB_PVRTC_2BPPV1_Format = 2101, e.RGBA_PVRTC_4BPPV1_Format = 2102, e.RGBA_PVRTC_2BPPV1_Format = 2103, e.Projector = function() {
     e.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function(t, n) {
      e.warn("THREE.Projector: .projectVector() is now vector.project()."), t.project(n)
     }, this.unprojectVector = function(t, n) {
      e.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), t.unproject(n)
     }, this.pickingRay = function() {
      e.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
     }
    }, e.CanvasRenderer = function() {
     e.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function() {}, this.render = function() {}, this.setClearColor = function() {}, this.setSize = function() {}
    }, e.Color = function(e) {
     return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(e)
    }, e.Color.prototype = {
     constructor: e.Color,
     r: 1,
     g: 1,
     b: 1,
     set: function(t) {
      return t instanceof e.Color ? this.copy(t) : "number" == typeof t ? this.setHex(t) : "string" == typeof t && this.setStyle(t), this
     },
     setHex: function(e) {
      return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this
     },
     setRGB: function(e, t, n) {
      return this.r = e, this.g = t, this.b = n, this
     },
     setHSL: function(e, t, n) {
      if (0 === t) this.r = this.g = this.b = n;
      else {
       var r = function(e, t, n) {
         return 0 > n && (n += 1), n > 1 && (n -= 1), 1 / 6 > n ? e + 6 * (t - e) * n : .5 > n ? t : 2 / 3 > n ? e + 6 * (t - e) * (2 / 3 - n) : e
        },
        i = .5 >= n ? n * (1 + t) : n + t - n * t,
        o = 2 * n - i;
       this.r = r(o, i, e + 1 / 3), this.g = r(o, i, e), this.b = r(o, i, e - 1 / 3)
      }
      return this
     },
     setStyle: function(t) {
      if (/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(t)) {
       var n = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(t);
       return this.r = Math.min(255, parseInt(n[1], 10)) / 255, this.g = Math.min(255, parseInt(n[2], 10)) / 255, this.b = Math.min(255, parseInt(n[3], 10)) / 255, this
      }
      if (/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(t)) {
       var n = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(t);
       return this.r = Math.min(100, parseInt(n[1], 10)) / 100, this.g = Math.min(100, parseInt(n[2], 10)) / 100, this.b = Math.min(100, parseInt(n[3], 10)) / 100, this
      }
      if (/^\#([0-9a-f]{6})$/i.test(t)) {
       var n = /^\#([0-9a-f]{6})$/i.exec(t);
       return this.setHex(parseInt(n[1], 16)), this
      }
      if (/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(t)) {
       var n = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(t);
       return this.setHex(parseInt(n[1] + n[1] + n[2] + n[2] + n[3] + n[3], 16)), this
      }
      return /^(\w+)$/i.test(t) ? (this.setHex(e.ColorKeywords[t]), this) : void 0
     },
     copy: function(e) {
      return this.r = e.r, this.g = e.g, this.b = e.b, this
     },
     copyGammaToLinear: function(e, t) {
      return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this
     },
     copyLinearToGamma: function(e, t) {
      void 0 === t && (t = 2);
      var n = t > 0 ? 1 / t : 1;
      return this.r = Math.pow(e.r, n), this.g = Math.pow(e.g, n), this.b = Math.pow(e.b, n), this
     },
     convertGammaToLinear: function() {
      var e = this.r,
       t = this.g,
       n = this.b;
      return this.r = e * e, this.g = t * t, this.b = n * n, this
     },
     convertLinearToGamma: function() {
      return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
     },
     getHex: function() {
      return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
     },
     getHexString: function() {
      return ("000000" + this.getHex().toString(16)).slice(-6)
     },
     getHSL: function(e) {
      var t, n, r = e || {
        h: 0,
        s: 0,
        l: 0
       },
       i = this.r,
       o = this.g,
       a = this.b,
       s = Math.max(i, o, a),
       u = Math.min(i, o, a),
       l = (u + s) / 2;
      if (u === s) t = 0, n = 0;
      else {
       var c = s - u;
       switch (n = .5 >= l ? c / (s + u) : c / (2 - s - u), s) {
        case i:
         t = (o - a) / c + (a > o ? 6 : 0);
         break;
        case o:
         t = (a - i) / c + 2;
         break;
        case a:
         t = (i - o) / c + 4
       }
       t /= 6
      }
      return r.h = t, r.s = n, r.l = l, r
     },
     getStyle: function() {
      return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
     },
     offsetHSL: function(e, t, n) {
      var r = this.getHSL();
      return r.h += e, r.s += t, r.l += n, this.setHSL(r.h, r.s, r.l), this
     },
     add: function(e) {
      return this.r += e.r, this.g += e.g, this.b += e.b, this
     },
     addColors: function(e, t) {
      return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this
     },
     addScalar: function(e) {
      return this.r += e, this.g += e, this.b += e, this
     },
     multiply: function(e) {
      return this.r *= e.r, this.g *= e.g, this.b *= e.b, this
     },
     multiplyScalar: function(e) {
      return this.r *= e, this.g *= e, this.b *= e, this
     },
     lerp: function(e, t) {
      return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this
     },
     equals: function(e) {
      return e.r === this.r && e.g === this.g && e.b === this.b
     },
     fromArray: function(e) {
      return this.r = e[0], this.g = e[1], this.b = e[2], this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e
     },
     clone: function() {
      return (new e.Color).setRGB(this.r, this.g, this.b)
     }
    }, e.ColorKeywords = {
     aliceblue: 15792383,
     antiquewhite: 16444375,
     aqua: 65535,
     aquamarine: 8388564,
     azure: 15794175,
     beige: 16119260,
     bisque: 16770244,
     black: 0,
     blanchedalmond: 16772045,
     blue: 255,
     blueviolet: 9055202,
     brown: 10824234,
     burlywood: 14596231,
     cadetblue: 6266528,
     chartreuse: 8388352,
     chocolate: 13789470,
     coral: 16744272,
     cornflowerblue: 6591981,
     cornsilk: 16775388,
     crimson: 14423100,
     cyan: 65535,
     darkblue: 139,
     darkcyan: 35723,
     darkgoldenrod: 12092939,
     darkgray: 11119017,
     darkgreen: 25600,
     darkgrey: 11119017,
     darkkhaki: 12433259,
     darkmagenta: 9109643,
     darkolivegreen: 5597999,
     darkorange: 16747520,
     darkorchid: 10040012,
     darkred: 9109504,
     darksalmon: 15308410,
     darkseagreen: 9419919,
     darkslateblue: 4734347,
     darkslategray: 3100495,
     darkslategrey: 3100495,
     darkturquoise: 52945,
     darkviolet: 9699539,
     deeppink: 16716947,
     deepskyblue: 49151,
     dimgray: 6908265,
     dimgrey: 6908265,
     dodgerblue: 2003199,
     firebrick: 11674146,
     floralwhite: 16775920,
     forestgreen: 2263842,
     fuchsia: 16711935,
     gainsboro: 14474460,
     ghostwhite: 16316671,
     gold: 16766720,
     goldenrod: 14329120,
     gray: 8421504,
     green: 32768,
     greenyellow: 11403055,
     grey: 8421504,
     honeydew: 15794160,
     hotpink: 16738740,
     indianred: 13458524,
     indigo: 4915330,
     ivory: 16777200,
     khaki: 15787660,
     lavender: 15132410,
     lavenderblush: 16773365,
     lawngreen: 8190976,
     lemonchiffon: 16775885,
     lightblue: 11393254,
     lightcoral: 15761536,
     lightcyan: 14745599,
     lightgoldenrodyellow: 16448210,
     lightgray: 13882323,
     lightgreen: 9498256,
     lightgrey: 13882323,
     lightpink: 16758465,
     lightsalmon: 16752762,
     lightseagreen: 2142890,
     lightskyblue: 8900346,
     lightslategray: 7833753,
     lightslategrey: 7833753,
     lightsteelblue: 11584734,
     lightyellow: 16777184,
     lime: 65280,
     limegreen: 3329330,
     linen: 16445670,
     magenta: 16711935,
     maroon: 8388608,
     mediumaquamarine: 6737322,
     mediumblue: 205,
     mediumorchid: 12211667,
     mediumpurple: 9662683,
     mediumseagreen: 3978097,
     mediumslateblue: 8087790,
     mediumspringgreen: 64154,
     mediumturquoise: 4772300,
     mediumvioletred: 13047173,
     midnightblue: 1644912,
     mintcream: 16121850,
     mistyrose: 16770273,
     moccasin: 16770229,
     navajowhite: 16768685,
     navy: 128,
     oldlace: 16643558,
     olive: 8421376,
     olivedrab: 7048739,
     orange: 16753920,
     orangered: 16729344,
     orchid: 14315734,
     palegoldenrod: 15657130,
     palegreen: 10025880,
     paleturquoise: 11529966,
     palevioletred: 14381203,
     papayawhip: 16773077,
     peachpuff: 16767673,
     peru: 13468991,
     pink: 16761035,
     plum: 14524637,
     powderblue: 11591910,
     purple: 8388736,
     red: 16711680,
     rosybrown: 12357519,
     royalblue: 4286945,
     saddlebrown: 9127187,
     salmon: 16416882,
     sandybrown: 16032864,
     seagreen: 3050327,
     seashell: 16774638,
     sienna: 10506797,
     silver: 12632256,
     skyblue: 8900331,
     slateblue: 6970061,
     slategray: 7372944,
     slategrey: 7372944,
     snow: 16775930,
     springgreen: 65407,
     steelblue: 4620980,
     tan: 13808780,
     teal: 32896,
     thistle: 14204888,
     tomato: 16737095,
     turquoise: 4251856,
     violet: 15631086,
     wheat: 16113331,
     white: 16777215,
     whitesmoke: 16119285,
     yellow: 16776960,
     yellowgreen: 10145074
    }, e.Quaternion = function(e, t, n, r) {
     this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = void 0 !== r ? r : 1
    }, e.Quaternion.prototype = {
     constructor: e.Quaternion,
     _x: 0,
     _y: 0,
     _z: 0,
     _w: 0,
     get x() {
      return this._x
     },
     set x(e) {
      this._x = e, this.onChangeCallback()
     },
     get y() {
      return this._y
     },
     set y(e) {
      this._y = e, this.onChangeCallback()
     },
     get z() {
      return this._z
     },
     set z(e) {
      this._z = e, this.onChangeCallback()
     },
     get w() {
      return this._w
     },
     set w(e) {
      this._w = e, this.onChangeCallback()
     },
     set: function(e, t, n, r) {
      return this._x = e, this._y = t, this._z = n, this._w = r, this.onChangeCallback(), this
     },
     copy: function(e) {
      return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this.onChangeCallback(), this
     },
     setFromEuler: function(t, n) {
      if (t instanceof e.Euler == !1) throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
      var r = Math.cos(t._x / 2),
       i = Math.cos(t._y / 2),
       o = Math.cos(t._z / 2),
       a = Math.sin(t._x / 2),
       s = Math.sin(t._y / 2),
       u = Math.sin(t._z / 2);
      return "XYZ" === t.order ? (this._x = a * i * o + r * s * u, this._y = r * s * o - a * i * u, this._z = r * i * u + a * s * o, this._w = r * i * o - a * s * u) : "YXZ" === t.order ? (this._x = a * i * o + r * s * u, this._y = r * s * o - a * i * u, this._z = r * i * u - a * s * o, this._w = r * i * o + a * s * u) : "ZXY" === t.order ? (this._x = a * i * o - r * s * u, this._y = r * s * o + a * i * u, this._z = r * i * u + a * s * o, this._w = r * i * o - a * s * u) : "ZYX" === t.order ? (this._x = a * i * o - r * s * u, this._y = r * s * o + a * i * u, this._z = r * i * u - a * s * o, this._w = r * i * o + a * s * u) : "YZX" === t.order ? (this._x = a * i * o + r * s * u, this._y = r * s * o + a * i * u, this._z = r * i * u - a * s * o, this._w = r * i * o - a * s * u) : "XZY" === t.order && (this._x = a * i * o - r * s * u, this._y = r * s * o - a * i * u, this._z = r * i * u + a * s * o, this._w = r * i * o + a * s * u), n !== !1 && this.onChangeCallback(), this
     },
     setFromAxisAngle: function(e, t) {
      var n = t / 2,
       r = Math.sin(n);
      return this._x = e.x * r, this._y = e.y * r, this._z = e.z * r, this._w = Math.cos(n), this.onChangeCallback(), this
     },
     setFromRotationMatrix: function(e) {
      var t, n = e.elements,
       r = n[0],
       i = n[4],
       o = n[8],
       a = n[1],
       s = n[5],
       u = n[9],
       l = n[2],
       c = n[6],
       h = n[10],
       p = r + s + h;
      return p > 0 ? (t = .5 / Math.sqrt(p + 1), this._w = .25 / t, this._x = (c - u) * t, this._y = (o - l) * t, this._z = (a - i) * t) : r > s && r > h ? (t = 2 * Math.sqrt(1 + r - s - h), this._w = (c - u) / t, this._x = .25 * t, this._y = (i + a) / t, this._z = (o + l) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - r - h), this._w = (o - l) / t, this._x = (i + a) / t, this._y = .25 * t, this._z = (u + c) / t) : (t = 2 * Math.sqrt(1 + h - r - s), this._w = (a - i) / t, this._x = (o + l) / t, this._y = (u + c) / t, this._z = .25 * t), this.onChangeCallback(), this
     },
     setFromUnitVectors: function() {
      var t, n, r = 1e-6;
      return function(i, o) {
       return void 0 === t && (t = new e.Vector3), n = i.dot(o) + 1, r > n ? (n = 0, Math.abs(i.x) > Math.abs(i.z) ? t.set(-i.y, i.x, 0) : t.set(0, -i.z, i.y)) : t.crossVectors(i, o), this._x = t.x, this._y = t.y, this._z = t.z, this._w = n, this.normalize(), this
      }
     }(),
     inverse: function() {
      return this.conjugate().normalize(), this
     },
     conjugate: function() {
      return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
     },
     dot: function(e) {
      return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
     },
     lengthSq: function() {
      return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
     },
     length: function() {
      return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
     },
     normalize: function() {
      var e = this.length();
      return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this.onChangeCallback(), this
     },
     multiply: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(t, n)) : this.multiplyQuaternions(this, t)
     },
     multiplyQuaternions: function(e, t) {
      var n = e._x,
       r = e._y,
       i = e._z,
       o = e._w,
       a = t._x,
       s = t._y,
       u = t._z,
       l = t._w;
      return this._x = n * l + o * a + r * u - i * s, this._y = r * l + o * s + i * a - n * u, this._z = i * l + o * u + n * s - r * a, this._w = o * l - n * a - r * s - i * u, this.onChangeCallback(), this
     },
     multiplyVector3: function(t) {
      return e.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), t.applyQuaternion(this)
     },
     slerp: function(e, t) {
      if (0 === t) return this;
      if (1 === t) return this.copy(e);
      var n = this._x,
       r = this._y,
       i = this._z,
       o = this._w,
       a = o * e._w + n * e._x + r * e._y + i * e._z;
      if (0 > a ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, a = -a) : this.copy(e), a >= 1) return this._w = o, this._x = n, this._y = r, this._z = i, this;
      var s = Math.acos(a),
       u = Math.sqrt(1 - a * a);
      if (Math.abs(u) < .001) return this._w = .5 * (o + this._w), this._x = .5 * (n + this._x), this._y = .5 * (r + this._y), this._z = .5 * (i + this._z), this;
      var l = Math.sin((1 - t) * s) / u,
       c = Math.sin(t * s) / u;
      return this._w = o * l + this._w * c, this._x = n * l + this._x * c, this._y = r * l + this._y * c, this._z = i * l + this._z * c, this.onChangeCallback(), this
     },
     equals: function(e) {
      return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
     },
     fromArray: function(e, t) {
      return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this.onChangeCallback(), this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
     },
     onChange: function(e) {
      return this.onChangeCallback = e, this
     },
     onChangeCallback: function() {},
     clone: function() {
      return new e.Quaternion(this._x, this._y, this._z, this._w)
     }
    }, e.Quaternion.slerp = function(e, t, n, r) {
     return n.copy(e).slerp(t, r)
    }, e.Vector2 = function(e, t) {
     this.x = e || 0, this.y = t || 0
    }, e.Vector2.prototype = {
     constructor: e.Vector2,
     set: function(e, t) {
      return this.x = e, this.y = t, this
     },
     setX: function(e) {
      return this.x = e, this
     },
     setY: function(e) {
      return this.y = e, this
     },
     setComponent: function(e, t) {
      switch (e) {
       case 0:
        this.x = t;
        break;
       case 1:
        this.y = t;
        break;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     getComponent: function(e) {
      switch (e) {
       case 0:
        return this.x;
       case 1:
        return this.y;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     copy: function(e) {
      return this.x = e.x, this.y = e.y, this
     },
     add: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, n)) : (this.x += t.x, this.y += t.y, this)
     },
     addScalar: function(e) {
      return this.x += e, this.y += e, this
     },
     addVectors: function(e, t) {
      return this.x = e.x + t.x, this.y = e.y + t.y, this
     },
     sub: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, n)) : (this.x -= t.x, this.y -= t.y, this)
     },
     subScalar: function(e) {
      return this.x -= e, this.y -= e, this
     },
     subVectors: function(e, t) {
      return this.x = e.x - t.x, this.y = e.y - t.y, this
     },
     multiply: function(e) {
      return this.x *= e.x, this.y *= e.y, this
     },
     multiplyScalar: function(e) {
      return this.x *= e, this.y *= e, this
     },
     divide: function(e) {
      return this.x /= e.x, this.y /= e.y, this
     },
     divideScalar: function(e) {
      if (0 !== e) {
       var t = 1 / e;
       this.x *= t, this.y *= t
      } else this.x = 0, this.y = 0;
      return this
     },
     min: function(e) {
      return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this
     },
     max: function(e) {
      return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this
     },
     clamp: function(e, t) {
      return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this
     },
     clampScalar: function() {
      var t, n;
      return function(r, i) {
       return void 0 === t && (t = new e.Vector2, n = new e.Vector2), t.set(r, r), n.set(i, i), this.clamp(t, n)
      }
     }(),
     floor: function() {
      return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
     },
     ceil: function() {
      return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
     },
     round: function() {
      return this.x = Math.round(this.x), this.y = Math.round(this.y), this
     },
     roundToZero: function() {
      return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
     },
     negate: function() {
      return this.x = -this.x, this.y = -this.y, this
     },
     dot: function(e) {
      return this.x * e.x + this.y * e.y
     },
     lengthSq: function() {
      return this.x * this.x + this.y * this.y
     },
     length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y)
     },
     normalize: function() {
      return this.divideScalar(this.length())
     },
     distanceTo: function(e) {
      return Math.sqrt(this.distanceToSquared(e))
     },
     distanceToSquared: function(e) {
      var t = this.x - e.x,
       n = this.y - e.y;
      return t * t + n * n
     },
     setLength: function(e) {
      var t = this.length();
      return 0 !== t && e !== t && this.multiplyScalar(e / t), this
     },
     lerp: function(e, t) {
      return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
     },
     lerpVectors: function(e, t, n) {
      return this.subVectors(t, e).multiplyScalar(n).add(e), this
     },
     equals: function(e) {
      return e.x === this.x && e.y === this.y
     },
     fromArray: function(e, t) {
      return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
     },
     fromAttribute: function(e, t, n) {
      return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this
     },
     clone: function() {
      return new e.Vector2(this.x, this.y)
     }
    }, e.Vector3 = function(e, t, n) {
     this.x = e || 0, this.y = t || 0, this.z = n || 0
    }, e.Vector3.prototype = {
     constructor: e.Vector3,
     set: function(e, t, n) {
      return this.x = e, this.y = t, this.z = n, this
     },
     setX: function(e) {
      return this.x = e, this
     },
     setY: function(e) {
      return this.y = e, this
     },
     setZ: function(e) {
      return this.z = e, this
     },
     setComponent: function(e, t) {
      switch (e) {
       case 0:
        this.x = t;
        break;
       case 1:
        this.y = t;
        break;
       case 2:
        this.z = t;
        break;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     getComponent: function(e) {
      switch (e) {
       case 0:
        return this.x;
       case 1:
        return this.y;
       case 2:
        return this.z;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     copy: function(e) {
      return this.x = e.x, this.y = e.y, this.z = e.z, this
     },
     add: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, n)) : (this.x += t.x, this.y += t.y, this.z += t.z, this)
     },
     addScalar: function(e) {
      return this.x += e, this.y += e, this.z += e, this
     },
     addVectors: function(e, t) {
      return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
     },
     sub: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, n)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this)
     },
     subScalar: function(e) {
      return this.x -= e, this.y -= e, this.z -= e, this
     },
     subVectors: function(e, t) {
      return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
     },
     multiply: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(t, n)) : (this.x *= t.x, this.y *= t.y, this.z *= t.z, this)
     },
     multiplyScalar: function(e) {
      return this.x *= e, this.y *= e, this.z *= e, this
     },
     multiplyVectors: function(e, t) {
      return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
     },
     applyEuler: function() {
      var t;
      return function(n) {
       return n instanceof e.Euler == !1 && e.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."), void 0 === t && (t = new e.Quaternion), this.applyQuaternion(t.setFromEuler(n)), this
      }
     }(),
     applyAxisAngle: function() {
      var t;
      return function(n, r) {
       return void 0 === t && (t = new e.Quaternion), this.applyQuaternion(t.setFromAxisAngle(n, r)), this
      }
     }(),
     applyMatrix3: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = e.elements;
      return this.x = i[0] * t + i[3] * n + i[6] * r, this.y = i[1] * t + i[4] * n + i[7] * r, this.z = i[2] * t + i[5] * n + i[8] * r, this
     },
     applyMatrix4: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = e.elements;
      return this.x = i[0] * t + i[4] * n + i[8] * r + i[12], this.y = i[1] * t + i[5] * n + i[9] * r + i[13], this.z = i[2] * t + i[6] * n + i[10] * r + i[14], this
     },
     applyProjection: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = e.elements,
       o = 1 / (i[3] * t + i[7] * n + i[11] * r + i[15]);
      return this.x = (i[0] * t + i[4] * n + i[8] * r + i[12]) * o, this.y = (i[1] * t + i[5] * n + i[9] * r + i[13]) * o, this.z = (i[2] * t + i[6] * n + i[10] * r + i[14]) * o, this
     },
     applyQuaternion: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = e.x,
       o = e.y,
       a = e.z,
       s = e.w,
       u = s * t + o * r - a * n,
       l = s * n + a * t - i * r,
       c = s * r + i * n - o * t,
       h = -i * t - o * n - a * r;
      return this.x = u * s + h * -i + l * -a - c * -o, this.y = l * s + h * -o + c * -i - u * -a, this.z = c * s + h * -a + u * -o - l * -i, this
     },
     project: function() {
      var t;
      return function(n) {
       return void 0 === t && (t = new e.Matrix4), t.multiplyMatrices(n.projectionMatrix, t.getInverse(n.matrixWorld)), this.applyProjection(t)
      }
     }(),
     unproject: function() {
      var t;
      return function(n) {
       return void 0 === t && (t = new e.Matrix4), t.multiplyMatrices(n.matrixWorld, t.getInverse(n.projectionMatrix)), this.applyProjection(t)
      }
     }(),
     transformDirection: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = e.elements;
      return this.x = i[0] * t + i[4] * n + i[8] * r, this.y = i[1] * t + i[5] * n + i[9] * r, this.z = i[2] * t + i[6] * n + i[10] * r, this.normalize(), this
     },
     divide: function(e) {
      return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
     },
     divideScalar: function(e) {
      if (0 !== e) {
       var t = 1 / e;
       this.x *= t, this.y *= t, this.z *= t
      } else this.x = 0, this.y = 0, this.z = 0;
      return this
     },
     min: function(e) {
      return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this
     },
     max: function(e) {
      return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this
     },
     clamp: function(e, t) {
      return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this
     },
     clampScalar: function() {
      var t, n;
      return function(r, i) {
       return void 0 === t && (t = new e.Vector3, n = new e.Vector3), t.set(r, r, r), n.set(i, i, i), this.clamp(t, n)
      }
     }(),
     floor: function() {
      return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
     },
     ceil: function() {
      return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
     },
     round: function() {
      return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
     },
     roundToZero: function() {
      return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
     },
     negate: function() {
      return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
     },
     dot: function(e) {
      return this.x * e.x + this.y * e.y + this.z * e.z
     },
     lengthSq: function() {
      return this.x * this.x + this.y * this.y + this.z * this.z
     },
     length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
     },
     lengthManhattan: function() {
      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
     },
     normalize: function() {
      return this.divideScalar(this.length())
     },
     setLength: function(e) {
      var t = this.length();
      return 0 !== t && e !== t && this.multiplyScalar(e / t), this
     },
     lerp: function(e, t) {
      return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
     },
     lerpVectors: function(e, t, n) {
      return this.subVectors(t, e).multiplyScalar(n).add(e), this
     },
     cross: function(t, n) {
      if (void 0 !== n) return e.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(t, n);
      var r = this.x,
       i = this.y,
       o = this.z;
      return this.x = i * t.z - o * t.y, this.y = o * t.x - r * t.z, this.z = r * t.y - i * t.x, this
     },
     crossVectors: function(e, t) {
      var n = e.x,
       r = e.y,
       i = e.z,
       o = t.x,
       a = t.y,
       s = t.z;
      return this.x = r * s - i * a, this.y = i * o - n * s, this.z = n * a - r * o, this
     },
     projectOnVector: function() {
      var t, n;
      return function(r) {
       return void 0 === t && (t = new e.Vector3), t.copy(r).normalize(), n = this.dot(t), this.copy(t).multiplyScalar(n)
      }
     }(),
     projectOnPlane: function() {
      var t;
      return function(n) {
       return void 0 === t && (t = new e.Vector3), t.copy(this).projectOnVector(n), this.sub(t)
      }
     }(),
     reflect: function() {
      var t;
      return function(n) {
       return void 0 === t && (t = new e.Vector3), this.sub(t.copy(n).multiplyScalar(2 * this.dot(n)))
      }
     }(),
     angleTo: function(t) {
      var n = this.dot(t) / (this.length() * t.length());
      return Math.acos(e.Math.clamp(n, -1, 1))
     },
     distanceTo: function(e) {
      return Math.sqrt(this.distanceToSquared(e))
     },
     distanceToSquared: function(e) {
      var t = this.x - e.x,
       n = this.y - e.y,
       r = this.z - e.z;
      return t * t + n * n + r * r
     },
     setEulerFromRotationMatrix: function() {
      e.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
     },
     setEulerFromQuaternion: function() {
      e.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
     },
     getPositionFromMatrix: function(t) {
      return e.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(t)
     },
     getScaleFromMatrix: function(t) {
      return e.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(t)
     },
     getColumnFromMatrix: function(t, n) {
      return e.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(t, n)
     },
     setFromMatrixPosition: function(e) {
      return this.x = e.elements[12], this.y = e.elements[13], this.z = e.elements[14], this
     },
     setFromMatrixScale: function(e) {
      var t = this.set(e.elements[0], e.elements[1], e.elements[2]).length(),
       n = this.set(e.elements[4], e.elements[5], e.elements[6]).length(),
       r = this.set(e.elements[8], e.elements[9], e.elements[10]).length();
      return this.x = t, this.y = n, this.z = r, this
     },
     setFromMatrixColumn: function(e, t) {
      var n = 4 * e,
       r = t.elements;
      return this.x = r[n], this.y = r[n + 1], this.z = r[n + 2], this
     },
     equals: function(e) {
      return e.x === this.x && e.y === this.y && e.z === this.z
     },
     fromArray: function(e, t) {
      return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
     },
     fromAttribute: function(e, t, n) {
      return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this
     },
     clone: function() {
      return new e.Vector3(this.x, this.y, this.z)
     }
    }, e.Vector4 = function(e, t, n, r) {
     this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = void 0 !== r ? r : 1
    }, e.Vector4.prototype = {
     constructor: e.Vector4,
     set: function(e, t, n, r) {
      return this.x = e, this.y = t, this.z = n, this.w = r, this
     },
     setX: function(e) {
      return this.x = e, this
     },
     setY: function(e) {
      return this.y = e, this
     },
     setZ: function(e) {
      return this.z = e, this
     },
     setW: function(e) {
      return this.w = e, this
     },
     setComponent: function(e, t) {
      switch (e) {
       case 0:
        this.x = t;
        break;
       case 1:
        this.y = t;
        break;
       case 2:
        this.z = t;
        break;
       case 3:
        this.w = t;
        break;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     getComponent: function(e) {
      switch (e) {
       case 0:
        return this.x;
       case 1:
        return this.y;
       case 2:
        return this.z;
       case 3:
        return this.w;
       default:
        throw new Error("index is out of range: " + e)
      }
     },
     copy: function(e) {
      return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this
     },
     add: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(t, n)) : (this.x += t.x, this.y += t.y, this.z += t.z, this.w += t.w, this)
     },
     addScalar: function(e) {
      return this.x += e, this.y += e, this.z += e, this.w += e, this
     },
     addVectors: function(e, t) {
      return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
     },
     sub: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(t, n)) : (this.x -= t.x, this.y -= t.y, this.z -= t.z, this.w -= t.w, this)
     },
     subScalar: function(e) {
      return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this
     },
     subVectors: function(e, t) {
      return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
     },
     multiplyScalar: function(e) {
      return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
     },
     applyMatrix4: function(e) {
      var t = this.x,
       n = this.y,
       r = this.z,
       i = this.w,
       o = e.elements;
      return this.x = o[0] * t + o[4] * n + o[8] * r + o[12] * i, this.y = o[1] * t + o[5] * n + o[9] * r + o[13] * i, this.z = o[2] * t + o[6] * n + o[10] * r + o[14] * i, this.w = o[3] * t + o[7] * n + o[11] * r + o[15] * i, this
     },
     divideScalar: function(e) {
      if (0 !== e) {
       var t = 1 / e;
       this.x *= t, this.y *= t, this.z *= t, this.w *= t
      } else this.x = 0, this.y = 0, this.z = 0, this.w = 1;
      return this
     },
     setAxisAngleFromQuaternion: function(e) {
      this.w = 2 * Math.acos(e.w);
      var t = Math.sqrt(1 - e.w * e.w);
      return 1e-4 > t ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
     },
     setAxisAngleFromRotationMatrix: function(e) {
      var t, n, r, i, o = .01,
       a = .1,
       s = e.elements,
       u = s[0],
       l = s[4],
       c = s[8],
       h = s[1],
       p = s[5],
       d = s[9],
       f = s[2],
       m = s[6],
       g = s[10];
      if (Math.abs(l - h) < o && Math.abs(c - f) < o && Math.abs(d - m) < o) {
       if (Math.abs(l + h) < a && Math.abs(c + f) < a && Math.abs(d + m) < a && Math.abs(u + p + g - 3) < a) return this.set(1, 0, 0, 0), this;
       t = Math.PI;
       var v = (u + 1) / 2,
        y = (p + 1) / 2,
        b = (g + 1) / 2,
        w = (l + h) / 4,
        x = (c + f) / 4,
        _ = (d + m) / 4;
       return v > y && v > b ? o > v ? (n = 0, r = .707106781, i = .707106781) : (n = Math.sqrt(v), r = w / n, i = x / n) : y > b ? o > y ? (n = .707106781, r = 0, i = .707106781) : (r = Math.sqrt(y), n = w / r, i = _ / r) : o > b ? (n = .707106781, r = .707106781, i = 0) : (i = Math.sqrt(b), n = x / i, r = _ / i), this.set(n, r, i, t), this
      }
      var S = Math.sqrt((m - d) * (m - d) + (c - f) * (c - f) + (h - l) * (h - l));
      return Math.abs(S) < .001 && (S = 1), this.x = (m - d) / S, this.y = (c - f) / S, this.z = (h - l) / S, this.w = Math.acos((u + p + g - 1) / 2), this
     },
     min: function(e) {
      return this.x > e.x && (this.x = e.x), this.y > e.y && (this.y = e.y), this.z > e.z && (this.z = e.z), this.w > e.w && (this.w = e.w), this
     },
     max: function(e) {
      return this.x < e.x && (this.x = e.x), this.y < e.y && (this.y = e.y), this.z < e.z && (this.z = e.z), this.w < e.w && (this.w = e.w), this
     },
     clamp: function(e, t) {
      return this.x < e.x ? this.x = e.x : this.x > t.x && (this.x = t.x), this.y < e.y ? this.y = e.y : this.y > t.y && (this.y = t.y), this.z < e.z ? this.z = e.z : this.z > t.z && (this.z = t.z), this.w < e.w ? this.w = e.w : this.w > t.w && (this.w = t.w), this
     },
     clampScalar: function() {
      var t, n;
      return function(r, i) {
       return void 0 === t && (t = new e.Vector4, n = new e.Vector4), t.set(r, r, r, r), n.set(i, i, i, i), this.clamp(t, n)
      }
     }(),
     floor: function() {
      return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
     },
     ceil: function() {
      return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
     },
     round: function() {
      return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
     },
     roundToZero: function() {
      return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
     },
     negate: function() {
      return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
     },
     dot: function(e) {
      return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
     },
     lengthSq: function() {
      return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
     },
     length: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
     },
     lengthManhattan: function() {
      return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
     },
     normalize: function() {
      return this.divideScalar(this.length())
     },
     setLength: function(e) {
      var t = this.length();
      return 0 !== t && e !== t && this.multiplyScalar(e / t), this
     },
     lerp: function(e, t) {
      return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
     },
     lerpVectors: function(e, t, n) {
      return this.subVectors(t, e).multiplyScalar(n).add(e), this
     },
     equals: function(e) {
      return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
     },
     fromArray: function(e, t) {
      return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e
     },
     fromAttribute: function(e, t, n) {
      return void 0 === n && (n = 0), t = t * e.itemSize + n, this.x = e.array[t], this.y = e.array[t + 1], this.z = e.array[t + 2], this.w = e.array[t + 3], this
     },
     clone: function() {
      return new e.Vector4(this.x, this.y, this.z, this.w)
     }
    }, e.Euler = function(t, n, r, i) {
     this._x = t || 0, this._y = n || 0, this._z = r || 0, this._order = i || e.Euler.DefaultOrder
    }, e.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], e.Euler.DefaultOrder = "XYZ", e.Euler.prototype = {
     constructor: e.Euler,
     _x: 0,
     _y: 0,
     _z: 0,
     _order: e.Euler.DefaultOrder,
     get x() {
      return this._x
     },
     set x(e) {
      this._x = e, this.onChangeCallback()
     },
     get y() {
      return this._y
     },
     set y(e) {
      this._y = e, this.onChangeCallback()
     },
     get z() {
      return this._z
     },
     set z(e) {
      this._z = e, this.onChangeCallback()
     },
     get order() {
      return this._order
     },
     set order(e) {
      this._order = e, this.onChangeCallback()
     },
     set: function(e, t, n, r) {
      return this._x = e, this._y = t, this._z = n, this._order = r || this._order, this.onChangeCallback(), this
     },
     copy: function(e) {
      return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this.onChangeCallback(), this
     },
     setFromRotationMatrix: function(t, n, r) {
      var i = e.Math.clamp,
       o = t.elements,
       a = o[0],
       s = o[4],
       u = o[8],
       l = o[1],
       c = o[5],
       h = o[9],
       p = o[2],
       d = o[6],
       f = o[10];
      return n = n || this._order, "XYZ" === n ? (this._y = Math.asin(i(u, -1, 1)), Math.abs(u) < .99999 ? (this._x = Math.atan2(-h, f), this._z = Math.atan2(-s, a)) : (this._x = Math.atan2(d, c), this._z = 0)) : "YXZ" === n ? (this._x = Math.asin(-i(h, -1, 1)), Math.abs(h) < .99999 ? (this._y = Math.atan2(u, f), this._z = Math.atan2(l, c)) : (this._y = Math.atan2(-p, a), this._z = 0)) : "ZXY" === n ? (this._x = Math.asin(i(d, -1, 1)), Math.abs(d) < .99999 ? (this._y = Math.atan2(-p, f), this._z = Math.atan2(-s, c)) : (this._y = 0, this._z = Math.atan2(l, a))) : "ZYX" === n ? (this._y = Math.asin(-i(p, -1, 1)), Math.abs(p) < .99999 ? (this._x = Math.atan2(d, f), this._z = Math.atan2(l, a)) : (this._x = 0, this._z = Math.atan2(-s, c))) : "YZX" === n ? (this._z = Math.asin(i(l, -1, 1)), Math.abs(l) < .99999 ? (this._x = Math.atan2(-h, c), this._y = Math.atan2(-p, a)) : (this._x = 0, this._y = Math.atan2(u, f))) : "XZY" === n ? (this._z = Math.asin(-i(s, -1, 1)), Math.abs(s) < .99999 ? (this._x = Math.atan2(d, c), this._y = Math.atan2(u, a)) : (this._x = Math.atan2(-h, f), this._y = 0)) : e.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + n), this._order = n, r !== !1 && this.onChangeCallback(), this
     },
     setFromQuaternion: function() {
      var t;
      return function(n, r, i) {
       return void 0 === t && (t = new e.Matrix4), t.makeRotationFromQuaternion(n), this.setFromRotationMatrix(t, r, i), this
      }
     }(),
     setFromVector3: function(e, t) {
      return this.set(e.x, e.y, e.z, t || this._order)
     },
     reorder: function() {
      var t = new e.Quaternion;
      return function(e) {
       t.setFromEuler(this), this.setFromQuaternion(t, e)
      }
     }(),
     equals: function(e) {
      return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
     },
     fromArray: function(e) {
      return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this.onChangeCallback(), this
     },
     toArray: function(e, t) {
      return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e
     },
     toVector3: function(t) {
      return t ? t.set(this._x, this._y, this._z) : new e.Vector3(this._x, this._y, this._z)
     },
     onChange: function(e) {
      return this.onChangeCallback = e, this
     },
     onChangeCallback: function() {},
     clone: function() {
      return new e.Euler(this._x, this._y, this._z, this._order)
     }
    }, e.Line3 = function(t, n) {
     this.start = void 0 !== t ? t : new e.Vector3, this.end = void 0 !== n ? n : new e.Vector3
    }, e.Line3.prototype = {
     constructor: e.Line3,
     set: function(e, t) {
      return this.start.copy(e), this.end.copy(t), this
     },
     copy: function(e) {
      return this.start.copy(e.start), this.end.copy(e.end), this
     },
     center: function(t) {
      var n = t || new e.Vector3;
      return n.addVectors(this.start, this.end).multiplyScalar(.5)
     },
     delta: function(t) {
      var n = t || new e.Vector3;
      return n.subVectors(this.end, this.start)
     },
     distanceSq: function() {
      return this.start.distanceToSquared(this.end)
     },
     distance: function() {
      return this.start.distanceTo(this.end)
     },
     at: function(t, n) {
      var r = n || new e.Vector3;
      return this.delta(r).multiplyScalar(t).add(this.start)
     },
     closestPointToPointParameter: function() {
      var t = new e.Vector3,
       n = new e.Vector3;
      return function(r, i) {
       t.subVectors(r, this.start), n.subVectors(this.end, this.start);
       var o = n.dot(n),
        a = n.dot(t),
        s = a / o;
       return i && (s = e.Math.clamp(s, 0, 1)), s
      }
     }(),
     closestPointToPoint: function(t, n, r) {
      var i = this.closestPointToPointParameter(t, n),
       o = r || new e.Vector3;
      return this.delta(o).multiplyScalar(i).add(this.start)
     },
     applyMatrix4: function(e) {
      return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
     },
     equals: function(e) {
      return e.start.equals(this.start) && e.end.equals(this.end)
     },
     clone: function() {
      return (new e.Line3).copy(this)
     }
    }, e.Box2 = function(t, n) {
     this.min = void 0 !== t ? t : new e.Vector2(1 / 0, 1 / 0), this.max = void 0 !== n ? n : new e.Vector2(-1 / 0, -1 / 0)
    }, e.Box2.prototype = {
     constructor: e.Box2,
     set: function(e, t) {
      return this.min.copy(e), this.max.copy(t), this
     },
     setFromPoints: function(e) {
      this.makeEmpty();
      for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
      return this
     },
     setFromCenterAndSize: function() {
      var t = new e.Vector2;
      return function(e, n) {
       var r = t.copy(n).multiplyScalar(.5);
       return this.min.copy(e).sub(r), this.max.copy(e).add(r), this
      }
     }(),
     copy: function(e) {
      return this.min.copy(e.min), this.max.copy(e.max), this
     },
     makeEmpty: function() {
      return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this
     },
     empty: function() {
      return this.max.x < this.min.x || this.max.y < this.min.y
     },
     center: function(t) {
      var n = t || new e.Vector2;
      return n.addVectors(this.min, this.max).multiplyScalar(.5)
     },
     size: function(t) {
      var n = t || new e.Vector2;
      return n.subVectors(this.max, this.min)
     },
     expandByPoint: function(e) {
      return this.min.min(e), this.max.max(e), this
     },
     expandByVector: function(e) {
      return this.min.sub(e), this.max.add(e), this
     },
     expandByScalar: function(e) {
      return this.min.addScalar(-e), this.max.addScalar(e), this
     },
     containsPoint: function(e) {
      return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y ? !1 : !0
     },
     containsBox: function(e) {
      return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y ? !0 : !1
     },
     getParameter: function(t, n) {
      var r = n || new e.Vector2;
      return r.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y))
     },
     isIntersectionBox: function(e) {
      return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y ? !1 : !0
     },
     clampPoint: function(t, n) {
      var r = n || new e.Vector2;
      return r.copy(t).clamp(this.min, this.max)
     },
     distanceToPoint: function() {
      var t = new e.Vector2;
      return function(e) {
       var n = t.copy(e).clamp(this.min, this.max);
       return n.sub(e).length()
      }
     }(),
     intersect: function(e) {
      return this.min.max(e.min), this.max.min(e.max), this
     },
     union: function(e) {
      return this.min.min(e.min), this.max.max(e.max), this
     },
     translate: function(e) {
      return this.min.add(e), this.max.add(e), this
     },
     equals: function(e) {
      return e.min.equals(this.min) && e.max.equals(this.max)
     },
     clone: function() {
      return (new e.Box2).copy(this)
     }
    }, e.Box3 = function(t, n) {
     this.min = void 0 !== t ? t : new e.Vector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== n ? n : new e.Vector3(-1 / 0, -1 / 0, -1 / 0)
    }, e.Box3.prototype = {
     constructor: e.Box3,
     set: function(e, t) {
      return this.min.copy(e), this.max.copy(t), this
     },
     setFromPoints: function(e) {
      this.makeEmpty();
      for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
      return this
     },
     setFromCenterAndSize: function() {
      var t = new e.Vector3;
      return function(e, n) {
       var r = t.copy(n).multiplyScalar(.5);
       return this.min.copy(e).sub(r), this.max.copy(e).add(r), this
      }
     }(),
     setFromObject: function() {
      var t = new e.Vector3;
      return function(n) {
       var r = this;
       return n.updateMatrixWorld(!0), this.makeEmpty(), n.traverse(function(n) {
        var i = n.geometry;
        if (void 0 !== i)
         if (i instanceof e.Geometry)
          for (var o = i.vertices, a = 0, s = o.length; s > a; a++) t.copy(o[a]), t.applyMatrix4(n.matrixWorld), r.expandByPoint(t);
         else if (i instanceof e.BufferGeometry && void 0 !== i.attributes.position)
         for (var u = i.attributes.position.array, a = 0, s = u.length; s > a; a += 3) t.set(u[a], u[a + 1], u[a + 2]), t.applyMatrix4(n.matrixWorld), r.expandByPoint(t)
       }), this
      }
     }(),
     copy: function(e) {
      return this.min.copy(e.min), this.max.copy(e.max), this
     },
     makeEmpty: function() {
      return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
     },
     empty: function() {
      return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
     },
     center: function(t) {
      var n = t || new e.Vector3;
      return n.addVectors(this.min, this.max).multiplyScalar(.5)
     },
     size: function(t) {
      var n = t || new e.Vector3;
      return n.subVectors(this.max, this.min)
     },
     expandByPoint: function(e) {
      return this.min.min(e), this.max.max(e), this
     },
     expandByVector: function(e) {
      return this.min.sub(e), this.max.add(e), this
     },
     expandByScalar: function(e) {
      return this.min.addScalar(-e), this.max.addScalar(e), this
     },
     containsPoint: function(e) {
      return e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z ? !1 : !0
     },
     containsBox: function(e) {
      return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z ? !0 : !1
     },
     getParameter: function(t, n) {
      var r = n || new e.Vector3;
      return r.set((t.x - this.min.x) / (this.max.x - this.min.x), (t.y - this.min.y) / (this.max.y - this.min.y), (t.z - this.min.z) / (this.max.z - this.min.z))
     },
     isIntersectionBox: function(e) {
      return e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z ? !1 : !0
     },
     clampPoint: function(t, n) {
      var r = n || new e.Vector3;
      return r.copy(t).clamp(this.min, this.max)
     },
     distanceToPoint: function() {
      var t = new e.Vector3;
      return function(e) {
       var n = t.copy(e).clamp(this.min, this.max);
       return n.sub(e).length()
      }
     }(),
     getBoundingSphere: function() {
      var t = new e.Vector3;
      return function(n) {
       var r = n || new e.Sphere;
       return r.center = this.center(), r.radius = .5 * this.size(t).length(), r
      }
     }(),
     intersect: function(e) {
      return this.min.max(e.min), this.max.min(e.max), this
     },
     union: function(e) {
      return this.min.min(e.min), this.max.max(e.max), this
     },
     applyMatrix4: function() {
      var t = [new e.Vector3, new e.Vector3, new e.Vector3, new e.Vector3, new e.Vector3, new e.Vector3, new e.Vector3, new e.Vector3];
      return function(e) {
       return t[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), t[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), t[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), t[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), t[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), t[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), t[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), t[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.makeEmpty(), this.setFromPoints(t), this
      }
     }(),
     translate: function(e) {
      return this.min.add(e), this.max.add(e), this
     },
     equals: function(e) {
      return e.min.equals(this.min) && e.max.equals(this.max)
     },
     clone: function() {
      return (new e.Box3).copy(this)
     }
    }, e.Matrix3 = function() {
     this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), arguments.length > 0 && e.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
    }, e.Matrix3.prototype = {
     constructor: e.Matrix3,
     set: function(e, t, n, r, i, o, a, s, u) {
      var l = this.elements;
      return l[0] = e, l[3] = t, l[6] = n, l[1] = r, l[4] = i, l[7] = o, l[2] = a, l[5] = s, l[8] = u, this
     },
     identity: function() {
      return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
     },
     copy: function(e) {
      var t = e.elements;
      return this.set(t[0], t[3], t[6], t[1], t[4], t[7], t[2], t[5], t[8]), this
     },
     multiplyVector3: function(t) {
      return e.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), t.applyMatrix3(this)
     },
     multiplyVector3Array: function(t) {
      return e.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(t)
     },
     applyToVector3Array: function() {
      var t = new e.Vector3;
      return function(e, n, r) {
       void 0 === n && (n = 0), void 0 === r && (r = e.length);
       for (var i = 0, o = n; r > i; i += 3, o += 3) t.x = e[o], t.y = e[o + 1], t.z = e[o + 2], t.applyMatrix3(this), e[o] = t.x, e[o + 1] = t.y, e[o + 2] = t.z;
       return e
      }
     }(),
     multiplyScalar: function(e) {
      var t = this.elements;
      return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
     },
     determinant: function() {
      var e = this.elements,
       t = e[0],
       n = e[1],
       r = e[2],
       i = e[3],
       o = e[4],
       a = e[5],
       s = e[6],
       u = e[7],
       l = e[8];
      return t * o * l - t * a * u - n * i * l + n * a * s + r * i * u - r * o * s
     },
     getInverse: function(t, n) {
      var r = t.elements,
       i = this.elements;
      i[0] = r[10] * r[5] - r[6] * r[9], i[1] = -r[10] * r[1] + r[2] * r[9], i[2] = r[6] * r[1] - r[2] * r[5], i[3] = -r[10] * r[4] + r[6] * r[8], i[4] = r[10] * r[0] - r[2] * r[8], i[5] = -r[6] * r[0] + r[2] * r[4], i[6] = r[9] * r[4] - r[5] * r[8], i[7] = -r[9] * r[0] + r[1] * r[8], i[8] = r[5] * r[0] - r[1] * r[4];
      var o = r[0] * i[0] + r[1] * i[3] + r[2] * i[6];
      if (0 === o) {
       var a = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
       if (n) throw new Error(a);
       return e.warn(a), this.identity(), this
      }
      return this.multiplyScalar(1 / o), this
     },
     transpose: function() {
      var e, t = this.elements;
      return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
     },
     flattenToArrayOffset: function(e, t) {
      var n = this.elements;
      return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e
     },
     getNormalMatrix: function(e) {
      return this.getInverse(e).transpose(), this
     },
     transposeIntoArray: function(e) {
      var t = this.elements;
      return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
     },
     fromArray: function(e) {
      return this.elements.set(e), this
     },
     toArray: function() {
      var e = this.elements;
      return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]]
     },
     clone: function() {
      return (new e.Matrix3).fromArray(this.elements)
     }
    }, e.Matrix4 = function() {
     this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && e.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
    }, e.Matrix4.prototype = {
     constructor: e.Matrix4,
     set: function(e, t, n, r, i, o, a, s, u, l, c, h, p, d, f, m) {
      var g = this.elements;
      return g[0] = e, g[4] = t, g[8] = n, g[12] = r, g[1] = i, g[5] = o, g[9] = a, g[13] = s, g[2] = u, g[6] = l, g[10] = c, g[14] = h, g[3] = p, g[7] = d, g[11] = f, g[15] = m, this
     },
     identity: function() {
      return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
     },
     copy: function(e) {
      return this.elements.set(e.elements), this
     },
     extractPosition: function(t) {
      return e.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(t)
     },
     copyPosition: function(e) {
      var t = this.elements,
       n = e.elements;
      return t[12] = n[12], t[13] = n[13], t[14] = n[14], this
     },
     extractBasis: function(e, t, n) {
      var r = this.elements;
      return e.set(r[0], r[1], r[2]), t.set(r[4], r[5], r[6]), n.set(r[8], r[9], r[10]), this
     },
     makeBasis: function(e, t, n) {
      return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this
     },
     extractRotation: function() {
      var t = new e.Vector3;
      return function(e) {
       var n = this.elements,
        r = e.elements,
        i = 1 / t.set(r[0], r[1], r[2]).length(),
        o = 1 / t.set(r[4], r[5], r[6]).length(),
        a = 1 / t.set(r[8], r[9], r[10]).length();
       return n[0] = r[0] * i, n[1] = r[1] * i, n[2] = r[2] * i, n[4] = r[4] * o, n[5] = r[5] * o, n[6] = r[6] * o, n[8] = r[8] * a, n[9] = r[9] * a, n[10] = r[10] * a, this
      }
     }(),
     makeRotationFromEuler: function(t) {
      t instanceof e.Euler == !1 && e.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
      var n = this.elements,
       r = t.x,
       i = t.y,
       o = t.z,
       a = Math.cos(r),
       s = Math.sin(r),
       u = Math.cos(i),
       l = Math.sin(i),
       c = Math.cos(o),
       h = Math.sin(o);
      if ("XYZ" === t.order) {
       var p = a * c,
        d = a * h,
        f = s * c,
        m = s * h;
       n[0] = u * c, n[4] = -u * h, n[8] = l, n[1] = d + f * l, n[5] = p - m * l, n[9] = -s * u, n[2] = m - p * l, n[6] = f + d * l, n[10] = a * u
      } else if ("YXZ" === t.order) {
       var g = u * c,
        v = u * h,
        y = l * c,
        b = l * h;
       n[0] = g + b * s, n[4] = y * s - v, n[8] = a * l, n[1] = a * h, n[5] = a * c, n[9] = -s, n[2] = v * s - y, n[6] = b + g * s, n[10] = a * u
      } else if ("ZXY" === t.order) {
       var g = u * c,
        v = u * h,
        y = l * c,
        b = l * h;
       n[0] = g - b * s, n[4] = -a * h, n[8] = y + v * s, n[1] = v + y * s, n[5] = a * c, n[9] = b - g * s, n[2] = -a * l, n[6] = s, n[10] = a * u
      } else if ("ZYX" === t.order) {
       var p = a * c,
        d = a * h,
        f = s * c,
        m = s * h;
       n[0] = u * c, n[4] = f * l - d, n[8] = p * l + m, n[1] = u * h, n[5] = m * l + p, n[9] = d * l - f, n[2] = -l, n[6] = s * u, n[10] = a * u
      } else if ("YZX" === t.order) {
       var w = a * u,
        x = a * l,
        _ = s * u,
        S = s * l;
       n[0] = u * c, n[4] = S - w * h, n[8] = _ * h + x, n[1] = h, n[5] = a * c, n[9] = -s * c, n[2] = -l * c, n[6] = x * h + _, n[10] = w - S * h
      } else if ("XZY" === t.order) {
       var w = a * u,
        x = a * l,
        _ = s * u,
        S = s * l;
       n[0] = u * c, n[4] = -h, n[8] = l * c, n[1] = w * h + S, n[5] = a * c, n[9] = x * h - _, n[2] = _ * h - x, n[6] = s * c, n[10] = S * h + w
      }
      return n[3] = 0, n[7] = 0, n[11] = 0, n[12] = 0, n[13] = 0, n[14] = 0, n[15] = 1, this
     },
     setRotationFromQuaternion: function(t) {
      return e.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(t)
     },
     makeRotationFromQuaternion: function(e) {
      var t = this.elements,
       n = e.x,
       r = e.y,
       i = e.z,
       o = e.w,
       a = n + n,
       s = r + r,
       u = i + i,
       l = n * a,
       c = n * s,
       h = n * u,
       p = r * s,
       d = r * u,
       f = i * u,
       m = o * a,
       g = o * s,
       v = o * u;
      return t[0] = 1 - (p + f), t[4] = c - v, t[8] = h + g, t[1] = c + v, t[5] = 1 - (l + f), t[9] = d - m, t[2] = h - g, t[6] = d + m, t[10] = 1 - (l + p), t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
     },
     lookAt: function() {
      var t = new e.Vector3,
       n = new e.Vector3,
       r = new e.Vector3;
      return function(e, i, o) {
       var a = this.elements;
       return r.subVectors(e, i).normalize(), 0 === r.length() && (r.z = 1), t.crossVectors(o, r).normalize(), 0 === t.length() && (r.x += 1e-4, t.crossVectors(o, r).normalize()), n.crossVectors(r, t), a[0] = t.x, a[4] = n.x, a[8] = r.x, a[1] = t.y, a[5] = n.y, a[9] = r.y, a[2] = t.z, a[6] = n.z, a[10] = r.z, this
      }
     }(),
     multiply: function(t, n) {
      return void 0 !== n ? (e.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(t, n)) : this.multiplyMatrices(this, t)
     },
     multiplyMatrices: function(e, t) {
      var n = e.elements,
       r = t.elements,
       i = this.elements,
       o = n[0],
       a = n[4],
       s = n[8],
       u = n[12],
       l = n[1],
       c = n[5],
       h = n[9],
       p = n[13],
       d = n[2],
       f = n[6],
       m = n[10],
       g = n[14],
       v = n[3],
       y = n[7],
       b = n[11],
       w = n[15],
       x = r[0],
       _ = r[4],
       S = r[8],
       C = r[12],
       E = r[1],
       T = r[5],
       M = r[9],
       A = r[13],
       P = r[2],
       R = r[6],
       I = r[10],
       k = r[14],
       D = r[3],
       V = r[7],
       L = r[11],
       B = r[15];
      return i[0] = o * x + a * E + s * P + u * D, i[4] = o * _ + a * T + s * R + u * V, i[8] = o * S + a * M + s * I + u * L, i[12] = o * C + a * A + s * k + u * B, i[1] = l * x + c * E + h * P + p * D, i[5] = l * _ + c * T + h * R + p * V, i[9] = l * S + c * M + h * I + p * L, i[13] = l * C + c * A + h * k + p * B, i[2] = d * x + f * E + m * P + g * D, i[6] = d * _ + f * T + m * R + g * V, i[10] = d * S + f * M + m * I + g * L, i[14] = d * C + f * A + m * k + g * B, i[3] = v * x + y * E + b * P + w * D, i[7] = v * _ + y * T + b * R + w * V, i[11] = v * S + y * M + b * I + w * L, i[15] = v * C + y * A + b * k + w * B, this
     },
     multiplyToArray: function(e, t, n) {
      var r = this.elements;
      return this.multiplyMatrices(e, t), n[0] = r[0], n[1] = r[1], n[2] = r[2], n[3] = r[3], n[4] = r[4], n[5] = r[5], n[6] = r[6], n[7] = r[7], n[8] = r[8], n[9] = r[9], n[10] = r[10], n[11] = r[11], n[12] = r[12], n[13] = r[13], n[14] = r[14], n[15] = r[15], this
     },
     multiplyScalar: function(e) {
      var t = this.elements;
      return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
     },
     multiplyVector3: function(t) {
      return e.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), t.applyProjection(this)
     },
     multiplyVector4: function(t) {
      return e.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), t.applyMatrix4(this)
     },
     multiplyVector3Array: function(t) {
      return e.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(t)
     },
     applyToVector3Array: function() {
      var t = new e.Vector3;
      return function(e, n, r) {
       void 0 === n && (n = 0), void 0 === r && (r = e.length);
       for (var i = 0, o = n; r > i; i += 3, o += 3) t.x = e[o], t.y = e[o + 1], t.z = e[o + 2], t.applyMatrix4(this), e[o] = t.x, e[o + 1] = t.y, e[o + 2] = t.z;
       return e
      }
     }(),
     rotateAxis: function(t) {
      e.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), t.transformDirection(this)
     },
     crossVector: function(t) {
      return e.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), t.applyMatrix4(this)
     },
     determinant: function() {
      var e = this.elements,
       t = e[0],
       n = e[4],
       r = e[8],
       i = e[12],
       o = e[1],
       a = e[5],
       s = e[9],
       u = e[13],
       l = e[2],
       c = e[6],
       h = e[10],
       p = e[14],
       d = e[3],
       f = e[7],
       m = e[11],
       g = e[15];
      return d * (+i * s * c - r * u * c - i * a * h + n * u * h + r * a * p - n * s * p) + f * (+t * s * p - t * u * h + i * o * h - r * o * p + r * u * l - i * s * l) + m * (+t * u * c - t * a * p - i * o * c + n * o * p + i * a * l - n * u * l) + g * (-r * a * l - t * s * c + t * a * h + r * o * c - n * o * h + n * s * l)
     },
     transpose: function() {
      var e, t = this.elements;
      return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
     },
     flattenToArrayOffset: function(e, t) {
      var n = this.elements;
      return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
     },
     getPosition: function() {
      var t = new e.Vector3;
      return function() {
       e.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
       var n = this.elements;
       return t.set(n[12], n[13], n[14])
      }
     }(),
     setPosition: function(e) {
      var t = this.elements;
      return t[12] = e.x, t[13] = e.y, t[14] = e.z, this
     },
     getInverse: function(t, n) {
      var r = this.elements,
       i = t.elements,
       o = i[0],
       a = i[4],
       s = i[8],
       u = i[12],
       l = i[1],
       c = i[5],
       h = i[9],
       p = i[13],
       d = i[2],
       f = i[6],
       m = i[10],
       g = i[14],
       v = i[3],
       y = i[7],
       b = i[11],
       w = i[15];
      r[0] = h * g * y - p * m * y + p * f * b - c * g * b - h * f * w + c * m * w, r[4] = u * m * y - s * g * y - u * f * b + a * g * b + s * f * w - a * m * w, r[8] = s * p * y - u * h * y + u * c * b - a * p * b - s * c * w + a * h * w, r[12] = u * h * f - s * p * f - u * c * m + a * p * m + s * c * g - a * h * g, r[1] = p * m * v - h * g * v - p * d * b + l * g * b + h * d * w - l * m * w, r[5] = s * g * v - u * m * v + u * d * b - o * g * b - s * d * w + o * m * w, r[9] = u * h * v - s * p * v - u * l * b + o * p * b + s * l * w - o * h * w, r[13] = s * p * d - u * h * d + u * l * m - o * p * m - s * l * g + o * h * g, r[2] = c * g * v - p * f * v + p * d * y - l * g * y - c * d * w + l * f * w, r[6] = u * f * v - a * g * v - u * d * y + o * g * y + a * d * w - o * f * w, r[10] = a * p * v - u * c * v + u * l * y - o * p * y - a * l * w + o * c * w, r[14] = u * c * d - a * p * d - u * l * f + o * p * f + a * l * g - o * c * g, r[3] = h * f * v - c * m * v - h * d * y + l * m * y + c * d * b - l * f * b, r[7] = a * m * v - s * f * v + s * d * y - o * m * y - a * d * b + o * f * b, r[11] = s * c * v - a * h * v - s * l * y + o * h * y + a * l * b - o * c * b, r[15] = a * h * d - s * c * d + s * l * f - o * h * f - a * l * m + o * c * m;
      var x = o * r[0] + l * r[4] + d * r[8] + v * r[12];
      if (0 == x) {
       var _ = "THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";
       if (n) throw new Error(_);
       return e.warn(_), this.identity(), this
      }
      return this.multiplyScalar(1 / x), this
     },
     translate: function() {
      e.error("THREE.Matrix4: .translate() has been removed.")
     },
     rotateX: function() {
      e.error("THREE.Matrix4: .rotateX() has been removed.")
     },
     rotateY: function() {
      e.error("THREE.Matrix4: .rotateY() has been removed.")
     },
     rotateZ: function() {
      e.error("THREE.Matrix4: .rotateZ() has been removed.")
     },
     rotateByAxis: function() {
      e.error("THREE.Matrix4: .rotateByAxis() has been removed.")
     },
     scale: function(e) {
      var t = this.elements,
       n = e.x,
       r = e.y,
       i = e.z;
      return t[0] *= n, t[4] *= r, t[8] *= i, t[1] *= n, t[5] *= r, t[9] *= i, t[2] *= n, t[6] *= r, t[10] *= i, t[3] *= n, t[7] *= r, t[11] *= i, this
     },
     getMaxScaleOnAxis: function() {
      var e = this.elements,
       t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
       n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
       r = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
      return Math.sqrt(Math.max(t, Math.max(n, r)))
     },
     makeTranslation: function(e, t, n) {
      return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
     },
     makeRotationX: function(e) {
      var t = Math.cos(e),
       n = Math.sin(e);
      return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
     },
     makeRotationY: function(e) {
      var t = Math.cos(e),
       n = Math.sin(e);
      return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
     },
     makeRotationZ: function(e) {
      var t = Math.cos(e),
       n = Math.sin(e);
      return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
     },
     makeRotationAxis: function(e, t) {
      var n = Math.cos(t),
       r = Math.sin(t),
       i = 1 - n,
       o = e.x,
       a = e.y,
       s = e.z,
       u = i * o,
       l = i * a;
      return this.set(u * o + n, u * a - r * s, u * s + r * a, 0, u * a + r * s, l * a + n, l * s - r * o, 0, u * s - r * a, l * s + r * o, i * s * s + n, 0, 0, 0, 0, 1), this
     },
     makeScale: function(e, t, n) {
      return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
     },
     compose: function(e, t, n) {
      return this.makeRotationFromQuaternion(t), this.scale(n), this.setPosition(e), this
     },
     decompose: function() {
      var t = new e.Vector3,
       n = new e.Matrix4;
      return function(e, r, i) {
       var o = this.elements,
        a = t.set(o[0], o[1], o[2]).length(),
        s = t.set(o[4], o[5], o[6]).length(),
        u = t.set(o[8], o[9], o[10]).length(),
        l = this.determinant();
       0 > l && (a = -a), e.x = o[12], e.y = o[13], e.z = o[14], n.elements.set(this.elements);
       var c = 1 / a,
        h = 1 / s,
        p = 1 / u;
       return n.elements[0] *= c, n.elements[1] *= c, n.elements[2] *= c, n.elements[4] *= h, n.elements[5] *= h, n.elements[6] *= h, n.elements[8] *= p, n.elements[9] *= p, n.elements[10] *= p, r.setFromRotationMatrix(n), i.x = a, i.y = s, i.z = u, this
      }
     }(),
     makeFrustum: function(e, t, n, r, i, o) {
      var a = this.elements,
       s = 2 * i / (t - e),
       u = 2 * i / (r - n),
       l = (t + e) / (t - e),
       c = (r + n) / (r - n),
       h = -(o + i) / (o - i),
       p = -2 * o * i / (o - i);
      return a[0] = s, a[4] = 0, a[8] = l, a[12] = 0, a[1] = 0, a[5] = u, a[9] = c, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = h, a[14] = p, a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
     },
     makePerspective: function(t, n, r, i) {
      var o = r * Math.tan(e.Math.degToRad(.5 * t)),
       a = -o,
       s = a * n,
       u = o * n;
      return this.makeFrustum(s, u, a, o, r, i)
     },
     makeOrthographic: function(e, t, n, r, i, o) {
      var a = this.elements,
       s = t - e,
       u = n - r,
       l = o - i,
       c = (t + e) / s,
       h = (n + r) / u,
       p = (o + i) / l;
      return a[0] = 2 / s, a[4] = 0, a[8] = 0, a[12] = -c, a[1] = 0, a[5] = 2 / u, a[9] = 0, a[13] = -h, a[2] = 0, a[6] = 0, a[10] = -2 / l, a[14] = -p, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
     },
     fromArray: function(e) {
      return this.elements.set(e), this
     },
     toArray: function() {
      var e = this.elements;
      return [e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]]
     },
     clone: function() {
      return (new e.Matrix4).fromArray(this.elements)
     }
    }, e.Ray = function(t, n) {
     this.origin = void 0 !== t ? t : new e.Vector3, this.direction = void 0 !== n ? n : new e.Vector3
    }, e.Ray.prototype = {
     constructor: e.Ray,
     set: function(e, t) {
      return this.origin.copy(e), this.direction.copy(t), this
     },
     copy: function(e) {
      return this.origin.copy(e.origin), this.direction.copy(e.direction), this
     },
     at: function(t, n) {
      var r = n || new e.Vector3;
      return r.copy(this.direction).multiplyScalar(t).add(this.origin)
     },
     recast: function() {
      var t = new e.Vector3;
      return function(e) {
       return this.origin.copy(this.at(e, t)), this
      }
     }(),
     closestPointToPoint: function(t, n) {
      var r = n || new e.Vector3;
      r.subVectors(t, this.origin);
      var i = r.dot(this.direction);
      return 0 > i ? r.copy(this.origin) : r.copy(this.direction).multiplyScalar(i).add(this.origin)
     },
     distanceToPoint: function() {
      var t = new e.Vector3;
      return function(e) {
       var n = t.subVectors(e, this.origin).dot(this.direction);
       return 0 > n ? this.origin.distanceTo(e) : (t.copy(this.direction).multiplyScalar(n).add(this.origin), t.distanceTo(e))
      }
     }(),
     distanceSqToSegment: function() {
      var t = new e.Vector3,
       n = new e.Vector3,
       r = new e.Vector3;
      return function(e, i, o, a) {
       t.copy(e).add(i).multiplyScalar(.5), n.copy(i).sub(e).normalize(), r.copy(this.origin).sub(t);
       var s, u, l, c, h = .5 * e.distanceTo(i),
        p = -this.direction.dot(n),
        d = r.dot(this.direction),
        f = -r.dot(n),
        m = r.lengthSq(),
        g = Math.abs(1 - p * p);
       if (g > 0)
        if (s = p * f - d, u = p * d - f, c = h * g, s >= 0)
         if (u >= -c)
          if (c >= u) {
           var v = 1 / g;
           s *= v, u *= v, l = s * (s + p * u + 2 * d) + u * (p * s + u + 2 * f) + m
          } else u = h, s = Math.max(0, -(p * u + d)), l = -s * s + u * (u + 2 * f) + m;
       else u = -h, s = Math.max(0, -(p * u + d)), l = -s * s + u * (u + 2 * f) + m;
       else -c >= u ? (s = Math.max(0, -(-p * h + d)), u = s > 0 ? -h : Math.min(Math.max(-h, -f), h), l = -s * s + u * (u + 2 * f) + m) : c >= u ? (s = 0, u = Math.min(Math.max(-h, -f), h), l = u * (u + 2 * f) + m) : (s = Math.max(0, -(p * h + d)), u = s > 0 ? h : Math.min(Math.max(-h, -f), h), l = -s * s + u * (u + 2 * f) + m);
       else u = p > 0 ? -h : h, s = Math.max(0, -(p * u + d)), l = -s * s + u * (u + 2 * f) + m;
       return o && o.copy(this.direction).multiplyScalar(s).add(this.origin), a && a.copy(n).multiplyScalar(u).add(t), l
      }
     }(),
     isIntersectionSphere: function(e) {
      return this.distanceToPoint(e.center) <= e.radius
     },
     intersectSphere: function() {
      var t = new e.Vector3;
      return function(e, n) {
       t.subVectors(e.center, this.origin);
       var r = t.dot(this.direction),
        i = t.dot(t) - r * r,
        o = e.radius * e.radius;
       if (i > o) return null;
       var a = Math.sqrt(o - i),
        s = r - a,
        u = r + a;
       return 0 > s && 0 > u ? null : 0 > s ? this.at(u, n) : this.at(s, n)
      }
     }(),
     isIntersectionPlane: function(e) {
      var t = e.distanceToPoint(this.origin);
      if (0 === t) return !0;
      var n = e.normal.dot(this.direction);
      return 0 > n * t ? !0 : !1
     },
     distanceToPlane: function(e) {
      var t = e.normal.dot(this.direction);
      if (0 == t) return 0 == e.distanceToPoint(this.origin) ? 0 : null;
      var n = -(this.origin.dot(e.normal) + e.constant) / t;
      return n >= 0 ? n : null
     },
     intersectPlane: function(e, t) {
      var n = this.distanceToPlane(e);
      return null === n ? null : this.at(n, t)
     },
     isIntersectionBox: function() {
      var t = new e.Vector3;
      return function(e) {
       return null !== this.intersectBox(e, t)
      }
     }(),
     intersectBox: function(e, t) {
      var n, r, i, o, a, s, u = 1 / this.direction.x,
       l = 1 / this.direction.y,
       c = 1 / this.direction.z,
       h = this.origin;
      return u >= 0 ? (n = (e.min.x - h.x) * u, r = (e.max.x - h.x) * u) : (n = (e.max.x - h.x) * u, r = (e.min.x - h.x) * u), l >= 0 ? (i = (e.min.y - h.y) * l, o = (e.max.y - h.y) * l) : (i = (e.max.y - h.y) * l, o = (e.min.y - h.y) * l), n > o || i > r ? null : ((i > n || n !== n) && (n = i), (r > o || r !== r) && (r = o), c >= 0 ? (a = (e.min.z - h.z) * c, s = (e.max.z - h.z) * c) : (a = (e.max.z - h.z) * c, s = (e.min.z - h.z) * c), n > s || a > r ? null : ((a > n || n !== n) && (n = a), (r > s || r !== r) && (r = s), 0 > r ? null : this.at(n >= 0 ? n : r, t)))
     },
     intersectTriangle: function() {
      var t = new e.Vector3,
       n = new e.Vector3,
       r = new e.Vector3,
       i = new e.Vector3;
      return function(e, o, a, s, u) {
       n.subVectors(o, e), r.subVectors(a, e), i.crossVectors(n, r);
       var l, c = this.direction.dot(i);
       if (c > 0) {
        if (s) return null;
        l = 1
       } else {
        if (!(0 > c)) return null;
        l = -1, c = -c
       }
       t.subVectors(this.origin, e);
       var h = l * this.direction.dot(r.crossVectors(t, r));
       if (0 > h) return null;
       var p = l * this.direction.dot(n.cross(t));
       if (0 > p) return null;
       if (h + p > c) return null;
       var d = -l * t.dot(i);
       return 0 > d ? null : this.at(d / c, u)
      }
     }(),
     applyMatrix4: function(e) {
      return this.direction.add(this.origin).applyMatrix4(e), this.origin.applyMatrix4(e), this.direction.sub(this.origin), this.direction.normalize(), this
     },
     equals: function(e) {
      return e.origin.equals(this.origin) && e.direction.equals(this.direction)
     },
     clone: function() {
      return (new e.Ray).copy(this)
     }
    }, e.Sphere = function(t, n) {
     this.center = void 0 !== t ? t : new e.Vector3, this.radius = void 0 !== n ? n : 0
    }, e.Sphere.prototype = {
     constructor: e.Sphere,
     set: function(e, t) {
      return this.center.copy(e), this.radius = t, this
     },
     setFromPoints: function() {
      var t = new e.Box3;
      return function(e, n) {
       var r = this.center;
       void 0 !== n ? r.copy(n) : t.setFromPoints(e).center(r);
       for (var i = 0, o = 0, a = e.length; a > o; o++) i = Math.max(i, r.distanceToSquared(e[o]));
       return this.radius = Math.sqrt(i), this
      }
     }(),
     copy: function(e) {
      return this.center.copy(e.center), this.radius = e.radius, this
     },
     empty: function() {
      return this.radius <= 0
     },
     containsPoint: function(e) {
      return e.distanceToSquared(this.center) <= this.radius * this.radius
     },
     distanceToPoint: function(e) {
      return e.distanceTo(this.center) - this.radius
     },
     intersectsSphere: function(e) {
      var t = this.radius + e.radius;
      return e.center.distanceToSquared(this.center) <= t * t
     },
     clampPoint: function(t, n) {
      var r = this.center.distanceToSquared(t),
       i = n || new e.Vector3;
      return i.copy(t), r > this.radius * this.radius && (i.sub(this.center).normalize(), i.multiplyScalar(this.radius).add(this.center)), i
     },
     getBoundingBox: function(t) {
      var n = t || new e.Box3;
      return n.set(this.center, this.center), n.expandByScalar(this.radius), n
     },
     applyMatrix4: function(e) {
      return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this
     },
     translate: function(e) {
      return this.center.add(e), this
     },
     equals: function(e) {
      return e.center.equals(this.center) && e.radius === this.radius
     },
     clone: function() {
      return (new e.Sphere).copy(this)
     }
    }, e.Frustum = function(t, n, r, i, o, a) {
     this.planes = [void 0 !== t ? t : new e.Plane, void 0 !== n ? n : new e.Plane, void 0 !== r ? r : new e.Plane, void 0 !== i ? i : new e.Plane, void 0 !== o ? o : new e.Plane, void 0 !== a ? a : new e.Plane]
    }, e.Frustum.prototype = {
     constructor: e.Frustum,
     set: function(e, t, n, r, i, o) {
      var a = this.planes;
      return a[0].copy(e), a[1].copy(t), a[2].copy(n), a[3].copy(r), a[4].copy(i), a[5].copy(o), this
     },
     copy: function(e) {
      for (var t = this.planes, n = 0; 6 > n; n++) t[n].copy(e.planes[n]);
      return this
     },
     setFromMatrix: function(e) {
      var t = this.planes,
       n = e.elements,
       r = n[0],
       i = n[1],
       o = n[2],
       a = n[3],
       s = n[4],
       u = n[5],
       l = n[6],
       c = n[7],
       h = n[8],
       p = n[9],
       d = n[10],
       f = n[11],
       m = n[12],
       g = n[13],
       v = n[14],
       y = n[15];
      return t[0].setComponents(a - r, c - s, f - h, y - m).normalize(), t[1].setComponents(a + r, c + s, f + h, y + m).normalize(), t[2].setComponents(a + i, c + u, f + p, y + g).normalize(), t[3].setComponents(a - i, c - u, f - p, y - g).normalize(), t[4].setComponents(a - o, c - l, f - d, y - v).normalize(), t[5].setComponents(a + o, c + l, f + d, y + v).normalize(), this
     },
     intersectsObject: function() {
      var t = new e.Sphere;
      return function(e) {
       var n = e.geometry;
       return null === n.boundingSphere && n.computeBoundingSphere(), t.copy(n.boundingSphere), t.applyMatrix4(e.matrixWorld), this.intersectsSphere(t)
      }
     }(),
     intersectsSphere: function(e) {
      for (var t = this.planes, n = e.center, r = -e.radius, i = 0; 6 > i; i++) {
       var o = t[i].distanceToPoint(n);
       if (r > o) return !1
      }
      return !0
     },
     intersectsBox: function() {
      var t = new e.Vector3,
       n = new e.Vector3;
      return function(e) {
       for (var r = this.planes, i = 0; 6 > i; i++) {
        var o = r[i];
        t.x = o.normal.x > 0 ? e.min.x : e.max.x, n.x = o.normal.x > 0 ? e.max.x : e.min.x, t.y = o.normal.y > 0 ? e.min.y : e.max.y, n.y = o.normal.y > 0 ? e.max.y : e.min.y, t.z = o.normal.z > 0 ? e.min.z : e.max.z, n.z = o.normal.z > 0 ? e.max.z : e.min.z;
        var a = o.distanceToPoint(t),
         s = o.distanceToPoint(n);
        if (0 > a && 0 > s) return !1
       }
       return !0
      }
     }(),
     containsPoint: function(e) {
      for (var t = this.planes, n = 0; 6 > n; n++)
       if (t[n].distanceToPoint(e) < 0) return !1;
      return !0
     },
     clone: function() {
      return (new e.Frustum).copy(this)
     }
    }, e.Plane = function(t, n) {
     this.normal = void 0 !== t ? t : new e.Vector3(1, 0, 0), this.constant = void 0 !== n ? n : 0
    }, e.Plane.prototype = {
     constructor: e.Plane,
     set: function(e, t) {
      return this.normal.copy(e), this.constant = t, this
     },
     setComponents: function(e, t, n, r) {
      return this.normal.set(e, t, n), this.constant = r, this
     },
     setFromNormalAndCoplanarPoint: function(e, t) {
      return this.normal.copy(e), this.constant = -t.dot(this.normal), this
     },
     setFromCoplanarPoints: function() {
      var t = new e.Vector3,
       n = new e.Vector3;
      return function(e, r, i) {
       var o = t.subVectors(i, r).cross(n.subVectors(e, r)).normalize();
       return this.setFromNormalAndCoplanarPoint(o, e), this
      }
     }(),
     copy: function(e) {
      return this.normal.copy(e.normal), this.constant = e.constant, this
     },
     normalize: function() {
      var e = 1 / this.normal.length();
      return this.normal.multiplyScalar(e), this.constant *= e, this
     },
     negate: function() {
      return this.constant *= -1, this.normal.negate(), this
     },
     distanceToPoint: function(e) {
      return this.normal.dot(e) + this.constant
     },
     distanceToSphere: function(e) {
      return this.distanceToPoint(e.center) - e.radius
     },
     projectPoint: function(e, t) {
      return this.orthoPoint(e, t).sub(e).negate()
     },
     orthoPoint: function(t, n) {
      var r = this.distanceToPoint(t),
       i = n || new e.Vector3;
      return i.copy(this.normal).multiplyScalar(r)
     },
     isIntersectionLine: function(e) {
      var t = this.distanceToPoint(e.start),
       n = this.distanceToPoint(e.end);
      return 0 > t && n > 0 || 0 > n && t > 0
     },
     intersectLine: function() {
      var t = new e.Vector3;
      return function(n, r) {
       var i = r || new e.Vector3,
        o = n.delta(t),
        a = this.normal.dot(o);
       if (0 == a) return 0 == this.distanceToPoint(n.start) ? i.copy(n.start) : void 0;
       var s = -(n.start.dot(this.normal) + this.constant) / a;
       return 0 > s || s > 1 ? void 0 : i.copy(o).multiplyScalar(s).add(n.start)
      }
     }(),
     coplanarPoint: function(t) {
      var n = t || new e.Vector3;
      return n.copy(this.normal).multiplyScalar(-this.constant)
     },
     applyMatrix4: function() {
      var t = new e.Vector3,
       n = new e.Vector3,
       r = new e.Matrix3;
      return function(e, i) {
       var o = i || r.getNormalMatrix(e),
        a = t.copy(this.normal).applyMatrix3(o),
        s = this.coplanarPoint(n);
       return s.applyMatrix4(e), this.setFromNormalAndCoplanarPoint(a, s), this
      }
     }(),
     translate: function(e) {
      return this.constant = this.constant - e.dot(this.normal), this
     },
     equals: function(e) {
      return e.normal.equals(this.normal) && e.constant == this.constant
     },
     clone: function() {
      return (new e.Plane).copy(this)
     }
    }, e.Math = {
     generateUUID: function() {
      var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
       n = new Array(36),
       r = 0;
      return function() {
       for (var i = 0; 36 > i; i++) 8 == i || 13 == i || 18 == i || 23 == i ? n[i] = "-" : 14 == i ? n[i] = "4" : (2 >= r && (r = 33554432 + 16777216 * Math.random() | 0), e = 15 & r, r >>= 4, n[i] = t[19 == i ? 3 & e | 8 : e]);
       return n.join("")
      }
     }(),
     clamp: function(e, t, n) {
      return t > e ? t : e > n ? n : e
     },
     clampBottom: function(e, t) {
      return t > e ? t : e
     },
     mapLinear: function(e, t, n, r, i) {
      return r + (e - t) * (i - r) / (n - t)
     },
     smoothstep: function(e, t, n) {
      return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * (3 - 2 * e))
     },
     smootherstep: function(e, t, n) {
      return t >= e ? 0 : e >= n ? 1 : (e = (e - t) / (n - t), e * e * e * (e * (6 * e - 15) + 10))
     },
     random16: function() {
      return (65280 * Math.random() + 255 * Math.random()) / 65535
     },
     randInt: function(e, t) {
      return Math.floor(this.randFloat(e, t))
     },
     randFloat: function(e, t) {
      return e + Math.random() * (t - e)
     },
     randFloatSpread: function(e) {
      return e * (.5 - Math.random())
     },
     degToRad: function() {
      var e = Math.PI / 180;
      return function(t) {
       return t * e
      }
     }(),
     radToDeg: function() {
      var e = 180 / Math.PI;
      return function(t) {
       return t * e
      }
     }(),
     isPowerOfTwo: function(e) {
      return 0 === (e & e - 1) && 0 !== e
     },
     nextPowerOfTwo: function(e) {
      return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, e++, e
     }
    }, e.Spline = function(t) {
     function n(e, t, n, r, i, o, a) {
      var s = .5 * (n - e),
       u = .5 * (r - t);
      return (2 * (t - n) + s + u) * a + (-3 * (t - n) - 2 * s - u) * o + s * i + t
     }
     this.points = t;
     var r, i, o, a, s, u, l, c, h, p = [],
      d = {
       x: 0,
       y: 0,
       z: 0
      };
     this.initFromArray = function(e) {
      this.points = [];
      for (var t = 0; t < e.length; t++) this.points[t] = {
       x: e[t][0],
       y: e[t][1],
       z: e[t][2]
      }
     }, this.getPoint = function(e) {
      return r = (this.points.length - 1) * e, i = Math.floor(r), o = r - i, p[0] = 0 === i ? i : i - 1, p[1] = i, p[2] = i > this.points.length - 2 ? this.points.length - 1 : i + 1, p[3] = i > this.points.length - 3 ? this.points.length - 1 : i + 2, u = this.points[p[0]], l = this.points[p[1]], c = this.points[p[2]], h = this.points[p[3]], a = o * o, s = o * a, d.x = n(u.x, l.x, c.x, h.x, o, a, s), d.y = n(u.y, l.y, c.y, h.y, o, a, s), d.z = n(u.z, l.z, c.z, h.z, o, a, s), d
     }, this.getControlPointsArray = function() {
      var e, t, n = this.points.length,
       r = [];
      for (e = 0; n > e; e++) t = this.points[e], r[e] = [t.x, t.y, t.z];
      return r
     }, this.getLength = function(t) {
      var n, r, i, o, a = 0,
       s = 0,
       u = 0,
       l = new e.Vector3,
       c = new e.Vector3,
       h = [],
       p = 0;
      for (h[0] = 0, t || (t = 100), i = this.points.length * t, l.copy(this.points[0]), n = 1; i > n; n++) r = n / i, o = this.getPoint(r), c.copy(o), p += c.distanceTo(l), l.copy(o), a = (this.points.length - 1) * r, s = Math.floor(a), s != u && (h[s] = p, u = s);
      return h[h.length] = p, {
       chunks: h,
       total: p
      }
     }, this.reparametrizeByArcLength = function(t) {
      var n, r, i, o, a, s, u, l, c = [],
       h = new e.Vector3,
       p = this.getLength();
      for (c.push(h.copy(this.points[0]).clone()), n = 1; n < this.points.length; n++) {
       for (s = p.chunks[n] - p.chunks[n - 1], u = Math.ceil(t * s / p.total), o = (n - 1) / (this.points.length - 1), a = n / (this.points.length - 1), r = 1; u - 1 > r; r++) i = o + r * (1 / u) * (a - o), l = this.getPoint(i), c.push(h.copy(l).clone());
       c.push(h.copy(this.points[n]).clone())
      }
      this.points = c
     }
    }, e.Triangle = function(t, n, r) {
     this.a = void 0 !== t ? t : new e.Vector3, this.b = void 0 !== n ? n : new e.Vector3, this.c = void 0 !== r ? r : new e.Vector3
    }, e.Triangle.normal = function() {
     var t = new e.Vector3;
     return function(n, r, i, o) {
      var a = o || new e.Vector3;
      a.subVectors(i, r), t.subVectors(n, r), a.cross(t);
      var s = a.lengthSq();
      return s > 0 ? a.multiplyScalar(1 / Math.sqrt(s)) : a.set(0, 0, 0)
     }
    }(), e.Triangle.barycoordFromPoint = function() {
     var t = new e.Vector3,
      n = new e.Vector3,
      r = new e.Vector3;
     return function(i, o, a, s, u) {
      t.subVectors(s, o), n.subVectors(a, o), r.subVectors(i, o);
      var l = t.dot(t),
       c = t.dot(n),
       h = t.dot(r),
       p = n.dot(n),
       d = n.dot(r),
       f = l * p - c * c,
       m = u || new e.Vector3;
      if (0 == f) return m.set(-2, -1, -1);
      var g = 1 / f,
       v = (p * h - c * d) * g,
       y = (l * d - c * h) * g;
      return m.set(1 - v - y, y, v)
     }
    }(), e.Triangle.containsPoint = function() {
     var t = new e.Vector3;
     return function(n, r, i, o) {
      var a = e.Triangle.barycoordFromPoint(n, r, i, o, t);
      return a.x >= 0 && a.y >= 0 && a.x + a.y <= 1
     }
    }(), e.Triangle.prototype = {
     constructor: e.Triangle,
     set: function(e, t, n) {
      return this.a.copy(e), this.b.copy(t), this.c.copy(n), this
     },
     setFromPointsAndIndices: function(e, t, n, r) {
      return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[r]), this
     },
     copy: function(e) {
      return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
     },
     area: function() {
      var t = new e.Vector3,
       n = new e.Vector3;
      return function() {
       return t.subVectors(this.c, this.b), n.subVectors(this.a, this.b), .5 * t.cross(n).length()
      }
     }(),
     midpoint: function(t) {
      var n = t || new e.Vector3;
      return n.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
     },
     normal: function(t) {
      return e.Triangle.normal(this.a, this.b, this.c, t)
     },
     plane: function(t) {
      var n = t || new e.Plane;
      return n.setFromCoplanarPoints(this.a, this.b, this.c)
     },
     barycoordFromPoint: function(t, n) {
      return e.Triangle.barycoordFromPoint(t, this.a, this.b, this.c, n)
     },
     containsPoint: function(t) {
      return e.Triangle.containsPoint(t, this.a, this.b, this.c)
     },
     equals: function(e) {
      return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
     },
     clone: function() {
      return (new e.Triangle).copy(this)
     }
    }, e.Clock = function(e) {
     this.autoStart = void 0 !== e ? e : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
    }, e.Clock.prototype = {
     constructor: e.Clock,
     start: function() {
      this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), this.oldTime = this.startTime, this.running = !0
     },
     stop: function() {
      this.getElapsedTime(), this.running = !1
     },
     getElapsedTime: function() {
      return this.getDelta(), this.elapsedTime
     },
     getDelta: function() {
      var e = 0;
      if (this.autoStart && !this.running && this.start(), this.running) {
       var t = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now();
       e = .001 * (t - this.oldTime), this.oldTime = t, this.elapsedTime += e
      }
      return e
     }
    }, e.EventDispatcher = function() {}, e.EventDispatcher.prototype = {
     constructor: e.EventDispatcher,
     apply: function(t) {
      t.addEventListener = e.EventDispatcher.prototype.addEventListener, t.hasEventListener = e.EventDispatcher.prototype.hasEventListener, t.removeEventListener = e.EventDispatcher.prototype.removeEventListener, t.dispatchEvent = e.EventDispatcher.prototype.dispatchEvent
     },
     addEventListener: function(e, t) {
      void 0 === this._listeners && (this._listeners = {});
      var n = this._listeners;
      void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].push(t)
     },
     hasEventListener: function(e, t) {
      if (void 0 === this._listeners) return !1;
      var n = this._listeners;
      return void 0 !== n[e] && -1 !== n[e].indexOf(t) ? !0 : !1
     },
     removeEventListener: function(e, t) {
      if (void 0 !== this._listeners) {
       var n = this._listeners,
        r = n[e];
       if (void 0 !== r) {
        var i = r.indexOf(t); - 1 !== i && r.splice(i, 1)
       }
      }
     },
     dispatchEvent: function(e) {
      if (void 0 !== this._listeners) {
       var t = this._listeners,
        n = t[e.type];
       if (void 0 !== n) {
        e.target = this;
        for (var r = [], i = n.length, o = 0; i > o; o++) r[o] = n[o];
        for (var o = 0; i > o; o++) r[o].call(this, e)
       }
      }
     }
    },
    function(e) {
     e.Raycaster = function(t, n, r, i) {
      this.ray = new e.Ray(t, n), this.near = r || 0, this.far = i || 1 / 0, this.params = {
       Sprite: {},
       Mesh: {},
       PointCloud: {
        threshold: 1
       },
       LOD: {},
       Line: {}
      }
     };
     var t = function(e, t) {
       return e.distance - t.distance
      },
      n = function(e, t, r, i) {
       if (e.raycast(t, r), i === !0)
        for (var o = e.children, a = 0, s = o.length; s > a; a++) n(o[a], t, r, !0)
      };
     e.Raycaster.prototype = {
      constructor: e.Raycaster,
      precision: 1e-4,
      linePrecision: 1,
      set: function(e, t) {
       this.ray.set(e, t)
      },
      setFromCamera: function(t, n) {
       n instanceof e.PerspectiveCamera ? (this.ray.origin.copy(n.position), this.ray.direction.set(t.x, t.y, .5).unproject(n).sub(n.position).normalize()) : n instanceof e.OrthographicCamera ? (this.ray.origin.set(t.x, t.y, -1).unproject(n), this.ray.direction.set(0, 0, -1).transformDirection(n.matrixWorld)) : e.error("THREE.Raycaster: Unsupported camera type.")
      },
      intersectObject: function(e, r) {
       var i = [];
       return n(e, this, i, r), i.sort(t), i
      },
      intersectObjects: function(r, i) {
       var o = [];
       if (r instanceof Array == !1) return e.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), o;
       for (var a = 0, s = r.length; s > a; a++) n(r[a], this, o, i);
       return o.sort(t), o
      }
     }
    }(e), e.Object3D = function() {
     Object.defineProperty(this, "id", {
      value: e.Object3DIdCount++
     }), this.uuid = e.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = void 0, this.children = [], this.up = e.Object3D.DefaultUp.clone();
     var t = new e.Vector3,
      n = new e.Euler,
      r = new e.Quaternion,
      i = new e.Vector3(1, 1, 1),
      o = function() {
       r.setFromEuler(n, !1)
      },
      a = function() {
       n.setFromQuaternion(r, void 0, !1)
      };
     n.onChange(o), r.onChange(a), Object.defineProperties(this, {
      position: {
       enumerable: !0,
       value: t
      },
      rotation: {
       enumerable: !0,
       value: n
      },
      quaternion: {
       enumerable: !0,
       value: r
      },
      scale: {
       enumerable: !0,
       value: i
      }
     }), this.rotationAutoUpdate = !0, this.matrix = new e.Matrix4, this.matrixWorld = new e.Matrix4, this.matrixAutoUpdate = !0, this.matrixWorldNeedsUpdate = !1, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
    }, e.Object3D.DefaultUp = new e.Vector3(0, 1, 0), e.Object3D.prototype = {
     constructor: e.Object3D,
     get eulerOrder() {
      return e.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order
     },
     set eulerOrder(t) {
      e.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order = t
     },
     get useQuaternion() {
      e.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
     },
     set useQuaternion(t) {
      e.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
     },
     applyMatrix: function(e) {
      this.matrix.multiplyMatrices(e, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
     },
     setRotationFromAxisAngle: function(e, t) {
      this.quaternion.setFromAxisAngle(e, t)
     },
     setRotationFromEuler: function(e) {
      this.quaternion.setFromEuler(e, !0)
     },
     setRotationFromMatrix: function(e) {
      this.quaternion.setFromRotationMatrix(e)
     },
     setRotationFromQuaternion: function(e) {
      this.quaternion.copy(e)
     },
     rotateOnAxis: function() {
      var t = new e.Quaternion;
      return function(e, n) {
       return t.setFromAxisAngle(e, n), this.quaternion.multiply(t), this
      }
     }(),
     rotateX: function() {
      var t = new e.Vector3(1, 0, 0);
      return function(e) {
       return this.rotateOnAxis(t, e)
      }
     }(),
     rotateY: function() {
      var t = new e.Vector3(0, 1, 0);
      return function(e) {
       return this.rotateOnAxis(t, e)
      }
     }(),
     rotateZ: function() {
      var t = new e.Vector3(0, 0, 1);
      return function(e) {
       return this.rotateOnAxis(t, e)
      }
     }(),
     translateOnAxis: function() {
      var t = new e.Vector3;
      return function(e, n) {
       return t.copy(e).applyQuaternion(this.quaternion), this.position.add(t.multiplyScalar(n)), this
      }
     }(),
     translate: function(t, n) {
      return e.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(n, t)
     },
     translateX: function() {
      var t = new e.Vector3(1, 0, 0);
      return function(e) {
       return this.translateOnAxis(t, e)
      }
     }(),
     translateY: function() {
      var t = new e.Vector3(0, 1, 0);
      return function(e) {
       return this.translateOnAxis(t, e)
      }
     }(),
     translateZ: function() {
      var t = new e.Vector3(0, 0, 1);
      return function(e) {
       return this.translateOnAxis(t, e)
      }
     }(),
     localToWorld: function(e) {
      return e.applyMatrix4(this.matrixWorld)
     },
     worldToLocal: function() {
      var t = new e.Matrix4;
      return function(e) {
       return e.applyMatrix4(t.getInverse(this.matrixWorld))
      }
     }(),
     lookAt: function() {
      var t = new e.Matrix4;
      return function(e) {
       t.lookAt(e, this.position, this.up), this.quaternion.setFromRotationMatrix(t)
      }
     }(),
     add: function(t) {
      if (arguments.length > 1) {
       for (var n = 0; n < arguments.length; n++) this.add(arguments[n]);
       return this
      }
      return t === this ? (e.error("THREE.Object3D.add: object can't be added as a child of itself.", t), this) : (t instanceof e.Object3D ? (void 0 !== t.parent && t.parent.remove(t), t.parent = this, t.dispatchEvent({
       type: "added"
      }), this.children.push(t)) : e.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", t), this)
     },
     remove: function(e) {
      if (arguments.length > 1)
       for (var t = 0; t < arguments.length; t++) this.remove(arguments[t]);
      var n = this.children.indexOf(e); - 1 !== n && (e.parent = void 0, e.dispatchEvent({
       type: "removed"
      }), this.children.splice(n, 1))
     },
     getChildByName: function(t) {
      return e.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(t)
     },
     getObjectById: function(e) {
      return this.getObjectByProperty("id", e)
     },
     getObjectByName: function(e) {
      return this.getObjectByProperty("name", e)
     },
     getObjectByProperty: function(e, t) {
      if (this[e] === t) return this;
      for (var n = 0, r = this.children.length; r > n; n++) {
       var i = this.children[n],
        o = i.getObjectByProperty(e, t);
       if (void 0 !== o) return o
      }
      return void 0
     },
     getWorldPosition: function(t) {
      var n = t || new e.Vector3;
      return this.updateMatrixWorld(!0), n.setFromMatrixPosition(this.matrixWorld)
     },
     getWorldQuaternion: function() {
      var t = new e.Vector3,
       n = new e.Vector3;
      return function(r) {
       var i = r || new e.Quaternion;
       return this.updateMatrixWorld(!0), this.matrixWorld.decompose(t, i, n), i
      }
     }(),
     getWorldRotation: function() {
      var t = new e.Quaternion;
      return function(n) {
       var r = n || new e.Euler;
       return this.getWorldQuaternion(t), r.setFromQuaternion(t, this.rotation.order, !1)
      }
     }(),
     getWorldScale: function() {
      var t = new e.Vector3,
       n = new e.Quaternion;
      return function(r) {
       var i = r || new e.Vector3;
       return this.updateMatrixWorld(!0), this.matrixWorld.decompose(t, n, i), i
      }
     }(),
     getWorldDirection: function() {
      var t = new e.Quaternion;
      return function(n) {
       var r = n || new e.Vector3;
       return this.getWorldQuaternion(t), r.set(0, 0, 1).applyQuaternion(t)
      }
     }(),
     raycast: function() {},
     traverse: function(e) {
      e(this);
      for (var t = 0, n = this.children.length; n > t; t++) this.children[t].traverse(e)
     },
     traverseVisible: function(e) {
      if (this.visible !== !1) {
       e(this);
       for (var t = 0, n = this.children.length; n > t; t++) this.children[t].traverseVisible(e)
      }
     },
     traverseAncestors: function(e) {
      this.parent && (e(this.parent), this.parent.traverseAncestors(e))
     },
     updateMatrix: function() {
      this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
     },
     updateMatrixWorld: function(e) {
      this.matrixAutoUpdate === !0 && this.updateMatrix(), (this.matrixWorldNeedsUpdate === !0 || e === !0) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
      for (var t = 0, n = this.children.length; n > t; t++) this.children[t].updateMatrixWorld(e)
     },
     toJSON: function() {
      var t = {
        metadata: {
         version: 4.3,
         type: "Object",
         generator: "ObjectExporter"
        }
       },
       n = {},
       r = function(e) {
        if (void 0 === t.geometries && (t.geometries = []), void 0 === n[e.uuid]) {
         var r = e.toJSON();
         delete r.metadata, n[e.uuid] = r, t.geometries.push(r)
        }
        return e.uuid
       },
       i = {},
       o = function(e) {
        if (void 0 === t.materials && (t.materials = []), void 0 === i[e.uuid]) {
         var n = e.toJSON();
         delete n.metadata, i[e.uuid] = n, t.materials.push(n)
        }
        return e.uuid
       },
       a = function(t) {
        var n = {};
        if (n.uuid = t.uuid, n.type = t.type, "" !== t.name && (n.name = t.name), "{}" !== JSON.stringify(t.userData) && (n.userData = t.userData), t.visible !== !0 && (n.visible = t.visible), t instanceof e.PerspectiveCamera ? (n.fov = t.fov, n.aspect = t.aspect, n.near = t.near, n.far = t.far) : t instanceof e.OrthographicCamera ? (n.left = t.left, n.right = t.right, n.top = t.top, n.bottom = t.bottom, n.near = t.near, n.far = t.far) : t instanceof e.AmbientLight ? n.color = t.color.getHex() : t instanceof e.DirectionalLight ? (n.color = t.color.getHex(), n.intensity = t.intensity) : t instanceof e.PointLight ? (n.color = t.color.getHex(), n.intensity = t.intensity, n.distance = t.distance, n.decay = t.decay) : t instanceof e.SpotLight ? (n.color = t.color.getHex(), n.intensity = t.intensity, n.distance = t.distance, n.angle = t.angle, n.exponent = t.exponent, n.decay = t.decay) : t instanceof e.HemisphereLight ? (n.color = t.color.getHex(), n.groundColor = t.groundColor.getHex()) : t instanceof e.Mesh || t instanceof e.Line || t instanceof e.PointCloud ? (n.geometry = r(t.geometry), n.material = o(t.material), t instanceof e.Line && (n.mode = t.mode)) : t instanceof e.Sprite && (n.material = o(t.material)), n.matrix = t.matrix.toArray(), t.children.length > 0) {
         n.children = [];
         for (var i = 0; i < t.children.length; i++) n.children.push(a(t.children[i]))
        }
        return n
       };
      return t.object = a(this), t
     },
     clone: function(t, n) {
      if (void 0 === t && (t = new e.Object3D), void 0 === n && (n = !0), t.name = this.name, t.up.copy(this.up), t.position.copy(this.position), t.quaternion.copy(this.quaternion), t.scale.copy(this.scale), t.rotationAutoUpdate = this.rotationAutoUpdate, t.matrix.copy(this.matrix), t.matrixWorld.copy(this.matrixWorld), t.matrixAutoUpdate = this.matrixAutoUpdate, t.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, t.visible = this.visible, t.castShadow = this.castShadow, t.receiveShadow = this.receiveShadow, t.frustumCulled = this.frustumCulled, t.userData = JSON.parse(JSON.stringify(this.userData)), n === !0)
       for (var r = 0; r < this.children.length; r++) {
        var i = this.children[r];
        t.add(i.clone())
       }
      return t
     }
    }, e.EventDispatcher.prototype.apply(e.Object3D.prototype), e.Object3DIdCount = 0, e.Face3 = function(t, n, r, i, o, a) {
     this.a = t, this.b = n, this.c = r, this.normal = i instanceof e.Vector3 ? i : new e.Vector3, this.vertexNormals = i instanceof Array ? i : [], this.color = o instanceof e.Color ? o : new e.Color, this.vertexColors = o instanceof Array ? o : [], this.vertexTangents = [], this.materialIndex = void 0 !== a ? a : 0
    }, e.Face3.prototype = {
     constructor: e.Face3,
     clone: function() {
      var t = new e.Face3(this.a, this.b, this.c);
      t.normal.copy(this.normal), t.color.copy(this.color), t.materialIndex = this.materialIndex;
      for (var n = 0, r = this.vertexNormals.length; r > n; n++) t.vertexNormals[n] = this.vertexNormals[n].clone();
      for (var n = 0, r = this.vertexColors.length; r > n; n++) t.vertexColors[n] = this.vertexColors[n].clone();
      for (var n = 0, r = this.vertexTangents.length; r > n; n++) t.vertexTangents[n] = this.vertexTangents[n].clone();
      return t
     }
    }, e.Face4 = function(t, n, r, i, o, a, s) {
     return e.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new e.Face3(t, n, r, o, a, s)
    }, e.BufferAttribute = function(e, t) {
     this.array = e, this.itemSize = t, this.needsUpdate = !1
    }, e.BufferAttribute.prototype = {
     constructor: e.BufferAttribute,
     get length() {
      return this.array.length
     },
     copyAt: function(e, t, n) {
      e *= this.itemSize, n *= t.itemSize;
      for (var r = 0, i = this.itemSize; i > r; r++) this.array[e + r] = t.array[n + r];
      return this
     },
     set: function(e, t) {
      return void 0 === t && (t = 0), this.array.set(e, t), this
     },
     setX: function(e, t) {
      return this.array[e * this.itemSize] = t, this
     },
     setY: function(e, t) {
      return this.array[e * this.itemSize + 1] = t, this
     },
     setZ: function(e, t) {
      return this.array[e * this.itemSize + 2] = t, this
     },
     setXY: function(e, t, n) {
      return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this
     },
     setXYZ: function(e, t, n, r) {
      return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this.array[e + 2] = r, this
     },
     setXYZW: function(e, t, n, r, i) {
      return e *= this.itemSize, this.array[e] = t, this.array[e + 1] = n, this.array[e + 2] = r, this.array[e + 3] = i, this
     },
     clone: function() {
      return new e.BufferAttribute(new this.array.constructor(this.array), this.itemSize)
     }
    }, e.Int8Attribute = function(t, n) {
     return e.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Uint8Attribute = function(t, n) {
     return e.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Uint8ClampedAttribute = function(t, n) {
     return e.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Int16Attribute = function(t, n) {
     return e.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Uint16Attribute = function(t, n) {
     return e.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Int32Attribute = function(t, n) {
     return e.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Uint32Attribute = function(t, n) {
     return e.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Float32Attribute = function(t, n) {
     return e.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.Float64Attribute = function(t, n) {
     return e.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new e.BufferAttribute(t, n)
    }, e.DynamicBufferAttribute = function(t, n) {
     e.BufferAttribute.call(this, t, n), this.updateRange = {
      offset: 0,
      count: -1
     }
    }, e.DynamicBufferAttribute.prototype = Object.create(e.BufferAttribute.prototype), e.DynamicBufferAttribute.prototype.constructor = e.DynamicBufferAttribute, e.DynamicBufferAttribute.prototype.clone = function() {
     return new e.DynamicBufferAttribute(new this.array.constructor(this.array), this.itemSize)
    }, e.BufferGeometry = function() {
     Object.defineProperty(this, "id", {
      value: e.GeometryIdCount++
     }), this.uuid = e.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.attributes = {}, this.attributesKeys = [], this.drawcalls = [], this.offsets = this.drawcalls, this.boundingBox = null, this.boundingSphere = null
    }, e.BufferGeometry.prototype = {
     constructor: e.BufferGeometry,
     addAttribute: function(t, n) {
      return n instanceof e.BufferAttribute == !1 ? (e.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), this.attributes[t] = {
       array: arguments[1],
       itemSize: arguments[2]
      }, void 0) : (this.attributes[t] = n, this.attributesKeys = Object.keys(this.attributes), void 0)
     },
     getAttribute: function(e) {
      return this.attributes[e]
     },
     addDrawCall: function(e, t, n) {
      this.drawcalls.push({
       start: e,
       count: t,
       index: void 0 !== n ? n : 0
      })
     },
     applyMatrix: function(t) {
      var n = this.attributes.position;
      void 0 !== n && (t.applyToVector3Array(n.array), n.needsUpdate = !0);
      var r = this.attributes.normal;
      if (void 0 !== r) {
       var i = (new e.Matrix3).getNormalMatrix(t);
       i.applyToVector3Array(r.array), r.needsUpdate = !0
      }
      null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere()
     },
     center: function() {
      this.computeBoundingBox();
      var t = this.boundingBox.center().negate();
      return this.applyMatrix((new e.Matrix4).setPosition(t)), t
     },
     fromGeometry: function(t, n) {
      n = n || {
       vertexColors: e.NoColors
      };
      var r = t.vertices,
       i = t.faces,
       o = t.faceVertexUvs,
       a = n.vertexColors,
       s = o[0].length > 0,
       u = 3 == i[0].vertexNormals.length,
       l = new Float32Array(3 * i.length * 3);
      this.addAttribute("position", new e.BufferAttribute(l, 3));
      var c = new Float32Array(3 * i.length * 3);
      if (this.addAttribute("normal", new e.BufferAttribute(c, 3)), a !== e.NoColors) {
       var h = new Float32Array(3 * i.length * 3);
       this.addAttribute("color", new e.BufferAttribute(h, 3))
      }
      if (s === !0) {
       var p = new Float32Array(3 * i.length * 2);
       this.addAttribute("uv", new e.BufferAttribute(p, 2))
      }
      for (var d = 0, f = 0, m = 0; d < i.length; d++, f += 6, m += 9) {
       var g = i[d],
        v = r[g.a],
        y = r[g.b],
        b = r[g.c];
       if (l[m] = v.x, l[m + 1] = v.y, l[m + 2] = v.z, l[m + 3] = y.x, l[m + 4] = y.y, l[m + 5] = y.z, l[m + 6] = b.x, l[m + 7] = b.y, l[m + 8] = b.z, u === !0) {
        var w = g.vertexNormals[0],
         x = g.vertexNormals[1],
         _ = g.vertexNormals[2];
        c[m] = w.x, c[m + 1] = w.y, c[m + 2] = w.z, c[m + 3] = x.x, c[m + 4] = x.y, c[m + 5] = x.z, c[m + 6] = _.x, c[m + 7] = _.y, c[m + 8] = _.z
       } else {
        var S = g.normal;
        c[m] = S.x, c[m + 1] = S.y, c[m + 2] = S.z, c[m + 3] = S.x, c[m + 4] = S.y, c[m + 5] = S.z, c[m + 6] = S.x, c[m + 7] = S.y, c[m + 8] = S.z
       }
       if (a === e.FaceColors) {
        var C = g.color;
        h[m] = C.r, h[m + 1] = C.g, h[m + 2] = C.b, h[m + 3] = C.r, h[m + 4] = C.g, h[m + 5] = C.b, h[m + 6] = C.r, h[m + 7] = C.g, h[m + 8] = C.b
       } else if (a === e.VertexColors) {
        var E = g.vertexColors[0],
         T = g.vertexColors[1],
         M = g.vertexColors[2];
        h[m] = E.r, h[m + 1] = E.g, h[m + 2] = E.b, h[m + 3] = T.r, h[m + 4] = T.g, h[m + 5] = T.b, h[m + 6] = M.r, h[m + 7] = M.g, h[m + 8] = M.b
       }
       if (s === !0) {
        var A = o[0][d][0],
         P = o[0][d][1],
         R = o[0][d][2];
        p[f] = A.x, p[f + 1] = A.y, p[f + 2] = P.x, p[f + 3] = P.y, p[f + 4] = R.x, p[f + 5] = R.y
       }
      }
      return this.computeBoundingSphere(), this
     },
     computeBoundingBox: function() {
      var t = new e.Vector3;
      return function() {
       null === this.boundingBox && (this.boundingBox = new e.Box3);
       var n = this.attributes.position.array;
       if (n) {
        var r = this.boundingBox;
        r.makeEmpty();
        for (var i = 0, o = n.length; o > i; i += 3) t.set(n[i], n[i + 1], n[i + 2]), r.expandByPoint(t)
       }(void 0 === n || 0 === n.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && e.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')
      }
     }(),
     computeBoundingSphere: function() {
      var t = new e.Box3,
       n = new e.Vector3;
      return function() {
       null === this.boundingSphere && (this.boundingSphere = new e.Sphere);
       var r = this.attributes.position.array;
       if (r) {
        t.makeEmpty();
        for (var i = this.boundingSphere.center, o = 0, a = r.length; a > o; o += 3) n.set(r[o], r[o + 1], r[o + 2]), t.expandByPoint(n);
        t.center(i);
        for (var s = 0, o = 0, a = r.length; a > o; o += 3) n.set(r[o], r[o + 1], r[o + 2]), s = Math.max(s, i.distanceToSquared(n));
        this.boundingSphere.radius = Math.sqrt(s), isNaN(this.boundingSphere.radius) && e.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
       }
      }
     }(),
     computeFaceNormals: function() {},
     computeVertexNormals: function() {
      var t = this.attributes;
      if (t.position) {
       var n = t.position.array;
       if (void 0 === t.normal) this.addAttribute("normal", new e.BufferAttribute(new Float32Array(n.length), 3));
       else
        for (var r = t.normal.array, i = 0, o = r.length; o > i; i++) r[i] = 0;
       var a, s, u, r = t.normal.array,
        l = new e.Vector3,
        c = new e.Vector3,
        h = new e.Vector3,
        p = new e.Vector3,
        d = new e.Vector3;
       if (t.index)
        for (var f = t.index.array, m = this.offsets.length > 0 ? this.offsets : [{
          start: 0,
          count: f.length,
          index: 0
         }], g = 0, v = m.length; v > g; ++g)
         for (var y = m[g].start, b = m[g].count, w = m[g].index, i = y, o = y + b; o > i; i += 3) a = 3 * (w + f[i]), s = 3 * (w + f[i + 1]), u = 3 * (w + f[i + 2]), l.fromArray(n, a), c.fromArray(n, s), h.fromArray(n, u), p.subVectors(h, c), d.subVectors(l, c), p.cross(d), r[a] += p.x, r[a + 1] += p.y, r[a + 2] += p.z, r[s] += p.x, r[s + 1] += p.y, r[s + 2] += p.z, r[u] += p.x, r[u + 1] += p.y, r[u + 2] += p.z;
       else
        for (var i = 0, o = n.length; o > i; i += 9) l.fromArray(n, i), c.fromArray(n, i + 3), h.fromArray(n, i + 6), p.subVectors(h, c), d.subVectors(l, c), p.cross(d), r[i] = p.x, r[i + 1] = p.y, r[i + 2] = p.z, r[i + 3] = p.x, r[i + 4] = p.y, r[i + 5] = p.z, r[i + 6] = p.x, r[i + 7] = p.y, r[i + 8] = p.z;
       this.normalizeNormals(), t.normal.needsUpdate = !0
      }
     },
     computeTangents: function() {
      function t(e, t, n) {
       R.fromArray(i, 3 * e), I.fromArray(i, 3 * t), k.fromArray(i, 3 * n), D.fromArray(a, 2 * e), V.fromArray(a, 2 * t), L.fromArray(a, 2 * n), p = I.x - R.x, d = k.x - R.x, f = I.y - R.y, m = k.y - R.y, g = I.z - R.z, v = k.z - R.z, y = V.x - D.x, b = L.x - D.x, w = V.y - D.y, x = L.y - D.y, _ = 1 / (y * x - b * w), B.set((x * p - w * d) * _, (x * f - w * m) * _, (x * g - w * v) * _), O.set((y * d - b * p) * _, (y * m - b * f) * _, (y * v - b * g) * _), l[e].add(B), l[t].add(B), l[n].add(B), c[e].add(O), c[t].add(O), c[n].add(O)
      }

      function n(e) {
       X.fromArray(o, 3 * e), Y.copy(X), H = l[e], q.copy(H), q.sub(X.multiplyScalar(X.dot(H))).normalize(), W.crossVectors(Y, H), j = W.dot(c[e]), G = 0 > j ? -1 : 1, u[4 * e] = q.x, u[4 * e + 1] = q.y, u[4 * e + 2] = q.z, u[4 * e + 3] = G
      }
      if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv) return e.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()"), void 0;
      var r = this.attributes.index.array,
       i = this.attributes.position.array,
       o = this.attributes.normal.array,
       a = this.attributes.uv.array,
       s = i.length / 3;
      void 0 === this.attributes.tangent && this.addAttribute("tangent", new e.BufferAttribute(new Float32Array(4 * s), 4));
      for (var u = this.attributes.tangent.array, l = [], c = [], h = 0; s > h; h++) l[h] = new e.Vector3, c[h] = new e.Vector3;
      var p, d, f, m, g, v, y, b, w, x, _, S, C, E, T, M, A, P, R = new e.Vector3,
       I = new e.Vector3,
       k = new e.Vector3,
       D = new e.Vector2,
       V = new e.Vector2,
       L = new e.Vector2,
       B = new e.Vector3,
       O = new e.Vector3;
      0 === this.drawcalls.length && this.addDrawCall(0, r.length, 0);
      var N = this.drawcalls;
      for (E = 0, T = N.length; T > E; ++E) {
       var F = N[E].start,
        U = N[E].count,
        z = N[E].index;
       for (S = F, C = F + U; C > S; S += 3) M = z + r[S], A = z + r[S + 1], P = z + r[S + 2], t(M, A, P)
      }
      var G, H, j, q = new e.Vector3,
       W = new e.Vector3,
       X = new e.Vector3,
       Y = new e.Vector3;
      for (E = 0, T = N.length; T > E; ++E) {
       var F = N[E].start,
        U = N[E].count,
        z = N[E].index;
       for (S = F, C = F + U; C > S; S += 3) M = z + r[S], A = z + r[S + 1], P = z + r[S + 2], n(M), n(A), n(P)
      }
     },
     computeOffsets: function(e) {
      void 0 === e && (e = 65535);
      for (var t = this.attributes.index.array, n = this.attributes.position.array, r = t.length / 3, i = new Uint16Array(t.length), o = 0, a = 0, s = [{
        start: 0,
        count: 0,
        index: 0
       }], u = s[0], l = 0, c = 0, h = new Int32Array(6), p = new Int32Array(n.length), d = new Int32Array(n.length), f = 0; f < n.length; f++) p[f] = -1, d[f] = -1;
      for (var m = 0; r > m; m++) {
       c = 0;
       for (var g = 0; 3 > g; g++) {
        var v = t[3 * m + g]; - 1 == p[v] ? (h[2 * g] = v, h[2 * g + 1] = -1, c++) : p[v] < u.index ? (h[2 * g] = v, h[2 * g + 1] = -1, l++) : (h[2 * g] = v, h[2 * g + 1] = p[v])
       }
       var y = a + c;
       if (y > u.index + e) {
        var b = {
         start: o,
         count: 0,
         index: a
        };
        s.push(b), u = b;
        for (var w = 0; 6 > w; w += 2) {
         var x = h[w + 1];
         x > -1 && x < u.index && (h[w + 1] = -1)
        }
       }
       for (var w = 0; 6 > w; w += 2) {
        var v = h[w],
         x = h[w + 1]; - 1 === x && (x = a++), p[v] = x, d[x] = v, i[o++] = x - u.index, u.count++
       }
      }
      return this.reorderBuffers(i, d, a), this.offsets = s, this.drawcalls = s, s
     },
     merge: function(t, n) {
      if (t instanceof e.BufferGeometry == !1) return e.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", t), void 0;
      void 0 === n && (n = 0);
      var r = this.attributes;
      for (var i in r)
       if (void 0 !== t.attributes[i])
        for (var o = r[i], a = o.array, s = t.attributes[i], u = s.array, l = s.itemSize, c = 0, h = l * n; c < u.length; c++, h++) a[h] = u[c];
      return this
     },
     normalizeNormals: function() {
      for (var e, t, n, r, i = this.attributes.normal.array, o = 0, a = i.length; a > o; o += 3) e = i[o], t = i[o + 1], n = i[o + 2], r = 1 / Math.sqrt(e * e + t * t + n * n), i[o] *= r, i[o + 1] *= r, i[o + 2] *= r
     },
     reorderBuffers: function(e, t, n) {
      var r = {};
      for (var i in this.attributes)
       if ("index" != i) {
        var o = this.attributes[i].array;
        r[i] = new o.constructor(this.attributes[i].itemSize * n)
       } for (var a = 0; n > a; a++) {
       var s = t[a];
       for (var i in this.attributes)
        if ("index" != i)
         for (var u = this.attributes[i].array, l = this.attributes[i].itemSize, c = r[i], h = 0; l > h; h++) c[a * l + h] = u[s * l + h]
      }
      this.attributes.index.array = e;
      for (var i in this.attributes) "index" != i && (this.attributes[i].array = r[i], this.attributes[i].numItems = this.attributes[i].itemSize * n)
     },
     toJSON: function() {
      var e = {
        metadata: {
         version: 4,
         type: "BufferGeometry",
         generator: "BufferGeometryExporter"
        },
        uuid: this.uuid,
        type: this.type,
        data: {
         attributes: {}
        }
       },
       t = this.attributes,
       n = this.offsets,
       r = this.boundingSphere;
      for (var i in t) {
       var o = t[i],
        a = Array.prototype.slice.call(o.array);
       e.data.attributes[i] = {
        itemSize: o.itemSize,
        type: o.array.constructor.name,
        array: a
       }
      }
      return n.length > 0 && (e.data.offsets = JSON.parse(JSON.stringify(n))), null !== r && (e.data.boundingSphere = {
       center: r.center.toArray(),
       radius: r.radius
      }), e
     },
     clone: function() {
      var t = new e.BufferGeometry;
      for (var n in this.attributes) {
       var r = this.attributes[n];
       t.addAttribute(n, r.clone())
      }
      for (var i = 0, o = this.offsets.length; o > i; i++) {
       var a = this.offsets[i];
       t.offsets.push({
        start: a.start,
        index: a.index,
        count: a.count
       })
      }
      return t
     },
     dispose: function() {
      this.dispatchEvent({
       type: "dispose"
      })
     }
    }, e.EventDispatcher.prototype.apply(e.BufferGeometry.prototype), e.Geometry = function() {
     Object.defineProperty(this, "id", {
      value: e.GeometryIdCount++
     }), this.uuid = e.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
      []
     ], this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.dynamic = !0, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.tangentsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
    }, e.Geometry.prototype = {
     constructor: e.Geometry,
     applyMatrix: function(t) {
      for (var n = (new e.Matrix3).getNormalMatrix(t), r = 0, i = this.vertices.length; i > r; r++) {
       var o = this.vertices[r];
       o.applyMatrix4(t)
      }
      for (var r = 0, i = this.faces.length; i > r; r++) {
       var a = this.faces[r];
       a.normal.applyMatrix3(n).normalize();
       for (var s = 0, u = a.vertexNormals.length; u > s; s++) a.vertexNormals[s].applyMatrix3(n).normalize()
      }
      null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0
     },
     fromBufferGeometry: function(t) {
      for (var n = this, r = t.attributes, i = r.position.array, o = void 0 !== r.index ? r.index.array : void 0, a = void 0 !== r.normal ? r.normal.array : void 0, s = void 0 !== r.color ? r.color.array : void 0, u = void 0 !== r.uv ? r.uv.array : void 0, l = [], c = [], h = 0, p = 0; h < i.length; h += 3, p += 2) n.vertices.push(new e.Vector3(i[h], i[h + 1], i[h + 2])), void 0 !== a && l.push(new e.Vector3(a[h], a[h + 1], a[h + 2])), void 0 !== s && n.colors.push(new e.Color(s[h], s[h + 1], s[h + 2])), void 0 !== u && c.push(new e.Vector2(u[p], u[p + 1]));
      var d = function(t, r, i) {
       var o = void 0 !== a ? [l[t].clone(), l[r].clone(), l[i].clone()] : [],
        h = void 0 !== s ? [n.colors[t].clone(), n.colors[r].clone(), n.colors[i].clone()] : [];
       n.faces.push(new e.Face3(t, r, i, o, h)), void 0 !== u && n.faceVertexUvs[0].push([c[t].clone(), c[r].clone(), c[i].clone()])
      };
      if (void 0 !== o) {
       var f = t.drawcalls;
       if (f.length > 0)
        for (var h = 0; h < f.length; h++)
         for (var m = f[h], g = m.start, v = m.count, y = m.index, p = g, b = g + v; b > p; p += 3) d(y + o[p], y + o[p + 1], y + o[p + 2]);
       else
        for (var h = 0; h < o.length; h += 3) d(o[h], o[h + 1], o[h + 2])
      } else
       for (var h = 0; h < i.length / 3; h += 3) d(h, h + 1, h + 2);
      return this.computeFaceNormals(), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone()), null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), this
     },
     center: function() {
      this.computeBoundingBox();
      var t = this.boundingBox.center().negate();
      return this.applyMatrix((new e.Matrix4).setPosition(t)), t
     },
     computeFaceNormals: function() {
      for (var t = new e.Vector3, n = new e.Vector3, r = 0, i = this.faces.length; i > r; r++) {
       var o = this.faces[r],
        a = this.vertices[o.a],
        s = this.vertices[o.b],
        u = this.vertices[o.c];
       t.subVectors(u, s), n.subVectors(a, s), t.cross(n), t.normalize(), o.normal.copy(t)
      }
     },
     computeVertexNormals: function(t) {
      var n, r, i, o, a, s;
      for (s = new Array(this.vertices.length), n = 0, r = this.vertices.length; r > n; n++) s[n] = new e.Vector3;
      if (t) {
       var u, l, c, h = new e.Vector3,
        p = new e.Vector3;
       for (i = 0, o = this.faces.length; o > i; i++) a = this.faces[i], u = this.vertices[a.a], l = this.vertices[a.b], c = this.vertices[a.c], h.subVectors(c, l), p.subVectors(u, l), h.cross(p), s[a.a].add(h), s[a.b].add(h), s[a.c].add(h)
      } else
       for (i = 0, o = this.faces.length; o > i; i++) a = this.faces[i], s[a.a].add(a.normal), s[a.b].add(a.normal), s[a.c].add(a.normal);
      for (n = 0, r = this.vertices.length; r > n; n++) s[n].normalize();
      for (i = 0, o = this.faces.length; o > i; i++) a = this.faces[i], a.vertexNormals[0] = s[a.a].clone(), a.vertexNormals[1] = s[a.b].clone(), a.vertexNormals[2] = s[a.c].clone()
     },
     computeMorphNormals: function() {
      var t, n, r, i, o;
      for (r = 0, i = this.faces.length; i > r; r++)
       for (o = this.faces[r], o.__originalFaceNormal ? o.__originalFaceNormal.copy(o.normal) : o.__originalFaceNormal = o.normal.clone(), o.__originalVertexNormals || (o.__originalVertexNormals = []), t = 0, n = o.vertexNormals.length; n > t; t++) o.__originalVertexNormals[t] ? o.__originalVertexNormals[t].copy(o.vertexNormals[t]) : o.__originalVertexNormals[t] = o.vertexNormals[t].clone();
      var a = new e.Geometry;
      for (a.faces = this.faces, t = 0, n = this.morphTargets.length; n > t; t++) {
       if (!this.morphNormals[t]) {
        this.morphNormals[t] = {}, this.morphNormals[t].faceNormals = [], this.morphNormals[t].vertexNormals = [];
        var s, u, l = this.morphNormals[t].faceNormals,
         c = this.morphNormals[t].vertexNormals;
        for (r = 0, i = this.faces.length; i > r; r++) s = new e.Vector3, u = {
         a: new e.Vector3,
         b: new e.Vector3,
         c: new e.Vector3
        }, l.push(s), c.push(u)
       }
       var h = this.morphNormals[t];
       a.vertices = this.morphTargets[t].vertices, a.computeFaceNormals(), a.computeVertexNormals();
       var s, u;
       for (r = 0, i = this.faces.length; i > r; r++) o = this.faces[r], s = h.faceNormals[r], u = h.vertexNormals[r], s.copy(o.normal), u.a.copy(o.vertexNormals[0]), u.b.copy(o.vertexNormals[1]), u.c.copy(o.vertexNormals[2])
      }
      for (r = 0, i = this.faces.length; i > r; r++) o = this.faces[r], o.normal = o.__originalFaceNormal, o.vertexNormals = o.__originalVertexNormals
     },
     computeTangents: function() {
      function t(e, t, n, r, i, o, a) {
       c = e.vertices[t], h = e.vertices[n], p = e.vertices[r], d = l[i], f = l[o], m = l[a], g = h.x - c.x, v = p.x - c.x, y = h.y - c.y, b = p.y - c.y, w = h.z - c.z, x = p.z - c.z, _ = f.x - d.x, S = m.x - d.x, C = f.y - d.y, E = m.y - d.y, T = 1 / (_ * E - S * C), k.set((E * g - C * v) * T, (E * y - C * b) * T, (E * w - C * x) * T), D.set((_ * v - S * g) * T, (_ * b - S * y) * T, (_ * x - S * w) * T), R[t].add(k), R[n].add(k), R[r].add(k), I[t].add(D), I[n].add(D), I[r].add(D)
      }
      var n, r, i, o, a, s, u, l, c, h, p, d, f, m, g, v, y, b, w, x, _, S, C, E, T, M, A, P, R = [],
       I = [],
       k = new e.Vector3,
       D = new e.Vector3,
       V = new e.Vector3,
       L = new e.Vector3,
       B = new e.Vector3;
      for (i = 0, o = this.vertices.length; o > i; i++) R[i] = new e.Vector3, I[i] = new e.Vector3;
      for (n = 0, r = this.faces.length; r > n; n++) u = this.faces[n], l = this.faceVertexUvs[0][n], t(this, u.a, u.b, u.c, 0, 1, 2);
      var O = ["a", "b", "c", "d"];
      for (n = 0, r = this.faces.length; r > n; n++)
       for (u = this.faces[n], a = 0; a < Math.min(u.vertexNormals.length, 3); a++) B.copy(u.vertexNormals[a]), s = u[O[a]], M = R[s], V.copy(M), V.sub(B.multiplyScalar(B.dot(M))).normalize(), L.crossVectors(u.vertexNormals[a], M), A = L.dot(I[s]), P = 0 > A ? -1 : 1, u.vertexTangents[a] = new e.Vector4(V.x, V.y, V.z, P);
      this.hasTangents = !0
     },
     computeLineDistances: function() {
      for (var e = 0, t = this.vertices, n = 0, r = t.length; r > n; n++) n > 0 && (e += t[n].distanceTo(t[n - 1])), this.lineDistances[n] = e
     },
     computeBoundingBox: function() {
      null === this.boundingBox && (this.boundingBox = new e.Box3), this.boundingBox.setFromPoints(this.vertices)
     },
     computeBoundingSphere: function() {
      null === this.boundingSphere && (this.boundingSphere = new e.Sphere), this.boundingSphere.setFromPoints(this.vertices)
     },
     merge: function(t, n, r) {
      if (t instanceof e.Geometry == !1) return e.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", t), void 0;
      var i, o = this.vertices.length,
       a = this.vertices,
       s = t.vertices,
       u = this.faces,
       l = t.faces,
       c = this.faceVertexUvs[0],
       h = t.faceVertexUvs[0];
      void 0 === r && (r = 0), void 0 !== n && (i = (new e.Matrix3).getNormalMatrix(n));
      for (var p = 0, d = s.length; d > p; p++) {
       var f = s[p],
        m = f.clone();
       void 0 !== n && m.applyMatrix4(n), a.push(m)
      }
      for (p = 0, d = l.length; d > p; p++) {
       var g, v, y, b = l[p],
        w = b.vertexNormals,
        x = b.vertexColors;
       g = new e.Face3(b.a + o, b.b + o, b.c + o), g.normal.copy(b.normal), void 0 !== i && g.normal.applyMatrix3(i).normalize();
       for (var _ = 0, S = w.length; S > _; _++) v = w[_].clone(), void 0 !== i && v.applyMatrix3(i).normalize(), g.vertexNormals.push(v);
       g.color.copy(b.color);
       for (var _ = 0, S = x.length; S > _; _++) y = x[_], g.vertexColors.push(y.clone());
       g.materialIndex = b.materialIndex + r, u.push(g)
      }
      for (p = 0, d = h.length; d > p; p++) {
       var C = h[p],
        E = [];
       if (void 0 !== C) {
        for (var _ = 0, S = C.length; S > _; _++) E.push(C[_].clone());
        c.push(E)
       }
      }
     },
     mergeMesh: function(t) {
      return t instanceof e.Mesh == !1 ? (e.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", t), void 0) : (t.matrixAutoUpdate && t.updateMatrix(), this.merge(t.geometry, t.matrix), void 0)
     },
     mergeVertices: function() {
      var e, t, n, r, i, o, a, s, u = {},
       l = [],
       c = [],
       h = 4,
       p = Math.pow(10, h);
      for (n = 0, r = this.vertices.length; r > n; n++) e = this.vertices[n], t = Math.round(e.x * p) + "_" + Math.round(e.y * p) + "_" + Math.round(e.z * p), void 0 === u[t] ? (u[t] = n, l.push(this.vertices[n]), c[n] = l.length - 1) : c[n] = c[u[t]];
      var d = [];
      for (n = 0, r = this.faces.length; r > n; n++) {
       i = this.faces[n], i.a = c[i.a], i.b = c[i.b], i.c = c[i.c], o = [i.a, i.b, i.c];
       for (var f = -1, m = 0; 3 > m; m++)
        if (o[m] == o[(m + 1) % 3]) {
         f = m, d.push(n);
         break
        }
      }
      for (n = d.length - 1; n >= 0; n--) {
       var g = d[n];
       for (this.faces.splice(g, 1), a = 0, s = this.faceVertexUvs.length; s > a; a++) this.faceVertexUvs[a].splice(g, 1)
      }
      var v = this.vertices.length - l.length;
      return this.vertices = l, v
     },
     toJSON: function() {
      function e(e, t, n) {
       return n ? e | 1 << t : e & ~(1 << t)
      }

      function t(e) {
       var t = e.x.toString() + e.y.toString() + e.z.toString();
       return void 0 !== p[t] ? p[t] : (p[t] = h.length / 3, h.push(e.x, e.y, e.z), p[t])
      }

      function n(e) {
       var t = e.r.toString() + e.g.toString() + e.b.toString();
       return void 0 !== f[t] ? f[t] : (f[t] = d.length, d.push(e.getHex()), f[t])
      }

      function r(e) {
       var t = e.x.toString() + e.y.toString();
       return void 0 !== g[t] ? g[t] : (g[t] = m.length / 2, m.push(e.x, e.y), g[t])
      }
      var i = {
       metadata: {
        version: 4,
        type: "BufferGeometry",
        generator: "BufferGeometryExporter"
       },
       uuid: this.uuid,
       type: this.type
      };
      if ("" !== this.name && (i.name = this.name), void 0 !== this.parameters) {
       var o = this.parameters;
       for (var a in o) void 0 !== o[a] && (i[a] = o[a]);
       return i
      }
      for (var s = [], u = 0; u < this.vertices.length; u++) {
       var l = this.vertices[u];
       s.push(l.x, l.y, l.z)
      }
      for (var c = [], h = [], p = {}, d = [], f = {}, m = [], g = {}, u = 0; u < this.faces.length; u++) {
       var v = this.faces[u],
        y = !1,
        b = !1,
        w = void 0 !== this.faceVertexUvs[0][u],
        x = v.normal.length() > 0,
        _ = v.vertexNormals.length > 0,
        S = 1 !== v.color.r || 1 !== v.color.g || 1 !== v.color.b,
        C = v.vertexColors.length > 0,
        E = 0;
       if (E = e(E, 0, 0), E = e(E, 1, y), E = e(E, 2, b), E = e(E, 3, w), E = e(E, 4, x), E = e(E, 5, _), E = e(E, 6, S), E = e(E, 7, C), c.push(E), c.push(v.a, v.b, v.c), w) {
        var T = this.faceVertexUvs[0][u];
        c.push(r(T[0]), r(T[1]), r(T[2]))
       }
       if (x && c.push(t(v.normal)), _) {
        var M = v.vertexNormals;
        c.push(t(M[0]), t(M[1]), t(M[2]))
       }
       if (S && c.push(n(v.color)), C) {
        var A = v.vertexColors;
        c.push(n(A[0]), n(A[1]), n(A[2]))
       }
      }
      return i.data = {}, i.data.vertices = s, i.data.normals = h, d.length > 0 && (i.data.colors = d), m.length > 0 && (i.data.uvs = [m]), i.data.faces = c, i
     },
     clone: function() {
      for (var t = new e.Geometry, n = this.vertices, r = 0, i = n.length; i > r; r++) t.vertices.push(n[r].clone());
      for (var o = this.faces, r = 0, i = o.length; i > r; r++) t.faces.push(o[r].clone());
      for (var r = 0, i = this.faceVertexUvs.length; i > r; r++) {
       var a = this.faceVertexUvs[r];
       void 0 === t.faceVertexUvs[r] && (t.faceVertexUvs[r] = []);
       for (var s = 0, u = a.length; u > s; s++) {
        for (var l = a[s], c = [], h = 0, p = l.length; p > h; h++) {
         var d = l[h];
         c.push(d.clone())
        }
        t.faceVertexUvs[r].push(c)
       }
      }
      return t
     },
     dispose: function() {
      this.dispatchEvent({
       type: "dispose"
      })
     }
    }, e.EventDispatcher.prototype.apply(e.Geometry.prototype), e.GeometryIdCount = 0, e.Camera = function() {
     e.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new e.Matrix4, this.projectionMatrix = new e.Matrix4
    }, e.Camera.prototype = Object.create(e.Object3D.prototype), e.Camera.prototype.constructor = e.Camera, e.Camera.prototype.getWorldDirection = function() {
     var t = new e.Quaternion;
     return function(n) {
      var r = n || new e.Vector3;
      return this.getWorldQuaternion(t), r.set(0, 0, -1).applyQuaternion(t)
     }
    }(), e.Camera.prototype.lookAt = function() {
     var t = new e.Matrix4;
     return function(e) {
      t.lookAt(this.position, e, this.up), this.quaternion.setFromRotationMatrix(t)
     }
    }(), e.Camera.prototype.clone = function(t) {
     return void 0 === t && (t = new e.Camera), e.Object3D.prototype.clone.call(this, t), t.matrixWorldInverse.copy(this.matrixWorldInverse), t.projectionMatrix.copy(this.projectionMatrix), t
    }, e.CubeCamera = function(t, n, r) {
     e.Object3D.call(this), this.type = "CubeCamera";
     var i = 90,
      o = 1,
      a = new e.PerspectiveCamera(i, o, t, n);
     a.up.set(0, -1, 0), a.lookAt(new e.Vector3(1, 0, 0)), this.add(a);
     var s = new e.PerspectiveCamera(i, o, t, n);
     s.up.set(0, -1, 0), s.lookAt(new e.Vector3(-1, 0, 0)), this.add(s);
     var u = new e.PerspectiveCamera(i, o, t, n);
     u.up.set(0, 0, 1), u.lookAt(new e.Vector3(0, 1, 0)), this.add(u);
     var l = new e.PerspectiveCamera(i, o, t, n);
     l.up.set(0, 0, -1), l.lookAt(new e.Vector3(0, -1, 0)), this.add(l);
     var c = new e.PerspectiveCamera(i, o, t, n);
     c.up.set(0, -1, 0), c.lookAt(new e.Vector3(0, 0, 1)), this.add(c);
     var h = new e.PerspectiveCamera(i, o, t, n);
     h.up.set(0, -1, 0), h.lookAt(new e.Vector3(0, 0, -1)), this.add(h), this.renderTarget = new e.WebGLRenderTargetCube(r, r, {
      format: e.RGBFormat,
      magFilter: e.LinearFilter,
      minFilter: e.LinearFilter
     }), this.updateCubeMap = function(e, t) {
      var n = this.renderTarget,
       r = n.generateMipmaps;
      n.generateMipmaps = !1, n.activeCubeFace = 0, e.render(t, a, n), n.activeCubeFace = 1, e.render(t, s, n), n.activeCubeFace = 2, e.render(t, u, n), n.activeCubeFace = 3, e.render(t, l, n), n.activeCubeFace = 4, e.render(t, c, n), n.generateMipmaps = r, n.activeCubeFace = 5, e.render(t, h, n)
     }
    }, e.CubeCamera.prototype = Object.create(e.Object3D.prototype), e.CubeCamera.prototype.constructor = e.CubeCamera, e.OrthographicCamera = function(t, n, r, i, o, a) {
     e.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = t, this.right = n, this.top = r, this.bottom = i, this.near = void 0 !== o ? o : .1, this.far = void 0 !== a ? a : 2e3, this.updateProjectionMatrix()
    }, e.OrthographicCamera.prototype = Object.create(e.Camera.prototype), e.OrthographicCamera.prototype.constructor = e.OrthographicCamera, e.OrthographicCamera.prototype.updateProjectionMatrix = function() {
     var e = (this.right - this.left) / (2 * this.zoom),
      t = (this.top - this.bottom) / (2 * this.zoom),
      n = (this.right + this.left) / 2,
      r = (this.top + this.bottom) / 2;
     this.projectionMatrix.makeOrthographic(n - e, n + e, r + t, r - t, this.near, this.far)
    }, e.OrthographicCamera.prototype.clone = function() {
     var t = new e.OrthographicCamera;
     return e.Camera.prototype.clone.call(this, t), t.zoom = this.zoom, t.left = this.left, t.right = this.right, t.top = this.top, t.bottom = this.bottom, t.near = this.near, t.far = this.far, t.projectionMatrix.copy(this.projectionMatrix), t
    }, e.PerspectiveCamera = function(t, n, r, i) {
     e.Camera.call(this), this.type = "PerspectiveCamera", this.zoom = 1, this.fov = void 0 !== t ? t : 50, this.aspect = void 0 !== n ? n : 1, this.near = void 0 !== r ? r : .1, this.far = void 0 !== i ? i : 2e3, this.updateProjectionMatrix()
    }, e.PerspectiveCamera.prototype = Object.create(e.Camera.prototype), e.PerspectiveCamera.prototype.constructor = e.PerspectiveCamera, e.PerspectiveCamera.prototype.setLens = function(t, n) {
     void 0 === n && (n = 24), this.fov = 2 * e.Math.radToDeg(Math.atan(n / (2 * t))), this.updateProjectionMatrix()
    }, e.PerspectiveCamera.prototype.setViewOffset = function(e, t, n, r, i, o) {
     this.fullWidth = e, this.fullHeight = t, this.x = n, this.y = r, this.width = i, this.height = o, this.updateProjectionMatrix()
    }, e.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
     var t = e.Math.radToDeg(2 * Math.atan(Math.tan(.5 * e.Math.degToRad(this.fov)) / this.zoom));
     if (this.fullWidth) {
      var n = this.fullWidth / this.fullHeight,
       r = Math.tan(e.Math.degToRad(.5 * t)) * this.near,
       i = -r,
       o = n * i,
       a = n * r,
       s = Math.abs(a - o),
       u = Math.abs(r - i);
      this.projectionMatrix.makeFrustum(o + this.x * s / this.fullWidth, o + (this.x + this.width) * s / this.fullWidth, r - (this.y + this.height) * u / this.fullHeight, r - this.y * u / this.fullHeight, this.near, this.far)
     } else this.projectionMatrix.makePerspective(t, this.aspect, this.near, this.far)
    }, e.PerspectiveCamera.prototype.clone = function() {
     var t = new e.PerspectiveCamera;
     return e.Camera.prototype.clone.call(this, t), t.zoom = this.zoom, t.fov = this.fov, t.aspect = this.aspect, t.near = this.near, t.far = this.far, t.projectionMatrix.copy(this.projectionMatrix), t
    }, e.Light = function(t) {
     e.Object3D.call(this), this.type = "Light", this.color = new e.Color(t)
    }, e.Light.prototype = Object.create(e.Object3D.prototype), e.Light.prototype.constructor = e.Light, e.Light.prototype.clone = function(t) {
     return void 0 === t && (t = new e.Light), e.Object3D.prototype.clone.call(this, t), t.color.copy(this.color), t
    }, e.AmbientLight = function(t) {
     e.Light.call(this, t), this.type = "AmbientLight"
    }, e.AmbientLight.prototype = Object.create(e.Light.prototype), e.AmbientLight.prototype.constructor = e.AmbientLight, e.AmbientLight.prototype.clone = function() {
     var t = new e.AmbientLight;
     return e.Light.prototype.clone.call(this, t), t
    }, e.AreaLight = function(t, n) {
     e.Light.call(this, t), this.type = "AreaLight", this.normal = new e.Vector3(0, -1, 0), this.right = new e.Vector3(1, 0, 0), this.intensity = void 0 !== n ? n : 1, this.width = 1, this.height = 1, this.constantAttenuation = 1.5, this.linearAttenuation = .5, this.quadraticAttenuation = .1
    }, e.AreaLight.prototype = Object.create(e.Light.prototype), e.AreaLight.prototype.constructor = e.AreaLight, e.DirectionalLight = function(t, n) {
     e.Light.call(this, t), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.target = new e.Object3D, this.intensity = void 0 !== n ? n : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraRight = 500, this.shadowCameraTop = 500, this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowCascade = !1, this.shadowCascadeOffset = new e.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, this.shadowCascadeBias = [0, 0, 0], this.shadowCascadeWidth = [512, 512, 512], this.shadowCascadeHeight = [512, 512, 512], this.shadowCascadeNearZ = [-1, .99, .998], this.shadowCascadeFarZ = [.99, .998, 1], this.shadowCascadeArray = [], this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, e.DirectionalLight.prototype = Object.create(e.Light.prototype), e.DirectionalLight.prototype.constructor = e.DirectionalLight, e.DirectionalLight.prototype.clone = function() {
     var t = new e.DirectionalLight;
     return e.Light.prototype.clone.call(this, t), t.target = this.target.clone(), t.intensity = this.intensity, t.castShadow = this.castShadow, t.onlyShadow = this.onlyShadow, t.shadowCameraNear = this.shadowCameraNear, t.shadowCameraFar = this.shadowCameraFar, t.shadowCameraLeft = this.shadowCameraLeft, t.shadowCameraRight = this.shadowCameraRight, t.shadowCameraTop = this.shadowCameraTop, t.shadowCameraBottom = this.shadowCameraBottom, t.shadowCameraVisible = this.shadowCameraVisible, t.shadowBias = this.shadowBias, t.shadowDarkness = this.shadowDarkness, t.shadowMapWidth = this.shadowMapWidth, t.shadowMapHeight = this.shadowMapHeight, t.shadowCascade = this.shadowCascade, t.shadowCascadeOffset.copy(this.shadowCascadeOffset), t.shadowCascadeCount = this.shadowCascadeCount, t.shadowCascadeBias = this.shadowCascadeBias.slice(0), t.shadowCascadeWidth = this.shadowCascadeWidth.slice(0), t.shadowCascadeHeight = this.shadowCascadeHeight.slice(0), t.shadowCascadeNearZ = this.shadowCascadeNearZ.slice(0), t.shadowCascadeFarZ = this.shadowCascadeFarZ.slice(0), t
    }, e.HemisphereLight = function(t, n, r) {
     e.Light.call(this, t), this.type = "HemisphereLight", this.position.set(0, 100, 0), this.groundColor = new e.Color(n), this.intensity = void 0 !== r ? r : 1
    }, e.HemisphereLight.prototype = Object.create(e.Light.prototype), e.HemisphereLight.prototype.constructor = e.HemisphereLight, e.HemisphereLight.prototype.clone = function() {
     var t = new e.HemisphereLight;
     return e.Light.prototype.clone.call(this, t), t.groundColor.copy(this.groundColor), t.intensity = this.intensity, t
    }, e.PointLight = function(t, n, r, i) {
     e.Light.call(this, t), this.type = "PointLight", this.intensity = void 0 !== n ? n : 1, this.distance = void 0 !== r ? r : 0, this.decay = void 0 !== i ? i : 1
    }, e.PointLight.prototype = Object.create(e.Light.prototype), e.PointLight.prototype.constructor = e.PointLight, e.PointLight.prototype.clone = function() {
     var t = new e.PointLight;
     return e.Light.prototype.clone.call(this, t), t.intensity = this.intensity, t.distance = this.distance, t.decay = this.decay, t
    }, e.SpotLight = function(t, n, r, i, o, a) {
     e.Light.call(this, t), this.type = "SpotLight", this.position.set(0, 1, 0), this.target = new e.Object3D, this.intensity = void 0 !== n ? n : 1, this.distance = void 0 !== r ? r : 0, this.angle = void 0 !== i ? i : Math.PI / 3, this.exponent = void 0 !== o ? o : 10, this.decay = void 0 !== a ? a : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, e.SpotLight.prototype = Object.create(e.Light.prototype), e.SpotLight.prototype.constructor = e.SpotLight, e.SpotLight.prototype.clone = function() {
     var t = new e.SpotLight;
     return e.Light.prototype.clone.call(this, t), t.target = this.target.clone(), t.intensity = this.intensity, t.distance = this.distance, t.angle = this.angle, t.exponent = this.exponent, t.decay = this.decay, t.castShadow = this.castShadow, t.onlyShadow = this.onlyShadow, t.shadowCameraNear = this.shadowCameraNear, t.shadowCameraFar = this.shadowCameraFar, t.shadowCameraFov = this.shadowCameraFov, t.shadowCameraVisible = this.shadowCameraVisible, t.shadowBias = this.shadowBias, t.shadowDarkness = this.shadowDarkness, t.shadowMapWidth = this.shadowMapWidth, t.shadowMapHeight = this.shadowMapHeight, t
    }, e.Cache = {
     files: {},
     add: function(e, t) {
      this.files[e] = t
     },
     get: function(e) {
      return this.files[e]
     },
     remove: function(e) {
      delete this.files[e]
     },
     clear: function() {
      this.files = {}
     }
    }, e.Loader = function(t) {
     this.showStatus = t, this.statusDomElement = t ? e.Loader.prototype.addStatusElement() : null, this.imageLoader = new e.ImageLoader, this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {}
    }, e.Loader.prototype = {
     constructor: e.Loader,
     crossOrigin: void 0,
     addStatusElement: function() {
      var e = document.createElement("div");
      return e.style.position = "absolute", e.style.right = "0px", e.style.top = "0px", e.style.fontSize = "0.8em", e.style.textAlign = "left", e.style.background = "rgba(0,0,0,0.25)", e.style.color = "#fff", e.style.width = "120px", e.style.padding = "0.5em 0.5em 0.5em 0.5em", e.style.zIndex = 1e3, e.innerHTML = "Loading ...", e
     },
     updateProgress: function(e) {
      var t = "Loaded ";
      t += e.total ? (100 * e.loaded / e.total).toFixed(0) + "%" : (e.loaded / 1024).toFixed(2) + " KB", this.statusDomElement.innerHTML = t
     },
     extractUrlBase: function(e) {
      var t = e.split("/");
      return 1 === t.length ? "./" : (t.pop(), t.join("/") + "/")
     },
     initMaterials: function(e, t) {
      for (var n = [], r = 0; r < e.length; ++r) n[r] = this.createMaterial(e[r], t);
      return n
     },
     needsTangents: function(t) {
      for (var n = 0, r = t.length; r > n; n++) {
       var i = t[n];
       if (i instanceof e.ShaderMaterial) return !0
      }
      return !1
     },
     createMaterial: function(t, n) {
      function r(e) {
       var t = Math.log(e) / Math.LN2;
       return Math.pow(2, Math.round(t))
      }

      function i(t, i, o, s, u, l, c) {
       var h, p = n + o,
        d = e.Loader.Handlers.get(p);
       if (null !== d ? h = d.load(p) : (h = new e.Texture, d = a.imageLoader, d.crossOrigin = a.crossOrigin, d.load(p, function(t) {
         if (e.Math.isPowerOfTwo(t.width) === !1 || e.Math.isPowerOfTwo(t.height) === !1) {
          var n = r(t.width),
           i = r(t.height),
           o = document.createElement("canvas");
          o.width = n, o.height = i;
          var a = o.getContext("2d");
          a.drawImage(t, 0, 0, n, i), h.image = o
         } else h.image = t;
         h.needsUpdate = !0
        })), h.sourceFile = o, s && (h.repeat.set(s[0], s[1]), 1 !== s[0] && (h.wrapS = e.RepeatWrapping), 1 !== s[1] && (h.wrapT = e.RepeatWrapping)), u && h.offset.set(u[0], u[1]), l) {
        var f = {
         repeat: e.RepeatWrapping,
         mirror: e.MirroredRepeatWrapping
        };
        void 0 !== f[l[0]] && (h.wrapS = f[l[0]]), void 0 !== f[l[1]] && (h.wrapT = f[l[1]])
       }
       c && (h.anisotropy = c), t[i] = h
      }

      function o(e) {
       return (255 * e[0] << 16) + (255 * e[1] << 8) + 255 * e[2]
      }
      var a = this,
       s = "MeshLambertMaterial",
       u = {
        color: 15658734,
        opacity: 1,
        map: null,
        lightMap: null,
        normalMap: null,
        bumpMap: null,
        wireframe: !1
       };
      if (t.shading) {
       var l = t.shading.toLowerCase();
       "phong" === l ? s = "MeshPhongMaterial" : "basic" === l && (s = "MeshBasicMaterial")
      }
      void 0 !== t.blending && void 0 !== e[t.blending] && (u.blending = e[t.blending]), void 0 !== t.transparent && (u.transparent = t.transparent), void 0 !== t.opacity && t.opacity < 1 && (u.transparent = !0), void 0 !== t.depthTest && (u.depthTest = t.depthTest), void 0 !== t.depthWrite && (u.depthWrite = t.depthWrite), void 0 !== t.visible && (u.visible = t.visible), void 0 !== t.flipSided && (u.side = e.BackSide), void 0 !== t.doubleSided && (u.side = e.DoubleSide), void 0 !== t.wireframe && (u.wireframe = t.wireframe), void 0 !== t.vertexColors && ("face" === t.vertexColors ? u.vertexColors = e.FaceColors : t.vertexColors && (u.vertexColors = e.VertexColors)), t.colorDiffuse ? u.color = o(t.colorDiffuse) : t.DbgColor && (u.color = t.DbgColor), t.colorSpecular && (u.specular = o(t.colorSpecular)), t.colorEmissive && (u.emissive = o(t.colorEmissive)), void 0 !== t.transparency && (console.warn("THREE.Loader: transparency has been renamed to opacity"), t.opacity = t.transparency), void 0 !== t.opacity && (u.opacity = t.opacity), t.specularCoef && (u.shininess = t.specularCoef), t.mapDiffuse && n && i(u, "map", t.mapDiffuse, t.mapDiffuseRepeat, t.mapDiffuseOffset, t.mapDiffuseWrap, t.mapDiffuseAnisotropy), t.mapLight && n && i(u, "lightMap", t.mapLight, t.mapLightRepeat, t.mapLightOffset, t.mapLightWrap, t.mapLightAnisotropy), t.mapBump && n && i(u, "bumpMap", t.mapBump, t.mapBumpRepeat, t.mapBumpOffset, t.mapBumpWrap, t.mapBumpAnisotropy), t.mapNormal && n && i(u, "normalMap", t.mapNormal, t.mapNormalRepeat, t.mapNormalOffset, t.mapNormalWrap, t.mapNormalAnisotropy), t.mapSpecular && n && i(u, "specularMap", t.mapSpecular, t.mapSpecularRepeat, t.mapSpecularOffset, t.mapSpecularWrap, t.mapSpecularAnisotropy), t.mapAlpha && n && i(u, "alphaMap", t.mapAlpha, t.mapAlphaRepeat, t.mapAlphaOffset, t.mapAlphaWrap, t.mapAlphaAnisotropy), t.mapBumpScale && (u.bumpScale = t.mapBumpScale), t.mapNormalFactor && (u.normalScale = new e.Vector2(t.mapNormalFactor, t.mapNormalFactor));
      var c = new e[s](u);
      return void 0 !== t.DbgName && (c.name = t.DbgName), c
     }
    }, e.Loader.Handlers = {
     handlers: [],
     add: function(e, t) {
      this.handlers.push(e, t)
     },
     get: function(e) {
      for (var t = 0, n = this.handlers.length; n > t; t += 2) {
       var r = this.handlers[t],
        i = this.handlers[t + 1];
       if (r.test(e)) return i
      }
      return null
     }
    }, e.XHRLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager
    }, e.XHRLoader.prototype = {
     constructor: e.XHRLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = e.Cache.get(t);
      if (void 0 !== a) return n && n(a), void 0;
      var s = new XMLHttpRequest;
      s.open("GET", t, !0), s.addEventListener("load", function() {
       e.Cache.add(t, this.response), n && n(this.response), o.manager.itemEnd(t)
      }, !1), void 0 !== r && s.addEventListener("progress", function(e) {
       r(e)
      }, !1), void 0 !== i && s.addEventListener("error", function(e) {
       i(e)
      }, !1), void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), void 0 !== this.responseType && (s.responseType = this.responseType), s.send(null), o.manager.itemStart(t)
     },
     setResponseType: function(e) {
      this.responseType = e
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     }
    }, e.ImageLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager
    }, e.ImageLoader.prototype = {
     constructor: e.ImageLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = e.Cache.get(t);
      if (void 0 !== a) return n(a), void 0;
      var s = document.createElement("img");
      return s.addEventListener("load", function() {
       e.Cache.add(t, this), n && n(this), o.manager.itemEnd(t)
      }, !1), void 0 !== r && s.addEventListener("progress", function(e) {
       r(e)
      }, !1), void 0 !== i && s.addEventListener("error", function(e) {
       i(e)
      }, !1), void 0 !== this.crossOrigin && (s.crossOrigin = this.crossOrigin), s.src = t, o.manager.itemStart(t), s
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     }
    }, e.JSONLoader = function(t) {
     e.Loader.call(this, t), this.withCredentials = !1
    }, e.JSONLoader.prototype = Object.create(e.Loader.prototype), e.JSONLoader.prototype.constructor = e.JSONLoader, e.JSONLoader.prototype.load = function(e, t, n) {
     n = n && "string" == typeof n ? n : this.extractUrlBase(e), this.onLoadStart(), this.loadAjaxJSON(this, e, t, n)
    }, e.JSONLoader.prototype.loadAjaxJSON = function(t, n, r, i, o) {
     var a = new XMLHttpRequest,
      s = 0;
     a.onreadystatechange = function() {
      if (a.readyState === a.DONE)
       if (200 === a.status || 0 === a.status) {
        if (a.responseText) {
         var u = JSON.parse(a.responseText),
          l = u.metadata;
         if (void 0 !== l) {
          if ("object" === l.type) return e.error("THREE.JSONLoader: " + n + " should be loaded with THREE.ObjectLoader instead."), void 0;
          if ("scene" === l.type) return e.error("THREE.JSONLoader: " + n + " seems to be a Scene. Use THREE.SceneLoader instead."), void 0
         }
         var c = t.parse(u, i);
         r(c.geometry, c.materials)
        } else e.error("THREE.JSONLoader: " + n + " seems to be unreachable or the file is empty.");
        t.onLoadComplete()
       } else e.error("THREE.JSONLoader: Couldn't load " + n + " (" + a.status + ")");
      else a.readyState === a.LOADING ? o && (0 === s && (s = a.getResponseHeader("Content-Length")), o({
       total: s,
       loaded: a.responseText.length
      })) : a.readyState === a.HEADERS_RECEIVED && void 0 !== o && (s = a.getResponseHeader("Content-Length"))
     }, a.open("GET", n, !0), a.withCredentials = this.withCredentials, a.send(null)
    }, e.JSONLoader.prototype.parse = function(t, n) {
     function r(n) {
      function r(e, t) {
       return e & 1 << t
      }
      var i, o, s, u, l, c, h, p, d, f, m, g, v, y, b, w, x, _, S, C, E, T, M, A, P, R, I, k = t.faces,
       D = t.vertices,
       V = t.normals,
       L = t.colors,
       B = 0;
      if (void 0 !== t.uvs) {
       for (i = 0; i < t.uvs.length; i++) t.uvs[i].length && B++;
       for (i = 0; B > i; i++) a.faceVertexUvs[i] = []
      }
      for (u = 0, l = D.length; l > u;) _ = new e.Vector3, _.x = D[u++] * n, _.y = D[u++] * n, _.z = D[u++] * n, a.vertices.push(_);
      for (u = 0, l = k.length; l > u;)
       if (f = k[u++], m = r(f, 0), g = r(f, 1), v = r(f, 3), y = r(f, 4), b = r(f, 5), w = r(f, 6), x = r(f, 7), m) {
        if (C = new e.Face3, C.a = k[u], C.b = k[u + 1], C.c = k[u + 3], E = new e.Face3, E.a = k[u + 1], E.b = k[u + 2], E.c = k[u + 3], u += 4, g && (d = k[u++], C.materialIndex = d, E.materialIndex = d), s = a.faces.length, v)
         for (i = 0; B > i; i++)
          for (A = t.uvs[i], a.faceVertexUvs[i][s] = [], a.faceVertexUvs[i][s + 1] = [], o = 0; 4 > o; o++) p = k[u++], R = A[2 * p], I = A[2 * p + 1], P = new e.Vector2(R, I), 2 !== o && a.faceVertexUvs[i][s].push(P), 0 !== o && a.faceVertexUvs[i][s + 1].push(P);
        if (y && (h = 3 * k[u++], C.normal.set(V[h++], V[h++], V[h]), E.normal.copy(C.normal)), b)
         for (i = 0; 4 > i; i++) h = 3 * k[u++], M = new e.Vector3(V[h++], V[h++], V[h]), 2 !== i && C.vertexNormals.push(M), 0 !== i && E.vertexNormals.push(M);
        if (w && (c = k[u++], T = L[c], C.color.setHex(T), E.color.setHex(T)), x)
         for (i = 0; 4 > i; i++) c = k[u++], T = L[c], 2 !== i && C.vertexColors.push(new e.Color(T)), 0 !== i && E.vertexColors.push(new e.Color(T));
        a.faces.push(C), a.faces.push(E)
       } else {
        if (S = new e.Face3, S.a = k[u++], S.b = k[u++], S.c = k[u++], g && (d = k[u++], S.materialIndex = d), s = a.faces.length, v)
         for (i = 0; B > i; i++)
          for (A = t.uvs[i], a.faceVertexUvs[i][s] = [], o = 0; 3 > o; o++) p = k[u++], R = A[2 * p], I = A[2 * p + 1], P = new e.Vector2(R, I), a.faceVertexUvs[i][s].push(P);
        if (y && (h = 3 * k[u++], S.normal.set(V[h++], V[h++], V[h])), b)
         for (i = 0; 3 > i; i++) h = 3 * k[u++], M = new e.Vector3(V[h++], V[h++], V[h]), S.vertexNormals.push(M);
        if (w && (c = k[u++], S.color.setHex(L[c])), x)
         for (i = 0; 3 > i; i++) c = k[u++], S.vertexColors.push(new e.Color(L[c]));
        a.faces.push(S)
       }
     }

     function i() {
      var n = void 0 !== t.influencesPerVertex ? t.influencesPerVertex : 2;
      if (t.skinWeights)
       for (var r = 0, i = t.skinWeights.length; i > r; r += n) {
        var o = t.skinWeights[r],
         s = n > 1 ? t.skinWeights[r + 1] : 0,
         u = n > 2 ? t.skinWeights[r + 2] : 0,
         l = n > 3 ? t.skinWeights[r + 3] : 0;
        a.skinWeights.push(new e.Vector4(o, s, u, l))
       }
      if (t.skinIndices)
       for (var r = 0, i = t.skinIndices.length; i > r; r += n) {
        var c = t.skinIndices[r],
         h = n > 1 ? t.skinIndices[r + 1] : 0,
         p = n > 2 ? t.skinIndices[r + 2] : 0,
         d = n > 3 ? t.skinIndices[r + 3] : 0;
        a.skinIndices.push(new e.Vector4(c, h, p, d))
       }
      a.bones = t.bones, a.bones && a.bones.length > 0 && (a.skinWeights.length !== a.skinIndices.length || a.skinIndices.length !== a.vertices.length) && e.warn("THREE.JSONLoader: When skinning, number of vertices (" + a.vertices.length + "), skinIndices (" + a.skinIndices.length + "), and skinWeights (" + a.skinWeights.length + ") should match."), a.animation = t.animation, a.animations = t.animations
     }

     function o(n) {
      if (void 0 !== t.morphTargets) {
       var r, i, o, s, u, l;
       for (r = 0, i = t.morphTargets.length; i > r; r++)
        for (a.morphTargets[r] = {}, a.morphTargets[r].name = t.morphTargets[r].name, a.morphTargets[r].vertices = [], u = a.morphTargets[r].vertices, l = t.morphTargets[r].vertices, o = 0, s = l.length; s > o; o += 3) {
         var c = new e.Vector3;
         c.x = l[o] * n, c.y = l[o + 1] * n, c.z = l[o + 2] * n, u.push(c)
        }
      }
      if (void 0 !== t.morphColors) {
       var r, i, h, p, d, f, m;
       for (r = 0, i = t.morphColors.length; i > r; r++)
        for (a.morphColors[r] = {}, a.morphColors[r].name = t.morphColors[r].name, a.morphColors[r].colors = [], d = a.morphColors[r].colors, f = t.morphColors[r].colors, h = 0, p = f.length; p > h; h += 3) m = new e.Color(16755200), m.setRGB(f[h], f[h + 1], f[h + 2]), d.push(m)
      }
     }
     var a = new e.Geometry,
      s = void 0 !== t.scale ? 1 / t.scale : 1;
     if (r(s), i(), o(s), a.computeFaceNormals(), a.computeBoundingSphere(), void 0 === t.materials || 0 === t.materials.length) return {
      geometry: a
     };
     var u = this.initMaterials(t.materials, n);
     return this.needsTangents(u) && a.computeTangents(), {
      geometry: a,
      materials: u
     }
    }, e.LoadingManager = function(e, t, n) {
     var r = this,
      i = 0,
      o = 0;
     this.onLoad = e, this.onProgress = t, this.onError = n, this.itemStart = function() {
      o++
     }, this.itemEnd = function(e) {
      i++, void 0 !== r.onProgress && r.onProgress(e, i, o), i === o && void 0 !== r.onLoad && r.onLoad()
     }
    }, e.DefaultLoadingManager = new e.LoadingManager, e.BufferGeometryLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager
    }, e.BufferGeometryLoader.prototype = {
     constructor: e.BufferGeometryLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = new e.XHRLoader(o.manager);
      a.setCrossOrigin(this.crossOrigin), a.load(t, function(e) {
       n(o.parse(JSON.parse(e)))
      }, r, i)
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     },
     parse: function(t) {
      var n = new e.BufferGeometry,
       r = t.data.attributes;
      for (var i in r) {
       var o = r[i],
        a = new self[o.type](o.array);
       n.addAttribute(i, new e.BufferAttribute(a, o.itemSize))
      }
      var s = t.data.offsets;
      void 0 !== s && (n.offsets = JSON.parse(JSON.stringify(s)));
      var u = t.data.boundingSphere;
      if (void 0 !== u) {
       var l = new e.Vector3;
       void 0 !== u.center && l.fromArray(u.center), n.boundingSphere = new e.Sphere(l, u.radius)
      }
      return n
     }
    }, e.MaterialLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager
    }, e.MaterialLoader.prototype = {
     constructor: e.MaterialLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = new e.XHRLoader(o.manager);
      a.setCrossOrigin(this.crossOrigin), a.load(t, function(e) {
       n(o.parse(JSON.parse(e)))
      }, r, i)
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     },
     parse: function(t) {
      var n = new e[t.type];
      if (void 0 !== t.color && n.color.setHex(t.color), void 0 !== t.emissive && n.emissive.setHex(t.emissive), void 0 !== t.specular && n.specular.setHex(t.specular), void 0 !== t.shininess && (n.shininess = t.shininess), void 0 !== t.uniforms && (n.uniforms = t.uniforms), void 0 !== t.vertexShader && (n.vertexShader = t.vertexShader), void 0 !== t.fragmentShader && (n.fragmentShader = t.fragmentShader), void 0 !== t.vertexColors && (n.vertexColors = t.vertexColors), void 0 !== t.shading && (n.shading = t.shading), void 0 !== t.blending && (n.blending = t.blending), void 0 !== t.side && (n.side = t.side), void 0 !== t.opacity && (n.opacity = t.opacity), void 0 !== t.transparent && (n.transparent = t.transparent), void 0 !== t.wireframe && (n.wireframe = t.wireframe), void 0 !== t.size && (n.size = t.size), void 0 !== t.sizeAttenuation && (n.sizeAttenuation = t.sizeAttenuation), void 0 !== t.materials)
       for (var r = 0, i = t.materials.length; i > r; r++) n.materials.push(this.parse(t.materials[r]));
      return n
     }
    }, e.ObjectLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager, this.texturePath = ""
    }, e.ObjectLoader.prototype = {
     constructor: e.ObjectLoader,
     load: function(t, n, r, i) {
      "" === this.texturePath && (this.texturePath = t.substring(0, t.lastIndexOf("/") + 1));
      var o = this,
       a = new e.XHRLoader(o.manager);
      a.setCrossOrigin(this.crossOrigin), a.load(t, function(e) {
       o.parse(JSON.parse(e), n)
      }, r, i)
     },
     setTexturePath: function(e) {
      this.texturePath = e
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     },
     parse: function(e, t) {
      var n = this.parseGeometries(e.geometries),
       r = this.parseImages(e.images, function() {
        void 0 !== t && t(a)
       }),
       i = this.parseTextures(e.textures, r),
       o = this.parseMaterials(e.materials, i),
       a = this.parseObject(e.object, n, o);
      return (void 0 === e.images || 0 === e.images.length) && void 0 !== t && t(a), a
     },
     parseGeometries: function(t) {
      var n = {};
      if (void 0 !== t)
       for (var r = new e.JSONLoader, i = new e.BufferGeometryLoader, o = 0, a = t.length; a > o; o++) {
        var s, u = t[o];
        switch (u.type) {
         case "PlaneGeometry":
         case "PlaneBufferGeometry":
          s = new e[u.type](u.width, u.height, u.widthSegments, u.heightSegments);
          break;
         case "BoxGeometry":
         case "CubeGeometry":
          s = new e.BoxGeometry(u.width, u.height, u.depth, u.widthSegments, u.heightSegments, u.depthSegments);
          break;
         case "CircleGeometry":
          s = new e.CircleGeometry(u.radius, u.segments);
          break;
         case "CylinderGeometry":
          s = new e.CylinderGeometry(u.radiusTop, u.radiusBottom, u.height, u.radialSegments, u.heightSegments, u.openEnded);
          break;
         case "SphereGeometry":
          s = new e.SphereGeometry(u.radius, u.widthSegments, u.heightSegments, u.phiStart, u.phiLength, u.thetaStart, u.thetaLength);
          break;
         case "IcosahedronGeometry":
          s = new e.IcosahedronGeometry(u.radius, u.detail);
          break;
         case "TorusGeometry":
          s = new e.TorusGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.arc);
          break;
         case "TorusKnotGeometry":
          s = new e.TorusKnotGeometry(u.radius, u.tube, u.radialSegments, u.tubularSegments, u.p, u.q, u.heightScale);
          break;
         case "BufferGeometry":
          s = i.parse(u);
          break;
         case "Geometry":
          s = r.parse(u.data).geometry
        }
        s.uuid = u.uuid, void 0 !== u.name && (s.name = u.name), n[u.uuid] = s
       }
      return n
     },
     parseMaterials: function(t, n) {
      var r = {};
      if (void 0 !== t)
       for (var i = function(t) {
         return void 0 === n[t] && e.warn("THREE.ObjectLoader: Undefined texture", t), n[t]
        }, o = new e.MaterialLoader, a = 0, s = t.length; s > a; a++) {
        var u = t[a],
         l = o.parse(u);
        l.uuid = u.uuid, void 0 !== u.name && (l.name = u.name), void 0 !== u.map && (l.map = i(u.map)), void 0 !== u.bumpMap && (l.bumpMap = i(u.bumpMap), u.bumpScale && (l.bumpScale = new e.Vector2(u.bumpScale, u.bumpScale))), void 0 !== u.alphaMap && (l.alphaMap = i(u.alphaMap)), void 0 !== u.envMap && (l.envMap = i(u.envMap)), void 0 !== u.normalMap && (l.normalMap = i(u.normalMap), u.normalScale && (l.normalScale = new e.Vector2(u.normalScale, u.normalScale))), void 0 !== u.lightMap && (l.lightMap = i(u.lightMap)), void 0 !== u.specularMap && (l.specularMap = i(u.specularMap)), r[u.uuid] = l
       }
      return r
     },
     parseImages: function(t, n) {
      var r = this,
       i = {};
      if (void 0 !== t && t.length > 0) {
       var o = new e.LoadingManager(n),
        a = new e.ImageLoader(o);
       a.setCrossOrigin(this.crossOrigin);
       for (var s = function(e) {
         return r.manager.itemStart(e), a.load(e, function() {
          r.manager.itemEnd(e)
         })
        }, u = 0, l = t.length; l > u; u++) {
        var c = t[u],
         h = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url) ? c.url : r.texturePath + c.url;
        i[c.uuid] = s(h)
       }
      }
      return i
     },
     parseTextures: function(t, n) {
      var r = {};
      if (void 0 !== t)
       for (var i = 0, o = t.length; o > i; i++) {
        var a = t[i];
        void 0 === a.image && e.warn('THREE.ObjectLoader: No "image" speficied for', a.uuid), void 0 === n[a.image] && e.warn("THREE.ObjectLoader: Undefined image", a.image);
        var s = new e.Texture(n[a.image]);
        s.needsUpdate = !0, s.uuid = a.uuid, void 0 !== a.name && (s.name = a.name), void 0 !== a.repeat && (s.repeat = new e.Vector2(a.repeat[0], a.repeat[1])), void 0 !== a.minFilter && (s.minFilter = e[a.minFilter]), void 0 !== a.magFilter && (s.magFilter = e[a.magFilter]), void 0 !== a.anisotropy && (s.anisotropy = a.anisotropy), a.wrap instanceof Array && (s.wrapS = e[a.wrap[0]], s.wrapT = e[a.wrap[1]]), r[a.uuid] = s
       }
      return r
     },
     parseObject: function() {
      var t = new e.Matrix4;
      return function(n, r, i) {
       var o, a = function(t) {
         return void 0 === r[t] && e.warn("THREE.ObjectLoader: Undefined geometry", t), r[t]
        },
        s = function(t) {
         return void 0 === i[t] && e.warn("THREE.ObjectLoader: Undefined material", t), i[t]
        };
       switch (n.type) {
        case "Scene":
         o = new e.Scene;
         break;
        case "PerspectiveCamera":
         o = new e.PerspectiveCamera(n.fov, n.aspect, n.near, n.far);
         break;
        case "OrthographicCamera":
         o = new e.OrthographicCamera(n.left, n.right, n.top, n.bottom, n.near, n.far);
         break;
        case "AmbientLight":
         o = new e.AmbientLight(n.color);
         break;
        case "DirectionalLight":
         o = new e.DirectionalLight(n.color, n.intensity);
         break;
        case "PointLight":
         o = new e.PointLight(n.color, n.intensity, n.distance, n.decay);
         break;
        case "SpotLight":
         o = new e.SpotLight(n.color, n.intensity, n.distance, n.angle, n.exponent, n.decay);
         break;
        case "HemisphereLight":
         o = new e.HemisphereLight(n.color, n.groundColor, n.intensity);
         break;
        case "Mesh":
         o = new e.Mesh(a(n.geometry), s(n.material));
         break;
        case "Line":
         o = new e.Line(a(n.geometry), s(n.material), n.mode);
         break;
        case "PointCloud":
         o = new e.PointCloud(a(n.geometry), s(n.material));
         break;
        case "Sprite":
         o = new e.Sprite(s(n.material));
         break;
        case "Group":
         o = new e.Group;
         break;
        default:
         o = new e.Object3D
       }
       if (o.uuid = n.uuid, void 0 !== n.name && (o.name = n.name), void 0 !== n.matrix ? (t.fromArray(n.matrix), t.decompose(o.position, o.quaternion, o.scale)) : (void 0 !== n.position && o.position.fromArray(n.position), void 0 !== n.rotation && o.rotation.fromArray(n.rotation), void 0 !== n.scale && o.scale.fromArray(n.scale)), void 0 !== n.visible && (o.visible = n.visible), void 0 !== n.userData && (o.userData = n.userData), void 0 !== n.children)
        for (var u in n.children) o.add(this.parseObject(n.children[u], r, i));
       return o
      }
     }()
    }, e.TextureLoader = function(t) {
     this.manager = void 0 !== t ? t : e.DefaultLoadingManager
    }, e.TextureLoader.prototype = {
     constructor: e.TextureLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = new e.ImageLoader(o.manager);
      a.setCrossOrigin(this.crossOrigin), a.load(t, function(t) {
       var r = new e.Texture(t);
       r.needsUpdate = !0, void 0 !== n && n(r)
      }, r, i)
     },
     setCrossOrigin: function(e) {
      this.crossOrigin = e
     }
    }, e.DataTextureLoader = e.BinaryTextureLoader = function() {
     this._parser = null
    }, e.BinaryTextureLoader.prototype = {
     constructor: e.BinaryTextureLoader,
     load: function(t, n, r, i) {
      var o = this,
       a = new e.DataTexture,
       s = new e.XHRLoader;
      return s.setResponseType("arraybuffer"), s.load(t, function(t) {
       var r = o._parser(t);
       r && (void 0 !== r.image ? a.image = r.image : void 0 !== r.data && (a.image.width = r.width, a.image.height = r.height, a.image.data = r.data), a.wrapS = void 0 !== r.wrapS ? r.wrapS : e.ClampToEdgeWrapping, a.wrapT = void 0 !== r.wrapT ? r.wrapT : e.ClampToEdgeWrapping, a.magFilter = void 0 !== r.magFilter ? r.magFilter : e.LinearFilter, a.minFilter = void 0 !== r.minFilter ? r.minFilter : e.LinearMipMapLinearFilter, a.anisotropy = void 0 !== r.anisotropy ? r.anisotropy : 1, void 0 !== r.format && (a.format = r.format), void 0 !== r.type && (a.type = r.type), void 0 !== r.mipmaps && (a.mipmaps = r.mipmaps), 1 === r.mipmapCount && (a.minFilter = e.LinearFilter), a.needsUpdate = !0, n && n(a, r))
      }, r, i), a
     }
    }, e.CompressedTextureLoader = function() {
     this._parser = null
    }, e.CompressedTextureLoader.prototype = {
     constructor: e.CompressedTextureLoader,
     load: function(t, n) {
      var r = this,
       i = [],
       o = new e.CompressedTexture;
      o.image = i;
      var a = new e.XHRLoader;
      if (a.setResponseType("arraybuffer"), t instanceof Array)
       for (var s = 0, u = function(u) {
         a.load(t[u], function(t) {
          var a = r._parser(t, !0);
          i[u] = {
           width: a.width,
           height: a.height,
           format: a.format,
           mipmaps: a.mipmaps
          }, s += 1, 6 === s && (1 == a.mipmapCount && (o.minFilter = e.LinearFilter), o.format = a.format, o.needsUpdate = !0, n && n(o))
         })
        }, l = 0, c = t.length; c > l; ++l) u(l);
      else a.load(t, function(t) {
       var a = r._parser(t, !0);
       if (a.isCubemap)
        for (var s = a.mipmaps.length / a.mipmapCount, u = 0; s > u; u++) {
         i[u] = {
          mipmaps: []
         };
         for (var l = 0; l < a.mipmapCount; l++) i[u].mipmaps.push(a.mipmaps[u * a.mipmapCount + l]), i[u].format = a.format, i[u].width = a.width, i[u].height = a.height
        } else o.image.width = a.width, o.image.height = a.height, o.mipmaps = a.mipmaps;
       1 === a.mipmapCount && (o.minFilter = e.LinearFilter), o.format = a.format, o.needsUpdate = !0, n && n(o)
      });
      return o
     }
    }, e.Material = function() {
     Object.defineProperty(this, "id", {
      value: e.MaterialIdCount++
     }), this.uuid = e.Math.generateUUID(), this.name = "", this.type = "Material", this.side = e.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = e.NormalBlending, this.blendSrc = e.SrcAlphaFactor, this.blendDst = e.OneMinusSrcAlphaFactor, this.blendEquation = e.AddEquation, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthTest = !0, this.depthWrite = !0, this.colorWrite = !0, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.overdraw = 0, this.visible = !0, this._needsUpdate = !0
    }, e.Material.prototype = {
     constructor: e.Material,
     get needsUpdate() {
      return this._needsUpdate
     },
     set needsUpdate(e) {
      e === !0 && this.update(), this._needsUpdate = e
     },
     setValues: function(t) {
      if (void 0 !== t)
       for (var n in t) {
        var r = t[n];
        if (void 0 !== r) {
         if (n in this) {
          var i = this[n];
          i instanceof e.Color ? i.set(r) : i instanceof e.Vector3 && r instanceof e.Vector3 ? i.copy(r) : this[n] = "overdraw" == n ? Number(r) : r
         }
        } else e.warn("THREE.Material: '" + n + "' parameter is undefined.")
       }
     },
     toJSON: function() {
      var t = {
       metadata: {
        version: 4.2,
        type: "material",
        generator: "MaterialExporter"
       },
       uuid: this.uuid,
       type: this.type
      };
      return "" !== this.name && (t.name = this.name), this instanceof e.MeshBasicMaterial ? (t.color = this.color.getHex(), this.vertexColors !== e.NoColors && (t.vertexColors = this.vertexColors), this.blending !== e.NormalBlending && (t.blending = this.blending), this.side !== e.FrontSide && (t.side = this.side)) : this instanceof e.MeshLambertMaterial ? (t.color = this.color.getHex(), t.emissive = this.emissive.getHex(), this.vertexColors !== e.NoColors && (t.vertexColors = this.vertexColors), this.shading !== e.SmoothShading && (t.shading = this.shading), this.blending !== e.NormalBlending && (t.blending = this.blending), this.side !== e.FrontSide && (t.side = this.side)) : this instanceof e.MeshPhongMaterial ? (t.color = this.color.getHex(), t.emissive = this.emissive.getHex(), t.specular = this.specular.getHex(), t.shininess = this.shininess, this.vertexColors !== e.NoColors && (t.vertexColors = this.vertexColors), this.shading !== e.SmoothShading && (t.shading = this.shading), this.blending !== e.NormalBlending && (t.blending = this.blending), this.side !== e.FrontSide && (t.side = this.side)) : this instanceof e.MeshNormalMaterial ? (this.blending !== e.NormalBlending && (t.blending = this.blending), this.side !== e.FrontSide && (t.side = this.side)) : this instanceof e.MeshDepthMaterial ? (this.blending !== e.NormalBlending && (t.blending = this.blending), this.side !== e.FrontSide && (t.side = this.side)) : this instanceof e.PointCloudMaterial ? (t.size = this.size, t.sizeAttenuation = this.sizeAttenuation, t.color = this.color.getHex(), this.vertexColors !== e.NoColors && (t.vertexColors = this.vertexColors), this.blending !== e.NormalBlending && (t.blending = this.blending)) : this instanceof e.ShaderMaterial ? (t.uniforms = this.uniforms, t.vertexShader = this.vertexShader, t.fragmentShader = this.fragmentShader) : this instanceof e.SpriteMaterial && (t.color = this.color.getHex()), this.opacity < 1 && (t.opacity = this.opacity), this.transparent !== !1 && (t.transparent = this.transparent), this.wireframe !== !1 && (t.wireframe = this.wireframe), t
     },
     clone: function(t) {
      return void 0 === t && (t = new e.Material), t.name = this.name, t.side = this.side, t.opacity = this.opacity, t.transparent = this.transparent, t.blending = this.blending, t.blendSrc = this.blendSrc, t.blendDst = this.blendDst, t.blendEquation = this.blendEquation, t.blendSrcAlpha = this.blendSrcAlpha, t.blendDstAlpha = this.blendDstAlpha, t.blendEquationAlpha = this.blendEquationAlpha, t.depthTest = this.depthTest, t.depthWrite = this.depthWrite, t.polygonOffset = this.polygonOffset, t.polygonOffsetFactor = this.polygonOffsetFactor, t.polygonOffsetUnits = this.polygonOffsetUnits, t.alphaTest = this.alphaTest, t.overdraw = this.overdraw, t.visible = this.visible, t
     },
     update: function() {
      this.dispatchEvent({
       type: "update"
      })
     },
     dispose: function() {
      this.dispatchEvent({
       type: "dispose"
      })
     }
    }, e.EventDispatcher.prototype.apply(e.Material.prototype), e.MaterialIdCount = 0, e.LineBasicMaterial = function(t) {
     e.Material.call(this), this.type = "LineBasicMaterial", this.color = new e.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.vertexColors = e.NoColors, this.fog = !0, this.setValues(t)
    }, e.LineBasicMaterial.prototype = Object.create(e.Material.prototype), e.LineBasicMaterial.prototype.constructor = e.LineBasicMaterial, e.LineBasicMaterial.prototype.clone = function() {
     var t = new e.LineBasicMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.linewidth = this.linewidth, t.linecap = this.linecap, t.linejoin = this.linejoin, t.vertexColors = this.vertexColors, t.fog = this.fog, t
    }, e.LineDashedMaterial = function(t) {
     e.Material.call(this), this.type = "LineDashedMaterial", this.color = new e.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(t)
    }, e.LineDashedMaterial.prototype = Object.create(e.Material.prototype), e.LineDashedMaterial.prototype.constructor = e.LineDashedMaterial, e.LineDashedMaterial.prototype.clone = function() {
     var t = new e.LineDashedMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.linewidth = this.linewidth, t.scale = this.scale, t.dashSize = this.dashSize, t.gapSize = this.gapSize, t.vertexColors = this.vertexColors, t.fog = this.fog, t
    }, e.MeshBasicMaterial = function(t) {
     e.Material.call(this), this.type = "MeshBasicMaterial", this.color = new e.Color(16777215), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = e.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = e.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = e.NoColors, this.skinning = !1, this.morphTargets = !1, this.setValues(t)
    }, e.MeshBasicMaterial.prototype = Object.create(e.Material.prototype), e.MeshBasicMaterial.prototype.constructor = e.MeshBasicMaterial, e.MeshBasicMaterial.prototype.clone = function() {
     var t = new e.MeshBasicMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.map = this.map, t.lightMap = this.lightMap, t.specularMap = this.specularMap, t.alphaMap = this.alphaMap, t.envMap = this.envMap, t.combine = this.combine, t.reflectivity = this.reflectivity, t.refractionRatio = this.refractionRatio, t.fog = this.fog, t.shading = this.shading, t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t.wireframeLinecap = this.wireframeLinecap, t.wireframeLinejoin = this.wireframeLinejoin, t.vertexColors = this.vertexColors, t.skinning = this.skinning, t.morphTargets = this.morphTargets, t
    }, e.MeshLambertMaterial = function(t) {
     e.Material.call(this), this.type = "MeshLambertMaterial", this.color = new e.Color(16777215), this.emissive = new e.Color(0), this.wrapAround = !1, this.wrapRGB = new e.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = e.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = e.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = e.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t)
    }, e.MeshLambertMaterial.prototype = Object.create(e.Material.prototype), e.MeshLambertMaterial.prototype.constructor = e.MeshLambertMaterial, e.MeshLambertMaterial.prototype.clone = function() {
     var t = new e.MeshLambertMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.emissive.copy(this.emissive), t.wrapAround = this.wrapAround, t.wrapRGB.copy(this.wrapRGB), t.map = this.map, t.lightMap = this.lightMap, t.specularMap = this.specularMap, t.alphaMap = this.alphaMap, t.envMap = this.envMap, t.combine = this.combine, t.reflectivity = this.reflectivity, t.refractionRatio = this.refractionRatio, t.fog = this.fog, t.shading = this.shading, t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t.wireframeLinecap = this.wireframeLinecap, t.wireframeLinejoin = this.wireframeLinejoin, t.vertexColors = this.vertexColors, t.skinning = this.skinning, t.morphTargets = this.morphTargets, t.morphNormals = this.morphNormals, t
    }, e.MeshPhongMaterial = function(t) {
     e.Material.call(this), this.type = "MeshPhongMaterial", this.color = new e.Color(16777215), this.emissive = new e.Color(0), this.specular = new e.Color(1118481), this.shininess = 30, this.metal = !1, this.wrapAround = !1, this.wrapRGB = new e.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new e.Vector2(1, 1), this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = e.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = e.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = e.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(t)
    }, e.MeshPhongMaterial.prototype = Object.create(e.Material.prototype), e.MeshPhongMaterial.prototype.constructor = e.MeshPhongMaterial, e.MeshPhongMaterial.prototype.clone = function() {
     var t = new e.MeshPhongMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.emissive.copy(this.emissive), t.specular.copy(this.specular), t.shininess = this.shininess, t.metal = this.metal, t.wrapAround = this.wrapAround, t.wrapRGB.copy(this.wrapRGB), t.map = this.map, t.lightMap = this.lightMap, t.bumpMap = this.bumpMap, t.bumpScale = this.bumpScale, t.normalMap = this.normalMap, t.normalScale.copy(this.normalScale), t.specularMap = this.specularMap, t.alphaMap = this.alphaMap, t.envMap = this.envMap, t.combine = this.combine, t.reflectivity = this.reflectivity, t.refractionRatio = this.refractionRatio, t.fog = this.fog, t.shading = this.shading, t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t.wireframeLinecap = this.wireframeLinecap, t.wireframeLinejoin = this.wireframeLinejoin, t.vertexColors = this.vertexColors, t.skinning = this.skinning, t.morphTargets = this.morphTargets, t.morphNormals = this.morphNormals, t
    }, e.MeshDepthMaterial = function(t) {
     e.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(t)
    }, e.MeshDepthMaterial.prototype = Object.create(e.Material.prototype), e.MeshDepthMaterial.prototype.constructor = e.MeshDepthMaterial, e.MeshDepthMaterial.prototype.clone = function() {
     var t = new e.MeshDepthMaterial;
     return e.Material.prototype.clone.call(this, t), t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t
    }, e.MeshNormalMaterial = function(t) {
     e.Material.call(this, t), this.type = "MeshNormalMaterial", this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(t)
    }, e.MeshNormalMaterial.prototype = Object.create(e.Material.prototype), e.MeshNormalMaterial.prototype.constructor = e.MeshNormalMaterial, e.MeshNormalMaterial.prototype.clone = function() {
     var t = new e.MeshNormalMaterial;
     return e.Material.prototype.clone.call(this, t), t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t
    }, e.MeshFaceMaterial = function(t) {
     this.uuid = e.Math.generateUUID(), this.type = "MeshFaceMaterial", this.materials = t instanceof Array ? t : []
    }, e.MeshFaceMaterial.prototype = {
     constructor: e.MeshFaceMaterial,
     toJSON: function() {
      for (var e = {
        metadata: {
         version: 4.2,
         type: "material",
         generator: "MaterialExporter"
        },
        uuid: this.uuid,
        type: this.type,
        materials: []
       }, t = 0, n = this.materials.length; n > t; t++) e.materials.push(this.materials[t].toJSON());
      return e
     },
     clone: function() {
      for (var t = new e.MeshFaceMaterial, n = 0; n < this.materials.length; n++) t.materials.push(this.materials[n].clone());
      return t
     }
    }, e.PointCloudMaterial = function(t) {
     e.Material.call(this), this.type = "PointCloudMaterial", this.color = new e.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = e.NoColors, this.fog = !0, this.setValues(t)
    }, e.PointCloudMaterial.prototype = Object.create(e.Material.prototype), e.PointCloudMaterial.prototype.constructor = e.PointCloudMaterial, e.PointCloudMaterial.prototype.clone = function() {
     var t = new e.PointCloudMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.map = this.map, t.size = this.size, t.sizeAttenuation = this.sizeAttenuation, t.vertexColors = this.vertexColors, t.fog = this.fog, t
    }, e.ParticleBasicMaterial = function(t) {
     return e.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."), new e.PointCloudMaterial(t)
    }, e.ParticleSystemMaterial = function(t) {
     return e.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."), new e.PointCloudMaterial(t)
    }, e.ShaderMaterial = function(t) {
     e.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.attributes = null, this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = e.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = e.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
     }, this.index0AttributeName = void 0, this.setValues(t)
    }, e.ShaderMaterial.prototype = Object.create(e.Material.prototype), e.ShaderMaterial.prototype.constructor = e.ShaderMaterial, e.ShaderMaterial.prototype.clone = function() {
     var t = new e.ShaderMaterial;
     return e.Material.prototype.clone.call(this, t), t.fragmentShader = this.fragmentShader, t.vertexShader = this.vertexShader, t.uniforms = e.UniformsUtils.clone(this.uniforms), t.attributes = this.attributes, t.defines = this.defines, t.shading = this.shading, t.wireframe = this.wireframe, t.wireframeLinewidth = this.wireframeLinewidth, t.fog = this.fog, t.lights = this.lights, t.vertexColors = this.vertexColors, t.skinning = this.skinning, t.morphTargets = this.morphTargets, t.morphNormals = this.morphNormals, t
    }, e.RawShaderMaterial = function(t) {
     e.ShaderMaterial.call(this, t), this.type = "RawShaderMaterial"
    }, e.RawShaderMaterial.prototype = Object.create(e.ShaderMaterial.prototype), e.RawShaderMaterial.prototype.constructor = e.RawShaderMaterial, e.RawShaderMaterial.prototype.clone = function() {
     var t = new e.RawShaderMaterial;
     return e.ShaderMaterial.prototype.clone.call(this, t), t
    }, e.SpriteMaterial = function(t) {
     e.Material.call(this), this.type = "SpriteMaterial", this.color = new e.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(t)
    }, e.SpriteMaterial.prototype = Object.create(e.Material.prototype), e.SpriteMaterial.prototype.constructor = e.SpriteMaterial, e.SpriteMaterial.prototype.clone = function() {
     var t = new e.SpriteMaterial;
     return e.Material.prototype.clone.call(this, t), t.color.copy(this.color), t.map = this.map, t.rotation = this.rotation, t.fog = this.fog, t
    }, e.Texture = function(t, n, r, i, o, a, s, u, l) {
     Object.defineProperty(this, "id", {
      value: e.TextureIdCount++
     }), this.uuid = e.Math.generateUUID(), this.name = "", this.sourceFile = "", this.image = void 0 !== t ? t : e.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== n ? n : e.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== r ? r : e.ClampToEdgeWrapping, this.wrapT = void 0 !== i ? i : e.ClampToEdgeWrapping, this.magFilter = void 0 !== o ? o : e.LinearFilter, this.minFilter = void 0 !== a ? a : e.LinearMipMapLinearFilter, this.anisotropy = void 0 !== l ? l : 1, this.format = void 0 !== s ? s : e.RGBAFormat, this.type = void 0 !== u ? u : e.UnsignedByteType, this.offset = new e.Vector2(0, 0), this.repeat = new e.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this._needsUpdate = !1, this.onUpdate = null
    }, e.Texture.DEFAULT_IMAGE = void 0, e.Texture.DEFAULT_MAPPING = e.UVMapping, e.Texture.prototype = {
     constructor: e.Texture,
     get needsUpdate() {
      return this._needsUpdate
     },
     set needsUpdate(e) {
      e === !0 && this.update(), this._needsUpdate = e
     },
     clone: function(t) {
      return void 0 === t && (t = new e.Texture), t.image = this.image, t.mipmaps = this.mipmaps.slice(0), t.mapping = this.mapping, t.wrapS = this.wrapS, t.wrapT = this.wrapT, t.magFilter = this.magFilter, t.minFilter = this.minFilter, t.anisotropy = this.anisotropy, t.format = this.format, t.type = this.type, t.offset.copy(this.offset), t.repeat.copy(this.repeat), t.generateMipmaps = this.generateMipmaps, t.premultiplyAlpha = this.premultiplyAlpha, t.flipY = this.flipY, t.unpackAlignment = this.unpackAlignment, t
     },
     update: function() {
      this.dispatchEvent({
       type: "update"
      })
     },
     dispose: function() {
      this.dispatchEvent({
       type: "dispose"
      })
     }
    }, e.EventDispatcher.prototype.apply(e.Texture.prototype), e.TextureIdCount = 0, e.CubeTexture = function(t, n, r, i, o, a, s, u, l) {
     n = void 0 !== n ? n : e.CubeReflectionMapping, e.Texture.call(this, t, n, r, i, o, a, s, u, l), this.images = t
    }, e.CubeTexture.prototype = Object.create(e.Texture.prototype), e.CubeTexture.prototype.constructor = e.CubeTexture, e.CubeTexture.clone = function(t) {
     return void 0 === t && (t = new e.CubeTexture), e.Texture.prototype.clone.call(this, t), t.images = this.images, t
    }, e.CompressedTexture = function(t, n, r, i, o, a, s, u, l, c, h) {
     e.Texture.call(this, null, a, s, u, l, c, i, o, h), this.image = {
      width: n,
      height: r
     }, this.mipmaps = t, this.flipY = !1, this.generateMipmaps = !1
    }, e.CompressedTexture.prototype = Object.create(e.Texture.prototype), e.CompressedTexture.prototype.constructor = e.CompressedTexture, e.CompressedTexture.prototype.clone = function() {
     var t = new e.CompressedTexture;
     return e.Texture.prototype.clone.call(this, t), t
    }, e.DataTexture = function(t, n, r, i, o, a, s, u, l, c, h) {
     e.Texture.call(this, null, a, s, u, l, c, i, o, h), this.image = {
      data: t,
      width: n,
      height: r
     }
    }, e.DataTexture.prototype = Object.create(e.Texture.prototype), e.DataTexture.prototype.constructor = e.DataTexture, e.DataTexture.prototype.clone = function() {
     var t = new e.DataTexture;
     return e.Texture.prototype.clone.call(this, t), t
    }, e.VideoTexture = function(t, n, r, i, o, a, s, u, l) {
     e.Texture.call(this, t, n, r, i, o, a, s, u, l), this.generateMipmaps = !1;
     var c = this,
      h = function() {
       requestAnimationFrame(h), t.readyState === t.HAVE_ENOUGH_DATA && (c.needsUpdate = !0)
      };
     h()
    }, e.VideoTexture.prototype = Object.create(e.Texture.prototype), e.VideoTexture.prototype.constructor = e.VideoTexture, e.Group = function() {
     e.Object3D.call(this), this.type = "Group"
    }, e.Group.prototype = Object.create(e.Object3D.prototype), e.Group.prototype.constructor = e.Group, e.PointCloud = function(t, n) {
     e.Object3D.call(this), this.type = "PointCloud", this.geometry = void 0 !== t ? t : new e.Geometry, this.material = void 0 !== n ? n : new e.PointCloudMaterial({
      color: 16777215 * Math.random()
     })
    }, e.PointCloud.prototype = Object.create(e.Object3D.prototype), e.PointCloud.prototype.constructor = e.PointCloud, e.PointCloud.prototype.raycast = function() {
     var t = new e.Matrix4,
      n = new e.Ray;
     return function(r, i) {
      var o = this,
       a = o.geometry,
       s = r.params.PointCloud.threshold;
      if (t.getInverse(this.matrixWorld), n.copy(r.ray).applyMatrix4(t), null === a.boundingBox || n.isIntersectionBox(a.boundingBox) !== !1) {
       var u = s / ((this.scale.x + this.scale.y + this.scale.z) / 3),
        l = new e.Vector3,
        c = function(e, t) {
         var a = n.distanceToPoint(e);
         if (u > a) {
          var s = n.closestPointToPoint(e);
          s.applyMatrix4(o.matrixWorld);
          var l = r.ray.origin.distanceTo(s);
          i.push({
           distance: l,
           distanceToRay: a,
           point: s.clone(),
           index: t,
           face: null,
           object: o
          })
         }
        };
       if (a instanceof e.BufferGeometry) {
        var h = a.attributes,
         p = h.position.array;
        if (void 0 !== h.index) {
         var d = h.index.array,
          f = a.offsets;
         if (0 === f.length) {
          var m = {
           start: 0,
           count: d.length,
           index: 0
          };
          f = [m]
         }
         for (var g = 0, v = f.length; v > g; ++g)
          for (var y = f[g].start, b = f[g].count, w = f[g].index, x = y, _ = y + b; _ > x; x++) {
           var S = w + d[x];
           l.fromArray(p, 3 * S), c(l, S)
          }
        } else
         for (var C = p.length / 3, x = 0; C > x; x++) l.set(p[3 * x], p[3 * x + 1], p[3 * x + 2]), c(l, x)
       } else
        for (var E = this.geometry.vertices, x = 0; x < E.length; x++) c(E[x], x)
      }
     }
    }(), e.PointCloud.prototype.clone = function(t) {
     return void 0 === t && (t = new e.PointCloud(this.geometry, this.material)), e.Object3D.prototype.clone.call(this, t), t
    }, e.ParticleSystem = function(t, n) {
     return e.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."), new e.PointCloud(t, n)
    }, e.Line = function(t, n, r) {
     e.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== t ? t : new e.Geometry, this.material = void 0 !== n ? n : new e.LineBasicMaterial({
      color: 16777215 * Math.random()
     }), this.mode = void 0 !== r ? r : e.LineStrip
    }, e.LineStrip = 0, e.LinePieces = 1, e.Line.prototype = Object.create(e.Object3D.prototype), e.Line.prototype.constructor = e.Line, e.Line.prototype.raycast = function() {
     var t = new e.Matrix4,
      n = new e.Ray,
      r = new e.Sphere;
     return function(i, o) {
      var a = i.linePrecision,
       s = a * a,
       u = this.geometry;
      if (null === u.boundingSphere && u.computeBoundingSphere(), r.copy(u.boundingSphere), r.applyMatrix4(this.matrixWorld), i.ray.isIntersectionSphere(r) !== !1) {
       t.getInverse(this.matrixWorld), n.copy(i.ray).applyMatrix4(t);
       var l = new e.Vector3,
        c = new e.Vector3,
        h = new e.Vector3,
        p = new e.Vector3,
        d = this.mode === e.LineStrip ? 1 : 2;
       if (u instanceof e.BufferGeometry) {
        var f = u.attributes;
        if (void 0 !== f.index) {
         var m = f.index.array,
          g = f.position.array,
          v = u.offsets;
         0 === v.length && (v = [{
          start: 0,
          count: m.length,
          index: 0
         }]);
         for (var y = 0; y < v.length; y++)
          for (var b = v[y].start, w = v[y].count, x = v[y].index, _ = b; b + w - 1 > _; _ += d) {
           var S = x + m[_],
            C = x + m[_ + 1];
           l.fromArray(g, 3 * S), c.fromArray(g, 3 * C);
           var E = n.distanceSqToSegment(l, c, p, h);
           if (!(E > s)) {
            var T = n.origin.distanceTo(p);
            T < i.near || T > i.far || o.push({
             distance: T,
             point: h.clone().applyMatrix4(this.matrixWorld),
             index: _,
             offsetIndex: y,
             face: null,
             faceIndex: null,
             object: this
            })
           }
          }
        } else
         for (var g = f.position.array, _ = 0; _ < g.length / 3 - 1; _ += d) {
          l.fromArray(g, 3 * _), c.fromArray(g, 3 * _ + 3);
          var E = n.distanceSqToSegment(l, c, p, h);
          if (!(E > s)) {
           var T = n.origin.distanceTo(p);
           T < i.near || T > i.far || o.push({
            distance: T,
            point: h.clone().applyMatrix4(this.matrixWorld),
            index: _,
            face: null,
            faceIndex: null,
            object: this
           })
          }
         }
       } else if (u instanceof e.Geometry)
        for (var M = u.vertices, A = M.length, _ = 0; A - 1 > _; _ += d) {
         var E = n.distanceSqToSegment(M[_], M[_ + 1], p, h);
         if (!(E > s)) {
          var T = n.origin.distanceTo(p);
          T < i.near || T > i.far || o.push({
           distance: T,
           point: h.clone().applyMatrix4(this.matrixWorld),
           index: _,
           face: null,
           faceIndex: null,
           object: this
          })
         }
        }
      }
     }
    }(), e.Line.prototype.clone = function(t) {
     return void 0 === t && (t = new e.Line(this.geometry, this.material, this.mode)), e.Object3D.prototype.clone.call(this, t), t
    }, e.Mesh = function(t, n) {
     e.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== t ? t : new e.Geometry, this.material = void 0 !== n ? n : new e.MeshBasicMaterial({
      color: 16777215 * Math.random()
     }), this.updateMorphTargets()
    }, e.Mesh.prototype = Object.create(e.Object3D.prototype), e.Mesh.prototype.constructor = e.Mesh, e.Mesh.prototype.updateMorphTargets = function() {
     if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
      this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], this.morphTargetDictionary = {};
      for (var e = 0, t = this.geometry.morphTargets.length; t > e; e++) this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[e].name] = e
     }
    }, e.Mesh.prototype.getMorphTargetIndexByName = function(t) {
     return void 0 !== this.morphTargetDictionary[t] ? this.morphTargetDictionary[t] : (e.warn("THREE.Mesh.getMorphTargetIndexByName: morph target " + t + " does not exist. Returning 0."), 0)
    }, e.Mesh.prototype.raycast = function() {
     var t = new e.Matrix4,
      n = new e.Ray,
      r = new e.Sphere,
      i = new e.Vector3,
      o = new e.Vector3,
      a = new e.Vector3;
     return function(s, u) {
      var l = this.geometry;
      if (null === l.boundingSphere && l.computeBoundingSphere(), r.copy(l.boundingSphere), r.applyMatrix4(this.matrixWorld), s.ray.isIntersectionSphere(r) !== !1 && (t.getInverse(this.matrixWorld), n.copy(s.ray).applyMatrix4(t), null === l.boundingBox || n.isIntersectionBox(l.boundingBox) !== !1))
       if (l instanceof e.BufferGeometry) {
        var c = this.material;
        if (void 0 === c) return;
        var h, p, d, f = l.attributes,
         m = s.precision;
        if (void 0 !== f.index) {
         var g = f.index.array,
          v = f.position.array,
          y = l.offsets;
         0 === y.length && (y = [{
          start: 0,
          count: g.length,
          index: 0
         }]);
         for (var b = 0, w = y.length; w > b; ++b)
          for (var x = y[b].start, _ = y[b].count, S = y[b].index, C = x, E = x + _; E > C; C += 3) {
           if (h = S + g[C], p = S + g[C + 1], d = S + g[C + 2], i.fromArray(v, 3 * h), o.fromArray(v, 3 * p), a.fromArray(v, 3 * d), c.side === e.BackSide) var T = n.intersectTriangle(a, o, i, !0);
           else var T = n.intersectTriangle(i, o, a, c.side !== e.DoubleSide);
           if (null !== T) {
            T.applyMatrix4(this.matrixWorld);
            var M = s.ray.origin.distanceTo(T);
            m > M || M < s.near || M > s.far || u.push({
             distance: M,
             point: T,
             face: new e.Face3(h, p, d, e.Triangle.normal(i, o, a)),
             faceIndex: null,
             object: this
            })
           }
          }
        } else
         for (var v = f.position.array, C = 0, A = 0, E = v.length; E > C; C += 3, A += 9) {
          if (h = C, p = C + 1, d = C + 2, i.fromArray(v, A), o.fromArray(v, A + 3), a.fromArray(v, A + 6), c.side === e.BackSide) var T = n.intersectTriangle(a, o, i, !0);
          else var T = n.intersectTriangle(i, o, a, c.side !== e.DoubleSide);
          if (null !== T) {
           T.applyMatrix4(this.matrixWorld);
           var M = s.ray.origin.distanceTo(T);
           m > M || M < s.near || M > s.far || u.push({
            distance: M,
            point: T,
            face: new e.Face3(h, p, d, e.Triangle.normal(i, o, a)),
            faceIndex: null,
            object: this
           })
          }
         }
       } else if (l instanceof e.Geometry)
       for (var h, p, d, P = this.material instanceof e.MeshFaceMaterial, R = P === !0 ? this.material.materials : null, m = s.precision, I = l.vertices, k = 0, D = l.faces.length; D > k; k++) {
        var V = l.faces[k],
         c = P === !0 ? R[V.materialIndex] : this.material;
        if (void 0 !== c) {
         if (h = I[V.a], p = I[V.b], d = I[V.c], c.morphTargets === !0) {
          var L = l.morphTargets,
           B = this.morphTargetInfluences;
          i.set(0, 0, 0), o.set(0, 0, 0), a.set(0, 0, 0);
          for (var O = 0, N = L.length; N > O; O++) {
           var F = B[O];
           if (0 !== F) {
            var U = L[O].vertices;
            i.x += (U[V.a].x - h.x) * F, i.y += (U[V.a].y - h.y) * F, i.z += (U[V.a].z - h.z) * F, o.x += (U[V.b].x - p.x) * F, o.y += (U[V.b].y - p.y) * F, o.z += (U[V.b].z - p.z) * F, a.x += (U[V.c].x - d.x) * F, a.y += (U[V.c].y - d.y) * F, a.z += (U[V.c].z - d.z) * F
           }
          }
          i.add(h), o.add(p), a.add(d), h = i, p = o, d = a
         }
         if (c.side === e.BackSide) var T = n.intersectTriangle(d, p, h, !0);
         else var T = n.intersectTriangle(h, p, d, c.side !== e.DoubleSide);
         if (null !== T) {
          T.applyMatrix4(this.matrixWorld);
          var M = s.ray.origin.distanceTo(T);
          m > M || M < s.near || M > s.far || u.push({
           distance: M,
           point: T,
           face: V,
           faceIndex: k,
           object: this
          })
         }
        }
       }
     }
    }(), e.Mesh.prototype.clone = function(t, n) {
     return void 0 === t && (t = new e.Mesh(this.geometry, this.material)), e.Object3D.prototype.clone.call(this, t, n), t
    }, e.Bone = function(t) {
     e.Object3D.call(this), this.type = "Bone", this.skin = t
    }, e.Bone.prototype = Object.create(e.Object3D.prototype), e.Bone.prototype.constructor = e.Bone, e.Skeleton = function(t, n, r) {
     if (this.useVertexTexture = void 0 !== r ? r : !0, this.identityMatrix = new e.Matrix4, t = t || [], this.bones = t.slice(0), this.useVertexTexture) {
      var i;
      i = this.bones.length > 256 ? 64 : this.bones.length > 64 ? 32 : this.bones.length > 16 ? 16 : 8, this.boneTextureWidth = i, this.boneTextureHeight = i, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new e.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, e.RGBAFormat, e.FloatType), this.boneTexture.minFilter = e.NearestFilter, this.boneTexture.magFilter = e.NearestFilter, this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1
     } else this.boneMatrices = new Float32Array(16 * this.bones.length);
     if (void 0 === n) this.calculateInverses();
     else if (this.bones.length === n.length) this.boneInverses = n.slice(0);
     else {
      e.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
      for (var o = 0, a = this.bones.length; a > o; o++) this.boneInverses.push(new e.Matrix4)
     }
    }, e.Skeleton.prototype.calculateInverses = function() {
     this.boneInverses = [];
     for (var t = 0, n = this.bones.length; n > t; t++) {
      var r = new e.Matrix4;
      this.bones[t] && r.getInverse(this.bones[t].matrixWorld), this.boneInverses.push(r)
     }
    }, e.Skeleton.prototype.pose = function() {
     for (var e, t = 0, n = this.bones.length; n > t; t++) e = this.bones[t], e && e.matrixWorld.getInverse(this.boneInverses[t]);
     for (var t = 0, n = this.bones.length; n > t; t++) e = this.bones[t], e && (e.parent ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale))
    }, e.Skeleton.prototype.update = function() {
     var t = new e.Matrix4;
     return function() {
      for (var e = 0, n = this.bones.length; n > e; e++) {
       var r = this.bones[e] ? this.bones[e].matrixWorld : this.identityMatrix;
       t.multiplyMatrices(r, this.boneInverses[e]), t.flattenToArrayOffset(this.boneMatrices, 16 * e)
      }
      this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
     }
    }(), e.SkinnedMesh = function(t, n, r) {
     e.Mesh.call(this, t, n), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new e.Matrix4, this.bindMatrixInverse = new e.Matrix4;
     var i = [];
     if (this.geometry && void 0 !== this.geometry.bones) {
      for (var o, a, s, u, l, c = 0, h = this.geometry.bones.length; h > c; ++c) a = this.geometry.bones[c], s = a.pos, u = a.rotq, l = a.scl, o = new e.Bone(this), i.push(o), o.name = a.name, o.position.set(s[0], s[1], s[2]), o.quaternion.set(u[0], u[1], u[2], u[3]), void 0 !== l ? o.scale.set(l[0], l[1], l[2]) : o.scale.set(1, 1, 1);
      for (var c = 0, h = this.geometry.bones.length; h > c; ++c) a = this.geometry.bones[c], -1 !== a.parent ? i[a.parent].add(i[c]) : this.add(i[c])
     }
     this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new e.Skeleton(i, void 0, r))
    }, e.SkinnedMesh.prototype = Object.create(e.Mesh.prototype), e.SkinnedMesh.prototype.constructor = e.SkinnedMesh, e.SkinnedMesh.prototype.bind = function(e, t) {
     this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t)
    }, e.SkinnedMesh.prototype.pose = function() {
     this.skeleton.pose()
    }, e.SkinnedMesh.prototype.normalizeSkinWeights = function() {
     if (this.geometry instanceof e.Geometry)
      for (var t = 0; t < this.geometry.skinIndices.length; t++) {
       var n = this.geometry.skinWeights[t],
        r = 1 / n.lengthManhattan();
       1 / 0 !== r ? n.multiplyScalar(r) : n.set(1)
      }
    }, e.SkinnedMesh.prototype.updateMatrixWorld = function() {
     e.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : e.warn("THREE.SkinnedMesh unreckognized bindMode: " + this.bindMode)
    }, e.SkinnedMesh.prototype.clone = function(t) {
     return void 0 === t && (t = new e.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), e.Mesh.prototype.clone.call(this, t), t
    }, e.MorphAnimMesh = function(t, n) {
     e.Mesh.call(this, t, n), this.type = "MorphAnimMesh", this.duration = 1e3, this.mirroredLoop = !1, this.time = 0, this.lastKeyframe = 0, this.currentKeyframe = 0, this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1)
    }, e.MorphAnimMesh.prototype = Object.create(e.Mesh.prototype), e.MorphAnimMesh.prototype.constructor = e.MorphAnimMesh, e.MorphAnimMesh.prototype.setFrameRange = function(e, t) {
     this.startKeyframe = e, this.endKeyframe = t, this.length = this.endKeyframe - this.startKeyframe + 1
    }, e.MorphAnimMesh.prototype.setDirectionForward = function() {
     this.direction = 1, this.directionBackwards = !1
    }, e.MorphAnimMesh.prototype.setDirectionBackward = function() {
     this.direction = -1, this.directionBackwards = !0
    }, e.MorphAnimMesh.prototype.parseAnimations = function() {
     var e = this.geometry;
     e.animations || (e.animations = {});
     for (var t, n = e.animations, r = /([a-z]+)_?(\d+)/, i = 0, o = e.morphTargets.length; o > i; i++) {
      var a = e.morphTargets[i],
       s = a.name.match(r);
      if (s && s.length > 1) {
       var u = s[1];
       n[u] || (n[u] = {
        start: 1 / 0,
        end: -1 / 0
       });
       var l = n[u];
       i < l.start && (l.start = i), i > l.end && (l.end = i), t || (t = u)
      }
     }
     e.firstAnimation = t
    }, e.MorphAnimMesh.prototype.setAnimationLabel = function(e, t, n) {
     this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[e] = {
      start: t,
      end: n
     }
    }, e.MorphAnimMesh.prototype.playAnimation = function(t, n) {
     var r = this.geometry.animations[t];
     r ? (this.setFrameRange(r.start, r.end), this.duration = 1e3 * ((r.end - r.start) / n), this.time = 0) : e.warn("THREE.MorphAnimMesh: animation[" + t + "] undefined in .playAnimation()")
    }, e.MorphAnimMesh.prototype.updateAnimation = function(t) {
     var n = this.duration / this.length;
     this.time += this.direction * t, this.mirroredLoop ? (this.time > this.duration || this.time < 0) && (this.direction *= -1, this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), this.time < 0 && (this.time = 0, this.directionBackwards = !1)) : (this.time = this.time % this.duration, this.time < 0 && (this.time += this.duration));
     var r = this.startKeyframe + e.Math.clamp(Math.floor(this.time / n), 0, this.length - 1);
     r !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[r] = 0, this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = r);
     var i = this.time % n / n;
     this.directionBackwards && (i = 1 - i), this.morphTargetInfluences[this.currentKeyframe] = i, this.morphTargetInfluences[this.lastKeyframe] = 1 - i
    }, e.MorphAnimMesh.prototype.interpolateTargets = function(e, t, n) {
     for (var r = this.morphTargetInfluences, i = 0, o = r.length; o > i; i++) r[i] = 0;
     e > -1 && (r[e] = 1 - n), t > -1 && (r[t] = n)
    }, e.MorphAnimMesh.prototype.clone = function(t) {
     return void 0 === t && (t = new e.MorphAnimMesh(this.geometry, this.material)), t.duration = this.duration, t.mirroredLoop = this.mirroredLoop, t.time = this.time, t.lastKeyframe = this.lastKeyframe, t.currentKeyframe = this.currentKeyframe, t.direction = this.direction, t.directionBackwards = this.directionBackwards, e.Mesh.prototype.clone.call(this, t), t
    }, e.LOD = function() {
     e.Object3D.call(this), this.objects = []
    }, e.LOD.prototype = Object.create(e.Object3D.prototype), e.LOD.prototype.constructor = e.LOD, e.LOD.prototype.addLevel = function(e, t) {
     void 0 === t && (t = 0), t = Math.abs(t);
     for (var n = 0; n < this.objects.length && !(t < this.objects[n].distance); n++);
     this.objects.splice(n, 0, {
      distance: t,
      object: e
     }), this.add(e)
    }, e.LOD.prototype.getObjectForDistance = function(e) {
     for (var t = 1, n = this.objects.length; n > t && !(e < this.objects[t].distance); t++);
     return this.objects[t - 1].object
    }, e.LOD.prototype.raycast = function() {
     var t = new e.Vector3;
     return function(e, n) {
      t.setFromMatrixPosition(this.matrixWorld);
      var r = e.ray.origin.distanceTo(t);
      this.getObjectForDistance(r).raycast(e, n)
     }
    }(), e.LOD.prototype.update = function() {
     var t = new e.Vector3,
      n = new e.Vector3;
     return function(e) {
      if (this.objects.length > 1) {
       t.setFromMatrixPosition(e.matrixWorld), n.setFromMatrixPosition(this.matrixWorld);
       var r = t.distanceTo(n);
       this.objects[0].object.visible = !0;
       for (var i = 1, o = this.objects.length; o > i && r >= this.objects[i].distance; i++) this.objects[i - 1].object.visible = !1, this.objects[i].object.visible = !0;
       for (; o > i; i++) this.objects[i].object.visible = !1
      }
     }
    }(), e.LOD.prototype.clone = function(t) {
     void 0 === t && (t = new e.LOD), e.Object3D.prototype.clone.call(this, t);
     for (var n = 0, r = this.objects.length; r > n; n++) {
      var i = this.objects[n].object.clone();
      i.visible = 0 === n, t.addLevel(i, this.objects[n].distance)
     }
     return t
    }, e.Sprite = function() {
     var t = new Uint16Array([0, 1, 2, 0, 2, 3]),
      n = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]),
      r = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
      i = new e.BufferGeometry;
     return i.addAttribute("index", new e.BufferAttribute(t, 1)), i.addAttribute("position", new e.BufferAttribute(n, 3)), i.addAttribute("uv", new e.BufferAttribute(r, 2)),
      function(t) {
       e.Object3D.call(this), this.type = "Sprite", this.geometry = i, this.material = void 0 !== t ? t : new e.SpriteMaterial
      }
    }(), e.Sprite.prototype = Object.create(e.Object3D.prototype), e.Sprite.prototype.constructor = e.Sprite, e.Sprite.prototype.raycast = function() {
     var t = new e.Vector3;
     return function(e, n) {
      t.setFromMatrixPosition(this.matrixWorld);
      var r = e.ray.distanceToPoint(t);
      r > this.scale.x || n.push({
       distance: r,
       point: this.position,
       face: null,
       object: this
      })
     }
    }(), e.Sprite.prototype.clone = function(t) {
     return void 0 === t && (t = new e.Sprite(this.material)), e.Object3D.prototype.clone.call(this, t), t
    }, e.Particle = e.Sprite, e.LensFlare = function(t, n, r, i, o) {
     e.Object3D.call(this), this.lensFlares = [], this.positionScreen = new e.Vector3, this.customUpdateCallback = void 0, void 0 !== t && this.add(t, n, r, i, o)
    }, e.LensFlare.prototype = Object.create(e.Object3D.prototype), e.LensFlare.prototype.constructor = e.LensFlare, e.LensFlare.prototype.add = function(t, n, r, i, o, a) {
     void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === a && (a = 1), void 0 === o && (o = new e.Color(16777215)), void 0 === i && (i = e.NormalBlending), r = Math.min(r, Math.max(0, r)), this.lensFlares.push({
      texture: t,
      size: n,
      distance: r,
      x: 0,
      y: 0,
      z: 0,
      scale: 1,
      rotation: 1,
      opacity: a,
      color: o,
      blending: i
     })
    }, e.LensFlare.prototype.updateLensFlares = function() {
     var e, t, n = this.lensFlares.length,
      r = 2 * -this.positionScreen.x,
      i = 2 * -this.positionScreen.y;
     for (e = 0; n > e; e++) t = this.lensFlares[e], t.x = this.positionScreen.x + r * t.distance, t.y = this.positionScreen.y + i * t.distance, t.wantedRotation = t.x * Math.PI * .25, t.rotation += .25 * (t.wantedRotation - t.rotation)
    }, e.Scene = function() {
     e.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0
    }, e.Scene.prototype = Object.create(e.Object3D.prototype), e.Scene.prototype.constructor = e.Scene, e.Scene.prototype.clone = function(t) {
     return void 0 === t && (t = new e.Scene), e.Object3D.prototype.clone.call(this, t), null !== this.fog && (t.fog = this.fog.clone()), null !== this.overrideMaterial && (t.overrideMaterial = this.overrideMaterial.clone()), t.autoUpdate = this.autoUpdate, t.matrixAutoUpdate = this.matrixAutoUpdate, t
    }, e.Fog = function(t, n, r) {
     this.name = "", this.color = new e.Color(t), this.near = void 0 !== n ? n : 1, this.far = void 0 !== r ? r : 1e3
    }, e.Fog.prototype.clone = function() {
     return new e.Fog(this.color.getHex(), this.near, this.far)
    }, e.FogExp2 = function(t, n) {
     this.name = "", this.color = new e.Color(t), this.density = void 0 !== n ? n : 25e-5
    }, e.FogExp2.prototype.clone = function() {
     return new e.FogExp2(this.color.getHex(), this.density)
    }, e.ShaderChunk = {}, e.ShaderChunk.common = "#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\nfloat square( in float a ) { return a*a; }\nvec2  square( in vec2 a )  { return vec2( a.x*a.x, a.y*a.y ); }\nvec3  square( in vec3 a )  { return vec3( a.x*a.x, a.y*a.y, a.z*a.z ); }\nvec4  square( in vec4 a )  { return vec4( a.x*a.x, a.y*a.y, a.z*a.z, a.w*a.w ); }\nfloat saturate( in float a ) { return clamp( a, 0.0, 1.0 ); }\nvec2  saturate( in vec2 a )  { return clamp( a, 0.0, 1.0 ); }\nvec3  saturate( in vec3 a )  { return clamp( a, 0.0, 1.0 ); }\nvec4  saturate( in vec4 a )  { return clamp( a, 0.0, 1.0 ); }\nfloat average( in float a ) { return a; }\nfloat average( in vec2 a )  { return ( a.x + a.y) * 0.5; }\nfloat average( in vec3 a )  { return ( a.x + a.y + a.z) / 3.0; }\nfloat average( in vec4 a )  { return ( a.x + a.y + a.z + a.w) * 0.25; }\nfloat whiteCompliment( in float a ) { return saturate( 1.0 - a ); }\nvec2  whiteCompliment( in vec2 a )  { return saturate( vec2(1.0) - a ); }\nvec3  whiteCompliment( in vec3 a )  { return saturate( vec3(1.0) - a ); }\nvec4  whiteCompliment( in vec4 a )  { return saturate( vec4(1.0) - a ); }\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\n}\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\n	return normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal) {\n	float distance = dot( planeNormal, point-pointOnPlane );\n	return point - distance * planeNormal;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return pointOnLine + lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) );\n}\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\n	if ( decayExponent > 0.0 ) {\n	  return pow( saturate( 1.0 - lightDistance / cutoffDistance ), decayExponent );\n	}\n	return 1.0;\n}\n\nvec3 inputToLinear( in vec3 a ) {\n#ifdef GAMMA_INPUT\n	return pow( a, vec3( float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\nvec3 linearToOutput( in vec3 a ) {\n#ifdef GAMMA_OUTPUT\n	return pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\n#else\n	return a;\n#endif\n}\n", e.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n", e.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * attenuation;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * attenuation;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * attenuation * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * attenuation * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront += ambientLightColor;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack += ambientLightColor;\n\n#endif\n", e.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n\n#endif\n", e.ShaderChunk.default_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n", e.ShaderChunk.map_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", e.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n", e.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif", e.ShaderChunk.lightmap_pars_vertex = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif", e.ShaderChunk.lights_phong_fragment = "#ifndef FLAT_SHADED\n\n	vec3 normal = normalize( vNormal );\n\n	#ifdef DOUBLE_SIDED\n\n		normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n	#endif\n\n#else\n\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n\n#endif\n\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\nvec3 totalDiffuseLight = vec3( 0.0 );\nvec3 totalSpecularLight = vec3( 0.0 );\n\n#if MAX_POINT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += pointLightColor[ i ] * pointDiffuseWeight * attenuation;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * attenuation * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			totalDiffuseLight += spotLightColor[ i ] * spotDiffuseWeight * attenuation * spotEffect;\n\n			// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			totalSpecularLight += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * attenuation * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec3 dirVector = transformDirection( directionalLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		totalDiffuseLight += directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		totalSpecularLight += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec3 lVector = transformDirection( hemisphereLightDirection[ i ], viewMatrix );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		totalDiffuseLight += hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		totalSpecularLight += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\n#ifdef METAL\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) * specular + totalSpecularLight + emissive;\n\n#else\n\n	outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + ambientLightColor ) + totalSpecularLight + emissive;\n\n#endif\n", e.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif", e.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif", e.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n", e.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif", e.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n	// Per-Pixel Tangent Space Normal Mapping\n	// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n", e.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n", e.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif", e.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif", e.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif", e.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	texelColor.xyz = inputToLinear( texelColor.xyz );\n\n	diffuseColor *= texelColor;\n\n#endif", e.ShaderChunk.lightmap_vertex = "#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif", e.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\n#endif\n", e.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n", e.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	vColor.xyz = inputToLinear( color.xyz );\n\n#endif", e.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n", e.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n", e.ShaderChunk.linear_to_gamma_fragment = "\n	outgoingLight = linearToOutput( outgoingLight );\n", e.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif", e.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n", e.ShaderChunk.map_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n", e.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// Transforming Normal Vectors with the Inverse Transformation\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	envColor.xyz = inputToLinear( envColor.xyz );\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n", e.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif", e.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif", e.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif", e.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif", e.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		float fogFactor = exp2( - square( fogDensity ) * square( depth ) * LOG2 );\n		fogFactor = whiteCompliment( fogFactor );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	outgoingLight = mix( outgoingLight, fogColor, fogFactor );\n\n#endif", e.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n	// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n	// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n	// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif\n", e.ShaderChunk.defaultnormal_vertex = "#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n", e.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDecay[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n", e.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif", e.ShaderChunk.map_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif", e.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	outgoingLight *= diffuseColor.xyz * texture2D( lightMap, vUv2 ).xyz;\n\n#endif", e.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif", e.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	diffuseColor.rgb *= vColor;\n\n#endif", e.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif", e.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = transformDirection( objectNormal, modelMatrix );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n", e.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) outgoingLight *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) outgoingLight *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	// NOTE: I am unsure if this is correct in linear space.  -bhouston, Dec 29, 2014\n	shadowColor = inputToLinear( shadowColor );\n\n	outgoingLight = outgoingLight * shadowColor;\n\n#endif\n", e.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n", e.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif", e.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n", e.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif", e.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n", e.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n", e.UniformsUtils = {
     merge: function(e) {
      for (var t = {}, n = 0; n < e.length; n++) {
       var r = this.clone(e[n]);
       for (var i in r) t[i] = r[i]
      }
      return t
     },
     clone: function(t) {
      var n = {};
      for (var r in t) {
       n[r] = {};
       for (var i in t[r]) {
        var o = t[r][i];
        n[r][i] = o instanceof e.Color || o instanceof e.Vector2 || o instanceof e.Vector3 || o instanceof e.Vector4 || o instanceof e.Matrix4 || o instanceof e.Texture ? o.clone() : o instanceof Array ? o.slice() : o
       }
      }
      return n
     }
    }, e.UniformsLib = {
     common: {
      diffuse: {
       type: "c",
       value: new e.Color(15658734)
      },
      opacity: {
       type: "f",
       value: 1
      },
      map: {
       type: "t",
       value: null
      },
      offsetRepeat: {
       type: "v4",
       value: new e.Vector4(0, 0, 1, 1)
      },
      lightMap: {
       type: "t",
       value: null
      },
      specularMap: {
       type: "t",
       value: null
      },
      alphaMap: {
       type: "t",
       value: null
      },
      envMap: {
       type: "t",
       value: null
      },
      flipEnvMap: {
       type: "f",
       value: -1
      },
      reflectivity: {
       type: "f",
       value: 1
      },
      refractionRatio: {
       type: "f",
       value: .98
      },
      morphTargetInfluences: {
       type: "f",
       value: 0
      }
     },
     bump: {
      bumpMap: {
       type: "t",
       value: null
      },
      bumpScale: {
       type: "f",
       value: 1
      }
     },
     normalmap: {
      normalMap: {
       type: "t",
       value: null
      },
      normalScale: {
       type: "v2",
       value: new e.Vector2(1, 1)
      }
     },
     fog: {
      fogDensity: {
       type: "f",
       value: 25e-5
      },
      fogNear: {
       type: "f",
       value: 1
      },
      fogFar: {
       type: "f",
       value: 2e3
      },
      fogColor: {
       type: "c",
       value: new e.Color(16777215)
      }
     },
     lights: {
      ambientLightColor: {
       type: "fv",
       value: []
      },
      directionalLightDirection: {
       type: "fv",
       value: []
      },
      directionalLightColor: {
       type: "fv",
       value: []
      },
      hemisphereLightDirection: {
       type: "fv",
       value: []
      },
      hemisphereLightSkyColor: {
       type: "fv",
       value: []
      },
      hemisphereLightGroundColor: {
       type: "fv",
       value: []
      },
      pointLightColor: {
       type: "fv",
       value: []
      },
      pointLightPosition: {
       type: "fv",
       value: []
      },
      pointLightDistance: {
       type: "fv1",
       value: []
      },
      pointLightDecay: {
       type: "fv1",
       value: []
      },
      spotLightColor: {
       type: "fv",
       value: []
      },
      spotLightPosition: {
       type: "fv",
       value: []
      },
      spotLightDirection: {
       type: "fv",
       value: []
      },
      spotLightDistance: {
       type: "fv1",
       value: []
      },
      spotLightAngleCos: {
       type: "fv1",
       value: []
      },
      spotLightExponent: {
       type: "fv1",
       value: []
      },
      spotLightDecay: {
       type: "fv1",
       value: []
      }
     },
     particle: {
      psColor: {
       type: "c",
       value: new e.Color(15658734)
      },
      opacity: {
       type: "f",
       value: 1
      },
      size: {
       type: "f",
       value: 1
      },
      scale: {
       type: "f",
       value: 1
      },
      map: {
       type: "t",
       value: null
      },
      offsetRepeat: {
       type: "v4",
       value: new e.Vector4(0, 0, 1, 1)
      },
      fogDensity: {
       type: "f",
       value: 25e-5
      },
      fogNear: {
       type: "f",
       value: 1
      },
      fogFar: {
       type: "f",
       value: 2e3
      },
      fogColor: {
       type: "c",
       value: new e.Color(16777215)
      }
     },
     shadowmap: {
      shadowMap: {
       type: "tv",
       value: []
      },
      shadowMapSize: {
       type: "v2v",
       value: []
      },
      shadowBias: {
       type: "fv1",
       value: []
      },
      shadowDarkness: {
       type: "fv1",
       value: []
      },
      shadowMatrix: {
       type: "m4v",
       value: []
      }
     }
    }, e.ShaderLib = {
     basic: {
      uniforms: e.UniformsUtils.merge([e.UniformsLib.common, e.UniformsLib.fog, e.UniformsLib.shadowmap]),
      vertexShader: [e.ShaderChunk.common, e.ShaderChunk.map_pars_vertex, e.ShaderChunk.lightmap_pars_vertex, e.ShaderChunk.envmap_pars_vertex, e.ShaderChunk.color_pars_vertex, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.skinning_pars_vertex, e.ShaderChunk.shadowmap_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.map_vertex, e.ShaderChunk.lightmap_vertex, e.ShaderChunk.color_vertex, e.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", e.ShaderChunk.morphnormal_vertex, e.ShaderChunk.skinnormal_vertex, e.ShaderChunk.defaultnormal_vertex, "	#endif", e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.skinning_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, e.ShaderChunk.worldpos_vertex, e.ShaderChunk.envmap_vertex, e.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
      fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", e.ShaderChunk.common, e.ShaderChunk.color_pars_fragment, e.ShaderChunk.map_pars_fragment, e.ShaderChunk.alphamap_pars_fragment, e.ShaderChunk.lightmap_pars_fragment, e.ShaderChunk.envmap_pars_fragment, e.ShaderChunk.fog_pars_fragment, e.ShaderChunk.shadowmap_pars_fragment, e.ShaderChunk.specularmap_pars_fragment, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", e.ShaderChunk.logdepthbuf_fragment, e.ShaderChunk.map_fragment, e.ShaderChunk.color_fragment, e.ShaderChunk.alphamap_fragment, e.ShaderChunk.alphatest_fragment, e.ShaderChunk.specularmap_fragment, "	outgoingLight = diffuseColor.rgb;", e.ShaderChunk.lightmap_fragment, e.ShaderChunk.envmap_fragment, e.ShaderChunk.shadowmap_fragment, e.ShaderChunk.linear_to_gamma_fragment, e.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
     },
     lambert: {
      uniforms: e.UniformsUtils.merge([e.UniformsLib.common, e.UniformsLib.fog, e.UniformsLib.lights, e.UniformsLib.shadowmap, {
       emissive: {
        type: "c",
        value: new e.Color(0)
       },
       wrapRGB: {
        type: "v3",
        value: new e.Vector3(1, 1, 1)
       }
      }]),
      vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", e.ShaderChunk.common, e.ShaderChunk.map_pars_vertex, e.ShaderChunk.lightmap_pars_vertex, e.ShaderChunk.envmap_pars_vertex, e.ShaderChunk.lights_lambert_pars_vertex, e.ShaderChunk.color_pars_vertex, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.skinning_pars_vertex, e.ShaderChunk.shadowmap_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.map_vertex, e.ShaderChunk.lightmap_vertex, e.ShaderChunk.color_vertex, e.ShaderChunk.morphnormal_vertex, e.ShaderChunk.skinbase_vertex, e.ShaderChunk.skinnormal_vertex, e.ShaderChunk.defaultnormal_vertex, e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.skinning_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, e.ShaderChunk.worldpos_vertex, e.ShaderChunk.envmap_vertex, e.ShaderChunk.lights_lambert_vertex, e.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
      fragmentShader: ["uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", e.ShaderChunk.common, e.ShaderChunk.color_pars_fragment, e.ShaderChunk.map_pars_fragment, e.ShaderChunk.alphamap_pars_fragment, e.ShaderChunk.lightmap_pars_fragment, e.ShaderChunk.envmap_pars_fragment, e.ShaderChunk.fog_pars_fragment, e.ShaderChunk.shadowmap_pars_fragment, e.ShaderChunk.specularmap_pars_fragment, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", e.ShaderChunk.logdepthbuf_fragment, e.ShaderChunk.map_fragment, e.ShaderChunk.color_fragment, e.ShaderChunk.alphamap_fragment, e.ShaderChunk.alphatest_fragment, e.ShaderChunk.specularmap_fragment, "	#ifdef DOUBLE_SIDED", "		if ( gl_FrontFacing )", "			outgoingLight += diffuseColor.rgb * vLightFront + emissive;", "		else", "			outgoingLight += diffuseColor.rgb * vLightBack + emissive;", "	#else", "		outgoingLight += diffuseColor.rgb * vLightFront + emissive;", "	#endif", e.ShaderChunk.lightmap_fragment, e.ShaderChunk.envmap_fragment, e.ShaderChunk.shadowmap_fragment, e.ShaderChunk.linear_to_gamma_fragment, e.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
     },
     phong: {
      uniforms: e.UniformsUtils.merge([e.UniformsLib.common, e.UniformsLib.bump, e.UniformsLib.normalmap, e.UniformsLib.fog, e.UniformsLib.lights, e.UniformsLib.shadowmap, {
       emissive: {
        type: "c",
        value: new e.Color(0)
       },
       specular: {
        type: "c",
        value: new e.Color(1118481)
       },
       shininess: {
        type: "f",
        value: 30
       },
       wrapRGB: {
        type: "v3",
        value: new e.Vector3(1, 1, 1)
       }
      }]),
      vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "#ifndef FLAT_SHADED", "	varying vec3 vNormal;", "#endif", e.ShaderChunk.common, e.ShaderChunk.map_pars_vertex, e.ShaderChunk.lightmap_pars_vertex, e.ShaderChunk.envmap_pars_vertex, e.ShaderChunk.lights_phong_pars_vertex, e.ShaderChunk.color_pars_vertex, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.skinning_pars_vertex, e.ShaderChunk.shadowmap_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.map_vertex, e.ShaderChunk.lightmap_vertex, e.ShaderChunk.color_vertex, e.ShaderChunk.morphnormal_vertex, e.ShaderChunk.skinbase_vertex, e.ShaderChunk.skinnormal_vertex, e.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED", "	vNormal = normalize( transformedNormal );", "#endif", e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.skinning_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = -mvPosition.xyz;", e.ShaderChunk.worldpos_vertex, e.ShaderChunk.envmap_vertex, e.ShaderChunk.lights_phong_vertex, e.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
      fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", "uniform float opacity;", e.ShaderChunk.common, e.ShaderChunk.color_pars_fragment, e.ShaderChunk.map_pars_fragment, e.ShaderChunk.alphamap_pars_fragment, e.ShaderChunk.lightmap_pars_fragment, e.ShaderChunk.envmap_pars_fragment, e.ShaderChunk.fog_pars_fragment, e.ShaderChunk.lights_phong_pars_fragment, e.ShaderChunk.shadowmap_pars_fragment, e.ShaderChunk.bumpmap_pars_fragment, e.ShaderChunk.normalmap_pars_fragment, e.ShaderChunk.specularmap_pars_fragment, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", e.ShaderChunk.logdepthbuf_fragment, e.ShaderChunk.map_fragment, e.ShaderChunk.color_fragment, e.ShaderChunk.alphamap_fragment, e.ShaderChunk.alphatest_fragment, e.ShaderChunk.specularmap_fragment, e.ShaderChunk.lights_phong_fragment, e.ShaderChunk.lightmap_fragment, e.ShaderChunk.envmap_fragment, e.ShaderChunk.shadowmap_fragment, e.ShaderChunk.linear_to_gamma_fragment, e.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
     },
     particle_basic: {
      uniforms: e.UniformsUtils.merge([e.UniformsLib.particle, e.UniformsLib.shadowmap]),
      vertexShader: ["uniform float size;", "uniform float scale;", e.ShaderChunk.common, e.ShaderChunk.color_pars_vertex, e.ShaderChunk.shadowmap_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	#ifdef USE_SIZEATTENUATION", "		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "	#else", "		gl_PointSize = size;", "	#endif", "	gl_Position = projectionMatrix * mvPosition;", e.ShaderChunk.logdepthbuf_vertex, e.ShaderChunk.worldpos_vertex, e.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
      fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", e.ShaderChunk.common, e.ShaderChunk.color_pars_fragment, e.ShaderChunk.map_particle_pars_fragment, e.ShaderChunk.fog_pars_fragment, e.ShaderChunk.shadowmap_pars_fragment, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( psColor, opacity );", e.ShaderChunk.logdepthbuf_fragment, e.ShaderChunk.map_particle_fragment, e.ShaderChunk.color_fragment, e.ShaderChunk.alphatest_fragment, "	outgoingLight = diffuseColor.rgb;", e.ShaderChunk.shadowmap_fragment, e.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
     },
     dashed: {
      uniforms: e.UniformsUtils.merge([e.UniformsLib.common, e.UniformsLib.fog, {
       scale: {
        type: "f",
        value: 1
       },
       dashSize: {
        type: "f",
        value: 1
       },
       totalSize: {
        type: "f",
        value: 2
       }
      }]),
      vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", e.ShaderChunk.common, e.ShaderChunk.color_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;", "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	gl_Position = projectionMatrix * mvPosition;", e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", e.ShaderChunk.common, e.ShaderChunk.color_pars_fragment, e.ShaderChunk.fog_pars_fragment, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	if ( mod( vLineDistance, totalSize ) > dashSize ) {", "		discard;", "	}", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor = vec4( diffuse, opacity );", e.ShaderChunk.logdepthbuf_fragment, e.ShaderChunk.color_fragment, "	outgoingLight = diffuseColor.rgb;", e.ShaderChunk.fog_fragment, "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "}"].join("\n")
     },
     depth: {
      uniforms: {
       mNear: {
        type: "f",
        value: 1
       },
       mFar: {
        type: "f",
        value: 2e3
       },
       opacity: {
        type: "f",
        value: 1
       }
      },
      vertexShader: [e.ShaderChunk.common, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", e.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		float depth = gl_FragDepthEXT / gl_FragCoord.w;", "	#else", "		float depth = gl_FragCoord.z / gl_FragCoord.w;", "	#endif", "	float color = 1.0 - smoothstep( mNear, mFar, depth );", "	gl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
     },
     normal: {
      uniforms: {
       opacity: {
        type: "f",
        value: 1
       }
      },
      vertexShader: ["varying vec3 vNormal;", e.ShaderChunk.common, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vNormal = normalize( normalMatrix * normal );", e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", e.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
     },
     cube: {
      uniforms: {
       tCube: {
        type: "t",
        value: null
       },
       tFlip: {
        type: "f",
        value: -1
       }
      },
      vertexShader: ["varying vec3 vWorldPosition;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vWorldPosition = transformDirection( position, modelMatrix );", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", e.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
     },
     equirect: {
      uniforms: {
       tEquirect: {
        type: "t",
        value: null
       },
       tFlip: {
        type: "f",
        value: -1
       }
      },
      vertexShader: ["varying vec3 vWorldPosition;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vWorldPosition = transformDirection( position, modelMatrix );", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: ["uniform sampler2D tEquirect;", "uniform float tFlip;", "varying vec3 vWorldPosition;", e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "vec3 direction = normalize( vWorldPosition );", "vec2 sampleUV;", "sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );", "sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "gl_FragColor = texture2D( tEquirect, sampleUV );", e.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
     },
     depthRGBA: {
      uniforms: {},
      vertexShader: [e.ShaderChunk.common, e.ShaderChunk.morphtarget_pars_vertex, e.ShaderChunk.skinning_pars_vertex, e.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", e.ShaderChunk.skinbase_vertex, e.ShaderChunk.morphtarget_vertex, e.ShaderChunk.skinning_vertex, e.ShaderChunk.default_vertex, e.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
      fragmentShader: [e.ShaderChunk.common, e.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {", "	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );", "	res -= res.xxyz * bit_mask;", "	return res;", "}", "void main() {", e.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );", "	#else", "		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "	#endif", "}"].join("\n")
     }
    }, e.WebGLRenderer = function(t) {
     function n(e) {
      e.__webglVertexBuffer = It.createBuffer(), e.__webglColorBuffer = It.createBuffer(), kt.info.memory.geometries++
     }

     function r(e) {
      e.__webglVertexBuffer = It.createBuffer(), e.__webglColorBuffer = It.createBuffer(), e.__webglLineDistanceBuffer = It.createBuffer(), kt.info.memory.geometries++
     }

     function i(e) {
      e.__webglVertexBuffer = It.createBuffer(), e.__webglNormalBuffer = It.createBuffer(), e.__webglTangentBuffer = It.createBuffer(), e.__webglColorBuffer = It.createBuffer(), e.__webglUVBuffer = It.createBuffer(), e.__webglUV2Buffer = It.createBuffer(), e.__webglSkinIndicesBuffer = It.createBuffer(), e.__webglSkinWeightsBuffer = It.createBuffer(), e.__webglFaceBuffer = It.createBuffer(), e.__webglLineBuffer = It.createBuffer();
      var t = e.numMorphTargets;
      if (t) {
       e.__webglMorphTargetsBuffers = [];
       for (var n = 0, r = t; r > n; n++) e.__webglMorphTargetsBuffers.push(It.createBuffer())
      }
      var i = e.numMorphNormals;
      if (i) {
       e.__webglMorphNormalsBuffers = [];
       for (var n = 0, r = i; r > n; n++) e.__webglMorphNormalsBuffers.push(It.createBuffer())
      }
      kt.info.memory.geometries++
     }

     function o(e) {
      var t = e.geometry,
       n = e.material,
       r = t.vertices.length;
      if (n.attributes) {
       void 0 === t.__webglCustomAttributesList && (t.__webglCustomAttributesList = []);
       for (var i in n.attributes) {
        var o = n.attributes[i];
        if (!o.__webglInitialized || o.createUniqueBuffers) {
         o.__webglInitialized = !0;
         var a = 1;
         "v2" === o.type ? a = 2 : "v3" === o.type ? a = 3 : "v4" === o.type ? a = 4 : "c" === o.type && (a = 3), o.size = a, o.array = new Float32Array(r * a), o.buffer = It.createBuffer(), o.buffer.belongsToAttribute = i, o.needsUpdate = !0
        }
        t.__webglCustomAttributesList.push(o)
       }
      }
     }

     function a(e, t) {
      var n = e.vertices.length;
      e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__webglParticleCount = n, o(t)
     }

     function s(e, t) {
      var n = e.vertices.length;
      e.__vertexArray = new Float32Array(3 * n), e.__colorArray = new Float32Array(3 * n), e.__lineDistanceArray = new Float32Array(1 * n), e.__webglLineCount = n, o(t)
     }

     function u(e, t) {
      var n = t.geometry,
       r = e.faces3,
       i = 3 * r.length,
       o = 1 * r.length,
       a = 3 * r.length,
       s = l(t, e);
      e.__vertexArray = new Float32Array(3 * i), e.__normalArray = new Float32Array(3 * i), e.__colorArray = new Float32Array(3 * i), e.__uvArray = new Float32Array(2 * i), n.faceVertexUvs.length > 1 && (e.__uv2Array = new Float32Array(2 * i)), n.hasTangents && (e.__tangentArray = new Float32Array(4 * i)), t.geometry.skinWeights.length && t.geometry.skinIndices.length && (e.__skinIndexArray = new Float32Array(4 * i), e.__skinWeightArray = new Float32Array(4 * i));
      var u = null !== nn.get("OES_element_index_uint") && o > 21845 ? Uint32Array : Uint16Array;
      e.__typeArray = u, e.__faceArray = new u(3 * o), e.__lineArray = new u(2 * a);
      var c = e.numMorphTargets;
      if (c) {
       e.__morphTargetsArrays = [];
       for (var h = 0, p = c; p > h; h++) e.__morphTargetsArrays.push(new Float32Array(3 * i))
      }
      var d = e.numMorphNormals;
      if (d) {
       e.__morphNormalsArrays = [];
       for (var h = 0, p = d; p > h; h++) e.__morphNormalsArrays.push(new Float32Array(3 * i))
      }
      if (e.__webglFaceCount = 3 * o, e.__webglLineCount = 2 * a, s.attributes) {
       void 0 === e.__webglCustomAttributesList && (e.__webglCustomAttributesList = []);
       for (var f in s.attributes) {
        var m = s.attributes[f],
         g = {};
        for (var v in m) g[v] = m[v];
        if (!g.__webglInitialized || g.createUniqueBuffers) {
         g.__webglInitialized = !0;
         var y = 1;
         "v2" === g.type ? y = 2 : "v3" === g.type ? y = 3 : "v4" === g.type ? y = 4 : "c" === g.type && (y = 3), g.size = y, g.array = new Float32Array(i * y), g.buffer = It.createBuffer(), g.buffer.belongsToAttribute = f, m.needsUpdate = !0, g.__original = m
        }
        e.__webglCustomAttributesList.push(g)
       }
      }
      e.__inittedArrays = !0
     }

     function l(t, n) {
      return t.material instanceof e.MeshFaceMaterial ? t.material.materials[n.materialIndex] : t.material
     }

     function c(t) {
      return t instanceof e.MeshPhongMaterial == !1 && t.shading === e.FlatShading
     }

     function h(e, t) {
      var n, r, i, o, a, s, u, l, c, h, p, d = e.vertices,
       f = d.length,
       m = e.colors,
       g = m.length,
       v = e.__vertexArray,
       y = e.__colorArray,
       b = e.verticesNeedUpdate,
       w = e.colorsNeedUpdate,
       x = e.__webglCustomAttributesList;
      if (b) {
       for (n = 0; f > n; n++) i = d[n], o = 3 * n, v[o] = i.x, v[o + 1] = i.y, v[o + 2] = i.z;
       It.bindBuffer(It.ARRAY_BUFFER, e.__webglVertexBuffer), It.bufferData(It.ARRAY_BUFFER, v, t)
      }
      if (w) {
       for (r = 0; g > r; r++) a = m[r], o = 3 * r, y[o] = a.r, y[o + 1] = a.g, y[o + 2] = a.b;
       It.bindBuffer(It.ARRAY_BUFFER, e.__webglColorBuffer), It.bufferData(It.ARRAY_BUFFER, y, t)
      }
      if (x)
       for (s = 0, u = x.length; u > s; s++) {
        if (p = x[s], p.needsUpdate && (void 0 === p.boundTo || "vertices" === p.boundTo))
         if (c = p.value.length, o = 0, 1 === p.size)
          for (l = 0; c > l; l++) p.array[l] = p.value[l];
         else if (2 === p.size)
         for (l = 0; c > l; l++) h = p.value[l], p.array[o] = h.x, p.array[o + 1] = h.y, o += 2;
        else if (3 === p.size)
         if ("c" === p.type)
          for (l = 0; c > l; l++) h = p.value[l], p.array[o] = h.r, p.array[o + 1] = h.g, p.array[o + 2] = h.b, o += 3;
         else
          for (l = 0; c > l; l++) h = p.value[l], p.array[o] = h.x, p.array[o + 1] = h.y, p.array[o + 2] = h.z, o += 3;
        else if (4 === p.size)
         for (l = 0; c > l; l++) h = p.value[l], p.array[o] = h.x, p.array[o + 1] = h.y, p.array[o + 2] = h.z, p.array[o + 3] = h.w, o += 4;
        It.bindBuffer(It.ARRAY_BUFFER, p.buffer), It.bufferData(It.ARRAY_BUFFER, p.array, t), p.needsUpdate = !1
       }
     }

     function p(e, t) {
      var n, r, i, o, a, s, u, l, c, h, p, d, f = e.vertices,
       m = e.colors,
       g = e.lineDistances,
       v = f.length,
       y = m.length,
       b = g.length,
       w = e.__vertexArray,
       x = e.__colorArray,
       _ = e.__lineDistanceArray,
       S = e.verticesNeedUpdate,
       C = e.colorsNeedUpdate,
       E = e.lineDistancesNeedUpdate,
       T = e.__webglCustomAttributesList;
      if (S) {
       for (n = 0; v > n; n++) o = f[n], a = 3 * n, w[a] = o.x, w[a + 1] = o.y, w[a + 2] = o.z;
       It.bindBuffer(It.ARRAY_BUFFER, e.__webglVertexBuffer), It.bufferData(It.ARRAY_BUFFER, w, t)
      }
      if (C) {
       for (r = 0; y > r; r++) s = m[r], a = 3 * r, x[a] = s.r, x[a + 1] = s.g, x[a + 2] = s.b;
       It.bindBuffer(It.ARRAY_BUFFER, e.__webglColorBuffer), It.bufferData(It.ARRAY_BUFFER, x, t)
      }
      if (E) {
       for (i = 0; b > i; i++) _[i] = g[i];
       It.bindBuffer(It.ARRAY_BUFFER, e.__webglLineDistanceBuffer), It.bufferData(It.ARRAY_BUFFER, _, t)
      }
      if (T)
       for (u = 0, l = T.length; l > u; u++)
        if (d = T[u], d.needsUpdate && (void 0 === d.boundTo || "vertices" === d.boundTo)) {
         if (a = 0, h = d.value.length, 1 === d.size)
          for (c = 0; h > c; c++) d.array[c] = d.value[c];
         else if (2 === d.size)
          for (c = 0; h > c; c++) p = d.value[c], d.array[a] = p.x, d.array[a + 1] = p.y, a += 2;
         else if (3 === d.size)
          if ("c" === d.type)
           for (c = 0; h > c; c++) p = d.value[c], d.array[a] = p.r, d.array[a + 1] = p.g, d.array[a + 2] = p.b, a += 3;
          else
           for (c = 0; h > c; c++) p = d.value[c], d.array[a] = p.x, d.array[a + 1] = p.y, d.array[a + 2] = p.z, a += 3;
         else if (4 === d.size)
          for (c = 0; h > c; c++) p = d.value[c], d.array[a] = p.x, d.array[a + 1] = p.y, d.array[a + 2] = p.z, d.array[a + 3] = p.w, a += 4;
         It.bindBuffer(It.ARRAY_BUFFER, d.buffer), It.bufferData(It.ARRAY_BUFFER, d.array, t), d.needsUpdate = !1
        }
     }

     function d(t, n, r, i, o) {
      if (t.__inittedArrays) {
       var a, s, u, l, h, p, d, f, m, g, v, y, b, w, x, _, S, C, E, T, M, A, P, R, I, k, D, V, L, B, O, N, F, U, z, G, H, j, q, W, X, Y, Q = c(o),
        Z = 0,
        K = 0,
        $ = 0,
        J = 0,
        et = 0,
        tt = 0,
        nt = 0,
        rt = 0,
        it = 0,
        ot = 0,
        at = 0,
        st = 0,
        ut = t.__vertexArray,
        lt = t.__uvArray,
        ct = t.__uv2Array,
        ht = t.__normalArray,
        pt = t.__tangentArray,
        dt = t.__colorArray,
        ft = t.__skinIndexArray,
        mt = t.__skinWeightArray,
        gt = t.__morphTargetsArrays,
        vt = t.__morphNormalsArrays,
        yt = t.__webglCustomAttributesList,
        bt = t.__faceArray,
        wt = t.__lineArray,
        xt = n.geometry,
        _t = xt.verticesNeedUpdate,
        St = xt.elementsNeedUpdate,
        Ct = xt.uvsNeedUpdate,
        Et = xt.normalsNeedUpdate,
        Tt = xt.tangentsNeedUpdate,
        Mt = xt.colorsNeedUpdate,
        At = xt.morphTargetsNeedUpdate,
        Pt = xt.vertices,
        Rt = t.faces3,
        kt = xt.faces,
        Dt = xt.faceVertexUvs[0],
        Vt = xt.faceVertexUvs[1],
        Lt = xt.skinIndices,
        Bt = xt.skinWeights,
        Ot = xt.morphTargets,
        Nt = xt.morphNormals;
       if (_t) {
        for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], y = Pt[l.a], b = Pt[l.b], w = Pt[l.c], ut[K] = y.x, ut[K + 1] = y.y, ut[K + 2] = y.z, ut[K + 3] = b.x, ut[K + 4] = b.y, ut[K + 5] = b.z, ut[K + 6] = w.x, ut[K + 7] = w.y, ut[K + 8] = w.z, K += 9;
        It.bindBuffer(It.ARRAY_BUFFER, t.__webglVertexBuffer), It.bufferData(It.ARRAY_BUFFER, ut, r)
       }
       if (At)
        for (z = 0, G = Ot.length; G > z; z++) {
         for (at = 0, a = 0, s = Rt.length; s > a; a++) q = Rt[a], l = kt[q], y = Ot[z].vertices[l.a], b = Ot[z].vertices[l.b], w = Ot[z].vertices[l.c], H = gt[z], H[at] = y.x, H[at + 1] = y.y, H[at + 2] = y.z, H[at + 3] = b.x, H[at + 4] = b.y, H[at + 5] = b.z, H[at + 6] = w.x, H[at + 7] = w.y, H[at + 8] = w.z, o.morphNormals && (Q ? (C = Nt[z].faceNormals[q], E = C, T = C) : (W = Nt[z].vertexNormals[q], C = W.a, E = W.b, T = W.c), j = vt[z], j[at] = C.x, j[at + 1] = C.y, j[at + 2] = C.z, j[at + 3] = E.x, j[at + 4] = E.y, j[at + 5] = E.z, j[at + 6] = T.x, j[at + 7] = T.y, j[at + 8] = T.z), at += 9;
         It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[z]), It.bufferData(It.ARRAY_BUFFER, gt[z], r), o.morphNormals && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[z]), It.bufferData(It.ARRAY_BUFFER, vt[z], r))
        }
       if (Bt.length) {
        for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], R = Bt[l.a], I = Bt[l.b], k = Bt[l.c], mt[ot] = R.x, mt[ot + 1] = R.y, mt[ot + 2] = R.z, mt[ot + 3] = R.w, mt[ot + 4] = I.x, mt[ot + 5] = I.y, mt[ot + 6] = I.z, mt[ot + 7] = I.w, mt[ot + 8] = k.x, mt[ot + 9] = k.y, mt[ot + 10] = k.z, mt[ot + 11] = k.w, D = Lt[l.a], V = Lt[l.b], L = Lt[l.c], ft[ot] = D.x, ft[ot + 1] = D.y, ft[ot + 2] = D.z, ft[ot + 3] = D.w, ft[ot + 4] = V.x, ft[ot + 5] = V.y, ft[ot + 6] = V.z, ft[ot + 7] = V.w, ft[ot + 8] = L.x, ft[ot + 9] = L.y, ft[ot + 10] = L.z, ft[ot + 11] = L.w, ot += 12;
        ot > 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglSkinIndicesBuffer), It.bufferData(It.ARRAY_BUFFER, ft, r), It.bindBuffer(It.ARRAY_BUFFER, t.__webglSkinWeightsBuffer), It.bufferData(It.ARRAY_BUFFER, mt, r))
       }
       if (Mt) {
        for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], d = l.vertexColors, f = l.color, 3 === d.length && o.vertexColors === e.VertexColors ? (M = d[0], A = d[1], P = d[2]) : (M = f, A = f, P = f), dt[it] = M.r, dt[it + 1] = M.g, dt[it + 2] = M.b, dt[it + 3] = A.r, dt[it + 4] = A.g, dt[it + 5] = A.b, dt[it + 6] = P.r, dt[it + 7] = P.g, dt[it + 8] = P.b, it += 9;
        it > 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglColorBuffer), It.bufferData(It.ARRAY_BUFFER, dt, r))
       }
       if (Tt && xt.hasTangents) {
        for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], m = l.vertexTangents, x = m[0], _ = m[1], S = m[2], pt[nt] = x.x, pt[nt + 1] = x.y, pt[nt + 2] = x.z, pt[nt + 3] = x.w, pt[nt + 4] = _.x, pt[nt + 5] = _.y, pt[nt + 6] = _.z, pt[nt + 7] = _.w, pt[nt + 8] = S.x, pt[nt + 9] = S.y, pt[nt + 10] = S.z, pt[nt + 11] = S.w, nt += 12;
        It.bindBuffer(It.ARRAY_BUFFER, t.__webglTangentBuffer), It.bufferData(It.ARRAY_BUFFER, pt, r)
       }
       if (Et) {
        for (a = 0, s = Rt.length; s > a; a++)
         if (l = kt[Rt[a]], h = l.vertexNormals, p = l.normal, 3 === h.length && Q === !1)
          for (B = 0; 3 > B; B++) N = h[B], ht[tt] = N.x, ht[tt + 1] = N.y, ht[tt + 2] = N.z, tt += 3;
         else
          for (B = 0; 3 > B; B++) ht[tt] = p.x, ht[tt + 1] = p.y, ht[tt + 2] = p.z, tt += 3;
        It.bindBuffer(It.ARRAY_BUFFER, t.__webglNormalBuffer), It.bufferData(It.ARRAY_BUFFER, ht, r)
       }
       if (Ct && Dt) {
        for (a = 0, s = Rt.length; s > a; a++)
         if (u = Rt[a], g = Dt[u], void 0 !== g)
          for (B = 0; 3 > B; B++) F = g[B], lt[$] = F.x, lt[$ + 1] = F.y, $ += 2;
        $ > 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglUVBuffer), It.bufferData(It.ARRAY_BUFFER, lt, r))
       }
       if (Ct && Vt) {
        for (a = 0, s = Rt.length; s > a; a++)
         if (u = Rt[a], v = Vt[u], void 0 !== v)
          for (B = 0; 3 > B; B++) U = v[B], ct[J] = U.x, ct[J + 1] = U.y, J += 2;
        J > 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglUV2Buffer), It.bufferData(It.ARRAY_BUFFER, ct, r))
       }
       if (St) {
        for (a = 0, s = Rt.length; s > a; a++) bt[et] = Z, bt[et + 1] = Z + 1, bt[et + 2] = Z + 2, et += 3, wt[rt] = Z, wt[rt + 1] = Z + 1, wt[rt + 2] = Z, wt[rt + 3] = Z + 2, wt[rt + 4] = Z + 1, wt[rt + 5] = Z + 2, rt += 6, Z += 3;
        It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, t.__webglFaceBuffer), It.bufferData(It.ELEMENT_ARRAY_BUFFER, bt, r), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, t.__webglLineBuffer), It.bufferData(It.ELEMENT_ARRAY_BUFFER, wt, r)
       }
       if (yt)
        for (B = 0, O = yt.length; O > B; B++)
         if (Y = yt[B], Y.__original.needsUpdate) {
          if (st = 0, 1 === Y.size) {
           if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], Y.array[st] = Y.value[l.a], Y.array[st + 1] = Y.value[l.b], Y.array[st + 2] = Y.value[l.c], st += 3;
           else if ("faces" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], Y.array[st] = X, Y.array[st + 1] = X, Y.array[st + 2] = X, st += 3
          } else if (2 === Y.size) {
           if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], y = Y.value[l.a], b = Y.value[l.b], w = Y.value[l.c], Y.array[st] = y.x, Y.array[st + 1] = y.y, Y.array[st + 2] = b.x, Y.array[st + 3] = b.y, Y.array[st + 4] = w.x, Y.array[st + 5] = w.y, st += 6;
           else if ("faces" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], y = X, b = X, w = X, Y.array[st] = y.x, Y.array[st + 1] = y.y, Y.array[st + 2] = b.x, Y.array[st + 3] = b.y, Y.array[st + 4] = w.x, Y.array[st + 5] = w.y, st += 6
          } else if (3 === Y.size) {
           var Ft;
           if (Ft = "c" === Y.type ? ["r", "g", "b"] : ["x", "y", "z"], void 0 === Y.boundTo || "vertices" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], y = Y.value[l.a], b = Y.value[l.b], w = Y.value[l.c], Y.array[st] = y[Ft[0]], Y.array[st + 1] = y[Ft[1]], Y.array[st + 2] = y[Ft[2]], Y.array[st + 3] = b[Ft[0]], Y.array[st + 4] = b[Ft[1]], Y.array[st + 5] = b[Ft[2]], Y.array[st + 6] = w[Ft[0]], Y.array[st + 7] = w[Ft[1]], Y.array[st + 8] = w[Ft[2]], st += 9;
           else if ("faces" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], y = X, b = X, w = X, Y.array[st] = y[Ft[0]], Y.array[st + 1] = y[Ft[1]], Y.array[st + 2] = y[Ft[2]], Y.array[st + 3] = b[Ft[0]], Y.array[st + 4] = b[Ft[1]], Y.array[st + 5] = b[Ft[2]], Y.array[st + 6] = w[Ft[0]], Y.array[st + 7] = w[Ft[1]], Y.array[st + 8] = w[Ft[2]], st += 9;
           else if ("faceVertices" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], y = X[0], b = X[1], w = X[2], Y.array[st] = y[Ft[0]], Y.array[st + 1] = y[Ft[1]], Y.array[st + 2] = y[Ft[2]], Y.array[st + 3] = b[Ft[0]], Y.array[st + 4] = b[Ft[1]], Y.array[st + 5] = b[Ft[2]], Y.array[st + 6] = w[Ft[0]], Y.array[st + 7] = w[Ft[1]], Y.array[st + 8] = w[Ft[2]], st += 9
          } else if (4 === Y.size)
           if (void 0 === Y.boundTo || "vertices" === Y.boundTo)
            for (a = 0, s = Rt.length; s > a; a++) l = kt[Rt[a]], y = Y.value[l.a], b = Y.value[l.b], w = Y.value[l.c], Y.array[st] = y.x, Y.array[st + 1] = y.y, Y.array[st + 2] = y.z, Y.array[st + 3] = y.w, Y.array[st + 4] = b.x, Y.array[st + 5] = b.y, Y.array[st + 6] = b.z, Y.array[st + 7] = b.w, Y.array[st + 8] = w.x, Y.array[st + 9] = w.y, Y.array[st + 10] = w.z, Y.array[st + 11] = w.w, st += 12;
           else if ("faces" === Y.boundTo)
           for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], y = X, b = X, w = X, Y.array[st] = y.x, Y.array[st + 1] = y.y, Y.array[st + 2] = y.z, Y.array[st + 3] = y.w, Y.array[st + 4] = b.x, Y.array[st + 5] = b.y, Y.array[st + 6] = b.z, Y.array[st + 7] = b.w, Y.array[st + 8] = w.x, Y.array[st + 9] = w.y, Y.array[st + 10] = w.z, Y.array[st + 11] = w.w, st += 12;
          else if ("faceVertices" === Y.boundTo)
           for (a = 0, s = Rt.length; s > a; a++) X = Y.value[Rt[a]], y = X[0], b = X[1], w = X[2], Y.array[st] = y.x, Y.array[st + 1] = y.y, Y.array[st + 2] = y.z, Y.array[st + 3] = y.w, Y.array[st + 4] = b.x, Y.array[st + 5] = b.y, Y.array[st + 6] = b.z, Y.array[st + 7] = b.w, Y.array[st + 8] = w.x, Y.array[st + 9] = w.y, Y.array[st + 10] = w.z, Y.array[st + 11] = w.w, st += 12;
          It.bindBuffer(It.ARRAY_BUFFER, Y.buffer), It.bufferData(It.ARRAY_BUFFER, Y.array, r)
         } i && (delete t.__inittedArrays, delete t.__colorArray, delete t.__normalArray, delete t.__tangentArray, delete t.__uvArray, delete t.__uv2Array, delete t.__faceArray, delete t.__vertexArray, delete t.__lineArray, delete t.__skinIndexArray, delete t.__skinWeightArray)
      }
     }

     function f(e, t, n, r) {
      for (var i = n.attributes, o = t.attributes, a = t.attributesKeys, s = 0, u = a.length; u > s; s++) {
       var l = a[s],
        c = o[l];
       if (c >= 0) {
        var h = i[l];
        if (void 0 !== h) {
         var p = h.itemSize;
         It.bindBuffer(It.ARRAY_BUFFER, h.buffer), tn.enableAttribute(c), It.vertexAttribPointer(c, p, It.FLOAT, !1, 0, r * p * 4)
        } else void 0 !== e.defaultAttributeValues && (2 === e.defaultAttributeValues[l].length ? It.vertexAttrib2fv(c, e.defaultAttributeValues[l]) : 3 === e.defaultAttributeValues[l].length && It.vertexAttrib3fv(c, e.defaultAttributeValues[l]))
       }
      }
      tn.disableUnusedAttributes()
     }

     function m(e, t, n) {
      var r = e.program.attributes;
      if (-1 !== n.morphTargetBase && r.position >= 0 ? (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[n.morphTargetBase]), tn.enableAttribute(r.position), It.vertexAttribPointer(r.position, 3, It.FLOAT, !1, 0, 0)) : r.position >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglVertexBuffer), tn.enableAttribute(r.position), It.vertexAttribPointer(r.position, 3, It.FLOAT, !1, 0, 0)), n.morphTargetForcedOrder.length)
       for (var i, o = 0, a = n.morphTargetForcedOrder, s = n.morphTargetInfluences; o < e.numSupportedMorphTargets && o < a.length;) i = r["morphTarget" + o], i >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[a[o]]), tn.enableAttribute(i), It.vertexAttribPointer(i, 3, It.FLOAT, !1, 0, 0)), i = r["morphNormal" + o], i >= 0 && e.morphNormals && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[a[o]]), tn.enableAttribute(i), It.vertexAttribPointer(i, 3, It.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[o] = s[a[o]], o++;
      else {
       var u = [],
        s = n.morphTargetInfluences,
        l = n.geometry.morphTargets;
       s.length > l.length && (console.warn("THREE.WebGLRenderer: Influences array is bigger than morphTargets array."), s.length = l.length);
       for (var c = 0, h = s.length; h > c; c++) {
        var p = s[c];
        u.push([p, c])
       }
       u.length > e.numSupportedMorphTargets ? (u.sort(y), u.length = e.numSupportedMorphTargets) : u.length > e.numSupportedMorphNormals ? u.sort(y) : 0 === u.length && u.push([0, 0]);
       for (var i, o = 0, d = e.numSupportedMorphTargets; d > o; o++)
        if (u[o]) {
         var f = u[o][1];
         i = r["morphTarget" + o], i >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphTargetsBuffers[f]), tn.enableAttribute(i), It.vertexAttribPointer(i, 3, It.FLOAT, !1, 0, 0)), i = r["morphNormal" + o], i >= 0 && e.morphNormals && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglMorphNormalsBuffers[f]), tn.enableAttribute(i), It.vertexAttribPointer(i, 3, It.FLOAT, !1, 0, 0)), n.__webglMorphTargetInfluences[o] = s[f]
        } else n.__webglMorphTargetInfluences[o] = 0
      }
      null !== e.program.uniforms.morphTargetInfluences && It.uniform1fv(e.program.uniforms.morphTargetInfluences, n.__webglMorphTargetInfluences)
     }

     function g(e, t) {
      return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
     }

     function v(e, t) {
      return e.object.renderOrder !== t.object.renderOrder ? e.object.renderOrder - t.object.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
     }

     function y(e, t) {
      return t[0] - e[0]
     }

     function b(t) {
      if (t.visible !== !1) {
       if (t instanceof e.Scene || t instanceof e.Group);
       else if (C(t), t instanceof e.Light) Ct.push(t);
       else if (t instanceof e.Sprite) Pt.push(t);
       else if (t instanceof e.LensFlare) Rt.push(t);
       else {
        var n = Et[t.id];
        if (n && (t.frustumCulled === !1 || Wt.intersectsObject(t) === !0))
         for (var r = 0, i = n.length; i > r; r++) {
          var o = n[r];
          S(o), o.render = !0, kt.sortObjects === !0 && (Yt.setFromMatrixPosition(t.matrixWorld), Yt.applyProjection(Xt), o.z = Yt.z)
         }
       }
       for (var r = 0, i = t.children.length; i > r; r++) b(t.children[r])
      }
     }

     function w(t, n, r, i, o) {
      for (var a, s = 0, u = t.length; u > s; s++) {
       var l = t[s],
        c = l.object,
        h = l.buffer;
       if (Z(c, n), o) a = o;
       else {
        if (a = l.material, !a) continue;
        L(a)
       }
       kt.setMaterialFaces(a), h instanceof e.BufferGeometry ? kt.renderBufferDirect(n, r, i, a, h, c) : kt.renderBuffer(n, r, i, a, h, c)
      }
     }

     function x(e, t, n, r, i, o) {
      for (var a, s = 0, u = e.length; u > s; s++) {
       var l = e[s],
        c = l.object;
       if (c.visible) {
        if (o) a = o;
        else {
         if (a = l[t], !a) continue;
         L(a)
        }
        kt.renderImmediateObject(n, r, i, a, c)
       }
      }
     }

     function _(e) {
      var t = e.object,
       n = t.material;
      n.transparent ? (e.transparent = n, e.opaque = null) : (e.opaque = n, e.transparent = null)
     }

     function S(t) {
      var n = t.object,
       r = t.buffer,
       i = n.geometry,
       o = n.material;
      if (o instanceof e.MeshFaceMaterial) {
       var a = i instanceof e.BufferGeometry ? 0 : r.materialIndex;
       o = o.materials[a], t.material = o, o.transparent ? At.push(t) : Mt.push(t)
      } else o && (t.material = o, o.transparent ? At.push(t) : Mt.push(t))
     }

     function C(t) {
      void 0 === t.__webglInit && (t.__webglInit = !0, t._modelViewMatrix = new e.Matrix4, t._normalMatrix = new e.Matrix3, t.addEventListener("removed", Sn));
      var i = t.geometry;
      if (void 0 === i || void 0 === i.__webglInit && (i.__webglInit = !0, i.addEventListener("dispose", Cn), i instanceof e.BufferGeometry ? kt.info.memory.geometries++ : t instanceof e.Mesh ? T(t, i) : t instanceof e.Line ? void 0 === i.__webglVertexBuffer && (r(i), s(i, t), i.verticesNeedUpdate = !0, i.colorsNeedUpdate = !0, i.lineDistancesNeedUpdate = !0) : t instanceof e.PointCloud && void 0 === i.__webglVertexBuffer && (n(i), a(i, t), i.verticesNeedUpdate = !0, i.colorsNeedUpdate = !0)), void 0 === t.__webglActive)
       if (t.__webglActive = !0, t instanceof e.Mesh) {
        if (i instanceof e.BufferGeometry) M(Et, i, t);
        else if (i instanceof e.Geometry)
         for (var o = Dn[i.id], u = 0, l = o.length; l > u; u++) M(Et, o[u], t)
       } else t instanceof e.Line || t instanceof e.PointCloud ? M(Et, i, t) : (t instanceof e.ImmediateRenderObject || t.immediateRenderCallback) && A(Tt, t)
     }

     function E(e, t) {
      for (var n, r, i = nn.get("OES_element_index_uint") ? 4294967296 : 65535, o = {}, a = e.morphTargets.length, s = e.morphNormals.length, u = {}, l = [], c = 0, h = e.faces.length; h > c; c++) {
       var p = e.faces[c],
        d = t ? p.materialIndex : 0;
       d in o || (o[d] = {
        hash: d,
        counter: 0
       }), n = o[d].hash + "_" + o[d].counter, n in u || (r = {
        id: Vn++,
        faces3: [],
        materialIndex: d,
        vertices: 0,
        numMorphTargets: a,
        numMorphNormals: s
       }, u[n] = r, l.push(r)), u[n].vertices + 3 > i && (o[d].counter += 1, n = o[d].hash + "_" + o[d].counter, n in u || (r = {
        id: Vn++,
        faces3: [],
        materialIndex: d,
        vertices: 0,
        numMorphTargets: a,
        numMorphNormals: s
       }, u[n] = r, l.push(r))), u[n].faces3.push(c), u[n].vertices += 3
      }
      return l
     }

     function T(t, n) {
      var r = t.material,
       o = !1;
      (void 0 === Dn[n.id] || n.groupsNeedUpdate === !0) && (delete Et[t.id], Dn[n.id] = E(n, r instanceof e.MeshFaceMaterial), n.groupsNeedUpdate = !1);
      for (var a = Dn[n.id], s = 0, l = a.length; l > s; s++) {
       var c = a[s];
       void 0 === c.__webglVertexBuffer ? (i(c), u(c, t), n.verticesNeedUpdate = !0, n.morphTargetsNeedUpdate = !0, n.elementsNeedUpdate = !0, n.uvsNeedUpdate = !0, n.normalsNeedUpdate = !0, n.tangentsNeedUpdate = !0, n.colorsNeedUpdate = !0, o = !0) : o = !1, (o || void 0 === t.__webglActive) && M(Et, c, t)
      }
      t.__webglActive = !0
     }

     function M(e, t, n) {
      var r = n.id;
      e[r] = e[r] || [], e[r].push({
       id: r,
       buffer: t,
       object: n,
       material: null,
       z: 0
      })
     }

     function A(e, t) {
      e.push({
       id: null,
       object: t,
       opaque: null,
       transparent: null,
       z: 0
      })
     }

     function P(t) {
      var n = t.geometry;
      if (n instanceof e.BufferGeometry)
       for (var r = n.attributes, i = n.attributesKeys, o = 0, a = i.length; a > o; o++) {
        var s = i[o],
         u = r[s],
         c = "index" === s ? It.ELEMENT_ARRAY_BUFFER : It.ARRAY_BUFFER;
        void 0 === u.buffer ? (u.buffer = It.createBuffer(), It.bindBuffer(c, u.buffer), It.bufferData(c, u.array, u instanceof e.DynamicBufferAttribute ? It.DYNAMIC_DRAW : It.STATIC_DRAW), u.needsUpdate = !1) : u.needsUpdate === !0 && (It.bindBuffer(c, u.buffer), void 0 === u.updateRange || -1 === u.updateRange.count ? It.bufferSubData(c, 0, u.array) : 0 === u.updateRange.count ? console.error("THREE.WebGLRenderer.updateObject: using updateRange for THREE.DynamicBufferAttribute and marked as needsUpdate but count is 0, ensure you are using set methods or updating manually.") : (It.bufferSubData(c, u.updateRange.offset * u.array.BYTES_PER_ELEMENT, u.array.subarray(u.updateRange.offset, u.updateRange.offset + u.updateRange.count)), u.updateRange.count = 0), u.needsUpdate = !1)
       } else if (t instanceof e.Mesh) {
        n.groupsNeedUpdate === !0 && T(t, n);
        for (var f = Dn[n.id], o = 0, m = f.length; m > o; o++) {
         var g = f[o],
          v = l(t, g),
          y = v.attributes && R(v);
         (n.verticesNeedUpdate || n.morphTargetsNeedUpdate || n.elementsNeedUpdate || n.uvsNeedUpdate || n.normalsNeedUpdate || n.colorsNeedUpdate || n.tangentsNeedUpdate || y) && d(g, t, It.DYNAMIC_DRAW, !n.dynamic, v)
        }
        n.verticesNeedUpdate = !1, n.morphTargetsNeedUpdate = !1, n.elementsNeedUpdate = !1, n.uvsNeedUpdate = !1, n.normalsNeedUpdate = !1, n.colorsNeedUpdate = !1, n.tangentsNeedUpdate = !1, v.attributes && I(v)
       } else if (t instanceof e.Line) {
       var v = l(t, n),
        y = v.attributes && R(v);
       (n.verticesNeedUpdate || n.colorsNeedUpdate || n.lineDistancesNeedUpdate || y) && p(n, It.DYNAMIC_DRAW), n.verticesNeedUpdate = !1, n.colorsNeedUpdate = !1, n.lineDistancesNeedUpdate = !1, v.attributes && I(v)
      } else if (t instanceof e.PointCloud) {
       var v = l(t, n),
        y = v.attributes && R(v);
       (n.verticesNeedUpdate || n.colorsNeedUpdate || y) && h(n, It.DYNAMIC_DRAW, t), n.verticesNeedUpdate = !1, n.colorsNeedUpdate = !1, v.attributes && I(v)
      }
     }

     function R(e) {
      for (var t in e.attributes)
       if (e.attributes[t].needsUpdate) return !0;
      return !1
     }

     function I(e) {
      for (var t in e.attributes) e.attributes[t].needsUpdate = !1
     }

     function k(t) {
      t instanceof e.Mesh || t instanceof e.PointCloud || t instanceof e.Line ? delete Et[t.id] : (t instanceof e.ImmediateRenderObject || t.immediateRenderCallback) && D(Tt, t), delete t.__webglInit, delete t._modelViewMatrix, delete t._normalMatrix, delete t.__webglActive
     }

     function D(e, t) {
      for (var n = e.length - 1; n >= 0; n--) e[n].object === t && e.splice(n, 1)
     }

     function V(t, n, r, i) {
      t.addEventListener("dispose", Mn);
      var o = Ln[t.type];
      if (o) {
       var a = e.ShaderLib[o];
       t.__webglShader = {
        uniforms: e.UniformsUtils.clone(a.uniforms),
        vertexShader: a.vertexShader,
        fragmentShader: a.fragmentShader
       }
      } else t.__webglShader = {
       uniforms: t.uniforms,
       vertexShader: t.vertexShader,
       fragmentShader: t.fragmentShader
      };
      var s = lt(n),
       u = ct(n),
       l = ut(i),
       c = {
        precision: ft,
        supportsVertexTextures: hn,
        map: !!t.map,
        envMap: !!t.envMap,
        envMapMode: t.envMap && t.envMap.mapping,
        lightMap: !!t.lightMap,
        bumpMap: !!t.bumpMap,
        normalMap: !!t.normalMap,
        specularMap: !!t.specularMap,
        alphaMap: !!t.alphaMap,
        combine: t.combine,
        vertexColors: t.vertexColors,
        fog: r,
        useFog: t.fog,
        fogExp: r instanceof e.FogExp2,
        flatShading: t.shading === e.FlatShading,
        sizeAttenuation: t.sizeAttenuation,
        logarithmicDepthBuffer: xt,
        skinning: t.skinning,
        maxBones: l,
        useVertexTexture: pn && i && i.skeleton && i.skeleton.useVertexTexture,
        morphTargets: t.morphTargets,
        morphNormals: t.morphNormals,
        maxMorphTargets: kt.maxMorphTargets,
        maxMorphNormals: kt.maxMorphNormals,
        maxDirLights: s.directional,
        maxPointLights: s.point,
        maxSpotLights: s.spot,
        maxHemiLights: s.hemi,
        maxShadows: u,
        shadowMapEnabled: kt.shadowMapEnabled && i.receiveShadow && u > 0,
        shadowMapType: kt.shadowMapType,
        shadowMapDebug: kt.shadowMapDebug,
        shadowMapCascade: kt.shadowMapCascade,
        alphaTest: t.alphaTest,
        metal: t.metal,
        wrapAround: t.wrapAround,
        doubleSided: t.side === e.DoubleSide,
        flipSided: t.side === e.BackSide
       },
       h = [];
      if (o ? h.push(o) : (h.push(t.fragmentShader), h.push(t.vertexShader)), void 0 !== t.defines)
       for (var p in t.defines) h.push(p), h.push(t.defines[p]);
      for (var p in c) h.push(p), h.push(c[p]);
      for (var d, f = h.join(), m = 0, g = Dt.length; g > m; m++) {
       var v = Dt[m];
       if (v.code === f) {
        d = v, d.usedTimes++;
        break
       }
      }
      void 0 === d && (d = new e.WebGLProgram(kt, f, t, c), Dt.push(d), kt.info.memory.programs = Dt.length), t.program = d;
      var y = d.attributes;
      if (t.morphTargets) {
       t.numSupportedMorphTargets = 0;
       for (var b, w = "morphTarget", x = 0; x < kt.maxMorphTargets; x++) b = w + x, y[b] >= 0 && t.numSupportedMorphTargets++
      }
      if (t.morphNormals) {
       t.numSupportedMorphNormals = 0;
       var b, w = "morphNormal";
       for (x = 0; x < kt.maxMorphNormals; x++) b = w + x, y[b] >= 0 && t.numSupportedMorphNormals++
      }
      t.uniformsList = [];
      for (var _ in t.__webglShader.uniforms) {
       var S = t.program.uniforms[_];
       S && t.uniformsList.push([t.__webglShader.uniforms[_], S])
      }
     }

     function L(t) {
      t.transparent === !0 ? tn.setBlending(t.blending, t.blendEquation, t.blendSrc, t.blendDst, t.blendEquationAlpha, t.blendSrcAlpha, t.blendDstAlpha) : tn.setBlending(e.NoBlending), tn.setDepthTest(t.depthTest), tn.setDepthWrite(t.depthWrite), tn.setColorWrite(t.colorWrite), tn.setPolygonOffset(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits)
     }

     function B(t, n, r, i, o) {
      Ft = 0, i.needsUpdate && (i.program && kn(i), V(i, n, r, o), i.needsUpdate = !1), i.morphTargets && (o.__webglMorphTargetInfluences || (o.__webglMorphTargetInfluences = new Float32Array(kt.maxMorphTargets)));
      var a = !1,
       s = !1,
       u = !1,
       l = i.program,
       c = l.uniforms,
       h = i.__webglShader.uniforms;
      if (l.id !== Vt && (It.useProgram(l.program), Vt = l.id, a = !0, s = !0, u = !0), i.id !== Bt && (-1 === Bt && (u = !0), Bt = i.id, s = !0), (a || t !== Nt) && (It.uniformMatrix4fv(c.projectionMatrix, !1, t.projectionMatrix.elements), xt && It.uniform1f(c.logDepthBufFC, 2 / (Math.log(t.far + 1) / Math.LN2)), t !== Nt && (Nt = t), (i instanceof e.ShaderMaterial || i instanceof e.MeshPhongMaterial || i.envMap) && null !== c.cameraPosition && (Yt.setFromMatrixPosition(t.matrixWorld), It.uniform3f(c.cameraPosition, Yt.x, Yt.y, Yt.z)), (i instanceof e.MeshPhongMaterial || i instanceof e.MeshLambertMaterial || i instanceof e.MeshBasicMaterial || i instanceof e.ShaderMaterial || i.skinning) && null !== c.viewMatrix && It.uniformMatrix4fv(c.viewMatrix, !1, t.matrixWorldInverse.elements)), i.skinning)
       if (o.bindMatrix && null !== c.bindMatrix && It.uniformMatrix4fv(c.bindMatrix, !1, o.bindMatrix.elements), o.bindMatrixInverse && null !== c.bindMatrixInverse && It.uniformMatrix4fv(c.bindMatrixInverse, !1, o.bindMatrixInverse.elements), pn && o.skeleton && o.skeleton.useVertexTexture) {
        if (null !== c.boneTexture) {
         var p = Y();
         It.uniform1i(c.boneTexture, p), kt.setTexture(o.skeleton.boneTexture, p)
        }
        null !== c.boneTextureWidth && It.uniform1i(c.boneTextureWidth, o.skeleton.boneTextureWidth), null !== c.boneTextureHeight && It.uniform1i(c.boneTextureHeight, o.skeleton.boneTextureHeight)
       } else o.skeleton && o.skeleton.boneMatrices && null !== c.boneGlobalMatrices && It.uniformMatrix4fv(c.boneGlobalMatrices, !1, o.skeleton.boneMatrices);
      return s && (r && i.fog && z(h, r), (i instanceof e.MeshPhongMaterial || i instanceof e.MeshLambertMaterial || i.lights) && (Zt && (u = !0, $(n), Zt = !1), u ? (j(h, Kt), q(h, !0)) : q(h, !1)), (i instanceof e.MeshBasicMaterial || i instanceof e.MeshLambertMaterial || i instanceof e.MeshPhongMaterial) && O(h, i), i instanceof e.LineBasicMaterial ? N(h, i) : i instanceof e.LineDashedMaterial ? (N(h, i), F(h, i)) : i instanceof e.PointCloudMaterial ? U(h, i) : i instanceof e.MeshPhongMaterial ? G(h, i) : i instanceof e.MeshLambertMaterial ? H(h, i) : i instanceof e.MeshDepthMaterial ? (h.mNear.value = t.near, h.mFar.value = t.far, h.opacity.value = i.opacity) : i instanceof e.MeshNormalMaterial && (h.opacity.value = i.opacity), o.receiveShadow && !i._shadowPass && W(h, n), Q(i.uniformsList)), X(c, o), null !== c.modelMatrix && It.uniformMatrix4fv(c.modelMatrix, !1, o.matrixWorld.elements), l
     }

     function O(t, n) {
      t.opacity.value = n.opacity, t.diffuse.value = n.color, t.map.value = n.map, t.lightMap.value = n.lightMap, t.specularMap.value = n.specularMap, t.alphaMap.value = n.alphaMap, n.bumpMap && (t.bumpMap.value = n.bumpMap, t.bumpScale.value = n.bumpScale), n.normalMap && (t.normalMap.value = n.normalMap, t.normalScale.value.copy(n.normalScale));
      var r;
      if (n.map ? r = n.map : n.specularMap ? r = n.specularMap : n.normalMap ? r = n.normalMap : n.bumpMap ? r = n.bumpMap : n.alphaMap && (r = n.alphaMap), void 0 !== r) {
       var i = r.offset,
        o = r.repeat;
       t.offsetRepeat.value.set(i.x, i.y, o.x, o.y)
      }
      t.envMap.value = n.envMap, t.flipEnvMap.value = n.envMap instanceof e.WebGLRenderTargetCube ? 1 : -1, t.reflectivity.value = n.reflectivity, t.refractionRatio.value = n.refractionRatio
     }

     function N(e, t) {
      e.diffuse.value = t.color, e.opacity.value = t.opacity
     }

     function F(e, t) {
      e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
     }

     function U(e, t) {
      if (e.psColor.value = t.color, e.opacity.value = t.opacity, e.size.value = t.size, e.scale.value = ht.height / 2, e.map.value = t.map, null !== t.map) {
       var n = t.map.offset,
        r = t.map.repeat;
       e.offsetRepeat.value.set(n.x, n.y, r.x, r.y)
      }
     }

     function z(t, n) {
      t.fogColor.value = n.color, n instanceof e.Fog ? (t.fogNear.value = n.near, t.fogFar.value = n.far) : n instanceof e.FogExp2 && (t.fogDensity.value = n.density)
     }

     function G(e, t) {
      e.shininess.value = t.shininess, e.emissive.value = t.emissive, e.specular.value = t.specular, t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
     }

     function H(e, t) {
      e.emissive.value = t.emissive, t.wrapAround && e.wrapRGB.value.copy(t.wrapRGB)
     }

     function j(e, t) {
      e.ambientLightColor.value = t.ambient, e.directionalLightColor.value = t.directional.colors, e.directionalLightDirection.value = t.directional.positions, e.pointLightColor.value = t.point.colors, e.pointLightPosition.value = t.point.positions, e.pointLightDistance.value = t.point.distances, e.pointLightDecay.value = t.point.decays, e.spotLightColor.value = t.spot.colors, e.spotLightPosition.value = t.spot.positions, e.spotLightDistance.value = t.spot.distances, e.spotLightDirection.value = t.spot.directions, e.spotLightAngleCos.value = t.spot.anglesCos, e.spotLightExponent.value = t.spot.exponents, e.spotLightDecay.value = t.spot.decays, e.hemisphereLightSkyColor.value = t.hemi.skyColors, e.hemisphereLightGroundColor.value = t.hemi.groundColors, e.hemisphereLightDirection.value = t.hemi.positions
     }

     function q(e, t) {
      e.ambientLightColor.needsUpdate = t, e.directionalLightColor.needsUpdate = t, e.directionalLightDirection.needsUpdate = t, e.pointLightColor.needsUpdate = t, e.pointLightPosition.needsUpdate = t, e.pointLightDistance.needsUpdate = t, e.pointLightDecay.needsUpdate = t, e.spotLightColor.needsUpdate = t, e.spotLightPosition.needsUpdate = t, e.spotLightDistance.needsUpdate = t, e.spotLightDirection.needsUpdate = t, e.spotLightAngleCos.needsUpdate = t, e.spotLightExponent.needsUpdate = t, e.spotLightDecay.needsUpdate = t, e.hemisphereLightSkyColor.needsUpdate = t, e.hemisphereLightGroundColor.needsUpdate = t, e.hemisphereLightDirection.needsUpdate = t
     }

     function W(t, n) {
      if (t.shadowMatrix)
       for (var r = 0, i = 0, o = n.length; o > i; i++) {
        var a = n[i];
        a.castShadow && (a instanceof e.SpotLight || a instanceof e.DirectionalLight && !a.shadowCascade) && (t.shadowMap.value[r] = a.shadowMap, t.shadowMapSize.value[r] = a.shadowMapSize, t.shadowMatrix.value[r] = a.shadowMatrix, t.shadowDarkness.value[r] = a.shadowDarkness, t.shadowBias.value[r] = a.shadowBias, r++)
       }
     }

     function X(e, t) {
      It.uniformMatrix4fv(e.modelViewMatrix, !1, t._modelViewMatrix.elements), e.normalMatrix && It.uniformMatrix3fv(e.normalMatrix, !1, t._normalMatrix.elements)
     }

     function Y() {
      var t = Ft;
      return t >= sn && e.warn("WebGLRenderer: trying to use " + t + " texture units while this GPU supports only " + sn), Ft += 1, t
     }

     function Q(t) {
      for (var n, r, i, o = 0, a = t.length; a > o; o++) {
       var s = t[o][0];
       if (s.needsUpdate !== !1) {
        var u = s.type,
         l = s.value,
         c = t[o][1];
        switch (u) {
         case "1i":
          It.uniform1i(c, l);
          break;
         case "1f":
          It.uniform1f(c, l);
          break;
         case "2f":
          It.uniform2f(c, l[0], l[1]);
          break;
         case "3f":
          It.uniform3f(c, l[0], l[1], l[2]);
          break;
         case "4f":
          It.uniform4f(c, l[0], l[1], l[2], l[3]);
          break;
         case "1iv":
          It.uniform1iv(c, l);
          break;
         case "3iv":
          It.uniform3iv(c, l);
          break;
         case "1fv":
          It.uniform1fv(c, l);
          break;
         case "2fv":
          It.uniform2fv(c, l);
          break;
         case "3fv":
          It.uniform3fv(c, l);
          break;
         case "4fv":
          It.uniform4fv(c, l);
          break;
         case "Matrix3fv":
          It.uniformMatrix3fv(c, !1, l);
          break;
         case "Matrix4fv":
          It.uniformMatrix4fv(c, !1, l);
          break;
         case "i":
          It.uniform1i(c, l);
          break;
         case "f":
          It.uniform1f(c, l);
          break;
         case "v2":
          It.uniform2f(c, l.x, l.y);
          break;
         case "v3":
          It.uniform3f(c, l.x, l.y, l.z);
          break;
         case "v4":
          It.uniform4f(c, l.x, l.y, l.z, l.w);
          break;
         case "c":
          It.uniform3f(c, l.r, l.g, l.b);
          break;
         case "iv1":
          It.uniform1iv(c, l);
          break;
         case "iv":
          It.uniform3iv(c, l);
          break;
         case "fv1":
          It.uniform1fv(c, l);
          break;
         case "fv":
          It.uniform3fv(c, l);
          break;
         case "v2v":
          void 0 === s._array && (s._array = new Float32Array(2 * l.length));
          for (var h = 0, p = l.length; p > h; h++) i = 2 * h, s._array[i] = l[h].x, s._array[i + 1] = l[h].y;
          It.uniform2fv(c, s._array);
          break;
         case "v3v":
          void 0 === s._array && (s._array = new Float32Array(3 * l.length));
          for (var h = 0, p = l.length; p > h; h++) i = 3 * h, s._array[i] = l[h].x, s._array[i + 1] = l[h].y, s._array[i + 2] = l[h].z;
          It.uniform3fv(c, s._array);
          break;
         case "v4v":
          void 0 === s._array && (s._array = new Float32Array(4 * l.length));
          for (var h = 0, p = l.length; p > h; h++) i = 4 * h, s._array[i] = l[h].x, s._array[i + 1] = l[h].y, s._array[i + 2] = l[h].z, s._array[i + 3] = l[h].w;
          It.uniform4fv(c, s._array);
          break;
         case "m3":
          It.uniformMatrix3fv(c, !1, l.elements);
          break;
         case "m3v":
          void 0 === s._array && (s._array = new Float32Array(9 * l.length));
          for (var h = 0, p = l.length; p > h; h++) l[h].flattenToArrayOffset(s._array, 9 * h);
          It.uniformMatrix3fv(c, !1, s._array);
          break;
         case "m4":
          It.uniformMatrix4fv(c, !1, l.elements);
          break;
         case "m4v":
          void 0 === s._array && (s._array = new Float32Array(16 * l.length));
          for (var h = 0, p = l.length; p > h; h++) l[h].flattenToArrayOffset(s._array, 16 * h);
          It.uniformMatrix4fv(c, !1, s._array);
          break;
         case "t":
          if (n = l, r = Y(), It.uniform1i(c, r), !n) continue;
          n instanceof e.CubeTexture || n.image instanceof Array && 6 === n.image.length ? tt(n, r) : n instanceof e.WebGLRenderTargetCube ? nt(n, r) : kt.setTexture(n, r);
          break;
         case "tv":
          void 0 === s._array && (s._array = []);
          for (var h = 0, p = s.value.length; p > h; h++) s._array[h] = Y();
          It.uniform1iv(c, s._array);
          for (var h = 0, p = s.value.length; p > h; h++) n = s.value[h], r = s._array[h], n && kt.setTexture(n, r);
          break;
         default:
          e.warn("THREE.WebGLRenderer: Unknown uniform type: " + u)
        }
       }
      }
     }

     function Z(e, t) {
      e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse, e.matrixWorld), e._normalMatrix.getNormalMatrix(e._modelViewMatrix)
     }

     function K(e, t, n, r) {
      e[t] = n.r * r, e[t + 1] = n.g * r, e[t + 2] = n.b * r
     }

     function $(t) {
      var n, r, i, o, a, s, u, l, c = 0,
       h = 0,
       p = 0,
       d = Kt,
       f = d.directional.colors,
       m = d.directional.positions,
       g = d.point.colors,
       v = d.point.positions,
       y = d.point.distances,
       b = d.point.decays,
       w = d.spot.colors,
       x = d.spot.positions,
       _ = d.spot.distances,
       S = d.spot.directions,
       C = d.spot.anglesCos,
       E = d.spot.exponents,
       T = d.spot.decays,
       M = d.hemi.skyColors,
       A = d.hemi.groundColors,
       P = d.hemi.positions,
       R = 0,
       I = 0,
       k = 0,
       D = 0,
       V = 0,
       L = 0,
       B = 0,
       O = 0,
       N = 0,
       F = 0,
       U = 0,
       z = 0;
      for (n = 0, r = t.length; r > n; n++)
       if (i = t[n], !i.onlyShadow)
        if (o = i.color, u = i.intensity, l = i.distance, i instanceof e.AmbientLight) {
         if (!i.visible) continue;
         c += o.r, h += o.g, p += o.b
        } else if (i instanceof e.DirectionalLight) {
       if (V += 1, !i.visible) continue;
       Qt.setFromMatrixPosition(i.matrixWorld), Yt.setFromMatrixPosition(i.target.matrixWorld), Qt.sub(Yt), Qt.normalize(), N = 3 * R, m[N] = Qt.x, m[N + 1] = Qt.y, m[N + 2] = Qt.z, K(f, N, o, u), R += 1
      } else if (i instanceof e.PointLight) {
       if (L += 1, !i.visible) continue;
       F = 3 * I, K(g, F, o, u), Yt.setFromMatrixPosition(i.matrixWorld), v[F] = Yt.x, v[F + 1] = Yt.y, v[F + 2] = Yt.z, y[I] = l, b[I] = 0 === i.distance ? 0 : i.decay, I += 1
      } else if (i instanceof e.SpotLight) {
       if (B += 1, !i.visible) continue;
       U = 3 * k, K(w, U, o, u), Qt.setFromMatrixPosition(i.matrixWorld), x[U] = Qt.x, x[U + 1] = Qt.y, x[U + 2] = Qt.z, _[k] = l, Yt.setFromMatrixPosition(i.target.matrixWorld), Qt.sub(Yt), Qt.normalize(), S[U] = Qt.x, S[U + 1] = Qt.y, S[U + 2] = Qt.z, C[k] = Math.cos(i.angle), E[k] = i.exponent, T[k] = 0 === i.distance ? 0 : i.decay, k += 1
      } else if (i instanceof e.HemisphereLight) {
       if (O += 1, !i.visible) continue;
       Qt.setFromMatrixPosition(i.matrixWorld), Qt.normalize(), z = 3 * D, P[z] = Qt.x, P[z + 1] = Qt.y, P[z + 2] = Qt.z, a = i.color, s = i.groundColor, K(M, z, a, u), K(A, z, s, u), D += 1
      }
      for (n = 3 * R, r = Math.max(f.length, 3 * V); r > n; n++) f[n] = 0;
      for (n = 3 * I, r = Math.max(g.length, 3 * L); r > n; n++) g[n] = 0;
      for (n = 3 * k, r = Math.max(w.length, 3 * B); r > n; n++) w[n] = 0;
      for (n = 3 * D, r = Math.max(M.length, 3 * O); r > n; n++) M[n] = 0;
      for (n = 3 * D, r = Math.max(A.length, 3 * O); r > n; n++) A[n] = 0;
      d.directional.length = R, d.point.length = I, d.spot.length = k, d.hemi.length = D, d.ambient[0] = c, d.ambient[1] = h, d.ambient[2] = p
     }

     function J(t, n, r) {
      var i;
      r ? (It.texParameteri(t, It.TEXTURE_WRAP_S, st(n.wrapS)), It.texParameteri(t, It.TEXTURE_WRAP_T, st(n.wrapT)), It.texParameteri(t, It.TEXTURE_MAG_FILTER, st(n.magFilter)), It.texParameteri(t, It.TEXTURE_MIN_FILTER, st(n.minFilter))) : (It.texParameteri(t, It.TEXTURE_WRAP_S, It.CLAMP_TO_EDGE), It.texParameteri(t, It.TEXTURE_WRAP_T, It.CLAMP_TO_EDGE), (n.wrapS !== e.ClampToEdgeWrapping || n.wrapT !== e.ClampToEdgeWrapping) && e.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( " + n.sourceFile + " )"), It.texParameteri(t, It.TEXTURE_MAG_FILTER, at(n.magFilter)), It.texParameteri(t, It.TEXTURE_MIN_FILTER, at(n.minFilter)), n.minFilter !== e.NearestFilter && n.minFilter !== e.LinearFilter && e.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( " + n.sourceFile + " )")), i = nn.get("EXT_texture_filter_anisotropic"), i && n.type !== e.FloatType && n.type !== e.HalfFloatType && (n.anisotropy > 1 || n.__currentAnisotropy) && (It.texParameterf(t, i.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(n.anisotropy, kt.getMaxAnisotropy())), n.__currentAnisotropy = n.anisotropy)
     }

     function et(t, n) {
      if (t.width > n || t.height > n) {
       var r = n / Math.max(t.width, t.height),
        i = document.createElement("canvas");
       i.width = Math.floor(t.width * r), i.height = Math.floor(t.height * r);
       var o = i.getContext("2d");
       return o.drawImage(t, 0, 0, t.width, t.height, 0, 0, i.width, i.height), e.warn("THREE.WebGLRenderer: image is too big (" + t.width + "x" + t.height + "). Resized to " + i.width + "x" + i.height, t), i
      }
      return t
     }

     function tt(t, n) {
      if (6 === t.image.length)
       if (t.needsUpdate) {
        t.image.__webglTextureCube || (t.addEventListener("dispose", En), t.image.__webglTextureCube = It.createTexture(), kt.info.memory.textures++), It.activeTexture(It.TEXTURE0 + n), It.bindTexture(It.TEXTURE_CUBE_MAP, t.image.__webglTextureCube), It.pixelStorei(It.UNPACK_FLIP_Y_WEBGL, t.flipY);
        for (var r = t instanceof e.CompressedTexture, i = t.image[0] instanceof e.DataTexture, o = [], a = 0; 6 > a; a++) o[a] = !kt.autoScaleCubemaps || r || i ? i ? t.image[a].image : t.image[a] : et(t.image[a], cn);
        var s = o[0],
         u = e.Math.isPowerOfTwo(s.width) && e.Math.isPowerOfTwo(s.height),
         l = st(t.format),
         c = st(t.type);
        J(It.TEXTURE_CUBE_MAP, t, u);
        for (var a = 0; 6 > a; a++)
         if (r)
          for (var h, p = o[a].mipmaps, d = 0, f = p.length; f > d; d++) h = p[d], t.format !== e.RGBAFormat && t.format !== e.RGBFormat ? vn().indexOf(l) > -1 ? It.compressedTexImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X + a, d, l, h.width, h.height, 0, h.data) : e.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()") : It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X + a, d, l, h.width, h.height, 0, l, c, h.data);
         else i ? It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, l, o[a].width, o[a].height, 0, l, c, o[a].data) : It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, l, l, c, o[a]);
        t.generateMipmaps && u && It.generateMipmap(It.TEXTURE_CUBE_MAP), t.needsUpdate = !1, t.onUpdate && t.onUpdate()
       } else It.activeTexture(It.TEXTURE0 + n), It.bindTexture(It.TEXTURE_CUBE_MAP, t.image.__webglTextureCube)
     }

     function nt(e, t) {
      It.activeTexture(It.TEXTURE0 + t), It.bindTexture(It.TEXTURE_CUBE_MAP, e.__webglTexture)
     }

     function rt(e, t, n) {
      It.bindFramebuffer(It.FRAMEBUFFER, e), It.framebufferTexture2D(It.FRAMEBUFFER, It.COLOR_ATTACHMENT0, n, t.__webglTexture, 0)
     }

     function it(e, t) {
      It.bindRenderbuffer(It.RENDERBUFFER, e), t.depthBuffer && !t.stencilBuffer ? (It.renderbufferStorage(It.RENDERBUFFER, It.DEPTH_COMPONENT16, t.width, t.height), It.framebufferRenderbuffer(It.FRAMEBUFFER, It.DEPTH_ATTACHMENT, It.RENDERBUFFER, e)) : t.depthBuffer && t.stencilBuffer ? (It.renderbufferStorage(It.RENDERBUFFER, It.DEPTH_STENCIL, t.width, t.height), It.framebufferRenderbuffer(It.FRAMEBUFFER, It.DEPTH_STENCIL_ATTACHMENT, It.RENDERBUFFER, e)) : It.renderbufferStorage(It.RENDERBUFFER, It.RGBA4, t.width, t.height)
     }

     function ot(t) {
      t instanceof e.WebGLRenderTargetCube ? (It.bindTexture(It.TEXTURE_CUBE_MAP, t.__webglTexture), It.generateMipmap(It.TEXTURE_CUBE_MAP), It.bindTexture(It.TEXTURE_CUBE_MAP, null)) : (It.bindTexture(It.TEXTURE_2D, t.__webglTexture), It.generateMipmap(It.TEXTURE_2D), It.bindTexture(It.TEXTURE_2D, null))
     }

     function at(t) {
      return t === e.NearestFilter || t === e.NearestMipMapNearestFilter || t === e.NearestMipMapLinearFilter ? It.NEAREST : It.LINEAR
     }

     function st(t) {
      var n;
      if (t === e.RepeatWrapping) return It.REPEAT;
      if (t === e.ClampToEdgeWrapping) return It.CLAMP_TO_EDGE;
      if (t === e.MirroredRepeatWrapping) return It.MIRRORED_REPEAT;
      if (t === e.NearestFilter) return It.NEAREST;
      if (t === e.NearestMipMapNearestFilter) return It.NEAREST_MIPMAP_NEAREST;
      if (t === e.NearestMipMapLinearFilter) return It.NEAREST_MIPMAP_LINEAR;
      if (t === e.LinearFilter) return It.LINEAR;
      if (t === e.LinearMipMapNearestFilter) return It.LINEAR_MIPMAP_NEAREST;
      if (t === e.LinearMipMapLinearFilter) return It.LINEAR_MIPMAP_LINEAR;
      if (t === e.UnsignedByteType) return It.UNSIGNED_BYTE;
      if (t === e.UnsignedShort4444Type) return It.UNSIGNED_SHORT_4_4_4_4;
      if (t === e.UnsignedShort5551Type) return It.UNSIGNED_SHORT_5_5_5_1;
      if (t === e.UnsignedShort565Type) return It.UNSIGNED_SHORT_5_6_5;
      if (t === e.ByteType) return It.BYTE;
      if (t === e.ShortType) return It.SHORT;
      if (t === e.UnsignedShortType) return It.UNSIGNED_SHORT;
      if (t === e.IntType) return It.INT;
      if (t === e.UnsignedIntType) return It.UNSIGNED_INT;
      if (t === e.FloatType) return It.FLOAT;
      if (n = nn.get("OES_texture_half_float"), null !== n && t === e.HalfFloatType) return n.HALF_FLOAT_OES;
      if (t === e.AlphaFormat) return It.ALPHA;
      if (t === e.RGBFormat) return It.RGB;
      if (t === e.RGBAFormat) return It.RGBA;
      if (t === e.LuminanceFormat) return It.LUMINANCE;
      if (t === e.LuminanceAlphaFormat) return It.LUMINANCE_ALPHA;
      if (t === e.AddEquation) return It.FUNC_ADD;
      if (t === e.SubtractEquation) return It.FUNC_SUBTRACT;
      if (t === e.ReverseSubtractEquation) return It.FUNC_REVERSE_SUBTRACT;
      if (t === e.ZeroFactor) return It.ZERO;
      if (t === e.OneFactor) return It.ONE;
      if (t === e.SrcColorFactor) return It.SRC_COLOR;
      if (t === e.OneMinusSrcColorFactor) return It.ONE_MINUS_SRC_COLOR;
      if (t === e.SrcAlphaFactor) return It.SRC_ALPHA;
      if (t === e.OneMinusSrcAlphaFactor) return It.ONE_MINUS_SRC_ALPHA;
      if (t === e.DstAlphaFactor) return It.DST_ALPHA;
      if (t === e.OneMinusDstAlphaFactor) return It.ONE_MINUS_DST_ALPHA;
      if (t === e.DstColorFactor) return It.DST_COLOR;
      if (t === e.OneMinusDstColorFactor) return It.ONE_MINUS_DST_COLOR;
      if (t === e.SrcAlphaSaturateFactor) return It.SRC_ALPHA_SATURATE;
      if (n = nn.get("WEBGL_compressed_texture_s3tc"), null !== n) {
       if (t === e.RGB_S3TC_DXT1_Format) return n.COMPRESSED_RGB_S3TC_DXT1_EXT;
       if (t === e.RGBA_S3TC_DXT1_Format) return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;
       if (t === e.RGBA_S3TC_DXT3_Format) return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;
       if (t === e.RGBA_S3TC_DXT5_Format) return n.COMPRESSED_RGBA_S3TC_DXT5_EXT
      }
      if (n = nn.get("WEBGL_compressed_texture_pvrtc"), null !== n) {
       if (t === e.RGB_PVRTC_4BPPV1_Format) return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
       if (t === e.RGB_PVRTC_2BPPV1_Format) return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
       if (t === e.RGBA_PVRTC_4BPPV1_Format) return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
       if (t === e.RGBA_PVRTC_2BPPV1_Format) return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
      }
      if (n = nn.get("EXT_blend_minmax"), null !== n) {
       if (t === e.MinEquation) return n.MIN_EXT;
       if (t === e.MaxEquation) return n.MAX_EXT
      }
      return 0
     }

     function ut(t) {
      if (pn && t && t.skeleton && t.skeleton.useVertexTexture) return 1024;
      var n = It.getParameter(It.MAX_VERTEX_UNIFORM_VECTORS),
       r = Math.floor((n - 20) / 4),
       i = r;
      return void 0 !== t && t instanceof e.SkinnedMesh && (i = Math.min(t.skeleton.bones.length, i), i < t.skeleton.bones.length && e.warn("WebGLRenderer: too many bones - " + t.skeleton.bones.length + ", this GPU supports just " + i + " (try OpenGL instead of ANGLE)")), i
     }

     function lt(t) {
      for (var n = 0, r = 0, i = 0, o = 0, a = 0, s = t.length; s > a; a++) {
       var u = t[a];
       u.onlyShadow || u.visible === !1 || (u instanceof e.DirectionalLight && n++, u instanceof e.PointLight && r++, u instanceof e.SpotLight && i++, u instanceof e.HemisphereLight && o++)
      }
      return {
       directional: n,
       point: r,
       spot: i,
       hemi: o
      }
     }

     function ct(t) {
      for (var n = 0, r = 0, i = t.length; i > r; r++) {
       var o = t[r];
       o.castShadow && (o instanceof e.SpotLight && n++, o instanceof e.DirectionalLight && !o.shadowCascade && n++)
      }
      return n
     }
     t = t || {};
     var ht = void 0 !== t.canvas ? t.canvas : document.createElement("canvas"),
      pt = void 0 !== t.context ? t.context : null,
      dt = 1,
      ft = void 0 !== t.precision ? t.precision : "highp",
      mt = void 0 !== t.alpha ? t.alpha : !1,
      gt = void 0 !== t.depth ? t.depth : !0,
      vt = void 0 !== t.stencil ? t.stencil : !0,
      yt = void 0 !== t.antialias ? t.antialias : !1,
      bt = void 0 !== t.premultipliedAlpha ? t.premultipliedAlpha : !0,
      wt = void 0 !== t.preserveDrawingBuffer ? t.preserveDrawingBuffer : !1,
      xt = void 0 !== t.logarithmicDepthBuffer ? t.logarithmicDepthBuffer : !1,
      _t = new e.Color(0),
      St = 0,
      Ct = [],
      Et = {},
      Tt = [],
      Mt = [],
      At = [],
      Pt = [],
      Rt = [];
     this.domElement = ht, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaFactor = 2, this.gammaInput = !1, this.gammaOutput = !1, this.shadowMapEnabled = !1, this.shadowMapType = e.PCFShadowMap, this.shadowMapCullFace = e.CullFaceFront, this.shadowMapDebug = !1, this.shadowMapCascade = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.info = {
      memory: {
       programs: 0,
       geometries: 0,
       textures: 0
      },
      render: {
       calls: 0,
       vertices: 0,
       faces: 0,
       points: 0
      }
     };
     var It, kt = this,
      Dt = [],
      Vt = null,
      Lt = null,
      Bt = -1,
      Ot = "",
      Nt = null,
      Ft = 0,
      Ut = 0,
      zt = 0,
      Gt = ht.width,
      Ht = ht.height,
      jt = 0,
      qt = 0,
      Wt = new e.Frustum,
      Xt = new e.Matrix4,
      Yt = new e.Vector3,
      Qt = new e.Vector3,
      Zt = !0,
      Kt = {
       ambient: [0, 0, 0],
       directional: {
        length: 0,
        colors: [],
        positions: []
       },
       point: {
        length: 0,
        colors: [],
        positions: [],
        distances: [],
        decays: []
       },
       spot: {
        length: 0,
        colors: [],
        positions: [],
        distances: [],
        directions: [],
        anglesCos: [],
        exponents: [],
        decays: []
       },
       hemi: {
        length: 0,
        skyColors: [],
        groundColors: [],
        positions: []
       }
      },
      $t = function(e) {
       e.preventDefault(), an(), on(), Et = {}
      };
     try {
      var Jt = {
       alpha: mt,
       depth: gt,
       stencil: vt,
       antialias: yt,
       premultipliedAlpha: bt,
       preserveDrawingBuffer: wt
      };
      if (It = pt || ht.getContext("webgl", Jt) || ht.getContext("experimental-webgl", Jt), null === It) throw null !== ht.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
      ht.addEventListener("webglcontextlost", $t, !1)
     } catch (en) {
      e.error("THREE.WebGLRenderer: " + en)
     }
     this.dispose = function() {
      ht.removeEventListener("webglcontextlost", $t, !1)
     };
     var tn = new e.WebGLState(It, st);
     void 0 === It.getShaderPrecisionFormat && (It.getShaderPrecisionFormat = function() {
      return {
       rangeMin: 1,
       rangeMax: 1,
       precision: 1
      }
     });
     var nn = new e.WebGLExtensions(It);
     nn.get("OES_texture_float"), nn.get("OES_texture_float_linear"), nn.get("OES_texture_half_float"), nn.get("OES_texture_half_float_linear"), nn.get("OES_standard_derivatives"), xt && nn.get("EXT_frag_depth");
     var rn = function(e, t, n, r) {
       bt === !0 && (e *= r, t *= r, n *= r), It.clearColor(e, t, n, r)
      },
      on = function() {
       It.clearColor(0, 0, 0, 1), It.clearDepth(1), It.clearStencil(0), It.enable(It.DEPTH_TEST), It.depthFunc(It.LEQUAL), It.frontFace(It.CCW), It.cullFace(It.BACK), It.enable(It.CULL_FACE), It.enable(It.BLEND), It.blendEquation(It.FUNC_ADD), It.blendFunc(It.SRC_ALPHA, It.ONE_MINUS_SRC_ALPHA), It.viewport(Ut, zt, Gt, Ht), rn(_t.r, _t.g, _t.b, St)
      },
      an = function() {
       Vt = null, Nt = null, Ot = "", Bt = -1, Zt = !0, tn.reset()
      };
     on(), this.context = It, this.state = tn;
     var sn = It.getParameter(It.MAX_TEXTURE_IMAGE_UNITS),
      un = It.getParameter(It.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
      ln = It.getParameter(It.MAX_TEXTURE_SIZE),
      cn = It.getParameter(It.MAX_CUBE_MAP_TEXTURE_SIZE),
      hn = un > 0,
      pn = hn && nn.get("OES_texture_float"),
      dn = It.getShaderPrecisionFormat(It.VERTEX_SHADER, It.HIGH_FLOAT),
      fn = It.getShaderPrecisionFormat(It.VERTEX_SHADER, It.MEDIUM_FLOAT),
      mn = It.getShaderPrecisionFormat(It.FRAGMENT_SHADER, It.HIGH_FLOAT),
      gn = It.getShaderPrecisionFormat(It.FRAGMENT_SHADER, It.MEDIUM_FLOAT),
      vn = function() {
       var e;
       return function() {
        if (void 0 !== e) return e;
        if (e = [], nn.get("WEBGL_compressed_texture_pvrtc") || nn.get("WEBGL_compressed_texture_s3tc"))
         for (var t = It.getParameter(It.COMPRESSED_TEXTURE_FORMATS), n = 0; n < t.length; n++) e.push(t[n]);
        return e
       }
      }(),
      yn = dn.precision > 0 && mn.precision > 0,
      bn = fn.precision > 0 && gn.precision > 0;
     "highp" !== ft || yn || (bn ? (ft = "mediump", e.warn("THREE.WebGLRenderer: highp not supported, using mediump.")) : (ft = "lowp", e.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))), "mediump" !== ft || bn || (ft = "lowp", e.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));
     var wn = new e.ShadowMapPlugin(this, Ct, Et, Tt),
      xn = new e.SpritePlugin(this, Pt),
      _n = new e.LensFlarePlugin(this, Rt);
     this.getContext = function() {
      return It
     }, this.forceContextLoss = function() {
      nn.get("WEBGL_lose_context").loseContext()
     }, this.supportsVertexTextures = function() {
      return hn
     }, this.supportsFloatTextures = function() {
      return nn.get("OES_texture_float")
     }, this.supportsHalfFloatTextures = function() {
      return nn.get("OES_texture_half_float")
     }, this.supportsStandardDerivatives = function() {
      return nn.get("OES_standard_derivatives")
     }, this.supportsCompressedTextureS3TC = function() {
      return nn.get("WEBGL_compressed_texture_s3tc")
     }, this.supportsCompressedTexturePVRTC = function() {
      return nn.get("WEBGL_compressed_texture_pvrtc")
     }, this.supportsBlendMinMax = function() {
      return nn.get("EXT_blend_minmax")
     }, this.getMaxAnisotropy = function() {
      var e;
      return function() {
       if (void 0 !== e) return e;
       var t = nn.get("EXT_texture_filter_anisotropic");
       return e = null !== t ? It.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
      }
     }(), this.getPrecision = function() {
      return ft
     }, this.getPixelRatio = function() {
      return dt
     }, this.setPixelRatio = function(e) {
      dt = e
     }, this.setSize = function(e, t, n) {
      ht.width = e * dt, ht.height = t * dt, n !== !1 && (ht.style.width = e + "px", ht.style.height = t + "px"), this.setViewport(0, 0, e, t)
     }, this.setViewport = function(e, t, n, r) {
      Ut = e * dt, zt = t * dt, Gt = n * dt, Ht = r * dt, It.viewport(Ut, zt, Gt, Ht)
     }, this.setScissor = function(e, t, n, r) {
      It.scissor(e * dt, t * dt, n * dt, r * dt)
     }, this.enableScissorTest = function(e) {
      e ? It.enable(It.SCISSOR_TEST) : It.disable(It.SCISSOR_TEST)
     }, this.getClearColor = function() {
      return _t
     }, this.setClearColor = function(e, t) {
      _t.set(e), St = void 0 !== t ? t : 1, rn(_t.r, _t.g, _t.b, St)
     }, this.getClearAlpha = function() {
      return St
     }, this.setClearAlpha = function(e) {
      St = e, rn(_t.r, _t.g, _t.b, St)
     }, this.clear = function(e, t, n) {
      var r = 0;
      (void 0 === e || e) && (r |= It.COLOR_BUFFER_BIT), (void 0 === t || t) && (r |= It.DEPTH_BUFFER_BIT), (void 0 === n || n) && (r |= It.STENCIL_BUFFER_BIT), It.clear(r)
     }, this.clearColor = function() {
      It.clear(It.COLOR_BUFFER_BIT)
     }, this.clearDepth = function() {
      It.clear(It.DEPTH_BUFFER_BIT)
     }, this.clearStencil = function() {
      It.clear(It.STENCIL_BUFFER_BIT)
     }, this.clearTarget = function(e, t, n, r) {
      this.setRenderTarget(e), this.clear(t, n, r)
     }, this.resetGLState = an;
     var Sn = function(e) {
       var t = e.target;
       t.traverse(function(e) {
        e.removeEventListener("remove", Sn), k(e)
       })
      },
      Cn = function(e) {
       var t = e.target;
       t.removeEventListener("dispose", Cn), Pn(t)
      },
      En = function(e) {
       var t = e.target;
       t.removeEventListener("dispose", En), Rn(t), kt.info.memory.textures--
      },
      Tn = function(e) {
       var t = e.target;
       t.removeEventListener("dispose", Tn), In(t), kt.info.memory.textures--
      },
      Mn = function(e) {
       var t = e.target;
       t.removeEventListener("dispose", Mn), kn(t)
      },
      An = function(e) {
       for (var t = ["__webglVertexBuffer", "__webglNormalBuffer", "__webglTangentBuffer", "__webglColorBuffer", "__webglUVBuffer", "__webglUV2Buffer", "__webglSkinIndicesBuffer", "__webglSkinWeightsBuffer", "__webglFaceBuffer", "__webglLineBuffer", "__webglLineDistanceBuffer"], n = 0, r = t.length; r > n; n++) {
        var i = t[n];
        void 0 !== e[i] && (It.deleteBuffer(e[i]), delete e[i])
       }
       if (void 0 !== e.__webglCustomAttributesList) {
        for (var i in e.__webglCustomAttributesList) It.deleteBuffer(e.__webglCustomAttributesList[i].buffer);
        delete e.__webglCustomAttributesList
       }
       kt.info.memory.geometries--
      },
      Pn = function(t) {
       if (delete t.__webglInit, t instanceof e.BufferGeometry) {
        for (var n in t.attributes) {
         var r = t.attributes[n];
         void 0 !== r.buffer && (It.deleteBuffer(r.buffer), delete r.buffer)
        }
        kt.info.memory.geometries--
       } else {
        var i = Dn[t.id];
        if (void 0 !== i) {
         for (var o = 0, a = i.length; a > o; o++) {
          var s = i[o];
          if (void 0 !== s.numMorphTargets) {
           for (var u = 0, l = s.numMorphTargets; l > u; u++) It.deleteBuffer(s.__webglMorphTargetsBuffers[u]);
           delete s.__webglMorphTargetsBuffers
          }
          if (void 0 !== s.numMorphNormals) {
           for (var u = 0, l = s.numMorphNormals; l > u; u++) It.deleteBuffer(s.__webglMorphNormalsBuffers[u]);
           delete s.__webglMorphNormalsBuffers
          }
          An(s)
         }
         delete Dn[t.id]
        } else An(t)
       }
       Ot = ""
      },
      Rn = function(e) {
       if (e.image && e.image.__webglTextureCube) It.deleteTexture(e.image.__webglTextureCube), delete e.image.__webglTextureCube;
       else {
        if (void 0 === e.__webglInit) return;
        It.deleteTexture(e.__webglTexture), delete e.__webglTexture, delete e.__webglInit
       }
      },
      In = function(t) {
       if (t && void 0 !== t.__webglTexture) {
        if (It.deleteTexture(t.__webglTexture), delete t.__webglTexture, t instanceof e.WebGLRenderTargetCube)
         for (var n = 0; 6 > n; n++) It.deleteFramebuffer(t.__webglFramebuffer[n]), It.deleteRenderbuffer(t.__webglRenderbuffer[n]);
        else It.deleteFramebuffer(t.__webglFramebuffer), It.deleteRenderbuffer(t.__webglRenderbuffer);
        delete t.__webglFramebuffer, delete t.__webglRenderbuffer
       }
      },
      kn = function(e) {
       var t = e.program.program;
       if (void 0 !== t) {
        e.program = void 0;
        var n, r, i, o = !1;
        for (n = 0, r = Dt.length; r > n; n++)
         if (i = Dt[n], i.program === t) {
          i.usedTimes--, 0 === i.usedTimes && (o = !0);
          break
         } if (o === !0) {
         var a = [];
         for (n = 0, r = Dt.length; r > n; n++) i = Dt[n], i.program !== t && a.push(i);
         Dt = a, It.deleteProgram(t), kt.info.memory.programs--
        }
       }
      };
     this.renderBufferImmediate = function(t, n, r) {
      if (tn.initAttributes(), t.hasPositions && !t.__webglVertexBuffer && (t.__webglVertexBuffer = It.createBuffer()), t.hasNormals && !t.__webglNormalBuffer && (t.__webglNormalBuffer = It.createBuffer()), t.hasUvs && !t.__webglUvBuffer && (t.__webglUvBuffer = It.createBuffer()), t.hasColors && !t.__webglColorBuffer && (t.__webglColorBuffer = It.createBuffer()), t.hasPositions && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglVertexBuffer), It.bufferData(It.ARRAY_BUFFER, t.positionArray, It.DYNAMIC_DRAW), tn.enableAttribute(n.attributes.position), It.vertexAttribPointer(n.attributes.position, 3, It.FLOAT, !1, 0, 0)), t.hasNormals) {
       if (It.bindBuffer(It.ARRAY_BUFFER, t.__webglNormalBuffer), r instanceof e.MeshPhongMaterial == !1 && r.shading === e.FlatShading) {
        var i, o, a, s, u, l, c, h, p, d, f, m, g, v, y = 3 * t.count;
        for (v = 0; y > v; v += 9) g = t.normalArray, s = g[v], c = g[v + 1], d = g[v + 2], u = g[v + 3], h = g[v + 4], f = g[v + 5], l = g[v + 6], p = g[v + 7], m = g[v + 8], i = (s + u + l) / 3, o = (c + h + p) / 3, a = (d + f + m) / 3, g[v] = i, g[v + 1] = o, g[v + 2] = a, g[v + 3] = i, g[v + 4] = o, g[v + 5] = a, g[v + 6] = i, g[v + 7] = o, g[v + 8] = a
       }
       It.bufferData(It.ARRAY_BUFFER, t.normalArray, It.DYNAMIC_DRAW), tn.enableAttribute(n.attributes.normal), It.vertexAttribPointer(n.attributes.normal, 3, It.FLOAT, !1, 0, 0)
      }
      t.hasUvs && r.map && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglUvBuffer), It.bufferData(It.ARRAY_BUFFER, t.uvArray, It.DYNAMIC_DRAW), tn.enableAttribute(n.attributes.uv), It.vertexAttribPointer(n.attributes.uv, 2, It.FLOAT, !1, 0, 0)), t.hasColors && r.vertexColors !== e.NoColors && (It.bindBuffer(It.ARRAY_BUFFER, t.__webglColorBuffer), It.bufferData(It.ARRAY_BUFFER, t.colorArray, It.DYNAMIC_DRAW), tn.enableAttribute(n.attributes.color), It.vertexAttribPointer(n.attributes.color, 3, It.FLOAT, !1, 0, 0)), tn.disableUnusedAttributes(), It.drawArrays(It.TRIANGLES, 0, t.count), t.count = 0
     }, this.renderBufferDirect = function(t, n, r, i, o, a) {
      if (i.visible !== !1) {
       P(a);
       var s = B(t, n, r, i, a),
        u = !1,
        l = i.wireframe ? 1 : 0,
        c = "direct_" + o.id + "_" + s.id + "_" + l;
       if (c !== Ot && (Ot = c, u = !0), u && tn.initAttributes(), a instanceof e.Mesh) {
        var h = i.wireframe === !0 ? It.LINES : It.TRIANGLES,
         p = o.attributes.index;
        if (p) {
         var d, m;
         p.array instanceof Uint32Array && nn.get("OES_element_index_uint") ? (d = It.UNSIGNED_INT, m = 4) : (d = It.UNSIGNED_SHORT, m = 2);
         var g = o.offsets;
         if (0 === g.length) u && (f(i, s, o, 0), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, p.array.length, d, 0), kt.info.render.calls++, kt.info.render.vertices += p.array.length, kt.info.render.faces += p.array.length / 3;
         else {
          u = !0;
          for (var v = 0, y = g.length; y > v; v++) {
           var b = g[v].index;
           u && (f(i, s, o, b), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, g[v].count, d, g[v].start * m), kt.info.render.calls++, kt.info.render.vertices += g[v].count, kt.info.render.faces += g[v].count / 3
          }
         }
        } else {
         u && f(i, s, o, 0);
         var w = o.attributes.position;
         It.drawArrays(h, 0, w.array.length / w.itemSize), kt.info.render.calls++, kt.info.render.vertices += w.array.length / w.itemSize, kt.info.render.faces += w.array.length / (3 * w.itemSize)
        }
       } else if (a instanceof e.PointCloud) {
        var h = It.POINTS,
         p = o.attributes.index;
        if (p) {
         var d, m;
         p.array instanceof Uint32Array && nn.get("OES_element_index_uint") ? (d = It.UNSIGNED_INT, m = 4) : (d = It.UNSIGNED_SHORT, m = 2);
         var g = o.offsets;
         if (0 === g.length) u && (f(i, s, o, 0), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, p.array.length, d, 0), kt.info.render.calls++, kt.info.render.points += p.array.length;
         else {
          g.length > 1 && (u = !0);
          for (var v = 0, y = g.length; y > v; v++) {
           var b = g[v].index;
           u && (f(i, s, o, b), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, g[v].count, d, g[v].start * m), kt.info.render.calls++, kt.info.render.points += g[v].count
          }
         }
        } else {
         u && f(i, s, o, 0);
         var w = o.attributes.position,
          g = o.offsets;
         if (0 === g.length) It.drawArrays(h, 0, w.array.length / 3), kt.info.render.calls++, kt.info.render.points += w.array.length / 3;
         else
          for (var v = 0, y = g.length; y > v; v++) It.drawArrays(h, g[v].index, g[v].count), kt.info.render.calls++, kt.info.render.points += g[v].count
        }
       } else if (a instanceof e.Line) {
        var h = a.mode === e.LineStrip ? It.LINE_STRIP : It.LINES;
        tn.setLineWidth(i.linewidth * dt);
        var p = o.attributes.index;
        if (p) {
         var d, m;
         p.array instanceof Uint32Array ? (d = It.UNSIGNED_INT, m = 4) : (d = It.UNSIGNED_SHORT, m = 2);
         var g = o.offsets;
         if (0 === g.length) u && (f(i, s, o, 0), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, p.array.length, d, 0), kt.info.render.calls++, kt.info.render.vertices += p.array.length;
         else {
          g.length > 1 && (u = !0);
          for (var v = 0, y = g.length; y > v; v++) {
           var b = g[v].index;
           u && (f(i, s, o, b), It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, p.buffer)), It.drawElements(h, g[v].count, d, g[v].start * m), kt.info.render.calls++, kt.info.render.vertices += g[v].count
          }
         }
        } else {
         u && f(i, s, o, 0);
         var w = o.attributes.position,
          g = o.offsets;
         if (0 === g.length) It.drawArrays(h, 0, w.array.length / 3), kt.info.render.calls++, kt.info.render.vertices += w.array.length / 3;
         else
          for (var v = 0, y = g.length; y > v; v++) It.drawArrays(h, g[v].index, g[v].count), kt.info.render.calls++, kt.info.render.vertices += g[v].count
        }
       }
      }
     }, this.renderBuffer = function(t, n, r, i, o, a) {
      if (i.visible !== !1) {
       P(a);
       var s = B(t, n, r, i, a),
        u = s.attributes,
        l = !1,
        c = i.wireframe ? 1 : 0,
        h = o.id + "_" + s.id + "_" + c;
       if (h !== Ot && (Ot = h, l = !0), l && tn.initAttributes(), !i.morphTargets && u.position >= 0 ? l && (It.bindBuffer(It.ARRAY_BUFFER, o.__webglVertexBuffer), tn.enableAttribute(u.position), It.vertexAttribPointer(u.position, 3, It.FLOAT, !1, 0, 0)) : a.morphTargetBase && m(i, o, a), l) {
        if (o.__webglCustomAttributesList)
         for (var p = 0, d = o.__webglCustomAttributesList.length; d > p; p++) {
          var f = o.__webglCustomAttributesList[p];
          u[f.buffer.belongsToAttribute] >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, f.buffer), tn.enableAttribute(u[f.buffer.belongsToAttribute]), It.vertexAttribPointer(u[f.buffer.belongsToAttribute], f.size, It.FLOAT, !1, 0, 0))
         }
        u.color >= 0 && (a.geometry.colors.length > 0 || a.geometry.faces.length > 0 ? (It.bindBuffer(It.ARRAY_BUFFER, o.__webglColorBuffer), tn.enableAttribute(u.color), It.vertexAttribPointer(u.color, 3, It.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && It.vertexAttrib3fv(u.color, i.defaultAttributeValues.color)), u.normal >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, o.__webglNormalBuffer), tn.enableAttribute(u.normal), It.vertexAttribPointer(u.normal, 3, It.FLOAT, !1, 0, 0)), u.tangent >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, o.__webglTangentBuffer), tn.enableAttribute(u.tangent), It.vertexAttribPointer(u.tangent, 4, It.FLOAT, !1, 0, 0)), u.uv >= 0 && (a.geometry.faceVertexUvs[0] ? (It.bindBuffer(It.ARRAY_BUFFER, o.__webglUVBuffer), tn.enableAttribute(u.uv), It.vertexAttribPointer(u.uv, 2, It.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && It.vertexAttrib2fv(u.uv, i.defaultAttributeValues.uv)), u.uv2 >= 0 && (a.geometry.faceVertexUvs[1] ? (It.bindBuffer(It.ARRAY_BUFFER, o.__webglUV2Buffer), tn.enableAttribute(u.uv2), It.vertexAttribPointer(u.uv2, 2, It.FLOAT, !1, 0, 0)) : void 0 !== i.defaultAttributeValues && It.vertexAttrib2fv(u.uv2, i.defaultAttributeValues.uv2)), i.skinning && u.skinIndex >= 0 && u.skinWeight >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, o.__webglSkinIndicesBuffer), tn.enableAttribute(u.skinIndex), It.vertexAttribPointer(u.skinIndex, 4, It.FLOAT, !1, 0, 0), It.bindBuffer(It.ARRAY_BUFFER, o.__webglSkinWeightsBuffer), tn.enableAttribute(u.skinWeight), It.vertexAttribPointer(u.skinWeight, 4, It.FLOAT, !1, 0, 0)), u.lineDistance >= 0 && (It.bindBuffer(It.ARRAY_BUFFER, o.__webglLineDistanceBuffer), tn.enableAttribute(u.lineDistance), It.vertexAttribPointer(u.lineDistance, 1, It.FLOAT, !1, 0, 0))
       }
       if (tn.disableUnusedAttributes(), a instanceof e.Mesh) {
        var g = o.__typeArray === Uint32Array ? It.UNSIGNED_INT : It.UNSIGNED_SHORT;
        i.wireframe ? (tn.setLineWidth(i.wireframeLinewidth * dt), l && It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, o.__webglLineBuffer), It.drawElements(It.LINES, o.__webglLineCount, g, 0)) : (l && It.bindBuffer(It.ELEMENT_ARRAY_BUFFER, o.__webglFaceBuffer), It.drawElements(It.TRIANGLES, o.__webglFaceCount, g, 0)), kt.info.render.calls++, kt.info.render.vertices += o.__webglFaceCount, kt.info.render.faces += o.__webglFaceCount / 3
       } else if (a instanceof e.Line) {
        var v = a.mode === e.LineStrip ? It.LINE_STRIP : It.LINES;
        tn.setLineWidth(i.linewidth * dt), It.drawArrays(v, 0, o.__webglLineCount), kt.info.render.calls++
       } else a instanceof e.PointCloud && (It.drawArrays(It.POINTS, 0, o.__webglParticleCount), kt.info.render.calls++, kt.info.render.points += o.__webglParticleCount)
      }
     }, this.render = function(t, n, r, i) {
      if (n instanceof e.Camera == !1) return e.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."), void 0;
      var o = t.fog;
      Ot = "", Bt = -1, Nt = null, Zt = !0, t.autoUpdate === !0 && t.updateMatrixWorld(), void 0 === n.parent && n.updateMatrixWorld(), t.traverse(function(t) {
       t instanceof e.SkinnedMesh && t.skeleton.update()
      }), n.matrixWorldInverse.getInverse(n.matrixWorld), Xt.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse), Wt.setFromMatrix(Xt), Ct.length = 0, Mt.length = 0, At.length = 0, Pt.length = 0, Rt.length = 0, b(t), kt.sortObjects === !0 && (Mt.sort(g), At.sort(v)), wn.render(t, n), kt.info.render.calls = 0, kt.info.render.vertices = 0, kt.info.render.faces = 0, kt.info.render.points = 0, this.setRenderTarget(r), (this.autoClear || i) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);
      for (var a = 0, s = Tt.length; s > a; a++) {
       var u = Tt[a],
        l = u.object;
       l.visible && (Z(l, n), _(u))
      }
      if (t.overrideMaterial) {
       var c = t.overrideMaterial;
       L(c), w(Mt, n, Ct, o, c), w(At, n, Ct, o, c), x(Tt, "", n, Ct, o, c)
      } else tn.setBlending(e.NoBlending), w(Mt, n, Ct, o, null), x(Tt, "opaque", n, Ct, o, null), w(At, n, Ct, o, null), x(Tt, "transparent", n, Ct, o, null);
      xn.render(t, n), _n.render(t, n, jt, qt), r && r.generateMipmaps && r.minFilter !== e.NearestFilter && r.minFilter !== e.LinearFilter && ot(r), tn.setDepthTest(!0), tn.setDepthWrite(!0), tn.setColorWrite(!0)
     }, this.renderImmediateObject = function(e, t, n, r, i) {
      var o = B(e, t, n, r, i);
      Ot = "", kt.setMaterialFaces(r), i.immediateRenderCallback ? i.immediateRenderCallback(o, It, Wt) : i.render(function(e) {
       kt.renderBufferImmediate(e, o, r)
      })
     };
     var Dn = {},
      Vn = 0,
      Ln = {
       MeshDepthMaterial: "depth",
       MeshNormalMaterial: "normal",
       MeshBasicMaterial: "basic",
       MeshLambertMaterial: "lambert",
       MeshPhongMaterial: "phong",
       LineBasicMaterial: "basic",
       LineDashedMaterial: "dashed",
       PointCloudMaterial: "particle_basic"
      };
     this.setFaceCulling = function(t, n) {
      t === e.CullFaceNone ? It.disable(It.CULL_FACE) : (n === e.FrontFaceDirectionCW ? It.frontFace(It.CW) : It.frontFace(It.CCW), t === e.CullFaceBack ? It.cullFace(It.BACK) : t === e.CullFaceFront ? It.cullFace(It.FRONT) : It.cullFace(It.FRONT_AND_BACK), It.enable(It.CULL_FACE))
     }, this.setMaterialFaces = function(t) {
      tn.setDoubleSided(t.side === e.DoubleSide), tn.setFlipSided(t.side === e.BackSide)
     }, this.uploadTexture = function(t) {
      void 0 === t.__webglInit && (t.__webglInit = !0, t.addEventListener("dispose", En), t.__webglTexture = It.createTexture(), kt.info.memory.textures++), It.bindTexture(It.TEXTURE_2D, t.__webglTexture), It.pixelStorei(It.UNPACK_FLIP_Y_WEBGL, t.flipY), It.pixelStorei(It.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultiplyAlpha), It.pixelStorei(It.UNPACK_ALIGNMENT, t.unpackAlignment), t.image = et(t.image, ln);
      var n = t.image,
       r = e.Math.isPowerOfTwo(n.width) && e.Math.isPowerOfTwo(n.height),
       i = st(t.format),
       o = st(t.type);
      J(It.TEXTURE_2D, t, r);
      var a, s = t.mipmaps;
      if (t instanceof e.DataTexture)
       if (s.length > 0 && r) {
        for (var u = 0, l = s.length; l > u; u++) a = s[u], It.texImage2D(It.TEXTURE_2D, u, i, a.width, a.height, 0, i, o, a.data);
        t.generateMipmaps = !1
       } else It.texImage2D(It.TEXTURE_2D, 0, i, n.width, n.height, 0, i, o, n.data);
      else if (t instanceof e.CompressedTexture)
       for (var u = 0, l = s.length; l > u; u++) a = s[u], t.format !== e.RGBAFormat && t.format !== e.RGBFormat ? vn().indexOf(i) > -1 ? It.compressedTexImage2D(It.TEXTURE_2D, u, i, a.width, a.height, 0, a.data) : e.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : It.texImage2D(It.TEXTURE_2D, u, i, a.width, a.height, 0, i, o, a.data);
      else if (s.length > 0 && r) {
       for (var u = 0, l = s.length; l > u; u++) a = s[u], It.texImage2D(It.TEXTURE_2D, u, i, i, o, a);
       t.generateMipmaps = !1
      } else It.texImage2D(It.TEXTURE_2D, 0, i, i, o, t.image);
      t.generateMipmaps && r && It.generateMipmap(It.TEXTURE_2D), t.needsUpdate = !1, t.onUpdate && t.onUpdate()
     }, this.setTexture = function(e, t) {
      It.activeTexture(It.TEXTURE0 + t), e.needsUpdate ? kt.uploadTexture(e) : It.bindTexture(It.TEXTURE_2D, e.__webglTexture)
     }, this.setRenderTarget = function(t) {
      var n = t instanceof e.WebGLRenderTargetCube;
      if (t && void 0 === t.__webglFramebuffer) {
       void 0 === t.depthBuffer && (t.depthBuffer = !0), void 0 === t.stencilBuffer && (t.stencilBuffer = !0), t.addEventListener("dispose", Tn), t.__webglTexture = It.createTexture(), kt.info.memory.textures++;
       var r = e.Math.isPowerOfTwo(t.width) && e.Math.isPowerOfTwo(t.height),
        i = st(t.format),
        o = st(t.type);
       if (n) {
        t.__webglFramebuffer = [], t.__webglRenderbuffer = [], It.bindTexture(It.TEXTURE_CUBE_MAP, t.__webglTexture), J(It.TEXTURE_CUBE_MAP, t, r);
        for (var a = 0; 6 > a; a++) t.__webglFramebuffer[a] = It.createFramebuffer(), t.__webglRenderbuffer[a] = It.createRenderbuffer(), It.texImage2D(It.TEXTURE_CUBE_MAP_POSITIVE_X + a, 0, i, t.width, t.height, 0, i, o, null), rt(t.__webglFramebuffer[a], t, It.TEXTURE_CUBE_MAP_POSITIVE_X + a), it(t.__webglRenderbuffer[a], t);
        r && It.generateMipmap(It.TEXTURE_CUBE_MAP)
       } else t.__webglFramebuffer = It.createFramebuffer(), t.__webglRenderbuffer = t.shareDepthFrom ? t.shareDepthFrom.__webglRenderbuffer : It.createRenderbuffer(), It.bindTexture(It.TEXTURE_2D, t.__webglTexture), J(It.TEXTURE_2D, t, r), It.texImage2D(It.TEXTURE_2D, 0, i, t.width, t.height, 0, i, o, null), rt(t.__webglFramebuffer, t, It.TEXTURE_2D), t.shareDepthFrom ? t.depthBuffer && !t.stencilBuffer ? It.framebufferRenderbuffer(It.FRAMEBUFFER, It.DEPTH_ATTACHMENT, It.RENDERBUFFER, t.__webglRenderbuffer) : t.depthBuffer && t.stencilBuffer && It.framebufferRenderbuffer(It.FRAMEBUFFER, It.DEPTH_STENCIL_ATTACHMENT, It.RENDERBUFFER, t.__webglRenderbuffer) : it(t.__webglRenderbuffer, t), r && It.generateMipmap(It.TEXTURE_2D);
       n ? It.bindTexture(It.TEXTURE_CUBE_MAP, null) : It.bindTexture(It.TEXTURE_2D, null), It.bindRenderbuffer(It.RENDERBUFFER, null), It.bindFramebuffer(It.FRAMEBUFFER, null)
      }
      var s, u, l, c, h;
      t ? (s = n ? t.__webglFramebuffer[t.activeCubeFace] : t.__webglFramebuffer, u = t.width, l = t.height, c = 0, h = 0) : (s = null, u = Gt, l = Ht, c = Ut, h = zt), s !== Lt && (It.bindFramebuffer(It.FRAMEBUFFER, s), It.viewport(c, h, u, l), Lt = s), jt = u, qt = l
     }, this.readRenderTargetPixels = function(t, n, r, i, o, a) {
      if (!(t instanceof e.WebGLRenderTarget)) return console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."), void 0;
      if (t.__webglFramebuffer) {
       if (t.format !== e.RGBAFormat) return console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format."), void 0;
       var s = !1;
       t.__webglFramebuffer !== Lt && (It.bindFramebuffer(It.FRAMEBUFFER, t.__webglFramebuffer), s = !0), It.checkFramebufferStatus(It.FRAMEBUFFER) === It.FRAMEBUFFER_COMPLETE ? It.readPixels(n, r, i, o, It.RGBA, It.UNSIGNED_BYTE, a) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."), s && It.bindFramebuffer(It.FRAMEBUFFER, Lt)
      }
     }, this.initMaterial = function() {
      e.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
     }, this.addPrePlugin = function() {
      e.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
     }, this.addPostPlugin = function() {
      e.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
     }, this.updateShadowMap = function() {
      e.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
     }
    }, e.WebGLRenderTarget = function(t, n, r) {
     this.width = t, this.height = n, r = r || {}, this.wrapS = void 0 !== r.wrapS ? r.wrapS : e.ClampToEdgeWrapping, this.wrapT = void 0 !== r.wrapT ? r.wrapT : e.ClampToEdgeWrapping, this.magFilter = void 0 !== r.magFilter ? r.magFilter : e.LinearFilter, this.minFilter = void 0 !== r.minFilter ? r.minFilter : e.LinearMipMapLinearFilter, this.anisotropy = void 0 !== r.anisotropy ? r.anisotropy : 1, this.offset = new e.Vector2(0, 0), this.repeat = new e.Vector2(1, 1), this.format = void 0 !== r.format ? r.format : e.RGBAFormat, this.type = void 0 !== r.type ? r.type : e.UnsignedByteType, this.depthBuffer = void 0 !== r.depthBuffer ? r.depthBuffer : !0, this.stencilBuffer = void 0 !== r.stencilBuffer ? r.stencilBuffer : !0, this.generateMipmaps = !0, this.shareDepthFrom = void 0 !== r.shareDepthFrom ? r.shareDepthFrom : null
    }, e.WebGLRenderTarget.prototype = {
     constructor: e.WebGLRenderTarget,
     setSize: function(e, t) {
      (this.width !== e || this.height !== t) && (this.width = e, this.height = t, this.dispose())
     },
     clone: function() {
      var t = new e.WebGLRenderTarget(this.width, this.height);
      return t.wrapS = this.wrapS, t.wrapT = this.wrapT, t.magFilter = this.magFilter, t.minFilter = this.minFilter, t.anisotropy = this.anisotropy, t.offset.copy(this.offset), t.repeat.copy(this.repeat), t.format = this.format, t.type = this.type, t.depthBuffer = this.depthBuffer, t.stencilBuffer = this.stencilBuffer, t.generateMipmaps = this.generateMipmaps, t.shareDepthFrom = this.shareDepthFrom, t
     },
     dispose: function() {
      this.dispatchEvent({
       type: "dispose"
      })
     }
    }, e.EventDispatcher.prototype.apply(e.WebGLRenderTarget.prototype), e.WebGLRenderTargetCube = function(t, n, r) {
     e.WebGLRenderTarget.call(this, t, n, r), this.activeCubeFace = 0
    }, e.WebGLRenderTargetCube.prototype = Object.create(e.WebGLRenderTarget.prototype), e.WebGLRenderTargetCube.prototype.constructor = e.WebGLRenderTargetCube, e.WebGLExtensions = function(t) {
     var n = {};
     this.get = function(r) {
      if (void 0 !== n[r]) return n[r];
      var i;
      switch (r) {
       case "EXT_texture_filter_anisotropic":
        i = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
       case "WEBGL_compressed_texture_s3tc":
        i = t.getExtension("WEBGL_compressed_texture_s3tc") || t.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
       case "WEBGL_compressed_texture_pvrtc":
        i = t.getExtension("WEBGL_compressed_texture_pvrtc") || t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
       default:
        i = t.getExtension(r)
      }
      return null === i && e.warn("THREE.WebGLRenderer: " + r + " extension not supported."), n[r] = i, i
     }
    }, e.WebGLProgram = function() {
     var t = 0,
      n = function(e) {
       var t, n, r = [];
       for (var i in e) t = e[i], t !== !1 && (n = "#define " + i + " " + t, r.push(n));
       return r.join("\n")
      },
      r = function(e, t, n) {
       for (var r = {}, i = 0, o = n.length; o > i; i++) {
        var a = n[i];
        r[a] = e.getUniformLocation(t, a)
       }
       return r
      },
      i = function(e, t, n) {
       for (var r = {}, i = 0, o = n.length; o > i; i++) {
        var a = n[i];
        r[a] = e.getAttribLocation(t, a)
       }
       return r
      };
     return function(o, a, s, u) {
      var l = o,
       c = l.context,
       h = s.defines,
       p = s.__webglShader.uniforms,
       d = s.attributes,
       f = s.__webglShader.vertexShader,
       m = s.__webglShader.fragmentShader,
       g = s.index0AttributeName;
      void 0 === g && u.morphTargets === !0 && (g = "position");
      var v = "SHADOWMAP_TYPE_BASIC";
      u.shadowMapType === e.PCFShadowMap ? v = "SHADOWMAP_TYPE_PCF" : u.shadowMapType === e.PCFSoftShadowMap && (v = "SHADOWMAP_TYPE_PCF_SOFT");
      var y = "ENVMAP_TYPE_CUBE",
       b = "ENVMAP_MODE_REFLECTION",
       w = "ENVMAP_BLENDING_MULTIPLY";
      if (u.envMap) {
       switch (s.envMap.mapping) {
        case e.CubeReflectionMapping:
        case e.CubeRefractionMapping:
         y = "ENVMAP_TYPE_CUBE";
         break;
        case e.EquirectangularReflectionMapping:
        case e.EquirectangularRefractionMapping:
         y = "ENVMAP_TYPE_EQUIREC";
         break;
        case e.SphericalReflectionMapping:
         y = "ENVMAP_TYPE_SPHERE"
       }
       switch (s.envMap.mapping) {
        case e.CubeRefractionMapping:
        case e.EquirectangularRefractionMapping:
         b = "ENVMAP_MODE_REFRACTION"
       }
       switch (s.combine) {
        case e.MultiplyOperation:
         w = "ENVMAP_BLENDING_MULTIPLY";
         break;
        case e.MixOperation:
         w = "ENVMAP_BLENDING_MIX";
         break;
        case e.AddOperation:
         w = "ENVMAP_BLENDING_ADD"
       }
      }
      var x, _, S = o.gammaFactor > 0 ? o.gammaFactor : 1,
       C = n(h),
       E = c.createProgram();
      s instanceof e.RawShaderMaterial ? (x = "", _ = "") : (x = ["precision " + u.precision + " float;", "precision " + u.precision + " int;", C, u.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", l.gammaInput ? "#define GAMMA_INPUT" : "", l.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + S, "#define MAX_DIR_LIGHTS " + u.maxDirLights, "#define MAX_POINT_LIGHTS " + u.maxPointLights, "#define MAX_SPOT_LIGHTS " + u.maxSpotLights, "#define MAX_HEMI_LIGHTS " + u.maxHemiLights, "#define MAX_SHADOWS " + u.maxShadows, "#define MAX_BONES " + u.maxBones, u.map ? "#define USE_MAP" : "", u.envMap ? "#define USE_ENVMAP" : "", u.envMap ? "#define " + b : "", u.lightMap ? "#define USE_LIGHTMAP" : "", u.bumpMap ? "#define USE_BUMPMAP" : "", u.normalMap ? "#define USE_NORMALMAP" : "", u.specularMap ? "#define USE_SPECULARMAP" : "", u.alphaMap ? "#define USE_ALPHAMAP" : "", u.vertexColors ? "#define USE_COLOR" : "", u.flatShading ? "#define FLAT_SHADED" : "", u.skinning ? "#define USE_SKINNING" : "", u.useVertexTexture ? "#define BONE_TEXTURE" : "", u.morphTargets ? "#define USE_MORPHTARGETS" : "", u.morphNormals ? "#define USE_MORPHNORMALS" : "", u.wrapAround ? "#define WRAP_AROUND" : "", u.doubleSided ? "#define DOUBLE_SIDED" : "", u.flipSided ? "#define FLIP_SIDED" : "", u.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", u.shadowMapEnabled ? "#define " + v : "", u.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", u.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", u.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", u.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", ""].join("\n"), _ = [u.bumpMap || u.normalMap || u.flatShading ? "#extension GL_OES_standard_derivatives : enable" : "", "precision " + u.precision + " float;", "precision " + u.precision + " int;", C, "#define MAX_DIR_LIGHTS " + u.maxDirLights, "#define MAX_POINT_LIGHTS " + u.maxPointLights, "#define MAX_SPOT_LIGHTS " + u.maxSpotLights, "#define MAX_HEMI_LIGHTS " + u.maxHemiLights, "#define MAX_SHADOWS " + u.maxShadows, u.alphaTest ? "#define ALPHATEST " + u.alphaTest : "", l.gammaInput ? "#define GAMMA_INPUT" : "", l.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define GAMMA_FACTOR " + S, u.useFog && u.fog ? "#define USE_FOG" : "", u.useFog && u.fogExp ? "#define FOG_EXP2" : "", u.map ? "#define USE_MAP" : "", u.envMap ? "#define USE_ENVMAP" : "", u.envMap ? "#define " + y : "", u.envMap ? "#define " + b : "", u.envMap ? "#define " + w : "", u.lightMap ? "#define USE_LIGHTMAP" : "", u.bumpMap ? "#define USE_BUMPMAP" : "", u.normalMap ? "#define USE_NORMALMAP" : "", u.specularMap ? "#define USE_SPECULARMAP" : "", u.alphaMap ? "#define USE_ALPHAMAP" : "", u.vertexColors ? "#define USE_COLOR" : "", u.flatShading ? "#define FLAT_SHADED" : "", u.metal ? "#define METAL" : "", u.wrapAround ? "#define WRAP_AROUND" : "", u.doubleSided ? "#define DOUBLE_SIDED" : "", u.flipSided ? "#define FLIP_SIDED" : "", u.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", u.shadowMapEnabled ? "#define " + v : "", u.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", u.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", u.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", ""].join("\n"));
      var T = new e.WebGLShader(c, c.VERTEX_SHADER, x + f),
       M = new e.WebGLShader(c, c.FRAGMENT_SHADER, _ + m);
      c.attachShader(E, T), c.attachShader(E, M), void 0 !== g && c.bindAttribLocation(E, 0, g), c.linkProgram(E);
      var A = c.getProgramInfoLog(E);
      c.getProgramParameter(E, c.LINK_STATUS) === !1 && e.error("THREE.WebGLProgram: shader error: " + c.getError(), "gl.VALIDATE_STATUS", c.getProgramParameter(E, c.VALIDATE_STATUS), "gl.getPRogramInfoLog", A), c.deleteShader(T), c.deleteShader(M);
      var P = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "morphTargetInfluences", "bindMatrix", "bindMatrixInverse"];
      u.useVertexTexture ? (P.push("boneTexture"), P.push("boneTextureWidth"), P.push("boneTextureHeight")) : P.push("boneGlobalMatrices"), u.logarithmicDepthBuffer && P.push("logDepthBufFC");
      for (var R in p) P.push(R);
      this.uniforms = r(c, E, P), P = ["position", "normal", "uv", "uv2", "tangent", "color", "skinIndex", "skinWeight", "lineDistance"];
      for (var I = 0; I < u.maxMorphTargets; I++) P.push("morphTarget" + I);
      for (var I = 0; I < u.maxMorphNormals; I++) P.push("morphNormal" + I);
      for (var k in d) P.push(k);
      return this.attributes = i(c, E, P), this.attributesKeys = Object.keys(this.attributes), this.id = t++, this.code = a, this.usedTimes = 1, this.program = E, this.vertexShader = T, this.fragmentShader = M, this
     }
    }(), e.WebGLShader = function() {
     return function(t, n, r) {
      var i = t.createShader(n);
      return t.shaderSource(i, r), t.compileShader(i), t.getShaderParameter(i, t.COMPILE_STATUS) === !1 && e.error("THREE.WebGLShader: Shader couldn't compile."), i
     }
    }(), e.WebGLState = function(t, n) {
     var r = new Uint8Array(16),
      i = new Uint8Array(16),
      o = null,
      a = null,
      s = null,
      u = null,
      l = null,
      c = null,
      h = null,
      p = null,
      d = null,
      f = null,
      m = null,
      g = null,
      v = null,
      y = null,
      b = null,
      w = null;
     this.initAttributes = function() {
      for (var e = 0, t = r.length; t > e; e++) r[e] = 0
     }, this.enableAttribute = function(e) {
      r[e] = 1, 0 === i[e] && (t.enableVertexAttribArray(e), i[e] = 1)
     }, this.disableUnusedAttributes = function() {
      for (var e = 0, n = i.length; n > e; e++) i[e] !== r[e] && (t.disableVertexAttribArray(e), i[e] = 0)
     }, this.setBlending = function(r, i, p, d, f, m, g) {
      r !== o && (r === e.NoBlending ? t.disable(t.BLEND) : r === e.AdditiveBlending ? (t.enable(t.BLEND), t.blendEquation(t.FUNC_ADD), t.blendFunc(t.SRC_ALPHA, t.ONE)) : r === e.SubtractiveBlending ? (t.enable(t.BLEND), t.blendEquation(t.FUNC_ADD), t.blendFunc(t.ZERO, t.ONE_MINUS_SRC_COLOR)) : r === e.MultiplyBlending ? (t.enable(t.BLEND), t.blendEquation(t.FUNC_ADD), t.blendFunc(t.ZERO, t.SRC_COLOR)) : r === e.CustomBlending ? t.enable(t.BLEND) : (t.enable(t.BLEND), t.blendEquationSeparate(t.FUNC_ADD, t.FUNC_ADD), t.blendFuncSeparate(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA)), o = r), r === e.CustomBlending ? (f = f || i, m = m || p, g = g || d, (i !== a || f !== l) && (t.blendEquationSeparate(n(i), n(f)), a = i, l = f), (p !== s || d !== u || m !== c || g !== h) && (t.blendFuncSeparate(n(p), n(d), n(m), n(g)), s = p, u = d, c = m, h = g)) : (a = null, s = null, u = null, l = null, c = null, h = null)
     }, this.setDepthTest = function(e) {
      p !== e && (e ? t.enable(t.DEPTH_TEST) : t.disable(t.DEPTH_TEST), p = e)
     }, this.setDepthWrite = function(e) {
      d !== e && (t.depthMask(e), d = e)
     }, this.setColorWrite = function(e) {
      f !== e && (t.colorMask(e, e, e, e), f = e)
     }, this.setDoubleSided = function(e) {
      m !== e && (e ? t.disable(t.CULL_FACE) : t.enable(t.CULL_FACE), m = e)
     }, this.setFlipSided = function(e) {
      g !== e && (e ? t.frontFace(t.CW) : t.frontFace(t.CCW), g = e)
     }, this.setLineWidth = function(e) {
      e !== v && (t.lineWidth(e), v = e)
     }, this.setPolygonOffset = function(e, n, r) {
      y !== e && (e ? t.enable(t.POLYGON_OFFSET_FILL) : t.disable(t.POLYGON_OFFSET_FILL), y = e), !e || b === n && w === r || (t.polygonOffset(n, r), b = n, w = r)
     }, this.reset = function() {
      for (var e = 0; e < i.length; e++) i[e] = 0;
      o = null, p = null, d = null, f = null, m = null, g = null
     }
    }, e.LensFlarePlugin = function(t, n) {
     function r(e) {
      var n = p.createProgram(),
       r = p.createShader(p.FRAGMENT_SHADER),
       i = p.createShader(p.VERTEX_SHADER),
       o = "precision " + t.getPrecision() + " float;\n";
      return p.shaderSource(r, o + e.fragmentShader), p.shaderSource(i, o + e.vertexShader), p.compileShader(r), p.compileShader(i), p.attachShader(n, r), p.attachShader(n, i), p.linkProgram(n), n
     }
     var i, o, a, s, u, l, c, h, p = t.context,
      d = function() {
       var e = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]),
        t = new Uint16Array([0, 1, 2, 0, 2, 3]);
       i = p.createBuffer(), o = p.createBuffer(), p.bindBuffer(p.ARRAY_BUFFER, i), p.bufferData(p.ARRAY_BUFFER, e, p.STATIC_DRAW), p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, o), p.bufferData(p.ELEMENT_ARRAY_BUFFER, t, p.STATIC_DRAW), c = p.createTexture(), h = p.createTexture(), p.bindTexture(p.TEXTURE_2D, c), p.texImage2D(p.TEXTURE_2D, 0, p.RGB, 16, 16, 0, p.RGB, p.UNSIGNED_BYTE, null), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST), p.bindTexture(p.TEXTURE_2D, h), p.texImage2D(p.TEXTURE_2D, 0, p.RGBA, 16, 16, 0, p.RGBA, p.UNSIGNED_BYTE, null), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_S, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_WRAP_T, p.CLAMP_TO_EDGE), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MAG_FILTER, p.NEAREST), p.texParameteri(p.TEXTURE_2D, p.TEXTURE_MIN_FILTER, p.NEAREST), l = p.getParameter(p.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
       var n;
       n = l ? {
        vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
       } : {
        vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
        fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
       }, a = r(n), s = {
        vertex: p.getAttribLocation(a, "position"),
        uv: p.getAttribLocation(a, "uv")
       }, u = {
        renderType: p.getUniformLocation(a, "renderType"),
        map: p.getUniformLocation(a, "map"),
        occlusionMap: p.getUniformLocation(a, "occlusionMap"),
        opacity: p.getUniformLocation(a, "opacity"),
        color: p.getUniformLocation(a, "color"),
        scale: p.getUniformLocation(a, "scale"),
        rotation: p.getUniformLocation(a, "rotation"),
        screenPosition: p.getUniformLocation(a, "screenPosition")
       }
      };
     this.render = function(r, f, m, g) {
      if (0 !== n.length) {
       var v = new e.Vector3,
        y = g / m,
        b = .5 * m,
        w = .5 * g,
        x = 16 / g,
        _ = new e.Vector2(x * y, x),
        S = new e.Vector3(1, 1, 0),
        C = new e.Vector2(1, 1);
       void 0 === a && d(), p.useProgram(a), p.enableVertexAttribArray(s.vertex), p.enableVertexAttribArray(s.uv), p.uniform1i(u.occlusionMap, 0), p.uniform1i(u.map, 1), p.bindBuffer(p.ARRAY_BUFFER, i), p.vertexAttribPointer(s.vertex, 2, p.FLOAT, !1, 16, 0), p.vertexAttribPointer(s.uv, 2, p.FLOAT, !1, 16, 8), p.bindBuffer(p.ELEMENT_ARRAY_BUFFER, o), p.disable(p.CULL_FACE), p.depthMask(!1);
       for (var E = 0, T = n.length; T > E; E++) {
        x = 16 / g, _.set(x * y, x);
        var M = n[E];
        if (v.set(M.matrixWorld.elements[12], M.matrixWorld.elements[13], M.matrixWorld.elements[14]), v.applyMatrix4(f.matrixWorldInverse), v.applyProjection(f.projectionMatrix), S.copy(v), C.x = S.x * b + b, C.y = S.y * w + w, l || C.x > 0 && C.x < m && C.y > 0 && C.y < g) {
         p.activeTexture(p.TEXTURE1), p.bindTexture(p.TEXTURE_2D, c), p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGB, C.x - 8, C.y - 8, 16, 16, 0), p.uniform1i(u.renderType, 0), p.uniform2f(u.scale, _.x, _.y), p.uniform3f(u.screenPosition, S.x, S.y, S.z), p.disable(p.BLEND), p.enable(p.DEPTH_TEST), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0), p.activeTexture(p.TEXTURE0), p.bindTexture(p.TEXTURE_2D, h), p.copyTexImage2D(p.TEXTURE_2D, 0, p.RGBA, C.x - 8, C.y - 8, 16, 16, 0), p.uniform1i(u.renderType, 1), p.disable(p.DEPTH_TEST), p.activeTexture(p.TEXTURE1), p.bindTexture(p.TEXTURE_2D, c), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0), M.positionScreen.copy(S), M.customUpdateCallback ? M.customUpdateCallback(M) : M.updateLensFlares(), p.uniform1i(u.renderType, 2), p.enable(p.BLEND);
         for (var A = 0, P = M.lensFlares.length; P > A; A++) {
          var R = M.lensFlares[A];
          R.opacity > .001 && R.scale > .001 && (S.x = R.x, S.y = R.y, S.z = R.z, x = R.size * R.scale / g, _.x = x * y, _.y = x, p.uniform3f(u.screenPosition, S.x, S.y, S.z), p.uniform2f(u.scale, _.x, _.y), p.uniform1f(u.rotation, R.rotation), p.uniform1f(u.opacity, R.opacity), p.uniform3f(u.color, R.color.r, R.color.g, R.color.b), t.state.setBlending(R.blending, R.blendEquation, R.blendSrc, R.blendDst), t.setTexture(R.texture, 1), p.drawElements(p.TRIANGLES, 6, p.UNSIGNED_SHORT, 0))
         }
        }
       }
       p.enable(p.CULL_FACE), p.enable(p.DEPTH_TEST), p.depthMask(!0), t.resetGLState()
      }
     }
    }, e.ShadowMapPlugin = function(t, n, r, i) {
     function o(e, t, n) {
      if (t.visible) {
       var i = r[t.id];
       if (i && t.castShadow && (t.frustumCulled === !1 || m.intersectsObject(t) === !0))
        for (var a = 0, s = i.length; s > a; a++) {
         var u = i[a];
         t._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, t.matrixWorld), w.push(u)
        }
       for (var a = 0, s = t.children.length; s > a; a++) o(e, t.children[a], n)
      }
     }

     function a(t, n) {
      var r = new e.DirectionalLight;
      r.isVirtual = !0, r.onlyShadow = !0, r.castShadow = !0, r.shadowCameraNear = t.shadowCameraNear, r.shadowCameraFar = t.shadowCameraFar, r.shadowCameraLeft = t.shadowCameraLeft, r.shadowCameraRight = t.shadowCameraRight, r.shadowCameraBottom = t.shadowCameraBottom, r.shadowCameraTop = t.shadowCameraTop, r.shadowCameraVisible = t.shadowCameraVisible, r.shadowDarkness = t.shadowDarkness, r.shadowBias = t.shadowCascadeBias[n], r.shadowMapWidth = t.shadowCascadeWidth[n], r.shadowMapHeight = t.shadowCascadeHeight[n], r.pointsWorld = [], r.pointsFrustum = [];
      for (var i = r.pointsWorld, o = r.pointsFrustum, a = 0; 8 > a; a++) i[a] = new e.Vector3, o[a] = new e.Vector3;
      var s = t.shadowCascadeNearZ[n],
       u = t.shadowCascadeFarZ[n];
      return o[0].set(-1, -1, s), o[1].set(1, -1, s), o[2].set(-1, 1, s), o[3].set(1, 1, s), o[4].set(-1, -1, u), o[5].set(1, -1, u), o[6].set(-1, 1, u), o[7].set(1, 1, u), r
     }

     function s(e, t) {
      var n = e.shadowCascadeArray[t];
      n.position.copy(e.position), n.target.position.copy(e.target.position), n.lookAt(n.target), n.shadowCameraVisible = e.shadowCameraVisible, n.shadowDarkness = e.shadowDarkness, n.shadowBias = e.shadowCascadeBias[t];
      var r = e.shadowCascadeNearZ[t],
       i = e.shadowCascadeFarZ[t],
       o = n.pointsFrustum;
      o[0].z = r, o[1].z = r, o[2].z = r, o[3].z = r, o[4].z = i, o[5].z = i, o[6].z = i, o[7].z = i
     }

     function u(e, t) {
      var n = t.shadowCamera,
       r = t.pointsFrustum,
       i = t.pointsWorld;
      v.set(1 / 0, 1 / 0, 1 / 0), y.set(-1 / 0, -1 / 0, -1 / 0);
      for (var o = 0; 8 > o; o++) {
       var a = i[o];
       a.copy(r[o]), a.unproject(e), a.applyMatrix4(n.matrixWorldInverse), a.x < v.x && (v.x = a.x), a.x > y.x && (y.x = a.x), a.y < v.y && (v.y = a.y), a.y > y.y && (y.y = a.y), a.z < v.z && (v.z = a.z), a.z > y.z && (y.z = a.z)
      }
      n.left = v.x, n.right = y.x, n.top = y.y, n.bottom = v.y, n.updateProjectionMatrix()
     }

     function l(t) {
      return t.material instanceof e.MeshFaceMaterial ? t.material.materials[0] : t.material
     }
     var c, h, p, d, f = t.context,
      m = new e.Frustum,
      g = new e.Matrix4,
      v = new e.Vector3,
      y = new e.Vector3,
      b = new e.Vector3,
      w = [],
      x = e.ShaderLib.depthRGBA,
      _ = e.UniformsUtils.clone(x.uniforms);
     c = new e.ShaderMaterial({
      uniforms: _,
      vertexShader: x.vertexShader,
      fragmentShader: x.fragmentShader
     }), h = new e.ShaderMaterial({
      uniforms: _,
      vertexShader: x.vertexShader,
      fragmentShader: x.fragmentShader,
      morphTargets: !0
     }), p = new e.ShaderMaterial({
      uniforms: _,
      vertexShader: x.vertexShader,
      fragmentShader: x.fragmentShader,
      skinning: !0
     }), d = new e.ShaderMaterial({
      uniforms: _,
      vertexShader: x.vertexShader,
      fragmentShader: x.fragmentShader,
      morphTargets: !0,
      skinning: !0
     }), c._shadowPass = !0, h._shadowPass = !0, p._shadowPass = !0, d._shadowPass = !0, this.render = function(r, v) {
      if (t.shadowMapEnabled !== !1) {
       var y, x, _, S, C, E, T, M, A, P, R, I, k, D = [],
        V = 0,
        L = null;
       for (f.clearColor(1, 1, 1, 1), f.disable(f.BLEND), f.enable(f.CULL_FACE), f.frontFace(f.CCW), t.shadowMapCullFace === e.CullFaceFront ? f.cullFace(f.FRONT) : f.cullFace(f.BACK), t.state.setDepthTest(!0), y = 0, x = n.length; x > y; y++)
        if (k = n[y], k.castShadow)
         if (k instanceof e.DirectionalLight && k.shadowCascade)
          for (C = 0; C < k.shadowCascadeCount; C++) {
           var B;
           if (k.shadowCascadeArray[C]) B = k.shadowCascadeArray[C];
           else {
            B = a(k, C), B.originalCamera = v;
            var O = new e.Gyroscope;
            O.position.copy(k.shadowCascadeOffset), O.add(B), O.add(B.target), v.add(O), k.shadowCascadeArray[C] = B
           }
           s(k, C), D[V] = B, V++
          } else D[V] = k, V++;
       for (y = 0, x = D.length; x > y; y++) {
        if (k = D[y], !k.shadowMap) {
         var N = e.LinearFilter;
         t.shadowMapType === e.PCFSoftShadowMap && (N = e.NearestFilter);
         var F = {
          minFilter: N,
          magFilter: N,
          format: e.RGBAFormat
         };
         k.shadowMap = new e.WebGLRenderTarget(k.shadowMapWidth, k.shadowMapHeight, F), k.shadowMapSize = new e.Vector2(k.shadowMapWidth, k.shadowMapHeight), k.shadowMatrix = new e.Matrix4
        }
        if (!k.shadowCamera) {
         if (k instanceof e.SpotLight) k.shadowCamera = new e.PerspectiveCamera(k.shadowCameraFov, k.shadowMapWidth / k.shadowMapHeight, k.shadowCameraNear, k.shadowCameraFar);
         else {
          if (!(k instanceof e.DirectionalLight)) {
           e.error("THREE.ShadowMapPlugin: Unsupported light type for shadow", k);
           continue
          }
          k.shadowCamera = new e.OrthographicCamera(k.shadowCameraLeft, k.shadowCameraRight, k.shadowCameraTop, k.shadowCameraBottom, k.shadowCameraNear, k.shadowCameraFar)
         }
         r.add(k.shadowCamera), r.autoUpdate === !0 && r.updateMatrixWorld()
        }
        k.shadowCameraVisible && !k.cameraHelper && (k.cameraHelper = new e.CameraHelper(k.shadowCamera), r.add(k.cameraHelper)), k.isVirtual && B.originalCamera == v && u(v, k), E = k.shadowMap, T = k.shadowMatrix, M = k.shadowCamera, M.position.setFromMatrixPosition(k.matrixWorld), b.setFromMatrixPosition(k.target.matrixWorld), M.lookAt(b), M.updateMatrixWorld(), M.matrixWorldInverse.getInverse(M.matrixWorld), k.cameraHelper && (k.cameraHelper.visible = k.shadowCameraVisible), k.shadowCameraVisible && k.cameraHelper.update(), T.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), T.multiply(M.projectionMatrix), T.multiply(M.matrixWorldInverse), g.multiplyMatrices(M.projectionMatrix, M.matrixWorldInverse), m.setFromMatrix(g), t.setRenderTarget(E), t.clear(), w.length = 0, o(r, r, M);
        var U, z, G;
        for (_ = 0, S = w.length; S > _; _++) R = w[_], I = R.object, A = R.buffer, U = l(I), z = void 0 !== I.geometry.morphTargets && I.geometry.morphTargets.length > 0 && U.morphTargets, G = I instanceof e.SkinnedMesh && U.skinning, P = I.customDepthMaterial ? I.customDepthMaterial : G ? z ? d : p : z ? h : c, t.setMaterialFaces(U), A instanceof e.BufferGeometry ? t.renderBufferDirect(M, n, L, P, A, I) : t.renderBuffer(M, n, L, P, A, I);
        for (_ = 0, S = i.length; S > _; _++) R = i[_], I = R.object, I.visible && I.castShadow && (I._modelViewMatrix.multiplyMatrices(M.matrixWorldInverse, I.matrixWorld), t.renderImmediateObject(M, n, L, c, I))
       }
       var H = t.getClearColor(),
        j = t.getClearAlpha();
       f.clearColor(H.r, H.g, H.b, j), f.enable(f.BLEND), t.shadowMapCullFace === e.CullFaceFront && f.cullFace(f.BACK), t.resetGLState()
      }
     }
    }, e.SpritePlugin = function(t, n) {
     function r() {
      var e = h.createProgram(),
       n = h.createShader(h.VERTEX_SHADER),
       r = h.createShader(h.FRAGMENT_SHADER);
      return h.shaderSource(n, ["precision " + t.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")), h.shaderSource(r, ["precision " + t.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")), h.compileShader(n), h.compileShader(r), h.attachShader(e, n), h.attachShader(e, r), h.linkProgram(e), e
     }

     function i(e, t) {
      return e.z !== t.z ? t.z - e.z : t.id - e.id
     }
     var o, a, s, u, l, c, h = t.context,
      p = new e.Vector3,
      d = new e.Quaternion,
      f = new e.Vector3,
      m = function() {
       var t = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
        n = new Uint16Array([0, 1, 2, 0, 2, 3]);
       o = h.createBuffer(), a = h.createBuffer(), h.bindBuffer(h.ARRAY_BUFFER, o), h.bufferData(h.ARRAY_BUFFER, t, h.STATIC_DRAW), h.bindBuffer(h.ELEMENT_ARRAY_BUFFER, a), h.bufferData(h.ELEMENT_ARRAY_BUFFER, n, h.STATIC_DRAW), s = r(), u = {
        position: h.getAttribLocation(s, "position"),
        uv: h.getAttribLocation(s, "uv")
       }, l = {
        uvOffset: h.getUniformLocation(s, "uvOffset"),
        uvScale: h.getUniformLocation(s, "uvScale"),
        rotation: h.getUniformLocation(s, "rotation"),
        scale: h.getUniformLocation(s, "scale"),
        color: h.getUniformLocation(s, "color"),
        map: h.getUniformLocation(s, "map"),
        opacity: h.getUniformLocation(s, "opacity"),
        modelViewMatrix: h.getUniformLocation(s, "modelViewMatrix"),
        projectionMatrix: h.getUniformLocation(s, "projectionMatrix"),
        fogType: h.getUniformLocation(s, "fogType"),
        fogDensity: h.getUniformLocation(s, "fogDensity"),
        fogNear: h.getUniformLocation(s, "fogNear"),
        fogFar: h.getUniformLocation(s, "fogFar"),
        fogColor: h.getUniformLocation(s, "fogColor"),
        alphaTest: h.getUniformLocation(s, "alphaTest")
       };
       var i = document.createElement("canvas");
       i.width = 8, i.height = 8;
       var p = i.getContext("2d");
       p.fillStyle = "white", p.fillRect(0, 0, 8, 8), c = new e.Texture(i), c.needsUpdate = !0
      };
     this.render = function(r, g) {
      if (0 !== n.length) {
       void 0 === s && m(), h.useProgram(s), h.enableVertexAttribArray(u.position), h.enableVertexAttribArray(u.uv), h.disable(h.CULL_FACE), h.enable(h.BLEND), h.bindBuffer(h.ARRAY_BUFFER, o), h.vertexAttribPointer(u.position, 2, h.FLOAT, !1, 16, 0), h.vertexAttribPointer(u.uv, 2, h.FLOAT, !1, 16, 8), h.bindBuffer(h.ELEMENT_ARRAY_BUFFER, a), h.uniformMatrix4fv(l.projectionMatrix, !1, g.projectionMatrix.elements), h.activeTexture(h.TEXTURE0), h.uniform1i(l.map, 0);
       var v = 0,
        y = 0,
        b = r.fog;
       b ? (h.uniform3f(l.fogColor, b.color.r, b.color.g, b.color.b), b instanceof e.Fog ? (h.uniform1f(l.fogNear, b.near), h.uniform1f(l.fogFar, b.far), h.uniform1i(l.fogType, 1), v = 1, y = 1) : b instanceof e.FogExp2 && (h.uniform1f(l.fogDensity, b.density), h.uniform1i(l.fogType, 2), v = 2, y = 2)) : (h.uniform1i(l.fogType, 0), v = 0, y = 0);
       for (var w = 0, x = n.length; x > w; w++) {
        var _ = n[w];
        _._modelViewMatrix.multiplyMatrices(g.matrixWorldInverse, _.matrixWorld), _.z = -_._modelViewMatrix.elements[14]
       }
       n.sort(i);
       for (var S = [], w = 0, x = n.length; x > w; w++) {
        var _ = n[w],
         C = _.material;
        h.uniform1f(l.alphaTest, C.alphaTest), h.uniformMatrix4fv(l.modelViewMatrix, !1, _._modelViewMatrix.elements), _.matrixWorld.decompose(p, d, f), S[0] = f.x, S[1] = f.y;
        var E = 0;
        r.fog && C.fog && (E = y), v !== E && (h.uniform1i(l.fogType, E), v = E), null !== C.map ? (h.uniform2f(l.uvOffset, C.map.offset.x, C.map.offset.y), h.uniform2f(l.uvScale, C.map.repeat.x, C.map.repeat.y)) : (h.uniform2f(l.uvOffset, 0, 0), h.uniform2f(l.uvScale, 1, 1)), h.uniform1f(l.opacity, C.opacity), h.uniform3f(l.color, C.color.r, C.color.g, C.color.b), h.uniform1f(l.rotation, C.rotation), h.uniform2fv(l.scale, S), t.state.setBlending(C.blending, C.blendEquation, C.blendSrc, C.blendDst), t.state.setDepthTest(C.depthTest), t.state.setDepthWrite(C.depthWrite), C.map && C.map.image && C.map.image.width ? t.setTexture(C.map, 0) : t.setTexture(c, 0), h.drawElements(h.TRIANGLES, 6, h.UNSIGNED_SHORT, 0)
       }
       h.enable(h.CULL_FACE), t.resetGLState()
      }
     }
    }, e.GeometryUtils = {
     merge: function(t, n, r) {
      e.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
      var i;
      n instanceof e.Mesh && (n.matrixAutoUpdate && n.updateMatrix(), i = n.matrix, n = n.geometry), t.merge(n, i, r)
     },
     center: function(t) {
      return e.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), t.center()
     }
    }, e.ImageUtils = {
     crossOrigin: void 0,
     loadTexture: function(t, n, r, i) {
      var o = new e.ImageLoader;
      o.crossOrigin = this.crossOrigin;
      var a = new e.Texture(void 0, n);
      return o.load(t, function(e) {
       a.image = e, a.needsUpdate = !0, r && r(a)
      }, void 0, function(e) {
       i && i(e)
      }), a.sourceFile = t, a
     },
     loadTextureCube: function(t, n, r, i) {
      var o = [],
       a = new e.ImageLoader;
      a.crossOrigin = this.crossOrigin;
      var s = new e.CubeTexture(o, n);
      s.flipY = !1;
      for (var u = 0, l = function(e) {
        a.load(t[e], function(t) {
         s.images[e] = t, u += 1, 6 === u && (s.needsUpdate = !0, r && r(s))
        }, void 0, i)
       }, c = 0, h = t.length; h > c; ++c) l(c);
      return s
     },
     loadCompressedTexture: function() {
      e.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
     },
     loadCompressedTextureCube: function() {
      e.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
     },
     getNormalMap: function(e, t) {
      var n = function(e, t) {
        return [e[1] * t[2] - e[2] * t[1], e[2] * t[0] - e[0] * t[2], e[0] * t[1] - e[1] * t[0]]
       },
       r = function(e, t) {
        return [e[0] - t[0], e[1] - t[1], e[2] - t[2]]
       },
       i = function(e) {
        var t = Math.sqrt(e[0] * e[0] + e[1] * e[1] + e[2] * e[2]);
        return [e[0] / t, e[1] / t, e[2] / t]
       };
      t = 1 | t;
      var o = e.width,
       a = e.height,
       s = document.createElement("canvas");
      s.width = o, s.height = a;
      var u = s.getContext("2d");
      u.drawImage(e, 0, 0);
      for (var l = u.getImageData(0, 0, o, a).data, c = u.createImageData(o, a), h = c.data, p = 0; o > p; p++)
       for (var d = 0; a > d; d++) {
        var f = 0 > d - 1 ? 0 : d - 1,
         m = d + 1 > a - 1 ? a - 1 : d + 1,
         g = 0 > p - 1 ? 0 : p - 1,
         v = p + 1 > o - 1 ? o - 1 : p + 1,
         y = [],
         b = [0, 0, l[4 * (d * o + p)] / 255 * t];
        y.push([-1, 0, l[4 * (d * o + g)] / 255 * t]), y.push([-1, -1, l[4 * (f * o + g)] / 255 * t]), y.push([0, -1, l[4 * (f * o + p)] / 255 * t]), y.push([1, -1, l[4 * (f * o + v)] / 255 * t]), y.push([1, 0, l[4 * (d * o + v)] / 255 * t]), y.push([1, 1, l[4 * (m * o + v)] / 255 * t]), y.push([0, 1, l[4 * (m * o + p)] / 255 * t]), y.push([-1, 1, l[4 * (m * o + g)] / 255 * t]);
        for (var w = [], x = y.length, _ = 0; x > _; _++) {
         var S = y[_],
          C = y[(_ + 1) % x];
         S = r(S, b), C = r(C, b), w.push(i(n(S, C)))
        }
        for (var E = [0, 0, 0], _ = 0; _ < w.length; _++) E[0] += w[_][0], E[1] += w[_][1], E[2] += w[_][2];
        E[0] /= w.length, E[1] /= w.length, E[2] /= w.length;
        var T = 4 * (d * o + p);
        h[T] = (E[0] + 1) / 2 * 255 | 0, h[T + 1] = (E[1] + 1) / 2 * 255 | 0, h[T + 2] = 255 * E[2] | 0, h[T + 3] = 255
       }
      return u.putImageData(c, 0, 0), s
     },
     generateDataTexture: function(t, n, r) {
      for (var i = t * n, o = new Uint8Array(3 * i), a = Math.floor(255 * r.r), s = Math.floor(255 * r.g), u = Math.floor(255 * r.b), l = 0; i > l; l++) o[3 * l] = a, o[3 * l + 1] = s, o[3 * l + 2] = u;
      var c = new e.DataTexture(o, t, n, e.RGBFormat);
      return c.needsUpdate = !0, c
     }
    }, e.SceneUtils = {
     createMultiMaterialObject: function(t, n) {
      for (var r = new e.Object3D, i = 0, o = n.length; o > i; i++) r.add(new e.Mesh(t, n[i]));
      return r
     },
     detach: function(e, t, n) {
      e.applyMatrix(t.matrixWorld), t.remove(e), n.add(e)
     },
     attach: function(t, n, r) {
      var i = new e.Matrix4;
      i.getInverse(r.matrixWorld), t.applyMatrix(i), n.remove(t), r.add(t)
     }
    }, e.FontUtils = {
     faces: {},
     face: "helvetiker",
     weight: "normal",
     style: "normal",
     size: 150,
     divisions: 10,
     getFace: function() {
      try {
       return this.faces[this.face][this.weight][this.style]
      } catch (e) {
       throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
      }
     },
     loadFace: function(e) {
      var t = e.familyName.toLowerCase(),
       n = this;
      return n.faces[t] = n.faces[t] || {}, n.faces[t][e.cssFontWeight] = n.faces[t][e.cssFontWeight] || {}, n.faces[t][e.cssFontWeight][e.cssFontStyle] = e, n.faces[t][e.cssFontWeight][e.cssFontStyle] = e, e
     },
     drawText: function(t) {
      var n, r = this.getFace(),
       i = this.size / r.resolution,
       o = 0,
       a = String(t).split(""),
       s = a.length,
       u = [];
      for (n = 0; s > n; n++) {
       var l = new e.Path,
        c = this.extractGlyphPoints(a[n], r, i, o, l);
       o += c.offset, u.push(c.path)
      }
      var h = o / 2;
      return {
       paths: u,
       offset: h
      }
     },
     extractGlyphPoints: function(t, n, r, i, o) {
      var a, s, u, l, c, h, p, d, f, m, g, v, y, b, w, x, _, S, C, E = [],
       T = n.glyphs[t] || n.glyphs["?"];
      if (T) {
       if (T.o)
        for (l = T._cachedOutline || (T._cachedOutline = T.o.split(" ")), h = l.length, p = r, d = r, a = 0; h > a;) switch (c = l[a++]) {
         case "m":
          f = l[a++] * p + i, m = l[a++] * d, o.moveTo(f, m);
          break;
         case "l":
          f = l[a++] * p + i, m = l[a++] * d, o.lineTo(f, m);
          break;
         case "q":
          if (g = l[a++] * p + i, v = l[a++] * d, w = l[a++] * p + i, x = l[a++] * d, o.quadraticCurveTo(w, x, g, v), C = E[E.length - 1])
           for (y = C.x, b = C.y, s = 1, u = this.divisions; u >= s; s++) {
            var M = s / u;
            e.Shape.Utils.b2(M, y, w, g), e.Shape.Utils.b2(M, b, x, v)
           }
          break;
         case "b":
          if (g = l[a++] * p + i, v = l[a++] * d, w = l[a++] * p + i, x = l[a++] * d, _ = l[a++] * p + i, S = l[a++] * d, o.bezierCurveTo(w, x, _, S, g, v), C = E[E.length - 1])
           for (y = C.x, b = C.y, s = 1, u = this.divisions; u >= s; s++) {
            var M = s / u;
            e.Shape.Utils.b3(M, y, w, _, g), e.Shape.Utils.b3(M, b, x, S, v)
           }
        }
       return {
        offset: T.ha * r,
        path: o
       }
      }
     }
    }, e.FontUtils.generateShapes = function(t, n) {
     n = n || {};
     var r = void 0 !== n.size ? n.size : 100,
      i = void 0 !== n.curveSegments ? n.curveSegments : 4,
      o = void 0 !== n.font ? n.font : "helvetiker",
      a = void 0 !== n.weight ? n.weight : "normal",
      s = void 0 !== n.style ? n.style : "normal";
     e.FontUtils.size = r, e.FontUtils.divisions = i, e.FontUtils.face = o, e.FontUtils.weight = a, e.FontUtils.style = s;
     for (var u = e.FontUtils.drawText(t), l = u.paths, c = [], h = 0, p = l.length; p > h; h++) Array.prototype.push.apply(c, l[h].toShapes());
     return c
    },
    function(t) {
     var n = 1e-10,
      r = function(t, n) {
       var r = t.length;
       if (3 > r) return null;
       var a, s, u, l = [],
        c = [],
        h = [];
       if (i(t) > 0)
        for (s = 0; r > s; s++) c[s] = s;
       else
        for (s = 0; r > s; s++) c[s] = r - 1 - s;
       var p = r,
        d = 2 * p;
       for (s = p - 1; p > 2;) {
        if (d-- <= 0) return e.warn("THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()"), n ? h : l;
        if (a = s, a >= p && (a = 0), s = a + 1, s >= p && (s = 0), u = s + 1, u >= p && (u = 0), o(t, a, s, u, p, c)) {
         var f, m, g, v, y;
         for (f = c[a], m = c[s], g = c[u], l.push([t[f], t[m], t[g]]), h.push([c[a], c[s], c[u]]), v = s, y = s + 1; p > y; v++, y++) c[v] = c[y];
         p--, d = 2 * p
        }
       }
       return n ? h : l
      },
      i = function(e) {
       for (var t = e.length, n = 0, r = t - 1, i = 0; t > i; r = i++) n += e[r].x * e[i].y - e[i].x * e[r].y;
       return .5 * n
      },
      o = function(e, t, r, i, o, a) {
       var s, u, l, c, h, p, d, f, m;
       if (u = e[a[t]].x, l = e[a[t]].y, c = e[a[r]].x, h = e[a[r]].y, p = e[a[i]].x, d = e[a[i]].y, n > (c - u) * (d - l) - (h - l) * (p - u)) return !1;
       var g, v, y, b, w, x, _, S, C, E, T, M, A, P, R;
       for (g = p - c, v = d - h, y = u - p, b = l - d, w = c - u, x = h - l, s = 0; o > s; s++)
        if (f = e[a[s]].x, m = e[a[s]].y, !(f === u && m === l || f === c && m === h || f === p && m === d) && (_ = f - u, S = m - l, C = f - c, E = m - h, T = f - p, M = m - d, R = g * E - v * C, A = w * S - x * _, P = y * M - b * T, R >= -n && P >= -n && A >= -n)) return !1;
       return !0
      };
     return t.Triangulate = r, t.Triangulate.area = i, t
    }(e.FontUtils), self._typeface_js = {
     faces: e.FontUtils.faces,
     loadFace: e.FontUtils.loadFace
    }, e.typeface_js = self._typeface_js, e.Audio = function(t) {
     e.Object3D.call(this), this.type = "Audio", this.context = t.context, this.source = this.context.createBufferSource(), this.source.onended = this.onEnded.bind(this), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.panner = this.context.createPanner(), this.panner.connect(this.gain), this.autoplay = !1, this.startTime = 0, this.isPlaying = !1
    }, e.Audio.prototype = Object.create(e.Object3D.prototype), e.Audio.prototype.constructor = e.Audio, e.Audio.prototype.load = function(e) {
     var t = this,
      n = new XMLHttpRequest;
     return n.open("GET", e, !0), n.responseType = "arraybuffer", n.onload = function() {
      t.context.decodeAudioData(this.response, function(e) {
       t.source.buffer = e, t.autoplay && t.play()
      })
     }, n.send(), this
    }, e.Audio.prototype.play = function() {
     if (this.isPlaying === !0) return e.warn("THREE.Audio: Audio is already playing."), void 0;
     var t = this.context.createBufferSource();
     t.buffer = this.source.buffer, t.loop = this.source.loop, t.onended = this.source.onended, t.connect(this.panner), t.start(0, this.startTime), this.isPlaying = !0, this.source = t
    }, e.Audio.prototype.pause = function() {
     this.source.stop(), this.startTime = this.context.currentTime
    }, e.Audio.prototype.stop = function() {
     this.source.stop(), this.startTime = 0
    }, e.Audio.prototype.onEnded = function() {
     this.isPlaying = !1
    }, e.Audio.prototype.setLoop = function(e) {
     this.source.loop = e
    }, e.Audio.prototype.setRefDistance = function(e) {
     this.panner.refDistance = e
    }, e.Audio.prototype.setRolloffFactor = function(e) {
     this.panner.rolloffFactor = e
    }, e.Audio.prototype.setVolume = function(e) {
     this.gain.gain.value = e
    }, e.Audio.prototype.updateMatrixWorld = function() {
     var t = new e.Vector3;
     return function(n) {
      e.Object3D.prototype.updateMatrixWorld.call(this, n), t.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(t.x, t.y, t.z)
     }
    }(), e.AudioListener = function() {
     e.Object3D.call(this), this.type = "AudioListener", this.context = new(window.AudioContext || window.webkitAudioContext)
    }, e.AudioListener.prototype = Object.create(e.Object3D.prototype), e.AudioListener.prototype.constructor = e.AudioListener, e.AudioListener.prototype.updateMatrixWorld = function() {
     var t = new e.Vector3,
      n = new e.Quaternion,
      r = new e.Vector3,
      i = new e.Vector3,
      o = new e.Vector3,
      a = new e.Vector3;
     return function(s) {
      e.Object3D.prototype.updateMatrixWorld.call(this, s);
      var u = this.context.listener,
       l = this.up;
      this.matrixWorld.decompose(t, n, r), i.set(0, 0, -1).applyQuaternion(n), o.subVectors(t, a), u.setPosition(t.x, t.y, t.z), u.setOrientation(i.x, i.y, i.z, l.x, l.y, l.z), u.setVelocity(o.x, o.y, o.z), a.copy(t)
     }
    }(), e.Curve = function() {}, e.Curve.prototype.getPoint = function() {
     return e.warn("THREE.Curve: Warning, getPoint() not implemented!"), null
    }, e.Curve.prototype.getPointAt = function(e) {
     var t = this.getUtoTmapping(e);
     return this.getPoint(t)
    }, e.Curve.prototype.getPoints = function(e) {
     e || (e = 5);
     var t, n = [];
     for (t = 0; e >= t; t++) n.push(this.getPoint(t / e));
     return n
    }, e.Curve.prototype.getSpacedPoints = function(e) {
     e || (e = 5);
     var t, n = [];
     for (t = 0; e >= t; t++) n.push(this.getPointAt(t / e));
     return n
    }, e.Curve.prototype.getLength = function() {
     var e = this.getLengths();
     return e[e.length - 1]
    }, e.Curve.prototype.getLengths = function(e) {
     if (e || (e = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == e + 1 && !this.needsUpdate) return this.cacheArcLengths;
     this.needsUpdate = !1;
     var t, n, r = [],
      i = this.getPoint(0),
      o = 0;
     for (r.push(0), n = 1; e >= n; n++) t = this.getPoint(n / e), o += t.distanceTo(i), r.push(o), i = t;
     return this.cacheArcLengths = r, r
    }, e.Curve.prototype.updateArcLengths = function() {
     this.needsUpdate = !0, this.getLengths()
    }, e.Curve.prototype.getUtoTmapping = function(e, t) {
     var n, r = this.getLengths(),
      i = 0,
      o = r.length;
     n = t ? t : e * r[o - 1];
     for (var a, s = 0, u = o - 1; u >= s;)
      if (i = Math.floor(s + (u - s) / 2), a = r[i] - n, 0 > a) s = i + 1;
      else {
       if (!(a > 0)) {
        u = i;
        break
       }
       u = i - 1
      } if (i = u, r[i] == n) {
      var l = i / (o - 1);
      return l
     }
     var c = r[i],
      h = r[i + 1],
      p = h - c,
      d = (n - c) / p,
      l = (i + d) / (o - 1);
     return l
    }, e.Curve.prototype.getTangent = function(e) {
     var t = 1e-4,
      n = e - t,
      r = e + t;
     0 > n && (n = 0), r > 1 && (r = 1);
     var i = this.getPoint(n),
      o = this.getPoint(r),
      a = o.clone().sub(i);
     return a.normalize()
    }, e.Curve.prototype.getTangentAt = function(e) {
     var t = this.getUtoTmapping(e);
     return this.getTangent(t)
    }, e.Curve.Utils = {
     tangentQuadraticBezier: function(e, t, n, r) {
      return 2 * (1 - e) * (n - t) + 2 * e * (r - n)
     },
     tangentCubicBezier: function(e, t, n, r, i) {
      return -3 * t * (1 - e) * (1 - e) + 3 * n * (1 - e) * (1 - e) - 6 * e * n * (1 - e) + 6 * e * r * (1 - e) - 3 * e * e * r + 3 * e * e * i
     },
     tangentSpline: function(e) {
      var t = 6 * e * e - 6 * e,
       n = 3 * e * e - 4 * e + 1,
       r = -6 * e * e + 6 * e,
       i = 3 * e * e - 2 * e;
      return t + n + r + i
     },
     interpolate: function(e, t, n, r, i) {
      var o = .5 * (n - e),
       a = .5 * (r - t),
       s = i * i,
       u = i * s;
      return (2 * t - 2 * n + o + a) * u + (-3 * t + 3 * n - 2 * o - a) * s + o * i + t
     }
    }, e.Curve.create = function(t, n) {
     return t.prototype = Object.create(e.Curve.prototype), t.prototype.constructor = t, t.prototype.getPoint = n, t
    }, e.CurvePath = function() {
     this.curves = [], this.bends = [], this.autoClose = !1
    }, e.CurvePath.prototype = Object.create(e.Curve.prototype), e.CurvePath.prototype.constructor = e.CurvePath, e.CurvePath.prototype.add = function(e) {
     this.curves.push(e)
    }, e.CurvePath.prototype.checkConnection = function() {}, e.CurvePath.prototype.closePath = function() {
     var t = this.curves[0].getPoint(0),
      n = this.curves[this.curves.length - 1].getPoint(1);
     t.equals(n) || this.curves.push(new e.LineCurve(n, t))
    }, e.CurvePath.prototype.getPoint = function(e) {
     for (var t, n, r = e * this.getLength(), i = this.getCurveLengths(), o = 0; o < i.length;) {
      if (i[o] >= r) {
       t = i[o] - r, n = this.curves[o];
       var a = 1 - t / n.getLength();
       return n.getPointAt(a)
      }
      o++
     }
     return null
    }, e.CurvePath.prototype.getLength = function() {
     var e = this.getCurveLengths();
     return e[e.length - 1]
    }, e.CurvePath.prototype.getCurveLengths = function() {
     if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
     var e, t = [],
      n = 0,
      r = this.curves.length;
     for (e = 0; r > e; e++) n += this.curves[e].getLength(), t.push(n);
     return this.cacheLengths = t, t
    }, e.CurvePath.prototype.getBoundingBox = function() {
     var t, n, r, i, o, a, s = this.getPoints();
     t = n = Number.NEGATIVE_INFINITY, i = o = Number.POSITIVE_INFINITY;
     var u, l, c, h, p = s[0] instanceof e.Vector3;
     for (h = p ? new e.Vector3 : new e.Vector2, l = 0, c = s.length; c > l; l++) u = s[l], u.x > t ? t = u.x : u.x < i && (i = u.x), u.y > n ? n = u.y : u.y < o && (o = u.y), p && (u.z > r ? r = u.z : u.z < a && (a = u.z)), h.add(u);
     var d = {
      minX: i,
      minY: o,
      maxX: t,
      maxY: n
     };
     return p && (d.maxZ = r, d.minZ = a), d
    }, e.CurvePath.prototype.createPointsGeometry = function(e) {
     var t = this.getPoints(e, !0);
     return this.createGeometry(t)
    }, e.CurvePath.prototype.createSpacedPointsGeometry = function(e) {
     var t = this.getSpacedPoints(e, !0);
     return this.createGeometry(t)
    }, e.CurvePath.prototype.createGeometry = function(t) {
     for (var n = new e.Geometry, r = 0; r < t.length; r++) n.vertices.push(new e.Vector3(t[r].x, t[r].y, t[r].z || 0));
     return n
    }, e.CurvePath.prototype.addWrapPath = function(e) {
     this.bends.push(e)
    }, e.CurvePath.prototype.getTransformedPoints = function(e, t) {
     var n, r, i = this.getPoints(e);
     for (t || (t = this.bends), n = 0, r = t.length; r > n; n++) i = this.getWrapPoints(i, t[n]);
     return i
    }, e.CurvePath.prototype.getTransformedSpacedPoints = function(e, t) {
     var n, r, i = this.getSpacedPoints(e);
     for (t || (t = this.bends), n = 0, r = t.length; r > n; n++) i = this.getWrapPoints(i, t[n]);
     return i
    }, e.CurvePath.prototype.getWrapPoints = function(e, t) {
     var n, r, i, o, a, s, u = this.getBoundingBox();
     for (n = 0, r = e.length; r > n; n++) {
      i = e[n], o = i.x, a = i.y, s = o / u.maxX, s = t.getUtoTmapping(s, o);
      var l = t.getPoint(s),
       c = t.getTangent(s);
      c.set(-c.y, c.x).multiplyScalar(a), i.x = l.x + c.x, i.y = l.y + c.y
     }
     return e
    }, e.Gyroscope = function() {
     e.Object3D.call(this)
    }, e.Gyroscope.prototype = Object.create(e.Object3D.prototype), e.Gyroscope.prototype.constructor = e.Gyroscope, e.Gyroscope.prototype.updateMatrixWorld = function() {
     var t = new e.Vector3,
      n = new e.Quaternion,
      r = new e.Vector3,
      i = new e.Vector3,
      o = new e.Quaternion,
      a = new e.Vector3;
     return function(e) {
      this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorld.decompose(i, o, a), this.matrix.decompose(t, n, r), this.matrixWorld.compose(i, n, a)) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
      for (var s = 0, u = this.children.length; u > s; s++) this.children[s].updateMatrixWorld(e)
     }
    }(), e.Path = function(t) {
     e.CurvePath.call(this), this.actions = [], t && this.fromPoints(t)
    }, e.Path.prototype = Object.create(e.CurvePath.prototype), e.Path.prototype.constructor = e.Path, e.PathActions = {
     MOVE_TO: "moveTo",
     LINE_TO: "lineTo",
     QUADRATIC_CURVE_TO: "quadraticCurveTo",
     BEZIER_CURVE_TO: "bezierCurveTo",
     CSPLINE_THRU: "splineThru",
     ARC: "arc",
     ELLIPSE: "ellipse"
    }, e.Path.prototype.fromPoints = function(e) {
     this.moveTo(e[0].x, e[0].y);
     for (var t = 1, n = e.length; n > t; t++) this.lineTo(e[t].x, e[t].y)
    }, e.Path.prototype.moveTo = function() {
     var t = Array.prototype.slice.call(arguments);
     this.actions.push({
      action: e.PathActions.MOVE_TO,
      args: t
     })
    }, e.Path.prototype.lineTo = function(t, n) {
     var r = Array.prototype.slice.call(arguments),
      i = this.actions[this.actions.length - 1].args,
      o = i[i.length - 2],
      a = i[i.length - 1],
      s = new e.LineCurve(new e.Vector2(o, a), new e.Vector2(t, n));
     this.curves.push(s), this.actions.push({
      action: e.PathActions.LINE_TO,
      args: r
     })
    }, e.Path.prototype.quadraticCurveTo = function(t, n, r, i) {
     var o = Array.prototype.slice.call(arguments),
      a = this.actions[this.actions.length - 1].args,
      s = a[a.length - 2],
      u = a[a.length - 1],
      l = new e.QuadraticBezierCurve(new e.Vector2(s, u), new e.Vector2(t, n), new e.Vector2(r, i));
     this.curves.push(l), this.actions.push({
      action: e.PathActions.QUADRATIC_CURVE_TO,
      args: o
     })
    }, e.Path.prototype.bezierCurveTo = function(t, n, r, i, o, a) {
     var s = Array.prototype.slice.call(arguments),
      u = this.actions[this.actions.length - 1].args,
      l = u[u.length - 2],
      c = u[u.length - 1],
      h = new e.CubicBezierCurve(new e.Vector2(l, c), new e.Vector2(t, n), new e.Vector2(r, i), new e.Vector2(o, a));
     this.curves.push(h), this.actions.push({
      action: e.PathActions.BEZIER_CURVE_TO,
      args: s
     })
    }, e.Path.prototype.splineThru = function(t) {
     var n = Array.prototype.slice.call(arguments),
      r = this.actions[this.actions.length - 1].args,
      i = r[r.length - 2],
      o = r[r.length - 1],
      a = [new e.Vector2(i, o)];
     Array.prototype.push.apply(a, t);
     var s = new e.SplineCurve(a);
     this.curves.push(s), this.actions.push({
      action: e.PathActions.CSPLINE_THRU,
      args: n
     })
    }, e.Path.prototype.arc = function(e, t, n, r, i, o) {
     var a = this.actions[this.actions.length - 1].args,
      s = a[a.length - 2],
      u = a[a.length - 1];
     this.absarc(e + s, t + u, n, r, i, o)
    }, e.Path.prototype.absarc = function(e, t, n, r, i, o) {
     this.absellipse(e, t, n, n, r, i, o)
    }, e.Path.prototype.ellipse = function(e, t, n, r, i, o, a) {
     var s = this.actions[this.actions.length - 1].args,
      u = s[s.length - 2],
      l = s[s.length - 1];
     this.absellipse(e + u, t + l, n, r, i, o, a)
    }, e.Path.prototype.absellipse = function(t, n, r, i, o, a, s) {
     var u = Array.prototype.slice.call(arguments),
      l = new e.EllipseCurve(t, n, r, i, o, a, s);
     this.curves.push(l);
     var c = l.getPoint(1);
     u.push(c.x), u.push(c.y), this.actions.push({
      action: e.PathActions.ELLIPSE,
      args: u
     })
    }, e.Path.prototype.getSpacedPoints = function(e) {
     e || (e = 40);
     for (var t = [], n = 0; e > n; n++) t.push(this.getPoint(n / e));
     return t
    }, e.Path.prototype.getPoints = function(t, n) {
     if (this.useSpacedPoints) return console.log("tata"), this.getSpacedPoints(t, n);
     t = t || 12;
     var r, i, o, a, s, u, l, c, h, p, d, f, m, g, v, y, b, w, x = [];
     for (r = 0, i = this.actions.length; i > r; r++) switch (o = this.actions[r], a = o.action, s = o.args, a) {
      case e.PathActions.MOVE_TO:
       x.push(new e.Vector2(s[0], s[1]));
       break;
      case e.PathActions.LINE_TO:
       x.push(new e.Vector2(s[0], s[1]));
       break;
      case e.PathActions.QUADRATIC_CURVE_TO:
       for (u = s[2], l = s[3], p = s[0], d = s[1], x.length > 0 ? (g = x[x.length - 1], f = g.x, m = g.y) : (g = this.actions[r - 1].args, f = g[g.length - 2], m = g[g.length - 1]), v = 1; t >= v; v++) y = v / t, b = e.Shape.Utils.b2(y, f, p, u), w = e.Shape.Utils.b2(y, m, d, l), x.push(new e.Vector2(b, w));
       break;
      case e.PathActions.BEZIER_CURVE_TO:
       for (u = s[4], l = s[5], p = s[0], d = s[1], c = s[2], h = s[3], x.length > 0 ? (g = x[x.length - 1], f = g.x, m = g.y) : (g = this.actions[r - 1].args, f = g[g.length - 2], m = g[g.length - 1]), v = 1; t >= v; v++) y = v / t, b = e.Shape.Utils.b3(y, f, p, c, u), w = e.Shape.Utils.b3(y, m, d, h, l), x.push(new e.Vector2(b, w));
       break;
      case e.PathActions.CSPLINE_THRU:
       g = this.actions[r - 1].args;
       var _ = new e.Vector2(g[g.length - 2], g[g.length - 1]),
        S = [_],
        C = t * s[0].length;
       S = S.concat(s[0]);
       var E = new e.SplineCurve(S);
       for (v = 1; C >= v; v++) x.push(E.getPointAt(v / C));
       break;
      case e.PathActions.ARC:
       var T, M = s[0],
        A = s[1],
        P = s[2],
        R = s[3],
        I = s[4],
        k = !!s[5],
        D = I - R,
        V = 2 * t;
       for (v = 1; V >= v; v++) y = v / V, k || (y = 1 - y), T = R + y * D, b = M + P * Math.cos(T), w = A + P * Math.sin(T), x.push(new e.Vector2(b, w));
       break;
      case e.PathActions.ELLIPSE:
       var T, M = s[0],
        A = s[1],
        L = s[2],
        B = s[3],
        R = s[4],
        I = s[5],
        k = !!s[6],
        D = I - R,
        V = 2 * t;
       for (v = 1; V >= v; v++) y = v / V, k || (y = 1 - y), T = R + y * D, b = M + L * Math.cos(T), w = A + B * Math.sin(T), x.push(new e.Vector2(b, w))
     }
     var O = x[x.length - 1],
      N = 1e-10;
     return Math.abs(O.x - x[0].x) < N && Math.abs(O.y - x[0].y) < N && x.splice(x.length - 1, 1), n && x.push(x[0]), x
    }, e.Path.prototype.toShapes = function(t, n) {
     function r(t) {
      var n, r, i, o, a, s = [],
       u = new e.Path;
      for (n = 0, r = t.length; r > n; n++) i = t[n], a = i.args, o = i.action, o == e.PathActions.MOVE_TO && 0 != u.actions.length && (s.push(u), u = new e.Path), u[o].apply(u, a);
      return 0 != u.actions.length && s.push(u), s
     }

     function i(t) {
      for (var n = [], r = 0, i = t.length; i > r; r++) {
       var o = t[r],
        a = new e.Shape;
       a.actions = o.actions, a.curves = o.curves, n.push(a)
      }
      return n
     }

     function o(e, t) {
      for (var n = 1e-10, r = t.length, i = !1, o = r - 1, a = 0; r > a; o = a++) {
       var s = t[o],
        u = t[a],
        l = u.x - s.x,
        c = u.y - s.y;
       if (Math.abs(c) > n) {
        if (0 > c && (s = t[a], l = -l, u = t[o], c = -c), e.y < s.y || e.y > u.y) continue;
        if (e.y == s.y) {
         if (e.x == s.x) return !0
        } else {
         var h = c * (e.x - s.x) - l * (e.y - s.y);
         if (0 == h) return !0;
         if (0 > h) continue;
         i = !i
        }
       } else {
        if (e.y != s.y) continue;
        if (u.x <= e.x && e.x <= s.x || s.x <= e.x && e.x <= u.x) return !0
       }
      }
      return i
     }
     var a = r(this.actions);
     if (0 == a.length) return [];
     if (n === !0) return i(a);
     var s, u, l, c = [];
     if (1 == a.length) return u = a[0], l = new e.Shape, l.actions = u.actions, l.curves = u.curves, c.push(l), c;
     var h = !e.Shape.Utils.isClockWise(a[0].getPoints());
     h = t ? !h : h;
     var p, d = [],
      f = [],
      m = [],
      g = 0;
     f[g] = void 0, m[g] = [];
     var v, y;
     for (v = 0, y = a.length; y > v; v++) u = a[v], p = u.getPoints(), s = e.Shape.Utils.isClockWise(p), s = t ? !s : s, s ? (!h && f[g] && g++, f[g] = {
      s: new e.Shape,
      p: p
     }, f[g].s.actions = u.actions, f[g].s.curves = u.curves, h && g++, m[g] = []) : m[g].push({
      h: u,
      p: p[0]
     });
     if (!f[0]) return i(a);
     if (f.length > 1) {
      for (var b = !1, w = [], x = 0, _ = f.length; _ > x; x++) d[x] = [];
      for (var x = 0, _ = f.length; _ > x; x++)
       for (var S = m[x], C = 0; C < S.length; C++) {
        for (var E = S[C], T = !0, M = 0; M < f.length; M++) o(E.p, f[M].p) && (x != M && w.push({
         froms: x,
         tos: M,
         hole: C
        }), T ? (T = !1, d[M].push(E)) : b = !0);
        T && d[x].push(E)
       }
      w.length > 0 && (b || (m = d))
     }
     var A, P, R;
     for (v = 0, y = f.length; y > v; v++)
      for (l = f[v].s, c.push(l), A = m[v], P = 0, R = A.length; R > P; P++) l.holes.push(A[P].h);
     return c
    }, e.Shape = function() {
     e.Path.apply(this, arguments), this.holes = []
    }, e.Shape.prototype = Object.create(e.Path.prototype), e.Shape.prototype.constructor = e.Shape, e.Shape.prototype.extrude = function(t) {
     var n = new e.ExtrudeGeometry(this, t);
     return n
    }, e.Shape.prototype.makeGeometry = function(t) {
     var n = new e.ShapeGeometry(this, t);
     return n
    }, e.Shape.prototype.getPointsHoles = function(e) {
     var t, n = this.holes.length,
      r = [];
     for (t = 0; n > t; t++) r[t] = this.holes[t].getTransformedPoints(e, this.bends);
     return r
    }, e.Shape.prototype.getSpacedPointsHoles = function(e) {
     var t, n = this.holes.length,
      r = [];
     for (t = 0; n > t; t++) r[t] = this.holes[t].getTransformedSpacedPoints(e, this.bends);
     return r
    }, e.Shape.prototype.extractAllPoints = function(e) {
     return {
      shape: this.getTransformedPoints(e),
      holes: this.getPointsHoles(e)
     }
    }, e.Shape.prototype.extractPoints = function(e) {
     return this.useSpacedPoints ? this.extractAllSpacedPoints(e) : this.extractAllPoints(e)
    }, e.Shape.prototype.extractAllSpacedPoints = function(e) {
     return {
      shape: this.getTransformedSpacedPoints(e),
      holes: this.getSpacedPointsHoles(e)
     }
    }, e.Shape.Utils = {
     triangulateShape: function(t, n) {
      function r(e, t, n) {
       return e.x != t.x ? e.x < t.x ? e.x <= n.x && n.x <= t.x : t.x <= n.x && n.x <= e.x : e.y < t.y ? e.y <= n.y && n.y <= t.y : t.y <= n.y && n.y <= e.y
      }

      function i(e, t, n, i, o) {
       var a = 1e-10,
        s = t.x - e.x,
        u = t.y - e.y,
        l = i.x - n.x,
        c = i.y - n.y,
        h = e.x - n.x,
        p = e.y - n.y,
        d = u * l - s * c,
        f = u * h - s * p;
       if (Math.abs(d) > a) {
        var m;
        if (d > 0) {
         if (0 > f || f > d) return [];
         if (m = c * h - l * p, 0 > m || m > d) return []
        } else {
         if (f > 0 || d > f) return [];
         if (m = c * h - l * p, m > 0 || d > m) return []
        }
        if (0 == m) return !o || 0 != f && f != d ? [e] : [];
        if (m == d) return !o || 0 != f && f != d ? [t] : [];
        if (0 == f) return [n];
        if (f == d) return [i];
        var g = m / d;
        return [{
         x: e.x + g * s,
         y: e.y + g * u
        }]
       }
       if (0 != f || c * h != l * p) return [];
       var v = 0 == s && 0 == u,
        y = 0 == l && 0 == c;
       if (v && y) return e.x != n.x || e.y != n.y ? [] : [e];
       if (v) return r(n, i, e) ? [e] : [];
       if (y) return r(e, t, n) ? [n] : [];
       var b, w, x, _, S, C, E, T;
       return 0 != s ? (e.x < t.x ? (b = e, x = e.x, w = t, _ = t.x) : (b = t, x = t.x, w = e, _ = e.x), n.x < i.x ? (S = n, E = n.x, C = i, T = i.x) : (S = i, E = i.x, C = n, T = n.x)) : (e.y < t.y ? (b = e, x = e.y, w = t, _ = t.y) : (b = t, x = t.y, w = e, _ = e.y), n.y < i.y ? (S = n, E = n.y, C = i, T = i.y) : (S = i, E = i.y, C = n, T = n.y)), E >= x ? E > _ ? [] : _ == E ? o ? [] : [S] : T >= _ ? [S, w] : [S, C] : x > T ? [] : x == T ? o ? [] : [b] : T >= _ ? [b, w] : [b, C]
      }

      function o(e, t, n, r) {
       var i = 1e-10,
        o = t.x - e.x,
        a = t.y - e.y,
        s = n.x - e.x,
        u = n.y - e.y,
        l = r.x - e.x,
        c = r.y - e.y,
        h = o * u - a * s,
        p = o * c - a * l;
       if (Math.abs(h) > i) {
        var d = l * u - c * s;
        return h > 0 ? p >= 0 && d >= 0 : p >= 0 || d >= 0
       }
       return p > 0
      }

      function a(e, t) {
       function n(e, t) {
        var n = y.length - 1,
         r = e - 1;
        0 > r && (r = n);
        var i = e + 1;
        i > n && (i = 0);
        var a = o(y[e], y[r], y[i], s[t]);
        if (!a) return !1;
        var u = s.length - 1,
         l = t - 1;
        0 > l && (l = u);
        var c = t + 1;
        return c > u && (c = 0), a = o(s[t], s[l], s[c], y[e]), a ? !0 : !1
       }

       function r(e, t) {
        var n, r, o;
        for (n = 0; n < y.length; n++)
         if (r = n + 1, r %= y.length, o = i(e, t, y[n], y[r], !0), o.length > 0) return !0;
        return !1
       }

       function a(e, n) {
        var r, o, a, s, u;
        for (r = 0; r < b.length; r++)
         for (o = t[b[r]], a = 0; a < o.length; a++)
          if (s = a + 1, s %= o.length, u = i(e, n, o[a], o[s], !0), u.length > 0) return !0;
        return !1
       }
       for (var s, u, l, c, h, p, d, f, m, g, v, y = e.concat(), b = [], w = [], x = 0, _ = t.length; _ > x; x++) b.push(x);
       for (var S = 0, C = 2 * b.length; b.length > 0;) {
        if (C--, 0 > C) {
         console.log("Infinite Loop! Holes left:" + b.length + ", Probably Hole outside Shape!");
         break
        }
        for (l = S; l < y.length; l++) {
         c = y[l], u = -1;
         for (var x = 0; x < b.length; x++)
          if (p = b[x], d = c.x + ":" + c.y + ":" + p, void 0 === w[d]) {
           s = t[p];
           for (var E = 0; E < s.length; E++)
            if (h = s[E], n(l, E) && !r(c, h) && !a(c, h)) {
             u = E, b.splice(x, 1), f = y.slice(0, l + 1), m = y.slice(l), g = s.slice(u), v = s.slice(0, u + 1), y = f.concat(g).concat(v).concat(m), S = l;
             break
            } if (u >= 0) break;
           w[d] = !0
          } if (u >= 0) break
        }
       }
       return y
      }
      for (var s, u, l, c, h, p, d = {}, f = t.concat(), m = 0, g = n.length; g > m; m++) Array.prototype.push.apply(f, n[m]);
      for (s = 0, u = f.length; u > s; s++) h = f[s].x + ":" + f[s].y, void 0 !== d[h] && e.warn("THREE.Shape: Duplicate point", h), d[h] = s;
      var v = a(t, n),
       y = e.FontUtils.Triangulate(v, !1);
      for (s = 0, u = y.length; u > s; s++)
       for (c = y[s], l = 0; 3 > l; l++) h = c[l].x + ":" + c[l].y, p = d[h], void 0 !== p && (c[l] = p);
      return y.concat()
     },
     isClockWise: function(t) {
      return e.FontUtils.Triangulate.area(t) < 0
     },
     b2p0: function(e, t) {
      var n = 1 - e;
      return n * n * t
     },
     b2p1: function(e, t) {
      return 2 * (1 - e) * e * t
     },
     b2p2: function(e, t) {
      return e * e * t
     },
     b2: function(e, t, n, r) {
      return this.b2p0(e, t) + this.b2p1(e, n) + this.b2p2(e, r)
     },
     b3p0: function(e, t) {
      var n = 1 - e;
      return n * n * n * t
     },
     b3p1: function(e, t) {
      var n = 1 - e;
      return 3 * n * n * e * t
     },
     b3p2: function(e, t) {
      var n = 1 - e;
      return 3 * n * e * e * t
     },
     b3p3: function(e, t) {
      return e * e * e * t
     },
     b3: function(e, t, n, r, i) {
      return this.b3p0(e, t) + this.b3p1(e, n) + this.b3p2(e, r) + this.b3p3(e, i)
     }
    }, e.LineCurve = function(e, t) {
     this.v1 = e, this.v2 = t
    }, e.LineCurve.prototype = Object.create(e.Curve.prototype), e.LineCurve.prototype.constructor = e.LineCurve, e.LineCurve.prototype.getPoint = function(e) {
     var t = this.v2.clone().sub(this.v1);
     return t.multiplyScalar(e).add(this.v1), t
    }, e.LineCurve.prototype.getPointAt = function(e) {
     return this.getPoint(e)
    }, e.LineCurve.prototype.getTangent = function() {
     var e = this.v2.clone().sub(this.v1);
     return e.normalize()
    }, e.QuadraticBezierCurve = function(e, t, n) {
     this.v0 = e, this.v1 = t, this.v2 = n
    }, e.QuadraticBezierCurve.prototype = Object.create(e.Curve.prototype), e.QuadraticBezierCurve.prototype.constructor = e.QuadraticBezierCurve, e.QuadraticBezierCurve.prototype.getPoint = function(t) {
     var n = new e.Vector2;
     return n.x = e.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x), n.y = e.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y), n
    }, e.QuadraticBezierCurve.prototype.getTangent = function(t) {
     var n = new e.Vector2;
     return n.x = e.Curve.Utils.tangentQuadraticBezier(t, this.v0.x, this.v1.x, this.v2.x), n.y = e.Curve.Utils.tangentQuadraticBezier(t, this.v0.y, this.v1.y, this.v2.y), n.normalize()
    }, e.CubicBezierCurve = function(e, t, n, r) {
     this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = r
    }, e.CubicBezierCurve.prototype = Object.create(e.Curve.prototype), e.CubicBezierCurve.prototype.constructor = e.CubicBezierCurve, e.CubicBezierCurve.prototype.getPoint = function(t) {
     var n, r;
     return n = e.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x), r = e.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new e.Vector2(n, r)
    }, e.CubicBezierCurve.prototype.getTangent = function(t) {
     var n, r;
     n = e.Curve.Utils.tangentCubicBezier(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x), r = e.Curve.Utils.tangentCubicBezier(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
     var i = new e.Vector2(n, r);
     return i.normalize(), i
    }, e.SplineCurve = function(e) {
     this.points = void 0 == e ? [] : e
    }, e.SplineCurve.prototype = Object.create(e.Curve.prototype), e.SplineCurve.prototype.constructor = e.SplineCurve, e.SplineCurve.prototype.getPoint = function(t) {
     var n = this.points,
      r = (n.length - 1) * t,
      i = Math.floor(r),
      o = r - i,
      a = n[0 == i ? i : i - 1],
      s = n[i],
      u = n[i > n.length - 2 ? n.length - 1 : i + 1],
      l = n[i > n.length - 3 ? n.length - 1 : i + 2],
      c = new e.Vector2;
     return c.x = e.Curve.Utils.interpolate(a.x, s.x, u.x, l.x, o), c.y = e.Curve.Utils.interpolate(a.y, s.y, u.y, l.y, o), c
    }, e.EllipseCurve = function(e, t, n, r, i, o, a) {
     this.aX = e, this.aY = t, this.xRadius = n, this.yRadius = r, this.aStartAngle = i, this.aEndAngle = o, this.aClockwise = a
    }, e.EllipseCurve.prototype = Object.create(e.Curve.prototype), e.EllipseCurve.prototype.constructor = e.EllipseCurve, e.EllipseCurve.prototype.getPoint = function(t) {
     var n = this.aEndAngle - this.aStartAngle;
     0 > n && (n += 2 * Math.PI), n > 2 * Math.PI && (n -= 2 * Math.PI);
     var r;
     r = this.aClockwise === !0 ? this.aEndAngle + (1 - t) * (2 * Math.PI - n) : this.aStartAngle + t * n;
     var i = new e.Vector2;
     return i.x = this.aX + this.xRadius * Math.cos(r), i.y = this.aY + this.yRadius * Math.sin(r), i
    }, e.ArcCurve = function(t, n, r, i, o, a) {
     e.EllipseCurve.call(this, t, n, r, r, i, o, a)
    }, e.ArcCurve.prototype = Object.create(e.EllipseCurve.prototype), e.ArcCurve.prototype.constructor = e.ArcCurve, e.LineCurve3 = e.Curve.create(function(e, t) {
     this.v1 = e, this.v2 = t
    }, function(t) {
     var n = new e.Vector3;
     return n.subVectors(this.v2, this.v1), n.multiplyScalar(t), n.add(this.v1), n
    }), e.QuadraticBezierCurve3 = e.Curve.create(function(e, t, n) {
     this.v0 = e, this.v1 = t, this.v2 = n
    }, function(t) {
     var n = new e.Vector3;
     return n.x = e.Shape.Utils.b2(t, this.v0.x, this.v1.x, this.v2.x), n.y = e.Shape.Utils.b2(t, this.v0.y, this.v1.y, this.v2.y), n.z = e.Shape.Utils.b2(t, this.v0.z, this.v1.z, this.v2.z), n
    }), e.CubicBezierCurve3 = e.Curve.create(function(e, t, n, r) {
     this.v0 = e, this.v1 = t, this.v2 = n, this.v3 = r
    }, function(t) {
     var n = new e.Vector3;
     return n.x = e.Shape.Utils.b3(t, this.v0.x, this.v1.x, this.v2.x, this.v3.x), n.y = e.Shape.Utils.b3(t, this.v0.y, this.v1.y, this.v2.y, this.v3.y), n.z = e.Shape.Utils.b3(t, this.v0.z, this.v1.z, this.v2.z, this.v3.z), n
    }), e.SplineCurve3 = e.Curve.create(function(e) {
     this.points = void 0 == e ? [] : e
    }, function(t) {
     var n = this.points,
      r = (n.length - 1) * t,
      i = Math.floor(r),
      o = r - i,
      a = n[0 == i ? i : i - 1],
      s = n[i],
      u = n[i > n.length - 2 ? n.length - 1 : i + 1],
      l = n[i > n.length - 3 ? n.length - 1 : i + 2],
      c = new e.Vector3;
     return c.x = e.Curve.Utils.interpolate(a.x, s.x, u.x, l.x, o), c.y = e.Curve.Utils.interpolate(a.y, s.y, u.y, l.y, o), c.z = e.Curve.Utils.interpolate(a.z, s.z, u.z, l.z, o), c
    }), e.ClosedSplineCurve3 = e.Curve.create(function(e) {
     this.points = void 0 == e ? [] : e
    }, function(t) {
     var n = this.points,
      r = (n.length - 0) * t,
      i = Math.floor(r),
      o = r - i;
     i += i > 0 ? 0 : (Math.floor(Math.abs(i) / n.length) + 1) * n.length;
     var a = n[(i - 1) % n.length],
      s = n[i % n.length],
      u = n[(i + 1) % n.length],
      l = n[(i + 2) % n.length],
      c = new e.Vector3;
     return c.x = e.Curve.Utils.interpolate(a.x, s.x, u.x, l.x, o), c.y = e.Curve.Utils.interpolate(a.y, s.y, u.y, l.y, o), c.z = e.Curve.Utils.interpolate(a.z, s.z, u.z, l.z, o), c
    }), e.AnimationHandler = {
     LINEAR: 0,
     CATMULLROM: 1,
     CATMULLROM_FORWARD: 2,
     add: function() {
      e.warn("THREE.AnimationHandler.add() has been deprecated.")
     },
     get: function() {
      e.warn("THREE.AnimationHandler.get() has been deprecated.")
     },
     remove: function() {
      e.warn("THREE.AnimationHandler.remove() has been deprecated.")
     },
     animations: [],
     init: function(t) {
      if (t.initialized === !0) return t;
      for (var n = 0; n < t.hierarchy.length; n++) {
       for (var r = 0; r < t.hierarchy[n].keys.length; r++)
        if (t.hierarchy[n].keys[r].time < 0 && (t.hierarchy[n].keys[r].time = 0), void 0 !== t.hierarchy[n].keys[r].rot && !(t.hierarchy[n].keys[r].rot instanceof e.Quaternion)) {
         var i = t.hierarchy[n].keys[r].rot;
         t.hierarchy[n].keys[r].rot = (new e.Quaternion).fromArray(i)
        } if (t.hierarchy[n].keys.length && void 0 !== t.hierarchy[n].keys[0].morphTargets) {
        for (var o = {}, r = 0; r < t.hierarchy[n].keys.length; r++)
         for (var a = 0; a < t.hierarchy[n].keys[r].morphTargets.length; a++) {
          var s = t.hierarchy[n].keys[r].morphTargets[a];
          o[s] = -1
         }
        t.hierarchy[n].usedMorphTargets = o;
        for (var r = 0; r < t.hierarchy[n].keys.length; r++) {
         var u = {};
         for (var s in o) {
          for (var a = 0; a < t.hierarchy[n].keys[r].morphTargets.length; a++)
           if (t.hierarchy[n].keys[r].morphTargets[a] === s) {
            u[s] = t.hierarchy[n].keys[r].morphTargetsInfluences[a];
            break
           } a === t.hierarchy[n].keys[r].morphTargets.length && (u[s] = 0)
         }
         t.hierarchy[n].keys[r].morphTargetsInfluences = u
        }
       }
       for (var r = 1; r < t.hierarchy[n].keys.length; r++) t.hierarchy[n].keys[r].time === t.hierarchy[n].keys[r - 1].time && (t.hierarchy[n].keys.splice(r, 1), r--);
       for (var r = 0; r < t.hierarchy[n].keys.length; r++) t.hierarchy[n].keys[r].index = r
      }
      return t.initialized = !0, t
     },
     parse: function(t) {
      var n = function(e, t) {
        t.push(e);
        for (var r = 0; r < e.children.length; r++) n(e.children[r], t)
       },
       r = [];
      if (t instanceof e.SkinnedMesh)
       for (var i = 0; i < t.skeleton.bones.length; i++) r.push(t.skeleton.bones[i]);
      else n(t, r);
      return r
     },
     play: function(e) {
      -1 === this.animations.indexOf(e) && this.animations.push(e)
     },
     stop: function(e) {
      var t = this.animations.indexOf(e); - 1 !== t && this.animations.splice(t, 1)
     },
     update: function(e) {
      for (var t = 0; t < this.animations.length; t++) this.animations[t].resetBlendWeights();
      for (var t = 0; t < this.animations.length; t++) this.animations[t].update(e)
     }
    }, e.Animation = function(t, n) {
     this.root = t, this.data = e.AnimationHandler.init(n), this.hierarchy = e.AnimationHandler.parse(t), this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.loop = !0, this.weight = 0, this.interpolationType = e.AnimationHandler.LINEAR
    }, e.Animation.prototype = {
     constructor: e.Animation,
     keyTypes: ["pos", "rot", "scl"],
     play: function(t, n) {
      this.currentTime = void 0 !== t ? t : 0, this.weight = void 0 !== n ? n : 1, this.isPlaying = !0, this.reset(), e.AnimationHandler.play(this)
     },
     stop: function() {
      this.isPlaying = !1, e.AnimationHandler.stop(this)
     },
     reset: function() {
      for (var e = 0, t = this.hierarchy.length; t > e; e++) {
       var n = this.hierarchy[e];
       void 0 === n.animationCache && (n.animationCache = {
        animations: {},
        blending: {
         positionWeight: 0,
         quaternionWeight: 0,
         scaleWeight: 0
        }
       });
       var r = this.data.name,
        i = n.animationCache.animations,
        o = i[r];
       void 0 === o && (o = {
        prevKey: {
         pos: 0,
         rot: 0,
         scl: 0
        },
        nextKey: {
         pos: 0,
         rot: 0,
         scl: 0
        },
        originalMatrix: n.matrix
       }, i[r] = o);
       for (var a = 0; 3 > a; a++) {
        for (var s = this.keyTypes[a], u = this.data.hierarchy[e].keys[0], l = this.getNextKeyWith(s, e, 1); l.time < this.currentTime && l.index > u.index;) u = l, l = this.getNextKeyWith(s, e, l.index + 1);
        o.prevKey[s] = u, o.nextKey[s] = l
       }
      }
     },
     resetBlendWeights: function() {
      for (var e = 0, t = this.hierarchy.length; t > e; e++) {
       var n = this.hierarchy[e],
        r = n.animationCache;
       if (void 0 !== r) {
        var i = r.blending;
        i.positionWeight = 0, i.quaternionWeight = 0, i.scaleWeight = 0
       }
      }
     },
     update: function() {
      var t = [],
       n = new e.Vector3,
       r = new e.Vector3,
       i = new e.Quaternion,
       o = function(e, t) {
        var n, r, i, o, s, u, l, c, h, p = [],
         d = [];
        return n = (e.length - 1) * t, r = Math.floor(n), i = n - r, p[0] = 0 === r ? r : r - 1, p[1] = r, p[2] = r > e.length - 2 ? r : r + 1, p[3] = r > e.length - 3 ? r : r + 2, u = e[p[0]], l = e[p[1]], c = e[p[2]], h = e[p[3]], o = i * i, s = i * o, d[0] = a(u[0], l[0], c[0], h[0], i, o, s), d[1] = a(u[1], l[1], c[1], h[1], i, o, s), d[2] = a(u[2], l[2], c[2], h[2], i, o, s), d
       },
       a = function(e, t, n, r, i, o, a) {
        var s = .5 * (n - e),
         u = .5 * (r - t);
        return (2 * (t - n) + s + u) * a + (-3 * (t - n) - 2 * s - u) * o + s * i + t
       };
      return function(a) {
       if (this.isPlaying !== !1 && (this.currentTime += a * this.timeScale, 0 !== this.weight)) {
        var s = this.data.length;
        (this.currentTime > s || this.currentTime < 0) && (this.loop ? (this.currentTime %= s, this.currentTime < 0 && (this.currentTime += s), this.reset()) : this.stop());
        for (var u = 0, l = this.hierarchy.length; l > u; u++)
         for (var c = this.hierarchy[u], h = c.animationCache.animations[this.data.name], p = c.animationCache.blending, d = 0; 3 > d; d++) {
          var f = this.keyTypes[d],
           m = h.prevKey[f],
           g = h.nextKey[f];
          if (this.timeScale > 0 && g.time <= this.currentTime || this.timeScale < 0 && m.time >= this.currentTime) {
           for (m = this.data.hierarchy[u].keys[0], g = this.getNextKeyWith(f, u, 1); g.time < this.currentTime && g.index > m.index;) m = g, g = this.getNextKeyWith(f, u, g.index + 1);
           h.prevKey[f] = m, h.nextKey[f] = g
          }
          var v = (this.currentTime - m.time) / (g.time - m.time),
           y = m[f],
           b = g[f];
          if (0 > v && (v = 0), v > 1 && (v = 1), "pos" === f) {
           if (this.interpolationType === e.AnimationHandler.LINEAR) {
            r.x = y[0] + (b[0] - y[0]) * v, r.y = y[1] + (b[1] - y[1]) * v, r.z = y[2] + (b[2] - y[2]) * v;
            var w = this.weight / (this.weight + p.positionWeight);
            c.position.lerp(r, w), p.positionWeight += this.weight
           } else if (this.interpolationType === e.AnimationHandler.CATMULLROM || this.interpolationType === e.AnimationHandler.CATMULLROM_FORWARD) {
            t[0] = this.getPrevKeyWith("pos", u, m.index - 1).pos, t[1] = y, t[2] = b, t[3] = this.getNextKeyWith("pos", u, g.index + 1).pos, v = .33 * v + .33;
            var x = o(t, v),
             w = this.weight / (this.weight + p.positionWeight);
            p.positionWeight += this.weight;
            var _ = c.position;
            if (_.x = _.x + (x[0] - _.x) * w, _.y = _.y + (x[1] - _.y) * w, _.z = _.z + (x[2] - _.z) * w, this.interpolationType === e.AnimationHandler.CATMULLROM_FORWARD) {
             var S = o(t, 1.01 * v);
             n.set(S[0], S[1], S[2]), n.sub(_), n.y = 0, n.normalize();
             var C = Math.atan2(n.x, n.z);
             c.rotation.set(0, C, 0)
            }
           }
          } else if ("rot" === f)
           if (e.Quaternion.slerp(y, b, i, v), 0 === p.quaternionWeight) c.quaternion.copy(i), p.quaternionWeight = this.weight;
           else {
            var w = this.weight / (this.weight + p.quaternionWeight);
            e.Quaternion.slerp(c.quaternion, i, c.quaternion, w), p.quaternionWeight += this.weight
           }
          else if ("scl" === f) {
           r.x = y[0] + (b[0] - y[0]) * v, r.y = y[1] + (b[1] - y[1]) * v, r.z = y[2] + (b[2] - y[2]) * v;
           var w = this.weight / (this.weight + p.scaleWeight);
           c.scale.lerp(r, w), p.scaleWeight += this.weight
          }
         }
        return !0
       }
      }
     }(),
     getNextKeyWith: function(t, n, r) {
      var i = this.data.hierarchy[n].keys;
      for (this.interpolationType === e.AnimationHandler.CATMULLROM || this.interpolationType === e.AnimationHandler.CATMULLROM_FORWARD ? r = r < i.length - 1 ? r : i.length - 1 : r %= i.length; r < i.length; r++)
       if (void 0 !== i[r][t]) return i[r];
      return this.data.hierarchy[n].keys[0]
     },
     getPrevKeyWith: function(t, n, r) {
      var i = this.data.hierarchy[n].keys;
      for (r = this.interpolationType === e.AnimationHandler.CATMULLROM || this.interpolationType === e.AnimationHandler.CATMULLROM_FORWARD ? r > 0 ? r : 0 : r >= 0 ? r : r + i.length; r >= 0; r--)
       if (void 0 !== i[r][t]) return i[r];
      return this.data.hierarchy[n].keys[i.length - 1]
     }
    }, e.KeyFrameAnimation = function(t) {
     this.root = t.node, this.data = e.AnimationHandler.init(t), this.hierarchy = e.AnimationHandler.parse(this.root), this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.isPaused = !0, this.loop = !0;
     for (var n = 0, r = this.hierarchy.length; r > n; n++) {
      var i = this.data.hierarchy[n].keys,
       o = this.data.hierarchy[n].sids,
       a = this.hierarchy[n];
      if (i.length && o) {
       for (var s = 0; s < o.length; s++) {
        var u = o[s],
         l = this.getNextKeyWith(u, n, 0);
        l && l.apply(u)
       }
       a.matrixAutoUpdate = !1, this.data.hierarchy[n].node.updateMatrix(), a.matrixWorldNeedsUpdate = !0
      }
     }
    }, e.KeyFrameAnimation.prototype = {
     constructor: e.KeyFrameAnimation,
     play: function(t) {
      if (this.currentTime = void 0 !== t ? t : 0, this.isPlaying === !1) {
       this.isPlaying = !0;
       var n, r, i, o = this.hierarchy.length;
       for (n = 0; o > n; n++) {
        r = this.hierarchy[n], i = this.data.hierarchy[n], void 0 === i.animationCache && (i.animationCache = {}, i.animationCache.prevKey = null, i.animationCache.nextKey = null, i.animationCache.originalMatrix = r.matrix);
        var a = this.data.hierarchy[n].keys;
        a.length && (i.animationCache.prevKey = a[0], i.animationCache.nextKey = a[1], this.startTime = Math.min(a[0].time, this.startTime), this.endTime = Math.max(a[a.length - 1].time, this.endTime))
       }
       this.update(0)
      }
      this.isPaused = !1, e.AnimationHandler.play(this)
     },
     stop: function() {
      this.isPlaying = !1, this.isPaused = !1, e.AnimationHandler.stop(this);
      for (var t = 0; t < this.data.hierarchy.length; t++) {
       var n = this.hierarchy[t],
        r = this.data.hierarchy[t];
       if (void 0 !== r.animationCache) {
        var i = r.animationCache.originalMatrix;
        i.copy(n.matrix), n.matrix = i, delete r.animationCache
       }
      }
     },
     update: function(e) {
      if (this.isPlaying !== !1) {
       this.currentTime += e * this.timeScale;
       var t = this.data.length;
       this.loop === !0 && this.currentTime > t && (this.currentTime %= t), this.currentTime = Math.min(this.currentTime, t);
       for (var n = 0, r = this.hierarchy.length; r > n; n++) {
        var i = this.hierarchy[n],
         o = this.data.hierarchy[n],
         a = o.keys,
         s = o.animationCache;
        if (a.length) {
         var u = s.prevKey,
          l = s.nextKey;
         if (l.time <= this.currentTime) {
          for (; l.time < this.currentTime && l.index > u.index;) u = l, l = a[u.index + 1];
          s.prevKey = u, s.nextKey = l
         }
         l.time >= this.currentTime ? u.interpolate(l, this.currentTime) : u.interpolate(l, l.time), this.data.hierarchy[n].node.updateMatrix(), i.matrixWorldNeedsUpdate = !0
        }
       }
      }
     },
     getNextKeyWith: function(e, t, n) {
      var r = this.data.hierarchy[t].keys;
      for (n %= r.length; n < r.length; n++)
       if (r[n].hasTarget(e)) return r[n];
      return r[0]
     },
     getPrevKeyWith: function(e, t, n) {
      var r = this.data.hierarchy[t].keys;
      for (n = n >= 0 ? n : n + r.length; n >= 0; n--)
       if (r[n].hasTarget(e)) return r[n];
      return r[r.length - 1]
     }
    }, e.MorphAnimation = function(e) {
     this.mesh = e, this.frames = e.morphTargetInfluences.length, this.currentTime = 0, this.duration = 1e3, this.loop = !0, this.lastFrame = 0, this.currentFrame = 0, this.isPlaying = !1
    }, e.MorphAnimation.prototype = {
     constructor: e.MorphAnimation,
     play: function() {
      this.isPlaying = !0
     },
     pause: function() {
      this.isPlaying = !1
     },
     update: function(e) {
      if (this.isPlaying !== !1) {
       this.currentTime += e, this.loop === !0 && this.currentTime > this.duration && (this.currentTime %= this.duration), this.currentTime = Math.min(this.currentTime, this.duration);
       var t = this.duration / this.frames,
        n = Math.floor(this.currentTime / t),
        r = this.mesh.morphTargetInfluences;
       n != this.currentFrame && (r[this.lastFrame] = 0, r[this.currentFrame] = 1, r[n] = 0, this.lastFrame = this.currentFrame, this.currentFrame = n), r[n] = this.currentTime % t / t, r[this.lastFrame] = 1 - r[n]
      }
     }
    }, e.BoxGeometry = function(t, n, r, i, o, a) {
     function s(t, n, r, i, o, a, s, l) {
      var c, h, p, d = u.widthSegments,
       f = u.heightSegments,
       m = o / 2,
       g = a / 2,
       v = u.vertices.length;
      "x" === t && "y" === n || "y" === t && "x" === n ? c = "z" : "x" === t && "z" === n || "z" === t && "x" === n ? (c = "y", f = u.depthSegments) : ("z" === t && "y" === n || "y" === t && "z" === n) && (c = "x", d = u.depthSegments);
      var y = d + 1,
       b = f + 1,
       w = o / d,
       x = a / f,
       _ = new e.Vector3;
      for (_[c] = s > 0 ? 1 : -1, p = 0; b > p; p++)
       for (h = 0; y > h; h++) {
        var S = new e.Vector3;
        S[t] = (h * w - m) * r, S[n] = (p * x - g) * i, S[c] = s, u.vertices.push(S)
       }
      for (p = 0; f > p; p++)
       for (h = 0; d > h; h++) {
        var C = h + y * p,
         E = h + y * (p + 1),
         T = h + 1 + y * (p + 1),
         M = h + 1 + y * p,
         A = new e.Vector2(h / d, 1 - p / f),
         P = new e.Vector2(h / d, 1 - (p + 1) / f),
         R = new e.Vector2((h + 1) / d, 1 - (p + 1) / f),
         I = new e.Vector2((h + 1) / d, 1 - p / f),
         k = new e.Face3(C + v, E + v, M + v);
        k.normal.copy(_), k.vertexNormals.push(_.clone(), _.clone(), _.clone()), k.materialIndex = l, u.faces.push(k), u.faceVertexUvs[0].push([A, P, I]), k = new e.Face3(E + v, T + v, M + v), k.normal.copy(_), k.vertexNormals.push(_.clone(), _.clone(), _.clone()), k.materialIndex = l, u.faces.push(k), u.faceVertexUvs[0].push([P.clone(), R, I.clone()])
       }
     }
     e.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
      width: t,
      height: n,
      depth: r,
      widthSegments: i,
      heightSegments: o,
      depthSegments: a
     }, this.widthSegments = i || 1, this.heightSegments = o || 1, this.depthSegments = a || 1;
     var u = this,
      l = t / 2,
      c = n / 2,
      h = r / 2;
     s("z", "y", -1, -1, r, n, l, 0), s("z", "y", 1, -1, r, n, -l, 1), s("x", "z", 1, 1, t, r, c, 2), s("x", "z", 1, -1, t, r, -c, 3), s("x", "y", 1, -1, t, n, h, 4), s("x", "y", -1, -1, t, n, -h, 5), this.mergeVertices()
    }, e.BoxGeometry.prototype = Object.create(e.Geometry.prototype), e.BoxGeometry.prototype.constructor = e.BoxGeometry, e.CircleGeometry = function(t, n, r, i) {
     e.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
      radius: t,
      segments: n,
      thetaStart: r,
      thetaLength: i
     }, t = t || 50, n = void 0 !== n ? Math.max(3, n) : 8, r = void 0 !== r ? r : 0, i = void 0 !== i ? i : 2 * Math.PI;
     var o, a = [],
      s = new e.Vector3,
      u = new e.Vector2(.5, .5);
     for (this.vertices.push(s), a.push(u), o = 0; n >= o; o++) {
      var l = new e.Vector3,
       c = r + o / n * i;
      l.x = t * Math.cos(c), l.y = t * Math.sin(c), this.vertices.push(l), a.push(new e.Vector2((l.x / t + 1) / 2, (l.y / t + 1) / 2))
     }
     var h = new e.Vector3(0, 0, 1);
     for (o = 1; n >= o; o++) this.faces.push(new e.Face3(o, o + 1, 0, [h.clone(), h.clone(), h.clone()])), this.faceVertexUvs[0].push([a[o].clone(), a[o + 1].clone(), u.clone()]);
     this.computeFaceNormals(), this.boundingSphere = new e.Sphere(new e.Vector3, t)
    }, e.CircleGeometry.prototype = Object.create(e.Geometry.prototype), e.CircleGeometry.prototype.constructor = e.CircleGeometry, e.CubeGeometry = function(t, n, r, i, o, a) {
     return e.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."), new e.BoxGeometry(t, n, r, i, o, a)
    }, e.CylinderGeometry = function(t, n, r, i, o, a, s, u) {
     e.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
      radiusTop: t,
      radiusBottom: n,
      height: r,
      radialSegments: i,
      heightSegments: o,
      openEnded: a,
      thetaStart: s,
      thetaLength: u
     }, t = void 0 !== t ? t : 20, n = void 0 !== n ? n : 20, r = void 0 !== r ? r : 100, i = i || 8, o = o || 1, a = void 0 !== a ? a : !1, s = void 0 !== s ? s : 0, u = void 0 !== u ? u : 2 * Math.PI;
     var l, c, h = r / 2,
      p = [],
      d = [];
     for (c = 0; o >= c; c++) {
      var f = [],
       m = [],
       g = c / o,
       v = g * (n - t) + t;
      for (l = 0; i >= l; l++) {
       var y = l / i,
        b = new e.Vector3;
       b.x = v * Math.sin(y * u + s), b.y = -g * r + h, b.z = v * Math.cos(y * u + s), this.vertices.push(b), f.push(this.vertices.length - 1), m.push(new e.Vector2(y, 1 - g))
      }
      p.push(f), d.push(m)
     }
     var w, x, _ = (n - t) / r;
     for (l = 0; i > l; l++)
      for (0 !== t ? (w = this.vertices[p[0][l]].clone(), x = this.vertices[p[0][l + 1]].clone()) : (w = this.vertices[p[1][l]].clone(), x = this.vertices[p[1][l + 1]].clone()), w.setY(Math.sqrt(w.x * w.x + w.z * w.z) * _).normalize(), x.setY(Math.sqrt(x.x * x.x + x.z * x.z) * _).normalize(), c = 0; o > c; c++) {
       var S = p[c][l],
        C = p[c + 1][l],
        E = p[c + 1][l + 1],
        T = p[c][l + 1],
        M = w.clone(),
        A = w.clone(),
        P = x.clone(),
        R = x.clone(),
        I = d[c][l].clone(),
        k = d[c + 1][l].clone(),
        D = d[c + 1][l + 1].clone(),
        V = d[c][l + 1].clone();
       this.faces.push(new e.Face3(S, C, T, [M, A, R])), this.faceVertexUvs[0].push([I, k, V]), this.faces.push(new e.Face3(C, E, T, [A.clone(), P, R.clone()])), this.faceVertexUvs[0].push([k.clone(), D, V.clone()])
      }
     if (a === !1 && t > 0)
      for (this.vertices.push(new e.Vector3(0, h, 0)), l = 0; i > l; l++) {
       var S = p[0][l],
        C = p[0][l + 1],
        E = this.vertices.length - 1,
        M = new e.Vector3(0, 1, 0),
        A = new e.Vector3(0, 1, 0),
        P = new e.Vector3(0, 1, 0),
        I = d[0][l].clone(),
        k = d[0][l + 1].clone(),
        D = new e.Vector2(k.x, 0);
       this.faces.push(new e.Face3(S, C, E, [M, A, P])), this.faceVertexUvs[0].push([I, k, D])
      }
     if (a === !1 && n > 0)
      for (this.vertices.push(new e.Vector3(0, -h, 0)), l = 0; i > l; l++) {
       var S = p[o][l + 1],
        C = p[o][l],
        E = this.vertices.length - 1,
        M = new e.Vector3(0, -1, 0),
        A = new e.Vector3(0, -1, 0),
        P = new e.Vector3(0, -1, 0),
        I = d[o][l + 1].clone(),
        k = d[o][l].clone(),
        D = new e.Vector2(k.x, 1);
       this.faces.push(new e.Face3(S, C, E, [M, A, P])), this.faceVertexUvs[0].push([I, k, D])
      }
     this.computeFaceNormals()
    }, e.CylinderGeometry.prototype = Object.create(e.Geometry.prototype), e.CylinderGeometry.prototype.constructor = e.CylinderGeometry, e.ExtrudeGeometry = function(t, n) {
     return "undefined" == typeof t ? (t = [], void 0) : (e.Geometry.call(this), this.type = "ExtrudeGeometry", t = t instanceof Array ? t : [t], this.addShapeList(t, n), this.computeFaceNormals(), void 0)
    }, e.ExtrudeGeometry.prototype = Object.create(e.Geometry.prototype), e.ExtrudeGeometry.prototype.constructor = e.ExtrudeGeometry, e.ExtrudeGeometry.prototype.addShapeList = function(e, t) {
     for (var n = e.length, r = 0; n > r; r++) {
      var i = e[r];
      this.addShape(i, t)
     }
    }, e.ExtrudeGeometry.prototype.addShape = function(t, n) {
     function r(t, n, r) {
      return n || e.error("THREE.ExtrudeGeometry: vec does not exist"), n.clone().multiplyScalar(r).add(t)
     }

     function i(t, n, r) {
      var i, o, a = 1e-10,
       s = 1,
       u = t.x - n.x,
       l = t.y - n.y,
       c = r.x - t.x,
       h = r.y - t.y,
       p = u * u + l * l,
       d = u * h - l * c;
      if (Math.abs(d) > a) {
       var f = Math.sqrt(p),
        m = Math.sqrt(c * c + h * h),
        g = n.x - l / f,
        v = n.y + u / f,
        y = r.x - h / m,
        b = r.y + c / m,
        w = ((y - g) * h - (b - v) * c) / (u * h - l * c);
       i = g + u * w - t.x, o = v + l * w - t.y;
       var x = i * i + o * o;
       if (2 >= x) return new e.Vector2(i, o);
       s = Math.sqrt(x / 2)
      } else {
       var _ = !1;
       u > a ? c > a && (_ = !0) : -a > u ? -a > c && (_ = !0) : Math.sign(l) == Math.sign(h) && (_ = !0), _ ? (i = -l, o = u, s = Math.sqrt(p)) : (i = u, o = l, s = Math.sqrt(p / 2))
      }
      return new e.Vector2(i / s, o / s)
     }

     function o() {
      if (w) {
       var e = 0,
        t = q * e;
       for (Y = 0; W > Y; Y++) j = O[Y], l(j[2] + t, j[1] + t, j[0] + t);
       for (e = _ + 2 * b, t = q * e, Y = 0; W > Y; Y++) j = O[Y], l(j[0] + t, j[1] + t, j[2] + t)
      } else {
       for (Y = 0; W > Y; Y++) j = O[Y], l(j[2], j[1], j[0]);
       for (Y = 0; W > Y; Y++) j = O[Y], l(j[0] + q * _, j[1] + q * _, j[2] + q * _)
      }
     }

     function a() {
      var e = 0;
      for (s(N, e), e += N.length, P = 0, R = L.length; R > P; P++) A = L[P], s(A, e), e += A.length
     }

     function s(e, t) {
      var n, r;
      for (Y = e.length; --Y >= 0;) {
       n = Y, r = Y - 1, 0 > r && (r = e.length - 1);
       var i = 0,
        o = _ + 2 * b;
       for (i = 0; o > i; i++) {
        var a = q * i,
         s = q * (i + 1),
         u = t + n + a,
         l = t + r + a,
         h = t + r + s,
         p = t + n + s;
        c(u, l, h, p, e, i, o, n, r)
       }
      }
     }

     function u(t, n, r) {
      I.vertices.push(new e.Vector3(t, n, r))
     }

     function l(t, n, r) {
      t += k, n += k, r += k, I.faces.push(new e.Face3(t, n, r, null, null, E));
      var i = M.generateTopUV(I, t, n, r);
      I.faceVertexUvs[0].push(i)
     }

     function c(t, n, r, i) {
      t += k, n += k, r += k, i += k, I.faces.push(new e.Face3(t, n, i, null, null, T)), I.faces.push(new e.Face3(n, r, i, null, null, T));
      var o = M.generateSideWallUV(I, t, n, r, i);
      I.faceVertexUvs[0].push([o[0], o[1], o[3]]), I.faceVertexUvs[0].push([o[1], o[2], o[3]])
     }
     var h, p, d, f, m, g = void 0 !== n.amount ? n.amount : 100,
      v = void 0 !== n.bevelThickness ? n.bevelThickness : 6,
      y = void 0 !== n.bevelSize ? n.bevelSize : v - 2,
      b = void 0 !== n.bevelSegments ? n.bevelSegments : 3,
      w = void 0 !== n.bevelEnabled ? n.bevelEnabled : !0,
      x = void 0 !== n.curveSegments ? n.curveSegments : 12,
      _ = void 0 !== n.steps ? n.steps : 1,
      S = n.extrudePath,
      C = !1,
      E = n.material,
      T = n.extrudeMaterial,
      M = void 0 !== n.UVGenerator ? n.UVGenerator : e.ExtrudeGeometry.WorldUVGenerator;
     S && (h = S.getSpacedPoints(_), C = !0, w = !1, p = void 0 !== n.frames ? n.frames : new e.TubeGeometry.FrenetFrames(S, _, !1), d = new e.Vector3, f = new e.Vector3, m = new e.Vector3), w || (b = 0, v = 0, y = 0);
     var A, P, R, I = this,
      k = this.vertices.length,
      D = t.extractPoints(x),
      V = D.shape,
      L = D.holes,
      B = !e.Shape.Utils.isClockWise(V);
     if (B) {
      for (V = V.reverse(), P = 0, R = L.length; R > P; P++) A = L[P], e.Shape.Utils.isClockWise(A) && (L[P] = A.reverse());
      B = !1
     }
     var O = e.Shape.Utils.triangulateShape(V, L),
      N = V;
     for (P = 0, R = L.length; R > P; P++) A = L[P], V = V.concat(A);
     for (var F, U, z, G, H, j, q = V.length, W = O.length, X = [], Y = 0, Q = N.length, Z = Q - 1, K = Y + 1; Q > Y; Y++, Z++, K++) Z === Q && (Z = 0), K === Q && (K = 0), X[Y] = i(N[Y], N[Z], N[K]);
     var $, J = [],
      et = X.concat();
     for (P = 0, R = L.length; R > P; P++) {
      for (A = L[P], $ = [], Y = 0, Q = A.length, Z = Q - 1, K = Y + 1; Q > Y; Y++, Z++, K++) Z === Q && (Z = 0), K === Q && (K = 0), $[Y] = i(A[Y], A[Z], A[K]);
      J.push($), et = et.concat($)
     }
     for (F = 0; b > F; F++) {
      for (z = F / b, G = v * (1 - z), U = y * Math.sin(z * Math.PI / 2), Y = 0, Q = N.length; Q > Y; Y++) H = r(N[Y], X[Y], U), u(H.x, H.y, -G);
      for (P = 0, R = L.length; R > P; P++)
       for (A = L[P], $ = J[P], Y = 0, Q = A.length; Q > Y; Y++) H = r(A[Y], $[Y], U), u(H.x, H.y, -G)
     }
     for (U = y, Y = 0; q > Y; Y++) H = w ? r(V[Y], et[Y], U) : V[Y], C ? (f.copy(p.normals[0]).multiplyScalar(H.x), d.copy(p.binormals[0]).multiplyScalar(H.y), m.copy(h[0]).add(f).add(d), u(m.x, m.y, m.z)) : u(H.x, H.y, 0);
     var tt;
     for (tt = 1; _ >= tt; tt++)
      for (Y = 0; q > Y; Y++) H = w ? r(V[Y], et[Y], U) : V[Y], C ? (f.copy(p.normals[tt]).multiplyScalar(H.x), d.copy(p.binormals[tt]).multiplyScalar(H.y), m.copy(h[tt]).add(f).add(d), u(m.x, m.y, m.z)) : u(H.x, H.y, g / _ * tt);
     for (F = b - 1; F >= 0; F--) {
      for (z = F / b, G = v * (1 - z), U = y * Math.sin(z * Math.PI / 2), Y = 0, Q = N.length; Q > Y; Y++) H = r(N[Y], X[Y], U), u(H.x, H.y, g + G);
      for (P = 0, R = L.length; R > P; P++)
       for (A = L[P], $ = J[P], Y = 0, Q = A.length; Q > Y; Y++) H = r(A[Y], $[Y], U), C ? u(H.x, H.y + h[_ - 1].y, h[_ - 1].x + G) : u(H.x, H.y, g + G)
     }
     o(), a()
    }, e.ExtrudeGeometry.WorldUVGenerator = {
     generateTopUV: function(t, n, r, i) {
      var o = t.vertices,
       a = o[n],
       s = o[r],
       u = o[i];
      return [new e.Vector2(a.x, a.y), new e.Vector2(s.x, s.y), new e.Vector2(u.x, u.y)]
     },
     generateSideWallUV: function(t, n, r, i, o) {
      var a = t.vertices,
       s = a[n],
       u = a[r],
       l = a[i],
       c = a[o];
      return Math.abs(s.y - u.y) < .01 ? [new e.Vector2(s.x, 1 - s.z), new e.Vector2(u.x, 1 - u.z), new e.Vector2(l.x, 1 - l.z), new e.Vector2(c.x, 1 - c.z)] : [new e.Vector2(s.y, 1 - s.z), new e.Vector2(u.y, 1 - u.z), new e.Vector2(l.y, 1 - l.z), new e.Vector2(c.y, 1 - c.z)]
     }
    }, e.ShapeGeometry = function(t, n) {
     e.Geometry.call(this), this.type = "ShapeGeometry", t instanceof Array == !1 && (t = [t]), this.addShapeList(t, n), this.computeFaceNormals()
    }, e.ShapeGeometry.prototype = Object.create(e.Geometry.prototype), e.ShapeGeometry.prototype.constructor = e.ShapeGeometry, e.ShapeGeometry.prototype.addShapeList = function(e, t) {
     for (var n = 0, r = e.length; r > n; n++) this.addShape(e[n], t);
     return this
    }, e.ShapeGeometry.prototype.addShape = function(t, n) {
     void 0 === n && (n = {});
     var r, i, o, a = void 0 !== n.curveSegments ? n.curveSegments : 12,
      s = n.material,
      u = void 0 === n.UVGenerator ? e.ExtrudeGeometry.WorldUVGenerator : n.UVGenerator,
      l = this.vertices.length,
      c = t.extractPoints(a),
      h = c.shape,
      p = c.holes,
      d = !e.Shape.Utils.isClockWise(h);
     if (d) {
      for (h = h.reverse(), r = 0, i = p.length; i > r; r++) o = p[r], e.Shape.Utils.isClockWise(o) && (p[r] = o.reverse());
      d = !1
     }
     var f = e.Shape.Utils.triangulateShape(h, p);
     for (r = 0, i = p.length; i > r; r++) o = p[r], h = h.concat(o);
     var m, g, v = h.length,
      y = f.length;
     for (r = 0; v > r; r++) m = h[r], this.vertices.push(new e.Vector3(m.x, m.y, 0));
     for (r = 0; y > r; r++) {
      g = f[r];
      var b = g[0] + l,
       w = g[1] + l,
       x = g[2] + l;
      this.faces.push(new e.Face3(b, w, x, null, null, s)), this.faceVertexUvs[0].push(u.generateTopUV(this, b, w, x))
     }
    }, e.LatheGeometry = function(t, n, r, i) {
     e.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
      points: t,
      segments: n,
      phiStart: r,
      phiLength: i
     }, n = n || 12, r = r || 0, i = i || 2 * Math.PI;
     for (var o = 1 / (t.length - 1), a = 1 / n, s = 0, u = n; u >= s; s++)
      for (var l = r + s * a * i, c = Math.cos(l), h = Math.sin(l), p = 0, d = t.length; d > p; p++) {
       var f = t[p],
        m = new e.Vector3;
       m.x = c * f.x - h * f.y, m.y = h * f.x + c * f.y, m.z = f.z, this.vertices.push(m)
      }
     for (var g = t.length, s = 0, u = n; u > s; s++)
      for (var p = 0, d = t.length - 1; d > p; p++) {
       var v = p + g * s,
        y = v,
        b = v + g,
        c = v + 1 + g,
        w = v + 1,
        x = s * a,
        _ = p * o,
        S = x + a,
        C = _ + o;
       this.faces.push(new e.Face3(y, b, w)), this.faceVertexUvs[0].push([new e.Vector2(x, _), new e.Vector2(S, _), new e.Vector2(x, C)]), this.faces.push(new e.Face3(b, c, w)), this.faceVertexUvs[0].push([new e.Vector2(S, _), new e.Vector2(S, C), new e.Vector2(x, C)])
      }
     this.mergeVertices(), this.computeFaceNormals(), this.computeVertexNormals()
    }, e.LatheGeometry.prototype = Object.create(e.Geometry.prototype), e.LatheGeometry.prototype.constructor = e.LatheGeometry, e.PlaneGeometry = function(t, n, r, i) {
     console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."), e.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
      width: t,
      height: n,
      widthSegments: r,
      heightSegments: i
     }, this.fromBufferGeometry(new e.PlaneBufferGeometry(t, n, r, i))
    }, e.PlaneGeometry.prototype = Object.create(e.Geometry.prototype), e.PlaneGeometry.prototype.constructor = e.PlaneGeometry, e.PlaneBufferGeometry = function(t, n, r, i) {
     e.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
      width: t,
      height: n,
      widthSegments: r,
      heightSegments: i
     };
     for (var o = t / 2, a = n / 2, s = r || 1, u = i || 1, l = s + 1, c = u + 1, h = t / s, p = n / u, d = new Float32Array(l * c * 3), f = new Float32Array(l * c * 3), m = new Float32Array(l * c * 2), g = 0, v = 0, y = 0; c > y; y++)
      for (var b = y * p - a, w = 0; l > w; w++) {
       var x = w * h - o;
       d[g] = x, d[g + 1] = -b, f[g + 2] = 1, m[v] = w / s, m[v + 1] = 1 - y / u, g += 3, v += 2
      }
     g = 0;
     for (var _ = new(d.length / 3 > 65535 ? Uint32Array : Uint16Array)(s * u * 6), y = 0; u > y; y++)
      for (var w = 0; s > w; w++) {
       var S = w + l * y,
        C = w + l * (y + 1),
        E = w + 1 + l * (y + 1),
        T = w + 1 + l * y;
       _[g] = S, _[g + 1] = C, _[g + 2] = T, _[g + 3] = C, _[g + 4] = E, _[g + 5] = T, g += 6
      }
     this.addAttribute("index", new e.BufferAttribute(_, 1)), this.addAttribute("position", new e.BufferAttribute(d, 3)), this.addAttribute("normal", new e.BufferAttribute(f, 3)), this.addAttribute("uv", new e.BufferAttribute(m, 2))
    }, e.PlaneBufferGeometry.prototype = Object.create(e.BufferGeometry.prototype), e.PlaneBufferGeometry.prototype.constructor = e.PlaneBufferGeometry, e.RingGeometry = function(t, n, r, i, o, a) {
     e.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
      innerRadius: t,
      outerRadius: n,
      thetaSegments: r,
      phiSegments: i,
      thetaStart: o,
      thetaLength: a
     }, t = t || 0, n = n || 50, o = void 0 !== o ? o : 0, a = void 0 !== a ? a : 2 * Math.PI, r = void 0 !== r ? Math.max(3, r) : 8, i = void 0 !== i ? Math.max(1, i) : 8;
     var s, u, l = [],
      c = t,
      h = (n - t) / i;
     for (s = 0; i + 1 > s; s++) {
      for (u = 0; r + 1 > u; u++) {
       var p = new e.Vector3,
        d = o + u / r * a;
       p.x = c * Math.cos(d), p.y = c * Math.sin(d), this.vertices.push(p), l.push(new e.Vector2((p.x / n + 1) / 2, (p.y / n + 1) / 2))
      }
      c += h
     }
     var f = new e.Vector3(0, 0, 1);
     for (s = 0; i > s; s++) {
      var m = s * (r + 1);
      for (u = 0; r > u; u++) {
       var d = u + m,
        g = d,
        v = d + r + 1,
        y = d + r + 2;
       this.faces.push(new e.Face3(g, v, y, [f.clone(), f.clone(), f.clone()])), this.faceVertexUvs[0].push([l[g].clone(), l[v].clone(), l[y].clone()]), g = d, v = d + r + 2, y = d + 1, this.faces.push(new e.Face3(g, v, y, [f.clone(), f.clone(), f.clone()])), this.faceVertexUvs[0].push([l[g].clone(), l[v].clone(), l[y].clone()])
      }
     }
     this.computeFaceNormals(), this.boundingSphere = new e.Sphere(new e.Vector3, c)
    }, e.RingGeometry.prototype = Object.create(e.Geometry.prototype), e.RingGeometry.prototype.constructor = e.RingGeometry, e.SphereGeometry = function(t, n, r, i, o, a, s) {
     e.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
      radius: t,
      widthSegments: n,
      heightSegments: r,
      phiStart: i,
      phiLength: o,
      thetaStart: a,
      thetaLength: s
     }, t = t || 50, n = Math.max(3, Math.floor(n) || 8), r = Math.max(2, Math.floor(r) || 6), i = void 0 !== i ? i : 0, o = void 0 !== o ? o : 2 * Math.PI, a = void 0 !== a ? a : 0, s = void 0 !== s ? s : Math.PI;
     var u, l, c = [],
      h = [];
     for (l = 0; r >= l; l++) {
      var p = [],
       d = [];
      for (u = 0; n >= u; u++) {
       var f = u / n,
        m = l / r,
        g = new e.Vector3;
       g.x = -t * Math.cos(i + f * o) * Math.sin(a + m * s), g.y = t * Math.cos(a + m * s), g.z = t * Math.sin(i + f * o) * Math.sin(a + m * s), this.vertices.push(g), p.push(this.vertices.length - 1), d.push(new e.Vector2(f, 1 - m))
      }
      c.push(p), h.push(d)
     }
     for (l = 0; r > l; l++)
      for (u = 0; n > u; u++) {
       var v = c[l][u + 1],
        y = c[l][u],
        b = c[l + 1][u],
        w = c[l + 1][u + 1],
        x = this.vertices[v].clone().normalize(),
        _ = this.vertices[y].clone().normalize(),
        S = this.vertices[b].clone().normalize(),
        C = this.vertices[w].clone().normalize(),
        E = h[l][u + 1].clone(),
        T = h[l][u].clone(),
        M = h[l + 1][u].clone(),
        A = h[l + 1][u + 1].clone();
       Math.abs(this.vertices[v].y) === t ? (E.x = (E.x + T.x) / 2, this.faces.push(new e.Face3(v, b, w, [x, S, C])), this.faceVertexUvs[0].push([E, M, A])) : Math.abs(this.vertices[b].y) === t ? (M.x = (M.x + A.x) / 2, this.faces.push(new e.Face3(v, y, b, [x, _, S])), this.faceVertexUvs[0].push([E, T, M])) : (this.faces.push(new e.Face3(v, y, w, [x, _, C])), this.faceVertexUvs[0].push([E, T, A]), this.faces.push(new e.Face3(y, b, w, [_.clone(), S, C.clone()])), this.faceVertexUvs[0].push([T.clone(), M, A.clone()]))
      }
     this.computeFaceNormals(), this.boundingSphere = new e.Sphere(new e.Vector3, t)
    }, e.SphereGeometry.prototype = Object.create(e.Geometry.prototype), e.SphereGeometry.prototype.constructor = e.SphereGeometry, e.TextGeometry = function(t, n) {
     n = n || {};
     var r = e.FontUtils.generateShapes(t, n);
     n.amount = void 0 !== n.height ? n.height : 50, void 0 === n.bevelThickness && (n.bevelThickness = 10), void 0 === n.bevelSize && (n.bevelSize = 8), void 0 === n.bevelEnabled && (n.bevelEnabled = !1), e.ExtrudeGeometry.call(this, r, n), this.type = "TextGeometry"
    }, e.TextGeometry.prototype = Object.create(e.ExtrudeGeometry.prototype), e.TextGeometry.prototype.constructor = e.TextGeometry, e.TorusGeometry = function(t, n, r, i, o) {
     e.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
      radius: t,
      tube: n,
      radialSegments: r,
      tubularSegments: i,
      arc: o
     }, t = t || 100, n = n || 40, r = r || 8, i = i || 6, o = o || 2 * Math.PI;
     for (var a = new e.Vector3, s = [], u = [], l = 0; r >= l; l++)
      for (var c = 0; i >= c; c++) {
       var h = c / i * o,
        p = l / r * Math.PI * 2;
       a.x = t * Math.cos(h), a.y = t * Math.sin(h);
       var d = new e.Vector3;
       d.x = (t + n * Math.cos(p)) * Math.cos(h), d.y = (t + n * Math.cos(p)) * Math.sin(h), d.z = n * Math.sin(p), this.vertices.push(d), s.push(new e.Vector2(c / i, l / r)), u.push(d.clone().sub(a).normalize())
      }
     for (var l = 1; r >= l; l++)
      for (var c = 1; i >= c; c++) {
       var f = (i + 1) * l + c - 1,
        m = (i + 1) * (l - 1) + c - 1,
        g = (i + 1) * (l - 1) + c,
        v = (i + 1) * l + c,
        y = new e.Face3(f, m, v, [u[f].clone(), u[m].clone(), u[v].clone()]);
       this.faces.push(y), this.faceVertexUvs[0].push([s[f].clone(), s[m].clone(), s[v].clone()]), y = new e.Face3(m, g, v, [u[m].clone(), u[g].clone(), u[v].clone()]), this.faces.push(y), this.faceVertexUvs[0].push([s[m].clone(), s[g].clone(), s[v].clone()])
      }
     this.computeFaceNormals()
    }, e.TorusGeometry.prototype = Object.create(e.Geometry.prototype), e.TorusGeometry.prototype.constructor = e.TorusGeometry, e.TorusKnotGeometry = function(t, n, r, i, o, a, s) {
     function u(t, n, r, i, o) {
      var a = Math.cos(t),
       s = Math.sin(t),
       u = n / r * t,
       l = Math.cos(u),
       c = i * (2 + l) * .5 * a,
       h = i * (2 + l) * s * .5,
       p = o * i * Math.sin(u) * .5;
      return new e.Vector3(c, h, p)
     }
     e.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
      radius: t,
      tube: n,
      radialSegments: r,
      tubularSegments: i,
      p: o,
      q: a,
      heightScale: s
     }, t = t || 100, n = n || 40, r = r || 64, i = i || 8, o = o || 2, a = a || 3, s = s || 1;
     for (var l = new Array(r), c = new e.Vector3, h = new e.Vector3, p = new e.Vector3, d = 0; r > d; ++d) {
      l[d] = new Array(i);
      var f = d / r * 2 * o * Math.PI,
       m = u(f, a, o, t, s),
       g = u(f + .01, a, o, t, s);
      c.subVectors(g, m), h.addVectors(g, m), p.crossVectors(c, h), h.crossVectors(p, c), p.normalize(), h.normalize();
      for (var v = 0; i > v; ++v) {
       var y = v / i * 2 * Math.PI,
        b = -n * Math.cos(y),
        w = n * Math.sin(y),
        x = new e.Vector3;
       x.x = m.x + b * h.x + w * p.x, x.y = m.y + b * h.y + w * p.y, x.z = m.z + b * h.z + w * p.z, l[d][v] = this.vertices.push(x) - 1
      }
     }
     for (var d = 0; r > d; ++d)
      for (var v = 0; i > v; ++v) {
       var _ = (d + 1) % r,
        S = (v + 1) % i,
        C = l[d][v],
        E = l[_][v],
        T = l[_][S],
        M = l[d][S],
        A = new e.Vector2(d / r, v / i),
        P = new e.Vector2((d + 1) / r, v / i),
        R = new e.Vector2((d + 1) / r, (v + 1) / i),
        I = new e.Vector2(d / r, (v + 1) / i);
       this.faces.push(new e.Face3(C, E, M)), this.faceVertexUvs[0].push([A, P, I]), this.faces.push(new e.Face3(E, T, M)), this.faceVertexUvs[0].push([P.clone(), R, I.clone()])
      }
     this.computeFaceNormals(), this.computeVertexNormals()
    }, e.TorusKnotGeometry.prototype = Object.create(e.Geometry.prototype), e.TorusKnotGeometry.prototype.constructor = e.TorusKnotGeometry, e.TubeGeometry = function(t, n, r, i, o, a) {
     function s(t, n, r) {
      return R.vertices.push(new e.Vector3(t, n, r)) - 1
     }
     e.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
      path: t,
      segments: n,
      radius: r,
      radialSegments: i,
      closed: o
     }, n = n || 64, r = r || 1, i = i || 8, o = o || !1, a = a || e.TubeGeometry.NoTaper;
     var u, l, c, h, p, d, f, m, g, v, y, b, w, x, _, S, C, E, T, M, A, P = [],
      R = this,
      I = n + 1,
      k = new e.Vector3,
      D = new e.TubeGeometry.FrenetFrames(t, n, o),
      V = D.tangents,
      L = D.normals,
      B = D.binormals;
     for (this.tangents = V, this.normals = L, this.binormals = B, v = 0; I > v; v++)
      for (P[v] = [], h = v / (I - 1), g = t.getPointAt(h), u = V[v], l = L[v], c = B[v], d = r * a(h), y = 0; i > y; y++) p = y / i * 2 * Math.PI, f = -d * Math.cos(p), m = d * Math.sin(p), k.copy(g), k.x += f * l.x + m * c.x, k.y += f * l.y + m * c.y, k.z += f * l.z + m * c.z, P[v][y] = s(k.x, k.y, k.z);
     for (v = 0; n > v; v++)
      for (y = 0; i > y; y++) b = o ? (v + 1) % n : v + 1, w = (y + 1) % i, x = P[v][y], _ = P[b][y], S = P[b][w], C = P[v][w], E = new e.Vector2(v / n, y / i), T = new e.Vector2((v + 1) / n, y / i), M = new e.Vector2((v + 1) / n, (y + 1) / i), A = new e.Vector2(v / n, (y + 1) / i), this.faces.push(new e.Face3(x, _, C)), this.faceVertexUvs[0].push([E, T, A]), this.faces.push(new e.Face3(_, S, C)), this.faceVertexUvs[0].push([T.clone(), M, A.clone()]);
     this.computeFaceNormals(), this.computeVertexNormals()
    }, e.TubeGeometry.prototype = Object.create(e.Geometry.prototype), e.TubeGeometry.prototype.constructor = e.TubeGeometry, e.TubeGeometry.NoTaper = function() {
     return 1
    }, e.TubeGeometry.SinusoidalTaper = function(e) {
     return Math.sin(Math.PI * e)
    }, e.TubeGeometry.FrenetFrames = function(t, n, r) {
     function i() {
      f[0] = new e.Vector3, m[0] = new e.Vector3, a = Number.MAX_VALUE, s = Math.abs(d[0].x), u = Math.abs(d[0].y), l = Math.abs(d[0].z), a >= s && (a = s, p.set(1, 0, 0)), a >= u && (a = u, p.set(0, 1, 0)), a >= l && p.set(0, 0, 1), g.crossVectors(d[0], p).normalize(), f[0].crossVectors(d[0], g), m[0].crossVectors(d[0], f[0])
     }
     var o, a, s, u, l, c, h, p = new e.Vector3,
      d = [],
      f = [],
      m = [],
      g = new e.Vector3,
      v = new e.Matrix4,
      y = n + 1,
      b = 1e-4;
     for (this.tangents = d, this.normals = f, this.binormals = m, c = 0; y > c; c++) h = c / (y - 1), d[c] = t.getTangentAt(h), d[c].normalize();
     for (i(), c = 1; y > c; c++) f[c] = f[c - 1].clone(), m[c] = m[c - 1].clone(), g.crossVectors(d[c - 1], d[c]), g.length() > b && (g.normalize(), o = Math.acos(e.Math.clamp(d[c - 1].dot(d[c]), -1, 1)), f[c].applyMatrix4(v.makeRotationAxis(g, o))), m[c].crossVectors(d[c], f[c]);
     if (r)
      for (o = Math.acos(e.Math.clamp(f[0].dot(f[y - 1]), -1, 1)), o /= y - 1, d[0].dot(g.crossVectors(f[0], f[y - 1])) > 0 && (o = -o), c = 1; y > c; c++) f[c].applyMatrix4(v.makeRotationAxis(d[c], o * c)), m[c].crossVectors(d[c], f[c])
    }, e.PolyhedronGeometry = function(t, n, r, i) {
     function o(t) {
      var n = t.normalize().clone();
      n.index = h.vertices.push(n) - 1;
      var r = u(t) / 2 / Math.PI + .5,
       i = l(t) / Math.PI + .5;
      return n.uv = new e.Vector2(r, 1 - i), n
     }

     function a(t, n, r) {
      var i = new e.Face3(t.index, n.index, r.index, [t.clone(), n.clone(), r.clone()]);
      h.faces.push(i), w.copy(t).add(n).add(r).divideScalar(3);
      var o = u(w);
      h.faceVertexUvs[0].push([c(t.uv, t, o), c(n.uv, n, o), c(r.uv, r, o)])
     }

     function s(e, t) {
      for (var n = Math.pow(2, t), r = o(h.vertices[e.a]), i = o(h.vertices[e.b]), s = o(h.vertices[e.c]), u = [], l = 0; n >= l; l++) {
       u[l] = [];
       for (var c = o(r.clone().lerp(s, l / n)), p = o(i.clone().lerp(s, l / n)), d = n - l, f = 0; d >= f; f++) u[l][f] = 0 == f && l == n ? c : o(c.clone().lerp(p, f / d))
      }
      for (var l = 0; n > l; l++)
       for (var f = 0; 2 * (n - l) - 1 > f; f++) {
        var m = Math.floor(f / 2);
        f % 2 == 0 ? a(u[l][m + 1], u[l + 1][m], u[l][m]) : a(u[l][m + 1], u[l + 1][m + 1], u[l + 1][m])
       }
     }

     function u(e) {
      return Math.atan2(e.z, -e.x)
     }

     function l(e) {
      return Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z))
     }

     function c(t, n, r) {
      return 0 > r && 1 === t.x && (t = new e.Vector2(t.x - 1, t.y)), 0 === n.x && 0 === n.z && (t = new e.Vector2(r / 2 / Math.PI + .5, t.y)), t.clone()
     }
     e.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
      vertices: t,
      indices: n,
      radius: r,
      detail: i
     }, r = r || 1, i = i || 0;
     for (var h = this, p = 0, d = t.length; d > p; p += 3) o(new e.Vector3(t[p], t[p + 1], t[p + 2]));
     for (var f = this.vertices, m = [], p = 0, g = 0, d = n.length; d > p; p += 3, g++) {
      var v = f[n[p]],
       y = f[n[p + 1]],
       b = f[n[p + 2]];
      m[g] = new e.Face3(v.index, y.index, b.index, [v.clone(), y.clone(), b.clone()])
     }
     for (var w = new e.Vector3, p = 0, d = m.length; d > p; p++) s(m[p], i);
     for (var p = 0, d = this.faceVertexUvs[0].length; d > p; p++) {
      var x = this.faceVertexUvs[0][p],
       _ = x[0].x,
       S = x[1].x,
       C = x[2].x,
       E = Math.max(_, Math.max(S, C)),
       T = Math.min(_, Math.min(S, C));
      E > .9 && .1 > T && (.2 > _ && (x[0].x += 1), .2 > S && (x[1].x += 1), .2 > C && (x[2].x += 1))
     }
     for (var p = 0, d = this.vertices.length; d > p; p++) this.vertices[p].multiplyScalar(r);
     this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new e.Sphere(new e.Vector3, r)
    }, e.PolyhedronGeometry.prototype = Object.create(e.Geometry.prototype), e.PolyhedronGeometry.prototype.constructor = e.PolyhedronGeometry, e.DodecahedronGeometry = function(t, n) {
     this.parameters = {
      radius: t,
      detail: n
     };
     var r = (1 + Math.sqrt(5)) / 2,
      i = 1 / r,
      o = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -r, 0, -i, r, 0, i, -r, 0, i, r, -i, -r, 0, -i, r, 0, i, -r, 0, i, r, 0, -r, 0, -i, r, 0, -i, -r, 0, i, r, 0, i],
      a = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
     e.PolyhedronGeometry.call(this, o, a, t, n)
    }, e.DodecahedronGeometry.prototype = Object.create(e.Geometry.prototype), e.DodecahedronGeometry.prototype.constructor = e.DodecahedronGeometry, e.IcosahedronGeometry = function(t, n) {
     var r = (1 + Math.sqrt(5)) / 2,
      i = [-1, r, 0, 1, r, 0, -1, -r, 0, 1, -r, 0, 0, -1, r, 0, 1, r, 0, -1, -r, 0, 1, -r, r, 0, -1, r, 0, 1, -r, 0, -1, -r, 0, 1],
      o = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
     e.PolyhedronGeometry.call(this, i, o, t, n), this.type = "IcosahedronGeometry", this.parameters = {
      radius: t,
      detail: n
     }
    }, e.IcosahedronGeometry.prototype = Object.create(e.Geometry.prototype), e.IcosahedronGeometry.prototype.constructor = e.IcosahedronGeometry, e.OctahedronGeometry = function(t, n) {
     this.parameters = {
      radius: t,
      detail: n
     };
     var r = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
      i = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
     e.PolyhedronGeometry.call(this, r, i, t, n), this.type = "OctahedronGeometry", this.parameters = {
      radius: t,
      detail: n
     }
    }, e.OctahedronGeometry.prototype = Object.create(e.Geometry.prototype), e.OctahedronGeometry.prototype.constructor = e.OctahedronGeometry, e.TetrahedronGeometry = function(t, n) {
     var r = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
      i = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
     e.PolyhedronGeometry.call(this, r, i, t, n), this.type = "TetrahedronGeometry", this.parameters = {
      radius: t,
      detail: n
     }
    }, e.TetrahedronGeometry.prototype = Object.create(e.Geometry.prototype), e.TetrahedronGeometry.prototype.constructor = e.TetrahedronGeometry, e.ParametricGeometry = function(t, n, r) {
     e.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
      func: t,
      slices: n,
      stacks: r
     };
     var i, o, a, s, u, l = this.vertices,
      c = this.faces,
      h = this.faceVertexUvs[0],
      p = n + 1;
     for (i = 0; r >= i; i++)
      for (u = i / r, o = 0; n >= o; o++) s = o / n, a = t(s, u), l.push(a);
     var d, f, m, g, v, y, b, w;
     for (i = 0; r > i; i++)
      for (o = 0; n > o; o++) d = i * p + o, f = i * p + o + 1, m = (i + 1) * p + o + 1, g = (i + 1) * p + o, v = new e.Vector2(o / n, i / r), y = new e.Vector2((o + 1) / n, i / r), b = new e.Vector2((o + 1) / n, (i + 1) / r), w = new e.Vector2(o / n, (i + 1) / r), c.push(new e.Face3(d, f, g)), h.push([v, y, w]), c.push(new e.Face3(f, m, g)), h.push([y.clone(), b, w.clone()]);
     this.computeFaceNormals(), this.computeVertexNormals()
    }, e.ParametricGeometry.prototype = Object.create(e.Geometry.prototype), e.ParametricGeometry.prototype.constructor = e.ParametricGeometry, e.AxisHelper = function(t) {
     t = t || 1;
     var n = new Float32Array([0, 0, 0, t, 0, 0, 0, 0, 0, 0, t, 0, 0, 0, 0, 0, 0, t]),
      r = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]),
      i = new e.BufferGeometry;
     i.addAttribute("position", new e.BufferAttribute(n, 3)), i.addAttribute("color", new e.BufferAttribute(r, 3));
     var o = new e.LineBasicMaterial({
      vertexColors: e.VertexColors
     });
     e.Line.call(this, i, o, e.LinePieces)
    }, e.AxisHelper.prototype = Object.create(e.Line.prototype), e.AxisHelper.prototype.constructor = e.AxisHelper, e.ArrowHelper = function() {
     var t = new e.Geometry;
     t.vertices.push(new e.Vector3(0, 0, 0), new e.Vector3(0, 1, 0));
     var n = new e.CylinderGeometry(0, .5, 1, 5, 1);
     return n.applyMatrix((new e.Matrix4).makeTranslation(0, -.5, 0)),
      function(r, i, o, a, s, u) {
       e.Object3D.call(this), void 0 === a && (a = 16776960), void 0 === o && (o = 1), void 0 === s && (s = .2 * o), void 0 === u && (u = .2 * s), this.position.copy(i), this.line = new e.Line(t, new e.LineBasicMaterial({
        color: a
       })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new e.Mesh(n, new e.MeshBasicMaterial({
        color: a
       })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(r), this.setLength(o, s, u)
      }
    }(), e.ArrowHelper.prototype = Object.create(e.Object3D.prototype), e.ArrowHelper.prototype.constructor = e.ArrowHelper, e.ArrowHelper.prototype.setDirection = function() {
     var t, n = new e.Vector3;
     return function(e) {
      e.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : e.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (n.set(e.z, 0, -e.x).normalize(), t = Math.acos(e.y), this.quaternion.setFromAxisAngle(n, t))
     }
    }(), e.ArrowHelper.prototype.setLength = function(e, t, n) {
     void 0 === t && (t = .2 * e), void 0 === n && (n = .2 * t), this.line.scale.set(1, e - t, 1), this.line.updateMatrix(), this.cone.scale.set(n, t, n), this.cone.position.y = e, this.cone.updateMatrix()
    }, e.ArrowHelper.prototype.setColor = function(e) {
     this.line.material.color.set(e), this.cone.material.color.set(e)
    }, e.BoxHelper = function(t) {
     var n = new e.BufferGeometry;
     n.addAttribute("position", new e.BufferAttribute(new Float32Array(72), 3)), e.Line.call(this, n, new e.LineBasicMaterial({
      color: 16776960
     }), e.LinePieces), void 0 !== t && this.update(t)
    }, e.BoxHelper.prototype = Object.create(e.Line.prototype), e.BoxHelper.prototype.constructor = e.BoxHelper, e.BoxHelper.prototype.update = function(e) {
     var t = e.geometry;
     null === t.boundingBox && t.computeBoundingBox();
     var n = t.boundingBox.min,
      r = t.boundingBox.max,
      i = this.geometry.attributes.position.array;
     i[0] = r.x, i[1] = r.y, i[2] = r.z, i[3] = n.x, i[4] = r.y, i[5] = r.z, i[6] = n.x, i[7] = r.y, i[8] = r.z, i[9] = n.x, i[10] = n.y, i[11] = r.z, i[12] = n.x, i[13] = n.y, i[14] = r.z, i[15] = r.x, i[16] = n.y, i[17] = r.z, i[18] = r.x, i[19] = n.y, i[20] = r.z, i[21] = r.x, i[22] = r.y, i[23] = r.z, i[24] = r.x, i[25] = r.y, i[26] = n.z, i[27] = n.x, i[28] = r.y, i[29] = n.z, i[30] = n.x, i[31] = r.y, i[32] = n.z, i[33] = n.x, i[34] = n.y, i[35] = n.z, i[36] = n.x, i[37] = n.y, i[38] = n.z, i[39] = r.x, i[40] = n.y, i[41] = n.z, i[42] = r.x, i[43] = n.y, i[44] = n.z, i[45] = r.x, i[46] = r.y, i[47] = n.z, i[48] = r.x, i[49] = r.y, i[50] = r.z, i[51] = r.x, i[52] = r.y, i[53] = n.z, i[54] = n.x, i[55] = r.y, i[56] = r.z, i[57] = n.x, i[58] = r.y, i[59] = n.z, i[60] = n.x, i[61] = n.y, i[62] = r.z, i[63] = n.x, i[64] = n.y, i[65] = n.z, i[66] = r.x, i[67] = n.y, i[68] = r.z, i[69] = r.x, i[70] = n.y, i[71] = n.z, this.geometry.attributes.position.needsUpdate = !0, this.geometry.computeBoundingSphere(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
    }, e.BoundingBoxHelper = function(t, n) {
     var r = void 0 !== n ? n : 8947848;
     this.object = t, this.box = new e.Box3, e.Mesh.call(this, new e.BoxGeometry(1, 1, 1), new e.MeshBasicMaterial({
      color: r,
      wireframe: !0
     }))
    }, e.BoundingBoxHelper.prototype = Object.create(e.Mesh.prototype), e.BoundingBoxHelper.prototype.constructor = e.BoundingBoxHelper, e.BoundingBoxHelper.prototype.update = function() {
     this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
    }, e.CameraHelper = function(t) {
     function n(e, t, n) {
      r(e, n), r(t, n)
     }

     function r(t, n) {
      i.vertices.push(new e.Vector3), i.colors.push(new e.Color(n)), void 0 === a[t] && (a[t] = []), a[t].push(i.vertices.length - 1)
     }
     var i = new e.Geometry,
      o = new e.LineBasicMaterial({
       color: 16777215,
       vertexColors: e.FaceColors
      }),
      a = {},
      s = 16755200,
      u = 16711680,
      l = 43775,
      c = 16777215,
      h = 3355443;
     n("n1", "n2", s), n("n2", "n4", s), n("n4", "n3", s), n("n3", "n1", s), n("f1", "f2", s), n("f2", "f4", s), n("f4", "f3", s), n("f3", "f1", s), n("n1", "f1", s), n("n2", "f2", s), n("n3", "f3", s), n("n4", "f4", s), n("p", "n1", u), n("p", "n2", u), n("p", "n3", u), n("p", "n4", u), n("u1", "u2", l), n("u2", "u3", l), n("u3", "u1", l), n("c", "t", c), n("p", "c", h), n("cn1", "cn2", h), n("cn3", "cn4", h), n("cf1", "cf2", h), n("cf3", "cf4", h), e.Line.call(this, i, o, e.LinePieces), this.camera = t, this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = a, this.update()
    }, e.CameraHelper.prototype = Object.create(e.Line.prototype), e.CameraHelper.prototype.constructor = e.CameraHelper, e.CameraHelper.prototype.update = function() {
     var t, n, r = new e.Vector3,
      i = new e.Camera,
      o = function(e, o, a, s) {
       r.set(o, a, s).unproject(i);
       var u = n[e];
       if (void 0 !== u)
        for (var l = 0, c = u.length; c > l; l++) t.vertices[u[l]].copy(r)
      };
     return function() {
      t = this.geometry, n = this.pointMap;
      var e = 1,
       r = 1;
      i.projectionMatrix.copy(this.camera.projectionMatrix), o("c", 0, 0, -1), o("t", 0, 0, 1), o("n1", -e, -r, -1), o("n2", e, -r, -1), o("n3", -e, r, -1), o("n4", e, r, -1), o("f1", -e, -r, 1), o("f2", e, -r, 1), o("f3", -e, r, 1), o("f4", e, r, 1), o("u1", .7 * e, 1.1 * r, -1), o("u2", .7 * -e, 1.1 * r, -1), o("u3", 0, 2 * r, -1), o("cf1", -e, 0, 1), o("cf2", e, 0, 1), o("cf3", 0, -r, 1), o("cf4", 0, r, 1), o("cn1", -e, 0, -1), o("cn2", e, 0, -1), o("cn3", 0, -r, -1), o("cn4", 0, r, -1), t.verticesNeedUpdate = !0
     }
    }(), e.DirectionalLightHelper = function(t, n) {
     e.Object3D.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, n = n || 1;
     var r = new e.Geometry;
     r.vertices.push(new e.Vector3(-n, n, 0), new e.Vector3(n, n, 0), new e.Vector3(n, -n, 0), new e.Vector3(-n, -n, 0), new e.Vector3(-n, n, 0));
     var i = new e.LineBasicMaterial({
      fog: !1
     });
     i.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new e.Line(r, i), this.add(this.lightPlane), r = new e.Geometry, r.vertices.push(new e.Vector3, new e.Vector3), i = new e.LineBasicMaterial({
      fog: !1
     }), i.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new e.Line(r, i), this.add(this.targetLine), this.update()
    }, e.DirectionalLightHelper.prototype = Object.create(e.Object3D.prototype), e.DirectionalLightHelper.prototype.constructor = e.DirectionalLightHelper, e.DirectionalLightHelper.prototype.dispose = function() {
     this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
    }, e.DirectionalLightHelper.prototype.update = function() {
     var t = new e.Vector3,
      n = new e.Vector3,
      r = new e.Vector3;
     return function() {
      t.setFromMatrixPosition(this.light.matrixWorld), n.setFromMatrixPosition(this.light.target.matrixWorld), r.subVectors(n, t), this.lightPlane.lookAt(r), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(r), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
     }
    }(), e.EdgesHelper = function(t, n, r) {
     var i = void 0 !== n ? n : 16777215;
     r = void 0 !== r ? r : 1;
     var o, a = Math.cos(e.Math.degToRad(r)),
      s = [0, 0],
      u = {},
      l = function(e, t) {
       return e - t
      },
      c = ["a", "b", "c"],
      h = new e.BufferGeometry;
     t.geometry instanceof e.BufferGeometry ? (o = new e.Geometry, o.fromBufferGeometry(t.geometry)) : o = t.geometry.clone(), o.mergeVertices(), o.computeFaceNormals();
     for (var p = o.vertices, d = o.faces, f = 0, m = 0, g = d.length; g > m; m++)
      for (var v = d[m], y = 0; 3 > y; y++) {
       s[0] = v[c[y]], s[1] = v[c[(y + 1) % 3]], s.sort(l);
       var b = s.toString();
       void 0 === u[b] ? (u[b] = {
        vert1: s[0],
        vert2: s[1],
        face1: m,
        face2: void 0
       }, f++) : u[b].face2 = m
      }
     var w = new Float32Array(2 * f * 3),
      x = 0;
     for (var b in u) {
      var _ = u[b];
      if (void 0 === _.face2 || d[_.face1].normal.dot(d[_.face2].normal) <= a) {
       var S = p[_.vert1];
       w[x++] = S.x, w[x++] = S.y, w[x++] = S.z, S = p[_.vert2], w[x++] = S.x, w[x++] = S.y, w[x++] = S.z
      }
     }
     h.addAttribute("position", new e.BufferAttribute(w, 3)), e.Line.call(this, h, new e.LineBasicMaterial({
      color: i
     }), e.LinePieces), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1
    }, e.EdgesHelper.prototype = Object.create(e.Line.prototype), e.EdgesHelper.prototype.constructor = e.EdgesHelper, e.FaceNormalsHelper = function(t, n, r, i) {
     this.object = t, this.size = void 0 !== n ? n : 1;
     for (var o = void 0 !== r ? r : 16776960, a = void 0 !== i ? i : 1, s = new e.Geometry, u = this.object.geometry.faces, l = 0, c = u.length; c > l; l++) s.vertices.push(new e.Vector3, new e.Vector3);
     e.Line.call(this, s, new e.LineBasicMaterial({
      color: o,
      linewidth: a
     }), e.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new e.Matrix3, this.update()
    }, e.FaceNormalsHelper.prototype = Object.create(e.Line.prototype), e.FaceNormalsHelper.prototype.constructor = e.FaceNormalsHelper, e.FaceNormalsHelper.prototype.update = function() {
     var e = this.geometry.vertices,
      t = this.object,
      n = t.geometry.vertices,
      r = t.geometry.faces,
      i = t.matrixWorld;
     t.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(i);
     for (var o = 0, a = 0, s = r.length; s > o; o++, a += 2) {
      var u = r[o];
      e[a].copy(n[u.a]).add(n[u.b]).add(n[u.c]).divideScalar(3).applyMatrix4(i), e[a + 1].copy(u.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(e[a])
     }
     return this.geometry.verticesNeedUpdate = !0, this
    }, e.GridHelper = function(t, n) {
     var r = new e.Geometry,
      i = new e.LineBasicMaterial({
       vertexColors: e.VertexColors
      });
     this.color1 = new e.Color(4473924), this.color2 = new e.Color(8947848);
     for (var o = -t; t >= o; o += n) {
      r.vertices.push(new e.Vector3(-t, 0, o), new e.Vector3(t, 0, o), new e.Vector3(o, 0, -t), new e.Vector3(o, 0, t));
      var a = 0 === o ? this.color1 : this.color2;
      r.colors.push(a, a, a, a)
     }
     e.Line.call(this, r, i, e.LinePieces)
    }, e.GridHelper.prototype = Object.create(e.Line.prototype), e.GridHelper.prototype.constructor = e.GridHelper, e.GridHelper.prototype.setColors = function(e, t) {
     this.color1.set(e), this.color2.set(t), this.geometry.colorsNeedUpdate = !0
    }, e.HemisphereLightHelper = function(t, n) {
     e.Object3D.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new e.Color, new e.Color];
     var r = new e.SphereGeometry(n, 4, 2);
     r.applyMatrix((new e.Matrix4).makeRotationX(-Math.PI / 2));
     for (var i = 0, o = 8; o > i; i++) r.faces[i].color = this.colors[4 > i ? 0 : 1];
     var a = new e.MeshBasicMaterial({
      vertexColors: e.FaceColors,
      wireframe: !0
     });
     this.lightSphere = new e.Mesh(r, a), this.add(this.lightSphere), this.update()
    }, e.HemisphereLightHelper.prototype = Object.create(e.Object3D.prototype), e.HemisphereLightHelper.prototype.constructor = e.HemisphereLightHelper, e.HemisphereLightHelper.prototype.dispose = function() {
     this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
    }, e.HemisphereLightHelper.prototype.update = function() {
     var t = new e.Vector3;
     return function() {
      this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
     }
    }(), e.PointLightHelper = function(t, n) {
     this.light = t, this.light.updateMatrixWorld();
     var r = new e.SphereGeometry(n, 4, 2),
      i = new e.MeshBasicMaterial({
       wireframe: !0,
       fog: !1
      });
     i.color.copy(this.light.color).multiplyScalar(this.light.intensity), e.Mesh.call(this, r, i), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
    }, e.PointLightHelper.prototype = Object.create(e.Mesh.prototype), e.PointLightHelper.prototype.constructor = e.PointLightHelper, e.PointLightHelper.prototype.dispose = function() {
     this.geometry.dispose(), this.material.dispose()
    }, e.PointLightHelper.prototype.update = function() {
     this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
    }, e.SkeletonHelper = function(t) {
     this.bones = this.getBoneList(t);
     for (var n = new e.Geometry, r = 0; r < this.bones.length; r++) {
      var i = this.bones[r];
      i.parent instanceof e.Bone && (n.vertices.push(new e.Vector3), n.vertices.push(new e.Vector3), n.colors.push(new e.Color(0, 0, 1)), n.colors.push(new e.Color(0, 1, 0)))
     }
     var o = new e.LineBasicMaterial({
      vertexColors: e.VertexColors,
      depthTest: !1,
      depthWrite: !1,
      transparent: !0
     });
     e.Line.call(this, n, o, e.LinePieces), this.root = t, this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1, this.update()
    }, e.SkeletonHelper.prototype = Object.create(e.Line.prototype), e.SkeletonHelper.prototype.constructor = e.SkeletonHelper, e.SkeletonHelper.prototype.getBoneList = function(t) {
     var n = [];
     t instanceof e.Bone && n.push(t);
     for (var r = 0; r < t.children.length; r++) n.push.apply(n, this.getBoneList(t.children[r]));
     return n
    }, e.SkeletonHelper.prototype.update = function() {
     for (var t = this.geometry, n = (new e.Matrix4).getInverse(this.root.matrixWorld), r = new e.Matrix4, i = 0, o = 0; o < this.bones.length; o++) {
      var a = this.bones[o];
      a.parent instanceof e.Bone && (r.multiplyMatrices(n, a.matrixWorld), t.vertices[i].setFromMatrixPosition(r), r.multiplyMatrices(n, a.parent.matrixWorld), t.vertices[i + 1].setFromMatrixPosition(r), i += 2)
     }
     t.verticesNeedUpdate = !0, t.computeBoundingSphere()
    }, e.SpotLightHelper = function(t) {
     e.Object3D.call(this), this.light = t, this.light.updateMatrixWorld(), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1;
     var n = new e.CylinderGeometry(0, 1, 1, 8, 1, !0);
     n.applyMatrix((new e.Matrix4).makeTranslation(0, -.5, 0)), n.applyMatrix((new e.Matrix4).makeRotationX(-Math.PI / 2));
     var r = new e.MeshBasicMaterial({
      wireframe: !0,
      fog: !1
     });
     this.cone = new e.Mesh(n, r), this.add(this.cone), this.update()
    }, e.SpotLightHelper.prototype = Object.create(e.Object3D.prototype), e.SpotLightHelper.prototype.constructor = e.SpotLightHelper, e.SpotLightHelper.prototype.dispose = function() {
     this.cone.geometry.dispose(), this.cone.material.dispose()
    }, e.SpotLightHelper.prototype.update = function() {
     var t = new e.Vector3,
      n = new e.Vector3;
     return function() {
      var e = this.light.distance ? this.light.distance : 1e4,
       r = e * Math.tan(this.light.angle);
      this.cone.scale.set(r, r, e), t.setFromMatrixPosition(this.light.matrixWorld), n.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(n.sub(t)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
     }
    }(), e.VertexNormalsHelper = function(t, n, r, i) {
     this.object = t, this.size = void 0 !== n ? n : 1;
     for (var o = void 0 !== r ? r : 16711680, a = void 0 !== i ? i : 1, s = new e.Geometry, u = t.geometry.faces, l = 0, c = u.length; c > l; l++)
      for (var h = u[l], p = 0, d = h.vertexNormals.length; d > p; p++) s.vertices.push(new e.Vector3, new e.Vector3);
     e.Line.call(this, s, new e.LineBasicMaterial({
      color: o,
      linewidth: a
     }), e.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new e.Matrix3, this.update()
    }, e.VertexNormalsHelper.prototype = Object.create(e.Line.prototype), e.VertexNormalsHelper.prototype.constructor = e.VertexNormalsHelper, e.VertexNormalsHelper.prototype.update = function() {
     var t = new e.Vector3;
     return function() {
      var e = ["a", "b", "c", "d"];
      this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
      for (var n = this.geometry.vertices, r = this.object.geometry.vertices, i = this.object.geometry.faces, o = this.object.matrixWorld, a = 0, s = 0, u = i.length; u > s; s++)
       for (var l = i[s], c = 0, h = l.vertexNormals.length; h > c; c++) {
        var p = l[e[c]],
         d = r[p],
         f = l.vertexNormals[c];
        n[a].copy(d).applyMatrix4(o), t.copy(f).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), t.add(n[a]), a += 1, n[a].copy(t), a += 1
       }
      return this.geometry.verticesNeedUpdate = !0, this
     }
    }(), e.VertexTangentsHelper = function(t, n, r, i) {
     this.object = t, this.size = void 0 !== n ? n : 1;
     for (var o = void 0 !== r ? r : 255, a = void 0 !== i ? i : 1, s = new e.Geometry, u = t.geometry.faces, l = 0, c = u.length; c > l; l++)
      for (var h = u[l], p = 0, d = h.vertexTangents.length; d > p; p++) s.vertices.push(new e.Vector3), s.vertices.push(new e.Vector3);
     e.Line.call(this, s, new e.LineBasicMaterial({
      color: o,
      linewidth: a
     }), e.LinePieces), this.matrixAutoUpdate = !1, this.update()
    }, e.VertexTangentsHelper.prototype = Object.create(e.Line.prototype), e.VertexTangentsHelper.prototype.constructor = e.VertexTangentsHelper, e.VertexTangentsHelper.prototype.update = function() {
     var t = new e.Vector3;
     return function() {
      var e = ["a", "b", "c", "d"];
      this.object.updateMatrixWorld(!0);
      for (var n = this.geometry.vertices, r = this.object.geometry.vertices, i = this.object.geometry.faces, o = this.object.matrixWorld, a = 0, s = 0, u = i.length; u > s; s++)
       for (var l = i[s], c = 0, h = l.vertexTangents.length; h > c; c++) {
        var p = l[e[c]],
         d = r[p],
         f = l.vertexTangents[c];
        n[a].copy(d).applyMatrix4(o), t.copy(f).transformDirection(o).multiplyScalar(this.size), t.add(n[a]), a += 1, n[a].copy(t), a += 1
       }
      return this.geometry.verticesNeedUpdate = !0, this
     }
    }(), e.WireframeHelper = function(t, n) {
     var r = void 0 !== n ? n : 16777215,
      i = [0, 0],
      o = {},
      a = function(e, t) {
       return e - t
      },
      s = ["a", "b", "c"],
      u = new e.BufferGeometry;
     if (t.geometry instanceof e.Geometry) {
      for (var l = t.geometry.vertices, c = t.geometry.faces, h = 0, p = new Uint32Array(6 * c.length), d = 0, f = c.length; f > d; d++)
       for (var m = c[d], g = 0; 3 > g; g++) {
        i[0] = m[s[g]], i[1] = m[s[(g + 1) % 3]], i.sort(a);
        var v = i.toString();
        void 0 === o[v] && (p[2 * h] = i[0], p[2 * h + 1] = i[1], o[v] = !0, h++)
       }
      for (var y = new Float32Array(2 * h * 3), d = 0, f = h; f > d; d++)
       for (var g = 0; 2 > g; g++) {
        var b = l[p[2 * d + g]],
         w = 6 * d + 3 * g;
        y[w + 0] = b.x, y[w + 1] = b.y, y[w + 2] = b.z
       }
      u.addAttribute("position", new e.BufferAttribute(y, 3))
     } else if (t.geometry instanceof e.BufferGeometry)
      if (void 0 !== t.geometry.attributes.index) {
       var l = t.geometry.attributes.position.array,
        x = t.geometry.attributes.index.array,
        _ = t.geometry.drawcalls,
        h = 0;
       0 === _.length && (_ = [{
        count: x.length,
        index: 0,
        start: 0
       }]);
       for (var p = new Uint32Array(2 * x.length), S = 0, C = _.length; C > S; ++S)
        for (var E = _[S].start, T = _[S].count, w = _[S].index, d = E, M = E + T; M > d; d += 3)
         for (var g = 0; 3 > g; g++) {
          i[0] = w + x[d + g], i[1] = w + x[d + (g + 1) % 3], i.sort(a);
          var v = i.toString();
          void 0 === o[v] && (p[2 * h] = i[0], p[2 * h + 1] = i[1], o[v] = !0, h++)
         }
       for (var y = new Float32Array(2 * h * 3), d = 0, f = h; f > d; d++)
        for (var g = 0; 2 > g; g++) {
         var w = 6 * d + 3 * g,
          A = 3 * p[2 * d + g];
         y[w + 0] = l[A], y[w + 1] = l[A + 1], y[w + 2] = l[A + 2]
        }
       u.addAttribute("position", new e.BufferAttribute(y, 3))
      } else {
       for (var l = t.geometry.attributes.position.array, h = l.length / 3, P = h / 3, y = new Float32Array(2 * h * 3), d = 0, f = P; f > d; d++)
        for (var g = 0; 3 > g; g++) {
         var w = 18 * d + 6 * g,
          R = 9 * d + 3 * g;
         y[w + 0] = l[R], y[w + 1] = l[R + 1], y[w + 2] = l[R + 2];
         var A = 9 * d + 3 * ((g + 1) % 3);
         y[w + 3] = l[A], y[w + 4] = l[A + 1], y[w + 5] = l[A + 2]
        }
       u.addAttribute("position", new e.BufferAttribute(y, 3))
      } e.Line.call(this, u, new e.LineBasicMaterial({
      color: r
     }), e.LinePieces), this.matrix = t.matrixWorld, this.matrixAutoUpdate = !1
    }, e.WireframeHelper.prototype = Object.create(e.Line.prototype), e.WireframeHelper.prototype.constructor = e.WireframeHelper, e.ImmediateRenderObject = function() {
     e.Object3D.call(this), this.render = function() {}
    }, e.ImmediateRenderObject.prototype = Object.create(e.Object3D.prototype), e.ImmediateRenderObject.prototype.constructor = e.ImmediateRenderObject, e.MorphBlendMesh = function(t, n) {
     e.Mesh.call(this, t, n), this.animationsMap = {}, this.animationsList = [];
     var r = this.geometry.morphTargets.length,
      i = "__default",
      o = 0,
      a = r - 1,
      s = r / 1;
     this.createAnimation(i, o, a, s), this.setAnimationWeight(i, 1)
    }, e.MorphBlendMesh.prototype = Object.create(e.Mesh.prototype), e.MorphBlendMesh.prototype.constructor = e.MorphBlendMesh, e.MorphBlendMesh.prototype.createAnimation = function(e, t, n, r) {
     var i = {
      startFrame: t,
      endFrame: n,
      length: n - t + 1,
      fps: r,
      duration: (n - t) / r,
      lastFrame: 0,
      currentFrame: 0,
      active: !1,
      time: 0,
      direction: 1,
      weight: 1,
      directionBackwards: !1,
      mirroredLoop: !1
     };
     this.animationsMap[e] = i, this.animationsList.push(i)
    }, e.MorphBlendMesh.prototype.autoCreateAnimations = function(e) {
     for (var t, n = /([a-z]+)_?(\d+)/, r = {}, i = this.geometry, o = 0, a = i.morphTargets.length; a > o; o++) {
      var s = i.morphTargets[o],
       u = s.name.match(n);
      if (u && u.length > 1) {
       var l = u[1];
       r[l] || (r[l] = {
        start: 1 / 0,
        end: -1 / 0
       });
       var c = r[l];
       o < c.start && (c.start = o), o > c.end && (c.end = o), t || (t = l)
      }
     }
     for (var l in r) {
      var c = r[l];
      this.createAnimation(l, c.start, c.end, e)
     }
     this.firstAnimation = t
    }, e.MorphBlendMesh.prototype.setAnimationDirectionForward = function(e) {
     var t = this.animationsMap[e];
     t && (t.direction = 1, t.directionBackwards = !1)
    }, e.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(e) {
     var t = this.animationsMap[e];
     t && (t.direction = -1, t.directionBackwards = !0)
    }, e.MorphBlendMesh.prototype.setAnimationFPS = function(e, t) {
     var n = this.animationsMap[e];
     n && (n.fps = t, n.duration = (n.end - n.start) / n.fps)
    }, e.MorphBlendMesh.prototype.setAnimationDuration = function(e, t) {
     var n = this.animationsMap[e];
     n && (n.duration = t, n.fps = (n.end - n.start) / n.duration)
    }, e.MorphBlendMesh.prototype.setAnimationWeight = function(e, t) {
     var n = this.animationsMap[e];
     n && (n.weight = t)
    }, e.MorphBlendMesh.prototype.setAnimationTime = function(e, t) {
     var n = this.animationsMap[e];
     n && (n.time = t)
    }, e.MorphBlendMesh.prototype.getAnimationTime = function(e) {
     var t = 0,
      n = this.animationsMap[e];
     return n && (t = n.time), t
    }, e.MorphBlendMesh.prototype.getAnimationDuration = function(e) {
     var t = -1,
      n = this.animationsMap[e];
     return n && (t = n.duration), t
    }, e.MorphBlendMesh.prototype.playAnimation = function(t) {
     var n = this.animationsMap[t];
     n ? (n.time = 0, n.active = !0) : e.warn("THREE.MorphBlendMesh: animation[" + t + "] undefined in .playAnimation()")
    }, e.MorphBlendMesh.prototype.stopAnimation = function(e) {
     var t = this.animationsMap[e];
     t && (t.active = !1)
    }, e.MorphBlendMesh.prototype.update = function(t) {
     for (var n = 0, r = this.animationsList.length; r > n; n++) {
      var i = this.animationsList[n];
      if (i.active) {
       var o = i.duration / i.length;
       i.time += i.direction * t, i.mirroredLoop ? (i.time > i.duration || i.time < 0) && (i.direction *= -1, i.time > i.duration && (i.time = i.duration, i.directionBackwards = !0), i.time < 0 && (i.time = 0, i.directionBackwards = !1)) : (i.time = i.time % i.duration, i.time < 0 && (i.time += i.duration));
       var a = i.startFrame + e.Math.clamp(Math.floor(i.time / o), 0, i.length - 1),
        s = i.weight;
       a !== i.currentFrame && (this.morphTargetInfluences[i.lastFrame] = 0, this.morphTargetInfluences[i.currentFrame] = 1 * s, this.morphTargetInfluences[a] = 0, i.lastFrame = i.currentFrame, i.currentFrame = a);
       var u = i.time % o / o;
       i.directionBackwards && (u = 1 - u), this.morphTargetInfluences[i.currentFrame] = u * s, this.morphTargetInfluences[i.lastFrame] = (1 - u) * s
      }
     }
    },
    function() {
     var e = 0,
      t = /MSIE (\d+\.\d+);/.test(navigator.userAgent),
      n = !!navigator.userAgent.match(/Trident\/7.0/),
      r = navigator.userAgent.indexOf("rv:11.0");
     t && (e = new Number(RegExp.$1)), -1 != navigator.appVersion.indexOf("MSIE 10") && (e = 10), n && -1 != r && (e = 11), e > 0 && (HTMLElement.prototype.getBoundingClientRect = function() {
      var e = HTMLElement.prototype.getBoundingClientRect;
      return function() {
       try {
        return e.apply(this, arguments)
       } catch (t) {
        return {
         left: "",
         right: "",
         top: "",
         bottom: ""
        }
       }
      }
     }())
    }(), e
  }(),
  l = this && this.__extends || function(e, t) {
   function n() {
    this.constructor = e
   }
   for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);
   e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
  };
 ! function(e) {
  var t;
  ! function(e) {
   e.VERSION = {
    number: "1.5.3",
    date: "Dec 13 2016"
   }
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   e.THREE = u
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   function t() {
    var e = document.createElement("canvas");
    try {
     var t = e.getContext("webgl") || e.getContext("experimental-webgl");
     return !!t
    } catch (n) {
     return console.log(n), !1
    }
   }
   e.checkWebGL = t;
   var n = function() {
    function t() {}
    return t.setPickBase = function(e, t, n, r) {
     var i = 24,
      o = e << i - t | n,
      a = o >> 16 & 255,
      s = o >> 8 & 255,
      u = 255 & o;
     r.r = a / 255, r.g = s / 255, r.b = u / 255
    }, t.setPickColor = function(e, t, n, r, i) {
     var o = 24,
      a = e << o - t | n,
      s = a >> 16 & 255,
      u = a >> 8 & 255,
      l = 255 & a;
     r[i] = s / 255, r[i + 1] = u / 255, r[i + 2] = l / 255
    }, t.toSurface = function(e) {
     for (var t = 3 * e.vertices.length, n = new Float32Array(t), r = new Float32Array(t), i = new Uint32Array(3 * e.faces.length), o = Array(e.vertices.length), a = 0; a < e.faces.length; a++) {
      var s = e.faces[a];
      o[s.a] = s.vertexNormals[0], o[s.b] = s.vertexNormals[1], o[s.c] = s.vertexNormals[2], i[3 * a] = s.a, i[3 * a + 1] = s.b, i[3 * a + 2] = s.c
     }
     for (var a = 0; a < e.vertices.length; a++) {
      var u = e.vertices[a];
      n[3 * a] = u.x, n[3 * a + 1] = u.y, n[3 * a + 2] = u.z;
      var l = o[a];
      r[3 * a] = l.x, r[3 * a + 1] = l.y, r[3 * a + 2] = l.z
     }
     return {
      vertices: n,
      vertexCount: e.vertices.length,
      triangleIndices: i,
      triangleCount: e.faces.length,
      normals: r
     }
    }, t.getIndexedBufferGeometry = function(t) {
     for (var n = 3 * t.vertices.length, r = new Float32Array(n), i = new Float32Array(n), o = new Uint32Array(3 * t.faces.length), a = Array(t.vertices.length), s = 0; s < t.faces.length; s++) {
      var u = t.faces[s];
      a[u.a] = u.vertexNormals[0], a[u.b] = u.vertexNormals[1], a[u.c] = u.vertexNormals[2], o[3 * s] = u.a, o[3 * s + 1] = u.b, o[3 * s + 2] = u.c
     }
     for (var s = 0; s < t.vertices.length; s++) {
      var l = t.vertices[s];
      r[3 * s] = l.x, r[3 * s + 1] = l.y, r[3 * s + 2] = l.z;
      var c = a[s];
      i[3 * s] = c.x, i[3 * s + 1] = c.y, i[3 * s + 2] = c.z
     }
     var h = new e.THREE.BufferGeometry;
     return h.addAttribute("position", new e.THREE.BufferAttribute(r, 3)), h.addAttribute("normal", new e.THREE.BufferAttribute(i, 3)), h.addAttribute("index", new e.THREE.BufferAttribute(o, 1)), h
    }, t
   }();
   e.GeometryHelper = n
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e, t) {
     t.r = e.r, t.g = e.g, t.b = e.b
    }

    function r(e) {
     var t = e.r,
      n = e.g,
      r = e.b;
     return {
      r: t,
      g: n,
      b: r
     }
    }

    function i(t) {
     return new e.THREE.Vector3(t.r, t.g, t.b)
    }

    function o(e) {
     return {
      r: e.x,
      g: e.y,
      b: e.z
     }
    }

    function a(e, t, n) {
     return {
      r: e / 255,
      g: t / 255,
      b: n / 255
     }
    }

    function s(e, t, n) {
     return 0 > n && (n += 1), n > 1 && (n -= 1), 1 / 6 > n ? e + 6 * (t - e) * n : .5 > n ? t : 2 / 3 > n ? e + (t - e) * (2 / 3 - n) * 6 : e
    }

    function u(e, t, n) {
     var r, i, o;
     if (0 == t) r = i = o = n;
     else {
      var a = .5 > n ? n * (1 + t) : n + t - n * t,
       u = 2 * n - a;
      r = s(u, a, e + 1 / 3), i = s(u, a, e), o = s(u, a, e - 1 / 3)
     }
     return {
      r: r,
      g: i,
      b: o
     }
    }

    function l(e, t, n) {
     var r, i, o = [];
     if (0 === t) r = [n, n, n];
     else switch (e /= 60, i = Math.floor(e), o = [n * (1 - t), n * (1 - t * (e - i)), n * (1 - t * (1 - (e - i)))], i) {
      case 0:
       r = [n, o[2], o[0]];
       break;
      case 1:
       r = [o[1], n, o[0]];
       break;
      case 2:
       r = [o[0], n, o[2]];
       break;
      case 3:
       r = [o[0], o[1], n];
       break;
      case 4:
       r = [o[2], o[0], n];
       break;
      default:
       r = [n, o[0], o[1]]
     }
     return {
      r: r[0],
      g: r[1],
      b: r[2]
     }
    }

    function c() {
     return e.Utils.Palette.getRandomColor()
    }

    function h(e) {
     return {
      r: (e >> 16 & 255) / 255,
      g: (e >> 8 & 255) / 255,
      b: (255 & e) / 255
     }
    }

    function p(e) {
     return "#" !== e[0] ? h(0) : 4 === e.length ? p("#" + e[1] + e[1] + e[2] + e[2] + e[3] + e[3]) : 7 === e.length ? h(parseInt(e.substr(1), 16)) : h(0)
    }

    function d(e, t, n, r) {
     r.r = e.r + (t.r - e.r) * n, r.g = e.g + (t.g - e.g) * n, r.b = e.b + (t.b - e.b) * n
    }

    function f(e) {
     return void 0 !== e.r && void 0 !== e.g && void 0 !== e.b
    }
    t.copy = n, t.clone = r, t.toVector = i, t.fromVector = o, t.fromRgb = a, t.fromHsl = u, t.fromHsv = l, t.random = c, t.fromHex = h, t.fromHexString = p, t.interpolate = d, t.isColor = f
   }(t = e.Color || (e.Color = {}));
   var n;
   ! function(e) {
    function n(e) {
     var t = +e.transparency.alpha;
     return isNaN(t) && (t = 1), .999 >= t
    }

    function r(e, t, n) {
     var r = e.colors.get(t);
     return r ? r : n
    }

    function i(e) {
     void 0 === e && (e = {});
     var n = e.colors,
      r = void 0 === n ? new Map : n,
      i = e.transparency,
      o = void 0 === i ? u.Transparency : i,
      a = e.interactive,
      s = void 0 === a ? !0 : a,
      l = e.disableFog,
      c = void 0 === l ? !1 : l,
      h = r.get("Uniform");
     return h || (r.set("Uniform", u.UniformColor), h = u.UniformColor), {
      colors: r,
      transparency: o,
      interactive: s,
      disableFog: c,
      setElementColor: function(e, n) {
       t.copy(h, n)
      }
     }
    }

    function o(e, t) {
     void 0 === t && (t = {});
     var n = t.colors,
      r = void 0 === n ? new Map : n,
      i = t.transparency,
      o = void 0 === i ? u.Transparency : i,
      a = t.interactive,
      s = void 0 === a ? !0 : a,
      l = t.disableFog,
      c = void 0 === l ? !1 : l;
     return {
      colors: r,
      transparency: o ? o : u.Transparency,
      interactive: s,
      disableFog: c,
      setElementColor: function(t, n) {
       e.setColor(e.getProperty(t), n)
      }
     }
    }

    function a(e, t, n) {
     var r = new c(t, n);
     return {
      getProperty: e,
      setColor: function(e, t) {
       return r.setColor(e, t)
      }
     }
    }

    function s(e, t) {
     var n = new l(t);
     return {
      getProperty: e,
      setColor: function(e, t) {
       return n.setColor(e, t)
      }
     }
    }
    var u;
    ! function(e) {
     e.HighlightColor = {
      r: 1,
      g: 1,
      b: 0
     }, e.SelectionColor = {
      r: 171 / 255,
      g: 71 / 255,
      b: 183 / 255
     }, e.UniformColor = {
      r: 68 / 255,
      g: 130 / 255,
      b: 255
     }, e.Transparency = {
      alpha: 1,
      writeDepth: !1
     }
    }(u = e.Default || (e.Default = {})), e.isTransparent = n, e.getColor = r, e.createUniform = i, e.createMapping = o, e.createColorMapMapping = a, e.createPalleteMapping = s;
    var l = function() {
      function e(e) {
       this.pallete = e, this.colorIndex = 0, this.colorMap = new Map
      }
      return e.prototype.setColor = function(e, n) {
       var r = this.colorMap.get(e);
       r || (this.colorIndex = (this.colorIndex + 1) % this.pallete.length | 0, r = this.pallete[this.colorIndex], this.colorMap.set(e, r)), t.copy(r, n)
      }, e
     }(),
     c = function() {
      function e(e, t) {
       this.map = e, this.fallbackColor = t
      }
      return e.prototype.setColor = function(e, n) {
       var r = this.map.get(e);
       r || (r = this.fallbackColor), t.copy(r, n)
      }, e
     }()
   }(n = e.Theme || (e.Theme = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t = function() {
    function t() {}
    return t.getPickMaterial = function() {
     return new e.THREE.ShaderMaterial({
      attributes: {
       pColor: {
        type: "v4",
        value: []
       }
      },
      vertexShader: t.pickVertexShader,
      fragmentShader: t.pickFragmentShader,
      blending: e.THREE.NoBlending,
      shading: e.THREE.FlatShading,
      side: e.THREE.DoubleSide
     })
    }, t.getPickExcludeMaterial = function() {
     return new e.THREE.MeshBasicMaterial({
      color: e.THREE.ColorKeywords.white,
      side: e.THREE.DoubleSide
     })
    }, t.compareVectorAndColor = function(e, t) {
     return e.x === t.r && e.y === t.g && e.z === t.b
    }, t.updateMaterial = function(n, r, i) {
     var o = !1;
     t.updateTransparencyAndFog(n, r, i) && (o = !0), n instanceof e.THREE.ShaderMaterial && t.updateHighlightColor(n, r) && (o = !0), o && (n.needsUpdate = !0)
    }, t.updateHighlightColor = function(n, r) {
     var i = !1,
      o = n.uniforms.selectionColor.value,
      a = e.Theme.getColor(r, "Selection", e.Theme.Default.SelectionColor);
     t.compareVectorAndColor(o, a) || (n.uniforms.selectionColor.value = e.Color.toVector(a), i = !0), o = n.uniforms.highlightColor.value;
     var s = e.Theme.getColor(r, "Highlight", e.Theme.Default.HighlightColor);
     return t.compareVectorAndColor(o, s) || (n.uniforms.highlightColor.value = e.Color.toVector(s), i = !0), i
    }, t.updateTransparencyAndFog = function(t, n, r) {
     var i = n.transparency,
      o = +i.alpha;
     isNaN(o) && (o = 1);
     var a = .999 >= o,
      s = !!i.writeDepth;
     a || (o = 1, s = !0), r && (r.renderOrder = a ? 1 : 0);
     var u = !1;
     return (t instanceof e.THREE.MeshPhongMaterial || t instanceof e.THREE.ShaderMaterial) && (t.transparent !== a && (t.transparent = a, u = !0), t.depthWrite !== s && (t.depthWrite = s, u = !0), t.opacity !== o && (t.opacity = o, u = !0), t.fog !== !n.disableFog && (t.fog = !n.disableFog, u = !0), t instanceof e.THREE.ShaderMaterial && t.uniforms.opacity && (t.uniforms.opacity.value = o)), u
    }, t.getMeshMaterial = function(n, r) {
     void 0 === n && (n = e.THREE.SmoothShading), void 0 === r && (r = !1);
     var i = t.shader,
      o = (e.THREE.UniformsUtils.clone(i.uniforms), new e.THREE.ShaderMaterial({
       uniforms: e.THREE.UniformsUtils.clone(i.uniforms),
       attributes: {
        vState: {
         type: "f",
         value: []
        }
       },
       lights: !0,
       fog: !0,
       vertexShader: i.vertexShader,
       fragmentShader: i.fragmentShader,
       shading: n,
       side: e.THREE.DoubleSide,
       vertexColors: e.THREE.VertexColors,
       blending: e.THREE.NormalBlending,
       wireframe: r,
       linewidth: 1
      }));
     return o
    }, t.getPhongVertexColorMaterial = function() {
     return new e.THREE.MeshPhongMaterial({
      specular: 11184810,
      shininess: 2,
      shading: e.THREE.SmoothShading,
      vertexColors: e.THREE.VertexColors,
      side: e.THREE.DoubleSide,
      metal: !0
     })
    }, t.getDefaultHighlightMaterial = function() {
     return new e.THREE.MeshPhongMaterial({
      color: 16777215,
      specular: 11184810,
      shininess: 2,
      shading: e.THREE.SmoothShading,
      side: e.THREE.DoubleSide,
      metal: !0
     })
    }, t.applyColorToMap = function(e, t, n, r) {
     for (var i = n.array, o = {
       r: .45,
       g: .45,
       b: .45
      }, a = e.vertexRanges, s = 0, u = e.elementIndices; s < u.length; s++) {
      var l = u[s],
       c = e.elementMap.get(l),
       h = e.elementRanges[2 * c],
       p = e.elementRanges[2 * c + 1];
      if (h !== p) {
       r(l, o);
       for (var d = h; p > d; d += 2)
        for (var f = a[d], m = a[d + 1], g = f; m > g; g++) i[3 * g] = o.r, i[3 * g + 1] = o.g, i[3 * g + 2] = o.b
      }
     }
     n.needsUpdate = !0
    }, t
   }();
   t.pickVertexShader = ["attribute vec4 pColor;", "varying vec4 pC;", "void main() {", "pC = pColor;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"), t.pickFragmentShader = ["varying vec4 pC;", "void main() {", "gl_FragColor = pC;", "}"].join("\n"), t.shader = {
    uniforms: e.THREE.UniformsUtils.merge([e.THREE.UniformsLib.common, e.THREE.UniformsLib.bump, e.THREE.UniformsLib.normalmap, e.THREE.UniformsLib.fog, e.THREE.UniformsLib.lights, e.THREE.UniformsLib.shadowmap, {
     emissive: {
      type: "c",
      value: new e.THREE.Color(0)
     },
     specular: {
      type: "c",
      value: new e.THREE.Color(1118481)
     },
     shininess: {
      type: "f",
      value: 2
     },
     wrapRGB: {
      type: "v3",
      value: new e.THREE.Vector3(1, 1, 1)
     },
     highlightColor: {
      type: "v3",
      value: new e.THREE.Vector3(1, 1, 0)
     },
     selectionColor: {
      type: "v3",
      value: new e.THREE.Vector3(1, 0, 0)
     }
    }]),
    vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "#ifndef FLAT_SHADED", "	varying vec3 vNormal;", "#endif", e.THREE.ShaderChunk.common, e.THREE.ShaderChunk.map_pars_vertex, e.THREE.ShaderChunk.lightmap_pars_vertex, e.THREE.ShaderChunk.envmap_pars_vertex, e.THREE.ShaderChunk.lights_phong_pars_vertex, e.THREE.ShaderChunk.color_pars_vertex, e.THREE.ShaderChunk.morphtarget_pars_vertex, e.THREE.ShaderChunk.skinning_pars_vertex, e.THREE.ShaderChunk.shadowmap_pars_vertex, e.THREE.ShaderChunk.logdepthbuf_pars_vertex, "attribute float vState;", "varying float vS;", "void main() {", "   vS = vState;", e.THREE.ShaderChunk.map_vertex, e.THREE.ShaderChunk.lightmap_vertex, e.THREE.ShaderChunk.color_vertex, e.THREE.ShaderChunk.morphnormal_vertex, e.THREE.ShaderChunk.skinbase_vertex, e.THREE.ShaderChunk.skinnormal_vertex, e.THREE.ShaderChunk.defaultnormal_vertex, "#ifndef FLAT_SHADED", "	vNormal = normalize( transformedNormal );", "#endif", e.THREE.ShaderChunk.morphtarget_vertex, e.THREE.ShaderChunk.skinning_vertex, e.THREE.ShaderChunk.default_vertex, e.THREE.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = -mvPosition.xyz;", e.THREE.ShaderChunk.worldpos_vertex, e.THREE.ShaderChunk.envmap_vertex, e.THREE.ShaderChunk.lights_phong_vertex, e.THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
    fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", "uniform float opacity;", "uniform vec3 highlightColor;", "uniform vec3 selectionColor;", e.THREE.ShaderChunk.common, e.THREE.ShaderChunk.color_pars_fragment, e.THREE.ShaderChunk.map_pars_fragment, e.THREE.ShaderChunk.alphamap_pars_fragment, e.THREE.ShaderChunk.lightmap_pars_fragment, e.THREE.ShaderChunk.envmap_pars_fragment, e.THREE.ShaderChunk.fog_pars_fragment, e.THREE.ShaderChunk.lights_phong_pars_fragment, e.THREE.ShaderChunk.shadowmap_pars_fragment, e.THREE.ShaderChunk.bumpmap_pars_fragment, e.THREE.ShaderChunk.normalmap_pars_fragment, e.THREE.ShaderChunk.specularmap_pars_fragment, e.THREE.ShaderChunk.logdepthbuf_pars_fragment, "varying float vS;", "void main() {", "	vec3 outgoingLight = vec3( 0.0 );", "	vec4 diffuseColor;", "   if (vS < 0.33) { diffuseColor = vec4( vColor, opacity ); }", "   else if (vS - floor(vS + 0.1) > 0.33) { diffuseColor = vec4(highlightColor, opacity); }", "	else { diffuseColor = vec4(selectionColor, opacity); }", e.THREE.ShaderChunk.logdepthbuf_fragment, e.THREE.ShaderChunk.map_fragment, e.THREE.ShaderChunk.alphamap_fragment, e.THREE.ShaderChunk.alphatest_fragment, e.THREE.ShaderChunk.specularmap_fragment, e.THREE.ShaderChunk.lights_phong_fragment, e.THREE.ShaderChunk.lightmap_fragment, e.THREE.ShaderChunk.envmap_fragment, e.THREE.ShaderChunk.shadowmap_fragment, e.THREE.ShaderChunk.linear_to_gamma_fragment, e.THREE.ShaderChunk.fog_fragment, "#ifdef USE_FOG", "   if (diffuseColor.a > 0.99) { gl_FragColor = vec4( outgoingLight, diffuseColor.a ); }", "   else { gl_FragColor = vec4( outgoingLight, (1.0 - fogFactor) * diffuseColor.a ); }", "#else", "	gl_FragColor = vec4( outgoingLight, diffuseColor.a );", "#endif", "}"].join("\n")
   }, e.MaterialsHelper = t
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t = function() {
    function e() {}
    return e
   }();
   e.GeometryBase = t;
   var n = function() {
    function t() {
     this.id = -1, this.entity = void 0, this.centroid = new e.THREE.Vector3, this.radius = 0, this.object = void 0, this.theme = void 0, this.disposeList = [], this.pickObject = void 0, this.pickBufferAttributes = [], this.dirty = !1, this.props = {}, this.tag = void 0
    }
    return t.prototype.updateVisibility = function(e) {
     this.dirty = !0, this.object.visible = e, this.pickObject && (this.pickObject.visible = this.getPickObjectVisibility(e))
    }, t.prototype.getVisibility = function() {
     return this.object.visible
    }, t.prototype.applyTheme = function(e) {
     this.dirty = !0, this.theme = e, e.interactive ? this.pickObject && (this.pickObject.visible = this.object.visible) : this.pickObject && (this.pickObject.visible = !1), this.applyThemeInternal(e)
    }, t.prototype.updateId = function(t, n) {
     this.id = t;
     for (var r = 0, i = this.pickBufferAttributes; r < i.length; r++) {
      var o = i[r],
       a = o.array;
      if (8 >= n)
       for (var s = 0, u = a.length; u > s; s += 4) e.Selection.Picking.applySceneIdFast(this.id, s, a);
      else
       for (var s = 0, u = a.length; u > s; s += 4) e.Selection.Picking.applySceneIdSlow(n - 8, this.id, s, a);
      o.needsUpdate = !0
     }
    }, t.prototype.dispose = function() {
     for (var e = 0, t = this.disposeList; e < t.length; e++) {
      var n = t[e];
      n && n.dispose()
     }
     this.disposeList = []
    }, t.prototype.highlight = function(e) {
     var t = this.highlightInternal(e);
     return this.dirty = this.dirty || t, t
    }, t.prototype.applySelection = function(e, t) {
     var n = this.applySelectionInternal(e, t);
     return this.dirty = this.dirty || n, n
    }, t.prototype.getBoundingSphereOfSelection = function() {
     return void 0
    }, t.prototype.getPickObjectVisibility = function(e) {
     return e && this.theme.interactive
    }, t
   }();
   e.Model = n
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t = function() {
    function e(e) {
     this.scene = e, this.availableIds = [], this.list = [], this.map = new Map, this.maxId = 1, this._idWidth = 8
    }
    return Object.defineProperty(e.prototype, "idWidth", {
     get: function() {
      return this._idWidth
     },
     enumerable: !0,
     configurable: !0
    }), Object.defineProperty(e.prototype, "all", {
     get: function() {
      return this.list
     },
     enumerable: !0,
     configurable: !0
    }), Object.defineProperty(e.prototype, "count", {
     get: function() {
      return this.map.size
     },
     enumerable: !0,
     configurable: !0
    }), e.prototype.getBySceneId = function(e) {
     return this.map.get(e)
    }, e.prototype.add = function(e, t) {
     void 0 === t && (t = !0);
     var n = -1;
     n = this.availableIds.length ? this.availableIds.pop() : this.maxId++, this.map.set(n, e), this.list.push(e), e.updateId(n, 8), e.object && this.scene.scene.add(e.object), e.pickObject && this.scene.pickScene.add(e.pickObject), t ? this.scene.camera.reset() : this.scene.forceRender()
    }, e.prototype.dispose = function(e) {
     e.object && this.scene.scene.remove(e.object), e.pickObject && this.scene.pickScene.remove(e.pickObject), e.dispose()
    }, e.prototype.removeAndDispose = function(e) {
     if (this.map.get(e.id)) {
      this.availableIds.push(e.id), this.dispose(e), this.map.delete(e.id);
      var t = this.list.indexOf(e);
      this.list[t] = this.list[this.list.length - 1], this.list.pop(), e.id === this.maxId && this.maxId--, e.id = -1, this.scene.forceRender()
     }
    }, e.prototype.clear = function() {
     for (var e = 0, t = this.list; e < t.length; e++) {
      var n = t[e];
      this.dispose(n)
     }
     this.list = [], this.maxId = 0, this.availableIds = [], this.map.clear(), this.scene.forceRender()
    }, e
   }();
   e.ModelStore = t
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(e) {
    e[e.Perspective = 0] = "Perspective", e[e.Orthographic = 1] = "Orthographic"
   }(n = t.CameraType || (t.CameraType = {}));
   var r = function() {
    function t(t) {
     var n = this;
     this.touchSlabOn = !1, this.touchStartPosition = {
      x: 0,
      y: 0
     }, this.touchPosition = {
      x: 0,
      y: 0
     }, this.radius = 0, this.slabWheelRate = 1 / 15, this._planeDelta = new e.Core.Rx.Subject, this.subs = [], this.planeDelta = this._planeDelta;
     var r = {
      wheel: function(e) {
       return n.handleMouseWheel(e)
      },
      touchStart: function(e) {
       return n.touchstart(e)
      },
      touchEnd: function(e) {
       return n.touchend(e)
      },
      touchMove: function(e) {
       return n.touchmove(e)
      }
     };
     t.addEventListener("mousewheel", r.wheel), t.addEventListener("DOMMouseScroll", r.wheel), t.addEventListener("touchstart", r.touchStart, !1), t.addEventListener("touchend", r.touchEnd, !1), t.addEventListener("touchmove", r.touchMove, !1), this.subs.push(function() {
      return t.removeEventListener("mousewheel", r.wheel)
     }), this.subs.push(function() {
      return t.removeEventListener("DOMMouseScroll", r.wheel)
     }), this.subs.push(function() {
      return t.removeEventListener("touchstart", r.touchStart, !1)
     }), this.subs.push(function() {
      return t.removeEventListener("touchend", r.touchEnd, !1)
     }), this.subs.push(function() {
      return t.removeEventListener("touchmove", r.touchMove, !1)
     })
    }
    return t.prototype.updateSize = function(e, t) {
     this.width = e, this.height = t
    }, t.prototype.updateRadius = function(e) {
     this.radius = e
    }, t.prototype.destroy = function() {
     for (var e = 0, t = this.subs; e < t.length; e++) {
      var n = t[e];
      n()
     }
     this.subs = [], this._planeDelta.onCompleted()
    }, t.prototype.handleMouseWheel = function(e) {
     e.stopPropagation && e.stopPropagation(), e.preventDefault && e.preventDefault();
     var t = 0;
     e.wheelDelta ? t = e.wheelDelta : e.detail && (t = -e.detail);
     var n = 0 > t ? 1 : -1;
     t = this.radius * this.slabWheelRate * n, this._planeDelta.onNext(t)
    }, t.prototype.touchstart = function(e) {
     switch (e.touches.length) {
      case 3:
       this.touchStartPosition.x = 0, this.touchStartPosition.y = 0;
       for (var t = 0; 3 > t; t++) this.touchStartPosition.x += e.touches[t].clientX / 3, this.touchStartPosition.y += e.touches[t].clientY / 3;
       this.touchSlabOn = !0;
       break;
      default:
       this.touchSlabOn = !1
     }
    }, t.prototype.touchend = function() {
     this.touchSlabOn = !1
    }, t.prototype.touchmove = function(e) {
     if (this.touchSlabOn) {
      this.touchPosition.x = 0, this.touchPosition.y = 0;
      for (var t = 0; 3 > t; t++) this.touchPosition.x += e.touches[t].clientX / 3, this.touchPosition.y += e.touches[t].clientY / 3;
      var n = -5 * this.radius * (this.touchPosition.y - this.touchStartPosition.y) / this.height;
      this.touchStartPosition.x = this.touchPosition.x, this.touchStartPosition.y = this.touchPosition.y, this._planeDelta.onNext(n)
     }
    }, t
   }();
   t.SlabControls = r;
   var i = function() {
    function e(e, n) {
     this.scene = e, this.domElement = n, this.fog = new t.THREE.Fog(0, 0, 500), this.focusPoint = new t.THREE.Vector3(0, 0, 0), this.focusRadius = 0, this.targetDistance = 0, this.nearPlaneDistance = 0, this.nearPlaneDelta = 0, this.fogEnabled = !0, this.fogDelta = 0, this.observers = [], this.setup()
    }
    return e.shouldInUpdateInclude = function(e) {
     return !isNaN(e.centroid.x) && e.getVisibility()
    }, e.dist = function(e, t) {
     e.centroid.x - t.centroid.x
    }, e.prototype.updateFocus = function(n) {
     if (n.length) {
      var r = n.filter(function(t) {
       return e.shouldInUpdateInclude(t)
      }).sort(function(e, t) {
       return t.radius - e.radius
      });
      if (r.length) {
       for (var i = [r[0]], o = new t.THREE.Vector3, a = 1; a < r.length; a++) {
        for (var s = r[a], u = !0, l = 0, c = i; l < c.length; l++) {
         var h = c[l],
          p = o.subVectors(s.centroid, h.centroid).length();
         if (p < h.radius) {
          u = !1;
          break
         }
        }
        u && i.push(s)
       }
       var d = this.focusPoint;
       d.x = 0, d.y = 0, d.z = 0;
       for (var f = 0, m = i; f < m.length; f++) {
        var h = m[f];
        d.add(h.centroid)
       }
       d.multiplyScalar(1 / i.length);
       for (var g = 0, v = 0, y = r; v < y.length; v++) {
        var b = y[v];
        g = Math.max(g, d.distanceTo(b.centroid) + b.radius)
       }
       this.focusRadius = g, this.slabControls.updateRadius(this.focusRadius)
      }
     }
    }, e.prototype.focus = function() {
     this.controls.reset();
     var e = this.focusPoint;
     this.camera.position.set(e.x, e.y, e.z - 4 * this.focusRadius), this.camera.lookAt(e), this.controls.target.set(e.x, e.y, e.z), this.cameraUpdated()
    }, e.prototype.reset = function() {
     this.nearPlaneDelta = 0, this.fogDelta = 0, this.updateFocus(this.scene.models.all), this.focus()
    }, e.prototype.snapshot = function() {
     return this.controls.getState()
    }, e.prototype.restore = function(e) {
     this.controls.setState(e), this.scene.forceRender()
    }, e.prototype.focusOnModel = function() {
     for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
     this.updateFocus(e), this.nearPlaneDelta = 0, this.fogDelta = 0, this.controls.panAndMoveToDistance(this.focusPoint, 4 * this.focusRadius)
    }, e.prototype.focusOnPoint = function(e, t) {
     this.focusPoint.x = e.x, this.focusPoint.y = e.y, this.focusPoint.z = e.z, this.focusRadius = t, this.slabControls.updateRadius(this.focusRadius), this.nearPlaneDelta = 0, this.fogDelta = 0, this.controls.panAndMoveToDistance(this.focusPoint, 4 * t)
    }, e.prototype.move = function(e) {
     this.controls.panTo(e)
    }, e.prototype.updateSize = function(e, n) {
     var r = this.camera;
     r instanceof t.THREE.PerspectiveCamera && (r.aspect = e / n), this.slabControls.updateSize(e, n), this.camera.updateProjectionMatrix()
    }, Object.defineProperty(e.prototype, "position", {
     get: function() {
      return this.camera.position
     },
     enumerable: !0,
     configurable: !0
    }), Object.defineProperty(e.prototype, "object", {
     get: function() {
      return this.camera
     },
     enumerable: !0,
     configurable: !0
    }), e.prototype.dispose = function() {
     this.slabControls && (this.slabControls.destroy(), this.slabControls = void 0), this.unbindCamera && (this.unbindCamera(), this.unbindCamera = void 0), this.controls && (this.controls.destroy(), this.controls = void 0)
    }, e.prototype.planeDeltaUpdate = function(e) {
     var t = this.computeNearDistance(),
      n = t + this.nearPlaneDelta + e;
     e > 0 && n > this.targetDistance && (e = 0), 0 > e && .01 > n && (e = 0), this.nearPlaneDelta += e, this.fogDelta += e, this.cameraUpdated()
    }, e.prototype.computeNearDistance = function() {
     var e = this.controls.target.distanceTo(this.camera.position);
     return e > this.focusRadius ? e - this.focusRadius : 0
    }, e.prototype.cameraUpdated = function() {
     var e = this.scene.options;
     this.fogEnabled = !!e.enableFog;
     var n = this.camera;
     n instanceof t.THREE.PerspectiveCamera && (n.fov = e.cameraFOV), this.targetDistance = this.controls.target.distanceTo(this.camera.position);
     var r = this.computeNearDistance() + this.nearPlaneDelta;
     if (this.camera.near = Math.max(.01, Math.min(r, this.targetDistance - .5)), e.enableFog) {
      var i = this.targetDistance - this.camera.near + 1 * this.focusRadius - this.nearPlaneDelta,
       o = this.targetDistance - this.camera.near + 2 * this.focusRadius - this.nearPlaneDelta;
      this.fog.near = Math.max(i, .1), this.fog.far = Math.max(o, .2)
     } else this.fog.far = 1000001, this.fog.near = 1e6;
     this.camera.updateProjectionMatrix(), this.scene.forceRender();
     for (var a = 0, s = this.observers; a < s.length; a++) {
      var u = s[a];
      u.call(null, this)
     }
    }, e.prototype.createCamera = function() {
     if (this.scene.options.cameraType === n.Perspective) this.camera = new t.THREE.PerspectiveCamera(this.scene.options.cameraFOV, this.scene.parentElement.clientWidth / this.scene.parentElement.clientHeight, .1, 1e6);
     else {
      var e = this.scene.parentElement.clientWidth,
       r = this.scene.parentElement.clientHeight,
       i = 100,
       o = r / e * i;
      this.camera = new t.THREE.OrthographicCamera(.5 * i / -2, .5 * i / 2, o / 2, o / -2, .1, 1e6)
     }
     this.controls && (this.controls.camera = this.camera, this.reset())
    }, e.prototype.setup = function() {
     var e = this;
     this.dispose(), this.createCamera(), this.controls = new t.CameraControls(this.camera, this.domElement, this.scene);
     var n = this.scene.options.clearColor;
     this.fog.color.setRGB(n.r, n.g, n.b), this.scene.scene.fog = this.fog;
     var i = function() {
      return e.cameraUpdated()
     };
     this.slabControls = new r(this.domElement);
     var o = this.slabControls.planeDelta.subscribe(function(t) {
      return e.planeDeltaUpdate(t)
     });
     this.controls.events.addEventListener("change", i), this.unbindCamera = function() {
      e.controls.events.removeEventListener("change", i), o.dispose(), e.observers = []
     }, this.reset()
    }, e.prototype.observe = function(e) {
     this.observers.push(e)
    }, e.prototype.stopObserving = function(e) {
     this.observers = this.observers.filter(function(t) {
      return t !== e
     })
    }, e
   }();
   t.Camera = i
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   t.DefaultSceneOptions = {
    alpha: !1,
    clearColor: {
     r: 0,
     g: 0,
     b: 0
    },
    cameraFOV: 30,
    cameraType: t.CameraType.Perspective,
    enableFog: !0
   };
   var n = function() {
    function e(e, t) {
     this.renderState = e, this.domElement = t, this.position = {
      x: 0,
      y: 0
     }, this.lastPosition = {
      x: 0,
      y: 0
     }, this.isDirty = !0, this.rect = {
      left: 0,
      top: 0,
      right: 0,
      bottom: 0
     }, this.exactPosition = {
      x: 0,
      y: 0
     }, this.isInside = !1, this.isButtonDown = !1
    }
    return e.prototype.updateRect = function() {
     var e = this.domElement.getBoundingClientRect();
     this.rect.bottom = e.bottom, this.rect.top = e.top, this.rect.left = e.left, this.rect.right = e.right
    }, e.prototype.updatePosition = function(e, t) {
     (this.position.x !== e || this.position.y !== t) && (this.isDirty = !0, this.position.x = e, this.position.y = t)
    }, e.prototype.update = function() {
     return this.lastPosition.x === this.position.x && this.lastPosition.y === this.position.y ? !1 : (this.lastPosition.x = this.position.x, this.lastPosition.y = this.position.y, !0)
    }, e.prototype.setExactPosition = function() {
     if (this.isDirty) {
      var e = 0 | Math.round((this.position.x - this.rect.left) / (this.rect.right - this.rect.left) * this.renderState.width),
       t = 0 | Math.round((this.position.y - this.rect.top) / (this.rect.bottom - this.rect.top) * this.renderState.height);
      this.exactPosition.x = e, this.exactPosition.y = t, this.isDirty = !1
     }
    }, e
   }();
   t.MouseInfo = n;
   var r = function() {
    function e() {
     this.lights = []
    }
    return e.prototype.setup = function(e) {
     {
      var n = new t.THREE.PointLight(11184810, .75);
      n.clone()
     }
     e.add(n), this.lights = [n];
     var r = new t.THREE.AmbientLight(10066329);
     e.add(r)
    }, e.prototype.update = function(e) {
     for (var t = 0, n = this.lights; t < n.length; t++) {
      var r = n[t];
      r.position.copy(e)
     }
    }, e
   }();
   t.DefaultLighting = r;
   var i = function() {
    function e() {
     this.width = 0, this.height = 0, this.resizing = !1, this.rendered = !1, this.lastRenderTime = 0, this.pickDelta = 0, this.animationFrame = 0
    }
    return e
   }();
   t.RenderState = i;
   var o = function() {
    function o(o, a) {
     void 0 === a && (a = {});
     var s = this;
     this.renderState = new i, this.pickInfo = new t.Selection.Pick, this.selectInfo = null, this.unbindEvents = [], this.updateSizeInterval = void 0, this.models = new t.ModelStore(this), this.events = new t.THREE.EventDispatcher, this.clearHighlightsCall = function() {
      return s.clearHighlights(!0)
     }, this.renderFunc = function(e) {
      return s.render(e)
     }, this.pickBuffer = new Uint8Array(4), a = e.Core.Utils.extend({}, a, t.DefaultSceneOptions), this.options = a, this.parentElement = o, this.scene = new t.THREE.Scene, this.pickScene = new t.THREE.Scene, this.pickTarget = new t.THREE.WebGLRenderTarget(1, 1, {
      format: t.THREE.RGBAFormat,
      minFilter: t.THREE.LinearFilter
     }), this.pickTarget.generateMipmaps = !1, this.renderer = new t.THREE.WebGLRenderer({
      antialias: !0,
      alpha: a.alpha,
      preserveDrawingBuffer: !0
     }), this.renderer.setClearColor(new t.THREE.Color(a.clearColor.r, a.clearColor.g, a.clearColor.b)), this.renderer.autoClear = !0, this.renderer.sortObjects = !1, this.mouseInfo = new n(this.renderState, this.renderer.domElement), this.lighting = new r, this.lighting.setup(this.scene), this.parentElement.appendChild(this.renderer.domElement);
     var u = e.Core.Utils.debounce(function() {
       return s.handleResize()
      }, 100),
      l = function() {
       s.renderState.resizing = !0, u()
      };
     window.addEventListener("resize", l), document.addEventListener("resize", l), this.parentElement.addEventListener("resize", l), this.unbindEvents.push(function() {
      return window.removeEventListener("resize", l)
     }), this.unbindEvents.push(function() {
      return document.removeEventListener("resize", l)
     }), this.unbindEvents.push(function() {
      return s.parentElement.removeEventListener("resize", l)
     }), this.setupMouse(), this.camera = new t.Camera(this, this.renderer.domElement), this.handleResize(), this.renderer.clear(), this.needsRender(), this.renderState.animationFrame = requestAnimationFrame(this.renderFunc)
    }
    return o.prototype.updateOptions = function(n) {
     n = e.Core.Utils.extend({}, n, this.options);
     var r = n.cameraType !== this.options.cameraType,
      i = n.clearColor;
     this.renderer.setClearColor(new t.THREE.Color(i.r, i.g, i.b)), this.renderer.setClearAlpha(n.alpha ? 0 : 1), this.camera.fog.color.setRGB(i.r, i.g, i.b), this.options = n, r && this.camera.createCamera(), this.camera.cameraUpdated(), this.forceRender()
    }, o.prototype.setupMouse = function() {
     var e = this,
      t = function(t) {
       e.mouseInfo.isInside || e.mouseInfo.updateRect(), e.mouseInfo.updatePosition(t.clientX, t.clientY), e.mouseInfo.isInside = !0
      },
      n = this.renderer.domElement;
     n.addEventListener("mousemove", t), this.unbindEvents.push(function() {
      return n.removeEventListener("mousemove", t)
     });
     var r = function() {
      e.mouseInfo.isInside = !1, e.clearHighlights()
     };
     n.addEventListener("mouseleave", r), this.unbindEvents.push(function() {
      return n.removeEventListener("mouseleave", r)
     });
     var i = function(t) {
      e.mouseInfo.isInside ? (e.mouseInfo.updateRect(), e.handleSelectStart(t.clientX, t.clientY)) : e.selectInfo = null, e.mouseInfo.isButtonDown = !0, e.clearHighlights()
     };
     n.addEventListener("mousedown", i), this.unbindEvents.push(function() {
      return n.removeEventListener("mousedown", i)
     });
     var o = function(t) {
      e.mouseInfo.isButtonDown = !1, e.needsRender(), e.handleSelectEnd(t.clientX, t.clientY), e.clearHighlights(!0)
     };
     window.addEventListener("mouseup", o), this.unbindEvents.push(function() {
      return window.removeEventListener("mouseup", o)
     });
     var a = function() {
      e.mouseInfo.updateRect()
     };
     window.addEventListener("mousewheel", a), window.addEventListener("DOMMouseScroll", a), this.unbindEvents.push(function() {
      return window.removeEventListener("mousewheel", a)
     }), this.unbindEvents.push(function() {
      return window.removeEventListener("DOMMouseScroll", a)
     }), n.addEventListener("touchstart", a, !1), this.unbindEvents.push(function() {
      return n.removeEventListener("touchstart", a, !1)
     });
     var s = function(t) {
      var n = t.touches;
      n.length || (n = t.changedTouches), 1 === n.length && e.handleSelectEnd(n[0].clientX, n[0].clientY), setTimeout(e.clearHighlightsCall, 1e3 / 15)
     };
     n.addEventListener("touchend", s, !1), this.unbindEvents.push(function() {
      return n.removeEventListener("touchend", s, !1)
     });
     try {
      n.addEventListener("touchcancel", s, !1), this.unbindEvents.push(function() {
       return n.removeEventListener("touchcancel", s, !1)
      })
     } catch (u) {}
    }, o.prototype.handleSelectStart = function(e, t) {
     this.pickInfo.selectStart(e, t), this.selectInfo = this.pickInfo.getPickInfo()
    }, o.prototype.handleSelectEnd = function(e, t) {
     if (this.pickInfo.selectEnd(e, t)) {
      var n = this.handlePick(!0);
      this.dispatchSelectEvent(n)
     }
     this.selectInfo = null
    }, o.prototype.handleResize = function() {
     var e = this.parentElement.clientWidth,
      n = this.parentElement.clientHeight;
     return this.camera.updateSize(e, n), this.renderState.height === n && this.renderState.width === e ? (this.renderState.resizing = !1, void 0) : (this.renderState.width = e, this.renderState.height = n, this.renderer.setSize(e, n), this.pickTarget = new t.THREE.WebGLRenderTarget(e, n, {
      format: t.THREE.RGBAFormat,
      minFilter: t.THREE.LinearFilter
     }), this.pickTarget.generateMipmaps = !1, this.renderState.resizing = !1, this.mouseInfo.updateRect(), this.needsRender(), void 0)
    }, o.prototype.needsRender = function() {
     this.renderState.rendered = !1
    }, o.prototype.checkDirty = function() {
     for (var e = !1, t = 0, n = this.models.all; t < n.length; t++) {
      var r = n[t];
      e = e || r.dirty, r.dirty = !1
     }
     return e
    }, o.prototype.render = function(e) {
     if (this.renderState.resizing) return this.renderState.animationFrame = requestAnimationFrame(this.renderFunc), void 0;
     var t = e - this.renderState.lastRenderTime;
     this.renderState.pickDelta += t, this.renderState.lastRenderTime = e, this.renderState.pickDelta > 33.3333333 && (this.renderState.pickDelta = this.renderState.pickDelta % 33.3333333, this.handlePick(!1));
     var n = this.checkDirty();
     n && (this.renderState.rendered = !1), this.renderState.rendered || (this.lighting.update(this.camera.position), this.renderer.sortObjects = !0, this.renderer.render(this.scene, this.camera.object), this.renderer.sortObjects = !1, this.renderState.rendered = !0, this.mouseInfo.isButtonDown || (this.renderer.setClearAlpha(1), this.renderer.render(this.pickScene, this.camera.object, this.pickTarget), this.renderer.setClearAlpha(this.options.alpha ? 0 : 1))), this.renderState.animationFrame = requestAnimationFrame(this.renderFunc)
    }, o.prototype.dispatchHoverEvent = function() {
     this.events.dispatchEvent({
      type: o.hoverEvent,
      target: null,
      data: this.pickInfo.getPickInfo()
     })
    }, o.prototype.dispatchSelectEvent = function(e) {
     e && this.events.dispatchEvent({
      type: o.selectEvent,
      target: null,
      data: e
     })
    }, o.prototype.clearHighlights = function(e) {
     void 0 === e && (e = !0);
     var t = this.pickInfo,
      n = this.models.getBySceneId(t.currentPickId),
      r = !1;
     return n && (r = n.highlightElement(t.currentPickElementId, !1)), r && e && this.needsRender(), this.pickInfo.reset() && this.dispatchHoverEvent(), r
    }, o.prototype.handlePick = function(e) {
     if ((e || this.mouseInfo.update() && !this.mouseInfo.isButtonDown) && !this.renderState.resizing) {
      if (!this.mouseInfo.isInside) return void 0;
      this.mouseInfo.setExactPosition();
      var n = this.mouseInfo.exactPosition,
       r = this.pickTarget.height - n.y;
      if (this.pickTarget.width < n.x - 1 || n.x < .01 || this.pickTarget.height < r - 1 || .01 > r) return void 0;
      this.renderer.readRenderTargetPixels(this.pickTarget, 0 | n.x, 0 | r, 1, 1, this.pickBuffer);
      var i = t.Selection.Picking.getSceneId(this.models.idWidth, this.pickBuffer),
       o = t.Selection.Picking.getElementId(this.models.idWidth, this.pickBuffer),
       a = this.pickInfo;
      if (e) {
       if (255 === i) return void 0;
       var s = this.models.getBySceneId(i);
       return s ? {
        model: s,
        elements: s.getPickElements(o)
       } : void 0
      }
      if (i === a.currentPickId && o === a.currentPickElementId) return void 0;
      var u = this.clearHighlights(!1),
       s = this.models.getBySceneId(i);
      return 255 !== i && s ? (a.currentPickId = i, a.currentPickElementId = o, (s.highlightElement(o, !0) || u) && (this.needsRender(), a.current = {
       model: s,
       elements: s.getPickElements(o)
      }, this.dispatchHoverEvent()), void 0) : (u && this.needsRender(), void 0)
     }
    }, o.prototype.resized = function() {
     this.handleResize()
    }, o.prototype.forceRender = function() {
     this.needsRender()
    }, o.prototype.clear = function() {
     this.models.clear()
    }, o.prototype.screenshotAsDataURL = function() {
     var e = this.renderer.domElement.toDataURL("image/png"),
      t = document.createElement("a");
     "download" in t ? (t.style.visibility = "hidden", t.href = e, t.target = "_blank", t.download = "litemol_screenshot.png", document.body.appendChild(t), t.click(), t.remove()) : window.open(e, "_blank")
    }, o.prototype.destroy = function() {
     this.clear();
     for (var e = 0, t = this.unbindEvents; e < t.length; e++) {
      var n = t[e];
      try {
       n()
      } catch (r) {}
     }
     for (this.unbindEvents = [], cancelAnimationFrame(this.renderState.animationFrame), this.scene = null, this.pickScene = null, this.camera.dispose(), this.camera = null, this.renderer && this.renderer.dispose && this.renderer.dispose(), this.renderer = null, this.pickTarget.dispose(), this.pickTarget = null; this.parentElement.lastChild;) this.parentElement.removeChild(this.parentElement.lastChild)
    }, o
   }();
   o.hoverEvent = "hover", o.selectEvent = "select", t.Scene = o
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t = function() {
    function t(t, n, r) {
     var i = this;
     this.camera = t, this.domElement = n, this.scene = r, this.enabled = !0, this.rotateSpeed = 3.33, this.zoomSpeed = 3.33, this.panSpeed = 1, this.noRotate = !1, this.noZoom = !1, this.noPan = !1, this.noRoll = !0, this.staticMoving = !0, this.dynamicDampingFactor = .2, this.minDistance = 1.5, this.maxDistance = 1e5, this.keys = [65, 83, 68], this.target = new e.THREE.Vector3, this.EPS = 1e-6, this.lastPosition = new e.THREE.Vector3, this._state = -1, this._keyDownState = -1, this._prevState = -1, this._eye = new e.THREE.Vector3, this._rotateStart = new e.THREE.Vector3, this._rotateEnd = new e.THREE.Vector3, this._zoomStart = new e.THREE.Vector2, this._zoomEnd = new e.THREE.Vector2, this._touchZoomDistanceStart = 0, this._touchZoomDistanceEnd = 0, this._panStart = new e.THREE.Vector2, this._panEnd = new e.THREE.Vector2, this.target0 = this.target.clone(), this.position0 = this.camera.position.clone(), this.up0 = this.camera.up.clone(), this.changeEvent = {
      type: "change",
      target: void 0
     }, this.startEvent = {
      type: "start",
      target: void 0
     }, this.endEvent = {
      type: "end",
      target: void 0
     }, this.events = new e.THREE.EventDispatcher, this._mouseOnScreen = new e.THREE.Vector2, this._mouseOnBallProjection = new e.THREE.Vector3, this._objectUp = new e.THREE.Vector3, this._mouseOnBall = new e.THREE.Vector3, this._rotationAxis = new e.THREE.Vector3, this._rotationQuaternion = new e.THREE.Quaternion, this._panMouseChange = new e.THREE.Vector2, this._panObjectUp = new e.THREE.Vector3, this._panPan = new e.THREE.Vector3, this._panToDelta = new e.THREE.Vector3, this._panToVector = new e.THREE.Vector3, this.eventHandlers = {
      keydown: function(e) {
       return i.keydown(e)
      },
      keyup: function(e) {
       return i.keyup(e)
      },
      mousedown: function(e) {
       return i.mousedown(e)
      },
      mouseup: function(e) {
       return i.mouseup(e)
      },
      mousemove: function(e) {
       return i.mousemove(e)
      },
      touchstart: function(e) {
       return i.touchstart(e)
      },
      touchmove: function(e) {
       return i.touchmove(e)
      },
      touchend: function(e) {
       return i.touchend(e)
      }
     }, this.init()
    }
    return t.prototype.getMouseOnScreen = function() {
     this.scene.mouseInfo.setExactPosition();
     var e = this.scene.renderState,
      t = this.scene.mouseInfo.exactPosition;
     return this._mouseOnScreen.set(t.x / e.width, t.y / e.height), this._mouseOnScreen
    }, t.prototype.getMouseProjectionOnBall = function() {
     this.scene.mouseInfo.setExactPosition();
     var e = this.scene.renderState,
      t = this.scene.mouseInfo.exactPosition,
      n = .5 * e.width,
      r = .5 * e.height,
      i = (t.x - n) / (.5 * e.width),
      o = -(t.y - r) / (.5 * e.height);
     this._mouseOnBall.set(i, o, 0);
     var a = this._mouseOnBall.length();
     return this.noRoll ? this._mouseOnBall.z = a < Math.SQRT1_2 ? Math.sqrt(1 - a * a) : .5 / a : a > 1 ? this._mouseOnBall.normalize() : this._mouseOnBall.z = Math.sqrt(1 - a * a), this._eye.copy(this.camera.position).sub(this.target), this._mouseOnBallProjection.copy(this.camera.up).setLength(this._mouseOnBall.y), this._mouseOnBallProjection.add(this._objectUp.copy(this.camera.up).cross(this._eye).setLength(this._mouseOnBall.x)), this._mouseOnBallProjection.add(this._eye.setLength(this._mouseOnBall.z)), this._mouseOnBallProjection
    }, t.prototype.rotateCamera = function() {
     var e = Math.acos(this._rotateStart.dot(this._rotateEnd) / this._rotateStart.length() / this._rotateEnd.length());
     e && (this._rotationAxis.crossVectors(this._rotateStart, this._rotateEnd).normalize(), e *= this.rotateSpeed, this._rotationQuaternion.setFromAxisAngle(this._rotationAxis, -e), this._eye.applyQuaternion(this._rotationQuaternion), this.camera.up.applyQuaternion(this._rotationQuaternion), this._rotateEnd.applyQuaternion(this._rotationQuaternion), this.staticMoving ? this._rotateStart.copy(this._rotateEnd) : (this._rotationQuaternion.setFromAxisAngle(this._rotationAxis, e * (this.dynamicDampingFactor - 1)), this._rotateStart.applyQuaternion(this._rotationQuaternion)))
    }, t.prototype.zoomCamera = function() {
     if (4 === this._state) {
      var e = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;
      this._touchZoomDistanceStart = this._touchZoomDistanceEnd, this._eye.multiplyScalar(e)
     } else {
      var e = 1 - (this._zoomEnd.y - this._zoomStart.y) * this.zoomSpeed;
      1 !== e && e > 0 && (this._eye.multiplyScalar(e), this.staticMoving ? this._zoomStart.copy(this._zoomEnd) : this._zoomStart.y += (this._zoomEnd.y - this._zoomStart.y) * this.dynamicDampingFactor)
     }
    }, t.prototype.panCamera = function() {
     this._panMouseChange.copy(this._panEnd).sub(this._panStart), this._panMouseChange.lengthSq() && (this._panMouseChange.multiplyScalar(this._eye.length() * this.panSpeed), this._panPan.copy(this._eye).cross(this.camera.up).setLength(this._panMouseChange.x), this._panPan.add(this._panObjectUp.copy(this.camera.up).setLength(this._panMouseChange.y)), this.camera.position.add(this._panPan), this.target.add(this._panPan), this.staticMoving ? this._panStart.copy(this._panEnd) : this._panStart.add(this._panMouseChange.subVectors(this._panEnd, this._panStart).multiplyScalar(this.dynamicDampingFactor)))
    }, t.prototype.panTo = function(e) {
     var t = e.x,
      n = e.y,
      r = e.z;
     this._panToVector.set(t, n, r), this._panToDelta.subVectors(this._panToVector, this.target), this.camera.position.add(this._panToDelta), this.camera.lookAt(this._panToVector), this.target.copy(this._panToVector), this._eye.subVectors(this.camera.position, this.target), this.lastPosition.copy(this.camera.position), this._panToDelta.lengthSq() > this.EPS && this.events.dispatchEvent(this.changeEvent)
    }, t.prototype.panAndMoveToDistance = function(e, t) {
     var n = e.x,
      r = e.y,
      i = e.z;
     this._panToVector.set(n, r, i), this._panToDelta.subVectors(this._panToVector, this.target), this.camera.position.add(this._panToDelta), this.camera.lookAt(this._panToVector), this.target.copy(this._panToVector), this._eye.subVectors(this.camera.position, this.target), this._eye.setLength(t), this.camera.position.addVectors(this.target, this._eye), this.checkDistances(), this.lastPosition.copy(this.camera.position), this.events.dispatchEvent(this.changeEvent)
    }, t.prototype.checkDistances = function() {
     this.noZoom && this.noPan || (this._eye.lengthSq() > this.maxDistance * this.maxDistance && this.camera.position.addVectors(this.target, this._eye.setLength(this.maxDistance)), this._eye.lengthSq() < this.minDistance * this.minDistance && this.camera.position.addVectors(this.target, this._eye.setLength(this.minDistance)))
    }, t.prototype.update = function() {
     this._eye.subVectors(this.camera.position, this.target), this.noRotate || this.rotateCamera(), this.noZoom || this.zoomCamera(), this.noPan || this.panCamera(), this.camera.position.addVectors(this.target, this._eye), this.checkDistances(), this.camera.lookAt(this.target), this.lastPosition.distanceToSquared(this.camera.position) > this.EPS && (this.events.dispatchEvent(this.changeEvent), this.lastPosition.copy(this.camera.position))
    }, t.prototype.reset = function() {
     this._state = -1, this._prevState = -1, this.target.copy(this.target0), this.camera.position.copy(this.position0), this.camera.up.copy(this.up0), this._eye.subVectors(this.camera.position, this.target), this.camera.lookAt(this.target), this.events.dispatchEvent(this.changeEvent), this.lastPosition.copy(this.camera.position)
    }, t.prototype.getState = function() {
     return {
      state: this._state,
      prevState: this._prevState,
      target: this.target.clone(),
      objPos: this.camera.position.clone(),
      objUp: this.camera.up.clone(),
      eye: this._eye.clone(),
      lastPosition: this.lastPosition.clone()
     }
    }, t.prototype.setState = function(e) {
     this._state = e.state, this._prevState = e.prevState, this.target.copy(e.target), this.camera.position.copy(e.objPos), this.camera.up.copy(e.objUp), this._eye.copy(e.eye), this.camera.lookAt(this.target), this.events.dispatchEvent(this.changeEvent), this.lastPosition.copy(e.lastPosition)
    }, t.prototype.keydown = function(e) {
     this.enabled !== !1 && (window.removeEventListener("keydown", this.eventHandlers.keydown, !1), window.addEventListener("keyup", this.eventHandlers.keyup, !1), this._prevState = this._state, -1 === this._state && (e.keyCode !== this.keys[0] || this.noRotate ? e.keyCode !== this.keys[2] || this.noZoom ? e.keyCode !== this.keys[1] || this.noPan || (this._state = 1) : this._state = 2 : this._state = 0, this._keyDownState = this._state))
    }, t.prototype.keyup = function() {
     this.enabled !== !1 && (this._state = this._prevState, this._keyDownState = -1, window.removeEventListener("keyup", this.eventHandlers.keyup, !1), window.addEventListener("keydown", this.eventHandlers.keydown, !1))
    }, t.prototype.mousedown = function(e) {
     this.enabled !== !1 && (e.preventDefault(), this.scene.mouseInfo.updatePosition(e.clientX, e.clientY), -1 !== this._keyDownState && (this._state = this._keyDownState), -1 === this._state && (this._state = e.button), 0 !== this._state || this.noRotate ? 2 !== this._state || this.noZoom ? 1 !== this._state || this.noPan || (this._panStart.copy(this.getMouseOnScreen()), this._panEnd.copy(this._panStart)) : (this._zoomStart.copy(this.getMouseOnScreen()), this._zoomEnd.copy(this._zoomStart)) : (this._rotateStart.copy(this.getMouseProjectionOnBall()), this._rotateEnd.copy(this._rotateStart)), window.addEventListener("mousemove", this.eventHandlers.mousemove, !1), window.addEventListener("mouseup", this.eventHandlers.mouseup, !1), this.events.dispatchEvent(this.startEvent))
    }, t.prototype.mousemove = function(e) {
     this.enabled !== !1 && (e.preventDefault(), this.scene.mouseInfo.updatePosition(e.clientX, e.clientY), 0 !== this._state || this.noRotate ? 2 !== this._state || this.noZoom ? 1 !== this._state || this.noPan || this._panEnd.copy(this.getMouseOnScreen()) : this._zoomEnd.copy(this.getMouseOnScreen()) : this._rotateEnd.copy(this.getMouseProjectionOnBall()), this.update())
    }, t.prototype.mouseup = function(e) {
     this.enabled !== !1 && (e.preventDefault(), this._state = -1, window.removeEventListener("mousemove", this.eventHandlers.mousemove, !1), window.removeEventListener("mouseup", this.eventHandlers.mouseup, !1), this.events.dispatchEvent(this.endEvent))
    }, t.prototype.mousewheel = function(e) {
     if (this.enabled !== !1) {
      e.preventDefault();
      var t = 0;
      e.wheelDelta ? t = e.wheelDelta / 40 : e.detail && (t = -e.detail / 3), this._zoomStart.y += .01 * t, this.events.dispatchEvent(this.startEvent), this.events.dispatchEvent(this.endEvent)
     }
    }, t.prototype.touchstart = function(e) {
     if (this.enabled !== !1) {
      switch (e.touches.length) {
       case 1:
        this._state = 3, this.scene.mouseInfo.updatePosition(e.touches[0].clientX, e.touches[0].clientY), this._rotateStart.copy(this.getMouseProjectionOnBall()), this._rotateEnd.copy(this._rotateStart);
        break;
       case 2:
        this._state = 4;
        var t = e.touches[0].clientX - e.touches[1].clientX,
         n = e.touches[0].clientY - e.touches[1].clientY;
        this._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt(t * t + n * n);
        var r = (e.touches[0].clientX + e.touches[1].clientX) / 2,
         i = (e.touches[0].clientY + e.touches[1].clientY) / 2;
        this.scene.mouseInfo.updatePosition(r, i), this._panStart.copy(this.getMouseOnScreen()), this._panEnd.copy(this._panStart);
        break;
       default:
        this._state = -1
      }
      this.events.dispatchEvent(this.startEvent)
     }
    }, t.prototype.touchmove = function(e) {
     if (this.enabled !== !1) switch (e.preventDefault(), e.stopPropagation(), e.touches.length) {
      case 1:
       this.scene.mouseInfo.updatePosition(e.touches[0].clientX, e.touches[0].clientY), this._rotateEnd.copy(this.getMouseProjectionOnBall()), this.update();
       break;
      case 2:
       var t = e.touches[0].clientX - e.touches[1].clientX,
        n = e.touches[0].clientY - e.touches[1].clientY;
       this._touchZoomDistanceEnd = Math.sqrt(t * t + n * n);
       var r = (e.touches[0].clientX + e.touches[1].clientX) / 2,
        i = (e.touches[0].clientY + e.touches[1].clientY) / 2;
       this.scene.mouseInfo.updatePosition(r, i), this._panEnd.copy(this.getMouseOnScreen()), this.update();
       break;
      default:
       this._state = -1
     }
    }, t.prototype.touchend = function(e) {
     if (this.enabled !== !1) {
      var t = e.touches;
      switch (t.length || (t = e.changedTouches), t.length) {
       case 1:
        this.scene.mouseInfo.updatePosition(t[0].clientX, t[0].clientY), this._rotateEnd.copy(this.getMouseProjectionOnBall()), this._rotateStart.copy(this._rotateEnd);
        break;
       case 2:
        this._touchZoomDistanceStart = this._touchZoomDistanceEnd = 0;
        var n = (t[0].clientX + t[1].clientX) / 2,
         r = (t[0].clientY + t[1].clientY) / 2;
        this.scene.mouseInfo.updatePosition(n, r), this._panEnd.copy(this.getMouseOnScreen()), this._panStart.copy(this._panEnd)
      }
      this._state = -1, this.events.dispatchEvent(this.endEvent)
     }
    }, t.prototype.preventContextMenu = function(e) {
     e.preventDefault()
    }, t.prototype.init = function() {
     this.domElement.addEventListener("contextmenu", this.preventContextMenu, !1), this.domElement.addEventListener("mousedown", this.eventHandlers.mousedown, !1), this.domElement.addEventListener("touchstart", this.eventHandlers.touchstart, !1), this.domElement.addEventListener("touchend", this.eventHandlers.touchend, !1), this.domElement.addEventListener("touchmove", this.eventHandlers.touchmove, !1), window.addEventListener("keydown", this.eventHandlers.keydown, !1), this.update()
    }, t.prototype.destroy = function() {
     this.domElement.removeEventListener("contextmenu", this.preventContextMenu, !1), this.domElement.removeEventListener("mousedown", this.eventHandlers.mousedown, !1), window.removeEventListener("keydown", this.eventHandlers.keydown, !1), this.domElement.removeEventListener("touchstart", this.eventHandlers.touchstart, !1), this.domElement.removeEventListener("touchend", this.eventHandlers.touchend, !1), this.domElement.removeEventListener("touchmove", this.eventHandlers.touchmove, !1), this.camera = void 0, this.domElement = void 0
    }, t
   }();
   e.CameraControls = t
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(t) {
    function n(e, t, n, r) {
     var i = !1;
     if (3 === r)
      for (var o = t; n > o; o++) {
       var a = e[o],
        s = 0 | a;
       .33 > a - s && (e[o] = s + .55, i = !0)
      } else if (4 === r)
       for (var o = t; n > o; o++) {
        var a = e[o],
         s = 0 | a;
        a - s > .33 && (e[o] = s, i = !0)
       } else if (1 === r)
        for (var o = t; n > o; o++) e[o] = e[o] + 1, i = !0;
       else if (2 === r) {
      for (var o = t; n > o; o++)
       if (e[o] > .75) {
        var a = e[o] - 1;
        0 > a && (a = 0), e[o] = a, i = !0
       }
     } else
      for (var o = t; n > o; o++) {
       var a = e[o];
       e[o] = 0, i = i || 0 !== a
      }
     return i
    }

    function r(e, t) {
     var r = e.array,
      i = n(r, 0, r.length, t);
     return i && (e.needsUpdate = !0), i
    }
    var i = function() {
     function e() {
      this.current = null, this.currentPickId = -1, this.currentPickElementId = -1, this.selectPos = {
       x: 0,
       y: 0
      }
     }
     return e.prototype.getPickInfo = function() {
      return this.current ? {
       model: this.current.model,
       elements: this.current.elements
      } : this.current
     }, e.prototype.reset = function() {
      var e = null !== this.current;
      return this.currentPickId = -1, this.currentPickElementId = -1, this.current = null, e
     }, e.prototype.selectStart = function(e, t) {
      this.selectPos.x = e, this.selectPos.y = t
     }, e.prototype.selectEnd = function(e, t) {
      var n = e - this.selectPos.x,
       r = t - this.selectPos.y;
      return 4.5 > n * n + r * r
     }, e
    }();
    t.Pick = i;
    var o;
    ! function(e) {
     function t(e, t) {
      var n = e >> 16 & 255,
       r = e >> 8 & 255,
       i = 255 & e;
      t.r = i / 255, t.g = r / 255, t.b = n / 255
     }

     function n(e, t, n) {
      n[t + 3] = e / 255
     }

     function r(e, t, n, r) {
      var i = (t & (1 << e) - 1) << 8 - e,
       o = t >> e;
      r[n + 3] = o / 255;
      var a = 255 * r[n + 2] | 0;
      r[n + 2] = (a | i) / 255
     }

     function i(e, t) {
      var n = (1 << 16 - e) - 1;
      return t[0] | t[1] << 8 | (t[2] & n) << 16
     }

     function o(e, t) {
      var n = e - 8,
       r = t[2] & (1 << n) - 1 << 8 - n >> 8 - n,
       i = t[3] << n;
      return r | i
     }
     e.assignPickColor = t, e.applySceneIdFast = n, e.applySceneIdSlow = r, e.getElementId = i, e.getSceneId = o
    }(o = t.Picking || (t.Picking = {}));
    var a = e.Core.Utils.ChunkedArray,
     s = function() {
      function e(e) {
       this.elementCount = e, this.elementMap = new Map, this.elementIndex = 0, this.elementRangeIndex = 0, this.rangeIndex = 0, this.added = 0, this.elementIndices = a.create(function(e) {
        return new Int32Array(e)
       }, e, 1), this.elementRanges = new Int32Array(2 * e), this.vertexRanges = a.create(function(e) {
        return new Int32Array(e)
       }, e, 2)
      }
      return e.prototype.startElement = function(e) {
       this.elementIndex = e, this.elementRangeIndex = this.elementMap.size, this.rangeIndex = this.vertexRanges.elementCount, this.added = 0
      }, e.prototype.addVertexRange = function(e, t) {
       this.added++, a.add2(this.vertexRanges, e, t)
      }, e.prototype.endElement = function() {
       a.add(this.elementIndices, this.elementIndex), this.elementMap.set(this.elementIndex, this.elementRangeIndex), this.elementRanges[2 * this.elementRangeIndex] = 2 * this.rangeIndex, this.elementRanges[2 * this.elementRangeIndex + 1] = 2 * (this.rangeIndex + this.added)
      }, e.prototype.getMap = function() {
       return new u(a.compact(this.elementIndices), this.elementMap, this.elementRanges, a.compact(this.vertexRanges))
      }, e
     }();
    t.VertexMapBuilder = s;
    var u = function() {
     function e(e, t, n, r) {
      this.elementIndices = e, this.elementMap = t, this.elementRanges = n, this.vertexRanges = r
     }
     return e
    }();
    t.VertexMap = u, t.applyActionToRange = n, t.applyActionToBuffer = r
   }(n = t.Selection || (t.Selection = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(e) {
     for (var t = new Int32Array(e.data.annotation.length), n = e.data.annotation, r = 0, i = t.length; i > r; r++) t[r] = r;
     return Array.prototype.sort.call(t, function(e, t) {
      var r = n[e] - n[t];
      return r ? r : e - t
     }), t
    }

    function i(e, t, n, r) {
     for (var i = e, o = e + 1; t > i;) {
      for (; t > o && n[o] - n[o - 1] < 1.1;) o++;
      r.addVertexRange(n[i], n[o - 1] + 1), i = o, o += 1
     }
    }

    function o(e) {
     for (var n = r(e), o = e.data.annotation, a = 1, s = 0, u = n.length - 1; u > s; s++) o[n[s]] !== o[n[s + 1]] && a++;
     for (var l = new t.Selection.VertexMapBuilder(a), c = new Int32Array(n.length), s = 0, u = n.length; u > s; s++) c[s] = o[n[s]];
     var h = o[n[0]];
     l.startElement(h);
     for (var s = 0, u = n.length; u > s; s++) {
      var p = o[n[s]];
      p !== h && (l.endElement(), l.startElement(p), h = p);
      var d = s;
      for (s++; p === o[n[s]];) s++;
      var f = s;
      s--, i(d, f, n, l)
     }
     return l.endElement(), l.getMap()
    }

    function a(e) {
     var n = new t.Selection.VertexMapBuilder(1);
     return n.startElement(0), n.addVertexRange(0, e.vertexCount), n.endElement(), n.getMap()
    }

    function s(e, t) {
     e.computation.update("Computing selection map..."), e.computation.schedule(function() {
      e.geom.elementToVertexMap = e.data.annotation ? o(e) : a(e), t()
     }, 1e3 / 15)
    }

    function u(e, n, r) {
     var i = 1e5,
      o = n.data.triangleIndices,
      a = n.data.annotation;
     if (e >= n.triCount) return r(), void 0;
     var s = n.pickPlatesVertices,
      l = n.pickPlatesTris,
      c = n.pickPlatesColors,
      h = n.data.vertices,
      p = {
       r: .45,
       g: .45,
       b: .45
      },
      d = n.pickTris;
     if (n.computation.update("Creating selection geometry...", n.computation.abortRequest, e, n.triCount), n.computation.abortRequested) return n.computation.abort(), void 0;
     for (var f = 0, m = e, g = Math.min(e + i, n.triCount); g > m; m++) {
      var v = o[3 * m],
       b = o[3 * m + 1],
       w = o[3 * m + 2],
       x = a[v],
       _ = a[b],
       S = a[w];
      if (x !== _ || _ !== S) {
       var C = x === _ ? x : _;
       y.add3(s, h[3 * v], h[3 * v + 1], h[3 * v + 2]), y.add3(s, h[3 * b], h[3 * b + 1], h[3 * b + 2]), y.add3(s, h[3 * w], h[3 * w + 1], h[3 * w + 2]), y.add3(l, f++, f++, f++), 0 > C ? (p.r = 0, p.g = 0, p.b = 0) : t.Selection.Picking.assignPickColor(C, p), y.add4(c, p.r, p.g, p.b, 0), y.add4(c, p.r, p.g, p.b, 0), y.add4(c, p.r, p.g, p.b, 0)
      } else y.add3(d, v, b, w)
     }
     n.platesVertexCount += f, n.computation.schedule(function() {
      return u(e + i, n, r)
     })
    }

    function c(e) {
     {
      var n = {
        r: .45,
        g: .45,
        b: .45
       },
       r = (e.data.vertices, e.data.annotation);
      e.data.triangleIndices
     }
     e.pickTris = y.forIndexBuffer(e.triCount);
     for (var i = e.pickColorBuffer, o = 0, a = e.vertexCount; a > o; o++) {
      var s = r[o];
      s >= 0 && (t.Selection.Picking.assignPickColor(s, n), i[4 * o] = n.r, i[4 * o + 1] = n.g, i[4 * o + 2] = n.b)
     }
    }

    function h(e) {
     var n = new t.THREE.BufferGeometry;
     n.addAttribute("position", new t.THREE.BufferAttribute(e.data.vertices, 3)), n.addAttribute("index", new t.THREE.BufferAttribute(e.data.triangleIndices, 1)), n.addAttribute("pColor", new t.THREE.BufferAttribute(e.pickColorBuffer, 4)), e.geom.pickGeometry = n, n = new t.THREE.BufferGeometry, n.addAttribute("position", new t.THREE.BufferAttribute(new Float32Array(0), 3)), n.addAttribute("index", new t.THREE.BufferAttribute(new Uint32Array(0), 1)), n.addAttribute("pColor", new t.THREE.BufferAttribute(new Float32Array(0), 4)), e.geom.pickPlatesGeometry = n
    }

    function p(e) {
     var n = new t.THREE.BufferGeometry;
     n.addAttribute("position", new t.THREE.BufferAttribute(e.data.vertices, 3)), n.addAttribute("index", new t.THREE.BufferAttribute(y.compact(e.pickTris), 1)), n.addAttribute("pColor", new t.THREE.BufferAttribute(e.pickColorBuffer, 4)), e.geom.pickGeometry = n, n = new t.THREE.BufferGeometry, n.addAttribute("position", new t.THREE.BufferAttribute(y.compact(e.pickPlatesVertices), 3)), n.addAttribute("index", new t.THREE.BufferAttribute(y.compact(e.pickPlatesTris), 1)), n.addAttribute("pColor", new t.THREE.BufferAttribute(y.compact(e.pickPlatesColors), 4)), e.geom.pickPlatesGeometry = n
    }

    function d(e, t, n, r) {
     if (n > r) {
      var i = n;
      n = r, r = i
     }
     var o = ((n + r) * (n + r + 1) + r) / 2 | 0,
      a = t.size;
     t.add(o), t.size !== a && y.add2(e, n, r)
    }

    function f(e) {
     for (var n = e.data.triangleIndices, r = y.create(function(e) {
       return new Uint32Array(e)
      }, 1.5 * e.triCount | 0, 2), i = new Set, o = 0, a = n.length; a > o; o += 3) {
      var s = n[o],
       u = n[o + 1],
       l = n[o + 2];
      d(r, i, s, u), d(r, i, s, l), d(r, i, u, l)
     }
     return new t.THREE.BufferAttribute(y.compact(r), 1)
    }

    function m(e, n) {
     var r = new t.THREE.BufferGeometry;
     r.addAttribute("position", new t.THREE.BufferAttribute(n.data.vertices, 3)), r.addAttribute("normal", new t.THREE.BufferAttribute(n.data.normals, 3)), r.addAttribute("color", new t.THREE.BufferAttribute(new Float32Array(3 * n.data.vertices.length), 3)), e ? r.addAttribute("index", f(n)) : r.addAttribute("index", new t.THREE.BufferAttribute(n.data.triangleIndices, 1)), n.geom.geometry = r, n.geom.vertexStateBuffer = new t.THREE.BufferAttribute(new Float32Array(n.data.vertices.length), 1), r.addAttribute("vState", n.geom.vertexStateBuffer)
    }

    function g(e, t) {
     e.computation.update("Creating selection geometry..."), e.computation.schedule(function() {
      e.pickColorBuffer = new Float32Array(4 * e.vertexCount), e.data.annotation ? (c(e), e.pickPlatesVertices = y.forVertex3D(Math.max(e.vertexCount / 10, 10)), e.pickPlatesTris = y.forIndexBuffer(Math.max(e.triCount / 10, 10)), e.pickPlatesColors = y.create(function(e) {
       return new Float32Array(e)
      }, Math.max(e.vertexCount / 10, 10), 4), e.platesVertexCount = 0, u(0, e, function() {
       p(e), t()
      })) : (h(e), t())
     })
    }

    function v(t, n, r, i) {
     var o = {
      data: t,
      computation: n,
      geom: new b,
      vertexCount: t.vertices.length / 3 | 0,
      triCount: t.triangleIndices.length / 3 | 0
     };
     n.update("Creating geometry...");
     e.Core.Geometry.Surface.computeNormals(t).bind(function(t) {
      return e.Core.Geometry.Surface.computeBoundingSphere(t)
     }).run(n).result.then(function() {
      n.schedule(function() {
       s(o, function() {
        g(o, function() {
         m(r, o), o.geom.vertexToElementMap = o.data.annotation, i(o.geom)
        })
       })
      })
     }).catch(n.reject)
    }
    var y = e.Core.Utils.ChunkedArray;
    n.buildGeometry = v;
    var b = function(e) {
     function n() {
      var n = e.call(this) || this;
      return n.geometry = void 0, n.vertexToElementMap = void 0, n.elementToVertexMap = void 0, n.pickGeometry = void 0, n.pickPlatesGeometry = void 0, n.vertexStateBuffer = void 0, n.center = new t.THREE.Vector3(0, 0, 0), n.radius = 0, n
     }
     return l(n, e), n.prototype.dispose = function() {
      this.geometry.dispose(), this.pickGeometry && (this.pickGeometry.dispose(), this.pickPlatesGeometry.dispose())
     }, n
    }(t.GeometryBase);
    n.Geometry = b
   }(n = t.Surface || (t.Surface = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    n.DefaultSurfaceModelParameters = {
     isWireframe: !1
    };
    var r = function(r) {
     function i() {
      return r.apply(this, arguments) || this
     }
     return l(i, r), i.prototype.applySelectionInternal = function(e, n) {
      for (var r = this.geometry.vertexStateBuffer, i = r.array, o = this.geometry.elementToVertexMap, a = o.vertexRanges, s = !1, u = 0, l = e; u < l.length; u++) {
       var c = l[u];
       if (o.elementMap.has(c)) {
        var h = o.elementMap.get(c),
         p = o.elementRanges[2 * h],
         d = o.elementRanges[2 * h + 1];
        if (p !== d)
         for (var f = p; d > f; f += 2) {
          var m = a[f],
           g = a[f + 1];
          s = t.Selection.applyActionToRange(i, m, g, n) || s
         }
       }
      }
      return s ? (r.needsUpdate = !0, !0) : !1
     }, i.prototype.highlightElement = function(e, t) {
      return this.applySelection([e], t ? 3 : 4)
     }, i.prototype.highlightInternal = function(e) {
      return t.Selection.applyActionToBuffer(this.geometry.vertexStateBuffer, e ? 3 : 4)
     }, i.prototype.getPickElements = function(e) {
      return [e]
     }, i.prototype.getBoundingSphereOfSelection = function(e) {
      if (!this.geometry.vertexToElementMap) return {
       radius: this.radius,
       center: this.centroid
      };
      for (var n = this.geometry.geometry.attributes.position.array, r = new t.THREE.Vector3, i = 0, o = this.geometry.elementToVertexMap, a = o.vertexRanges, s = 0, u = e; s < u.length; s++) {
       var l = u[s];
       if (o.elementMap.has(l)) {
        var c = o.elementMap.get(l),
         h = o.elementRanges[2 * c],
         p = o.elementRanges[2 * c + 1];
        if (h !== p)
         for (var d = h; p > d; d += 2)
          for (var f = a[d], m = a[d + 1], g = f; m > g; g++) r.x += n[3 * g], r.y += n[3 * g + 1], r.z += n[3 * g + 2], i++
       }
      }
      if (!i) return void 0;
      r.x = r.x / i, r.y = r.y / i, r.z = r.z / i;
      for (var v = new t.THREE.Vector3, y = 0, b = 0, w = e; b < w.length; b++) {
       var l = w[b];
       if (o.elementMap.has(l)) {
        var c = o.elementMap.get(l),
         h = o.elementRanges[2 * c],
         p = o.elementRanges[2 * c + 1];
        if (h !== p)
         for (var d = h; p > d; d += 2)
          for (var f = a[d], m = a[d + 1], g = f; m > g; g++) v.x = n[3 * g], v.y = n[3 * g + 1], v.z = n[3 * g + 2], y = Math.max(y, v.distanceToSquared(r))
       }
      }
      return y = Math.sqrt(y), {
       radius: y,
       center: {
        x: r.x,
        y: r.y,
        z: r.z
       }
      }
     }, i.prototype.applyThemeInternal = function(e) {
      var n = {
       r: 0,
       g: 0,
       b: 0
      };
      t.MaterialsHelper.updateMaterial(this.material, e, this.object);
      var r = this.geometry.geometry.attributes.color.array,
       i = this.geometry.vertexToElementMap;
      if (i)
       for (var o = 0, a = r.length / 3 | 0; a > o; o++) {
        var s = i[o];
        0 > s ? (n.r = 0, n.g = 0, n.b = 0) : e.setElementColor(s, n), r[3 * o] = n.r, r[3 * o + 1] = n.g, r[3 * o + 2] = n.b
       } else {
        e.setElementColor(0, n);
        for (var o = 0, a = r.length / 3 | 0; a > o; o++) r[3 * o] = n.r, r[3 * o + 1] = n.g, r[3 * o + 2] = n.b
       }
      this.pickObject && (this.pickObject.visible = this.getPickObjectVisibility(this.object.visible)), this.geometry.geometry.getAttribute("color").needsUpdate = !0
     }, i.prototype.getPickObjectVisibility = function(e) {
      return t.Theme.isTransparent(this.theme) || !this.theme.interactive ? !1 : e
     }, i.prototype.createObjects = function() {
      var e = new t.THREE.Mesh(this.geometry.geometry, this.material),
       n = void 0;
      if (this.geometry.pickGeometry) {
       n = new t.THREE.Object3D;
       var r = new t.THREE.Mesh(this.geometry.pickGeometry, this.pickMaterial);
       n.add(r), r = new t.THREE.Mesh(this.geometry.pickPlatesGeometry, this.pickMaterial), n.add(r)
      }
      return {
       main: e,
       pick: n
      }
     }, i.create = function(r, o) {
      var a = o.surface,
       s = o.theme,
       u = o.parameters,
       l = void 0 === u ? n.DefaultSurfaceModelParameters : u,
       c = o.props;
      return e.Core.Computation.create(function(e) {
       n.buildGeometry(a, e, !!l.isWireframe, function(n) {
        var o = new i;
        o.surface = a, o.material = t.MaterialsHelper.getMeshMaterial(t.THREE.FlatShading, !!l.isWireframe), o.geometry = n, o.pickMaterial = t.MaterialsHelper.getPickMaterial(), o.entity = r, o.centroid = (new t.THREE.Vector3).copy(a.boundingSphere.center), o.radius = a.boundingSphere.radius, c && (o.props = c), o.disposeList.push(o.geometry, o.material, o.pickMaterial);
        var u = o.createObjects();
        o.object = u.main, o.pickObject = u.pick, o.applyTheme(s), o.pickBufferAttributes = [o.geometry.pickGeometry.attributes.pColor], e.resolve(o)
       })
      })
     }, i
    }(t.Model);
    n.Model = r
   }(n = t.Surface || (t.Surface = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function(t) {
     function n() {
      var n = t.call(this) || this;
      return n.geometry = void 0, n.center = new e.THREE.Vector3(0, 0, 0), n.radius = 0, n
     }
     return l(n, t), n.prototype.dispose = function() {
      this.geometry.dispose()
     }, n.create = function(t, r) {
      for (var i = new n, o = new e.THREE.Vector3(0, 0, 0), a = 0, s = t.length; s > a; a += 3) o.x += t[a], o.y += t[a + 1], o.z += t[a + 2];
      o.multiplyScalar(1 / (t.length / 3));
      for (var u = 0, a = 0, s = t.length; s > a; a += 3) {
       var l = o.x - t[a],
        c = o.y - t[a + 1],
        h = o.z - t[a + 2],
        p = l * l + c * c + h * h;
       p > u && (u = p)
      }
      u = Math.sqrt(u);
      var d = new e.THREE.BufferGeometry;
      return d.addAttribute("position", new e.THREE.BufferAttribute(t, 3)), d.addAttribute("index", new e.THREE.BufferAttribute(r, 1)), i.geometry = d, i.center = o, i.radius = u, i
     }, n
    }(e.GeometryBase);
    t.Geometry = n
   }(t = e.Lines || (e.Lines = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r = function(n) {
     function r() {
      return n.apply(this, arguments) || this
     }
     return l(r, n), r.prototype.applySelectionInternal = function() {
      return !1
     }, r.prototype.highlightElement = function(e, t) {
      return this.applySelection([e], t ? 3 : 4)
     }, r.prototype.highlightInternal = function() {
      return !1
     }, r.prototype.getPickElements = function(e) {
      return [e]
     }, r.prototype.applyThemeInternal = function(e) {
      var n = e.colors.get("Uniform");
      this.material.color = new t.THREE.Color(n.r, n.g, n.b), this.material.needsUpdate = !0
     }, r.prototype.getPickObjectVisibility = function() {
      return !1
     }, r.prototype.createObjects = function() {
      return {
       main: new t.THREE.Mesh(this.geometry.geometry, this.material),
       pick: void 0
      }
     }, r.create = function(n, i) {
      var o = i.geometry,
       a = i.theme,
       s = i.props;
      return e.Core.Computation.create(function(e) {
       var i = new r;
       i.material = new t.THREE.MeshBasicMaterial({
        wireframe: !0
       }), i.geometry = o, i.entity = n, i.centroid = o.center, i.radius = o.radius, s && (i.props = s), i.disposeList.push(i.geometry, i.material);
       var u = i.createObjects();
       i.object = u.main, i.pickObject = void 0, i.applyTheme(a), i.pickBufferAttributes = [], e.resolve(i)
      })
     }, r
    }(t.Model);
    n.Model = r
   }(n = t.Lines || (t.Lines = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     r.DefaultBallsAndSticksModelParameters = {
      tessalation: 3,
      atomRadius: function() {
       return .4
      },
      hideBonds: !1,
      bondRadius: .15
     };
     var i = function(i) {
      function o() {
       return i.apply(this, arguments) || this
      }
      return l(o, i), o.prototype.applySelectionInternal = function(e, n) {
       for (var r = this.ballsAndSticks.vertexStateBuffer, i = r.array, o = this.ballsAndSticks.atomVertexMap, a = o.vertexRanges, s = !1, u = 0, l = e; u < l.length; u++) {
        var c = l[u];
        if (o.elementMap.has(c)) {
         var h = o.elementMap.get(c),
          p = o.elementRanges[2 * h],
          d = o.elementRanges[2 * h + 1];
         if (p !== d)
          for (var f = p; d > f; f += 2) {
           var m = a[f],
            g = a[f + 1];
           s = t.Selection.applyActionToRange(i, m, g, n) || s
          }
        }
       }
       return s ? (r.needsUpdate = !0, !0) : !1
      }, o.prototype.getPickElements = function(e) {
       return [e]
      }, o.prototype.highlightElement = function(e, t) {
       return this.applySelection([e], t ? 3 : 4)
      }, o.prototype.highlightInternal = function(e) {
       return t.Selection.applyActionToBuffer(this.ballsAndSticks.vertexStateBuffer, e ? 3 : 4)
      }, o.prototype.applyThemeInternal = function(e) {
       var r = this,
        i = this.ballsAndSticks.atomVertexMap;
       t.MaterialsHelper.applyColorToMap(i, i.elementIndices, this.ballsAndSticks.atomsGeometry.attributes.color, function(e, t) {
        return r.theme.setElementColor(e, t)
       }), i = this.ballsAndSticks.bondVertexMap;
       var o = t.Theme.getColor(e, "Bond", n.Colors.DefaultBondColor);
       t.MaterialsHelper.applyColorToMap(i, i.elementIndices, this.ballsAndSticks.bondsGeometry.attributes.color, function(e, n) {
        return t.Color.copy(o, n)
       }), t.MaterialsHelper.updateMaterial(this.material, e, this.object), t.MaterialsHelper.updateMaterial(this.bondsMaterial, e, this.object)
      }, o.prototype.createObjects = function() {
       var e = new t.THREE.Object3D;
       e.add(new t.THREE.Mesh(this.ballsAndSticks.atomsGeometry, this.material)), e.add(new t.THREE.Mesh(this.ballsAndSticks.bondsGeometry, this.bondsMaterial));
       var n = new t.THREE.Mesh(this.ballsAndSticks.pickGeometry, this.pickMaterial);
       return {
        main: e,
        pick: n
       }
      }, o.create = function(n, i) {
       var a = i.model,
        s = i.atomIndices,
        u = i.theme,
        l = i.params,
        c = i.props;
       return e.Core.Computation.create(function(e) {
        r.buildGeometry(a, l, s, e, function(r) {
         var i = new o;
         i.molecule = a, i.ballsAndSticks = r, i.material = t.MaterialsHelper.getMeshMaterial(), i.bondsMaterial = new t.THREE.MeshPhongMaterial({
          specular: 11184810,
          shininess: 1,
          shading: t.THREE.SmoothShading,
          side: t.THREE.FrontSide,
          vertexColors: t.THREE.VertexColors
         }), i.pickMaterial = t.MaterialsHelper.getPickMaterial(), i.entity = n, i.ballsAndSticks.atomsGeometry.computeBoundingSphere(), i.centroid = i.ballsAndSticks.atomsGeometry.boundingSphere.center, i.radius = i.ballsAndSticks.atomsGeometry.boundingSphere.radius, c && (i.props = c);
         var s = i.createObjects();
         i.object = s.main, i.applyTheme(u), i.disposeList.push(i.ballsAndSticks, i.material, i.bondsMaterial, i.pickMaterial), i.pickObject = s.pick, i.pickBufferAttributes = [i.ballsAndSticks.pickGeometry.attributes.pColor], e.resolve(i)
        })
       })
      }, o
     }(t.Model);
     r.Model = i
    }(r = n.BallsAndSticks || (n.BallsAndSticks = {}))
   }(n = t.Molecule || (t.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     function r(e, t, n, r, i) {
      u.build(e, t, n, r, i)
     }
     var i;
     ! function(n) {
      function r(t, n, r) {
       for (var i = e.Core.Structure.Query.Context.Mask.ofIndices(t, n), a = 0, s = t.covalentBonds, u = s.atomAIndex, l = s.atomBIndex, c = s.type, h = s.count, p = 0; h > p; p++) {
        var d = u[p],
         f = l[p];
        if (i.has(d) && i.has(f)) {
         var m = c[p];
         (1 > m || m > 4) && (m = 1), o.add3(r, d, f, m), a += m
        }
       }
       return a
      }

      function i(r, i) {
       var a, s = 0;
       a = i, s = a.length;
       var u = r.atoms,
        l = u.x,
        c = u.y,
        h = u.z,
        p = u.elementSymbol,
        d = u.name,
        f = u.altLoc,
        m = u.residueIndex,
        g = u.entityIndex,
        v = r.entities.entityType,
        y = e.Core.Structure.EntityType.Water,
        b = r.residues.name,
        w = 2,
        x = r.componentBonds,
        _ = o.create(function(e) {
         return new Int32Array(e)
        }, 1.33 * a.length | 0, 3),
        S = 1,
        C = 0,
        E = 0,
        T = 0;
       if (r.covalentBonds) {
        for (C = n.addPrecomputedBonds(r, i, _); s > E;) {
         var M = m[a[E]];
         for (T = E; s > T && m[a[T]] == M;) T++;
         S++, E = T
        }
        return {
         bonds: o.compact(_),
         stickCount: C,
         residueCount: S
        }
       }
       for (var A = e.Core.Geometry.SubdivisionTree3D.create(a, function(e, t) {
         t(l[e], c[e], h[e])
        }), P = e.Core.Geometry.SubdivisionTree3D.createContextRadius(A, w + 1, !1), R = new t.THREE.Vector3, I = new t.THREE.Vector3, k = new Set, D = P.buffer; s > E;) {
        var M = m[a[E]];
        for (T = E; s > T && m[a[T]] == M;) T++;
        var V = void 0;
        if (x && (V = x.entries.get(b[m[a[E]]]))) {
         for (var L = E; T - 1 > L; L++) {
          var B = a[L],
           O = d[B],
           N = f[B],
           F = V.map.get(O);
          if (F) {
           for (var U = L + 1; T > U; U++) {
            var z = a[U],
             G = f[z];
            if (!N || !G || N === G) {
             var H = F.get(d[z]);
             void 0 !== H && ((1 > H || H > 4) && (H = 1), o.add3(_, B, z, H), C += H)
            }
           }
           k.add(B)
          }
         }
         k.add(a[T - 1])
        }
        for (var L = E; T > L; L++) {
         var j = a[L];
         D.reset(), P.nearest(l[j], c[j], h[j], w), R.set(l[j], c[j], h[j]);
         for (var q = "H" === p[j], N = f[j], W = v[g[j]] === y, X = D.count, Y = 0; X > Y; Y++) {
          var Q = a[D.indices[Y]];
          if (Q !== j && !k.has(Q)) {
           var Z = I.set(l[Q], c[Q], h[Q]).sub(R).length(),
            K = "H" === p[Q];
           if (q && K || W && !K) continue;
           if (q || K) {
            1.1 > Z && (o.add3(_, j, Q, 1), C++);
            continue
           }
           var G = f[Q];
           !Z || N && G && N !== G || (o.add3(_, j, Q, 1), C++)
          }
         }
         k.add(j)
        }
        S++, E = T
       }
       return {
        bonds: o.compact(_),
        stickCount: C,
        residueCount: S
       }
      }
      var o = e.Core.Utils.ChunkedArray;
      n.addPrecomputedBonds = r, n.analyze = i
     }(i || (i = {}));
     var o = function() {
       function e(e, n, r, i, o, a, s, u) {
        this.template = e, this.templateVB = n, this.templateNB = r, this.templateIB = i, this.templateVertexCount = o, this.vertices = a, this.normals = s, this.indices = u, this.atomsVector = new t.THREE.Vector3, this.center = new t.THREE.Vector3, this.rotationAxis = new t.THREE.Vector3, this.upVector = new t.THREE.Vector3(0, 1, 0), this.scaleMatrix = new t.THREE.Matrix4, this.rotationMatrix = new t.THREE.Matrix4, this.translationMatrix = new t.THREE.Matrix4, this.offsetMatrix = new t.THREE.Matrix4, this.finalMatrix = new t.THREE.Matrix4, this.sticksDone = 0, this.radius = .15, this.offset = new t.THREE.Vector3, this.a = new t.THREE.Vector3, this.b = new t.THREE.Vector3
       }
       return e
      }(),
      a = function() {
       function e(n, r, i) {
        this.model = n, this.atomIndices = r, this.params = i, this.tessalation = this.params.tessalation, this.atomRadius = this.params.atomRadius, this.bondRadius = this.params.bondRadius, this.hideBonds = this.params.hideBonds, this.bondTemplate = e.getBondTemplate(1, this.tessalation), this.atomTemplate = e.getAtomTemplate(1, this.tessalation), this.bondTemplateVertexBuffer = this.bondTemplate.attributes.position.array, this.bondTemplateVertexBufferLength = this.bondTemplateVertexBuffer.length, this.bondTemplateVertexCount = this.bondTemplateVertexBufferLength / 3 | 0, this.bondTemplateIndexBuffer = this.bondTemplate.attributes.index.array, this.bondTemplateIndexBufferLength = this.bondTemplateIndexBuffer.length, this.bondTemplateNormalBuffer = this.bondTemplate.attributes.normal.array, this.atomTemplateVertexBuffer = this.atomTemplate.attributes.position.array, this.atomTemplateVertexBufferLength = this.atomTemplateVertexBuffer.length, this.atomTemplateVertexCount = this.atomTemplateVertexBufferLength / 3 | 0, this.atomTemplateIndexBuffer = this.atomTemplate.attributes.index.array, this.atomTemplateIndexBufferLength = this.atomTemplateIndexBuffer.length, this.atomTemplateNormalBuffer = this.atomTemplate.attributes.normal.array, this.atomBufferSize = this.atomTemplateVertexBufferLength * this.atomIndices.length, this.atomVertices = new Float32Array(this.atomBufferSize), this.atomNormals = new Float32Array(this.atomBufferSize), this.atomTriangleIndices = new Uint32Array(this.atomTemplateIndexBufferLength * this.atomIndices.length), this.atomColors = new Float32Array(this.atomBufferSize), this.atomPickColors = new Float32Array(4 * this.atomTemplateVertexCount * this.atomIndices.length), this.atoms = this.model.atoms, this.cX = this.atoms.x, this.cY = this.atoms.y, this.cZ = this.atoms.z, this.atomSymbols = this.atoms.elementSymbol, this.residueIndex = this.atoms.residueIndex, this.atomsDone = 0, this.offset = 0, this.bondsDone = 0, this.atomsVector = new t.THREE.Vector3, this.center = new t.THREE.Vector3, this.rotationAxis = new t.THREE.Vector3, this.up = new t.THREE.Vector3(0, 1, 0), this.scaleMatrix = new t.THREE.Matrix4, this.rotationMatrix = new t.THREE.Matrix4, this.translationMatrix = new t.THREE.Matrix4, this.atom1Vec = new t.THREE.Vector3, this.atom2Vec = new t.THREE.Vector3, this.pickColor = {
         r: .1,
         g: .1,
         b: .1
        }, this.atomMapBuilder = new t.Selection.VertexMapBuilder(this.atomIndices.length), this.tempVector = new t.THREE.Vector3(0, 0, 0), this.bs = void 0
       }
       return e.getBondTemplate = function(e, n) {
        var r;
        switch (n) {
         case 0:
          r = 2;
          break;
         case 1:
          r = 4;
          break;
         case 2:
          r = 6;
          break;
         case 3:
          r = 8;
          break;
         case 4:
          r = 10;
          break;
         case 5:
          r = 12;
          break;
         default:
          r = 14
        }
        var i = t.GeometryHelper.getIndexedBufferGeometry(new t.THREE.LatheGeometry([new t.THREE.Vector3(0, e, -0.5), new t.THREE.Vector3(0, e, .5)], r, Math.PI));
        return i.applyMatrix((new t.THREE.Matrix4).makeRotationAxis(new t.THREE.Vector3(1, 0, 0), -Math.PI / 2)), i
       }, e.getAtomTemplate = function(e, n) {
        var r;
        switch (n) {
         case 0:
          r = new t.THREE.OctahedronGeometry(e, 0);
          break;
         case 1:
          r = new t.THREE.OctahedronGeometry(e, 1);
          break;
         case 2:
          r = new t.THREE.IcosahedronGeometry(e, 0);
          break;
         case 3:
          r = new t.THREE.IcosahedronGeometry(e, 1);
          break;
         case 4:
          r = new t.THREE.IcosahedronGeometry(e, 2);
          break;
         case 5:
          r = new t.THREE.OctahedronGeometry(e, 3);
          break;
         default:
          r = new t.THREE.IcosahedronGeometry(e, 3)
        }
        return t.GeometryHelper.getIndexedBufferGeometry(r)
       }, e
      }(),
      s = function() {
       function e(e) {
        this.state = e, this.model = this.state.model, this.atomIndices = this.state.atomIndices, this.info = i.analyze(this.state.model, this.state.atomIndices), this.bondMapBuilder = new t.Selection.VertexMapBuilder(this.info.residueCount), this.bondBufferSize = this.state.bondTemplateVertexBufferLength * this.info.stickCount, this.bondVertices = new Float32Array(this.bondBufferSize), this.bondNormals = new Float32Array(this.bondBufferSize), this.bondColors = new Float32Array(this.bondBufferSize), this.bondIndices = new Uint32Array(this.state.bondTemplateIndexBufferLength * this.info.stickCount), this.bondRadius = this.state.params.bondRadius, this.residueIndex = this.model.atoms.residueIndex, this.currentResidueIndex = this.residueIndex[this.info.bonds[0]], this.bondMapVertexOffsetStart = 0, this.bondMapVertexOffsetEnd = 0, this.bondState = new o(this.state.bondTemplate, this.state.bondTemplateVertexBuffer, this.state.bondTemplateNormalBuffer, this.state.bondTemplateIndexBuffer, this.state.bondTemplateVertexCount, this.bondVertices, this.bondNormals, this.bondIndices), this.bondCount = this.info.bonds.length / 3 | 0
       }
       return e
      }(),
      u = function() {
       function r() {}
       return r.prototype.dispose = function() {
        this.atomsGeometry.dispose(), this.bondsGeometry.dispose(), this.pickGeometry.dispose()
       }, r.addAtom = function(e, n) {
        n.atomMapBuilder.startElement(e);
        var r = n.atomRadius(e);
        n.scaleMatrix.makeScale(r, r, r), n.tempVector.set(n.cX[e], n.cY[e], n.cZ[e]), n.translationMatrix.makeTranslation(n.tempVector.x, n.tempVector.y, n.tempVector.z).multiply(n.scaleMatrix), n.atomTemplate.applyMatrix(n.translationMatrix);
        for (var i = 0; i < n.atomTemplateVertexBufferLength; i++) n.offset = n.atomsDone * n.atomTemplateVertexBufferLength + i, n.atomVertices[n.offset] = n.atomTemplateVertexBuffer[i], n.atomNormals[n.offset] = n.atomTemplateNormalBuffer[i];
        for (var i = 0; i < n.atomTemplateIndexBufferLength; i++) n.offset = n.atomTemplateIndexBufferLength * n.atomsDone + i, n.atomTriangleIndices[n.offset] = n.atomTemplateIndexBuffer[i] + n.atomTemplateVertexCount * n.atomsDone;
        t.Selection.Picking.assignPickColor(e, n.pickColor);
        for (var i = 0; i < n.atomTemplateVertexCount; i++) n.offset = n.atomsDone * n.atomTemplateVertexCount * 4 + 4 * i, n.atomPickColors[n.offset] = n.pickColor.r, n.atomPickColors[n.offset + 1] = n.pickColor.g, n.atomPickColors[n.offset + 2] = n.pickColor.b;
        n.scaleMatrix.getInverse(n.translationMatrix), n.atomTemplate.applyMatrix(n.scaleMatrix), n.atomMapBuilder.addVertexRange(n.atomsDone * n.atomTemplateVertexCount, (n.atomsDone + 1) * n.atomTemplateVertexCount), n.atomMapBuilder.endElement(), n.atomsDone++
       }, r.addBond = function(e, t, n) {
        var i = n.info.bonds[3 * e],
         o = n.info.bonds[3 * e + 1],
         a = n.info.bonds[3 * e + 2];
        n.currentResidueIndex !== n.residueIndex[i] && (n.bondMapBuilder.addVertexRange(n.bondMapVertexOffsetStart, n.bondMapVertexOffsetEnd), n.bondMapVertexOffsetStart = n.bondMapVertexOffsetEnd, n.bondMapBuilder.endElement(), n.currentResidueIndex = n.residueIndex[i], n.bondMapBuilder.startElement(n.currentResidueIndex)), t.tempVector.set(t.cX[i], t.cY[i], t.cZ[i]), n.bondState.a.set(t.tempVector.x, t.tempVector.y, t.tempVector.z), t.tempVector.set(t.cX[o], t.cY[o], t.cZ[o]), n.bondState.b.set(t.tempVector.x, t.tempVector.y, t.tempVector.z);
        var s = n.bondRadius,
         u = 2 * s / 3,
         l = s / 2,
         c = n.bondState;
        switch (a) {
         case 2:
          c.radius = l, c.offset.x = u, c.offset.y = u, r.addBondPart(c), c.offset.x = -u, c.offset.y = -u, r.addBondPart(c);
          break;
         case 3:
          c.radius = l, c.offset.x = 0, c.offset.y = u, r.addBondPart(c), c.offset.x = -Math.cos(Math.PI / 3) * u, c.offset.y = -Math.sin(Math.PI / 3) * u, r.addBondPart(c), c.offset.x = -c.offset.x, r.addBondPart(c);
          break;
         case 4:
          c.radius = l / 2, c.offset.x = u, c.offset.y = u, r.addBondPart(c), c.offset.x = -u, c.offset.y = -u, r.addBondPart(c), c.offset.x = -u, c.offset.y = u, r.addBondPart(c), c.offset.x = u, c.offset.y = -u, r.addBondPart(c);
          break;
         default:
          c.radius = s, c.offset.x = 0, c.offset.y = 0, r.addBondPart(c)
        }
        n.bondMapVertexOffsetEnd += a * n.state.bondTemplateVertexBufferLength
       }, r.addBondPart = function(e) {
        e.atomsVector.subVectors(e.a, e.b);
        var t = e.atomsVector.length();
        e.center.addVectors(e.a, e.b).divideScalar(2), e.rotationAxis.crossVectors(e.atomsVector, e.upVector).normalize();
        var n = e.atomsVector.angleTo(e.upVector);
        e.scaleMatrix.makeScale(e.radius, t, e.radius), e.offsetMatrix.makeTranslation(e.offset.x, e.offset.y, e.offset.z), e.rotationMatrix.makeRotationAxis(e.rotationAxis, -n), e.translationMatrix.makeTranslation(e.center.x, e.center.y, e.center.z), e.finalMatrix = e.translationMatrix.multiply(e.rotationMatrix).multiply(e.offsetMatrix).multiply(e.scaleMatrix), e.template.applyMatrix(e.finalMatrix), e.vertices.set(e.templateVB, e.templateVB.length * e.sticksDone), e.normals.set(e.templateNB, e.templateVB.length * e.sticksDone);
        for (var r = e.templateIB, i = e.indices, o = e.templateIB.length * e.sticksDone, a = e.templateVertexCount * e.sticksDone, s = 0; s < r.length; s++) i[o++] = r[s] + a;
        e.rotationMatrix.getInverse(e.finalMatrix), e.template.applyMatrix(e.rotationMatrix), e.sticksDone++
       }, r.getEmptyBondsGeometry = function() {
        var e = new t.THREE.BufferGeometry;
        e.addAttribute("position", new t.THREE.BufferAttribute(new Float32Array(0), 3)), e.addAttribute("normal", new t.THREE.BufferAttribute(new Float32Array(0), 3)), e.addAttribute("index", new t.THREE.BufferAttribute(new Uint32Array(0), 1)), e.addAttribute("color", new t.THREE.BufferAttribute(new Float32Array(0), 3));
        var n = new t.Selection.VertexMapBuilder(1);
        return {
         bondsGeometry: e,
         bondVertexMap: n.getMap()
        }
       }, r.getBondsGeometry = function(e) {
        var n = new t.THREE.BufferGeometry;
        return n.addAttribute("position", new t.THREE.BufferAttribute(e.bondVertices, 3)), n.addAttribute("normal", new t.THREE.BufferAttribute(e.bondNormals, 3)), n.addAttribute("index", new t.THREE.BufferAttribute(e.bondIndices, 1)), n.addAttribute("color", new t.THREE.BufferAttribute(e.bondColors, 3)), {
         bondsGeometry: n,
         bondVertexMap: e.bondMapBuilder.getMap()
        }
       }, r.getAtomsGeometry = function(e) {
        var n = new t.THREE.BufferGeometry;
        n.addAttribute("position", new t.THREE.BufferAttribute(e.atomVertices, 3)), n.addAttribute("normal", new t.THREE.BufferAttribute(e.atomNormals, 3)), n.addAttribute("index", new t.THREE.BufferAttribute(e.atomTriangleIndices, 1)), n.addAttribute("color", new t.THREE.BufferAttribute(e.atomColors, 3));
        var r = new Float32Array(e.atomVertices.length),
         i = new t.THREE.BufferAttribute(r, 1);
        n.addAttribute("vState", i);
        var o = new t.THREE.BufferGeometry;
        return o.addAttribute("position", new t.THREE.BufferAttribute(e.atomVertices, 3)), o.addAttribute("index", new t.THREE.BufferAttribute(e.atomTriangleIndices, 1)), o.addAttribute("pColor", new t.THREE.BufferAttribute(e.atomPickColors, 4)), {
         vertexStateBuffer: i,
         atomsGeometry: n,
         atomsPickGeometry: o,
         atomVertexMap: e.atomMapBuilder.getMap()
        }
       }, r.addAtomsChunk = function(e, t, n, i) {
        var o = 1250;
        if (n.abortRequested) return n.abort(), void 0;
        if (e >= t.atomIndices.length) return i(), void 0;
        n.update("Adding atoms...", n.abortRequest, e, t.atomIndices.length);
        for (var a = e, s = Math.min(e + o, t.atomIndices.length); s > a; a++) r.addAtom(t.atomIndices[a], t);
        n.schedule(function() {
         return r.addAtomsChunk(e + o, t, n, i)
        })
       }, r.addBondsChunk = function(e, t, n, i, o) {
        var a = 1250;
        if (i.abortRequested) return i.abort(), void 0;
        if (e >= n.bondCount) return o(), void 0;
        i.update("Adding bonds...", i.abortRequest, e, n.bondCount);
        for (var s = e, u = Math.min(e + a, n.bondCount); u > s; s++) r.addBond(s, t, n);
        i.schedule(function() {
         return r.addBondsChunk(e + a, t, n, i, o)
        })
       }, r.addBonds = function(e, t, n) {
        return e.params.hideBonds ? (n(), void 0) : (t.update("Computing bonds..."), t.schedule(function() {
         var i = new s(e);
         e.bs = i, i.currentResidueIndex = i.residueIndex[i.info.bonds[0]], i.bondMapBuilder.startElement(i.currentResidueIndex), r.addBondsChunk(0, e, i, t, function() {
          i.bondMapBuilder.addVertexRange(i.bondMapVertexOffsetStart, i.bondMapVertexOffsetEnd), i.bondMapBuilder.endElement(), t.update("Finishing up..."), t.schedule(n, 1e3 / 30)
         })
        }), void 0)
       }, r.addAtoms = function(e, t, n) {
        r.addAtomsChunk(0, e, t, n)
       }, r.build = function(t, i, o, s, u) {
        s.update("Creating atoms..."), s.schedule(function() {
         var l = new a(t, o, e.Core.Utils.extend({}, i, n.DefaultBallsAndSticksModelParameters));
         r.addAtoms(l, s, function() {
          r.addBonds(l, s, function() {
           var e = new c;
           if (l.bs) {
            var t = r.getBondsGeometry(l.bs);
            e.bondsGeometry = t.bondsGeometry, e.bondVertexMap = t.bondVertexMap
           } else {
            var t = r.getEmptyBondsGeometry();
            e.bondsGeometry = t.bondsGeometry, e.bondVertexMap = t.bondVertexMap
           }
           var n = r.getAtomsGeometry(l);
           e.vertexStateBuffer = n.vertexStateBuffer, e.atomsGeometry = n.atomsGeometry, e.pickGeometry = n.atomsPickGeometry, e.atomVertexMap = n.atomVertexMap, u(e)
          })
         })
        })
       }, r
      }();
     n.buildGeometry = r;
     var c = function(e) {
      function t() {
       var t = e.apply(this, arguments) || this;
       return t.atomsGeometry = void 0, t.bondsGeometry = void 0, t.pickGeometry = void 0, t.atomVertexMap = void 0, t.bondVertexMap = void 0, t.vertexStateBuffer = void 0, t
      }
      return l(t, e), t.prototype.dispose = function() {
       this.atomsGeometry.dispose(), this.bondsGeometry.dispose(), this.pickGeometry.dispose()
      }, t
     }(t.GeometryBase);
     n.BallsAndSticksGeometry = c
    }(r = n.BallsAndSticks || (n.BallsAndSticks = {}))
   }(n = t.Molecule || (t.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(n) {
      function r(t, r, o, a, s, u, l) {
       var c = e.Core.Utils.extend({}, a, n.CartoonsGeometryParams.Default),
        h = {
         computation: u,
         model: t,
         atomIndices: r,
         linearSegments: o,
         parameters: a,
         isTrace: s,
         params: c,
         state: new n.CartoonsGeometryState(c, t.residues.count),
         units: void 0,
         strandArrays: void 0,
         strandTemplate: void 0,
         builder: new n.Builder,
         geom: new i
        };
       h.computation.update("Building units..."), h.computation.schedule(function() {
        h.units = n.CartoonAsymUnit.buildUnits(h.model, h.atomIndices, h.linearSegments), n.buildUnitsChunk(0, h, function() {
         h.strandTemplate && h.strandTemplate.geometry.dispose(), h.geom.vertexMap = h.state.vertexMap.getMap(), n.createGeometry(h);
         for (var e = h.geom, t = 0, r = Object.keys(h); t < r.length; t++) {
          var i = r[t];
          Object.prototype.hasOwnProperty.call(h, i) && (h[i] = void 0)
         }
         l(e)
        })
       })
      }
      var i = function(e) {
       function t() {
        var t = e.apply(this, arguments) || this;
        return t.geometry = void 0, t.pickGeometry = void 0, t.vertexMap = void 0, t.vertexStateBuffer = void 0, t
       }
       return l(t, e), t.prototype.dispose = function() {
        this.geometry.dispose(), this.pickGeometry.dispose()
       }, t
      }(t.GeometryBase);
      n.Data = i, n.create = r
     }(r = n.Geometry || (n.Geometry = {}))
    }(r = n.Cartoons || (n.Cartoons = {}))
   }(n = t.Molecule || (t.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(n) {
      function r(e) {
       var n, r = e.params.strandLineWidth,
        i = e.params.tessalation,
        o = 0,
        a = 0;
       switch (i) {
        case 0:
         a = 2, o = 1;
         break;
        case 1:
         a = 3, o = 2;
         break;
        case 2:
         a = 4, o = 2;
         break;
        case 3:
         a = 8, o = 4;
         break;
        case 4:
         a = 10, o = 6;
         break;
        case 5:
         a = 14, o = 6;
         break;
        default:
         a = 16, o = 8
       }
       for (var s = [], u = Math.PI / 2 / o, l = 0; o >= l; l++) s[l] = new t.THREE.Vector3(0, r * Math.cos(l * u), .1 * Math.sin(l * u)), s[l].z += .9;
       n = new t.THREE.LatheGeometry([new t.THREE.Vector3(0, r, 0)].concat(s), a, Math.PI);
       var c = t.GeometryHelper.getIndexedBufferGeometry(n);
       e.strandTemplate = {
        vertex: c.attributes.position.array,
        normal: c.attributes.normal.array,
        index: c.attributes.index.array,
        geometry: c
       };
       var h = e.model.atoms,
        p = e.model.residues;
       e.strandArrays = {
        startIndex: p.atomStartIndex,
        endIndex: p.atomEndIndex,
        x: h.x,
        y: h.y,
        z: h.z,
        name: h.name
       }
      }

      function i(e, t) {
       for (var n = t.state, i = t.params, o = (t.model.atoms, t.model.residues, t.builder), a = 0, s = e.residueCount; s > a; a++) {
        n.vertexMap.startElement(e.residueIndex[a]);
        var u = n.verticesDone;
        n.residueIndex = a;
        var l = e.structureStarts.has(e.residueIndex[a]),
         c = e.structureEnds.has(e.residueIndex[a]);
        if (t.isTrace || e.backboneOnly) switch (e.residueType[a]) {
         case 5:
          o.addTube(e, n, i.strandWidth, i.strandWidth), (l || c) && o.addTubeCap(e, n, i.strandWidth, i.strandWidth, l, c), t.strandTemplate || r(t), o.addStrandLine(e, n, t.strandTemplate, t.strandArrays, e.residueIndex[a]);
          break;
         default:
          o.addTube(e, n, i.turnWidth, i.turnWidth), (l || c) && o.addTubeCap(e, n, i.turnWidth, i.turnWidth, l, c)
        } else switch (e.residueType[a]) {
         case 1:
          o.addTube(e, n, i.helixWidth, i.helixHeight), l ? o.addTubeCap(e, n, i.helixWidth, i.helixHeight, !0, !1) : c && o.addTubeCap(e, n, i.helixWidth, i.helixHeight, !1, !0);
          break;
         case 3:
          o.addSheet(e, n, l, c), (l || c) && o.addSheetCap(e, n, l, c);
          break;
         case 5:
          o.addTube(e, n, i.strandWidth, i.strandWidth), (l || c) && o.addTubeCap(e, n, i.strandWidth, i.strandWidth, l, c), t.strandTemplate || r(t), o.addStrandLine(e, n, t.strandTemplate, t.strandArrays, e.residueIndex[a]);
          break;
         default:
          o.addTube(e, n, i.turnWidth, i.turnWidth), (l || c) && o.addTubeCap(e, n, i.turnWidth, i.turnWidth, l, c)
        }
        n.vertexMap.addVertexRange(u, n.verticesDone), n.vertexMap.endElement()
       }
      }

      function o(e, t, n) {
       var r = 1e4;
       if (e >= t.units.length) return n(), void 0;
       if (t.computation.abortRequested) return t.computation.abort(), void 0;
       for (var a = 0, s = e; r > a && s < t.units.length;) i(t.units[s], t), a += t.units[s].residueCount, s++;
       t.computation.update("Building units...", t.computation.abortRequest, e, t.units.length), t.computation.schedule(function() {
        return o(s, t, n)
       })
      }

      function a(e) {
       var n = e.state,
        r = new Float32Array(s.compact(n.vertexBuffer)),
        i = new Float32Array(s.compact(n.normalBuffer)),
        o = new Float32Array(3 * n.verticesDone),
        a = new Float32Array(4 * n.verticesDone),
        u = new Uint32Array(s.compact(n.indexBuffer)),
        l = new Float32Array(n.verticesDone),
        c = new t.THREE.BufferGeometry;
       c.addAttribute("position", new t.THREE.BufferAttribute(r, 3)), c.addAttribute("normal", new t.THREE.BufferAttribute(i, 3)), c.addAttribute("index", new t.THREE.BufferAttribute(u, 1)), c.addAttribute("color", new t.THREE.BufferAttribute(o, 3)), e.geom.vertexStateBuffer = new t.THREE.BufferAttribute(l, 1), c.addAttribute("vState", e.geom.vertexStateBuffer), e.geom.geometry = c;
       for (var h = e.geom.vertexMap, p = {
         r: .45,
         g: .45,
         b: .45
        }, d = h.vertexRanges, f = 0, m = h.elementIndices; f < m.length; f++) {
        var g = m[f],
         v = h.elementMap.get(g),
         y = h.elementRanges[2 * v],
         b = h.elementRanges[2 * v + 1];
        if (y !== b) {
         t.Selection.Picking.assignPickColor(g, p);
         for (var w = y; b > w; w += 2)
          for (var x = d[w], _ = d[w + 1], S = x; _ > S; S++) a[4 * S] = p.r, a[4 * S + 1] = p.g, a[4 * S + 2] = p.b
        }
       }
       var C = new t.THREE.BufferGeometry;
       C.addAttribute("position", new t.THREE.BufferAttribute(r, 3)), C.addAttribute("index", new t.THREE.BufferAttribute(u, 1)), C.addAttribute("pColor", new t.THREE.BufferAttribute(a, 4)), e.geom.pickGeometry = C
      }
      var s = e.Core.Utils.ChunkedArray,
       u = e.Core.Utils.ArrayBuilder,
       l = function() {
        function e(e) {
         this.typeBuilder = u.forArray(1e4), this.residueType = [], this.uPositions = new Float32Array(0), this.vPositions = new Float32Array(0), this.pPositions = new Float32Array(0), this.dPositions = new Float32Array(0), this.uvLength = 0, this.residueCount = 0, this.typeBuilder = u.forArray(e + 4), this.uPositionsBuilder = u.forVertex3D(e + 4), this.vPositionsBuilder = u.forVertex3D(e + 4), this.pPositionsBuilder = u.forVertex3D(e + 4), this.dPositionsBuilder = u.forVertex3D(e + 4), u.add(this.typeBuilder, 0), u.add(this.typeBuilder, 0), u.add3(this.uPositionsBuilder, 0, 0, 0), u.add3(this.uPositionsBuilder, 0, 0, 0), u.add3(this.vPositionsBuilder, 0, 0, 0), u.add3(this.vPositionsBuilder, 0, 0, 0)
        }
        return e.prototype.addResidue = function(e, t, n) {
         var r = t.atomStartIndex[e],
          i = t.atomEndIndex[e],
          o = !1,
          a = !1,
          s = t.name;
         if (5 !== n)
          for (var l = r; i > l && (o || "CA" !== s[l] ? a || "O" !== s[l] || (u.add3(this.vPositionsBuilder, t.x[l], t.y[l], t.z[l]), a = !0) : (u.add3(this.uPositionsBuilder, t.x[l], t.y[l], t.z[l]), o = !0), !o || !a); l++);
         else if (i - r === 1) u.add3(this.uPositionsBuilder, t.x[r], t.y[r], t.z[r]), o = !0;
         else {
          for (var c = -1, l = r; i > l && (o || "O5'" !== s[l] ? a || "C3'" !== s[l] || (u.add3(this.vPositionsBuilder, t.x[l], t.y[l], t.z[l]), a = !0) : (u.add3(this.uPositionsBuilder, t.x[l], t.y[l], t.z[l]), o = !0), "P" === s[l] && (c = l), !o || !a); l++);
          !o && !a && c >= 0 && (u.add3(this.uPositionsBuilder, t.x[c], t.y[c], t.z[c]), o = !0)
         }
         var h = !1;
         if (a) {
          if (!o) {
           var p = this.vPositionsBuilder.array,
            d = p.length;
           u.add3(this.uPositionsBuilder, p[d - 3], p[d - 2], p[d - 1]), h = !0
          }
         } else {
          var p = this.uPositionsBuilder.array,
           d = p.length;
          u.add3(this.vPositionsBuilder, p[d - 3], p[d - 2], p[d - 1]), h = !0
         }
         return u.add(this.typeBuilder, n), h
        }, e.prototype.finishResidues = function() {
         u.add(this.typeBuilder, 0), u.add(this.typeBuilder, 0), u.add3(this.uPositionsBuilder, 0, 0, 0), u.add3(this.uPositionsBuilder, 0, 0, 0), u.add3(this.vPositionsBuilder, 0, 0, 0), u.add3(this.vPositionsBuilder, 0, 0, 0), this.residueType = this.typeBuilder.array, this.uPositions = this.uPositionsBuilder.array, this.vPositions = this.vPositionsBuilder.array, this.typeBuilder = null, this.uPositionsBuilder = null, this.vPositionsBuilder = null, this.uvLength = this.residueType.length, this.residueCount = this.uvLength - 4
        }, e.prototype.addControlPoint = function(e, t) {
         u.add3(this.pPositionsBuilder, e.x, e.y, e.z), u.add3(this.dPositionsBuilder, t.x, t.y, t.z)
        }, e.prototype.finishContols = function() {
         this.pPositions = this.pPositionsBuilder.array, this.dPositions = this.dPositionsBuilder.array, this.pPositionsBuilder = null, this.dPositionsBuilder = null
        }, e
       }();
      n.CartoonAsymUnitState = l;
      var c = function() {
       function n(e, n, r) {
        this.model = e, this.elements = n, this.linearSegmentCount = r, this.tempA = new t.THREE.Vector3, this.tempB = new t.THREE.Vector3, this.tempC = new t.THREE.Vector3, this.controlPoints = new Float32Array(0), this.torsionVectors = new Float32Array(0), this.normalVectors = new Float32Array(0), this.residueCount = 0, this.structureStarts = new Set, this.structureEnds = new Set, this.residueType = [], this.residueIndex = new Int32Array(0), this.backboneOnly = !1;
        for (var i = 0, o = this.elements; i < o.length; i++) {
         var a = o[i];
         this.residueCount += a.endResidueIndex - a.startResidueIndex
        }
        var s = new l(this.residueCount);
        this.controlPointsBuilder = u.forVertex3D(this.residueCount * this.linearSegmentCount + 1), this.torsionVectorsBuilder = u.forVertex3D(this.residueCount * this.linearSegmentCount + 1), this.normalVectorsBuilder = u.forVertex3D(this.residueCount * this.linearSegmentCount + 1), this.createControlPoints(s)
       }
       return n.maskSplit = function(t, n, r) {
        for (var i = t, o = t.startResidueIndex, a = t.endResidueIndex, s = o; a > s; s++)
         if (n[s]) {
          for (i.startResidueIndex !== s && (i = new e.Core.Structure.SecondaryStructureElement(t.type, t.startResidueId, t.endResidueId), i.startResidueIndex = s); a > s && n[s];) s++;
          i.endResidueIndex = s, r[r.length] = i
         }
       }, n.isCartoonLike = function(e, t, n, r, i, o, a) {
        for (var s = !1, u = !1, l = !1, c = t; n > c; c++) {
         var h = r[e[c]];
         if (s || h !== i ? u || h !== o || (u = !0) : s = !0, s && u) return !0;
         "P" === h && (l = !0)
        }
        return a ? s : l
       }, n.createMask = function(e, t) {
        for (var r = new Uint8Array(e.residues.count), i = e.atoms, o = i.residueIndex, a = i.name, s = e.residues.secondaryStructureIndex, u = e.secondaryStructure, l = 0, c = t.length - 1; c > l; l++) {
         var h = t[l],
          p = l,
          d = o[h];
         for (l++; d === o[t[l]];) l++;
         var f = u[s[d]].type;
         0 !== f && (r[d] = 5 === f ? +n.isCartoonLike(t, p, l, a, "O5'", "C3'", !1) : +n.isCartoonLike(t, p, l, a, "CA", "O", !0), l--)
        }
        return r
       }, n.isUnknownSecondaryStructure = function(e) {
        for (var t = !1, n = 0, r = e.secondaryStructure; n < r.length; n++) {
         var i = r[n];
         if (1 === i.type || 3 === i.type || 2 === i.type) return !1;
         4 === i.type && (t = !0)
        }
        return t
       }, n.approximateSecondaryStructure = function(e, t) {
        if (4 !== t.type) return [t];
        for (var r = [], i = e.atoms.name, o = e.residues, a = o.atomStartIndex, s = o.atomEndIndex, u = new Int32Array(t.endResidueIndex - t.startResidueIndex), l = 0, c = !0, h = t.startResidueIndex, p = t.endResidueIndex; p > h; h++) {
         for (var d = !1, f = !1, m = a[h], g = s[p]; g > m && ("CA" === i[m] ? (d || (u[l++] = m), d = !0) : "O" === i[m] && (f = !0), !f || !d); m++);
         if (!d || !f) {
          c = !1;
          break
         }
        }
        return c ? (n.zhangSkolnickSStrace(e, u, t, r), r) : [t]
       }, n.zhangSkolnickSStrace = function(t, r, i, o) {
        for (var a = new Int32Array(r.length), s = !1, u = t.atoms.residueIndex, l = 0, c = r.length; c > l; l++) n.zhangSkolnickSSresidue(t, r, l, n.ZhangHelixDistance, n.ZhangHelixDelta) ? (a[l] = 1, s = !0) : n.zhangSkolnickSSresidue(t, r, l, n.ZhangSheetDistance, n.ZhangSheetDelta) ? (a[l] = 3, s = !0) : a[l] = i.type;
        if (!s) return o.push(i), void 0;
        for (var l = 0, c = a.length; c > l; l++) {
         var h = a[l];
         if (h !== i.type) {
          for (var p = l + 1; c > p && h === a[p];) p++;
          if (p - l > 1) l = p - 1;
          else {
           for (var d = l; p > d; d++) a[d] = i.type;
           l = p - 1
          }
         }
        }
        for (var l = 0, c = a.length; c > l; l++) {
         for (var h = a[l], p = l + 1; c > p && h === a[p];) p++;
         var f = new e.Core.Structure.SecondaryStructureElement(h, new e.Core.Structure.PolyResidueIdentifier("", l, null), new e.Core.Structure.PolyResidueIdentifier("", p, null));
         f.startResidueIndex = u[r[l]], f.endResidueIndex = u[r[p - 1]] + 1, o.push(f), l = p - 1
        }
       }, n.zhangSkolnickSSresidue = function(e, t, r, i, o) {
        for (var a = t.length, s = e.atoms, u = s.x, l = s.y, c = s.z, h = n.ZhangP1, p = n.ZhangP2, d = Math.max(0, r - 2); r >= d; d++)
         for (var f = 2; 5 > f; f++)
          if (!(d + f >= a)) {
           var m = t[d],
            g = t[d + f];
           if (h.set(u[m], l[m], c[m]), p.set(u[g], l[g], c[g]), Math.abs(h.distanceTo(p) - i[f - 2]) > o) return !1
          } return !0
       }, n.throwIfEmpty = function(e) {
        if (0 === e.length) throw "Cartoons cannot be constructred from this model/selection."
       }, n.buildUnits = function(e, t, r) {
        for (var i = n.createMask(e, t), o = [], a = n.isUnknownSecondaryStructure(e), s = 0, u = e.secondaryStructure; s < u.length; s++) {
         var l = u[s];
         if (a)
          for (var c = n.approximateSecondaryStructure(e, l), h = 0, p = c; h < p.length; h++) {
           var d = p[h];
           n.maskSplit(d, i, o)
          } else n.maskSplit(l, i, o)
        }
        n.throwIfEmpty(o);
        var f = o[0],
         m = e.residues.asymId,
         g = e.residues.authSeqNumber,
         v = [],
         y = [],
         b = 0;
        f.type === b && (f = null);
        for (var w = 0, x = o; w < x.length; w++) {
         var l = x[w];
         l.type === b ? (v.length > 0 && y.push(new n(e, v, r)), f = null, v = []) : (null === f && (f = l), m[f.endResidueIndex - 1] !== m[l.startResidueIndex] || f !== l && g[l.startResidueIndex] - g[f.endResidueIndex - 1] > 1 || f.startResidueIndex !== l.startResidueIndex && l.startResidueIndex - f.endResidueIndex > 0 ? (v.length > 0 ? y.push(new n(e, v, r)) : null !== f && y.push(new n(e, [f], r)), f = null, v = [l]) : v[v.length] = l), f = l
        }
        return v.length > 0 && y.push(new n(e, v, r)), y
       }, n.prototype.createControlPoints = function(e) {
        this.initPositions(e), this.initControlsPoints(e), this.computeSplines(e), this.controlPoints = this.controlPointsBuilder.array, this.torsionVectors = this.torsionVectorsBuilder.array, this.normalVectors = this.normalVectorsBuilder.array, this.controlPointsBuilder = null, this.torsionVectorsBuilder = null, this.normalVectorsBuilder = null
       }, n.prototype.initPositions = function(e) {
        for (var t = this.model.residues, n = this.model.atoms, r = {
          atomStartIndex: t.atomStartIndex,
          atomEndIndex: t.atomEndIndex,
          name: n.name,
          x: n.x,
          y: n.y,
          z: n.z
         }, i = [], o = 0, a = 0, s = 0, u = this.elements; s < u.length; s++) {
         var l = u[s];
         for (this.structureStarts.add(l.startResidueIndex), this.structureEnds.add(l.endResidueIndex - 1), a = l.startResidueIndex; a < l.endResidueIndex; a++) this.backboneOnly = e.addResidue(a, r, l.type), i[i.length] = l.type
        }
        this.residueIndex = new Int32Array(this.residueCount);
        for (var c = 0, h = this.elements; c < h.length; c++) {
         var l = h[c];
         for (a = l.startResidueIndex; a < l.endResidueIndex; a++) this.residueIndex[o++] = a
        }
        this.residueType = i, e.finishResidues();
        var p = this.residueCount;
        if (e.residueType[0] = e.residueType[2], e.residueType[1] = e.residueType[3], e.residueType[e.residueType.length - 2] = e.residueType[e.residueType.length - 4], e.residueType[e.residueType.length - 1] = e.residueType[e.residueType.length - 3], p > 2) {
         var d = 2,
          f = 3,
          m = 4;
         5 !== e.residueType[0] ? (this.reflectPositions(e.uPositions, 0, 1, d, f, f, m, .4, .6), this.reflectPositions(e.vPositions, 0, 1, d, f, f, m, .4, .6)) : (this.reflectPositions(e.uPositions, 1, 0, d, f, f, m, .5, .5), this.reflectPositions(e.vPositions, 1, 0, d, f, f, m, .5, .5)), d = p + 1, f = p, m = p - 1, 5 !== e.residueType[p - 1] ? (this.reflectPositions(e.uPositions, p + 2, p + 3, d, f, f, m, .4, .6), this.reflectPositions(e.vPositions, p + 2, p + 3, d, f, f, m, .4, .6)) : (this.reflectPositions(e.uPositions, p + 2, p + 3, d, f, f, m, .5, .5), this.reflectPositions(e.vPositions, p + 2, p + 3, d, f, f, m, .5, .5))
        } else if (2 === p)
         for (a = 0; 2 > a; a++) e.uPositions[3 * a] = e.uPositions[6], e.uPositions[3 * a + 1] = e.uPositions[7], e.uPositions[3 * a + 2] = e.uPositions[8], e.vPositions[3 * a] = e.vPositions[6], e.vPositions[3 * a + 1] = e.vPositions[7], e.vPositions[3 * a + 2] = e.vPositions[8], e.uPositions[3 * (p + 2) + 3 * a] = e.uPositions[3 * (p + 1)], e.uPositions[3 * (p + 2) + 3 * a + 1] = e.uPositions[3 * (p + 1) + 1], e.uPositions[3 * (p + 2) + 3 * a + 2] = e.uPositions[3 * (p + 1) + 2], e.vPositions[3 * (p + 2) + 3 * a] = e.vPositions[3 * (p + 1)], e.vPositions[3 * (p + 2) + 3 * a + 1] = e.vPositions[3 * (p + 1) + 1], e.vPositions[3 * (p + 2) + 3 * a + 2] = e.vPositions[3 * (p + 1) + 2];
        else
         for (var g = [e.uPositions[6] - e.vPositions[6], e.uPositions[7] - e.vPositions[7], e.uPositions[8] - e.vPositions[8]], v = 0; 2 > v; v++)
          for (var y = 0; 3 > y; y++) e.uPositions[3 * v + y] = e.uPositions[6 + y] - .5 * (v + 1) * g[y], e.uPositions[9 + 3 * v + y] = e.uPositions[6 + y] + .5 * (v + 1) * g[y], e.vPositions[3 * v + y] = e.vPositions[6 + y] + .5 * (v + 1) * g[y], e.vPositions[9 + 3 * v + y] = e.vPositions[6 + y] - .5 * (v + 1) * g[y]
       }, n.prototype.initControlsPoints = function(e) {
        for (var n = new t.THREE.Vector3, r = e.uvLength - 1, i = new t.THREE.Vector3, o = new t.THREE.Vector3, a = new t.THREE.Vector3, s = new t.THREE.Vector3, u = new t.THREE.Vector3, l = new t.THREE.Vector3, c = new t.THREE.Vector3, h = new t.THREE.Vector3, p = 1, d = 0; r > d; d++) u.set(e.uPositions[3 * d], e.uPositions[3 * d + 1], e.uPositions[3 * d + 2]), l.set(e.vPositions[3 * d], e.vPositions[3 * d + 1], e.vPositions[3 * d + 2]), d++, c.set(e.uPositions[3 * d], e.uPositions[3 * d + 1], e.uPositions[3 * d + 2]), d--, h.set((u.x + c.x) / 2, (u.y + c.y) / 2, (u.z + c.z) / 2), i.subVectors(c, u), o.subVectors(l, u), a.crossVectors(i, o), s.crossVectors(a, i), a.normalize(), s.normalize(), e.residueType[d] === p && e.residueType[d + 1] === p && h.set(h.x + 1.5 * a.x, h.y + 1.5 * a.y, h.z + 1.5 * a.z), d > 0 && s.angleTo(n) > Math.PI / 2 && s.negate(), n.copy(s), i.addVectors(h, s), e.addControlPoint(h, i);
        e.finishContols()
       }, n.prototype.computeSplines = function(e) {
        for (var r = new t.THREE.Vector3, i = new t.THREE.Vector3, o = new t.THREE.Vector3, a = e.residueCount, s = e.pPositions, u = e.dPositions, l = new t.THREE.Vector3, c = new t.THREE.Vector3, h = new t.THREE.Vector3, p = new t.THREE.Vector3, d = new t.THREE.Vector3, f = new t.THREE.Vector3, m = new t.THREE.Vector3, g = new t.THREE.Vector3, v = new t.THREE.Vector3, y = new t.THREE.Vector3, b = 0; a > b; b++) {
         l.set(s[3 * b], s[3 * b + 1], s[3 * b + 2]), b++, c.set(s[3 * b], s[3 * b + 1], s[3 * b + 2]), b++, h.set(s[3 * b], s[3 * b + 1], s[3 * b + 2]), b++, p.set(s[3 * b], s[3 * b + 1], s[3 * b + 2]), b -= 3, d.set(u[3 * b], u[3 * b + 1], u[3 * b + 2]), b++, f.set(u[3 * b], u[3 * b + 1], u[3 * b + 2]), b++, m.set(u[3 * b], u[3 * b + 1], u[3 * b + 2]), b++, g.set(u[3 * b], u[3 * b + 1], u[3 * b + 2]), b -= 3;
         for (var w = 1; w <= this.linearSegmentCount; w++) {
          var x = 1 * w / this.linearSegmentCount;
          .5 > x ? (n.spline(i, l, c, h, x + .5), n.spline(o, d, f, m, x + .5)) : (n.spline(i, c, h, p, x - .5), n.spline(o, f, m, g, x - .5)), 0 === b && 1 === w && (n.spline(r, l, c, h, .5), n.spline(v, d, f, m, .5), n.reflect(y, r, i, 1), this.addSplineNode(y, r, v)), this.addSplineNode(r, i, o), r.copy(i)
         }
        }
       }, n.prototype.addSplineNode = function(e, t, n) {
        u.add3(this.controlPointsBuilder, t.x, t.y, t.z);
        var r = this.tempA.subVectors(n, t);
        r.normalize(), u.add3(this.torsionVectorsBuilder, r.x, r.y, r.z);
        var i = this.tempB.subVectors(t, e),
         o = this.tempC.crossVectors(r, i);
        o.normalize(), u.add3(this.normalVectorsBuilder, o.x, o.y, o.z)
       }, n.prototype.reflectPositions = function(e, t, r, i, o, a, s, u, l) {
        this.tempA.set(e[3 * i], e[3 * i + 1], e[3 * i + 2]), this.tempB.set(e[3 * o], e[3 * o + 1], e[3 * o + 2]), n.reflect(this.tempC, this.tempA, this.tempB, u), e[3 * t] = this.tempC.x, e[3 * t + 1] = this.tempC.y, e[3 * t + 2] = this.tempC.z, this.tempA.set(e[3 * a], e[3 * a + 1], e[3 * a + 2]), this.tempB.set(e[3 * s], e[3 * s + 1], e[3 * s + 2]), n.reflect(this.tempC, this.tempA, this.tempB, l), e[3 * r] = this.tempC.x, e[3 * r + 1] = this.tempC.y, e[3 * r + 2] = this.tempC.z
       }, n.reflect = function(e, t, n, r) {
        e.set(t.x - r * (n.x - t.x), t.y - r * (n.y - t.y), t.z - r * (n.z - t.z))
       }, n.spline = function(e, t, n, r, i) {
        var o = Math.pow(1 - i, 2) / 2,
         a = Math.pow(i, 2) / 2,
         s = 1 - o - a,
         u = o * t.x + s * n.x + a * r.x,
         l = o * t.y + s * n.y + a * r.y,
         c = o * t.z + s * n.z + a * r.z;
        e.set(u, l, c)
       }, n
      }();
      c.ZhangHelixDistance = [5.45, 5.18, 6.37], c.ZhangHelixDelta = 2.1, c.ZhangSheetDistance = [6.1, 10.4, 13], c.ZhangSheetDelta = 1.42, c.ZhangP1 = new t.THREE.Vector3(0, 0, 0), c.ZhangP2 = new t.THREE.Vector3(0, 0, 0), n.CartoonAsymUnit = c;
      var h = function() {
       function e() {
        this.radialSegmentCount = 10, this.turnWidth = .1, this.strandWidth = .15, this.strandLineWidth = .1, this.helixWidth = 1.1, this.helixHeight = .1, this.sheetWidth = 1.1, this.sheetHeight = .1, this.arrowWidth = 1.7, this.tessalation = 2
       }
       return e
      }();
      h.Default = new h, n.CartoonsGeometryParams = h;
      var p = function() {
       function e(e, n) {
        this.params = e, this.residueIndex = 0, this.verticesDone = 0, this.trianglesDone = 0, this.vertexBuffer = s.forVertex3D(), this.normalBuffer = s.forVertex3D(), this.indexBuffer = s.forIndexBuffer(), this.translationMatrix = new t.THREE.Matrix4, this.scaleMatrix = new t.THREE.Matrix4, this.rotationMatrix = new t.THREE.Matrix4, this.invMatrix = new t.THREE.Matrix4, this.vertexMap = new t.Selection.VertexMapBuilder(n)
       }
       return e.prototype.addVertex = function(e, t) {
        s.add3(this.vertexBuffer, e.x, e.y, e.z), s.add3(this.normalBuffer, t.x, t.y, t.z), this.verticesDone++
       }, e.prototype.addTriangle = function(e, t, n) {
        s.add3(this.indexBuffer, e, t, n), this.trianglesDone++
       }, e.prototype.addTriangles = function(e, t, n, r, i, o) {
        s.add3(this.indexBuffer, e, t, n), s.add3(this.indexBuffer, r, i, o), this.trianglesDone += 2
       }, e
      }();
      n.CartoonsGeometryState = p, n.buildUnit = i, n.buildUnitsChunk = o, n.createGeometry = a;
      var d = function() {
       function e() {
        this.tempVectors = [new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3, new t.THREE.Vector3]
       }
       return e.prototype.setVector = function(e, t, n) {
        return n.set(e[3 * t], e[3 * t + 1], e[3 * t + 2]), n
       }, e.prototype.addTube = function(e, t, n, r) {
        var i = t.verticesDone,
         o = 0,
         a = 0,
         s = this.tempVectors[0],
         u = this.tempVectors[1],
         l = this.tempVectors[2],
         c = this.tempVectors[3],
         h = this.tempVectors[4],
         p = this.tempVectors[5],
         d = this.tempVectors[6],
         f = t.residueIndex * e.linearSegmentCount,
         m = f + e.linearSegmentCount,
         g = e.controlPoints,
         v = e.linearSegmentCount + 1,
         y = e.torsionVectors,
         b = e.normalVectors,
         w = t.params.radialSegmentCount;
        for (o = f; m >= o; o++)
         for (this.setVector(y, o, p), this.setVector(b, o, d), a = 0; w > a; a++) {
          var x = 2 * Math.PI * a / w;
          c.copy(p), h.copy(d), s.addVectors(c.multiplyScalar(n * Math.cos(x)), h.multiplyScalar(r * Math.sin(x))), c.copy(p), h.copy(d), u.addVectors(c.multiplyScalar(r * Math.cos(x)), h.multiplyScalar(n * Math.sin(x))), u.normalize(), this.setVector(g, o, l), l.add(s), t.addVertex(l, u)
         }
        for (o = 0; v - 1 > o; o++)
         for (a = 0; w > a; a++) t.addTriangles(i + o * w + a, i + (o + 1) * w + (a + 1) % w, i + o * w + (a + 1) % w, i + o * w + a, i + (o + 1) * w + a, i + (o + 1) * w + (a + 1) % w)
       }, e.prototype.addTubeCap = function(e, t, n, r, i, o) {
        var a, s = t.verticesDone,
         u = this.tempVectors[0],
         l = this.tempVectors[1],
         c = this.tempVectors[2],
         h = this.tempVectors[3],
         p = this.tempVectors[4],
         d = this.tempVectors[5],
         f = this.tempVectors[6],
         m = this.tempVectors[7],
         g = t.residueIndex * e.linearSegmentCount,
         v = e.controlPoints,
         y = e.linearSegmentCount + 1,
         b = e.torsionVectors,
         w = e.normalVectors,
         x = t.params.radialSegmentCount;
        this.setVector(b, g, f), this.setVector(w, g, m), l.crossVectors(f, m), o && l.negate();
        var _ = g + (i ? 0 : y - 1);
        this.setVector(v, _, u), t.addVertex(u, l), this.setVector(b, _, p), this.setVector(w, _, d);
        for (var S = 0; x > S; S++) a = 2 * Math.PI * S / x, c.copy(p), h.copy(d), u.addVectors(c.multiplyScalar(Math.cos(a) * n), h.multiplyScalar(Math.sin(a) * r)), this.setVector(v, _, f), u.add(f), t.addVertex(u, l), i ? t.addTriangle(s, s + S + 1, s + (S + 1) % x + 1) : t.addTriangle(s, s + (S + 1) % x + 1, s + S + 1)
       }, e.prototype.addSheet = function(e, t, n, r) {
        var i = t.verticesDone,
         o = t.params,
         a = 0,
         s = 0,
         u = this.tempVectors[0],
         l = this.tempVectors[1],
         c = this.tempVectors[2],
         h = this.tempVectors[3],
         p = this.tempVectors[4],
         d = this.tempVectors[5],
         f = (this.tempVectors[6], this.tempVectors[7]),
         m = this.tempVectors[8],
         g = this.tempVectors[9],
         v = t.residueIndex * e.linearSegmentCount,
         y = v + e.linearSegmentCount,
         b = e.controlPoints,
         w = (e.linearSegmentCount + 1, e.torsionVectors),
         x = e.normalVectors,
         _ = (t.params.radialSegmentCount, 0),
         S = 0;
        for (h.set(0, 0, 0), r && (this.setVector(b, y, f), this.setVector(b, v, m), _ = o.arrowWidth / d.subVectors(f, m).length()), a = v; y >= a; a++) S = r ? o.arrowWidth * (1 - (a - v) / e.linearSegmentCount) : o.sheetWidth, this.setVector(w, a, u), u.multiplyScalar(S), this.setVector(x, a, l), l.multiplyScalar(o.sheetHeight), r && (this.setVector(x, a, f), this.setVector(w, a, m), h.crossVectors(f, m).multiplyScalar(_)), this.setVector(b, a, c), this.setVector(x, a, p), this.setVector(w, a, g), f.copy(c).add(u).add(l), m.copy(p), t.addVertex(f, m), f.copy(c).sub(u).add(l), t.addVertex(f, m), f.copy(c).sub(u).add(l), m.copy(g).negate().add(h), t.addVertex(f, m), f.copy(c).sub(u).sub(l), t.addVertex(f, m), f.copy(c).sub(u).sub(l), m.copy(p).negate(), t.addVertex(f, m), f.copy(c).add(u).sub(l), t.addVertex(f, m), f.copy(c).add(u).sub(l), m.copy(g).add(h), t.addVertex(f, m), f.copy(c).add(u).add(l), t.addVertex(f, m);
        for (a = 0; a < e.linearSegmentCount; a++)
         for (s = 0; 4 > s; s++) t.addTriangles(i + 8 * a + 2 * s, i + 8 * (a + 1) + 2 * s + 1, i + 8 * a + 2 * s + 1, i + 8 * a + 2 * s, i + 8 * (a + 1) + 2 * s, i + 8 * (a + 1) + 2 * s + 1)
       }, e.prototype.addSheetCap = function(e, t, n) {
        var r = t.params,
         i = t.residueIndex * e.linearSegmentCount,
         o = this.setVector(e.controlPoints, i, this.tempVectors[0]),
         a = this.setVector(e.torsionVectors, i, this.tempVectors[1]).multiplyScalar(r.sheetWidth),
         s = this.setVector(e.normalVectors, i, this.tempVectors[2]).multiplyScalar(r.sheetHeight),
         u = this.tempVectors[3].addVectors(o, a).add(s),
         l = this.tempVectors[4].subVectors(o, a).add(s),
         c = this.tempVectors[5].subVectors(o, a).sub(s),
         h = this.tempVectors[6].addVectors(o, a).sub(s);
        if (n) this.addSheepCapSection(t, u, l, c, h);
        else {
         var p = this.setVector(e.torsionVectors, i, this.tempVectors[7]).multiplyScalar(r.arrowWidth),
          d = this.tempVectors[8].addVectors(o, p).add(s),
          f = this.tempVectors[9].subVectors(o, p).add(s),
          m = this.tempVectors[10].subVectors(o, p).sub(s),
          g = this.tempVectors[11].addVectors(o, p).sub(s);
         this.addSheepCapSection(t, d, u, h, g), this.addSheepCapSection(t, l, f, m, c)
        }
       }, e.prototype.addSheepCapSection = function(e, t, n, r, i) {
        var o = e.verticesDone,
         a = this.tempVectors[12].crossVectors(this.tempVectors[13].subVectors(n, t), this.tempVectors[14].subVectors(i, t)).normalize();
        e.addVertex(t, a), e.addVertex(n, a), e.addVertex(r, a), e.addVertex(i, a), e.addTriangles(o, o + 1, o + 2, o + 2, o + 3, o)
       }, e.prototype.findN3 = function(e, t, n) {
        for (var r = t.startIndex[e], i = t.endIndex[e], o = (t.name, !1), a = r; i > a; a++)
         if ("N3" === t.name[a]) {
          n.set(t.x[a], t.y[a], t.z[a]), o = !0;
          break
         } return o
       }, e.prototype.addStrandLine = function(e, n, r, i, o) {
        if (this.findN3(o, i, this.tempVectors[3])) {
         var a, s = this.tempVectors[0],
          u = this.tempVectors[1],
          l = r.vertex,
          c = r.normal,
          h = r.index,
          p = n.verticesDone,
          d = l.length,
          f = h.length,
          m = n.residueIndex * e.linearSegmentCount + (.5 * e.linearSegmentCount + 1 | 0),
          g = this.setVector(e.controlPoints, m, this.tempVectors[2]),
          v = this.tempVectors[3].sub(g),
          y = v.length();
         for (v.normalize(), n.translationMatrix.makeTranslation(g.x, g.y, g.z), n.scaleMatrix.makeScale(1, 1, y), n.rotationMatrix.makeRotationAxis(new t.THREE.Vector3(-v.y, v.x, 0), Math.acos(v.z)), n.translationMatrix.multiply(n.rotationMatrix).multiply(n.scaleMatrix), r.geometry.applyMatrix(n.translationMatrix), a = 0; d > a; a += 3) s.set(l[a], l[a + 1], l[a + 2]), u.set(c[a], c[a + 1], c[a + 2]), n.addVertex(s, u);
         for (a = 0; f > a; a += 3) n.addTriangle(p + h[a], p + h[a + 1], p + h[a + 2]);
         n.invMatrix.getInverse(n.translationMatrix), r.geometry.applyMatrix(n.invMatrix)
        }
       }, e
      }();
      n.Builder = d
     }(r = n.Geometry || (n.Geometry = {}))
    }(r = n.Cartoons || (n.Cartoons = {}))
   }(n = t.Molecule || (t.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(e) {
      e[e.Default = 0] = "Default", e[e.AlphaTrace = 1] = "AlphaTrace"
     }(r = n.CartoonsModelType || (n.CartoonsModelType = {})), n.DefaultCartoonsModelParameters = {
      tessalation: 3,
      drawingType: r.Default
     };
     var i = function(i) {
      function o() {
       return i.apply(this, arguments) || this
      }
      return l(o, i), o.prototype.applySelectionInternal = function(e, n) {
       for (var r = this.cartoons.vertexStateBuffer, i = r.array, o = this.cartoons.vertexMap, a = o.vertexRanges, s = !1, u = this.model.atoms.residueIndex, l = 0, c = e.length; c > l; l++) {
        var h = u[e[l]];
        for (l++; u[e[l]] === h;) l++;
        if (l--, o.elementMap.has(h)) {
         var p = o.elementMap.get(h),
          d = o.elementRanges[2 * p],
          f = o.elementRanges[2 * p + 1];
         if (d !== f)
          for (var m = d; f > m; m += 2) {
           var g = a[m],
            v = a[m + 1];
           s = t.Selection.applyActionToRange(i, g, v, n) || s
          }
        }
       }
       return s ? (r.needsUpdate = !0, !0) : !1
      }, o.prototype.getPickElements = function(e) {
       for (var t = this.model.residues, n = t.atomStartIndex, r = t.atomEndIndex, i = [], o = n[e], a = r[e]; a > o; o++) this.queryContext.hasAtom(o) && i.push(o);
       return i
      }, o.prototype.highlightElement = function(e, t) {
       return this.applySelection([this.model.residues.atomStartIndex[e]], t ? 3 : 4)
      }, o.prototype.highlightInternal = function(e) {
       return t.Selection.applyActionToBuffer(this.cartoons.vertexStateBuffer, e ? 3 : 4)
      }, o.prototype.applyColoring = function(e) {
       for (var t = this.model.residues, n = t.atomStartIndex, r = t.atomEndIndex, i = {
         r: .1,
         g: .1,
         b: .1
        }, o = {
         r: .1,
         g: .1,
         b: .1
        }, a = this.cartoons.vertexMap, s = (a.elementIndices, this.cartoons.geometry.attributes.color), u = s.array, l = a.vertexRanges, c = 0, h = this.model.residues.count; h > c; c++) {
        o.r = 0, o.g = 0, o.b = 0;
        for (var p = 0, d = n[c], f = r[c]; f > d; d++) this.queryContext.hasAtom(d) && (e.setElementColor(d, i), o.r += i.r, o.g += i.g, o.b += i.b, p++);
        if (p) {
         i.r = o.r / p, i.g = o.g / p, i.b = o.b / p;
         var m = a.elementMap.get(c),
          g = a.elementRanges[2 * m],
          v = a.elementRanges[2 * m + 1];
         if (g !== v)
          for (var y = g; v > y; y += 2)
           for (var b = l[y], w = l[y + 1], x = b; w > x; x++) u[3 * x] = i.r, u[3 * x + 1] = i.g, u[3 * x + 2] = i.b
        }
       }
       s.needsUpdate = !0
      }, o.prototype.applyThemeInternal = function(e) {
       this.cartoons.vertexMap;
       this.applyColoring(e), t.MaterialsHelper.updateMaterial(this.material, e, this.object)
      }, o.prototype.createObjects = function() {
       return {
        main: new t.THREE.Mesh(this.cartoons.geometry, this.material),
        pick: new t.THREE.Mesh(this.cartoons.pickGeometry, this.pickMaterial)
       }
      }, o.create = function(i, a) {
       var s = a.model,
        u = a.queryContext,
        l = a.atomIndices,
        c = a.theme,
        h = a.params,
        p = a.props;
       return e.Core.Computation.create(function(a) {
        var d = 0,
         f = 0;
        switch (a.update("Computing cartoons..."), h = e.Core.Utils.extend({}, h, n.DefaultCartoonsModelParameters), h.tessalation) {
         case 0:
          d = 1, f = 2;
          break;
         case 1:
          d = 4, f = 3;
          break;
         case 2:
          d = 6, f = 5;
          break;
         case 3:
          d = 10, f = 8;
          break;
         case 4:
          d = 12, f = 10;
          break;
         case 5:
          d = 16, f = 14;
          break;
         default:
          d = 18, f = 16
        }
        n.Geometry.create(s, l, d, {
         radialSegmentCount: f,
         tessalation: h.tessalation
        }, h.drawingType === r.AlphaTrace, a, function(e) {
         var n = new o;
         n.cartoons = e, n.queryContext = u, n.material = t.MaterialsHelper.getMeshMaterial(), n.pickMaterial = t.MaterialsHelper.getPickMaterial(), p && (n.props = p), n.entity = i, n.cartoons.geometry.computeBoundingSphere(), n.centroid = n.cartoons.geometry.boundingSphere.center, n.radius = n.cartoons.geometry.boundingSphere.radius;
         var r = n.createObjects();
         n.object = r.main, n.pickObject = r.pick, n.pickBufferAttributes = [n.cartoons.pickGeometry.attributes.pColor], n.model = s, n.applyTheme(c), n.disposeList.push(n.cartoons, n.material, n.pickMaterial), a.resolve(n)
        })
       })
      }, o
     }(t.Model);
     n.Model = i
    }(r = n.Cartoons || (n.Cartoons = {}))
   }(n = t.Molecule || (t.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     e.DefaultBondColor = {
       r: .6,
       g: .6,
       b: .6
      }, e.DefaultElementColor = {
       r: .6,
       g: .6,
       b: .6
      }, e.DefaultElementColorMap = new Map, e.DefaultPallete = [],
      function() {
       for (var t = [
         ["Ac", .43921, .67058, .98039],
         ["Al", .74901, .65098, .65098],
         ["Am", .32941, .36078, .94901],
         ["Sb", .6196, .38823, .7098],
         ["Ar", .50196, .8196, .89019],
         ["As", .74117, .50196, .89019],
         ["At", .45882, .3098, .27058],
         ["Ba", 0, .78823, 0],
         ["Bk", .54117, .3098, .89019],
         ["Be", .76078, 1, 0],
         ["Bi", .6196, .3098, .7098],
         ["Bh", .87843, 0, .2196],
         ["B", 1, .7098, .7098],
         ["Br", .65098, .16078, .16078],
         ["Cd", 1, .85098, .56078],
         ["Ca", .23921, 1, 0],
         ["Cf", .63137, .21176, .83137],
         ["C", .45, .45, .45],
         ["Ce", 1, 1, .78039],
         ["Cs", .34117, .09019, .56078],
         ["Cl", .12156, .94117, .12156],
         ["Cr", .54117, .6, .78039],
         ["Co", .94117, .5647, .62745],
         ["Cu", .78431, .50196, .2],
         ["Cm", .47058, .36078, .89019],
         ["D", .9, .9, .9],
         ["Db", .8196, 0, .3098],
         ["Dy", .12156, 1, .78039],
         ["Es", .70196, .12156, .83137],
         ["Er", 0, .90196, .45882],
         ["Eu", .38039, 1, .78039],
         ["Fm", .70196, .12156, .72941],
         ["F", .70196, 1, 1],
         ["Fr", .25882, 0, .4],
         ["Gd", .27058, 1, .78039],
         ["Ga", .76078, .56078, .56078],
         ["Ge", .4, .56078, .56078],
         ["Au", 1, .8196, .13725],
         ["Hf", .30196, .76078, 1],
         ["Hs", .90196, 0, .18039],
         ["He", .85098, 1, 1],
         ["Ho", 0, 1, .61176],
         ["H", .9, .9, .9],
         ["In", .65098, .45882, .45098],
         ["I", .58039, 0, .58039],
         ["Ir", .09019, .32941, .52941],
         ["Fe", .698, .13, .13],
         ["Kr", .36078, .72156, .8196],
         ["La", .43921, .83137, 1],
         ["Lr", .78039, 0, .4],
         ["Pb", .34117, .34901, .38039],
         ["Li", .8, .50196, 1],
         ["Lu", 0, .67058, .14117],
         ["Mg", .54117, 1, 0],
         ["Mn", .61176, .47843, .78039],
         ["Mt", .92156, 0, .14901],
         ["Md", .70196, .05098, .65098],
         ["Hg", .72156, .72156, .81568],
         ["Mo", .32941, .7098, .7098],
         ["Nd", .78039, 1, .78039],
         ["Ne", .70196, .89019, .96078],
         ["Np", 0, .50196, 1],
         ["Ni", .31372, .81568, .31372],
         ["Nb", .45098, .76078, .78823],
         ["N", 0, .5, 1],
         ["No", .74117, .05098, .52941],
         ["Os", .14901, .4, .58823],
         ["O", 1, .3, .3],
         ["Pd", 0, .41176, .52156],
         ["P", 1, .50196, 0],
         ["Pt", .81568, .81568, .87843],
         ["Pu", 0, .4196, 1],
         ["Po", .67058, .36078, 0],
         ["K", .56078, .25098, .83137],
         ["Pr", .85098, 1, .78039],
         ["Pm", .63921, 1, .78039],
         ["Pa", 0, .63137, 1],
         ["Ra", 0, .49019, 0],
         ["Rn", .25882, .5098, .58823],
         ["Re", .14901, .49019, .67058],
         ["Rh", .03921, .49019, .54901],
         ["Rb", .43921, .18039, .69019],
         ["Ru", .14117, .56078, .56078],
         ["Rf", .8, 0, .34901],
         ["Sm", .56078, 1, .78039],
         ["Sc", .90196, .90196, .90196],
         ["Sg", .85098, 0, .27058],
         ["Se", 1, .63137, 0],
         ["Si", .94117, .78431, .62745],
         ["Ag", .75294, .75294, .75294],
         ["Na", .67058, .36078, .94901],
         ["Sr", 0, 1, 0],
         ["S", .9, .775, .25],
         ["Ta", .30196, .65098, 1],
         ["Tc", .23137, .6196, .6196],
         ["Te", .83137, .47843, 0],
         ["Tb", .18823, 1, .78039],
         ["Tl", .65098, .32941, .30196],
         ["Th", 0, .72941, 1],
         ["Tm", 0, .83137, .32156],
         ["Sn", .4, .50196, .50196],
         ["Ti", .74901, .76078, .78039],
         ["W", .12941, .58039, .83921],
         ["U", 0, .56078, 1],
         ["V", .65098, .65098, .67058],
         ["Xe", .25882, .6196, .69019],
         ["Yb", 0, .74901, .2196],
         ["Y", .58039, 1, 1],
         ["Zn", .49019, .50196, .69019],
         ["Zr", .58039, .87843, .87843]
        ], n = (new Map, 0), r = t; n < r.length; n++) {
        var i = r[n],
         o = i[0],
         a = {
          r: i[1],
          g: i[2],
          b: i[3]
         };
        e.DefaultElementColorMap.set(o, a), e.DefaultElementColorMap.set(o.toUpperCase(), a), e.DefaultElementColorMap.set(o.toLowerCase(), a), e.DefaultPallete.push(a)
       }
      }()
    }(t = e.Colors || (e.Colors = {}))
   }(t = e.Molecule || (e.Molecule = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(n, r, o) {
     var a = new t.THREE.IcosahedronGeometry(r, o),
      s = t.GeometryHelper.toSurface(a);
     return (0 !== n.x || 0 !== n.y || 0 !== n.z) && e.Core.Geometry.Surface.transformImmediate(s, i.Matrix4.fromTranslation(i.Matrix4.empty(), [n.x, n.y, n.z])), s
    }
    var i = e.Core.Geometry.LinearAlgebra;
    n.createSphereSurface = r
   }(n = t.Primitive || (t.Primitive = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(r) {
     return e.Core.Computation.create(function(e) {
      e.update("Building surface..."), e.schedule(function() {
       for (var o = new Map, a = 0, s = r; a < s.length; a++) {
        var u = s[a];
        if ("Sphere" === u.type && !o.has(u.tessalation || 0)) {
         {
          n.createSphereSurface({
           x: 0,
           y: 0,
           z: 0
          }, 1, u.tessalation || 0)
         }
         o.set(u.tessalation || 0, n.createSphereSurface({
          x: 0,
          y: 0,
          z: 0
         }, 1, u.tessalation || 0))
        }
       }
       for (var l = {
         vertexCount: 0,
         triangleCount: 0
        }, c = 0, h = r; c < h.length; c++) {
        var u = h[c];
        switch (u.type) {
         case "Sphere":
          var p = o.get(u.tessalation || 0);
          l.vertexCount += p.vertexCount, l.triangleCount += p.triangleCount;
          break;
         case "Surface":
          l.vertexCount += u.surface.vertexCount, l.triangleCount += u.surface.triangleCount
        }
       }
       for (var d, f = new Float32Array(3 * l.vertexCount), m = new Float32Array(3 * l.vertexCount), g = new Uint32Array(3 * l.triangleCount), v = new Int32Array(l.vertexCount), y = 0, b = 0, w = 0, x = 0, _ = new t.THREE.Vector3, S = new t.THREE.Matrix4, C = 0, E = r; C < E.length; C++) {
        var u = E[C],
         T = void 0,
         M = y / 3 | 0;
        switch (u.type) {
         case "Sphere":
          T = o.get(u.tessalation || 0), d = T.vertices;
          for (var A = 0, P = 3 * T.vertexCount; P > A; A += 3) _.x = d[A], _.y = d[A + 1], _.z = d[A + 2], _.applyMatrix4(S.makeScale(u.radius, u.radius, u.radius)), _.applyMatrix4(S.makeTranslation(u.center.x, u.center.y, u.center.z)), f[y++] = _.x, f[y++] = _.y, f[y++] = _.z;
          break;
         case "Surface":
          T = u.surface, i.computeNormalsImmediate(T), d = T.vertices;
          for (var A = 0, P = d.length; P > A; A++) f[y++] = d[A]
        }
        d = T.normals;
        for (var A = 0, P = d.length; P > A; A++) m[b++] = d[A];
        for (var R = T.triangleIndices, A = 0, P = R.length; P > A; A++) g[w++] = M + R[A];
        for (var A = 0, P = T.vertexCount; P > A; A++) v[x++] = u.id
       }
       var I = {
        vertices: f,
        vertexCount: l.vertexCount,
        triangleIndices: g,
        triangleCount: l.triangleCount,
        normals: m,
        annotation: v
       };
       e.resolve(I)
      })
     })
    }
    var i = e.Core.Geometry.Surface,
     o = function() {
      function e() {
       this.shapes = []
      }
      return e.prototype.add = function(e) {
       return this.shapes.push(e), this
      }, e.prototype.buildSurface = function() {
       return r(this.shapes)
      }, e.create = function() {
       return new e
      }, e
     }();
    n.Builder = o
   }(n = t.Primitive || (t.Primitive = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t = function() {
     function e() {}
     return e.getRandomColor = function(t) {
      void 0 === t && (t = 0);
      for (var n = 0;;) {
       n++;
       var r = e.randomMix({
         r: 166 / 255,
         g: 0,
         b: 100 / 255
        }, {
         r: 1,
         g: 1,
         b: 0
        }, {
         r: 0,
         g: 100 / 255,
         b: 1
        }, t),
        i = Math.abs(e.previous.r - r.r) + Math.abs(e.previous.g - r.g) + Math.abs(e.previous.b - r.b);
       if (i > 100 || 10 === n) return e.previous = r, r
      }
     }, e.randomMix = function(e, t, n, r) {
      var i = 0 | Math.floor(3 * Math.random()),
       o = 0 === i ? Math.random() * r : Math.random(),
       a = 1 === i ? Math.random() * r : Math.random(),
       s = 2 === i ? Math.random() * r : Math.random(),
       u = o + a + s;
      return o /= u, a /= u, s /= u, {
       r: o * e.r + a * t.r + s * n.r,
       g: o * e.g + a * t.g + s * n.g,
       b: o * e.b + a * t.b + s * n.b
      }
     }, e.interpolate = function(e, t, n, r, i, o) {
      var a = void 0 !== o ? o : {
        r: .1,
        g: .1,
        b: .1
       },
       s = (i - e) / (n - e);
      return a.r = t.r + (r.r - t.r) * s, a.g = t.g + (r.g - t.g) * s, a.b = t.b + (r.b - t.b) * s, a
     }, e
    }();
    t.previous = t.randomMix({
     r: .75,
     g: 0,
     b: .25
    }, {
     r: 1,
     g: .5,
     b: 0
    }, {
     r: 0,
     g: .35,
     b: 1
    }, .5), e.Palette = t
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Visualization || (e.Visualization = {}))
 }(a || (a = {}));
 var c;
 ! function(e, t) {
  c = t()
 }({}, function() {
  function e(e, t) {
   t && (e.prototype = Object.create(t.prototype)), e.prototype.constructor = e
  }

  function t(e) {
   return o(e) ? e : P(e)
  }

  function n(e) {
   return a(e) ? e : R(e)
  }

  function r(e) {
   return s(e) ? e : I(e)
  }

  function i(e) {
   return o(e) && !u(e) ? e : k(e)
  }

  function o(e) {
   return !(!e || !e[lr])
  }

  function a(e) {
   return !(!e || !e[cr])
  }

  function s(e) {
   return !(!e || !e[hr])
  }

  function u(e) {
   return a(e) || s(e)
  }

  function l(e) {
   return !(!e || !e[pr])
  }

  function c(e) {
   return e.value = !1, e
  }

  function h(e) {
   e && (e.value = !0)
  }

  function p() {}

  function d(e, t) {
   t = t || 0;
   for (var n = Math.max(0, e.length - t), r = new Array(n), i = 0; n > i; i++) r[i] = e[i + t];
   return r
  }

  function f(e) {
   return void 0 === e.size && (e.size = e.__iterate(g)), e.size
  }

  function m(e, t) {
   if ("number" != typeof t) {
    var n = t >>> 0;
    if ("" + n !== t || 4294967295 === n) return 0 / 0;
    t = n
   }
   return 0 > t ? f(e) + t : t
  }

  function g() {
   return !0
  }

  function v(e, t, n) {
   return (0 === e || void 0 !== n && -n >= e) && (void 0 === t || void 0 !== n && t >= n)
  }

  function y(e, t) {
   return w(e, t, 0)
  }

  function b(e, t) {
   return w(e, t, t)
  }

  function w(e, t, n) {
   return void 0 === e ? n : 0 > e ? Math.max(0, t + e) : void 0 === t ? e : Math.min(t, e)
  }

  function x(e) {
   this.next = e
  }

  function _(e, t, n, r) {
   var i = 0 === e ? t : 1 === e ? n : [t, n];
   return r ? r.value = i : r = {
    value: i,
    done: !1
   }, r
  }

  function S() {
   return {
    value: void 0,
    done: !0
   }
  }

  function C(e) {
   return !!M(e)
  }

  function E(e) {
   return e && "function" == typeof e.next
  }

  function T(e) {
   var t = M(e);
   return t && t.call(e)
  }

  function M(e) {
   var t = e && (Sr && e[Sr] || e[Cr]);
   return "function" == typeof t ? t : void 0
  }

  function A(e) {
   return e && "number" == typeof e.length
  }

  function P(e) {
   return null === e || void 0 === e ? N() : o(e) ? e.toSeq() : z(e)
  }

  function R(e) {
   return null === e || void 0 === e ? N().toKeyedSeq() : o(e) ? a(e) ? e.toSeq() : e.fromEntrySeq() : F(e)
  }

  function I(e) {
   return null === e || void 0 === e ? N() : o(e) ? a(e) ? e.entrySeq() : e.toIndexedSeq() : U(e)
  }

  function k(e) {
   return (null === e || void 0 === e ? N() : o(e) ? a(e) ? e.entrySeq() : e : U(e)).toSetSeq()
  }

  function D(e) {
   this._array = e, this.size = e.length
  }

  function V(e) {
   var t = Object.keys(e);
   this._object = e, this._keys = t, this.size = t.length
  }

  function L(e) {
   this._iterable = e, this.size = e.length || e.size
  }

  function B(e) {
   this._iterator = e, this._iteratorCache = []
  }

  function O(e) {
   return !(!e || !e[Tr])
  }

  function N() {
   return Mr || (Mr = new D([]))
  }

  function F(e) {
   var t = Array.isArray(e) ? new D(e).fromEntrySeq() : E(e) ? new B(e).fromEntrySeq() : C(e) ? new L(e).fromEntrySeq() : "object" == typeof e ? new V(e) : void 0;
   if (!t) throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: " + e);
   return t
  }

  function U(e) {
   var t = G(e);
   if (!t) throw new TypeError("Expected Array or iterable object of values: " + e);
   return t
  }

  function z(e) {
   var t = G(e) || "object" == typeof e && new V(e);
   if (!t) throw new TypeError("Expected Array or iterable object of values, or keyed object: " + e);
   return t
  }

  function G(e) {
   return A(e) ? new D(e) : E(e) ? new B(e) : C(e) ? new L(e) : void 0
  }

  function H(e, t, n, r) {
   var i = e._cache;
   if (i) {
    for (var o = i.length - 1, a = 0; o >= a; a++) {
     var s = i[n ? o - a : a];
     if (t(s[1], r ? s[0] : a, e) === !1) return a + 1
    }
    return a
   }
   return e.__iterateUncached(t, n)
  }

  function j(e, t, n, r) {
   var i = e._cache;
   if (i) {
    var o = i.length - 1,
     a = 0;
    return new x(function() {
     var e = i[n ? o - a : a];
     return a++ > o ? S() : _(t, r ? e[0] : a - 1, e[1])
    })
   }
   return e.__iteratorUncached(t, n)
  }

  function q(e, t) {
   return t ? W(t, e, "", {
    "": e
   }) : X(e)
  }

  function W(e, t, n, r) {
   return Array.isArray(t) ? e.call(r, n, I(t).map(function(n, r) {
    return W(e, n, r, t)
   })) : Y(t) ? e.call(r, n, R(t).map(function(n, r) {
    return W(e, n, r, t)
   })) : t
  }

  function X(e) {
   return Array.isArray(e) ? I(e).map(X).toList() : Y(e) ? R(e).map(X).toMap() : e
  }

  function Y(e) {
   return e && (e.constructor === Object || void 0 === e.constructor)
  }

  function Q(e, t) {
   if (e === t || e !== e && t !== t) return !0;
   if (!e || !t) return !1;
   if ("function" == typeof e.valueOf && "function" == typeof t.valueOf) {
    if (e = e.valueOf(), t = t.valueOf(), e === t || e !== e && t !== t) return !0;
    if (!e || !t) return !1
   }
   return "function" == typeof e.equals && "function" == typeof t.equals && e.equals(t) ? !0 : !1
  }

  function Z(e, t) {
   if (e === t) return !0;
   if (!o(t) || void 0 !== e.size && void 0 !== t.size && e.size !== t.size || void 0 !== e.__hash && void 0 !== t.__hash && e.__hash !== t.__hash || a(e) !== a(t) || s(e) !== s(t) || l(e) !== l(t)) return !1;
   if (0 === e.size && 0 === t.size) return !0;
   var n = !u(e);
   if (l(e)) {
    var r = e.entries();
    return t.every(function(e, t) {
     var i = r.next().value;
     return i && Q(i[1], e) && (n || Q(i[0], t))
    }) && r.next().done
   }
   var i = !1;
   if (void 0 === e.size)
    if (void 0 === t.size) "function" == typeof e.cacheResult && e.cacheResult();
    else {
     i = !0;
     var c = e;
     e = t, t = c
    } var h = !0,
    p = t.__iterate(function(t, r) {
     return (n ? e.has(t) : i ? Q(t, e.get(r, vr)) : Q(e.get(r, vr), t)) ? void 0 : (h = !1, !1)
    });
   return h && e.size === p
  }

  function K(e, t) {
   if (!(this instanceof K)) return new K(e, t);
   if (this._value = e, this.size = void 0 === t ? 1 / 0 : Math.max(0, t), 0 === this.size) {
    if (Ar) return Ar;
    Ar = this
   }
  }

  function $(e, t) {
   if (!e) throw new Error(t)
  }

  function J(e, t, n) {
   if (!(this instanceof J)) return new J(e, t, n);
   if ($(0 !== n, "Cannot step a Range by 0"), e = e || 0, void 0 === t && (t = 1 / 0), n = void 0 === n ? 1 : Math.abs(n), e > t && (n = -n), this._start = e, this._end = t, this._step = n, this.size = Math.max(0, Math.ceil((t - e) / n - 1) + 1), 0 === this.size) {
    if (Pr) return Pr;
    Pr = this
   }
  }

  function et() {
   throw TypeError("Abstract")
  }

  function tt() {}

  function nt() {}

  function rt() {}

  function it(e) {
   return e >>> 1 & 1073741824 | 3221225471 & e
  }

  function ot(e) {
   if (e === !1 || null === e || void 0 === e) return 0;
   if ("function" == typeof e.valueOf && (e = e.valueOf(), e === !1 || null === e || void 0 === e)) return 0;
   if (e === !0) return 1;
   var t = typeof e;
   if ("number" === t) {
    var n = 0 | e;
    for (n !== e && (n ^= 4294967295 * e); e > 4294967295;) e /= 4294967295, n ^= e;
    return it(n)
   }
   if ("string" === t) return e.length > Or ? at(e) : st(e);
   if ("function" == typeof e.hashCode) return e.hashCode();
   if ("object" === t) return ut(e);
   if ("function" == typeof e.toString) return st(e.toString());
   throw new Error("Value type " + t + " cannot be hashed.")
  }

  function at(e) {
   var t = Ur[e];
   return void 0 === t && (t = st(e), Fr === Nr && (Fr = 0, Ur = {}), Fr++, Ur[e] = t), t
  }

  function st(e) {
   for (var t = 0, n = 0; n < e.length; n++) t = 31 * t + e.charCodeAt(n) | 0;
   return it(t)
  }

  function ut(e) {
   var t;
   if (Vr && (t = Rr.get(e), void 0 !== t)) return t;
   if (t = e[Br], void 0 !== t) return t;
   if (!Dr) {
    if (t = e.propertyIsEnumerable && e.propertyIsEnumerable[Br], void 0 !== t) return t;
    if (t = lt(e), void 0 !== t) return t
   }
   if (t = ++Lr, 1073741824 & Lr && (Lr = 0), Vr) Rr.set(e, t);
   else {
    if (void 0 !== kr && kr(e) === !1) throw new Error("Non-extensible objects are not allowed as keys.");
    if (Dr) Object.defineProperty(e, Br, {
     enumerable: !1,
     configurable: !1,
     writable: !1,
     value: t
    });
    else if (void 0 !== e.propertyIsEnumerable && e.propertyIsEnumerable === e.constructor.prototype.propertyIsEnumerable) e.propertyIsEnumerable = function() {
     return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments)
    }, e.propertyIsEnumerable[Br] = t;
    else {
     if (void 0 === e.nodeType) throw new Error("Unable to set a non-enumerable property on object.");
     e[Br] = t
    }
   }
   return t
  }

  function lt(e) {
   if (e && e.nodeType > 0) switch (e.nodeType) {
    case 1:
     return e.uniqueID;
    case 9:
     return e.documentElement && e.documentElement.uniqueID
   }
  }

  function ct(e) {
   $(1 / 0 !== e, "Cannot perform this action with an infinite size.")
  }

  function ht(e) {
   return null === e || void 0 === e ? _t() : pt(e) && !l(e) ? e : _t().withMutations(function(t) {
    var r = n(e);
    ct(r.size), r.forEach(function(e, n) {
     return t.set(n, e)
    })
   })
  }

  function pt(e) {
   return !(!e || !e[zr])
  }

  function dt(e, t) {
   this.ownerID = e, this.entries = t
  }

  function ft(e, t, n) {
   this.ownerID = e, this.bitmap = t, this.nodes = n
  }

  function mt(e, t, n) {
   this.ownerID = e, this.count = t, this.nodes = n
  }

  function gt(e, t, n) {
   this.ownerID = e, this.keyHash = t, this.entries = n
  }

  function vt(e, t, n) {
   this.ownerID = e, this.keyHash = t, this.entry = n
  }

  function yt(e, t, n) {
   this._type = t, this._reverse = n, this._stack = e._root && wt(e._root)
  }

  function bt(e, t) {
   return _(e, t[0], t[1])
  }

  function wt(e, t) {
   return {
    node: e,
    index: 0,
    __prev: t
   }
  }

  function xt(e, t, n, r) {
   var i = Object.create(Gr);
   return i.size = e, i._root = t, i.__ownerID = n, i.__hash = r, i.__altered = !1, i
  }

  function _t() {
   return Hr || (Hr = xt(0))
  }

  function St(e, t, n) {
   var r, i;
   if (e._root) {
    var o = c(yr),
     a = c(br);
    if (r = Ct(e._root, e.__ownerID, 0, void 0, t, n, o, a), !a.value) return e;
    i = e.size + (o.value ? n === vr ? -1 : 1 : 0)
   } else {
    if (n === vr) return e;
    i = 1, r = new dt(e.__ownerID, [
     [t, n]
    ])
   }
   return e.__ownerID ? (e.size = i, e._root = r, e.__hash = void 0, e.__altered = !0, e) : r ? xt(i, r) : _t()
  }

  function Ct(e, t, n, r, i, o, a, s) {
   return e ? e.update(t, n, r, i, o, a, s) : o === vr ? e : (h(s), h(a), new vt(t, r, [i, o]))
  }

  function Et(e) {
   return e.constructor === vt || e.constructor === gt
  }

  function Tt(e, t, n, r, i) {
   if (e.keyHash === r) return new gt(t, r, [e.entry, i]);
   var o, a = (0 === n ? e.keyHash : e.keyHash >>> n) & gr,
    s = (0 === n ? r : r >>> n) & gr,
    u = a === s ? [Tt(e, t, n + fr, r, i)] : (o = new vt(t, r, i), s > a ? [e, o] : [o, e]);
   return new ft(t, 1 << a | 1 << s, u)
  }

  function Mt(e, t, n, r) {
   e || (e = new p);
   for (var i = new vt(e, ot(n), [n, r]), o = 0; o < t.length; o++) {
    var a = t[o];
    i = i.update(e, 0, void 0, a[0], a[1])
   }
   return i
  }

  function At(e, t, n, r) {
   for (var i = 0, o = 0, a = new Array(n), s = 0, u = 1, l = t.length; l > s; s++, u <<= 1) {
    var c = t[s];
    void 0 !== c && s !== r && (i |= u, a[o++] = c)
   }
   return new ft(e, i, a)
  }

  function Pt(e, t, n, r, i) {
   for (var o = 0, a = new Array(mr), s = 0; 0 !== n; s++, n >>>= 1) a[s] = 1 & n ? t[o++] : void 0;
   return a[r] = i, new mt(e, o + 1, a)
  }

  function Rt(e, t, r) {
   for (var i = [], a = 0; a < r.length; a++) {
    var s = r[a],
     u = n(s);
    o(s) || (u = u.map(function(e) {
     return q(e)
    })), i.push(u)
   }
   return Dt(e, t, i)
  }

  function It(e, t) {
   return e && e.mergeDeep && o(t) ? e.mergeDeep(t) : Q(e, t) ? e : t
  }

  function kt(e) {
   return function(t, n, r) {
    if (t && t.mergeDeepWith && o(n)) return t.mergeDeepWith(e, n);
    var i = e(t, n, r);
    return Q(t, i) ? t : i
   }
  }

  function Dt(e, t, n) {
   return n = n.filter(function(e) {
    return 0 !== e.size
   }), 0 === n.length ? e : 0 !== e.size || e.__ownerID || 1 !== n.length ? e.withMutations(function(e) {
    for (var r = t ? function(n, r) {
      e.update(r, vr, function(e) {
       return e === vr ? n : t(e, n, r)
      })
     } : function(t, n) {
      e.set(n, t)
     }, i = 0; i < n.length; i++) n[i].forEach(r)
   }) : e.constructor(n[0])
  }

  function Vt(e, t, n, r) {
   var i = e === vr,
    o = t.next();
   if (o.done) {
    var a = i ? n : e,
     s = r(a);
    return s === a ? e : s
   }
   $(i || e && e.set, "invalid keyPath");
   var u = o.value,
    l = i ? vr : e.get(u, vr),
    c = Vt(l, t, n, r);
   return c === l ? e : c === vr ? e.remove(u) : (i ? _t() : e).set(u, c)
  }

  function Lt(e) {
   return e -= e >> 1 & 1431655765, e = (858993459 & e) + (e >> 2 & 858993459), e = e + (e >> 4) & 252645135, e += e >> 8, e += e >> 16, 127 & e
  }

  function Bt(e, t, n, r) {
   var i = r ? e : d(e);
   return i[t] = n, i
  }

  function Ot(e, t, n, r) {
   var i = e.length + 1;
   if (r && t + 1 === i) return e[t] = n, e;
   for (var o = new Array(i), a = 0, s = 0; i > s; s++) s === t ? (o[s] = n, a = -1) : o[s] = e[s + a];
   return o
  }

  function Nt(e, t, n) {
   var r = e.length - 1;
   if (n && t === r) return e.pop(), e;
   for (var i = new Array(r), o = 0, a = 0; r > a; a++) a === t && (o = 1), i[a] = e[a + o];
   return i
  }

  function Ft(e) {
   var t = jt();
   if (null === e || void 0 === e) return t;
   if (Ut(e)) return e;
   var n = r(e),
    i = n.size;
   return 0 === i ? t : (ct(i), i > 0 && mr > i ? Ht(0, i, fr, null, new zt(n.toArray())) : t.withMutations(function(e) {
    e.setSize(i), n.forEach(function(t, n) {
     return e.set(n, t)
    })
   }))
  }

  function Ut(e) {
   return !(!e || !e[Xr])
  }

  function zt(e, t) {
   this.array = e, this.ownerID = t
  }

  function Gt(e, t) {
   function n(e, t, n) {
    return 0 === t ? r(e, n) : i(e, t, n)
   }

   function r(e, n) {
    var r = n === s ? u && u.array : e && e.array,
     i = n > o ? 0 : o - n,
     l = a - n;
    return l > mr && (l = mr),
     function() {
      if (i === l) return Zr;
      var e = t ? --l : i++;
      return r && r[e]
     }
   }

   function i(e, r, i) {
    var s, u = e && e.array,
     l = i > o ? 0 : o - i >> r,
     c = (a - i >> r) + 1;
    return c > mr && (c = mr),
     function() {
      for (;;) {
       if (s) {
        var e = s();
        if (e !== Zr) return e;
        s = null
       }
       if (l === c) return Zr;
       var o = t ? --c : l++;
       s = n(u && u[o], r - fr, i + (o << r))
      }
     }
   }
   var o = e._origin,
    a = e._capacity,
    s = Kt(a),
    u = e._tail;
   return n(e._root, e._level, 0)
  }

  function Ht(e, t, n, r, i, o, a) {
   var s = Object.create(Yr);
   return s.size = t - e, s._origin = e, s._capacity = t, s._level = n, s._root = r, s._tail = i, s.__ownerID = o, s.__hash = a, s.__altered = !1, s
  }

  function jt() {
   return Qr || (Qr = Ht(0, 0, fr))
  }

  function qt(e, t, n) {
   if (t = m(e, t), t !== t) return e;
   if (t >= e.size || 0 > t) return e.withMutations(function(e) {
    0 > t ? Qt(e, t).set(0, n) : Qt(e, 0, t + 1).set(t, n)
   });
   t += e._origin;
   var r = e._tail,
    i = e._root,
    o = c(br);
   return t >= Kt(e._capacity) ? r = Wt(r, e.__ownerID, 0, t, n, o) : i = Wt(i, e.__ownerID, e._level, t, n, o), o.value ? e.__ownerID ? (e._root = i, e._tail = r, e.__hash = void 0, e.__altered = !0, e) : Ht(e._origin, e._capacity, e._level, i, r) : e
  }

  function Wt(e, t, n, r, i, o) {
   var a = r >>> n & gr,
    s = e && a < e.array.length;
   if (!s && void 0 === i) return e;
   var u;
   if (n > 0) {
    var l = e && e.array[a],
     c = Wt(l, t, n - fr, r, i, o);
    return c === l ? e : (u = Xt(e, t), u.array[a] = c, u)
   }
   return s && e.array[a] === i ? e : (h(o), u = Xt(e, t), void 0 === i && a === u.array.length - 1 ? u.array.pop() : u.array[a] = i, u)
  }

  function Xt(e, t) {
   return t && e && t === e.ownerID ? e : new zt(e ? e.array.slice() : [], t)
  }

  function Yt(e, t) {
   if (t >= Kt(e._capacity)) return e._tail;
   if (t < 1 << e._level + fr) {
    for (var n = e._root, r = e._level; n && r > 0;) n = n.array[t >>> r & gr], r -= fr;
    return n
   }
  }

  function Qt(e, t, n) {
   void 0 !== t && (t = 0 | t), void 0 !== n && (n = 0 | n);
   var r = e.__ownerID || new p,
    i = e._origin,
    o = e._capacity,
    a = i + t,
    s = void 0 === n ? o : 0 > n ? o + n : i + n;
   if (a === i && s === o) return e;
   if (a >= s) return e.clear();
   for (var u = e._level, l = e._root, c = 0; 0 > a + c;) l = new zt(l && l.array.length ? [void 0, l] : [], r), u += fr, c += 1 << u;
   c && (a += c, i += c, s += c, o += c);
   for (var h = Kt(o), d = Kt(s); d >= 1 << u + fr;) l = new zt(l && l.array.length ? [l] : [], r), u += fr;
   var f = e._tail,
    m = h > d ? Yt(e, s - 1) : d > h ? new zt([], r) : f;
   if (f && d > h && o > a && f.array.length) {
    l = Xt(l, r);
    for (var g = l, v = u; v > fr; v -= fr) {
     var y = h >>> v & gr;
     g = g.array[y] = Xt(g.array[y], r)
    }
    g.array[h >>> fr & gr] = f
   }
   if (o > s && (m = m && m.removeAfter(r, 0, s)), a >= d) a -= d, s -= d, u = fr, l = null, m = m && m.removeBefore(r, 0, a);
   else if (a > i || h > d) {
    for (c = 0; l;) {
     var b = a >>> u & gr;
     if (b !== d >>> u & gr) break;
     b && (c += (1 << u) * b), u -= fr, l = l.array[b]
    }
    l && a > i && (l = l.removeBefore(r, u, a - c)), l && h > d && (l = l.removeAfter(r, u, d - c)), c && (a -= c, s -= c)
   }
   return e.__ownerID ? (e.size = s - a, e._origin = a, e._capacity = s, e._level = u, e._root = l, e._tail = m, e.__hash = void 0, e.__altered = !0, e) : Ht(a, s, u, l, m)
  }

  function Zt(e, t, n) {
   for (var i = [], a = 0, s = 0; s < n.length; s++) {
    var u = n[s],
     l = r(u);
    l.size > a && (a = l.size), o(u) || (l = l.map(function(e) {
     return q(e)
    })), i.push(l)
   }
   return a > e.size && (e = e.setSize(a)), Dt(e, t, i)
  }

  function Kt(e) {
   return mr > e ? 0 : e - 1 >>> fr << fr
  }

  function $t(e) {
   return null === e || void 0 === e ? tn() : Jt(e) ? e : tn().withMutations(function(t) {
    var r = n(e);
    ct(r.size), r.forEach(function(e, n) {
     return t.set(n, e)
    })
   })
  }

  function Jt(e) {
   return pt(e) && l(e)
  }

  function en(e, t, n, r) {
   var i = Object.create($t.prototype);
   return i.size = e ? e.size : 0, i._map = e, i._list = t, i.__ownerID = n, i.__hash = r, i
  }

  function tn() {
   return Kr || (Kr = en(_t(), jt()))
  }

  function nn(e, t, n) {
   var r, i, o = e._map,
    a = e._list,
    s = o.get(t),
    u = void 0 !== s;
   if (n === vr) {
    if (!u) return e;
    a.size >= mr && a.size >= 2 * o.size ? (i = a.filter(function(e, t) {
     return void 0 !== e && s !== t
    }), r = i.toKeyedSeq().map(function(e) {
     return e[0]
    }).flip().toMap(), e.__ownerID && (r.__ownerID = i.__ownerID = e.__ownerID)) : (r = o.remove(t), i = s === a.size - 1 ? a.pop() : a.set(s, void 0))
   } else if (u) {
    if (n === a.get(s)[1]) return e;
    r = o, i = a.set(s, [t, n])
   } else r = o.set(t, a.size), i = a.set(a.size, [t, n]);
   return e.__ownerID ? (e.size = r.size, e._map = r, e._list = i, e.__hash = void 0, e) : en(r, i)
  }

  function rn(e, t) {
   this._iter = e, this._useKeys = t, this.size = e.size
  }

  function on(e) {
   this._iter = e, this.size = e.size
  }

  function an(e) {
   this._iter = e, this.size = e.size
  }

  function sn(e) {
   this._iter = e, this.size = e.size
  }

  function un(e) {
   var t = Pn(e);
   return t._iter = e, t.size = e.size, t.flip = function() {
    return e
   }, t.reverse = function() {
    var t = e.reverse.apply(this);
    return t.flip = function() {
     return e.reverse()
    }, t
   }, t.has = function(t) {
    return e.includes(t)
   }, t.includes = function(t) {
    return e.has(t)
   }, t.cacheResult = Rn, t.__iterateUncached = function(t, n) {
    var r = this;
    return e.__iterate(function(e, n) {
     return t(n, e, r) !== !1
    }, n)
   }, t.__iteratorUncached = function(t, n) {
    if (t === _r) {
     var r = e.__iterator(t, n);
     return new x(function() {
      var e = r.next();
      if (!e.done) {
       var t = e.value[0];
       e.value[0] = e.value[1], e.value[1] = t
      }
      return e
     })
    }
    return e.__iterator(t === xr ? wr : xr, n)
   }, t
  }

  function ln(e, t, n) {
   var r = Pn(e);
   return r.size = e.size, r.has = function(t) {
    return e.has(t)
   }, r.get = function(r, i) {
    var o = e.get(r, vr);
    return o === vr ? i : t.call(n, o, r, e)
   }, r.__iterateUncached = function(r, i) {
    var o = this;
    return e.__iterate(function(e, i, a) {
     return r(t.call(n, e, i, a), i, o) !== !1
    }, i)
   }, r.__iteratorUncached = function(r, i) {
    var o = e.__iterator(_r, i);
    return new x(function() {
     var i = o.next();
     if (i.done) return i;
     var a = i.value,
      s = a[0];
     return _(r, s, t.call(n, a[1], s, e), i)
    })
   }, r
  }

  function cn(e, t) {
   var n = Pn(e);
   return n._iter = e, n.size = e.size, n.reverse = function() {
    return e
   }, e.flip && (n.flip = function() {
    var t = un(e);
    return t.reverse = function() {
     return e.flip()
    }, t
   }), n.get = function(n, r) {
    return e.get(t ? n : -1 - n, r)
   }, n.has = function(n) {
    return e.has(t ? n : -1 - n)
   }, n.includes = function(t) {
    return e.includes(t)
   }, n.cacheResult = Rn, n.__iterate = function(t, n) {
    var r = this;
    return e.__iterate(function(e, n) {
     return t(e, n, r)
    }, !n)
   }, n.__iterator = function(t, n) {
    return e.__iterator(t, !n)
   }, n
  }

  function hn(e, t, n, r) {
   var i = Pn(e);
   return r && (i.has = function(r) {
    var i = e.get(r, vr);
    return i !== vr && !!t.call(n, i, r, e)
   }, i.get = function(r, i) {
    var o = e.get(r, vr);
    return o !== vr && t.call(n, o, r, e) ? o : i
   }), i.__iterateUncached = function(i, o) {
    var a = this,
     s = 0;
    return e.__iterate(function(e, o, u) {
     return t.call(n, e, o, u) ? (s++, i(e, r ? o : s - 1, a)) : void 0
    }, o), s
   }, i.__iteratorUncached = function(i, o) {
    var a = e.__iterator(_r, o),
     s = 0;
    return new x(function() {
     for (;;) {
      var o = a.next();
      if (o.done) return o;
      var u = o.value,
       l = u[0],
       c = u[1];
      if (t.call(n, c, l, e)) return _(i, r ? l : s++, c, o)
     }
    })
   }, i
  }

  function pn(e, t, n) {
   var r = ht().asMutable();
   return e.__iterate(function(i, o) {
    r.update(t.call(n, i, o, e), 0, function(e) {
     return e + 1
    })
   }), r.asImmutable()
  }

  function dn(e, t, n) {
   var r = a(e),
    i = (l(e) ? $t() : ht()).asMutable();
   e.__iterate(function(o, a) {
    i.update(t.call(n, o, a, e), function(e) {
     return e = e || [], e.push(r ? [a, o] : o), e
    })
   });
   var o = An(e);
   return i.map(function(t) {
    return En(e, o(t))
   })
  }

  function fn(e, t, n, r) {
   var i = e.size;
   if (void 0 !== t && (t = 0 | t), void 0 !== n && (n = 0 | n), v(t, n, i)) return e;
   var o = y(t, i),
    a = b(n, i);
   if (o !== o || a !== a) return fn(e.toSeq().cacheResult(), t, n, r);
   var s, u = a - o;
   u === u && (s = 0 > u ? 0 : u);
   var l = Pn(e);
   return l.size = 0 === s ? s : e.size && s || void 0, !r && O(e) && s >= 0 && (l.get = function(t, n) {
    return t = m(this, t), t >= 0 && s > t ? e.get(t + o, n) : n
   }), l.__iterateUncached = function(t, n) {
    var i = this;
    if (0 === s) return 0;
    if (n) return this.cacheResult().__iterate(t, n);
    var a = 0,
     u = !0,
     l = 0;
    return e.__iterate(function(e, n) {
     return u && (u = a++ < o) ? void 0 : (l++, t(e, r ? n : l - 1, i) !== !1 && l !== s)
    }), l
   }, l.__iteratorUncached = function(t, n) {
    if (0 !== s && n) return this.cacheResult().__iterator(t, n);
    var i = 0 !== s && e.__iterator(t, n),
     a = 0,
     u = 0;
    return new x(function() {
     for (; a++ < o;) i.next();
     if (++u > s) return S();
     var e = i.next();
     return r || t === xr ? e : t === wr ? _(t, u - 1, void 0, e) : _(t, u - 1, e.value[1], e)
    })
   }, l
  }

  function mn(e, t, n) {
   var r = Pn(e);
   return r.__iterateUncached = function(r, i) {
    var o = this;
    if (i) return this.cacheResult().__iterate(r, i);
    var a = 0;
    return e.__iterate(function(e, i, s) {
     return t.call(n, e, i, s) && ++a && r(e, i, o)
    }), a
   }, r.__iteratorUncached = function(r, i) {
    var o = this;
    if (i) return this.cacheResult().__iterator(r, i);
    var a = e.__iterator(_r, i),
     s = !0;
    return new x(function() {
     if (!s) return S();
     var e = a.next();
     if (e.done) return e;
     var i = e.value,
      u = i[0],
      l = i[1];
     return t.call(n, l, u, o) ? r === _r ? e : _(r, u, l, e) : (s = !1, S())
    })
   }, r
  }

  function gn(e, t, n, r) {
   var i = Pn(e);
   return i.__iterateUncached = function(i, o) {
    var a = this;
    if (o) return this.cacheResult().__iterate(i, o);
    var s = !0,
     u = 0;
    return e.__iterate(function(e, o, l) {
     return s && (s = t.call(n, e, o, l)) ? void 0 : (u++, i(e, r ? o : u - 1, a))
    }), u
   }, i.__iteratorUncached = function(i, o) {
    var a = this;
    if (o) return this.cacheResult().__iterator(i, o);
    var s = e.__iterator(_r, o),
     u = !0,
     l = 0;
    return new x(function() {
     var e, o, c;
     do {
      if (e = s.next(), e.done) return r || i === xr ? e : i === wr ? _(i, l++, void 0, e) : _(i, l++, e.value[1], e);
      var h = e.value;
      o = h[0], c = h[1], u && (u = t.call(n, c, o, a))
     } while (u);
     return i === _r ? e : _(i, o, c, e)
    })
   }, i
  }

  function vn(e, t) {
   var r = a(e),
    i = [e].concat(t).map(function(e) {
     return o(e) ? r && (e = n(e)) : e = r ? F(e) : U(Array.isArray(e) ? e : [e]), e
    }).filter(function(e) {
     return 0 !== e.size
    });
   if (0 === i.length) return e;
   if (1 === i.length) {
    var u = i[0];
    if (u === e || r && a(u) || s(e) && s(u)) return u
   }
   var l = new D(i);
   return r ? l = l.toKeyedSeq() : s(e) || (l = l.toSetSeq()), l = l.flatten(!0), l.size = i.reduce(function(e, t) {
    if (void 0 !== e) {
     var n = t.size;
     if (void 0 !== n) return e + n
    }
   }, 0), l
  }

  function yn(e, t, n) {
   var r = Pn(e);
   return r.__iterateUncached = function(r, i) {
    function a(e, l) {
     var c = this;
     e.__iterate(function(e, i) {
      return (!t || t > l) && o(e) ? a(e, l + 1) : r(e, n ? i : s++, c) === !1 && (u = !0), !u
     }, i)
    }
    var s = 0,
     u = !1;
    return a(e, 0), s
   }, r.__iteratorUncached = function(r, i) {
    var a = e.__iterator(r, i),
     s = [],
     u = 0;
    return new x(function() {
     for (; a;) {
      var e = a.next();
      if (e.done === !1) {
       var l = e.value;
       if (r === _r && (l = l[1]), t && !(s.length < t) || !o(l)) return n ? e : _(r, u++, l, e);
       s.push(a), a = l.__iterator(r, i)
      } else a = s.pop()
     }
     return S()
    })
   }, r
  }

  function bn(e, t, n) {
   var r = An(e);
   return e.toSeq().map(function(i, o) {
    return r(t.call(n, i, o, e))
   }).flatten(!0)
  }

  function wn(e, t) {
   var n = Pn(e);
   return n.size = e.size && 2 * e.size - 1, n.__iterateUncached = function(n, r) {
    var i = this,
     o = 0;
    return e.__iterate(function(e) {
     return (!o || n(t, o++, i) !== !1) && n(e, o++, i) !== !1
    }, r), o
   }, n.__iteratorUncached = function(n, r) {
    var i, o = e.__iterator(xr, r),
     a = 0;
    return new x(function() {
     return (!i || a % 2) && (i = o.next(), i.done) ? i : a % 2 ? _(n, a++, t) : _(n, a++, i.value, i)
    })
   }, n
  }

  function xn(e, t, n) {
   t || (t = In);
   var r = a(e),
    i = 0,
    o = e.toSeq().map(function(t, r) {
     return [r, t, i++, n ? n(t, r, e) : t]
    }).toArray();
   return o.sort(function(e, n) {
    return t(e[3], n[3]) || e[2] - n[2]
   }).forEach(r ? function(e, t) {
    o[t].length = 2
   } : function(e, t) {
    o[t] = e[1]
   }), r ? R(o) : s(e) ? I(o) : k(o)
  }

  function _n(e, t, n) {
   if (t || (t = In), n) {
    var r = e.toSeq().map(function(t, r) {
     return [t, n(t, r, e)]
    }).reduce(function(e, n) {
     return Sn(t, e[1], n[1]) ? n : e
    });
    return r && r[0]
   }
   return e.reduce(function(e, n) {
    return Sn(t, e, n) ? n : e
   })
  }

  function Sn(e, t, n) {
   var r = e(n, t);
   return 0 === r && n !== t && (void 0 === n || null === n || n !== n) || r > 0
  }

  function Cn(e, n, r) {
   var i = Pn(e);
   return i.size = new D(r).map(function(e) {
    return e.size
   }).min(), i.__iterate = function(e, t) {
    for (var n, r = this.__iterator(xr, t), i = 0; !(n = r.next()).done && e(n.value, i++, this) !== !1;);
    return i
   }, i.__iteratorUncached = function(e, i) {
    var o = r.map(function(e) {
      return e = t(e), T(i ? e.reverse() : e)
     }),
     a = 0,
     s = !1;
    return new x(function() {
     var t;
     return s || (t = o.map(function(e) {
      return e.next()
     }), s = t.some(function(e) {
      return e.done
     })), s ? S() : _(e, a++, n.apply(null, t.map(function(e) {
      return e.value
     })))
    })
   }, i
  }

  function En(e, t) {
   return O(e) ? t : e.constructor(t)
  }

  function Tn(e) {
   if (e !== Object(e)) throw new TypeError("Expected [K, V] tuple: " + e)
  }

  function Mn(e) {
   return ct(e.size), f(e)
  }

  function An(e) {
   return a(e) ? n : s(e) ? r : i
  }

  function Pn(e) {
   return Object.create((a(e) ? R : s(e) ? I : k).prototype)
  }

  function Rn() {
   return this._iter.cacheResult ? (this._iter.cacheResult(), this.size = this._iter.size, this) : P.prototype.cacheResult.call(this)
  }

  function In(e, t) {
   return e > t ? 1 : t > e ? -1 : 0
  }

  function kn(e) {
   var n = T(e);
   if (!n) {
    if (!A(e)) throw new TypeError("Expected iterable or array-like: " + e);
    n = T(t(e))
   }
   return n
  }

  function Dn(e, t) {
   var n, r = function(o) {
     if (o instanceof r) return o;
     if (!(this instanceof r)) return new r(o);
     if (!n) {
      n = !0;
      var a = Object.keys(e);
      Bn(i, a), i.size = a.length, i._name = t, i._keys = a, i._defaultValues = e
     }
     this._map = ht(o)
    },
    i = r.prototype = Object.create($r);
   return i.constructor = r, r
  }

  function Vn(e, t, n) {
   var r = Object.create(Object.getPrototypeOf(e));
   return r._map = t, r.__ownerID = n, r
  }

  function Ln(e) {
   return e._name || e.constructor.name || "Record"
  }

  function Bn(e, t) {
   try {
    t.forEach(On.bind(void 0, e))
   } catch (n) {}
  }

  function On(e, t) {
   Object.defineProperty(e, t, {
    get: function() {
     return this.get(t)
    },
    set: function(e) {
     $(this.__ownerID, "Cannot set on an immutable record."), this.set(t, e)
    }
   })
  }

  function Nn(e) {
   return null === e || void 0 === e ? Gn() : Fn(e) && !l(e) ? e : Gn().withMutations(function(t) {
    var n = i(e);
    ct(n.size), n.forEach(function(e) {
     return t.add(e)
    })
   })
  }

  function Fn(e) {
   return !(!e || !e[Jr])
  }

  function Un(e, t) {
   return e.__ownerID ? (e.size = t.size, e._map = t, e) : t === e._map ? e : 0 === t.size ? e.__empty() : e.__make(t)
  }

  function zn(e, t) {
   var n = Object.create(ei);
   return n.size = e ? e.size : 0, n._map = e, n.__ownerID = t, n
  }

  function Gn() {
   return ti || (ti = zn(_t()))
  }

  function Hn(e) {
   return null === e || void 0 === e ? Wn() : jn(e) ? e : Wn().withMutations(function(t) {
    var n = i(e);
    ct(n.size), n.forEach(function(e) {
     return t.add(e)
    })
   })
  }

  function jn(e) {
   return Fn(e) && l(e)
  }

  function qn(e, t) {
   var n = Object.create(ni);
   return n.size = e ? e.size : 0, n._map = e, n.__ownerID = t, n
  }

  function Wn() {
   return ri || (ri = qn(tn()))
  }

  function Xn(e) {
   return null === e || void 0 === e ? Zn() : Yn(e) ? e : Zn().unshiftAll(e)
  }

  function Yn(e) {
   return !(!e || !e[ii])
  }

  function Qn(e, t, n, r) {
   var i = Object.create(oi);
   return i.size = e, i._head = t, i.__ownerID = n, i.__hash = r, i.__altered = !1, i
  }

  function Zn() {
   return ai || (ai = Qn(0))
  }

  function Kn(e, t) {
   var n = function(n) {
    e.prototype[n] = t[n]
   };
   return Object.keys(t).forEach(n), Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(t).forEach(n), e
  }

  function $n(e, t) {
   return t
  }

  function Jn(e, t) {
   return [t, e]
  }

  function er(e) {
   return function() {
    return !e.apply(this, arguments)
   }
  }

  function tr(e) {
   return function() {
    return -e.apply(this, arguments)
   }
  }

  function nr(e) {
   return "string" == typeof e ? JSON.stringify(e) : e
  }

  function rr() {
   return d(arguments)
  }

  function ir(e, t) {
   return t > e ? 1 : e > t ? -1 : 0
  }

  function or(e) {
   if (1 / 0 === e.size) return 0;
   var t = l(e),
    n = a(e),
    r = t ? 1 : 0,
    i = e.__iterate(n ? t ? function(e, t) {
     r = 31 * r + sr(ot(e), ot(t)) | 0
    } : function(e, t) {
     r = r + sr(ot(e), ot(t)) | 0
    } : t ? function(e) {
     r = 31 * r + ot(e) | 0
    } : function(e) {
     r = r + ot(e) | 0
    });
   return ar(i, r)
  }

  function ar(e, t) {
   return t = Ir(t, 3432918353), t = Ir(t << 15 | t >>> -15, 461845907), t = Ir(t << 13 | t >>> -13, 5), t = (t + 3864292196 | 0) ^ e, t = Ir(t ^ t >>> 16, 2246822507), t = Ir(t ^ t >>> 13, 3266489909), t = it(t ^ t >>> 16)
  }

  function sr(e, t) {
   return e ^ t + 2654435769 + (e << 6) + (e >> 2) | 0
  }
  var ur = Array.prototype.slice;
  e(n, t), e(r, t), e(i, t), t.isIterable = o, t.isKeyed = a, t.isIndexed = s, t.isAssociative = u, t.isOrdered = l, t.Keyed = n, t.Indexed = r, t.Set = i;
  var lr = "@@__IMMUTABLE_ITERABLE__@@",
   cr = "@@__IMMUTABLE_KEYED__@@",
   hr = "@@__IMMUTABLE_INDEXED__@@",
   pr = "@@__IMMUTABLE_ORDERED__@@",
   dr = "delete",
   fr = 5,
   mr = 1 << fr,
   gr = mr - 1,
   vr = {},
   yr = {
    value: !1
   },
   br = {
    value: !1
   },
   wr = 0,
   xr = 1,
   _r = 2,
   Sr = "function" == typeof Symbol && Symbol.iterator,
   Cr = "@@iterator",
   Er = Sr || Cr;
  x.prototype.toString = function() {
   return "[Iterator]"
  }, x.KEYS = wr, x.VALUES = xr, x.ENTRIES = _r, x.prototype.inspect = x.prototype.toSource = function() {
   return this.toString()
  }, x.prototype[Er] = function() {
   return this
  }, e(P, t), P.of = function() {
   return P(arguments)
  }, P.prototype.toSeq = function() {
   return this
  }, P.prototype.toString = function() {
   return this.__toString("Seq {", "}")
  }, P.prototype.cacheResult = function() {
   return !this._cache && this.__iterateUncached && (this._cache = this.entrySeq().toArray(), this.size = this._cache.length), this
  }, P.prototype.__iterate = function(e, t) {
   return H(this, e, t, !0)
  }, P.prototype.__iterator = function(e, t) {
   return j(this, e, t, !0)
  }, e(R, P), R.prototype.toKeyedSeq = function() {
   return this
  }, e(I, P), I.of = function() {
   return I(arguments)
  }, I.prototype.toIndexedSeq = function() {
   return this
  }, I.prototype.toString = function() {
   return this.__toString("Seq [", "]")
  }, I.prototype.__iterate = function(e, t) {
   return H(this, e, t, !1)
  }, I.prototype.__iterator = function(e, t) {
   return j(this, e, t, !1)
  }, e(k, P), k.of = function() {
   return k(arguments)
  }, k.prototype.toSetSeq = function() {
   return this
  }, P.isSeq = O, P.Keyed = R, P.Set = k, P.Indexed = I;
  var Tr = "@@__IMMUTABLE_SEQ__@@";
  P.prototype[Tr] = !0, e(D, I), D.prototype.get = function(e, t) {
   return this.has(e) ? this._array[m(this, e)] : t
  }, D.prototype.__iterate = function(e, t) {
   for (var n = this._array, r = n.length - 1, i = 0; r >= i; i++)
    if (e(n[t ? r - i : i], i, this) === !1) return i + 1;
   return i
  }, D.prototype.__iterator = function(e, t) {
   var n = this._array,
    r = n.length - 1,
    i = 0;
   return new x(function() {
    return i > r ? S() : _(e, i, n[t ? r - i++ : i++])
   })
  }, e(V, R), V.prototype.get = function(e, t) {
   return void 0 === t || this.has(e) ? this._object[e] : t
  }, V.prototype.has = function(e) {
   return this._object.hasOwnProperty(e)
  }, V.prototype.__iterate = function(e, t) {
   for (var n = this._object, r = this._keys, i = r.length - 1, o = 0; i >= o; o++) {
    var a = r[t ? i - o : o];
    if (e(n[a], a, this) === !1) return o + 1
   }
   return o
  }, V.prototype.__iterator = function(e, t) {
   var n = this._object,
    r = this._keys,
    i = r.length - 1,
    o = 0;
   return new x(function() {
    var a = r[t ? i - o : o];
    return o++ > i ? S() : _(e, a, n[a])
   })
  }, V.prototype[pr] = !0, e(L, I), L.prototype.__iterateUncached = function(e, t) {
   if (t) return this.cacheResult().__iterate(e, t);
   var n = this._iterable,
    r = T(n),
    i = 0;
   if (E(r))
    for (var o; !(o = r.next()).done && e(o.value, i++, this) !== !1;);
   return i
  }, L.prototype.__iteratorUncached = function(e, t) {
   if (t) return this.cacheResult().__iterator(e, t);
   var n = this._iterable,
    r = T(n);
   if (!E(r)) return new x(S);
   var i = 0;
   return new x(function() {
    var t = r.next();
    return t.done ? t : _(e, i++, t.value)
   })
  }, e(B, I), B.prototype.__iterateUncached = function(e, t) {
   if (t) return this.cacheResult().__iterate(e, t);
   for (var n = this._iterator, r = this._iteratorCache, i = 0; i < r.length;)
    if (e(r[i], i++, this) === !1) return i;
   for (var o; !(o = n.next()).done;) {
    var a = o.value;
    if (r[i] = a, e(a, i++, this) === !1) break
   }
   return i
  }, B.prototype.__iteratorUncached = function(e, t) {
   if (t) return this.cacheResult().__iterator(e, t);
   var n = this._iterator,
    r = this._iteratorCache,
    i = 0;
   return new x(function() {
    if (i >= r.length) {
     var t = n.next();
     if (t.done) return t;
     r[i] = t.value
    }
    return _(e, i, r[i++])
   })
  };
  var Mr;
  e(K, I), K.prototype.toString = function() {
   return 0 === this.size ? "Repeat []" : "Repeat [ " + this._value + " " + this.size + " times ]"
  }, K.prototype.get = function(e, t) {
   return this.has(e) ? this._value : t
  }, K.prototype.includes = function(e) {
   return Q(this._value, e)
  }, K.prototype.slice = function(e, t) {
   var n = this.size;
   return v(e, t, n) ? this : new K(this._value, b(t, n) - y(e, n))
  }, K.prototype.reverse = function() {
   return this
  }, K.prototype.indexOf = function(e) {
   return Q(this._value, e) ? 0 : -1
  }, K.prototype.lastIndexOf = function(e) {
   return Q(this._value, e) ? this.size : -1
  }, K.prototype.__iterate = function(e) {
   for (var t = 0; t < this.size; t++)
    if (e(this._value, t, this) === !1) return t + 1;
   return t
  }, K.prototype.__iterator = function(e) {
   var t = this,
    n = 0;
   return new x(function() {
    return n < t.size ? _(e, n++, t._value) : S()
   })
  }, K.prototype.equals = function(e) {
   return e instanceof K ? Q(this._value, e._value) : Z(e)
  };
  var Ar;
  e(J, I), J.prototype.toString = function() {
   return 0 === this.size ? "Range []" : "Range [ " + this._start + "..." + this._end + (1 !== this._step ? " by " + this._step : "") + " ]"
  }, J.prototype.get = function(e, t) {
   return this.has(e) ? this._start + m(this, e) * this._step : t
  }, J.prototype.includes = function(e) {
   var t = (e - this._start) / this._step;
   return t >= 0 && t < this.size && t === Math.floor(t)
  }, J.prototype.slice = function(e, t) {
   return v(e, t, this.size) ? this : (e = y(e, this.size), t = b(t, this.size), e >= t ? new J(0, 0) : new J(this.get(e, this._end), this.get(t, this._end), this._step))
  }, J.prototype.indexOf = function(e) {
   var t = e - this._start;
   if (t % this._step === 0) {
    var n = t / this._step;
    if (n >= 0 && n < this.size) return n
   }
   return -1
  }, J.prototype.lastIndexOf = function(e) {
   return this.indexOf(e)
  }, J.prototype.__iterate = function(e, t) {
   for (var n = this.size - 1, r = this._step, i = t ? this._start + n * r : this._start, o = 0; n >= o; o++) {
    if (e(i, o, this) === !1) return o + 1;
    i += t ? -r : r
   }
   return o
  }, J.prototype.__iterator = function(e, t) {
   var n = this.size - 1,
    r = this._step,
    i = t ? this._start + n * r : this._start,
    o = 0;
   return new x(function() {
    var a = i;
    return i += t ? -r : r, o > n ? S() : _(e, o++, a)
   })
  }, J.prototype.equals = function(e) {
   return e instanceof J ? this._start === e._start && this._end === e._end && this._step === e._step : Z(this, e)
  };
  var Pr;
  e(et, t), e(tt, et), e(nt, et), e(rt, et), et.Keyed = tt, et.Indexed = nt, et.Set = rt;
  var Rr, Ir = "function" == typeof Math.imul && -2 === Math.imul(4294967295, 2) ? Math.imul : function(e, t) {
    e = 0 | e, t = 0 | t;
    var n = 65535 & e,
     r = 65535 & t;
    return n * r + ((e >>> 16) * r + n * (t >>> 16) << 16 >>> 0) | 0
   },
   kr = Object.isExtensible,
   Dr = function() {
    try {
     return Object.defineProperty({}, "@", {}), !0
    } catch (e) {
     return !1
    }
   }(),
   Vr = "function" == typeof WeakMap;
  Vr && (Rr = new WeakMap);
  var Lr = 0,
   Br = "__immutablehash__";
  "function" == typeof Symbol && (Br = Symbol(Br));
  var Or = 16,
   Nr = 255,
   Fr = 0,
   Ur = {};
  e(ht, tt), ht.of = function() {
   var e = ur.call(arguments, 0);
   return _t().withMutations(function(t) {
    for (var n = 0; n < e.length; n += 2) {
     if (n + 1 >= e.length) throw new Error("Missing value for key: " + e[n]);
     t.set(e[n], e[n + 1])
    }
   })
  }, ht.prototype.toString = function() {
   return this.__toString("Map {", "}")
  }, ht.prototype.get = function(e, t) {
   return this._root ? this._root.get(0, void 0, e, t) : t
  }, ht.prototype.set = function(e, t) {
   return St(this, e, t)
  }, ht.prototype.setIn = function(e, t) {
   return this.updateIn(e, vr, function() {
    return t
   })
  }, ht.prototype.remove = function(e) {
   return St(this, e, vr)
  }, ht.prototype.deleteIn = function(e) {
   return this.updateIn(e, function() {
    return vr
   })
  }, ht.prototype.update = function(e, t, n) {
   return 1 === arguments.length ? e(this) : this.updateIn([e], t, n)
  }, ht.prototype.updateIn = function(e, t, n) {
   n || (n = t, t = void 0);
   var r = Vt(this, kn(e), t, n);
   return r === vr ? void 0 : r
  }, ht.prototype.clear = function() {
   return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._root = null, this.__hash = void 0, this.__altered = !0, this) : _t()
  }, ht.prototype.merge = function() {
   return Rt(this, void 0, arguments)
  }, ht.prototype.mergeWith = function(e) {
   var t = ur.call(arguments, 1);
   return Rt(this, e, t)
  }, ht.prototype.mergeIn = function(e) {
   var t = ur.call(arguments, 1);
   return this.updateIn(e, _t(), function(e) {
    return "function" == typeof e.merge ? e.merge.apply(e, t) : t[t.length - 1]
   })
  }, ht.prototype.mergeDeep = function() {
   return Rt(this, It, arguments)
  }, ht.prototype.mergeDeepWith = function(e) {
   var t = ur.call(arguments, 1);
   return Rt(this, kt(e), t)
  }, ht.prototype.mergeDeepIn = function(e) {
   var t = ur.call(arguments, 1);
   return this.updateIn(e, _t(), function(e) {
    return "function" == typeof e.mergeDeep ? e.mergeDeep.apply(e, t) : t[t.length - 1]
   })
  }, ht.prototype.sort = function(e) {
   return $t(xn(this, e))
  }, ht.prototype.sortBy = function(e, t) {
   return $t(xn(this, t, e))
  }, ht.prototype.withMutations = function(e) {
   var t = this.asMutable();
   return e(t), t.wasAltered() ? t.__ensureOwner(this.__ownerID) : this
  }, ht.prototype.asMutable = function() {
   return this.__ownerID ? this : this.__ensureOwner(new p)
  }, ht.prototype.asImmutable = function() {
   return this.__ensureOwner()
  }, ht.prototype.wasAltered = function() {
   return this.__altered
  }, ht.prototype.__iterator = function(e, t) {
   return new yt(this, e, t)
  }, ht.prototype.__iterate = function(e, t) {
   var n = this,
    r = 0;
   return this._root && this._root.iterate(function(t) {
    return r++, e(t[1], t[0], n)
   }, t), r
  }, ht.prototype.__ensureOwner = function(e) {
   return e === this.__ownerID ? this : e ? xt(this.size, this._root, e, this.__hash) : (this.__ownerID = e, this.__altered = !1, this)
  }, ht.isMap = pt;
  var zr = "@@__IMMUTABLE_MAP__@@",
   Gr = ht.prototype;
  Gr[zr] = !0, Gr[dr] = Gr.remove, Gr.removeIn = Gr.deleteIn, dt.prototype.get = function(e, t, n, r) {
   for (var i = this.entries, o = 0, a = i.length; a > o; o++)
    if (Q(n, i[o][0])) return i[o][1];
   return r
  }, dt.prototype.update = function(e, t, n, r, i, o, a) {
   for (var s = i === vr, u = this.entries, l = 0, c = u.length; c > l && !Q(r, u[l][0]); l++);
   var p = c > l;
   if (p ? u[l][1] === i : s) return this;
   if (h(a), (s || !p) && h(o), !s || 1 !== u.length) {
    if (!p && !s && u.length >= jr) return Mt(e, u, r, i);
    var f = e && e === this.ownerID,
     m = f ? u : d(u);
    return p ? s ? l === c - 1 ? m.pop() : m[l] = m.pop() : m[l] = [r, i] : m.push([r, i]), f ? (this.entries = m, this) : new dt(e, m)
   }
  }, ft.prototype.get = function(e, t, n, r) {
   void 0 === t && (t = ot(n));
   var i = 1 << ((0 === e ? t : t >>> e) & gr),
    o = this.bitmap;
   return 0 === (o & i) ? r : this.nodes[Lt(o & i - 1)].get(e + fr, t, n, r)
  }, ft.prototype.update = function(e, t, n, r, i, o, a) {
   void 0 === n && (n = ot(r));
   var s = (0 === t ? n : n >>> t) & gr,
    u = 1 << s,
    l = this.bitmap,
    c = 0 !== (l & u);
   if (!c && i === vr) return this;
   var h = Lt(l & u - 1),
    p = this.nodes,
    d = c ? p[h] : void 0,
    f = Ct(d, e, t + fr, n, r, i, o, a);
   if (f === d) return this;
   if (!c && f && p.length >= qr) return Pt(e, p, l, s, f);
   if (c && !f && 2 === p.length && Et(p[1 ^ h])) return p[1 ^ h];
   if (c && f && 1 === p.length && Et(f)) return f;
   var m = e && e === this.ownerID,
    g = c ? f ? l : l ^ u : l | u,
    v = c ? f ? Bt(p, h, f, m) : Nt(p, h, m) : Ot(p, h, f, m);
   return m ? (this.bitmap = g, this.nodes = v, this) : new ft(e, g, v)
  }, mt.prototype.get = function(e, t, n, r) {
   void 0 === t && (t = ot(n));
   var i = (0 === e ? t : t >>> e) & gr,
    o = this.nodes[i];
   return o ? o.get(e + fr, t, n, r) : r
  }, mt.prototype.update = function(e, t, n, r, i, o, a) {
   void 0 === n && (n = ot(r));
   var s = (0 === t ? n : n >>> t) & gr,
    u = i === vr,
    l = this.nodes,
    c = l[s];
   if (u && !c) return this;
   var h = Ct(c, e, t + fr, n, r, i, o, a);
   if (h === c) return this;
   var p = this.count;
   if (c) {
    if (!h && (p--, Wr > p)) return At(e, l, p, s)
   } else p++;
   var d = e && e === this.ownerID,
    f = Bt(l, s, h, d);
   return d ? (this.count = p, this.nodes = f, this) : new mt(e, p, f)
  }, gt.prototype.get = function(e, t, n, r) {
   for (var i = this.entries, o = 0, a = i.length; a > o; o++)
    if (Q(n, i[o][0])) return i[o][1];
   return r
  }, gt.prototype.update = function(e, t, n, r, i, o, a) {
   void 0 === n && (n = ot(r));
   var s = i === vr;
   if (n !== this.keyHash) return s ? this : (h(a), h(o), Tt(this, e, t, n, [r, i]));
   for (var u = this.entries, l = 0, c = u.length; c > l && !Q(r, u[l][0]); l++);
   var p = c > l;
   if (p ? u[l][1] === i : s) return this;
   if (h(a), (s || !p) && h(o), s && 2 === c) return new vt(e, this.keyHash, u[1 ^ l]);
   var f = e && e === this.ownerID,
    m = f ? u : d(u);
   return p ? s ? l === c - 1 ? m.pop() : m[l] = m.pop() : m[l] = [r, i] : m.push([r, i]), f ? (this.entries = m, this) : new gt(e, this.keyHash, m)
  }, vt.prototype.get = function(e, t, n, r) {
   return Q(n, this.entry[0]) ? this.entry[1] : r
  }, vt.prototype.update = function(e, t, n, r, i, o, a) {
   var s = i === vr,
    u = Q(r, this.entry[0]);
   return (u ? i === this.entry[1] : s) ? this : (h(a), s ? (h(o), void 0) : u ? e && e === this.ownerID ? (this.entry[1] = i, this) : new vt(e, this.keyHash, [r, i]) : (h(o), Tt(this, e, t, ot(r), [r, i])))
  }, dt.prototype.iterate = gt.prototype.iterate = function(e, t) {
   for (var n = this.entries, r = 0, i = n.length - 1; i >= r; r++)
    if (e(n[t ? i - r : r]) === !1) return !1
  }, ft.prototype.iterate = mt.prototype.iterate = function(e, t) {
   for (var n = this.nodes, r = 0, i = n.length - 1; i >= r; r++) {
    var o = n[t ? i - r : r];
    if (o && o.iterate(e, t) === !1) return !1
   }
  }, vt.prototype.iterate = function(e) {
   return e(this.entry)
  }, e(yt, x), yt.prototype.next = function() {
   for (var e = this._type, t = this._stack; t;) {
    var n, r = t.node,
     i = t.index++;
    if (r.entry) {
     if (0 === i) return bt(e, r.entry)
    } else if (r.entries) {
     if (n = r.entries.length - 1, n >= i) return bt(e, r.entries[this._reverse ? n - i : i])
    } else if (n = r.nodes.length - 1, n >= i) {
     var o = r.nodes[this._reverse ? n - i : i];
     if (o) {
      if (o.entry) return bt(e, o.entry);
      t = this._stack = wt(o, t)
     }
     continue
    }
    t = this._stack = this._stack.__prev
   }
   return S()
  };
  var Hr, jr = mr / 4,
   qr = mr / 2,
   Wr = mr / 4;
  e(Ft, nt), Ft.of = function() {
   return this(arguments)
  }, Ft.prototype.toString = function() {
   return this.__toString("List [", "]")
  }, Ft.prototype.get = function(e, t) {
   if (e = m(this, e), e >= 0 && e < this.size) {
    e += this._origin;
    var n = Yt(this, e);
    return n && n.array[e & gr]
   }
   return t
  }, Ft.prototype.set = function(e, t) {
   return qt(this, e, t)
  }, Ft.prototype.remove = function(e) {
   return this.has(e) ? 0 === e ? this.shift() : e === this.size - 1 ? this.pop() : this.splice(e, 1) : this
  }, Ft.prototype.insert = function(e, t) {
   return this.splice(e, 0, t)
  }, Ft.prototype.clear = function() {
   return 0 === this.size ? this : this.__ownerID ? (this.size = this._origin = this._capacity = 0, this._level = fr, this._root = this._tail = null, this.__hash = void 0, this.__altered = !0, this) : jt()
  }, Ft.prototype.push = function() {
   var e = arguments,
    t = this.size;
   return this.withMutations(function(n) {
    Qt(n, 0, t + e.length);
    for (var r = 0; r < e.length; r++) n.set(t + r, e[r])
   })
  }, Ft.prototype.pop = function() {
   return Qt(this, 0, -1)
  }, Ft.prototype.unshift = function() {
   var e = arguments;
   return this.withMutations(function(t) {
    Qt(t, -e.length);
    for (var n = 0; n < e.length; n++) t.set(n, e[n])
   })
  }, Ft.prototype.shift = function() {
   return Qt(this, 1)
  }, Ft.prototype.merge = function() {
   return Zt(this, void 0, arguments)
  }, Ft.prototype.mergeWith = function(e) {
   var t = ur.call(arguments, 1);
   return Zt(this, e, t)
  }, Ft.prototype.mergeDeep = function() {
   return Zt(this, It, arguments)
  }, Ft.prototype.mergeDeepWith = function(e) {
   var t = ur.call(arguments, 1);
   return Zt(this, kt(e), t)
  }, Ft.prototype.setSize = function(e) {
   return Qt(this, 0, e)
  }, Ft.prototype.slice = function(e, t) {
   var n = this.size;
   return v(e, t, n) ? this : Qt(this, y(e, n), b(t, n))
  }, Ft.prototype.__iterator = function(e, t) {
   var n = 0,
    r = Gt(this, t);
   return new x(function() {
    var t = r();
    return t === Zr ? S() : _(e, n++, t)
   })
  }, Ft.prototype.__iterate = function(e, t) {
   for (var n, r = 0, i = Gt(this, t);
    (n = i()) !== Zr && e(n, r++, this) !== !1;);
   return r
  }, Ft.prototype.__ensureOwner = function(e) {
   return e === this.__ownerID ? this : e ? Ht(this._origin, this._capacity, this._level, this._root, this._tail, e, this.__hash) : (this.__ownerID = e, this)
  }, Ft.isList = Ut;
  var Xr = "@@__IMMUTABLE_LIST__@@",
   Yr = Ft.prototype;
  Yr[Xr] = !0, Yr[dr] = Yr.remove, Yr.setIn = Gr.setIn, Yr.deleteIn = Yr.removeIn = Gr.removeIn, Yr.update = Gr.update, Yr.updateIn = Gr.updateIn, Yr.mergeIn = Gr.mergeIn, Yr.mergeDeepIn = Gr.mergeDeepIn, Yr.withMutations = Gr.withMutations, Yr.asMutable = Gr.asMutable, Yr.asImmutable = Gr.asImmutable, Yr.wasAltered = Gr.wasAltered, zt.prototype.removeBefore = function(e, t, n) {
   if (n === t ? 1 << t : 0 || 0 === this.array.length) return this;
   var r = n >>> t & gr;
   if (r >= this.array.length) return new zt([], e);
   var i, o = 0 === r;
   if (t > 0) {
    var a = this.array[r];
    if (i = a && a.removeBefore(e, t - fr, n), i === a && o) return this
   }
   if (o && !i) return this;
   var s = Xt(this, e);
   if (!o)
    for (var u = 0; r > u; u++) s.array[u] = void 0;
   return i && (s.array[r] = i), s
  }, zt.prototype.removeAfter = function(e, t, n) {
   if (n === (t ? 1 << t : 0) || 0 === this.array.length) return this;
   var r = n - 1 >>> t & gr;
   if (r >= this.array.length) return this;
   var i;
   if (t > 0) {
    var o = this.array[r];
    if (i = o && o.removeAfter(e, t - fr, n), i === o && r === this.array.length - 1) return this
   }
   var a = Xt(this, e);
   return a.array.splice(r + 1), i && (a.array[r] = i), a
  };
  var Qr, Zr = {};
  e($t, ht), $t.of = function() {
   return this(arguments)
  }, $t.prototype.toString = function() {
   return this.__toString("OrderedMap {", "}")
  }, $t.prototype.get = function(e, t) {
   var n = this._map.get(e);
   return void 0 !== n ? this._list.get(n)[1] : t
  }, $t.prototype.clear = function() {
   return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._map.clear(), this._list.clear(), this) : tn()
  }, $t.prototype.set = function(e, t) {
   return nn(this, e, t)
  }, $t.prototype.remove = function(e) {
   return nn(this, e, vr)
  }, $t.prototype.wasAltered = function() {
   return this._map.wasAltered() || this._list.wasAltered()
  }, $t.prototype.__iterate = function(e, t) {
   var n = this;
   return this._list.__iterate(function(t) {
    return t && e(t[1], t[0], n)
   }, t)
  }, $t.prototype.__iterator = function(e, t) {
   return this._list.fromEntrySeq().__iterator(e, t)
  }, $t.prototype.__ensureOwner = function(e) {
   if (e === this.__ownerID) return this;
   var t = this._map.__ensureOwner(e),
    n = this._list.__ensureOwner(e);
   return e ? en(t, n, e, this.__hash) : (this.__ownerID = e, this._map = t, this._list = n, this)
  }, $t.isOrderedMap = Jt, $t.prototype[pr] = !0, $t.prototype[dr] = $t.prototype.remove;
  var Kr;
  e(rn, R), rn.prototype.get = function(e, t) {
   return this._iter.get(e, t)
  }, rn.prototype.has = function(e) {
   return this._iter.has(e)
  }, rn.prototype.valueSeq = function() {
   return this._iter.valueSeq()
  }, rn.prototype.reverse = function() {
   var e = this,
    t = cn(this, !0);
   return this._useKeys || (t.valueSeq = function() {
    return e._iter.toSeq().reverse()
   }), t
  }, rn.prototype.map = function(e, t) {
   var n = this,
    r = ln(this, e, t);
   return this._useKeys || (r.valueSeq = function() {
    return n._iter.toSeq().map(e, t)
   }), r
  }, rn.prototype.__iterate = function(e, t) {
   var n, r = this;
   return this._iter.__iterate(this._useKeys ? function(t, n) {
    return e(t, n, r)
   } : (n = t ? Mn(this) : 0, function(i) {
    return e(i, t ? --n : n++, r)
   }), t)
  }, rn.prototype.__iterator = function(e, t) {
   if (this._useKeys) return this._iter.__iterator(e, t);
   var n = this._iter.__iterator(xr, t),
    r = t ? Mn(this) : 0;
   return new x(function() {
    var i = n.next();
    return i.done ? i : _(e, t ? --r : r++, i.value, i)
   })
  }, rn.prototype[pr] = !0, e(on, I), on.prototype.includes = function(e) {
   return this._iter.includes(e)
  }, on.prototype.__iterate = function(e, t) {
   var n = this,
    r = 0;
   return this._iter.__iterate(function(t) {
    return e(t, r++, n)
   }, t)
  }, on.prototype.__iterator = function(e, t) {
   var n = this._iter.__iterator(xr, t),
    r = 0;
   return new x(function() {
    var t = n.next();
    return t.done ? t : _(e, r++, t.value, t)
   })
  }, e(an, k), an.prototype.has = function(e) {
   return this._iter.includes(e)
  }, an.prototype.__iterate = function(e, t) {
   var n = this;
   return this._iter.__iterate(function(t) {
    return e(t, t, n)
   }, t)
  }, an.prototype.__iterator = function(e, t) {
   var n = this._iter.__iterator(xr, t);
   return new x(function() {
    var t = n.next();
    return t.done ? t : _(e, t.value, t.value, t)
   })
  }, e(sn, R), sn.prototype.entrySeq = function() {
   return this._iter.toSeq()
  }, sn.prototype.__iterate = function(e, t) {
   var n = this;
   return this._iter.__iterate(function(t) {
    if (t) {
     Tn(t);
     var r = o(t);
     return e(r ? t.get(1) : t[1], r ? t.get(0) : t[0], n)
    }
   }, t)
  }, sn.prototype.__iterator = function(e, t) {
   var n = this._iter.__iterator(xr, t);
   return new x(function() {
    for (;;) {
     var t = n.next();
     if (t.done) return t;
     var r = t.value;
     if (r) {
      Tn(r);
      var i = o(r);
      return _(e, i ? r.get(0) : r[0], i ? r.get(1) : r[1], t)
     }
    }
   })
  }, on.prototype.cacheResult = rn.prototype.cacheResult = an.prototype.cacheResult = sn.prototype.cacheResult = Rn, e(Dn, tt), Dn.prototype.toString = function() {
   return this.__toString(Ln(this) + " {", "}")
  }, Dn.prototype.has = function(e) {
   return this._defaultValues.hasOwnProperty(e)
  }, Dn.prototype.get = function(e, t) {
   if (!this.has(e)) return t;
   var n = this._defaultValues[e];
   return this._map ? this._map.get(e, n) : n
  }, Dn.prototype.clear = function() {
   if (this.__ownerID) return this._map && this._map.clear(), this;
   var e = this.constructor;
   return e._empty || (e._empty = Vn(this, _t()))
  }, Dn.prototype.set = function(e, t) {
   if (!this.has(e)) throw new Error('Cannot set unknown key "' + e + '" on ' + Ln(this));
   if (this._map && !this._map.has(e)) {
    var n = this._defaultValues[e];
    if (t === n) return this
   }
   var r = this._map && this._map.set(e, t);
   return this.__ownerID || r === this._map ? this : Vn(this, r)
  }, Dn.prototype.remove = function(e) {
   if (!this.has(e)) return this;
   var t = this._map && this._map.remove(e);
   return this.__ownerID || t === this._map ? this : Vn(this, t)
  }, Dn.prototype.wasAltered = function() {
   return this._map.wasAltered()
  }, Dn.prototype.__iterator = function(e, t) {
   var r = this;
   return n(this._defaultValues).map(function(e, t) {
    return r.get(t)
   }).__iterator(e, t)
  }, Dn.prototype.__iterate = function(e, t) {
   var r = this;
   return n(this._defaultValues).map(function(e, t) {
    return r.get(t)
   }).__iterate(e, t)
  }, Dn.prototype.__ensureOwner = function(e) {
   if (e === this.__ownerID) return this;
   var t = this._map && this._map.__ensureOwner(e);
   return e ? Vn(this, t, e) : (this.__ownerID = e, this._map = t, this)
  };
  var $r = Dn.prototype;
  $r[dr] = $r.remove, $r.deleteIn = $r.removeIn = Gr.removeIn, $r.merge = Gr.merge, $r.mergeWith = Gr.mergeWith, $r.mergeIn = Gr.mergeIn, $r.mergeDeep = Gr.mergeDeep, $r.mergeDeepWith = Gr.mergeDeepWith, $r.mergeDeepIn = Gr.mergeDeepIn, $r.setIn = Gr.setIn, $r.update = Gr.update, $r.updateIn = Gr.updateIn, $r.withMutations = Gr.withMutations, $r.asMutable = Gr.asMutable, $r.asImmutable = Gr.asImmutable, e(Nn, rt), Nn.of = function() {
   return this(arguments)
  }, Nn.fromKeys = function(e) {
   return this(n(e).keySeq())
  }, Nn.prototype.toString = function() {
   return this.__toString("Set {", "}")
  }, Nn.prototype.has = function(e) {
   return this._map.has(e)
  }, Nn.prototype.add = function(e) {
   return Un(this, this._map.set(e, !0))
  }, Nn.prototype.remove = function(e) {
   return Un(this, this._map.remove(e))
  }, Nn.prototype.clear = function() {
   return Un(this, this._map.clear())
  }, Nn.prototype.union = function() {
   var e = ur.call(arguments, 0);
   return e = e.filter(function(e) {
    return 0 !== e.size
   }), 0 === e.length ? this : 0 !== this.size || this.__ownerID || 1 !== e.length ? this.withMutations(function(t) {
    for (var n = 0; n < e.length; n++) i(e[n]).forEach(function(e) {
     return t.add(e)
    })
   }) : this.constructor(e[0])
  }, Nn.prototype.intersect = function() {
   var e = ur.call(arguments, 0);
   if (0 === e.length) return this;
   e = e.map(function(e) {
    return i(e)
   });
   var t = this;
   return this.withMutations(function(n) {
    t.forEach(function(t) {
     e.every(function(e) {
      return e.includes(t)
     }) || n.remove(t)
    })
   })
  }, Nn.prototype.subtract = function() {
   var e = ur.call(arguments, 0);
   if (0 === e.length) return this;
   e = e.map(function(e) {
    return i(e)
   });
   var t = this;
   return this.withMutations(function(n) {
    t.forEach(function(t) {
     e.some(function(e) {
      return e.includes(t)
     }) && n.remove(t)
    })
   })
  }, Nn.prototype.merge = function() {
   return this.union.apply(this, arguments)
  }, Nn.prototype.mergeWith = function() {
   var e = ur.call(arguments, 1);
   return this.union.apply(this, e)
  }, Nn.prototype.sort = function(e) {
   return Hn(xn(this, e))
  }, Nn.prototype.sortBy = function(e, t) {
   return Hn(xn(this, t, e))
  }, Nn.prototype.wasAltered = function() {
   return this._map.wasAltered()
  }, Nn.prototype.__iterate = function(e, t) {
   var n = this;
   return this._map.__iterate(function(t, r) {
    return e(r, r, n)
   }, t)
  }, Nn.prototype.__iterator = function(e, t) {
   return this._map.map(function(e, t) {
    return t
   }).__iterator(e, t)
  }, Nn.prototype.__ensureOwner = function(e) {
   if (e === this.__ownerID) return this;
   var t = this._map.__ensureOwner(e);
   return e ? this.__make(t, e) : (this.__ownerID = e, this._map = t, this)
  }, Nn.isSet = Fn;
  var Jr = "@@__IMMUTABLE_SET__@@",
   ei = Nn.prototype;
  ei[Jr] = !0, ei[dr] = ei.remove, ei.mergeDeep = ei.merge, ei.mergeDeepWith = ei.mergeWith, ei.withMutations = Gr.withMutations, ei.asMutable = Gr.asMutable, ei.asImmutable = Gr.asImmutable, ei.__empty = Gn, ei.__make = zn;
  var ti;
  e(Hn, Nn), Hn.of = function() {
   return this(arguments)
  }, Hn.fromKeys = function(e) {
   return this(n(e).keySeq())
  }, Hn.prototype.toString = function() {
   return this.__toString("OrderedSet {", "}")
  }, Hn.isOrderedSet = jn;
  var ni = Hn.prototype;
  ni[pr] = !0, ni.__empty = Wn, ni.__make = qn;
  var ri;
  e(Xn, nt), Xn.of = function() {
   return this(arguments)
  }, Xn.prototype.toString = function() {
   return this.__toString("Stack [", "]")
  }, Xn.prototype.get = function(e, t) {
   var n = this._head;
   for (e = m(this, e); n && e--;) n = n.next;
   return n ? n.value : t
  }, Xn.prototype.peek = function() {
   return this._head && this._head.value
  }, Xn.prototype.push = function() {
   if (0 === arguments.length) return this;
   for (var e = this.size + arguments.length, t = this._head, n = arguments.length - 1; n >= 0; n--) t = {
    value: arguments[n],
    next: t
   };
   return this.__ownerID ? (this.size = e, this._head = t, this.__hash = void 0, this.__altered = !0, this) : Qn(e, t)
  }, Xn.prototype.pushAll = function(e) {
   if (e = r(e), 0 === e.size) return this;
   ct(e.size);
   var t = this.size,
    n = this._head;
   return e.reverse().forEach(function(e) {
    t++, n = {
     value: e,
     next: n
    }
   }), this.__ownerID ? (this.size = t, this._head = n, this.__hash = void 0, this.__altered = !0, this) : Qn(t, n)
  }, Xn.prototype.pop = function() {
   return this.slice(1)
  }, Xn.prototype.unshift = function() {
   return this.push.apply(this, arguments)
  }, Xn.prototype.unshiftAll = function(e) {
   return this.pushAll(e)
  }, Xn.prototype.shift = function() {
   return this.pop.apply(this, arguments)
  }, Xn.prototype.clear = function() {
   return 0 === this.size ? this : this.__ownerID ? (this.size = 0, this._head = void 0, this.__hash = void 0, this.__altered = !0, this) : Zn()
  }, Xn.prototype.slice = function(e, t) {
   if (v(e, t, this.size)) return this;
   var n = y(e, this.size),
    r = b(t, this.size);
   if (r !== this.size) return nt.prototype.slice.call(this, e, t);
   for (var i = this.size - n, o = this._head; n--;) o = o.next;
   return this.__ownerID ? (this.size = i, this._head = o, this.__hash = void 0, this.__altered = !0, this) : Qn(i, o)
  }, Xn.prototype.__ensureOwner = function(e) {
   return e === this.__ownerID ? this : e ? Qn(this.size, this._head, e, this.__hash) : (this.__ownerID = e, this.__altered = !1, this)
  }, Xn.prototype.__iterate = function(e, t) {
   if (t) return this.reverse().__iterate(e);
   for (var n = 0, r = this._head; r && e(r.value, n++, this) !== !1;) r = r.next;
   return n
  }, Xn.prototype.__iterator = function(e, t) {
   if (t) return this.reverse().__iterator(e);
   var n = 0,
    r = this._head;
   return new x(function() {
    if (r) {
     var t = r.value;
     return r = r.next, _(e, n++, t)
    }
    return S()
   })
  }, Xn.isStack = Yn;
  var ii = "@@__IMMUTABLE_STACK__@@",
   oi = Xn.prototype;
  oi[ii] = !0, oi.withMutations = Gr.withMutations, oi.asMutable = Gr.asMutable, oi.asImmutable = Gr.asImmutable, oi.wasAltered = Gr.wasAltered;
  var ai;
  t.Iterator = x, Kn(t, {
   toArray: function() {
    ct(this.size);
    var e = new Array(this.size || 0);
    return this.valueSeq().__iterate(function(t, n) {
     e[n] = t
    }), e
   },
   toIndexedSeq: function() {
    return new on(this)
   },
   toJS: function() {
    return this.toSeq().map(function(e) {
     return e && "function" == typeof e.toJS ? e.toJS() : e
    }).__toJS()
   },
   toJSON: function() {
    return this.toSeq().map(function(e) {
     return e && "function" == typeof e.toJSON ? e.toJSON() : e
    }).__toJS()
   },
   toKeyedSeq: function() {
    return new rn(this, !0)
   },
   toMap: function() {
    return ht(this.toKeyedSeq())
   },
   toObject: function() {
    ct(this.size);
    var e = {};
    return this.__iterate(function(t, n) {
     e[n] = t
    }), e
   },
   toOrderedMap: function() {
    return $t(this.toKeyedSeq())
   },
   toOrderedSet: function() {
    return Hn(a(this) ? this.valueSeq() : this)
   },
   toSet: function() {
    return Nn(a(this) ? this.valueSeq() : this)
   },
   toSetSeq: function() {
    return new an(this)
   },
   toSeq: function() {
    return s(this) ? this.toIndexedSeq() : a(this) ? this.toKeyedSeq() : this.toSetSeq()
   },
   toStack: function() {
    return Xn(a(this) ? this.valueSeq() : this)
   },
   toList: function() {
    return Ft(a(this) ? this.valueSeq() : this)
   },
   toString: function() {
    return "[Iterable]"
   },
   __toString: function(e, t) {
    return 0 === this.size ? e + t : e + " " + this.toSeq().map(this.__toStringMapper).join(", ") + " " + t
   },
   concat: function() {
    var e = ur.call(arguments, 0);
    return En(this, vn(this, e))
   },
   includes: function(e) {
    return this.some(function(t) {
     return Q(t, e)
    })
   },
   entries: function() {
    return this.__iterator(_r)
   },
   every: function(e, t) {
    ct(this.size);
    var n = !0;
    return this.__iterate(function(r, i, o) {
     return e.call(t, r, i, o) ? void 0 : (n = !1, !1)
    }), n
   },
   filter: function(e, t) {
    return En(this, hn(this, e, t, !0))
   },
   find: function(e, t, n) {
    var r = this.findEntry(e, t);
    return r ? r[1] : n
   },
   findEntry: function(e, t) {
    var n;
    return this.__iterate(function(r, i, o) {
     return e.call(t, r, i, o) ? (n = [i, r], !1) : void 0
    }), n
   },
   findLastEntry: function(e, t) {
    return this.toSeq().reverse().findEntry(e, t)
   },
   forEach: function(e, t) {
    return ct(this.size), this.__iterate(t ? e.bind(t) : e)
   },
   join: function(e) {
    ct(this.size), e = void 0 !== e ? "" + e : ",";
    var t = "",
     n = !0;
    return this.__iterate(function(r) {
     n ? n = !1 : t += e, t += null !== r && void 0 !== r ? r.toString() : ""
    }), t
   },
   keys: function() {
    return this.__iterator(wr)
   },
   map: function(e, t) {
    return En(this, ln(this, e, t))
   },
   reduce: function(e, t, n) {
    ct(this.size);
    var r, i;
    return arguments.length < 2 ? i = !0 : r = t, this.__iterate(function(t, o, a) {
     i ? (i = !1, r = t) : r = e.call(n, r, t, o, a)
    }), r
   },
   reduceRight: function() {
    var e = this.toKeyedSeq().reverse();
    return e.reduce.apply(e, arguments)
   },
   reverse: function() {
    return En(this, cn(this, !0))
   },
   slice: function(e, t) {
    return En(this, fn(this, e, t, !0))
   },
   some: function(e, t) {
    return !this.every(er(e), t)
   },
   sort: function(e) {
    return En(this, xn(this, e))
   },
   values: function() {
    return this.__iterator(xr)
   },
   butLast: function() {
    return this.slice(0, -1)
   },
   isEmpty: function() {
    return void 0 !== this.size ? 0 === this.size : !this.some(function() {
     return !0
    })
   },
   count: function(e, t) {
    return f(e ? this.toSeq().filter(e, t) : this)
   },
   countBy: function(e, t) {
    return pn(this, e, t)
   },
   equals: function(e) {
    return Z(this, e)
   },
   entrySeq: function() {
    var e = this;
    if (e._cache) return new D(e._cache);
    var t = e.toSeq().map(Jn).toIndexedSeq();
    return t.fromEntrySeq = function() {
     return e.toSeq()
    }, t
   },
   filterNot: function(e, t) {
    return this.filter(er(e), t)
   },
   findLast: function(e, t, n) {
    return this.toKeyedSeq().reverse().find(e, t, n)
   },
   first: function() {
    return this.find(g)
   },
   flatMap: function(e, t) {
    return En(this, bn(this, e, t))
   },
   flatten: function(e) {
    return En(this, yn(this, e, !0))
   },
   fromEntrySeq: function() {
    return new sn(this)
   },
   get: function(e, t) {
    return this.find(function(t, n) {
     return Q(n, e)
    }, void 0, t)
   },
   getIn: function(e, t) {
    for (var n, r = this, i = kn(e); !(n = i.next()).done;) {
     var o = n.value;
     if (r = r && r.get ? r.get(o, vr) : vr, r === vr) return t
    }
    return r
   },
   groupBy: function(e, t) {
    return dn(this, e, t)
   },
   has: function(e) {
    return this.get(e, vr) !== vr
   },
   hasIn: function(e) {
    return this.getIn(e, vr) !== vr
   },
   isSubset: function(e) {
    return e = "function" == typeof e.includes ? e : t(e), this.every(function(t) {
     return e.includes(t)
    })
   },
   isSuperset: function(e) {
    return e = "function" == typeof e.isSubset ? e : t(e), e.isSubset(this)
   },
   keySeq: function() {
    return this.toSeq().map($n).toIndexedSeq()
   },
   last: function() {
    return this.toSeq().reverse().first()
   },
   max: function(e) {
    return _n(this, e)
   },
   maxBy: function(e, t) {
    return _n(this, t, e)
   },
   min: function(e) {
    return _n(this, e ? tr(e) : ir)
   },
   minBy: function(e, t) {
    return _n(this, t ? tr(t) : ir, e)
   },
   rest: function() {
    return this.slice(1)
   },
   skip: function(e) {
    return this.slice(Math.max(0, e))
   },
   skipLast: function(e) {
    return En(this, this.toSeq().reverse().skip(e).reverse())
   },
   skipWhile: function(e, t) {
    return En(this, gn(this, e, t, !0))
   },
   skipUntil: function(e, t) {
    return this.skipWhile(er(e), t)
   },
   sortBy: function(e, t) {
    return En(this, xn(this, t, e))
   },
   take: function(e) {
    return this.slice(0, Math.max(0, e))
   },
   takeLast: function(e) {
    return En(this, this.toSeq().reverse().take(e).reverse())
   },
   takeWhile: function(e, t) {
    return En(this, mn(this, e, t))
   },
   takeUntil: function(e, t) {
    return this.takeWhile(er(e), t)
   },
   valueSeq: function() {
    return this.toIndexedSeq()
   },
   hashCode: function() {
    return this.__hash || (this.__hash = or(this))
   }
  });
  var si = t.prototype;
  si[lr] = !0, si[Er] = si.values, si.__toJS = si.toArray, si.__toStringMapper = nr, si.inspect = si.toSource = function() {
    return this.toString()
   }, si.chain = si.flatMap, si.contains = si.includes,
   function() {
    try {
     Object.defineProperty(si, "length", {
      get: function() {
       if (!t.noLengthWarning) {
        var e;
        try {
         throw new Error
        } catch (n) {
         e = n.stack
        }
        if (-1 === e.indexOf("_wrapObject")) return console && console.warn && console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. " + e), this.size
       }
      }
     })
    } catch (e) {}
   }(), Kn(n, {
    flip: function() {
     return En(this, un(this))
    },
    findKey: function(e, t) {
     var n = this.findEntry(e, t);
     return n && n[0]
    },
    findLastKey: function(e, t) {
     return this.toSeq().reverse().findKey(e, t)
    },
    keyOf: function(e) {
     return this.findKey(function(t) {
      return Q(t, e)
     })
    },
    lastKeyOf: function(e) {
     return this.findLastKey(function(t) {
      return Q(t, e)
     })
    },
    mapEntries: function(e, t) {
     var n = this,
      r = 0;
     return En(this, this.toSeq().map(function(i, o) {
      return e.call(t, [o, i], r++, n)
     }).fromEntrySeq())
    },
    mapKeys: function(e, t) {
     var n = this;
     return En(this, this.toSeq().flip().map(function(r, i) {
      return e.call(t, r, i, n)
     }).flip())
    }
   });
  var ui = n.prototype;
  ui[cr] = !0, ui[Er] = si.entries, ui.__toJS = si.toObject, ui.__toStringMapper = function(e, t) {
   return JSON.stringify(t) + ": " + nr(e)
  }, Kn(r, {
   toKeyedSeq: function() {
    return new rn(this, !1)
   },
   filter: function(e, t) {
    return En(this, hn(this, e, t, !1))
   },
   findIndex: function(e, t) {
    var n = this.findEntry(e, t);
    return n ? n[0] : -1
   },
   indexOf: function(e) {
    var t = this.toKeyedSeq().keyOf(e);
    return void 0 === t ? -1 : t
   },
   lastIndexOf: function(e) {
    var t = this.toKeyedSeq().reverse().keyOf(e);
    return void 0 === t ? -1 : t
   },
   reverse: function() {
    return En(this, cn(this, !1))
   },
   slice: function(e, t) {
    return En(this, fn(this, e, t, !1))
   },
   splice: function(e, t) {
    var n = arguments.length;
    if (t = Math.max(0 | t, 0), 0 === n || 2 === n && !t) return this;
    e = y(e, 0 > e ? this.count() : this.size);
    var r = this.slice(0, e);
    return En(this, 1 === n ? r : r.concat(d(arguments, 2), this.slice(e + t)))
   },
   findLastIndex: function(e, t) {
    var n = this.toKeyedSeq().findLastKey(e, t);
    return void 0 === n ? -1 : n
   },
   first: function() {
    return this.get(0)
   },
   flatten: function(e) {
    return En(this, yn(this, e, !1))
   },
   get: function(e, t) {
    return e = m(this, e), 0 > e || 1 / 0 === this.size || void 0 !== this.size && e > this.size ? t : this.find(function(t, n) {
     return n === e
    }, void 0, t)
   },
   has: function(e) {
    return e = m(this, e), e >= 0 && (void 0 !== this.size ? 1 / 0 === this.size || e < this.size : -1 !== this.indexOf(e))
   },
   interpose: function(e) {
    return En(this, wn(this, e))
   },
   interleave: function() {
    var e = [this].concat(d(arguments)),
     t = Cn(this.toSeq(), I.of, e),
     n = t.flatten(!0);
    return t.size && (n.size = t.size * e.length), En(this, n)
   },
   last: function() {
    return this.get(-1)
   },
   skipWhile: function(e, t) {
    return En(this, gn(this, e, t, !1))
   },
   zip: function() {
    var e = [this].concat(d(arguments));
    return En(this, Cn(this, rr, e))
   },
   zipWith: function(e) {
    var t = d(arguments);
    return t[0] = this, En(this, Cn(this, e, t))
   }
  }), r.prototype[hr] = !0, r.prototype[pr] = !0, Kn(i, {
   get: function(e, t) {
    return this.has(e) ? e : t
   },
   includes: function(e) {
    return this.has(e)
   },
   keySeq: function() {
    return this.valueSeq()
   }
  }), i.prototype.has = si.includes, i.prototype.contains = i.prototype.includes, Kn(R, n.prototype), Kn(I, r.prototype), Kn(k, i.prototype), Kn(tt, n.prototype), Kn(nt, r.prototype), Kn(rt, i.prototype);
  var li = {
   Iterable: t,
   Seq: P,
   Collection: et,
   Map: ht,
   OrderedMap: $t,
   List: Ft,
   Stack: Xn,
   Set: Nn,
   OrderedSet: Hn,
   Record: Dn,
   Range: J,
   Repeat: K,
   is: Q,
   fromJS: q
  };
  return li
 });
 var h = {};
 (function() {
  function e(e) {
   throw e
  }

  function t(e, t) {
   var n = e.split("."),
    r = T;
   !(n[0] in r) && r.execScript && r.execScript("var " + n[0]);
   for (var i; n.length && (i = n.shift());) n.length || t === C ? r = r[i] ? r[i] : r[i] = {} : r[i] = t
  }

  function n(t, n) {
   this.index = "number" == typeof n ? n : 0, this.m = 0, this.buffer = t instanceof(M ? Uint8Array : Array) ? t : new(M ? Uint8Array : Array)(32768), 2 * this.buffer.length <= this.index && e(Error("invalid index")), this.buffer.length <= this.index && this.f()
  }

  function r(e, t, n) {
   var r, i = "number" == typeof t ? t : t = 0,
    o = "number" == typeof n ? n : e.length;
   for (r = -1, i = 7 & o; i--; ++t) r = r >>> 8 ^ L[255 & (r ^ e[t])];
   for (i = o >> 3; i--; t += 8) r = r >>> 8 ^ L[255 & (r ^ e[t])], r = r >>> 8 ^ L[255 & (r ^ e[t + 1])], r = r >>> 8 ^ L[255 & (r ^ e[t + 2])], r = r >>> 8 ^ L[255 & (r ^ e[t + 3])], r = r >>> 8 ^ L[255 & (r ^ e[t + 4])], r = r >>> 8 ^ L[255 & (r ^ e[t + 5])], r = r >>> 8 ^ L[255 & (r ^ e[t + 6])], r = r >>> 8 ^ L[255 & (r ^ e[t + 7])];
   return (4294967295 ^ r) >>> 0
  }

  function i() {}

  function o(e) {
   this.buffer = new(M ? Uint16Array : Array)(2 * e), this.length = 0
  }

  function a(e) {
   var t, n, r, i, o, a, s, u, l, c, h = e.length,
    p = 0,
    d = Number.POSITIVE_INFINITY;
   for (u = 0; h > u; ++u) e[u] > p && (p = e[u]), e[u] < d && (d = e[u]);
   for (t = 1 << p, n = new(M ? Uint32Array : Array)(t), r = 1, i = 0, o = 2; p >= r;) {
    for (u = 0; h > u; ++u)
     if (e[u] === r) {
      for (a = 0, s = i, l = 0; r > l; ++l) a = a << 1 | 1 & s, s >>= 1;
      for (c = r << 16 | u, l = a; t > l; l += o) n[l] = c;
      ++i
     }++ r, i <<= 1, o <<= 1
   }
   return [n, p, d]
  }

  function s(e, t) {
   this.k = O, this.I = 0, this.input = M && e instanceof Array ? new Uint8Array(e) : e, this.b = 0, t && (t.lazy && (this.I = t.lazy), "number" == typeof t.compressionType && (this.k = t.compressionType), t.outputBuffer && (this.a = M && t.outputBuffer instanceof Array ? new Uint8Array(t.outputBuffer) : t.outputBuffer), "number" == typeof t.outputIndex && (this.b = t.outputIndex)), this.a || (this.a = new(M ? Uint8Array : Array)(32768))
  }

  function u(e, t) {
   this.length = e, this.Q = t
  }

  function l(t, n) {
   function r(t, n) {
    var r, i = t.Q,
     o = [],
     a = 0;
    r = z[t.length], o[a++] = 65535 & r, o[a++] = r >> 16 & 255, o[a++] = r >> 24;
    var s;
    switch (E) {
     case 1 === i:
      s = [0, i - 1, 0];
      break;
     case 2 === i:
      s = [1, i - 2, 0];
      break;
     case 3 === i:
      s = [2, i - 3, 0];
      break;
     case 4 === i:
      s = [3, i - 4, 0];
      break;
     case 6 >= i:
      s = [4, i - 5, 1];
      break;
     case 8 >= i:
      s = [5, i - 7, 1];
      break;
     case 12 >= i:
      s = [6, i - 9, 2];
      break;
     case 16 >= i:
      s = [7, i - 13, 2];
      break;
     case 24 >= i:
      s = [8, i - 17, 3];
      break;
     case 32 >= i:
      s = [9, i - 25, 3];
      break;
     case 48 >= i:
      s = [10, i - 33, 4];
      break;
     case 64 >= i:
      s = [11, i - 49, 4];
      break;
     case 96 >= i:
      s = [12, i - 65, 5];
      break;
     case 128 >= i:
      s = [13, i - 97, 5];
      break;
     case 192 >= i:
      s = [14, i - 129, 6];
      break;
     case 256 >= i:
      s = [15, i - 193, 6];
      break;
     case 384 >= i:
      s = [16, i - 257, 7];
      break;
     case 512 >= i:
      s = [17, i - 385, 7];
      break;
     case 768 >= i:
      s = [18, i - 513, 8];
      break;
     case 1024 >= i:
      s = [19, i - 769, 8];
      break;
     case 1536 >= i:
      s = [20, i - 1025, 9];
      break;
     case 2048 >= i:
      s = [21, i - 1537, 9];
      break;
     case 3072 >= i:
      s = [22, i - 2049, 10];
      break;
     case 4096 >= i:
      s = [23, i - 3073, 10];
      break;
     case 6144 >= i:
      s = [24, i - 4097, 11];
      break;
     case 8192 >= i:
      s = [25, i - 6145, 11];
      break;
     case 12288 >= i:
      s = [26, i - 8193, 12];
      break;
     case 16384 >= i:
      s = [27, i - 12289, 12];
      break;
     case 24576 >= i:
      s = [28, i - 16385, 13];
      break;
     case 32768 >= i:
      s = [29, i - 24577, 13];
      break;
     default:
      e("invalid distance")
    }
    r = s, o[a++] = r[0], o[a++] = r[1], o[a++] = r[2];
    var u, l;
    for (u = 0, l = o.length; l > u; ++u) m[g++] = o[u];
    y[o[0]]++, b[o[3]]++, v = t.length + n - 1, p = null
   }
   var i, o, a, s, u, l, h, p, d, f = {},
    m = M ? new Uint16Array(2 * n.length) : [],
    g = 0,
    v = 0,
    y = new(M ? Uint32Array : Array)(286),
    b = new(M ? Uint32Array : Array)(30),
    w = t.I;
   if (!M) {
    for (a = 0; 285 >= a;) y[a++] = 0;
    for (a = 0; 29 >= a;) b[a++] = 0
   }
   for (y[256] = 1, i = 0, o = n.length; o > i; ++i) {
    for (a = u = 0, s = 3; s > a && i + a !== o; ++a) u = u << 8 | n[i + a];
    if (f[u] === C && (f[u] = []), l = f[u], !(0 < v--)) {
     for (; 0 < l.length && 32768 < i - l[0];) l.shift();
     if (i + 3 >= o) {
      for (p && r(p, -1), a = 0, s = o - i; s > a; ++a) d = n[i + a], m[g++] = d, ++y[d];
      break
     }
     0 < l.length ? (h = c(n, i, l), p ? p.length < h.length ? (d = n[i - 1], m[g++] = d, ++y[d], r(h, 0)) : r(p, -1) : h.length < w ? p = h : r(h, 0)) : p ? r(p, -1) : (d = n[i], m[g++] = d, ++y[d])
    }
    l.push(i)
   }
   return m[g++] = 256, y[256]++, t.W = y, t.V = b, M ? m.subarray(0, g) : m
  }

  function c(e, t, n) {
   var r, i, o, a, s, l, c = 0,
    h = e.length;
   a = 0, l = n.length;
   e: for (; l > a; a++) {
    if (r = n[l - a - 1], o = 3, c > 3) {
     for (s = c; s > 3; s--)
      if (e[r + s - 1] !== e[t + s - 1]) continue e;
     o = c
    }
    for (; 258 > o && h > t + o && e[r + o] === e[t + o];) ++o;
    if (o > c && (i = r, c = o), 258 === o) break
   }
   return new u(c, t - i)
  }

  function h(e, t) {
   var n, r, i, a, s, u = e.length,
    l = new o(572),
    c = new(M ? Uint8Array : Array)(u);
   if (!M)
    for (a = 0; u > a; a++) c[a] = 0;
   for (a = 0; u > a; ++a) 0 < e[a] && l.push(a, e[a]);
   if (n = Array(l.length / 2), r = new(M ? Uint32Array : Array)(l.length / 2), 1 === n.length) return c[l.pop().index] = 1, c;
   for (a = 0, s = l.length / 2; s > a; ++a) n[a] = l.pop(), r[a] = n[a].value;
   for (i = p(r, r.length, t), a = 0, s = n.length; s > a; ++a) c[n[a].index] = i[a];
   return c
  }

  function p(e, t, n) {
   function r(e) {
    var n = d[e][f[e]];
    n === t ? (r(e + 1), r(e + 1)) : --h[n], ++f[e]
   }
   var i, o, a, s, u, l = new(M ? Uint16Array : Array)(n),
    c = new(M ? Uint8Array : Array)(n),
    h = new(M ? Uint8Array : Array)(t),
    p = Array(n),
    d = Array(n),
    f = Array(n),
    m = (1 << n) - t,
    g = 1 << n - 1;
   for (l[n - 1] = t, o = 0; n > o; ++o) g > m ? c[o] = 0 : (c[o] = 1, m -= g), m <<= 1, l[n - 2 - o] = (l[n - 1 - o] / 2 | 0) + t;
   for (l[0] = c[0], p[0] = Array(l[0]), d[0] = Array(l[0]), o = 1; n > o; ++o) l[o] > 2 * l[o - 1] + c[o] && (l[o] = 2 * l[o - 1] + c[o]), p[o] = Array(l[o]), d[o] = Array(l[o]);
   for (i = 0; t > i; ++i) h[i] = n;
   for (a = 0; a < l[n - 1]; ++a) p[n - 1][a] = e[a], d[n - 1][a] = a;
   for (i = 0; n > i; ++i) f[i] = 0;
   for (1 === c[n - 1] && (--h[0], ++f[n - 1]), o = n - 2; o >= 0; --o) {
    for (s = i = 0, u = f[o + 1], a = 0; a < l[o]; a++) s = p[o + 1][u] + p[o + 1][u + 1], s > e[i] ? (p[o][a] = s, d[o][a] = t, u += 2) : (p[o][a] = e[i], d[o][a] = i, ++i);
    f[o] = 0, 1 === c[o] && r(o)
   }
   return h
  }

  function d(e) {
   var t, n, r, i, o = new(M ? Uint16Array : Array)(e.length),
    a = [],
    s = [],
    u = 0;
   for (t = 0, n = e.length; n > t; t++) a[e[t]] = (0 | a[e[t]]) + 1;
   for (t = 1, n = 16; n >= t; t++) s[t] = u, u += 0 | a[t], u <<= 1;
   for (t = 0, n = e.length; n > t; t++)
    for (u = s[e[t]], s[e[t]] += 1, r = o[t] = 0, i = e[t]; i > r; r++) o[t] = o[t] << 1 | 1 & u, u >>>= 1;
   return o
  }

  function f(e, t) {
   this.input = e, this.b = this.c = 0, this.i = {}, t && (t.flags && (this.i = t.flags), "string" == typeof t.filename && (this.filename = t.filename), "string" == typeof t.comment && (this.A = t.comment), t.deflateOptions && (this.l = t.deflateOptions)), this.l || (this.l = {})
  }

  function m(t, n) {
   switch (this.p = [], this.q = 32768, this.e = this.j = this.c = this.u = 0, this.input = M ? new Uint8Array(t) : t, this.w = !1, this.r = X, this.M = !1, (n || !(n = {})) && (n.index && (this.c = n.index), n.bufferSize && (this.q = n.bufferSize), n.bufferType && (this.r = n.bufferType), n.resize && (this.M = n.resize)), this.r) {
    case W:
     this.b = 32768, this.a = new(M ? Uint8Array : Array)(32768 + this.q + 258);
     break;
    case X:
     this.b = 0, this.a = new(M ? Uint8Array : Array)(this.q), this.f = this.U, this.B = this.R, this.s = this.T;
     break;
    default:
     e(Error("invalid inflate mode"))
   }
  }

  function g(t, n) {
   for (var r, i = t.j, o = t.e, a = t.input, s = t.c, u = a.length; n > o;) s >= u && e(Error("input buffer is broken")), i |= a[s++] << o, o += 8;
   return r = i & (1 << n) - 1, t.j = i >>> n, t.e = o - n, t.c = s, r
  }

  function v(e, t) {
   for (var n, r, i = e.j, o = e.e, a = e.input, s = e.c, u = a.length, l = t[0], c = t[1]; c > o && !(s >= u);) i |= a[s++] << o, o += 8;
   return n = l[i & (1 << c) - 1], r = n >>> 16, e.j = i >> r, e.e = o - r, e.c = s, 65535 & n
  }

  function y(e) {
   function t(e, t, n) {
    var r, i, o, a = this.J;
    for (o = 0; e > o;) switch (r = v(this, t)) {
     case 16:
      for (i = 3 + g(this, 2); i--;) n[o++] = a;
      break;
     case 17:
      for (i = 3 + g(this, 3); i--;) n[o++] = 0;
      a = 0;
      break;
     case 18:
      for (i = 11 + g(this, 7); i--;) n[o++] = 0;
      a = 0;
      break;
     default:
      a = n[o++] = r
    }
    return this.J = a, n
   }
   var n, r, i, o, s = g(e, 5) + 257,
    u = g(e, 5) + 1,
    l = g(e, 4) + 4,
    c = new(M ? Uint8Array : Array)($.length);
   for (o = 0; l > o; ++o) c[$[o]] = g(e, 3);
   if (!M)
    for (o = l, l = c.length; l > o; ++o) c[$[o]] = 0;
   n = a(c), r = new(M ? Uint8Array : Array)(s), i = new(M ? Uint8Array : Array)(u), e.J = 0, e.s(a(t.call(e, s, n, r)), a(t.call(e, u, n, i)))
  }

  function b(e) {
   this.input = e, this.c = 0, this.t = [], this.D = !1
  }

  function w(e) {
   if ("string" == typeof e) {
    var t, n, r = e.split("");
    for (t = 0, n = r.length; n > t; t++) r[t] = (255 & r[t].charCodeAt(0)) >>> 0;
    e = r
   }
   for (var i, o = 1, a = 0, s = e.length, u = 0; s > 0;) {
    i = s > 1024 ? 1024 : s, s -= i;
    do o += e[u++], a += o; while (--i);
    o %= 65521, a %= 65521
   }
   return (a << 16 | o) >>> 0
  }

  function x(t, n) {
   var r, i;
   switch (this.input = t, this.c = 0, (n || !(n = {})) && (n.index && (this.c = n.index), n.verify && (this.$ = n.verify)), r = t[this.c++], i = t[this.c++], 15 & r) {
    case dt:
     this.method = dt;
     break;
    default:
     e(Error("unsupported compression method"))
   }
   0 !== ((r << 8) + i) % 31 && e(Error("invalid fcheck flag:" + ((r << 8) + i) % 31)), 32 & i && e(Error("fdict flag is not supported")), this.L = new m(t, {
    index: this.c,
    bufferSize: n.bufferSize,
    bufferType: n.bufferType,
    resize: n.resize
   })
  }

  function _(e, t) {
   this.input = e, this.a = new(M ? Uint8Array : Array)(32768), this.k = ft.o;
   var n, r = {};
   !t && (t = {}) || "number" != typeof t.compressionType || (this.k = t.compressionType);
   for (n in t) r[n] = t[n];
   r.outputBuffer = this.a, this.K = new s(this.input, r)
  }

  function S(e, n) {
   var r, i, o, a;
   if (Object.keys) r = Object.keys(n);
   else
    for (i in r = [], o = 0, n) r[o++] = i;
   for (o = 0, a = r.length; a > o; ++o) i = r[o], t(e + "." + i, n[i])
  }
  var C = void 0,
   E = !0,
   T = this,
   M = "undefined" != typeof Uint8Array && "undefined" != typeof Uint16Array && "undefined" != typeof Uint32Array && "undefined" != typeof DataView;
  n.prototype.f = function() {
   var e, t = this.buffer,
    n = t.length,
    r = new(M ? Uint8Array : Array)(n << 1);
   if (M) r.set(t);
   else
    for (e = 0; n > e; ++e) r[e] = t[e];
   return this.buffer = r
  }, n.prototype.d = function(e, t, n) {
   var r, i = this.buffer,
    o = this.index,
    a = this.m,
    s = i[o];
   if (n && t > 1 && (e = t > 8 ? (D[255 & e] << 24 | D[e >>> 8 & 255] << 16 | D[e >>> 16 & 255] << 8 | D[e >>> 24 & 255]) >> 32 - t : D[e] >> 8 - t), 8 > t + a) s = s << t | e, a += t;
   else
    for (r = 0; t > r; ++r) s = s << 1 | e >> t - r - 1 & 1, 8 === ++a && (a = 0, i[o++] = D[s], s = 0, o === i.length && (i = this.f()));
   i[o] = s, this.buffer = i, this.m = a, this.index = o
  }, n.prototype.finish = function() {
   var e, t = this.buffer,
    n = this.index;
   return 0 < this.m && (t[n] <<= 8 - this.m, t[n] = D[t[n]], n++), M ? e = t.subarray(0, n) : (t.length = n, e = t), e
  };
  var A, P = new(M ? Uint8Array : Array)(256);
  for (A = 0; 256 > A; ++A) {
   for (var R = A, I = R, k = 7, R = R >>> 1; R; R >>>= 1) I <<= 1, I |= 1 & R, --k;
   P[A] = (I << k & 255) >>> 0
  }
  var D = P,
   V = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096, 1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297, 1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443, 3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669, 829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727, 4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918e3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117],
   L = M ? new Uint32Array(V) : V;
  i.prototype.getName = function() {
   return this.name
  }, i.prototype.getData = function() {
   return this.data
  }, i.prototype.Y = function() {
   return this.Z
  }, t("Zlib.GunzipMember", i), t("Zlib.GunzipMember.prototype.getName", i.prototype.getName), t("Zlib.GunzipMember.prototype.getData", i.prototype.getData), t("Zlib.GunzipMember.prototype.getMtime", i.prototype.Y), o.prototype.getParent = function(e) {
   return 2 * ((e - 2) / 4 | 0)
  }, o.prototype.push = function(e, t) {
   var n, r, i, o = this.buffer;
   for (n = this.length, o[this.length++] = t, o[this.length++] = e; n > 0 && (r = this.getParent(n), o[n] > o[r]);) i = o[n], o[n] = o[r], o[r] = i, i = o[n + 1], o[n + 1] = o[r + 1], o[r + 1] = i, n = r;
   return this.length
  }, o.prototype.pop = function() {
   var e, t, n, r, i, o = this.buffer;
   for (t = o[0], e = o[1], this.length -= 2, o[0] = o[this.length], o[1] = o[this.length + 1], i = 0;
    (r = 2 * i + 2, !(r >= this.length)) && (r + 2 < this.length && o[r + 2] > o[r] && (r += 2), o[r] > o[i]);) n = o[i], o[i] = o[r], o[r] = n, n = o[i + 1], o[i + 1] = o[r + 1], o[r + 1] = n, i = r;
   return {
    index: e,
    value: t,
    length: this.length
   }
  };
  var B, O = 2,
   N = {
    NONE: 0,
    v: 1,
    o: O,
    ba: 3
   },
   F = [];
  for (B = 0; 288 > B; B++) switch (E) {
   case 143 >= B:
    F.push([B + 48, 8]);
    break;
   case 255 >= B:
    F.push([B - 144 + 400, 9]);
    break;
   case 279 >= B:
    F.push([B - 256 + 0, 7]);
    break;
   case 287 >= B:
    F.push([B - 280 + 192, 8]);
    break;
   default:
    e("invalid literal: " + B)
  }
  s.prototype.g = function() {
   var t, r, i, o, a = this.input;
   switch (this.k) {
    case 0:
     for (i = 0, o = a.length; o > i;) {
      r = M ? a.subarray(i, i + 65535) : a.slice(i, i + 65535), i += r.length;
      var s = r,
       u = i === o,
       c = C,
       p = C,
       f = C,
       m = C,
       g = C,
       v = this.a,
       y = this.b;
      if (M) {
       for (v = new Uint8Array(this.a.buffer); v.length <= y + s.length + 5;) v = new Uint8Array(v.length << 1);
       v.set(this.a)
      }
      if (c = u ? 1 : 0, v[y++] = 0 | c, p = s.length, f = ~p + 65536 & 65535, v[y++] = 255 & p, v[y++] = p >>> 8 & 255, v[y++] = 255 & f, v[y++] = f >>> 8 & 255, M) v.set(s, y), y += s.length, v = v.subarray(0, y);
      else {
       for (m = 0, g = s.length; g > m; ++m) v[y++] = s[m];
       v.length = y
      }
      this.b = y, this.a = v
     }
     break;
    case 1:
     var b = new n(M ? new Uint8Array(this.a.buffer) : this.a, this.b);
     b.d(1, 1, E), b.d(1, 2, E);
     var w, x, _, S = l(this, a);
     for (w = 0, x = S.length; x > w; w++)
      if (_ = S[w], n.prototype.d.apply(b, F[_]), _ > 256) b.d(S[++w], S[++w], E), b.d(S[++w], 5), b.d(S[++w], S[++w], E);
      else if (256 === _) break;
     this.a = b.finish(), this.b = this.a.length;
     break;
    case O:
     var T, A, P, R, I, k, D, V, L, B, N, U, z, G, H, j = new n(M ? new Uint8Array(this.a.buffer) : this.a, this.b),
      q = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
      W = Array(19);
     for (T = O, j.d(1, 1, E), j.d(T, 2, E), A = l(this, a), k = h(this.W, 15), D = d(k), V = h(this.V, 7), L = d(V), P = 286; P > 257 && 0 === k[P - 1]; P--);
     for (R = 30; R > 1 && 0 === V[R - 1]; R--);
     var X, Y, Q, Z, K, $, J = P,
      et = R,
      tt = new(M ? Uint32Array : Array)(J + et),
      nt = new(M ? Uint32Array : Array)(316),
      rt = new(M ? Uint8Array : Array)(19);
     for (X = Y = 0; J > X; X++) tt[Y++] = k[X];
     for (X = 0; et > X; X++) tt[Y++] = V[X];
     if (!M)
      for (X = 0, Z = rt.length; Z > X; ++X) rt[X] = 0;
     for (X = K = 0, Z = tt.length; Z > X; X += Y) {
      for (Y = 1; Z > X + Y && tt[X + Y] === tt[X]; ++Y);
      if (Q = Y, 0 === tt[X])
       if (3 > Q)
        for (; 0 < Q--;) nt[K++] = 0, rt[0]++;
       else
        for (; Q > 0;) $ = 138 > Q ? Q : 138, $ > Q - 3 && Q > $ && ($ = Q - 3), 10 >= $ ? (nt[K++] = 17, nt[K++] = $ - 3, rt[17]++) : (nt[K++] = 18, nt[K++] = $ - 11, rt[18]++), Q -= $;
      else if (nt[K++] = tt[X], rt[tt[X]]++, Q--, 3 > Q)
       for (; 0 < Q--;) nt[K++] = tt[X], rt[tt[X]]++;
      else
       for (; Q > 0;) $ = 6 > Q ? Q : 6, $ > Q - 3 && Q > $ && ($ = Q - 3), nt[K++] = 16, nt[K++] = $ - 3, rt[16]++, Q -= $
     }
     for (t = M ? nt.subarray(0, K) : nt.slice(0, K), B = h(rt, 7), G = 0; 19 > G; G++) W[G] = B[q[G]];
     for (I = 19; I > 4 && 0 === W[I - 1]; I--);
     for (N = d(B), j.d(P - 257, 5, E), j.d(R - 1, 5, E), j.d(I - 4, 4, E), G = 0; I > G; G++) j.d(W[G], 3, E);
     for (G = 0, H = t.length; H > G; G++)
      if (U = t[G], j.d(N[U], B[U], E), U >= 16) {
       switch (G++, U) {
        case 16:
         z = 2;
         break;
        case 17:
         z = 3;
         break;
        case 18:
         z = 7;
         break;
        default:
         e("invalid code: " + U)
       }
       j.d(t[G], z, E)
      } var it, ot, at, st, ut, lt, ct, ht, pt = [D, k],
      dt = [L, V];
     for (ut = pt[0], lt = pt[1], ct = dt[0], ht = dt[1], it = 0, ot = A.length; ot > it; ++it)
      if (at = A[it], j.d(ut[at], lt[at], E), at > 256) j.d(A[++it], A[++it], E), st = A[++it], j.d(ct[st], ht[st], E), j.d(A[++it], A[++it], E);
      else if (256 === at) break;
     this.a = j.finish(), this.b = this.a.length;
     break;
    default:
     e("invalid compression type")
   }
   return this.a
  };
  var U = function() {
    function t(t) {
     switch (E) {
      case 3 === t:
       return [257, t - 3, 0];
      case 4 === t:
       return [258, t - 4, 0];
      case 5 === t:
       return [259, t - 5, 0];
      case 6 === t:
       return [260, t - 6, 0];
      case 7 === t:
       return [261, t - 7, 0];
      case 8 === t:
       return [262, t - 8, 0];
      case 9 === t:
       return [263, t - 9, 0];
      case 10 === t:
       return [264, t - 10, 0];
      case 12 >= t:
       return [265, t - 11, 1];
      case 14 >= t:
       return [266, t - 13, 1];
      case 16 >= t:
       return [267, t - 15, 1];
      case 18 >= t:
       return [268, t - 17, 1];
      case 22 >= t:
       return [269, t - 19, 2];
      case 26 >= t:
       return [270, t - 23, 2];
      case 30 >= t:
       return [271, t - 27, 2];
      case 34 >= t:
       return [272, t - 31, 2];
      case 42 >= t:
       return [273, t - 35, 3];
      case 50 >= t:
       return [274, t - 43, 3];
      case 58 >= t:
       return [275, t - 51, 3];
      case 66 >= t:
       return [276, t - 59, 3];
      case 82 >= t:
       return [277, t - 67, 4];
      case 98 >= t:
       return [278, t - 83, 4];
      case 114 >= t:
       return [279, t - 99, 4];
      case 130 >= t:
       return [280, t - 115, 4];
      case 162 >= t:
       return [281, t - 131, 5];
      case 194 >= t:
       return [282, t - 163, 5];
      case 226 >= t:
       return [283, t - 195, 5];
      case 257 >= t:
       return [284, t - 227, 5];
      case 258 === t:
       return [285, t - 258, 0];
      default:
       e("invalid length: " + t)
     }
    }
    var n, r, i = [];
    for (n = 3; 258 >= n; n++) r = t(n), i[n] = r[2] << 24 | r[1] << 16 | r[0];
    return i
   }(),
   z = M ? new Uint32Array(U) : U;
  f.prototype.g = function() {
   var e, t, n, i, o, a, u, l, c = new(M ? Uint8Array : Array)(32768),
    h = 0,
    p = this.input,
    d = this.c,
    f = this.filename,
    m = this.A;
   if (c[h++] = 31, c[h++] = 139, c[h++] = 8, e = 0, this.i.fname && (e |= j), this.i.fcomment && (e |= q), this.i.fhcrc && (e |= H), c[h++] = e, t = (Date.now ? Date.now() : +new Date) / 1e3 | 0, c[h++] = 255 & t, c[h++] = t >>> 8 & 255, c[h++] = t >>> 16 & 255, c[h++] = t >>> 24 & 255, c[h++] = 0, c[h++] = G, this.i.fname !== C) {
    for (u = 0, l = f.length; l > u; ++u) a = f.charCodeAt(u), a > 255 && (c[h++] = a >>> 8 & 255), c[h++] = 255 & a;
    c[h++] = 0
   }
   if (this.i.comment) {
    for (u = 0, l = m.length; l > u; ++u) a = m.charCodeAt(u), a > 255 && (c[h++] = a >>> 8 & 255), c[h++] = 255 & a;
    c[h++] = 0
   }
   return this.i.fhcrc && (n = 65535 & r(c, 0, h), c[h++] = 255 & n, c[h++] = n >>> 8 & 255), this.l.outputBuffer = c, this.l.outputIndex = h, o = new s(p, this.l), c = o.g(), h = o.b, M && (h + 8 > c.buffer.byteLength ? (this.a = new Uint8Array(h + 8), this.a.set(new Uint8Array(c.buffer)), c = this.a) : c = new Uint8Array(c.buffer)), i = r(p, C, C), c[h++] = 255 & i, c[h++] = i >>> 8 & 255, c[h++] = i >>> 16 & 255, c[h++] = i >>> 24 & 255, l = p.length, c[h++] = 255 & l, c[h++] = l >>> 8 & 255, c[h++] = l >>> 16 & 255, c[h++] = l >>> 24 & 255, this.c = d, M && h < c.length && (this.a = c = c.subarray(0, h)), c
  };
  var G = 255,
   H = 2,
   j = 8,
   q = 16;
  t("Zlib.Gzip", f), t("Zlib.Gzip.prototype.compress", f.prototype.g);
  var W = 0,
   X = 1,
   Y = {
    O: W,
    N: X
   };
  m.prototype.h = function() {
   for (; !this.w;) {
    var t = g(this, 3);
    switch (1 & t && (this.w = E), t >>>= 1) {
     case 0:
      var n = this.input,
       r = this.c,
       i = this.a,
       o = this.b,
       a = n.length,
       s = C,
       u = C,
       l = i.length,
       c = C;
      switch (this.e = this.j = 0, r + 1 >= a && e(Error("invalid uncompressed block header: LEN")), s = n[r++] | n[r++] << 8, r + 1 >= a && e(Error("invalid uncompressed block header: NLEN")), u = n[r++] | n[r++] << 8, s === ~u && e(Error("invalid uncompressed block header: length verify")), r + s > n.length && e(Error("input buffer is broken")), this.r) {
       case W:
        for (; o + s > i.length;) {
         if (c = l - o, s -= c, M) i.set(n.subarray(r, r + c), o), o += c, r += c;
         else
          for (; c--;) i[o++] = n[r++];
         this.b = o, i = this.f(), o = this.b
        }
        break;
       case X:
        for (; o + s > i.length;) i = this.f({
         F: 2
        });
        break;
       default:
        e(Error("invalid inflate mode"))
      }
      if (M) i.set(n.subarray(r, r + s), o), o += s, r += s;
      else
       for (; s--;) i[o++] = n[r++];
      this.c = r, this.b = o, this.a = i;
      break;
     case 1:
      this.s(ct, pt);
      break;
     case 2:
      y(this);
      break;
     default:
      e(Error("unknown BTYPE: " + t))
    }
   }
   return this.B()
  };
  var Q, Z, K = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],
   $ = M ? new Uint16Array(K) : K,
   J = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 258, 258],
   et = M ? new Uint16Array(J) : J,
   tt = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0],
   nt = M ? new Uint8Array(tt) : tt,
   rt = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577],
   it = M ? new Uint16Array(rt) : rt,
   ot = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13],
   at = M ? new Uint8Array(ot) : ot,
   st = new(M ? Uint8Array : Array)(288);
  for (Q = 0, Z = st.length; Z > Q; ++Q) st[Q] = 143 >= Q ? 8 : 255 >= Q ? 9 : 279 >= Q ? 7 : 8;
  var ut, lt, ct = a(st),
   ht = new(M ? Uint8Array : Array)(30);
  for (ut = 0, lt = ht.length; lt > ut; ++ut) ht[ut] = 5;
  var pt = a(ht);
  m.prototype.s = function(e, t) {
   var n = this.a,
    r = this.b;
   this.C = e;
   for (var i, o, a, s, u = n.length - 258; 256 !== (i = v(this, e));)
    if (256 > i) r >= u && (this.b = r, n = this.f(), r = this.b), n[r++] = i;
    else
     for (o = i - 257, s = et[o], 0 < nt[o] && (s += g(this, nt[o])), i = v(this, t), a = it[i], 0 < at[i] && (a += g(this, at[i])), r >= u && (this.b = r, n = this.f(), r = this.b); s--;) n[r] = n[r++ - a];
   for (; 8 <= this.e;) this.e -= 8, this.c--;
   this.b = r
  }, m.prototype.T = function(e, t) {
   var n = this.a,
    r = this.b;
   this.C = e;
   for (var i, o, a, s, u = n.length; 256 !== (i = v(this, e));)
    if (256 > i) r >= u && (n = this.f(), u = n.length), n[r++] = i;
    else
     for (o = i - 257, s = et[o], 0 < nt[o] && (s += g(this, nt[o])), i = v(this, t), a = it[i], 0 < at[i] && (a += g(this, at[i])), r + s > u && (n = this.f(), u = n.length); s--;) n[r] = n[r++ - a];
   for (; 8 <= this.e;) this.e -= 8, this.c--;
   this.b = r
  }, m.prototype.f = function() {
   var e, t, n = new(M ? Uint8Array : Array)(this.b - 32768),
    r = this.b - 32768,
    i = this.a;
   if (M) n.set(i.subarray(32768, n.length));
   else
    for (e = 0, t = n.length; t > e; ++e) n[e] = i[e + 32768];
   if (this.p.push(n), this.u += n.length, M) i.set(i.subarray(r, r + 32768));
   else
    for (e = 0; 32768 > e; ++e) i[e] = i[r + e];
   return this.b = 32768, i
  }, m.prototype.U = function(e) {
   var t, n, r, i, o = this.input.length / this.c + 1 | 0,
    a = this.input,
    s = this.a;
   return e && ("number" == typeof e.F && (o = e.F), "number" == typeof e.P && (o += e.P)), 2 > o ? (n = (a.length - this.c) / this.C[2], i = 258 * (n / 2) | 0, r = i < s.length ? s.length + i : s.length << 1) : r = s.length * o, M ? (t = new Uint8Array(r), t.set(s)) : t = s, this.a = t
  }, m.prototype.B = function() {
   var e, t, n, r, i, o = 0,
    a = this.a,
    s = this.p,
    u = new(M ? Uint8Array : Array)(this.u + (this.b - 32768));
   if (0 === s.length) return M ? this.a.subarray(32768, this.b) : this.a.slice(32768, this.b);
   for (t = 0, n = s.length; n > t; ++t)
    for (e = s[t], r = 0, i = e.length; i > r; ++r) u[o++] = e[r];
   for (t = 32768, n = this.b; n > t; ++t) u[o++] = a[t];
   return this.p = [], this.buffer = u
  }, m.prototype.R = function() {
   var e, t = this.b;
   return M ? this.M ? (e = new Uint8Array(t), e.set(this.a.subarray(0, t))) : e = this.a.subarray(0, t) : (this.a.length > t && (this.a.length = t), e = this.a), this.buffer = e
  }, b.prototype.X = function() {
   return this.D || this.h(), this.t.slice()
  }, b.prototype.h = function() {
   for (var t = this.input.length; this.c < t;) {
    var n = new i,
     o = C,
     a = C,
     s = C,
     u = C,
     l = C,
     c = C,
     h = C,
     p = C,
     d = C,
     f = this.input,
     g = this.c;
    switch (n.G = f[g++], n.H = f[g++], (31 !== n.G || 139 !== n.H) && e(Error("invalid file signature:" + n.G + "," + n.H)), n.z = f[g++], n.z) {
     case 8:
      break;
     default:
      e(Error("unknown compression method: " + n.z))
    }
    if (n.n = f[g++], p = f[g++] | f[g++] << 8 | f[g++] << 16 | f[g++] << 24, n.Z = new Date(1e3 * p), n.fa = f[g++], n.ea = f[g++], 0 < (4 & n.n) && (n.aa = f[g++] | f[g++] << 8, g += n.aa), 0 < (n.n & j)) {
     for (h = [], c = 0; 0 < (l = f[g++]);) h[c++] = String.fromCharCode(l);
     n.name = h.join("")
    }
    if (0 < (n.n & q)) {
     for (h = [], c = 0; 0 < (l = f[g++]);) h[c++] = String.fromCharCode(l);
     n.A = h.join("")
    }
    0 < (n.n & H) && (n.S = 65535 & r(f, 0, g), n.S !== (f[g++] | f[g++] << 8) && e(Error("invalid header crc16"))), o = f[f.length - 4] | f[f.length - 3] << 8 | f[f.length - 2] << 16 | f[f.length - 1] << 24, f.length - g - 4 - 4 < 512 * o && (u = o), a = new m(f, {
     index: g,
     bufferSize: u
    }), n.data = s = a.h(), g = a.c, n.ca = d = (f[g++] | f[g++] << 8 | f[g++] << 16 | f[g++] << 24) >>> 0, r(s, C, C) !== d && e(Error("invalid CRC-32 checksum: 0x" + r(s, C, C).toString(16) + " / 0x" + d.toString(16))), n.da = o = (f[g++] | f[g++] << 8 | f[g++] << 16 | f[g++] << 24) >>> 0, (4294967295 & s.length) !== o && e(Error("invalid input size: " + (4294967295 & s.length) + " / " + o)), this.t.push(n), this.c = g
   }
   this.D = E;
   var v, y, b, w = this.t,
    x = 0,
    _ = 0;
   for (v = 0, y = w.length; y > v; ++v) _ += w[v].data.length;
   if (M)
    for (b = new Uint8Array(_), v = 0; y > v; ++v) b.set(w[v].data, x), x += w[v].data.length;
   else {
    for (b = [], v = 0; y > v; ++v) b[v] = w[v].data;
    b = Array.prototype.concat.apply([], b)
   }
   return b
  }, t("Zlib.Gunzip", b), t("Zlib.Gunzip.prototype.decompress", b.prototype.h), t("Zlib.Gunzip.prototype.getMembers", b.prototype.X), x.prototype.h = function() {
   var t, n, r = this.input;
   return t = this.L.h(), this.c = this.L.c, this.$ && (n = (r[this.c++] << 24 | r[this.c++] << 16 | r[this.c++] << 8 | r[this.c++]) >>> 0, n !== w(t) && e(Error("invalid adler-32 checksum"))), t
  };
  var dt = 8,
   ft = N;
  _.prototype.g = function() {
   var t, n, r, i, o, a, s, u = 0;
   switch (s = this.a, t = dt) {
    case dt:
     n = Math.LOG2E * Math.log(32768) - 8;
     break;
    default:
     e(Error("invalid compression method"))
   }
   switch (r = n << 4 | t, s[u++] = r, t) {
    case dt:
     switch (this.k) {
      case ft.NONE:
       o = 0;
       break;
      case ft.v:
       o = 1;
       break;
      case ft.o:
       o = 2;
       break;
      default:
       e(Error("unsupported compression type"))
     }
     break;
    default:
     e(Error("invalid compression method"))
   }
   return i = o << 6 | 0, s[u++] = i | 31 - (256 * r + i) % 31, a = w(this.input), this.K.b = u, s = this.K.g(), u = s.length, M && (s = new Uint8Array(s.buffer), s.length <= u + 4 && (this.a = new Uint8Array(s.length + 4), this.a.set(s), s = this.a), s = s.subarray(0, u + 4)), s[u++] = a >> 24 & 255, s[u++] = a >> 16 & 255, s[u++] = a >> 8 & 255, s[u++] = 255 & a, s
  }, t("Zlib.Inflate", x), t("Zlib.Inflate.prototype.decompress", x.prototype.h), S("Zlib.Inflate.BufferType", {
   ADAPTIVE: Y.N,
   BLOCK: Y.O
  }), t("Zlib.Deflate", _), t("Zlib.Deflate.compress", function(e, t) {
   return new _(e, t).g()
  }), t("Zlib.Deflate.prototype.compress", _.prototype.g), S("Zlib.Deflate.CompressionType", {
   NONE: ft.NONE,
   FIXED: ft.v,
   DYNAMIC: ft.o
  })
 }).call(h);
 var a, p = h.Zlib,
  l = this && this.__extends || function(e, t) {
   function n() {
    this.constructor = e
   }
   for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);
   e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
  };
 ! function(e) {
  var t;
  ! function(e) {
   e.VERSION = {
    number: "1.2.12",
    date: "Dec 13 2016"
   }
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   t.Immutable = c, t.Rx = e.Core.Rx, t.Promise = e.Core.Promise, t.Zlib = p
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(e) {
     return f(e, !1)
    }

    function i(e) {
     return f(e, !0)
    }

    function o(e, t) {
     return f(e, "Binary" === t)
    }

    function a(e, t) {
     return g(t, e, !1, !1)
    }

    function s(e, t) {
     return g(t, e, !0, !1)
    }

    function u(e) {
     return g(e.title, e.url, "Binary" === e.type, e.compression === v.Gzip)
    }

    function l(e) {
     var t = new p.Gunzip(new Uint8Array(e));
     return t.decompress()
    }

    function c(e) {
     for (var t = y, n = [], r = [], i = 512, o = 0, a = e.length; a > o; o += i) {
      for (var s = 0, u = o, l = Math.min(o + i, a); l > u; u++) r[s++] = t[e[u]];
      n[n.length] = i > s ? r.splice(0, s).join("") : r.join("")
     }
     return n.join("")
    }

    function h(e, t, n, r) {
     try {
      var i = r.target.result;
      n ? (e.update("Decompressing..."), e.schedule(function() {
       var n = l(i);
       t ? e.resolve(n.buffer) : e.resolve(c(n))
      }, 1e3 / 30)) : e.resolve(i)
     } catch (r) {
      e.reject(r)
     }
    }

    function d(e, t, n, r, i) {
     e.update(t), n.onerror = function(t) {
      var n = t.target.error;
      e.reject(n ? n : "Failed.")
     }, n.onabort = function() {
      return e.abort()
     };
     var o = function() {
      return n.abort()
     };
     n.onprogress = function(n) {
      n.lengthComputable ? e.update(t, o, n.loaded, n.total) : e.update(t + " " + (n.loaded / 1024 / 1024).toFixed(2) + " MB", o)
     }, n.onload = i
    }

    function f(n, r) {
     return t.Task.fromComputation("Open File", "Background", e.Core.Computation.create(function(e) {
      var t = new FileReader,
       i = /\.gz$/i.test(n.name);
      d(e, "Reading...", t, r, function(t) {
       return h(e, r, i, t)
      }), i || r ? t.readAsArrayBuffer(n) : t.readAsBinaryString(n)
     }))
    }

    function m(e, t, n, r) {
     var i = r.target;
     if (i.status >= 200 && i.status < 400)
      if (t) {
       var o = r.target.response;
       b.deposit(r.target), n ? (e.update("Decompressing..."), e.schedule(function() {
        var t = new p.Gunzip(new Uint8Array(o)),
         n = t.decompress();
        e.resolve(n.buffer)
       })) : e.resolve(o)
      } else {
       var a = r.target.responseText;
       b.deposit(r.target), e.resolve(a)
      }
     else {
      var s = i.statusText;
      b.deposit(r.target), e.reject(s)
     }
    }

    function g(n, r, i, o) {
     return t.Task.fromComputation(n ? n : "Download", "Background", e.Core.Computation.create(function(e) {
      if (!i && o) return e.reject("Decompress is only available when downloading binary data."), void 0;
      var t = b.get();
      e.update("Waiting for server...", function() {
       return t.abort()
      }), d(e, "Downloading...", t, i, function(t) {
       return m(e, i, o, t)
      }), t.open("get", r, !0), t.responseType = i ? "arraybuffer" : "text", t.send()
     }))
    }
    var v;
    ! function(e) {
     e[e.None = 0] = "None", e[e.Gzip = 1] = "Gzip"
    }(v = n.DataCompressionMethod || (n.DataCompressionMethod = {})), n.readStringFromFile = r, n.readArrayBufferFromFile = i, n.readFromFile = o, n.ajaxGetString = a, n.ajaxGetArrayBuffer = s, n.ajaxGet = u;
    var y = function() {
      for (var e = [], t = 0; 256 > t; t++) e[t] = String.fromCharCode(t);
      return e
     }(),
     b = function() {
      function e() {}
      return e.get = function() {
       return this.pool.length ? this.pool.pop() : new XMLHttpRequest
      }, e.emptyFunc = function() {}, e.deposit = function(t) {
       this.pool.length < this.poolSize && (t.onabort = e.emptyFunc, t.onerror = e.emptyFunc, t.onload = e.emptyFunc, t.onprogress = e.emptyFunc, this.pool.push())
      }, e
     }();
    b.pool = [], b.poolSize = 15
   }(n = t.Utils || (t.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(t) {
    var n;
    ! function(t) {
     function n(e) {
      return e && "." !== e && "?" !== e ? e : null
     }

     function r(e) {
      var t = e.match(o);
      if (!t) return void 0;
      var r = 0 | +t[1],
       i = n(t[2]),
       a = n(t[3]),
       s = n(t[4]);
      return {
       entityId: s,
       authSeqNumber: r,
       authAsymId: i,
       insCode: a
      }
     }

     function i(t, n) {
      void 0 === n && (n = ",");
      var i = t.split(n).map(function(e) {
       return r(e)
      }).filter(function(e) {
       return !!e
      });
      return e.Core.Structure.Query.Builder.toQuery((o = e.Core.Structure.Query).residues.apply(o, i));
      var o
     }
     var o = /^\s*([1-9][0-9]*)\s+([_.;:""&<>()\/\{}'`~!@#$%A-Za-z0-9*|+-]+)(?:\s+i[:]([.]|[a-zA-Z0-9]))?(?:\s+e[:]([.]|[a-zA-Z0-9]+))?/;
     t.parseAuthResidueId = i
    }(n = t.Query || (t.Query = {}))
   }(n = t.Utils || (t.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     var t = function() {
      function e(e, t, n) {
       this.isError = e, this.value = t, this.error = n
      }
      return e.prototype.bind = function(e) {
       return this.isError ? this : e(this.value)
      }, e
     }();
     e.ValueOrError = t,
      function(e) {
       function t(t) {
        return new e(!0, void 0, t)
       }

       function n(t) {
        return new e(!0, t)
       }
       e.error = t, e.value = n
      }(t = e.ValueOrError || (e.ValueOrError = {}))
    }(t = e.Query || (e.Query = {}))
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t = function() {
     function e() {
      this.first = null, this.last = null
     }
     return e.prototype.addFirst = function(e) {
      e.inList = !0, this.first && (this.first.previous = e), e.next = this.first, this.first = e
     }, e.prototype.addLast = function(e) {
      null != this.last && (this.last.next = e), e.previous = this.last, this.last = e, null == this.first && (this.first = e), e.inList = !0
     }, e.prototype.remove = function(e) {
      e.inList && (e.inList = !1, null !== e.previous ? e.previous.next = e.next : null === e.previous && (this.first = e.next), null !== e.next ? e.next.previous = e.previous : null === e.next && (this.last = e.previous), e.next = null, e.previous = null)
     }, e
    }();
    e.LinkedList = t
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     return (10 > e ? "0" : "") + e
    }

    function n(e) {
     var n = e.getHours(),
      r = e.getMinutes(),
      i = e.getSeconds();
     return n + ":" + t(r) + ":" + t(i)
    }

    function r(e, t) {
     var n = Math.pow(10, t);
     return Math.round(n * e) / n
    }

    function i(e) {
     if (e.isIndeterminate) return e.message;
     var t = (100 * e.current / e.max).toFixed(2);
     return e.message + " " + t + "%"
    }

    function o() {
     var e = (new Date).getTime();
     window.performance && "function" == typeof window.performance.now && (e += performance.now());
     var t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
      var n = (e + 16 * Math.random()) % 16 | 0;
      return e = Math.floor(e / 16), ("x" == t ? n : 3 & n | 8).toString(16)
     });
     return t
    }
    e.formatTime = n, e.round = r, e.formatProgress = i, e.generateUUID = o
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     return r || (r = n()),
      function(e, t) {
       return function(n) {
        var r = t.get(e[n]);
        return void 0 !== r ? r : 1
       }
      }(e.atoms.elementSymbol, r)
    }

    function n() {
     var e = {
       H: 1.1,
       He: 1.4,
       Li: 1.81,
       Be: 1.53,
       B: 1.92,
       C: 1.7,
       N: 1.55,
       O: 1.52,
       F: 1.47,
       Ne: 1.54,
       Na: 2.27,
       Mg: 1.73,
       Al: 1.84,
       Si: 2.1,
       P: 1.8,
       S: 1.8,
       Cl: 1.75,
       Ar: 1.88,
       K: 2.75,
       Ca: 2.31,
       Sc: 2.16,
       Ti: 1.87,
       V: 1.79,
       Cr: 1.89,
       Mn: 1.97,
       Fe: 1.94,
       Co: 1.92,
       Ni: 1.84,
       Cu: 1.86,
       Zn: 2.1,
       Ga: 1.87,
       Ge: 2.11,
       As: 1.85,
       Se: 1.9,
       Br: 1.83,
       Kr: 2.02,
       Rb: 3.03,
       Sr: 2.49,
       Y: 2.19,
       Zr: 1.86,
       Nb: 2.07,
       Mo: 2.09,
       Tc: 2.09,
       Ru: 2.07,
       Rh: 1.95,
       Pd: 2.02,
       Ag: 2.03,
       Cd: 2.3,
       In: 1.93,
       Sn: 2.17,
       Sb: 2.06,
       Te: 2.06,
       I: 1.98,
       Xe: 2.16,
       Cs: 3.43,
       Ba: 2.68,
       La: 2.4,
       Ce: 2.35,
       Pr: 2.39,
       Nd: 2.29,
       Pm: 2.36,
       Sm: 2.29,
       Eu: 2.33,
       Gd: 2.37,
       Tb: 2.21,
       Dy: 2.29,
       Ho: 2.16,
       Er: 2.35,
       Tm: 2.27,
       Yb: 2.42,
       Lu: 2.21,
       Hf: 2.12,
       Ta: 2.17,
       W: 2.1,
       Re: 2.17,
       Os: 2.16,
       Ir: 2.02,
       Pt: 2.09,
       Au: 2.17,
       Hg: 2.09,
       Tl: 1.96,
       Pb: 2.02,
       Bi: 2.07,
       Po: 1.97,
       At: 2.02,
       Rn: 2.2,
       Fr: 3.48,
       Ra: 2.83,
       Ac: 2.6,
       Th: 2.37,
       Pa: 2.43,
       U: 2.4,
       Np: 2.21,
       Pu: 2.43,
       Am: 2.44,
       Cm: 2.45,
       Bk: 2.44,
       Cf: 2.45,
       Es: 2.45,
       Fm: 2.45,
       Md: 2.46,
       No: 2.46,
       Lr: 2.46
      },
      t = new Map;
     for (var n in e) t.set(n, e[n]), t.set(n.toUpperCase(), e[n]), t.set(n.toLowerCase(), e[n]);
     return t
    }
    var r = void 0;
    e.vdwRadiusFromElementSymbol = t
   }(t = e.Utils || (e.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(t) {
    function n(t) {
     return e.Core.Utils.extend({}, t)
    }

    function r(e, t) {
     if (!e) return t ? !1 : !0;
     if (!t) return !1;
     var n = Object.keys(e);
     if (Object.keys(t).length !== n.length) return !1;
     for (var r = 0, i = n; r < i.length; r++) {
      var o = i[r];
      if (!u.call(e, o) || e[o] !== t[o]) return !1
     }
     return !0
    }

    function i(e, t) {
     if (!e) return t ? !1 : !0;
     if (!t) return !1;
     var n = Object.keys(e);
     if (Object.keys(t).length !== n.length) return !1;
     for (var r = 0, o = n; r < o.length; r++) {
      var a = o[r];
      if (!u.call(e, a)) return !1;
      var s = e[a],
       l = t[a];
      if ("object" == typeof s && "object" == typeof l) {
       if (!i(s, l)) return !1
      } else if (s !== l) return !1
     }
     return !0
    }

    function o(e) {
     for (var t = 1; t < arguments.length; t++)
      for (var n = arguments[t], r = 0, i = Object.keys(n); r < i.length; r++) {
       var o = i[r];
       u.call(n, o) && (e[o] = n[o])
      }
     return e
    }

    function a(e, r) {
     for (var i = !1, o = 0, a = Object.keys(r); o < a.length; o++) {
      var s = a[o];
      if (u.call(r, s) && r[s] !== e[s]) {
       i = !0;
       break
      }
     }
     return i ? t.assign(n(e), r) : e
    }

    function s(e) {
     for (var n = e, r = 1; r < arguments.length; r++)
      if (arguments[r] && (n = a(e, arguments[r]), n !== e)) {
       for (var i = r + 1; i < arguments.length; i++) n = t.assign(n, arguments[i]);
       break
      } return n
    }
    var u = Object.prototype.hasOwnProperty;
    t.shallowClone = n, t.shallowEqual = r, t.deepEqual = i, t.assign = Object.assign || o, t.merge = s
   }(n = t.Utils || (t.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t() {
      this.LOG_DISPATCH_STREAM = !1, this.lanes = [];
      for (var n = 0; n <= t.Lane.Task; n++) this.lanes.push(new e.Rx.Subject)
     }
     return t.prototype.dispatch = function(e) {
      this.LOG_DISPATCH_STREAM && console.log(e.type.name, t.Lane[e.type.lane], e.data), this.lanes[e.type.lane].onNext(e)
     }, t.prototype.schedule = function(e, t, n) {
      return void 0 === n && (n = 1e3 / 31), setTimeout(function() {
       if (t) try {
        e.call(null)
       } catch (n) {
        t.call(null, "" + n)
       } else e.call(null)
      }, n)
     }, t.prototype.getStream = function(e) {
      return this.lanes[e.lane].filter(function(t) {
       return t.type === e
      })
     }, t.prototype.finished = function() {
      this.lanes.forEach(function(e) {
       return e.onCompleted()
      })
     }, t
    }();
    t.Dispatcher = n,
     function(e) {
      var t;
      ! function(e) {
       e[e.Slow = 0] = "Slow", e[e.Fast = 1] = "Fast", e[e.Log = 2] = "Log", e[e.Busy = 3] = "Busy", e[e.Transformer = 4] = "Transformer", e[e.Task = 5] = "Task"
      }(t = e.Lane || (e.Lane = {}))
     }(n = t.Dispatcher || (t.Dispatcher = {}))
   }(t = e.Service || (e.Service = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t(e) {
      this.context = e
     }
     return t.prototype.log = function(t) {
      e.Event.Log.dispatch(this.context, t)
     }, t.prototype.message = function(e) {
      this.log({
       type: t.EntryType.Message,
       timestamp: new Date,
       message: e
      })
     }, t.prototype.error = function(e) {
      this.log({
       type: t.EntryType.Error,
       timestamp: new Date,
       message: e
      })
     }, t.prototype.warning = function(e) {
      this.log({
       type: t.EntryType.Warning,
       timestamp: new Date,
       message: e
      })
     }, t.prototype.info = function(e) {
      this.log({
       type: t.EntryType.Info,
       timestamp: new Date,
       message: e
      })
     }, t
    }();
    t.Logger = n,
     function(e) {
      var t;
      ! function(e) {
       e[e.Message = 0] = "Message", e[e.Error = 1] = "Error", e[e.Warning = 2] = "Warning", e[e.Info = 3] = "Info"
      }(t = e.EntryType || (e.EntryType = {}))
     }(n = t.Logger || (t.Logger = {}))
   }(t = e.Service || (e.Service = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function() {}(t = e.Service || (e.Service = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   t.serialTaskId = 0;
   var n = function() {
    function e(e, n, r) {
     this.name = e, this.type = n, this.task = r, this._id = t.serialTaskId++, this.reportTime = !1
    }
    return Object.defineProperty(e.prototype, "id", {
     get: function() {
      return this._id
     },
     enumerable: !0,
     configurable: !0
    }), e.prototype.bind = function(t, n, r) {
     var i = this;
     return e.create(t, n, function(e) {
      i.run(e.context).then(function(t) {
       r(t).run(e.context).then(e.resolve).catch(e.reject)
      }).catch(e.reject)
     })
    }, e.prototype.map = function(t, n, r) {
     var i = this;
     return e.create(t, n, function(e) {
      i.run(e.context).then(function(t) {
       return e.resolve(r(t))
      }).catch(e.reject)
     })
    }, e.prototype.run = function(n) {
     var r = this;
     return new e.Running(function(i, o, a) {
      t.Event.Task.Started.dispatch(n, r), n.performance.start("task" + r.id);
      var s = new e.Context(n, r, i, o);
      a(s);
      try {
       r.task(new e.Context(n, r, i, o))
      } catch (u) {
       s.reject(u)
      }
     })
    }, e.prototype.setReportTime = function(e) {
     return this.reportTime = e, this
    }, e
   }();
   t.Task = n,
    function(n) {
     function r(e, t, r) {
      return new n(e, t, r)
     }

     function i(e, t, n) {
      return r(e, t, function(e) {
       e.resolve(n)
      })
     }

     function o(e, t, n) {
      return r(e, "Normal", function(e) {
       e.reject(n)
      })
     }

     function a(e, n, i) {
      return r(e, n, function(e) {
       var n = i.run();
       n.progress.subscribe(function(n) {
        return e.update(t.Utils.formatProgress(n), n.requestAbort)
       }), n.result.then(function(t) {
        return e.resolve(t)
       }).catch(function(t) {
        return e.reject(t)
       })
      })
     }

     function s(e, n) {
      return void 0 === n && (n = !1), new t.Promise(function(t, r) {
       var i = [],
        o = function(a) {
         return a >= e.length ? (t(i), void 0) : (e[a]().then(function(e) {
          i.push(e), o(a + 1)
         }).catch(function(e) {
          n ? o(a + 1) : r(e)
         }), void 0)
        };
       o(0)
      })
     }

     function u(e, t, n, i, o) {
      return void 0 === o && (o = !1), r(t, n, function(t) {
       var n = [],
        r = function(a) {
         return a >= i.length ? (t.resolve(n), void 0) : (i[a]().run(e).then(function(e) {
          n.push(e), r(a + 1)
         }).catch(function(e) {
          o ? r(a + 1) : t.reject(e)
         }), void 0)
        };
       r(0)
      })
     }

     function l(e, n) {
      return new t.Promise(function(t, r) {
       try {
        n(t, r)
       } catch (i) {
        e.logger.error("Error (Generic): " + i)
       }
      })
     }

     function c(e, t) {
      return l(e, function(n, r) {
       var i = function(o) {
        if (o >= t.length) return n(void 0), void 0;
        var a = t[o];
        a.stateUpdate(), e.dispatcher.schedule(function() {
         a.action(), i(o + 1)
        }, r)
       };
       i(0)
      })
     }

     function h(e) {
      return e.then && e.catch
     }
     var p = function() {
      function e(e) {
       var n = this;
       this.promise = new t.Promise(function(t, r) {
        return e(t, r, function(e) {
         return n.ctx = e
        })
       })
      }
      return e.prototype.then = function(e) {
       return this.promise.then(e)
      }, e.prototype.catch = function(e) {
       return this.promise.catch(e)
      }, e.prototype.discard = function() {
       this.ctx.discard()
      }, e
     }();
     n.Running = p, n.create = r, n.resolve = i, n.reject = o, n.fromComputation = a, n.sequencePromises = s, n.sequence = u, n.guardedPromise = l, n.split = c, n.isPromise = h;
     var d = function() {
      function n(e, t, n, r) {
       this.context = e, this.task = t, this._resolve = n, this._reject = r, this.schedulingTime = 0, this.scheduleId = 0, this.abort = void 0, this.discarded = !1, this.resolve = this.resolve_task.bind(this), this.reject = this.reject_task.bind(this)
      }
      return n.prototype.discard = function() {
       try {
        this.abort && this.abort()
       } catch (e) {}
       this.discarded = !0
      }, n.prototype.update = function(e, n) {
       t.Event.Task.StateUpdated.dispatch(this.context, {
        taskId: this.task.id,
        type: this.task.type,
        name: this.task.name,
        message: e,
        abort: n
       }), this.abort = n
      }, n.prototype.schedule = function(e, t) {
       var n = this,
        r = this.scheduleId++,
        i = "task" + this.task.id + "-" + r;
       this.context.performance.start(i), this.context.dispatcher.schedule(function() {
        n.context.performance.end(i), n.schedulingTime += n.context.performance.time(i), e()
       }, function(e) {
        n.context.performance.end(i), n.reject(e)
       }, t)
      }, n.prototype.resolve_task = function(n) {
       if (this.abort = void 0, this.discarded) return this.reject("Discarded."), void 0;
       try {
        if (this.context.performance.end("task" + this.task.id), this.task.reportTime) {
         var r = this.context.performance.time("task" + this.task.id) - this.schedulingTime;
         "Silent" !== this.task.type && this.context.logger.info(this.task.name + " finished in " + e.Core.Utils.PerformanceMonitor.format(r) + ".")
        }
       } finally {
        this._resolve(n), t.Event.Task.Completed.dispatch(this.context, this.task.id)
       }
      }, n.prototype.reject_task = function(e) {
       this.abort = void 0, this.context.performance.end("task" + this.task.id), this.context.performance.formatTime("task" + this.task.id);
       try {
        if (!this.discarded)
         if ("Silent" === this.task.type) e.warn ? this.context.logger.warning("Warning (" + this.task.name + "): " + e.message) : console.error("Error (" + this.task.name + "): " + e, e);
         else if ("Child" !== this.task.type)
         if (e.warn) this.context.logger.warning("Warning (" + this.task.name + "): " + e.message);
         else {
          var n = "" + e;
          n.indexOf("Aborted") >= 0 ? this.context.logger.info(this.task.name + ": Aborted.") : this.context.logger.error("Error (" + this.task.name + "): " + e)
         }
        else {
         var n = "" + e;
         !e.warn && n.indexOf("Aborted") < 0 && console.log(e)
        }
       } catch (n) {
        console.log(n)
       } finally {
        this._reject(e), t.Event.Task.Completed.dispatch(this.context, this.task.id)
       }
      }, n
     }();
     n.Context = d
    }(n = t.Task || (t.Task = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e, t) {
     return Object.create(n, {
      name: {
       writable: !1,
       configurable: !1,
       value: e
      },
      lane: {
       writable: !1,
       configurable: !1,
       value: t
      }
     })
    }
    var n = {
     dispatch: function(e, t) {
      e.dispatcher.dispatch({
       type: this,
       data: t
      })
     },
     getStream: function(e) {
      return e.dispatcher.getStream(this)
     }
    };
    e.create = t
   }(t = e.Event || (e.Event = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = e.Service.Dispatcher.Lane;
    t.Log = t.create("bs.Log", n.Log);
    var r;
    ! function(e) {
     e.LayoutChanged = t.create("bs.Common.LayoutChanged", n.Slow)
    }(r = t.Common || (t.Common = {}));
    var i;
    ! function(e) {
     e.Started = t.create("bs.Tasks.Started", n.Task), e.Completed = t.create("bs.Tasks.Completed", n.Task), e.StateUpdated = t.create("bs.Tasks.StateUpdated", n.Busy)
    }(i = t.Task || (t.Task = {}));
    var o;
    ! function(e) {
     e.NodeUpdated = t.create("bs.Tree.NodeUpdated", n.Slow), e.NodeAdded = t.create("bs.Tree.NodeAdded", n.Slow), e.NodeRemoved = t.create("bs.Tree.NodeRemoved", n.Slow), e.TransformStarted = t.create("bs.Tree.TransformStarted", n.Slow), e.TransformFinished = t.create("bs.Tree.TransformFinished", n.Slow), e.TransformerApply = t.create("bs.Tree.TransformerApplied", n.Transformer)
    }(o = t.Tree || (t.Tree = {}));
    var a;
    ! function(e) {
     e.CurrentChanged = t.create("bs.Entity.CurrentChanged", n.Slow)
    }(a = t.Entity || (t.Entity = {}));
    var s;
    ! function(e) {
     e.Highlight = t.create("bs.Visuals.HoverElement", n.Fast)
    }(s = t.Interactivity || (t.Interactivity = {}));
    var u;
    ! function(e) {
     e.VisualHoverElement = t.create("bs.Visual.HoverElement", n.Fast), e.VisualSelectElement = t.create("bs.Visual.SelectElement", n.Fast), e.CameraChanged = t.create("bs.Visual.CameraChanged", n.Fast)
    }(u = t.Visual || (t.Visual = {}));
    var l;
    ! function(e) {
     e.ModelHighlight = t.create("bs.Molecule.ModelHighlight", n.Fast), e.ModelSelect = t.create("bs.Molecule.ModelSelect", n.Fast)
    }(l = t.Molecule || (t.Molecule = {}))
   }(t = e.Event || (e.Event = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r, i = t.Service.Dispatcher.Lane,
     o = t.Event.create;
    ! function(e) {
     e.RemoveNode = o("bs.cmd.Tree.RemoveNode", i.Slow), e.ApplyTransform = o("bs.cmd.Tree.ApplyTransform", i.Slow)
    }(r = n.Tree || (n.Tree = {}));
    var a;
    ! function(e) {
     e.SetCurrent = o("bs.cmd.Entity.SetCurrentNode", i.Slow), e.ToggleExpanded = o("bs.cmd.Entity.ToggleExpanded", i.Slow), e.SetVisibility = o("bs.cmd.Entity.SetVisibility", i.Slow), e.Focus = o("bs.cmd.Entity.Focus", i.Slow), e.Highlight = o("bs.cmd.Entity.Highlight", i.Slow)
    }(a = n.Entity || (n.Entity = {}));
    var s;
    ! function(t) {
     t.SetState = e.Bootstrap.Event.create("lm.cmd.Layout.SetState", i.Slow), t.SetViewportOptions = o("bs.cmd.Layout.SetViewportOptions", i.Slow)
    }(s = n.Layout || (n.Layout = {}));
    var u;
    ! function(e) {
     e.FocusQuery = o("bs.cmd.Molecule.FocusQuery", i.Slow), e.Highlight = o("bs.cmd.Molecule.Highlight", i.Slow), e.CreateSelectInteraction = o("bs.cmd.Molecule.CreateSelectInteraction", i.Slow)
    }(u = n.Molecule || (n.Molecule = {}));
    var l;
    ! function(e) {
     e.ResetScene = o("bs.cmd.Visual.ResetScene", i.Slow), e.ResetTheme = o("bs.cmd.Visual.ResetTheme", i.Slow), e.UpdateBasicTheme = o("bs.cmd.Visual.UpdateBasicTheme", i.Slow)
    }(l = n.Visual || (n.Visual = {}));
    var c;
    ! function(e) {
     e.Show = o("bs.cmd.Toast.Show", i.Slow), e.Hide = o("bs.cmd.Toast.Hide", i.Slow)
    }(c = n.Toast || (n.Toast = {}))
   }(n = t.Command || (t.Command = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e, t) {
     var n = {
      version: 0,
      refs: new Map,
      nodes: new Set,
      root: t,
      context: e
     };
     return t.parent = t, t.tree = n, n
    }

    function r(e) {
     if (e.tree) {
      var t = e.tree.refs.get(e.ref);
      t ? t.push(e) : e.tree.refs.set(e.ref, [e])
     }
    }

    function i(e) {
     t.Node.forEach(e, function(e) {
      return r(e)
     })
    }

    function o(e, t) {
     var n = e.refs.get(t.ref);
     if (n) {
      var r = n.indexOf(t);
      0 > r || (n[r] = n[n.length - 1], n.pop(), n.length || e.refs.delete(t.ref))
     }
    }

    function a(n) {
     if (!n.parent) throw "Cannot add a node without a parent.";
     var r = n.parent.tree;
     t.Node.forEach(n, function(e) {
      return e.tree = r
     }), t.Node.addChild(n.parent, n), i(n), e.Entity.nodeUpdated(n.parent), s(n)
    }

    function s(n) {
     var r = n.tree.context;
     t.Node.forEachPreorder(n, function(t) {
      e.Event.Tree.NodeAdded.dispatch(r, t)
     })
    }

    function u(n, r, o) {
     t.Node.replaceChild(r.parent, r, o), h(n.context, r), t.Node.forEach(o, function(e) {
      return e.tree = n
     }), i(o);
     for (var a = 0, u = o.children; a < u.length; a++) {
      var l = u[a];
      s(l)
     }
     e.Entity.nodeUpdated(o.parent), e.Event.Tree.NodeAdded.dispatch(n.context, o), n.context.currentEntity === r && e.Entity.setCurrent(o)
    }

    function l(n) {
     if (n) {
      for (var r = void 0; n !== n.parent;) r = n, t.Node.update(n), n = n.parent;
      r && e.Event.Tree.NodeUpdated.dispatch(n.tree.context, r)
     }
    }

    function c(n) {
     var r = n.root.children;
     n.root.children = [], t.Node.update(n.root), e.Entity.nodeUpdated(n.root), n.refs.clear();
     for (var i = 0, o = r; i < o.length; i++) {
      var a = o[i];
      h(n.context, a)
     }
     e.Command.Entity.SetCurrent.dispatch(n.context, n.root)
    }

    function h(n, r) {
     var i = n.currentEntity,
      a = !1;
     return t.Node.forEach(r, function(t) {
      o(n.tree, t), e.Event.Tree.NodeRemoved.dispatch(n, t), t.tree = void 0, t === i && (a = !0)
     }), a
    }

    function p(n) {
     if (n && n.tree) {
      if (n.parent === n) return c(n.tree), void 0;
      var r = t.Node.isHidden(n),
       i = n.index,
       o = n.parent,
       a = n.tree.context;
      t.Node.removeChild(o, n), e.Entity.nodeUpdated(o);
      var s = h(a, n);
      if (s && !r) {
       for (var u = !1, l = i; l >= 0; l--)
        if (o.children[l] && !t.Node.isHidden(o.children[l])) {
         e.Command.Entity.SetCurrent.dispatch(a, o.children[l]), u = !0;
         break
        } u || e.Command.Entity.SetCurrent.dispatch(a, o)
      }
      n.transform.props.isBinding && !o.children.length && p(n.parent)
     }
    }
    t.create = n, t.add = a, t.update = u, t.updatePath = l, t.remove = p
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     function n(e, t) {
      return e && e.type === t
     }

     function r(e, t) {
      if (!t) return !1;
      for (;;) {
       if (e === t) return !0;
       if (e = e.parent, !e || e === e.parent) return !1
      }
     }

     function i(e, t) {
      if (!e) return void 0;
      for (var r = e.parent;;) {
       if (n(r, t)) return r;
       if (r = r.parent, r.parent === r) return void 0
      }
     }

     function o(e, t) {
      if (!e) return void 0;
      for (var n = e;;) {
       if (t.indexOf(n.type) >= 0) return n;
       if (n = n.parent, n.parent === n) return t.indexOf(n.type) >= 0 ? n : void 0
      }
     }

     function a() {
      return v++
     }

     function s(e) {
      return e.version++, e
     }

     function u(t, n) {
      var r = e.Utils.merge(t.props, n);
      return r === t.props ? t : s(t)
     }

     function l(t, n) {
      var r = e.Utils.merge(t.state, n);
      return r === t.state ? t : (t.state = r, s(t))
     }

     function c(e, t) {
      return t.index = e.children.length, e.children.push(t), s(e)
     }

     function h(e, t) {
      for (var n = e.children, r = t.index, i = n.length - 1; i > r; r++) {
       var o = n[r + 1];
       o.index--, n[r] = o
      }
      return n.pop(), s(e)
     }

     function p(e, t, n) {
      return n ? (n.index = t.index, e.children[n.index] = n, s(e)) : h(e, t)
     }

     function d(e, t) {
      for (var n = 0, r = e.children; n < r.length; n++) {
       var i = r[n];
       d(i, t)
      }
      t(e)
     }

     function f(e, t) {
      t(e);
      for (var n = 0, r = e.children; n < r.length; n++) {
       var i = r[n];
       d(i, t)
      }
     }

     function m(e) {
      var t = [];
      return d(e, function(e) {
       return t.push(e)
      }), t
     }

     function g(e) {
      if (e.isHidden) return !0;
      var t = e.parent;
      if (!t) return e.isHidden;
      for (; t.parent !== t;) {
       if (t.isHidden) return !0;
       if (t = t.parent, !t) return !1
      }
      return !1
     }
     t.Null = {}, t.is = n, t.hasAncestor = r, t.findAncestor = i, t.findClosestNodeOfType = o;
     var v = 0;
     t.createId = a, t.update = s, t.withProps = u, t.withState = l, t.addChild = c, t.removeChild = h, t.replaceChild = p, t.forEach = d, t.forEachPreorder = f, t.collect = m, t.isHidden = g
    }(n = t.Node || (t.Node = {}))
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(t) {
     function n(e, t) {
      return r(e)(t)
     }

     function r(e) {
      var n, r = e ? e : t.root();
      return n = o(r) ? r.compile() : i(r) ? t.byValue(r).compile() : a(r) ? r : t.byRef(r).compile()
     }

     function i(e) {
      return void 0 !== e.ref
     }

     function o(e) {
      return void 0 !== e.compile
     }

     function a(e) {
      return "function" == typeof e
     }

     function s(e) {
      return Object.create(x.BuilderPrototype, {
       compile: {
        writable: !1,
        configurable: !1,
        value: e
       }
      })
     }

     function u() {
      return s(function() {
       return function(e) {
        return [e.root]
       }
      })
     }

     function l() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return s(function() {
       return function(t) {
        for (var n = [], r = 0, i = e; r < i.length; r++) {
         var o = i[r],
          a = t.refs.get(o);
         if (a)
          for (var s = 0, u = a; s < u.length; s++) {
           var l = u[s];
           n.push(l)
          }
        }
        return n
       }
      })
     }

     function c() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return s(function() {
       return function() {
        return e
       }
      })
     }

     function h(e, t) {
      var n = r(e);
      return s(function() {
       return function(e) {
        for (var r = [], i = 0, o = n(e); i < o.length; i++)
         for (var a = o[i], s = 0, u = t(a); s < u.length; s++) {
          var l = u[s];
          r.push(l)
         }
        return r
       }
      })
     }

     function p(e, t) {
      var n = r(e);
      return s(function() {
       return function(e) {
        for (var r = [], i = 0, o = n(e); i < o.length; i++) {
         var a = o[i],
          s = t(a);
         s && r.push(s)
        }
        return r
       }
      })
     }

     function d(e) {
      var t = r(e);
      return s(function() {
       return function(e) {
        for (var n = new Set, r = [], i = 0, o = t(e); i < o.length; i++) {
         var a = o[i];
         n.has(a.id) || (n.add(a.id), r.push(a))
        }
        return r
       }
      })
     }

     function f(e) {
      var t = r(e);
      return s(function() {
       return function(e) {
        return [t(e)[0]]
       }
      })
     }

     function m(e, t) {
      return h(e, function(e) {
       return t(e) ? [e] : []
      })
     }

     function g(t) {
      return h(t, function(t) {
       return e.Node.collect(t)
      })
     }

     function v(e) {
      return h(e, function(e) {
       return e.children
      })
     }

     function y(e, t) {
      return m(e, function(e) {
       return e.type === t
      })
     }

     function b(t, n) {
      return d(p(t, function(t) {
       return e.Node.findAncestor(t, n)
      }))
     }

     function w(e) {
      return d(p(e, function(e) {
       return e.parent
      }))
     }
     t.select = n, t.compile = r;
     var x;
     ! function(e) {
      function t(t, n) {
       e.BuilderPrototype[t] = function() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        return n.call.apply(n, [void 0, this].concat(e))
       }
      }
      e.BuilderPrototype = {}, e.registerModifier = t
     }(x = t.Helpers || (t.Helpers = {})), t.root = u, t.byRef = l, t.byValue = c, x.registerModifier("flatMap", h), t.flatMap = h, x.registerModifier("mapEntity", p), t.mapEntity = p, x.registerModifier("unique", d), t.unique = d, x.registerModifier("first", f), t.first = f, x.registerModifier("filter", m), t.filter = m, x.registerModifier("subtree", g), t.subtree = g, x.registerModifier("children", v), t.children = v, x.registerModifier("ofType", y), t.ofType = y, x.registerModifier("ancestorOfType", b), t.ancestorOfType = b, x.registerModifier("parent", w), t.parent = w
    }(t = e.Selection || (e.Selection = {}))
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r(e, t, n) {
      return new l(e, t, n)
     }

     function i(e, t, n, i) {
      return r({
       id: e,
       name: e,
       description: "",
       from: t,
       to: n,
       validateParams: function() {
        return void 0
       },
       defaultParams: function() {
        return {}
       }
      }, i)
     }

     function o(e, t, n, r, i) {
      try {
       r.reject(t)
      } finally {
       i && ("string" == typeof i ? n.logger.error(i) : setTimeout(function() {
        return i.call(null, n, e, t)
       }, 0))
      }
     }

     function a(e, n, r, i, o) {
      t.Transform.apply(n, e.action).run(n).then(function() {
       try {
        r.resolve(t.Node.Null)
       } finally {
        i && ("string" == typeof i ? n.logger.message(i) : setTimeout(function() {
         return i.call(null, n, e.context)
        }, 0))
       }
      }).catch(function(t) {
       try {
        r.reject(t)
       } finally {
        o && ("string" == typeof o ? n.logger.error(o) : setTimeout(function() {
         return o.call(null, n, e.context, t)
        }, 0))
       }
      })
     }

     function s(t, n, i, o) {
      return r(t, function(r, s, u) {
       return e.Task.create(t.name, "Background", function(e) {
        var t = n(r, s, u);
        a({
         action: t,
         context: void 0
        }, r, e, i, o)
       })
      })
     }

     function u(t, n, i, s) {
      return r(t, function(r, u, l) {
       return e.Task.create(t.name, "Background", function(t) {
        var c = n(r, u, l);
        e.Task.isPromise(c) ? c.then(function(e) {
         return a(e, r, t, i, s)
        }).catch(function(e) {
         return o(void 0, e, r, t, s)
        }) : a(c, r, t, i, s)
       })
      })
     }
     var l = function() {
      function n(e, t, n) {
       this.info = e, this.transform = t, this.updater = n
      }
      return n.prototype.getTarget = function(e) {
       var n = this.info;
       return n.from.length ? t.Node.findClosestNodeOfType(e, n.from) : e
      }, n.prototype.checkTypes = function(e, t) {
       if (t.transformer !== this) return "The transform is calling an invalid transformer (got " + t.transformer.info.name + ", expected " + this.info.name + ")";
       var n = this.info;
       return n.from.length && n.from.indexOf(e.type) < 0 ? "Transform (" + n.name + "): type error, expected '" + n.from.map(function(e) {
        return e.info.name
       }).join("/") + "', got '" + e.type.info.name + "'." : void 0
      }, n.prototype.validateParams = function(e) {
       var t = this.info;
       if (t.validateParams) {
        var n = t.validateParams(e.params);
        if (n && n.length > 0) return "Invalid params: " + n.join(", ") + "."
       }
       return void 0
      }, n.prototype.validate = function(t, n) {
       var r = this.info;
       if (!t) return e.Task.reject(r.name, "Normal", "Could not find a suitable node to apply the transformer to.");
       var i = this.checkTypes(t, n);
       if (i) return e.Task.reject(r.name, "Normal", i);
       var o = this.validateParams(n);
       return o ? e.Task.reject(r.name, "Normal", o) : void 0
      }, n.prototype.apply = function(t, n, r) {
       if (this.info.isComposed) return this.transform(t, n, r);
       var i = this.getTarget(n),
        o = this.validate(i, r);
       return o ? o : (e.Event.Tree.TransformerApply.dispatch(t, {
        a: i,
        t: r
       }), this.transform(t, i, r))
      }, n.prototype.update = function(t, n, r) {
       var i = n.parent;
       if (this.info.isComposed && !this.updater) return this.transform(t, i, r);
       if (this.updater) {
        var o = this.validateParams(r);
        if (o) return e.Task.reject(this.info.name, "Normal", o);
        var a = this.updater(t, n, r);
        if (a) return a
       }
       return e.Event.Tree.TransformerApply.dispatch(t, {
        a: n.parent,
        t: r
       }), this.transform(t, i, r)
      }, n.prototype.create = function(e, n) {
       return t.Transform.create(e, n ? n : {}, this)
      }, n
     }();
     n.create = r, n.internal = i, n.action = s, n.actionWithContext = u
    }(n = t.Transformer || (t.Transformer = {}))
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r(t, n, r) {
      var i = e.Utils.shallowClone(n);
      return i.ref || (i.ref = e.Utils.generateUUID()), new c(t, i, r)
     }

     function i(t, n) {
      var r = t.select(n.selector),
       i = r.map(function(e) {
        return function() {
         return n.transform.update(t, e)
        }
       });
      return e.Task.sequence(t, "Update transform", "Child", i, !0)
     }

     function o(t, n) {
      var r = t.select(n.selector),
       i = r.map(function(e) {
        return function() {
         return n.transform.apply(t, e)
        }
       });
      return e.Task.sequence(t, "Apply transform", "Child", i, !0)
     }

     function a(e) {
      return !!e.selector
     }

     function s(e) {
      return !!e.compile
     }

     function u(t, n) {
      var r;
      try {
       r = a(n) ? [n] : s(n) ? n.compile() : n
      } catch (i) {
       return e.Task.reject("Apply transforms", "Child", i)
      }
      var u = r.map(function(e) {
       return function() {
        return o(t, e)
       }
      });
      return e.Task.sequence(t, "Apply transforms", "Child", u, !0)
     }

     function l(t, n) {
      var r;
      try {
       r = a(n) ? [n] : s(n) ? n.compile() : n
      } catch (o) {
       return e.Task.reject("Apply transforms", "Child", o)
      }
      var u = r.map(function(e) {
       return function() {
        return i(t, e)
       }
      });
      return e.Task.sequence(t, "Apply transforms", "Child", u, !0)
     }
     var c = function() {
      function n(e, t, n) {
       this.params = e, this.props = t, this.transformer = n, this.isUpdate = !1
      }
      return n.prototype.resolveAdd = function(e, n, r) {
       return r === t.Node.Null ? (e.resolve(r), void 0) : (r.ref = this.props.ref, this.props.isHidden && (r.isHidden = !0), r.tree || (r.parent = n, t.add(r)), e.resolve(r), void 0)
      }, n.prototype.resolveUpdate = function(e, n, r) {
       if (r === t.Node.Null) return e.resolve(r), void 0;
       var i = n.parent;
       r.ref = this.props.ref, r.parent = i, r.tag = n.tag, r.state = n.state, this.props.isHidden && (r.isHidden = !0), t.update(e.context.tree, n, r), e.resolve(r)
      }, n.prototype.apply = function(t, n) {
       var r = this;
       return e.Task.create(this.transformer.info.name, "Child", function(i) {
        e.Event.Tree.TransformStarted.dispatch(t, r), r.transformer.apply(t, n, r).run(i.context).then(function(o) {
         r.resolveAdd(i, n, o), e.Event.Tree.TransformFinished.dispatch(t, {
          transform: r
         })
        }).catch(function(n) {
         i.reject(n), e.Event.Tree.TransformFinished.dispatch(t, {
          transform: r,
          error: n
         })
        })
       })
      }, n.prototype.update = function(t, n) {
       var r = this;
       return e.Task.create(this.transformer.info.name, "Child", function(i) {
        r.isUpdate = !0, r.props.ref = n.transform.props.ref, e.Event.Tree.TransformStarted.dispatch(t, r), n.transform.props.isBinding && (r.props.isBinding = !0), r.transformer.update(t, n, r).run(t).then(function(o) {
         r.resolveUpdate(i, n, o), e.Event.Tree.TransformFinished.dispatch(t, {
          transform: r
         })
        }).catch(function(n) {
         i.reject(n), e.Event.Tree.TransformFinished.dispatch(t, {
          transform: r,
          error: n
         })
        })
       })
      }, n
     }();
     n.create = r, n.updateInstance = i, n.applyInstance = o, n.apply = u, n.update = l
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     function t() {
      return new n.Impl(void 0, [])
     }
     e.build = t;
     var n;
     ! function(e) {
      var t = function() {
       function e(e, t) {
        this.last = e, this.transforms = t
       }
       return e.prototype.add = function(t, n, r, i) {
        var o = {
         selector: t,
         transform: n.create(r, i)
        };
        return this.transforms.push(o), this.last = o, new e(o, this.transforms)
       }, e.prototype.then = function(t, n, r) {
        if (!this.last) throw "Cannot 'then' on an empty builder";
        var i = t.create(n, r),
         o = {
          selector: this.last.transform.props.ref,
          transform: i
         };
        return this.transforms.push(o), new e(o, this.transforms)
       }, e.prototype.compile = function() {
        return this.transforms
       }, e
      }();
      e.Impl = t
     }(n = e.Builder || (e.Builder = {}))
    }(t = e.Transform || (e.Transform = {}))
   }(t = e.Tree || (e.Tree = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    function t(e) {
     return 0 === e.kind || !e.source.tree
    }

    function n(e) {
     return 1 === e.kind && !!e.source.tree
    }

    function r(e, t) {
     if (!e && !t) return !0;
     if (!e || !t) return !1;
     if (e.kind !== t.kind) return !1;
     if (0 === e.kind) return !0;
     if (e.source !== t.source) return !1;
     var n = e.elements,
      r = t.elements;
     if (n.length !== r.length) return !1;
     for (var i = 0, o = n.length; o > i; i++)
      if (n[i] !== r[i]) return !1;
     return !0
    }

    function i(e, t) {
     var n = e.elements,
      r = t.elements;
     if (n.length !== r.length) return !1;
     for (var i = 0, o = n.length; o > i; i++)
      if (n[i] !== r[i]) return !1;
     return !0
    }
    var o;
    ! function(e) {
     function t(e, t) {
      return {
       kind: 1,
       source: e,
       elements: t
      }
     }
     e.empty = {
      kind: 0
     }, e.selection = t
    }(o = e.Info || (e.Info = {})), e.isEmpty = t, e.isSelection = n, e.interactivityInfoEqual = r, e.interactivitySelectionElementsEqual = i
   }(t = e.Interactivity || (e.Interactivity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t(t) {
      var n = this;
      this.context = t, this.providers = [], this.empty = [], e.Event.Visual.VisualHoverElement.getStream(t).subscribe(function(r) {
       return e.Event.Interactivity.Highlight.dispatch(t, n.getInfo(r.data))
      })
     }
     return t.prototype.addProvider = function(e) {
      this.providers.push(e)
     }, t.prototype.removeProvider = function(t) {
      this.providers = this.providers.filter(function(e) {
       return e !== t
      }), e.Event.Interactivity.Highlight.dispatch(this.context, [])
     }, t.prototype.getInfo = function(e) {
      if (!e) return this.empty;
      for (var t = [], n = 0, r = this.providers; n < r.length; n++) {
       var i = r[n],
        o = i.call(null, e);
       o && t.push(o)
      }
      return t
     }, t
    }();
    t.HighlightManager = n
   }(t = e.Interactivity || (e.Interactivity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     function r(e, t, n) {
      for (var r, i, o, a, s = t.structure, u = s.atoms, l = u.residueIndex, c = u.chainIndex, h = u.entityIndex, p = u.name, d = u.authName, f = u.id, m = u.occupancy, g = u.tempFactor, v = u.elementSymbol, y = u.x, b = u.y, w = u.z, x = u.altLoc, _ = s.residues, S = _.name, C = _.authName, E = _.seqNumber, T = _.authSeqNumber, M = _.insCode, A = _.isHet, P = s.chains, R = P.asymId, I = P.authAsymId, k = s.entities.entityId, D = -1, V = -1, L = -1, B = -1, O = function() {
        return r = {
         index: V,
         entityId: k[V]
        }
       }, N = function() {
        return i = {
         index: L,
         asymId: R[L],
         authAsymId: I[L],
         entity: r
        }
       }, F = function() {
        return o = {
         index: B,
         name: S[B],
         authName: C[B],
         seqNumber: E[B],
         authSeqNumber: T[B],
         insCode: M[B],
         isHet: A[B],
         chain: i
        }
       }, U = function() {
        return a = {
         index: D,
         id: f[D],
         name: p[D],
         authName: d[D],
         elementSymbol: v[D],
         occupancy: m[D],
         tempFactor: g[D],
         x: y[D],
         y: b[D],
         z: w[D],
         altLoc: x[D],
         residue: o
        }
       }, z = [], G = [], H = [], j = [], q = 0; q < n.length; q++) D = n[q], t.hasAtom(D) && (V !== h[D] && (V = h[D], z.push(O())), L !== c[D] && (L = c[D], G.push(N())), B !== l[D] && (B = l[D], H.push(F())), j.push(U()));
      return {
       modelRef: e.ref,
       moleculeId: s.id,
       modelId: s.modelId,
       atoms: j,
       residues: H,
       chains: G,
       entities: z
      }
     }

     function i(n) {
      if (t.isEmpty(n)) return void 0;
      var i = e.Utils.Molecule.findModelOrSelection(n.source);
      if (!i) return void 0;
      var o = e.Utils.Molecule.findQueryContext(i),
       a = e.Utils.Molecule.findModel(i);
      return o && a ? r(a, o, n.elements) : void 0
     }

     function o(t) {
      var n = [];
      return 1 !== t.occupancy && n.push("occupancy " + e.Utils.round(t.occupancy, 2)), t.altLoc && n.push("alt. loc " + t.altLoc), n.length ? " <small>[" + n.join(", ") + "]</small>" : ""
     }

     function a(t) {
      return "<span><b>" + t.name + " " + t.elementSymbol + " " + t.id + "</b>" + o(t) + " at (" + e.Utils.round(t.x, 1) + ", " + e.Utils.round(t.y, 1) + ", " + e.Utils.round(t.z, 1) + ")</span>"
     }

     function s(e) {
      return "<span>" + e.name + " " + e.elementSymbol + " " + e.id + o(e) + "</span>"
     }

     function u(e) {
      return "<span>" + e.authName + " " + e.chain.authAsymId + " " + e.authSeqNumber + (null !== e.insCode ? " i: " + e.insCode : "") + "</span>"
     }

     function l(e) {
      return "1" === e.modelId ? "<span><small>[" + e.moleculeId + "]</small></span>" : "<span><small>[" + e.moleculeId + ":" + e.modelId + "]</small></span>"
     }

     function c(e) {
      return e && e.atoms.length ? 1 === e.atoms.length ? "<span>" + a(e.atoms[0]) + " on <b><small>" + u(e.residues[0]) + "</small></b> " + l(e) + "</span>" : 1 === e.residues.length ? "<span><b>" + u(e.residues[0]) + "</b> " + l(e) + "</span>" : "<span><small>" + e.atoms.length + " atoms on</small> <b>" + e.residues.length + " residues</b> " + l(e) + "</span>" : ""
     }

     function h(e) {
      return e && e.atoms.length ? 1 === e.atoms.length ? "<span><b>" + s(e.atoms[0]) + "<b> " + l(e) + "</span>" : 1 === e.residues.length ? "<span><b>" + u(e.residues[0]) + "</b> " + l(e) + "</span>" : "<span><b>" + e.residues.length + " residues</b> " + l(e) + "</span>" : ""
     }

     function p(n) {
      if (t.isEmpty(n)) return !1;
      var r = e.Utils.Molecule.findModelOrSelection(n.source);
      return r ? !0 : !1
     }
     n.transformMoleculeAtomIndices = r, n.transformInteraction = i, n.formatInfo = c, n.formatInfoShort = h, n.isMoleculeModelInteractivity = p
    }(n = t.Molecule || (t.Molecule = {}))
   }(t = e.Interactivity || (e.Interactivity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r = function() {
     function e(e, n) {
      var r = this;
      this.context = e, this.scene = n, this.entries = new Map, this.originalThemes = new Map, t.Event.Tree.NodeAdded.getStream(e).subscribe(function(e) {
       t.Entity.isClass(e.data, t.Entity.VisualClass) && r.add(e.data)
      }), t.Event.Tree.NodeRemoved.getStream(e).subscribe(function(e) {
       t.Entity.isClass(e.data, t.Entity.VisualClass) && r.remove(e.data)
      }), t.Event.Tree.NodeUpdated.getStream(e).subscribe(function(e) {
       if (t.Entity.isVisual(e.data)) {
        var n = r.entries.get(e.data.id);
        if (n) {
         var i = 2 !== n.state.visibility;
         n.props.model.getVisibility() !== i && n.props.model.updateVisibility(i)
        }
       }
      }), t.Command.Visual.UpdateBasicTheme.getStream(e).subscribe(function(e) {
       if (r.entries.get(e.data.visual.id) && t.Entity.isVisual(e.data.visual)) {
        var n = e.data.visual;
        r.originalThemes.get(n.id) || r.originalThemes.set(n.id, n.props.model.theme), n.props.model.applyTheme(e.data.theme)
       }
      }), t.Command.Molecule.Highlight.getStream(e).subscribe(function(e) {
       return r.highlightMoleculeModel(e.data)
      }), t.Command.Visual.ResetTheme.getStream(e).subscribe(function(e) {
       return r.resetThemesAndHighlight(e.data && e.data.selection)
      })
     }
     return e.prototype.isEmpty = function() {
      return !this.entries.size
     }, e.prototype.add = function(e) {
      if (this.entries.has(e.id) || !e.props.model) return !1;
      this.entries.set(e.id, e), this.scene.scene.models.add(e.props.model, 1 === this.entries.size);
      var t = 2 !== e.state.visibility;
      return e.props.model.getVisibility() !== t && e.props.model.updateVisibility(t), e.props.model.tag = e, !0
     }, e.prototype.remove = function(e) {
      return this.entries.has(e.id) ? (this.entries.delete(e.id), this.originalThemes.delete(e.id), this.scene.scene.models.removeAndDispose(e.props.model), e.props.model.tag = void 0, e.props.model = void 0, !0) : !1
     }, e.prototype.get = function(e) {
      return this.entries.get(e)
     }, e.prototype.resetThemesAndHighlight = function(e) {
      var n = this;
      if (!e) return this.originalThemes.forEach(function(e, t) {
       n.entries.get(t).props.model.applyTheme(e)
      }), this.originalThemes.clear(), this.entries.forEach(function(e) {
       return e.props.model.highlight(!1)
      }), this.scene.scene.forceRender(), void 0;
      for (var r = this.context.select(e), i = 0, o = r; i < o.length; i++) {
       var a = o[i];
       if (t.Entity.isVisual(a) && this.originalThemes.has(a.id)) {
        var s = a,
         u = this.originalThemes.get(s.id);
        s.props.model.applyTheme(u), s.props.model.highlight(!1), this.originalThemes.delete(s.id)
       }
      }
      this.scene.scene.forceRender()
     }, e.prototype.highlightMoleculeModel = function(e) {
      var n = this,
       r = t.Utils.Molecule.findModel(e.model);
      if (!r) return console.warn("Highlight: Trying to highlight a non-molecule model entity, ignoring..."), void 0;
      var i = [];
      if (this.context.select(t.Tree.Selection.byValue(e.model).subtree()).forEach(function(e) {
        t.Entity.isVisual(e) && n.entries.get(e.id) && i.push(e)
       }), i.length) {
       var o = t.Utils.Molecule.getModelAndIndicesFromQuery(r, e.query);
       if (o && o.indices.length)
        for (var a = e.isOn ? 3 : 4, s = 0, u = i; s < u.length; s++) {
         var l = u[s];
         l.props.model.applySelection(o.indices, a)
        }
      }
     }, e
    }();
    n.DisplayList = r;
    var i = function() {
     function n(n, i, o) {
      var a = this;
      this.context = i, this._destroyed = !1, this.cameraChanged = new t.Rx.Subject, this.cameraObserver = function(e) {
       return a.cameraChanged.onNext(e)
      }, this.models = new r(i, this), this.scene = new e.Visualization.Scene(n, o), this.scene.camera.observe(this.cameraObserver), this.scene.events.addEventListener("hover", function(e) {
       return a.handleEvent(e, t.Event.Visual.VisualHoverElement)
      }), this.scene.events.addEventListener("select", function(e) {
       return a.handleEvent(e, t.Event.Visual.VisualSelectElement)
      }), this.cameraChanged.throttle(1e3 / 30).subscribe(function(e) {
       t.Event.Visual.CameraChanged.dispatch(a.context, e)
      }), t.Command.Entity.Focus.getStream(i).subscribe(function(e) {
       if (1 === e.data.length) {
        var n = e.data[0];
        t.Entity.isMoleculeSelection(n) ? a.focusMoleculeModelSelection(n) : t.Entity.isClass(n, t.Entity.VisualClass) && a.scene.camera.focusOnModel(n.props.model)
       } else(r = a.scene.camera).focusOnModel.apply(r, e.data.filter(function(e) {
        return t.Entity.isClass(e, t.Entity.VisualClass)
       }).map(function(e) {
        return e.props.model
       }));
       var r
      }), t.Command.Entity.Highlight.getStream(i).subscribe(function(e) {
       for (var n = 0, r = e.data.entities; n < r.length; n++) {
        var i = r[n];
        t.Entity.isClass(i, t.Entity.VisualClass) && i.props.model && i.props.model.highlight(e.data.isOn)
       }
      }), t.Command.Visual.ResetScene.getStream(i).subscribe(function() {
       return a.resetScene()
      }), t.Command.Molecule.FocusQuery.getStream(i).subscribe(function(e) {
       return a.focusMoleculeModelOnQuery(e.data)
      })
     }
     return n.prototype.resetScene = function() {
      this._destroyed || (t.Event.Visual.VisualSelectElement.dispatch(this.context, t.Interactivity.Info.empty), this.models.resetThemesAndHighlight(), this.scene.camera.reset())
     }, Object.defineProperty(n.prototype, "camera", {
      get: function() {
       return this.scene.camera
      },
      enumerable: !0,
      configurable: !0
     }), n.prototype.destroy = function() {
      this._destroyed || (this.scene.camera.stopObserving(this.cameraObserver), this.scene.destroy(), this.scene = void 0, this._destroyed = !0)
     }, n.prototype.handleEvent = function(e, n) {
      var r = e.data;
      r && r.model && r.elements ? n.dispatch(this.context, t.Interactivity.Info.selection(r.model.tag, r.elements)) : n.dispatch(this.context, t.Interactivity.Info.empty)
     }, n.prototype.focusMoleculeModelSelection = function(e) {
      if (!t.Tree.Node.is(e, t.Entity.Molecule.Selection)) return console.warn("Focus: Trying to focus on non-molecule selection, ignoring..."), void 0;
      var n = t.Utils.Molecule.findModel(e);
      if (!n) return console.warn("Focus: Molecule model for selection not found, ignoring..."), void 0;
      var r = {
        x: .1,
        y: .1,
        z: .1
       },
       i = t.Utils.Molecule.getCentroidAndRadius(n.props.model, e.props.indices, r);
      this.scene.camera.focusOnPoint(r, i)
     }, n.prototype.focusMoleculeModelOnQuery = function(e) {
      var n = t.Utils.Molecule.getModelAndIndicesFromQuery(e.model, e.query);
      if (n && n.indices.length) {
       var r = {
         x: .1,
         y: .1,
         z: .1
        },
        i = t.Utils.Molecule.getCentroidAndRadius(n.model.props.model, n.indices, r);
       this.scene.camera.focusOnPoint(r, i)
      }
     }, n
    }();
    n.SceneWrapper = i
   }(n = t.Visualization || (t.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(e) {
     function t(e) {
      return e
     }
     e.create = t
    }(n = t.Style || (t.Style = {}));
    var r;
    ! function(t) {
     function n(t, n) {
      var r = t.colors || e.Immutable.Map();
      if (n.colors)
       for (var i = 0, o = Object.keys(n.colors); i < o.length; i++) {
        var a = o[i];
        r.set(a, n.colors[a])
       }
      var s = e.Utils.shallowClone(t);
      return s.colors = r, n.transparency && (s.transparency = n.transparency), void 0 !== n.interactive && (s.interactive = n.interactive), s
     }

     function r(e) {
      var t = new Map;
      return e.colors && e.colors.forEach(function(e, n) {
       return t.set(n, e)
      }), {
       colors: t,
       transparency: e.transparency,
       interactive: e.interactive,
       disableFog: e.disableFog
      }
     }
     t.mergeProps = n, t.getProps = r
    }(r = t.Theme || (t.Theme = {}))
   }(t = e.Visualization || (e.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     function r(e, t) {
      return function(n) {
       return t[e[n]]
      }
     }

     function i(e, n) {
      return function(i, o) {
       var a = t.Utils.Molecule.findModel(i).props.model,
        s = e(a),
        u = l.Theme.createPalleteMapping(r(s.index, s.property), n);
       return l.Theme.createMapping(u, o)
      }
     }

     function o(e, t) {
      return t && t.colors && t.colors.set("Bond", t.colors.get("Uniform")), l.Theme.createUniform(t)
     }

     function a(e, n, i) {
      return function(o, a) {
       var s = t.Utils.Molecule.findModel(o).props.model,
        u = e(s),
        c = l.Theme.createColorMapMapping(r(u.index, u.property), n, i);
       return l.Theme.createMapping(c, a)
      }
     }

     function s(e, t) {
      for (var n = e.residues.count, r = {
        r: new Float32Array(n),
        g: new Float32Array(n),
        b: new Float32Array(n)
       }, i = r.r, o = r.g, a = r.b, s = t(e), u = s.count, c = s.residueStartIndex, h = s.residueEndIndex, d = p.length - 1, f = l.Color.fromHex(0), m = 0; u > m; m++) {
       var g = c[m],
        v = h[m],
        y = v - g,
        b = y - 1;
       1 >= b && (b = 1);
       for (var w = 0; y > w; w++) {
        var x = d * w / b,
         _ = Math.floor(x),
         S = Math.ceil(x);
        l.Color.interpolate(p[_], p[S], x - _, f), i[g + w] = f.r, o[g + w] = f.g, a[g + w] = f.b
       }
      }
      return {
       r: i,
       g: o,
       b: a
      }
     }

     function u(e) {
      return function(n, r) {
       var i = t.Utils.Molecule.findModel(n).props.model,
        o = s(i, e),
        a = new h(i, o);
       return l.Theme.createMapping(a, r)
      }
     }
     var l = e.Visualization;
     n.UniformBaseColors = t.Immutable.Map({
      Uniform: l.Theme.Default.UniformColor,
      Highlight: l.Theme.Default.HighlightColor,
      Selection: l.Theme.Default.SelectionColor
     }), n.ModelVisualBaseColors = t.Immutable.Map({
      Bond: l.Molecule.Colors.DefaultBondColor,
      Highlight: l.Theme.Default.HighlightColor,
      Selection: l.Theme.Default.SelectionColor
     }), n.createPaletteThemeProvider = i, n.uniformThemeProvider = o, n.createColorMapThemeProvider = a;
     var c, h = function() {
       function e(e, t) {
        var n = t.r,
         r = t.g,
         i = t.b;
        this.residueIndex = e.atoms.residueIndex, this.r = n, this.g = r, this.b = i
       }
       return e.prototype.getProperty = function(e) {
        return this.residueIndex[e]
       }, e.prototype.setColor = function(e, t) {
        t.r = this.r[e], t.g = this.g[e], t.b = this.b[e]
       }, e
      }(),
      p = [l.Color.fromHex(13378048), l.Color.fromHex(13399808), l.Color.fromHex(13412864), l.Color.fromHex(52224), l.Color.fromHex(43724), l.Color.fromHex(204), l.Color.fromHex(8989394), l.Color.fromHex(12025059)],
      d = t.Immutable.Map({
       Bond: l.Molecule.Colors.DefaultBondColor,
       Highlight: l.Color.fromHex(16777215),
       Selection: l.Color.fromHex(9863168)
      });
     ! function(e) {
      e.Themes = [{
       name: "Chain ID",
       description: "Color the surface by Chain ID.",
       colors: n.ModelVisualBaseColors,
       provider: i(function(e) {
        return {
         index: e.atoms.residueIndex,
         property: e.residues.asymId
        }
       }, l.Molecule.Colors.DefaultPallete)
      }, {
       name: "Entity ID",
       description: "Color the surface by Entity ID.",
       colors: n.ModelVisualBaseColors,
       provider: i(function(e) {
        return {
         index: e.atoms.residueIndex,
         property: e.residues.entityId
        }
       }, l.Molecule.Colors.DefaultPallete)
      }, {
       name: "Entity Type",
       description: "Color the surface by Entity Type.",
       colors: n.ModelVisualBaseColors,
       provider: i(function(e) {
        return {
         index: e.atoms.entityIndex,
         property: e.entities.entityType
        }
       }, l.Molecule.Colors.DefaultPallete)
      }, {
       name: "Residue Name",
       description: "Color the surface by residue name.",
       colors: n.ModelVisualBaseColors,
       provider: i(function(e) {
        return {
         index: e.atoms.residueIndex,
         property: e.residues.name
        }
       }, l.Molecule.Colors.DefaultPallete)
      }, {
       name: "Element Symbol",
       description: "Color the surface by atom elemnt symbol.",
       colors: n.ModelVisualBaseColors,
       provider: a(function(e) {
        return {
         index: e.atoms.indices,
         property: e.atoms.elementSymbol
        }
       }, l.Molecule.Colors.DefaultElementColorMap, l.Molecule.Colors.DefaultElementColor)
      }, {
       name: "Rainbow (Chain)",
       description: "Color each chain using rainbow palette.",
       colors: d,
       provider: u(function(e) {
        return e.chains
       })
      }, {
       name: "Rainbow (Entity)",
       description: "Color each entity using rainbow palette.",
       colors: d,
       provider: u(function(e) {
        return e.entities
       })
      }, {
       name: "Uniform Color",
       description: "Same color everywhere.",
       colors: n.UniformBaseColors,
       provider: o
      }], e.CartoonThemeTemplate = e.Themes.filter(function(e) {
       return "Chain ID" === e.name
      })[0], e.ElementSymbolThemeTemplate = e.Themes.filter(function(e) {
       return "Element Symbol" === e.name
      })[0], e.SurfaceThemeTemplate = e.Themes.filter(function(e) {
       return "Uniform Color" === e.name
      })[0], e.UniformThemeTemplate = e.Themes.filter(function(e) {
       return "Uniform Color" === e.name
      })[0]
     }(c = n.Default || (n.Default = {}))
    }(r = n.Molecule || (n.Molecule = {}))
   }(n = t.Visualization || (t.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(e) {
    var t;
    ! function(e) {
     e.TypeDescriptions = {
      Cartoons: {
       label: "Cartoon",
       shortLabel: "Cartoon"
      },
      Calpha: {
       label: "C-α Trace",
       shortLabel: "C-α"
      },
      BallsAndSticks: {
       label: "Balls and Sticks",
       shortLabel: "B'n'S"
      },
      VDWBalls: {
       label: "VDW Balls",
       shortLabel: "VDW"
      },
      Surface: {
       label: "Surface",
       shortLabel: "Surface"
      }
     }, e.Types = ["Cartoons", "Calpha", "BallsAndSticks", "VDWBalls", "Surface"], e.DetailTypes = ["Automatic", "Very Low", "Low", "Medium", "High", "Very High"];
     var t;
     ! function(e) {
      e.DetailParams = {
       detail: "Automatic"
      }, e.BallsAndSticksParams = {
       useVDW: !0,
       vdwScaling: .22,
       atomRadius: .35,
       bondRadius: .09,
       detail: "Automatic"
      }, e.SurfaceParams = {
       probeRadius: 1.4,
       density: 1.1,
       smoothing: 6,
       isWireframe: !1
      }, e.Transparency = {
       alpha: 1,
       writeDepth: !1
      }, e.ForType = function() {
       for (var t = {
         Cartoons: {
          type: "Cartoons",
          params: {
           detail: "Automatic"
          },
          theme: {
           template: e.CartoonThemeTemplate,
           colors: e.CartoonThemeTemplate.colors,
           transparency: e.Transparency,
           interactive: !0
          }
         },
         Calpha: {
          type: "Calpha",
          params: {
           detail: "Automatic"
          },
          theme: {
           template: e.CartoonThemeTemplate,
           colors: e.CartoonThemeTemplate.colors,
           transparency: e.Transparency,
           interactive: !0
          }
         },
         BallsAndSticks: {
          type: "BallsAndSticks",
          params: e.BallsAndSticksParams,
          theme: {
           template: e.ElementSymbolThemeTemplate,
           colors: e.ElementSymbolThemeTemplate.colors,
           transparency: e.Transparency,
           interactive: !0
          }
         },
         VDWBalls: {
          type: "VDWBalls",
          params: {
           detail: "Automatic"
          },
          theme: {
           template: e.ElementSymbolThemeTemplate,
           colors: e.ElementSymbolThemeTemplate.colors,
           transparency: e.Transparency,
           interactive: !0
          }
         },
         Surface: {
          type: "Surface",
          params: e.SurfaceParams,
          theme: {
           template: e.SurfaceThemeTemplate,
           colors: e.SurfaceThemeTemplate.colors,
           transparency: {
            alpha: .33,
            writeDepth: !1
           },
           interactive: !0
          }
         }
        }, n = new Map, r = 0, i = Object.keys(t); r < i.length; r++) {
        var o = i[r];
        n.set(o, t[o])
       }
       return n
      }()
     }(t = e.Default || (e.Default = {}))
    }(t = e.Molecule || (e.Molecule = {}))
   }(t = e.Visualization || (e.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     function i(e, t) {
      if ("Automatic" === e) return 75e3 > t ? 3 : 25e4 > t ? 2 : 6e5 > t ? 1 : 0;
      var n = r.DetailTypes.indexOf(e) - 1;
      return Math.max(n, 0)
     }

     function o(e, t) {
      return {
       tessalation: e,
       drawingType: t ? f.Cartoons.CartoonsModelType.AlphaTrace : f.Cartoons.CartoonsModelType.Default
      }
     }

     function a(e, n) {
      if (!n.useVDW) return function(e) {
       return function() {
        return e
       }
      }(n.atomRadius);
      var r = t.Utils.vdwRadiusFromElementSymbol(e);
      return function(e, t) {
       return function(n) {
        return e * t(n)
       }
      }(n.vdwScaling, r)
     }

     function s(e, t, n) {
      return {
       tessalation: e,
       bondRadius: n.bondRadius,
       hideBonds: !1,
       atomRadius: a(t, n)
      }
     }

     function u(e, n) {
      return {
       tessalation: e,
       bondRadius: 0,
       hideBonds: !0,
       atomRadius: t.Utils.vdwRadiusFromElementSymbol(n)
      }
     }

     function l(e, n, r) {
      var a = t.Utils.Molecule.findModel(e).props.model,
       l = t.Entity.isMoleculeModel(e) ? e.props.model.atoms.indices : e.props.indices;
      if (!l.length) return void 0;
      var c = i(n.params.detail, l.length);
      switch (n.type) {
       case "Cartoons":
        return f.Cartoons.Model.create(e, {
         model: a,
         atomIndices: l,
         theme: r,
         queryContext: t.Utils.Molecule.findQueryContext(e),
         params: o(c, !1)
        });
       case "Calpha":
        return f.Cartoons.Model.create(e, {
         model: a,
         atomIndices: l,
         theme: r,
         queryContext: t.Utils.Molecule.findQueryContext(e),
         params: o(c, !0)
        });
       case "BallsAndSticks":
        return d.Molecule.BallsAndSticks.Model.create(e, {
         model: a,
         atomIndices: l,
         theme: r,
         params: s(c, a, n.params)
        });
       case "VDWBalls":
        return d.Molecule.BallsAndSticks.Model.create(e, {
         model: a,
         atomIndices: l,
         theme: r,
         params: u(c, a)
        });
       default:
        return void 0
      }
     }

     function c(e, i, o) {
      return t.Task.create("Visual (" + e.props.label + ")", o.computationType || "Normal", function(a) {
       var s = r.TypeDescriptions[o.type].label;
       a.update("Creating " + s + "..."), a.schedule(function() {
        var r = o.theme.template.provider(t.Utils.Molecule.findModel(e), n.Theme.getProps(o.theme)),
         u = l(e, o, r);
        if (!u) return a.reject("Invalid input parameters."), void 0;
        var c = u.run();
        c.progress.subscribe(function(e) {
         return a.update(s + ": " + t.Utils.formatProgress(e), e.requestAbort)
        }), c.result.then(function(e) {
         var n = t.Entity.Molecule.Visual.create(i, {
          label: s,
          model: e,
          style: o,
          isSelectable: !o.isNotSelectable
         });
         a.resolve(n)
        }).catch(a.reject)
       }, 0)
      })
     }

     function h(i, o, a) {
      return t.Task.create("Molecular Surface (" + i.props.label + ")", a.computationType || "Normal", function(s) {
       var u = t.Utils.Molecule.findModel(i).props.model,
        l = t.Entity.isMoleculeModel(i) ? i.props.model.atoms.indices : i.props.indices,
        c = a.params,
        h = r.TypeDescriptions[a.type].label,
        p = e.Core.Geometry.MolecularSurface.computeMolecularSurfaceAsync({
         positions: u.atoms,
         atomIndices: l,
         parameters: {
          atomRadius: t.Utils.vdwRadiusFromElementSymbol(u),
          density: c.density,
          probeRadius: c.probeRadius,
          smoothingIterations: 2 * c.smoothing,
          interactive: !0
         }
        }).run();
       p.progress.subscribe(function(e) {
        return s.update(h + ": " + t.Utils.formatProgress(e), e.requestAbort)
       }), p.result.then(function(r) {
        var u = a.theme.template.provider(t.Utils.Molecule.findModel(i), n.Theme.getProps(a.theme));
        s.update("Creating visual..."), s.schedule(function() {
         var n = e.Visualization.Surface.Model.create(i, {
          surface: r.surface,
          theme: u,
          parameters: {
           isWireframe: a.params.isWireframe
          }
         }).run();
         n.progress.subscribe(function(e) {
          return s.update(h + ": " + t.Utils.formatProgress(e), e.requestAbort)
         }), n.result.then(function(e) {
          var n = "Surface, " + t.Utils.round(c.probeRadius, 2) + " Å probe",
           r = t.Entity.Molecule.Visual.create(o, {
            label: n,
            model: e,
            style: a,
            isSelectable: !a.isNotSelectable
           });
          s.resolve(r)
         }).catch(s.reject)
        }, 0)
       }).catch(s.reject)
      })
     }

     function p(e, t, n) {
      return "Surface" === n.type ? h(e, t, n) : c(e, t, n)
     }
     var d = e.Visualization,
      f = e.Visualization.Molecule;
     r.create = p
    }(r = n.Molecule || (n.Molecule = {}))
   }(n = t.Visualization || (t.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     function i(t, n, r, i) {
      for (var o = r[0] - n[0], a = r[1] - n[1], s = r[2] - n[2], u = [n, [n[0] + o, n[1], n[2]],
        [n[0], n[1] + a, n[2]],
        [n[0], n[1], n[2] + s],
        [n[0] + o, n[1] + a, n[2]],
        [n[0] + o, n[1], n[2] + s],
        [n[0], n[1] + a, n[2] + s],
        [n[0] + o, n[1] + a, n[2] + s]
       ], l = t.dataDimensions.slice(0), c = [0, 0, 0], h = 0, p = u; h < p.length; h++)
       for (var d = p[h], f = (new e.Visualization.THREE.Vector3).fromArray(d).applyMatrix4(i), m = [f.x, f.y, f.z], g = 0; 3 > g; g++) l[g] = Math.max(0, Math.min(l[g], 0 | Math.floor(m[g]))), c[g] = Math.min(t.dataDimensions[g], Math.max(c[g], 0 | Math.ceil(m[g])));
      return {
       bottomLeft: l,
       topRight: c
      }
     }

     function o(o, s, u) {
      var l = "Background" === u.computationType ? o.props.label : "Density Surface (" + o.props.label + ")";
      return t.Task.create(l, u.computationType || "Normal", function(l) {
       var c = u.params,
        h = t.Tree.Node.findClosestNodeOfType(o, [t.Entity.Density.Data]);
       if (!h) return l.reject("Cannot create density visual on " + o.props.label), void 0;
       var p = h.props.data,
        d = p.basis,
        f = (new e.Visualization.THREE.Matrix4).set(d.x[0], d.y[0], d.z[0], 0, 0, d.y[1], d.z[1], 0, 0, 0, d.z[2], 0, 0, 0, 0, 1);
       f.setPosition(new e.Visualization.THREE.Vector3(p.origin[0], p.origin[1], p.origin[2]));
       var m, g, v = (new e.Visualization.THREE.Matrix4).getInverse(f);
       if (c.bottomLeft && c.topRight) {
        var y = i(p, c.bottomLeft, c.topRight, v);
        m = y.bottomLeft, g = y.topRight
       } else m = [0, 0, 0], g = p.dataDimensions;
       if (!(m[0] - g[0] && m[1] - g[1] && m[2] - g[2])) return l.reject({
        warn: !0,
        message: "Empty box."
       }), void 0;
       var b = void 0 === c.isoValueType || c.isoValueType === r.IsoValueType.Sigma,
        w = b ? p.valuesInfo.mean + p.valuesInfo.sigma * c.isoValue : c.isoValue,
        x = a.MarchingCubes.compute({
         isoLevel: w,
         scalarField: p.data,
         bottomLeft: m,
         topRight: g
        }).bind(function(e) {
         return a.Surface.transform(e, f.elements).bind(function(e) {
          return a.Surface.laplacianSmooth(e, c.smoothing)
         })
        }).run();
       x.progress.subscribe(function(e) {
        return l.update("Density Surface (" + h.props.label + "): " + t.Utils.formatProgress(e), e.requestAbort)
       }), x.result.then(function(r) {
        var i = u.theme.template.provider(h, n.Theme.getProps(u.theme));
        l.update("Creating visual..."), l.schedule(function() {
         var n = e.Visualization.Surface.Model.create(h, {
          surface: r,
          theme: i,
          parameters: {
           isWireframe: u.params.isWireframe
          }
         }).run();
         n.progress.subscribe(function(e) {
          return l.update("Density Surface (" + h.props.label + "): " + t.Utils.formatProgress(e), e.requestAbort)
         }), n.result.then(function(e) {
          var n = "Surface, " + t.Utils.round(c.isoValue, 2) + (b ? " σ" : ""),
           r = t.Entity.Density.Visual.create(s, {
            label: n,
            model: e,
            style: u,
            isSelectable: !u.isNotSelectable
           });
          l.resolve(r)
         }).catch(l.reject)
        }, 0)
       }).catch(l.reject)
      })
     }
     var a = e.Core.Geometry;
     r.create = o
    }(r = n.Density || (n.Density = {}))
   }(n = t.Visualization || (t.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(e) {
      e[e.Sigma = 0] = "Sigma", e[e.Absolute = 1] = "Absolute"
     }(r = n.IsoValueType || (n.IsoValueType = {}));
     var i;
     ! function(e) {
      function t(e) {
       var t = o.Theme.colors.set("Uniform", e.color);
       return {
        type: {},
        params: {
         isoValue: e.isoValue,
         isoValueType: e.isoValueType,
         smoothing: 1,
         isWireframe: !!e.isWireframe
        },
        theme: {
         template: o.Theme,
         colors: t,
         transparency: e.transparency ? e.transparency : o.Transparency,
         interactive: !1,
         disableFog: !!e.disableFog
        }
       }
      }
      e.create = t
     }(i = n.Style || (n.Style = {}));
     var o;
     ! function(n) {
      function i(e, t) {
       return o.Theme.createUniform(t)
      }
      n.Params = {
       isoValue: 0,
       isoValueType: r.Sigma,
       smoothing: 1,
       isWireframe: !1
      };
      var o = e.Visualization,
       a = t.Immutable.Map({
        Uniform: o.Theme.Default.UniformColor,
        Highlight: o.Theme.Default.HighlightColor,
        Selection: o.Theme.Default.SelectionColor
       });
      n.Themes = [{
       name: "Uniform Color",
       description: "Same color everywhere.",
       colors: a,
       provider: i
      }], n.Transparency = {
       alpha: 1,
       writeDepth: !1
      }, n.Theme = n.Themes[0], n.Style = {
       type: {},
       params: n.Params,
       theme: {
        template: n.Theme,
        colors: n.Theme.colors,
        transparency: n.Transparency,
        interactive: !1,
        disableFog: !1
       }
      }
     }(o = n.Default || (n.Default = {}))
    }(r = n.Density || (n.Density = {}))
   }(n = t.Visualization || (t.Visualization = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e, t) {
     return e.type.info.typeClass === t
    }

    function r(e, t) {
     return e.info.typeClass === t
    }

    function i(t, n) {
     return new o(e.Utils.generateUUID(), t, n ? n : {})
    }
    t.isClass = n, t.isTypeClass = r, t.RootClass = "Root", t.GroupClass = "Group", t.DataClass = "Data", t.ObjectClass = "Object", t.VisualClass = "Visual", t.SelectionClass = "Selection", t.ActionClass = "Action", t.BehaviourClass = "Behaviour";
    var o = function() {
     function t(e, t, n) {
      this.id = e, this.info = t, this.traits = n
     }
     return t.prototype.create = function(t, n) {
      var r = {
       id: e.Tree.Node.createId(),
       version: 0,
       index: 0,
       ref: "undefined",
       tag: void 0,
       tree: void 0,
       props: n,
       state: {
        isCollapsed: !1,
        visibility: 0
       },
       isHidden: !1,
       transform: t,
       parent: void 0,
       children: [],
       type: this
      };
      return e.Tree.Node.update(r)
     }, t
    }();
    t.create = i
   }(t = e.Entity || (e.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(t) {
     t.tree && (e.Event.Tree.NodeUpdated.dispatch(t.tree.context, t), t.tree.context.currentEntity === t && e.Event.Entity.CurrentChanged.dispatch(t.tree.context, t))
    }

    function r(t) {
     var r = {
      isCollapsed: !t.state.isCollapsed
     };
     e.Tree.Node.withState(t, r), n(t)
    }

    function i(t) {
     var r = t.tree.context.currentEntity;
     if (!(r === t || t && t.isHidden)) {
      for (var i = t.parent; i.parent !== i;) {
       if (i.isHidden) return;
       i = i.parent
      }
      t.tree.context.currentEntity = t, r && (e.Tree.Node.update(r), n(r)), t && (e.Tree.Node.update(t), n(t)), e.Event.Entity.CurrentChanged.dispatch(t.tree.context, t), r && e.Tree.updatePath(r), e.Tree.updatePath(t.parent)
     }
    }

    function o(t) {
     if (t) {
      for (var r = 0, i = 0, a = 0, s = t.children; a < s.length; a++) {
       var u = s[a],
        l = u.state.visibility;
       0 === l ? r++ : 2 === l && i++
      }
      var c;
      if (c = r === t.children.length ? 0 : i === t.children.length ? 2 : 1, c !== t.state.visibility) {
       var l = {
        visibility: c
       };
       e.Tree.Node.withState(t, l), n(t)
      }
      t.parent !== t && o(t.parent)
     }
    }

    function a(t, r) {
     if (t) {
      var i = r ? 0 : 2;
      e.Tree.Node.forEach(t, function(t) {
       var r = t.state.visibility;
       if (r !== i) {
        var o = {
         visibility: i
        };
        e.Tree.Node.withState(t, o), n(t)
       }
      }), o(t.parent)
     }
    }
    t.nodeUpdated = n, t.toggleExpanded = r, t.setCurrent = i, t.updateVisibilityState = o, t.setVisibility = a
   }(t = e.Entity || (e.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e) {
     return e && e.type === u.Molecule
    }

    function r(e) {
     return e && e.type === u.Model
    }

    function i(e) {
     return e && e.type === u.Selection
    }

    function o(e) {
     return e && e.type.info.typeClass === t.VisualClass
    }
    t.isMolecule = n, t.isMoleculeModel = r, t.isMoleculeSelection = i, t.isVisual = o, t.RootTransform = e.Tree.Transform.create({}, {}, void 0), t.Root = t.create({
     name: "Root",
     typeClass: "Root",
     shortName: "R",
     description: "Where everything begins."
    }), t.Group = t.create({
     name: "Group",
     typeClass: "Group",
     shortName: "G",
     description: "A group on entities."
    }), t.Action = t.create({
     name: "Action",
     typeClass: "Action",
     shortName: "A",
     description: "Represents an action performed on the entity tree."
    });
    var a;
    ! function(e) {
     e.Types = ["String", "Binary"], e.String = t.create({
      name: "String Data",
      typeClass: "Data",
      shortName: "S_D",
      description: "A string."
     }), e.Binary = t.create({
      name: "Binary Data",
      typeClass: "Data",
      shortName: "B_D",
      description: "A binary blob."
     }), e.CifDictionary = t.create({
      name: "Cif Dictionary",
      typeClass: "Data",
      shortName: "CD",
      description: "Represents parsed CIF data."
     }), e.Json = t.create({
      name: "JSON Data",
      typeClass: "Data",
      shortName: "JS_D",
      description: "Represents JSON data."
     })
    }(a = t.Data || (t.Data = {}));
    var s;
    ! function(e) {
     e.Surface = t.create({
      name: "Surface Visual",
      typeClass: "Visual",
      shortName: "V_S",
      description: "A surface visual."
     }, {
      isFocusable: !0
     })
    }(s = t.Visual || (t.Visual = {}));
    var u;
    ! function(e) {
     e.Molecule = t.create({
      name: "Molecule",
      typeClass: "Object",
      shortName: "M",
      description: "A molecule that might contain one or more models."
     }), e.Model = t.create({
      name: "Molecule Model",
      typeClass: "Object",
      shortName: "M_M",
      description: "A model of a molecule."
     }), e.Selection = t.create({
      name: "Molecule Model Selection",
      typeClass: "Selection",
      shortName: "S_M",
      description: "A selection of atoms."
     }, {
      isFocusable: !0
     }), e.Visual = t.create({
      name: "Molecule Visual",
      typeClass: "Visual",
      shortName: "V_M",
      description: "A visual of a molecule."
     }, {
      isFocusable: !0
     });
     var n;
     ! function(e) {
      e.Behaviour = t.create({
       name: "Coordinate Streaming",
       typeClass: "Behaviour",
       shortName: "CS",
       description: "Behaviour that downloads surrounding residues when an atom or residue is selected."
      })
     }(n = e.CoordinateStreaming || (e.CoordinateStreaming = {}))
    }(u = t.Molecule || (t.Molecule = {}));
    var l;
    ! function(e) {
     e.Data = t.create({
      name: "Density Data",
      typeClass: "Object",
      shortName: "DD",
      description: "Density data."
     }), e.Visual = t.create({
      name: "Density Visual",
      typeClass: "Visual",
      shortName: "V_DD",
      description: "A visual of density data."
     }, {
      isFocusable: !0
     }), e.InteractiveSurface = t.create({
      name: "Interactive Surface",
      typeClass: "Behaviour",
      shortName: "B_IS",
      description: "Behaviour that creates an interactive surface when an atom or residue is selected."
     })
    }(l = t.Density || (t.Density = {}))
   }(t = e.Entity || (e.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t(t) {
      var n = this;
      this.data = new Map, e.Event.Tree.NodeRemoved.getStream(t).subscribe(function(e) {
       return n.data.delete(e.data.id)
      })
     }
     return t.prototype.get = function(e, t) {
      var n = this.data.get(e.id);
      return n ? n[t] : void 0
     }, t.prototype.set = function(e, t, n) {
      var r = this.data.get(e.id);
      return r ? r[t] = n : this.data.set(e.id, (i = {}, i[t] = n, i)), n;
      var i
     }, t
    }();
    t.Cache = n,
     function(e) {
      var t;
      ! function(e) {
       e.QueryContext = "queryContext"
      }(t = e.Keys || (e.Keys = {}))
     }(n = t.Cache || (t.Cache = {}))
   }(t = e.Entity || (e.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r;
     ! function(n) {
      function r(t, r) {
       return i.create(t, function(i, o, a) {
        return e.Task.create(t.name, "Background", function(s) {
         var u = n.CreateGroup.create({
          label: t.name
         }).apply(i, o);
         u.run(i).then(function(t) {
          var n = r.map(function(n) {
           return function() {
            return e.Task.guardedPromise(i, function(e, r) {
             var s = n.params(a.params, o);
             if (!s) return e(void 0), void 0;
             var u = n.transformer.create(s, {
              isBinding: !0
             });
             u.apply(i, t).run(i).then(function(t) {
              e(t)
             }).catch(r)
            })
           }
          });
          e.Task.sequencePromises(n, !0).then(function() {
           s.resolve(t)
          }).catch(s.reject)
         })
        })
       })
      }
      var i = e.Tree.Transformer;
      n.Root = i.create({
       id: "root",
       name: "Root",
       description: "A transformer that always returns itself.",
       from: [t.Root],
       to: [t.Root],
       validateParams: function() {
        return void 0
       },
       defaultParams: function() {
        return {}
       }
      }, function(t, n) {
       return e.Task.resolve("Root", "Silent", n)
      }), n.Fail = i.create({
       id: "fail",
       name: "Fail",
       description: "A transform that always fails.",
       from: [],
       to: [],
       validateParams: function() {
        return void 0
       },
       defaultParams: function() {
        return {
         title: "Error",
         message: "Unknown error."
        }
       }
      }, function(t, n, r) {
       return e.Task.reject(r.params.title, "Background", r.params.message)
      }), n.CreateGroup = i.create({
       id: "create-group",
       name: "Create Group",
       description: "A transformer that always returns itself.",
       from: [],
       to: [t.Group],
       validateParams: function() {
        return void 0
       },
       defaultParams: function() {
        return {}
       }
      }, function(n, r, i) {
       var o = t.Group.create(i, {
        label: i.params.label ? i.params.label : "Group",
        description: i.params.description
       });
       if (i.params.isCollapsed) {
        var a = {
         isCollapsed: !0
        };
        o = e.Tree.Node.withState(o, a)
       }
       return e.Task.resolve("Group", "Silent", o)
      }), n.group = r
     }(r = n.Basic || (n.Basic = {}))
    }(n = t.Transformer || (t.Transformer = {}))
   }(t = e.Entity || (e.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i;
     ! function(i) {
      function o(o) {
       return t.Tree.Transformer.action({
        id: "molecule-download-molecule-" + o.sourceId,
        name: "Molecule from " + o.name,
        description: o.description,
        from: [n.Root],
        to: [n.Action],
        defaultParams: function() {
         return {
          id: o.defaultId,
          format: e.Core.Formats.Molecule.SupportedFormats.mmCIF
         }
        },
        validateParams: function(e) {
         return e.id && e.id.trim().length ? void 0 : ["Enter " + (o.isFullUrl ? "URL" : "Id")]
        }
       }, function(e, n, a) {
        var s = o.specificFormat ? o.specificFormat : a.params.format;
        return t.Tree.Transform.build().add(n, r.Data.Download, {
         url: o.urlTemplate(a.params.id.trim()),
         type: s.isBinary ? "Binary" : "String",
         id: a.params.id,
         description: o.name,
         title: "Molecule"
        }).then(i.CreateFromData, {
         format: o.specificFormat ? o.specificFormat : a.params.format
        }, {
         isBinding: !0
        }).then(i.CreateModel, {
         modelIndex: 0
        }, {
         isBinding: !1
        })
       })
      }
      i.downloadMoleculeSource = o, i.OpenMoleculeFromFile = t.Tree.Transformer.action({
       id: "molecule-open-from-file",
       name: "Molecule from File",
       description: "Open a molecule from a file (" + e.Core.Formats.Molecule.SupportedFormats.All.map(function(e) {
        return e.name
       }).join(", ") + ").",
       from: [n.Root],
       to: [n.Action],
       defaultParams: function() {
        return {
         file: void 0
        }
       },
       validateParams: function(t) {
        return t.file ? e.Core.Formats.FormatInfo.getFormat(t.file.name, e.Core.Formats.Molecule.SupportedFormats.All) ? void 0 : ["Select a supported file format (" + [].concat(e.Core.Formats.Molecule.SupportedFormats.All.map(function(e) {
         return e.extensions
        })).join(", ") + ")."] : ["Select a file"]
       }
      }, function(n, o, a) {
       var s = e.Core.Formats.FormatInfo.getFormat(a.params.file.name, e.Core.Formats.Molecule.SupportedFormats.All);
       return t.Tree.Transform.build().add(o, r.Data.OpenFile, {
        file: a.params.file,
        type: s.isBinary ? "Binary" : "String"
       }).then(i.CreateFromData, {
        format: s
       }, {
        isBinding: !0
       }).then(i.CreateModel, {
        modelIndex: 0
       }, {
        isBinding: !1
       })
      }), i.CreateFromData = t.Tree.Transformer.create({
       id: "molecule-create-from-data",
       name: "Molecule",
       description: "Create a molecule from string or binary data.",
       from: [n.Data.String, n.Data.Binary],
       to: [n.Molecule.Molecule],
       defaultParams: function() {
        return {
         format: e.Core.Formats.Molecule.SupportedFormats.mmCIF
        }
       }
      }, function(e, r, i) {
       return t.Task.fromComputation("Create Molecule (" + r.props.label + ")", "Normal", i.params.format.parse(r.props.data, {
        id: i.params.customId
       })).setReportTime(!0).bind("Create Molecule (" + r.props.label + ")", "Silent", function(o) {
        if (o.isError) return t.Task.reject("Create Molecule (" + r.props.label + ")", "Background", o.toString());
        if (o.warnings && o.warnings.length > 0)
         for (var a = 0, s = o.warnings; a < s.length; a++) {
          var u = s[a];
          e.logger.warning(u)
         }
        var l = n.Molecule.Molecule.create(i, {
         label: o.result.id,
         molecule: o.result
        });
        return t.Task.resolve("Create Molecule (" + r.props.label + ")", "Background", l)
       })
      }), i.CreateFromMmCif = t.Tree.Transformer.create({
       id: "molecule-create-from-mmcif",
       name: "Molecule",
       description: "Create a molecule from a mmCIF data block.",
       from: [n.Data.CifDictionary],
       to: [n.Molecule.Molecule],
       defaultParams: function() {
        return {
         blockIndex: 0
        }
       }
      }, function(r, i, o) {
       return t.Task.create("Create Molecule (" + i.props.label + ")", "Normal", function(t) {
        t.update("Creating...");
        var r = 0 | o.params.blockIndex,
         a = i.props.dictionary.dataBlocks[r];
        return a ? (t.schedule(function() {
         var r = e.Core.Formats.Molecule.mmCIF.ofDataBlock(a);
         t.resolve(n.Molecule.Molecule.create(o, {
          label: r.id,
          molecule: r
         }))
        }), void 0) : (t.reject("The source contains only " + i.props.dictionary.dataBlocks.length + " data block(s), tried to access the " + (r + 1) + "-th."), void 0)
       }).setReportTime(!0)
      }), i.CreateModel = t.Tree.Transformer.create({
       id: "molecule-create-model",
       name: "Model",
       description: "Create a model of a molecule.",
       from: [n.Molecule.Molecule],
       to: [n.Molecule.Model],
       isUpdatable: !0,
       defaultParams: function() {
        return {
         modelIndex: 0
        }
       }
      }, function(e, r, i) {
       return t.Task.create("Create Model (" + r.props.label + ")", "Background", function(e) {
        var t = i.params,
         o = 0 | t.modelIndex,
         a = r.props.molecule.models[o];
        return a ? (e.resolve(n.Molecule.Model.create(i, {
         label: "Model " + a.modelId,
         description: a.atoms.count + " atom" + (1 !== a.atoms.count ? "s" : ""),
         model: a
        })), void 0) : (e.reject("The molecule contains only " + r.props.molecule.models.length + " model(s), tried to access the " + (o + 1) + "-th."), void 0)
       })
      }), i.CreateSelection = t.Tree.Transformer.create({
       id: "molecule-create-selection",
       name: "Selection",
       description: "Create an atom selection.",
       from: [n.Molecule.Model, n.Molecule.Visual],
       to: [n.Molecule.Selection],
       isUpdatable: !0,
       defaultParams: function(e) {
        return {
         queryString: e.settings.get("molecule.model.defaultQuery") || ""
        }
       },
       validateParams: function(t) {
        if (!(t.queryString || "").trim().length) return ["Enter query"];
        try {
         {
          e.Core.Structure.Query.Builder.toQuery(t.queryString)
         }
         return void 0
        } catch (n) {
         return ["" + n]
        }
       }
      }, function(r, i, o) {
       return t.Task.create("Create Selection (" + i.props.label + ")", "Background", function(r) {
        var a = o.params,
         s = e.Core.Structure.Query.Builder.toQuery(a.queryString),
         u = o.params.inFullContext ? t.Utils.Molecule.findModel(i).props.model.queryContext : t.Utils.Molecule.findQueryContext(i),
         l = s(u).unionAtomIndices();
        return l.length ? (r.resolve(n.Molecule.Selection.create(o, {
         label: a.name ? a.name : "Selection",
         description: l.length + " atom" + (1 !== l.length ? "s" : ""),
         indices: l
        })), void 0) : (r.reject({
         warn: !0,
         message: "Empty selection" + (o.params.name ? " (" + o.params.name + ")" : "") + "."
        }), void 0)
       }).setReportTime(!o.params.silent)
      }), i.CreateSelectionFromQuery = t.Tree.Transformer.create({
       id: "molecule-create-selection",
       name: "Selection",
       description: "Create an atom selection.",
       from: [n.Molecule.Model, n.Molecule.Visual],
       to: [n.Molecule.Selection],
       defaultParams: function() {
        return void 0
       }
      }, function(r, i, o) {
       return t.Task.create("Create Selection (" + i.props.label + ")", "Background", function(r) {
        var a = o.params,
         s = e.Core.Structure.Query.Builder.toQuery(a.query),
         u = o.params.inFullContext ? t.Utils.Molecule.findModel(i).props.model.queryContext : t.Utils.Molecule.findQueryContext(i),
         l = s(u).unionAtomIndices();
        return l.length ? (r.resolve(n.Molecule.Selection.create(o, {
         label: a.name ? a.name : "Selection",
         description: l.length + " atom" + (1 !== l.length ? "s" : ""),
         indices: l
        })), void 0) : (r.reject({
         warn: !0,
         message: "Empty selection" + (o.params.name ? " (" + o.params.name + ")" : "") + "."
        }), void 0)
       }).setReportTime(!o.params.silent)
      }), i.CreateAssembly = t.Tree.Transformer.create({
       id: "molecule-create-assemly",
       name: "Assembly",
       description: "Create an assembly of a molecule.",
       from: [n.Molecule.Model],
       to: [n.Molecule.Model],
       defaultParams: function(e, n) {
        var r = t.Utils.Molecule.findModel(n),
         i = {
          name: e.settings.get("molecule.model.defaultAssemblyName") || "1"
         },
         o = r.props.model.assemblyInfo;
        return o && o.assemblies.length ? o.assemblies.filter(function(e) {
         return e.name === i.name
        }) ? i : (i.name = o.assemblies[0].name, i) : i
       },
       isUpdatable: !0,
       isApplicable: function(e) {
        return !!(e && e.props.model.assemblyInfo && e.props.model.assemblyInfo.assemblies.length)
       }
      }, function(r, i, o) {
       return t.Task.create("Create Model (" + i.props.label + ")", "Background", function(t) {
        var r = i.props.model.assemblyInfo;
        if (!r || !r.assemblies.length) return t.reject("Assembly info not available."), void 0;
        var a = r.assemblies.filter(function(e) {
         return e.name === o.params.name
        })[0];
        return a ? (t.update("Creating..."), t.schedule(function() {
         var r = e.Core.Structure.buildAssembly(i.props.model, a);
         t.resolve(n.Molecule.Model.create(o, {
          label: "Assembly " + a.name,
          description: r.atoms.count + " atom" + (1 !== r.atoms.count ? "s" : ""),
          model: r
         }))
        }), void 0) : (t.reject("No assembly called '" + o.params.name + "' found."), void 0)
       })
      }), i.CreateSymmetryMates = t.Tree.Transformer.create({
       id: "molecule-create-symmetry-mates",
       name: "Crystal Symmetry",
       description: "Find crystal symmetry mates or interaction partners.",
       from: [n.Molecule.Model],
       to: [n.Molecule.Model],
       defaultParams: function() {
        return {
         type: "Interaction",
         radius: 5
        }
       },
       isUpdatable: !0,
       isApplicable: function(e) {
        return !(!e || !e.props.model.symmetryInfo)
       }
      }, function(r, i, o) {
       return t.Task.create("Create Model (" + i.props.label + ")", "Background", function(r) {
        var a = i.props.model.symmetryInfo;
        if (!a) return r.reject("Spacegroup info info not available."), void 0;
        var s = Math.max(o.params.radius, 0);
        r.update("Creating..."), r.schedule(function() {
         var a = "Mates" === o.params.type ? e.Core.Structure.buildSymmetryMates(i.props.model, s) : e.Core.Structure.buildPivotGroupSymmetry(i.props.model, s);
         r.resolve(n.Molecule.Model.create(o, {
          label: "Symmetry",
          model: a,
          description: a.atoms.count + " atom" + (1 !== a.atoms.count ? "s" : "") + ", " + o.params.type + " " + t.Utils.round(s, 1) + " Å"
         }))
        })
       })
      }), i.ModelTransform3D = t.Tree.Transformer.create({
       id: "molecule-model-transform3d",
       name: "Transform 3D",
       description: "Transform 3D coordinates of a model using a 4x4 matrix.",
       from: [n.Molecule.Model],
       to: [n.Molecule.Model],
       validateParams: function(e) {
        return e && e.transform && 16 === e.transform.length ? void 0 : ["Specify a 4x4 transform matrix."]
       },
       defaultParams: function() {
        return {
         transform: e.Core.Geometry.LinearAlgebra.Matrix4.identity()
        }
       },
       isUpdatable: !1
      }, function(r, i, o) {
       return t.Task.create("Transform 3D (" + i.props.label + ")", "Normal", function(t) {
        t.update("Transforming..."), t.schedule(function() {
         var r = i.props.model,
          a = {
           t: o.params.transform,
           v: {
            x: 0,
            y: 0,
            z: 0
           }
          },
          s = e.Core.Structure.MoleculeModel.withTransformedXYZ(r, a, function(t, n, r, i, o) {
           var a = t.v;
           a.x = n, a.y = r, a.z = i, e.Core.Geometry.LinearAlgebra.Matrix4.transformVector3(o, a, t.t)
          });
         t.resolve(n.Molecule.Model.create(o, {
          label: i.props.label,
          description: o.params.description ? o.params.description : "Transformed",
          model: s
         }))
        })
       })
      }), i.CreateVisual = t.Tree.Transformer.create({
       id: "molecule-create-visual",
       name: "Visual",
       description: "Create a visual of a molecule or a selection.",
       from: [n.Molecule.Model, n.Molecule.Selection],
       to: [n.Molecule.Visual],
       isUpdatable: !0,
       defaultParams: function() {
        return {
         style: t.Visualization.Molecule.Default.ForType.get("Cartoons")
        }
       },
       validateParams: function(e) {
        return e.style ? void 0 : ["Specify Style"]
       },
       customController: function(e, n, r) {
        return new t.Components.Transform.MoleculeVisual(e, n, r)
       }
      }, function(e, n, r) {
       var i = r.params;
       return t.Visualization.Molecule.create(n, r, i.style).setReportTime("Normal" === r.params.style.computationType)
      }, function(e, r, i) {
       var o = r.transform.params;
       if (o.style.type !== i.params.style.type || !t.Utils.deepEqual(o.style.params, i.params.style.params)) return void 0;
       var a = r.props.model;
       if (!a) return void 0;
       var s = t.Utils.Molecule.findModel(r.parent);
       if (!s) return void 0;
       var u = i.params.style.theme,
        l = u.template.provider(s, t.Visualization.Theme.getProps(u));
       return a.applyTheme(l), r.props.style = i.params.style, n.nodeUpdated(r), t.Task.resolve(i.transformer.info.name, "Background", t.Tree.Node.Null)
      }), i.CreateMacromoleculeVisual = t.Tree.Transformer.create({
       id: "molecule-create-macromolecule-visual",
       name: "Macromolecule Visual",
       description: "Create a visual of a molecule that is split into polymer, HET, and water parts.",
       from: [n.Molecule.Model],
       to: [n.Action],
       validateParams: function(e) {
        return e.polymer || e.het || e.water ? void 0 : ["Select at least one component"]
       },
       defaultParams: function() {
        return {
         polymer: !0,
         het: !0,
         water: !0
        }
       }
      }, function(n, o, a) {
       return t.Task.create("Macromolecule", "Normal", function(s) {
        var u = t.Tree.Transform.build().add(o, r.Basic.CreateGroup, {
         label: "Group",
         description: "Macromolecule"
        }, {
         ref: a.params.groupRef
        });
        if (a.params.polymer) {
         var l = u.then(i.CreateSelectionFromQuery, {
          query: e.Core.Structure.Query.nonHetPolymer(),
          name: "Polymer",
          silent: !0
         }, {
          isBinding: !0
         });
         l.then(i.CreateVisual, {
          style: t.Visualization.Molecule.Default.ForType.get("Cartoons")
         }, {
          ref: a.params.polymerRef
         })
        }
        if (a.params.het) {
         var c = u.then(i.CreateSelectionFromQuery, {
          query: e.Core.Structure.Query.hetGroups(),
          name: "HET",
          silent: !0
         }, {
          isBinding: !0
         });
         c.then(i.CreateVisual, {
          style: t.Visualization.Molecule.Default.ForType.get("BallsAndSticks")
         }, {
          ref: a.params.hetRef
         })
        }
        if (a.params.water) {
         var h = {
           type: "BallsAndSticks",
           params: {
            useVDW: !1,
            atomRadius: .23,
            bondRadius: .09,
            detail: "Automatic"
           },
           theme: {
            template: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate,
            colors: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors,
            transparency: {
             alpha: .25
            }
           }
          },
          p = u.then(i.CreateSelectionFromQuery, {
           query: e.Core.Structure.Query.entities({
            type: "water"
           }),
           name: "Water",
           silent: !0
          }, {
           isBinding: !0
          });
         p.then(i.CreateVisual, {
          style: h
         }, {
          ref: a.params.waterRef
         })
        }
        t.Tree.Transform.apply(n, u).run(n).then(function() {
         return s.resolve(t.Tree.Node.Null)
        }).catch(s.reject)
       })
      })
     }(i = r.Molecule || (r.Molecule = {}))
    }(r = n.Transformer || (n.Transformer = {}))
   }(n = t.Entity || (t.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i;
     ! function(r) {
      function i(e) {
       return void 0 === e || null === e ? "String" : "binary" === e.toLowerCase() ? "Binary" : "String"
      }

      function o(e) {
       var n = void 0 === e ? t.Utils.DataCompressionMethod.None : e;
       return n !== t.Utils.DataCompressionMethod.None
      }
      r.Download = t.Tree.Transformer.create({
       id: "data-download",
       name: "Download Data",
       description: "Downloads a string or binary data from the given URL (if the host server supports cross domain requests).",
       from: [n.Root],
       to: [n.Data.String, n.Data.Binary],
       validateParams: function(e) {
        return e.url && e.url.trim().length ? e.type ? "String" === e.type && o(e.responseCompression) ? ["Decompression is only available for Binary data."] : void 0 : ["Specify type"] : ["Enter URL"]
       },
       defaultParams: function() {
        return {
         id: "",
         description: "",
         type: "String",
         url: "",
         responseCompression: t.Utils.DataCompressionMethod.None
        }
       }
      }, function(e, r, o) {
       var a = o.params;
       return t.Utils.ajaxGet({
        url: a.url,
        type: i(a.type),
        compression: a.responseCompression,
        title: a.title
       }).setReportTime(!0).map("ToEntity", "Child", function(e) {
        return "String" === a.type ? n.Data.String.create(o, {
         label: a.id ? a.id : a.url,
         description: a.description,
         data: e
        }) : n.Data.Binary.create(o, {
         label: a.id ? a.id : a.url,
         description: a.description,
         data: e
        })
       })
      }), r.OpenFile = t.Tree.Transformer.create({
       id: "data-open-file",
       name: "Open Data File",
       description: "Read a string or binary data from the selected file.",
       from: [n.Root],
       to: [n.Data.String, n.Data.Binary],
       validateParams: function(e) {
        return e.file ? void 0 : ["Select a file"]
       },
       defaultParams: function() {
        return {
         type: "String",
         file: void 0
        }
       }
      }, function(e, r, o) {
       var a = o.params;
       return t.Utils.readFromFile(a.file, i(a.type)).setReportTime(!0).map("ToEntity", "Child", function(e) {
        return "String" === a.type ? n.Data.String.create(o, {
         label: a.id ? a.id : a.file.name,
         description: a.description,
         data: e
        }) : n.Data.Binary.create(o, {
         label: a.id ? a.id : a.file.name,
         description: a.description,
         data: e
        })
       })
      }), r.ParseCif = t.Tree.Transformer.create({
       id: "data-parse-cif",
       name: "CIF Dictionary",
       description: "Parse CIF dictionary from a string.",
       from: [n.Data.String],
       to: [n.Data.CifDictionary],
       defaultParams: function() {
        return {}
       }
      }, function(r, i, o) {
       return t.Task.create("CIF Parse (" + i.props.label + ")", "Normal", function(t) {
        t.update("Parsing..."), t.schedule(function() {
         var r = e.Core.Formats.CIF.Text.parse(i.props.data);
         return r.isError ? (t.reject(r.toString()), void 0) : (t.resolve(n.Data.CifDictionary.create(o, {
          label: o.params.id ? o.params.id : "CIF Dictionary",
          description: o.params.description,
          dictionary: r.result
         })), void 0)
        })
       }).setReportTime(!0)
      }), r.ParseBinaryCif = t.Tree.Transformer.create({
       id: "data-parse-binary-cif",
       name: "CIF Dictionary",
       description: "Parse CIF dictionary from BinaryCIF data.",
       from: [n.Data.Binary],
       to: [n.Data.CifDictionary],
       defaultParams: function() {
        return {}
       }
      }, function(r, i, o) {
       return t.Task.create("BinaryCIF Parse (" + i.props.label + ")", "Normal", function(t) {
        t.update("Parsing..."), t.schedule(function() {
         var r = e.Core.Formats.CIF.Binary.parse(i.props.data);
         return r.isError ? (t.reject(r.toString()), void 0) : (t.resolve(n.Data.CifDictionary.create(o, {
          label: o.params.id ? o.params.id : "CIF Dictionary",
          description: o.params.description,
          dictionary: r.result
         })), void 0)
        })
       }).setReportTime(!0)
      }), r.ParseJson = t.Tree.Transformer.create({
       id: "data-parse-json",
       name: "JSON",
       description: "Parse a string to JSON object.",
       from: [n.Data.String],
       to: [n.Data.Json],
       defaultParams: function() {
        return {}
       }
      }, function(e, r, i) {
       return t.Task.create("JSON Parse (" + r.props.label + ")", "Normal", function(e) {
        e.update("Parsing..."), e.schedule(function() {
         var t = JSON.parse(r.props.data);
         e.resolve(n.Data.Json.create(i, {
          label: i.params.id ? i.params.id : "JSON Data",
          description: i.params.description,
          data: t
         }))
        })
       }).setReportTime(!0)
      }), r.FromData = t.Tree.Transformer.create({
       id: "data-from-data",
       name: "From Data",
       description: "Creates a data entity from string or binary data",
       from: [n.Root],
       to: [n.Data.String, n.Data.Binary],
       defaultParams: function() {
        return void 0
       }
      }, function(e, r, i) {
       var o = i.params.data,
        a = o instanceof ArrayBuffer ? n.Data.Binary.create(i, {
         label: i.params.id ? i.params.id : "Binary Data",
         description: i.params.description,
         data: o
        }) : n.Data.String.create(i, {
         label: i.params.id ? i.params.id : "String Data",
         description: i.params.description,
         data: o
        });
       return t.Task.resolve("From Data", "Silent", a)
      })
     }(i = r.Data || (r.Data = {}))
    }(r = n.Transformer || (n.Transformer = {}))
   }(n = t.Entity || (t.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i;
     ! function(r) {
      r.ParseData = t.Tree.Transformer.create({
       id: "density-parse-binary",
       name: "Density Data",
       description: "Parse density from binary data.",
       from: [n.Data.String, n.Data.Binary],
       to: [n.Density.Data],
       isUpdatable: !0,
       defaultParams: function() {
        return {
         format: e.Core.Formats.Density.SupportedFormats.CCP4,
         normalize: !1
        }
       }
      }, function(e, r, i) {
       return t.Task.fromComputation("Parse Density (" + r.props.label + ")", "Normal", i.params.format.parse(r.props.data)).setReportTime(!0).bind("Create Density (" + r.props.label + ")", "Silent", function(e) {
        if (e.isError) return t.Task.reject("Create Density (" + r.props.label + ")", "Background", e.toString());
        i.params.normalize && e.result.normalize();
        var o = n.Density.Data.create(i, {
         label: i.params.id ? i.params.id : "Density Data",
         data: e.result,
         description: i.params.normalize ? "Normalized" : ""
        });
        return t.Task.resolve("Create Density (" + r.props.label + ")", "Background", o)
       })
      }, function(r, i, o) {
       return i.props.data.isNormalized === o.params.normalize ? t.Task.resolve("Density", "Background", t.Tree.Node.Null) : t.Task.create("Update Density", "Normal", function(t) {
        t.update("Updating..."), t.schedule(function() {
         var r = i.props.data;
         r.isNormalized ? e.Core.Formats.Density.Data.denormalize(r) : e.Core.Formats.Density.Data.normalize(r), t.resolve(n.Density.Data.create(o, {
          label: o.params.id ? o.params.id : "Density Data",
          data: r,
          description: o.params.normalize ? "Normalized" : ""
         }))
        })
       })
      }), r.CreateFromCif = t.Tree.Transformer.create({
       id: "density-create-from-cif",
       name: "Density Data",
       description: "Parse density from CIF data.",
       from: [n.Data.CifDictionary],
       to: [n.Density.Data],
       isUpdatable: !1,
       defaultParams: function() {
        return {
         blockIndex: 0
        }
       }
      }, function(r, i, o) {
       return t.Task.create("Create Density", "Normal", function(r) {
        r.update("Parsing..."), r.schedule(function() {
         var a = e.Core.Formats.Density.CIF.parse(i.props.dictionary.dataBlocks[o.params.blockIndex]);
         return a.isError ? t.Task.reject("Create Density (" + i.props.label + ")", "Background", a.toString()) : (r.resolve(n.Density.Data.create(o, {
          label: o.params.id ? o.params.id : "Density Data",
          data: a.result,
          description: a.result.attributes.name
         })), void 0)
        })
       }).setReportTime(!0)
      }), r.CreateFromData = t.Tree.Transformer.create({
       id: "density-create-from-data",
       name: "Density Data",
       description: "Create density from data.",
       from: [],
       to: [n.Density.Data],
       isUpdatable: !1,
       defaultParams: function() {
        return {}
       }
      }, function(e, r, i) {
       var o = n.Density.Data.create(i, {
        label: i.params.id ? i.params.id : "Density Data",
        data: i.params.data,
        description: i.params.data.attributes.name
       });
       return t.Task.resolve("Create Density", "Background", o)
      }), r.CreateVisual = t.Tree.Transformer.create({
       id: "density-create-visual",
       name: "Surface",
       description: "Create a surface from the density data.",
       from: [n.Density.Data],
       to: [n.Density.Visual],
       isUpdatable: !0,
       defaultParams: function() {
        return {
         style: t.Visualization.Density.Default.Style
        }
       },
       validateParams: function(e) {
        return e.style ? void 0 : ["Specify Style"]
       },
       customController: function(e, n, r) {
        return new t.Components.Transform.DensityVisual(e, n, r)
       }
      }, function(e, n, r) {
       var i = r.params;
       return t.Visualization.Density.create(n, r, i.style).setReportTime("Normal" === r.params.style.computationType)
      }, function(e, r, i) {
       var o = r.transform.params;
       if (o.style.type !== i.params.style.type || !t.Utils.deepEqual(o.style.params, i.params.style.params)) return void 0;
       var a = t.Tree.Node.findClosestNodeOfType(r, [n.Density.Data]);
       if (!a) return void 0;
       var s = r.props.model;
       if (!s) return void 0;
       if (!t.Utils.deepEqual(o.style.theme, i.params.style.theme)) {
        var u = i.params.style.theme,
         l = u.template.provider(a, t.Visualization.Theme.getProps(u));
        s.applyTheme(l), r.props.style.theme = u, n.nodeUpdated(r)
       }
       return t.Task.resolve(i.transformer.info.name, "Background", t.Tree.Node.Null)
      }), r.CreateVisualBehaviour = t.Tree.Transformer.create({
       id: "density-create-visual-behaviour",
       name: "Interactive Surface",
       description: "Create a surface from the density data when a residue or atom is selected.",
       from: [n.Density.Data],
       to: [n.Density.InteractiveSurface],
       isUpdatable: !0,
       defaultParams: function(e) {
        return {
         style: t.Visualization.Density.Default.Style,
         radius: e.settings.get("density.defaultVisualBehaviourRadius") || 0,
         isoSigmaMin: -5,
         isoSigmaMax: 5,
         minRadius: 0,
         maxRadius: 10,
         showFull: !1
        }
       },
       customController: function(e, n, r) {
        return new t.Components.Transform.DensityVisual(e, n, r)
       }
      }, function(e, r, i) {
       var o = i.params,
        a = new t.Behaviour.Density.ShowDynamicDensity(e, {
         style: o.style,
         radius: o.radius,
         showFull: o.showFull
        }),
        s = void 0 === o.style.params.isoValueType || o.style.params.isoValueType === t.Visualization.Density.IsoValueType.Sigma;
       return t.Task.resolve("Behaviour", "Background", n.Density.InteractiveSurface.create(i, {
        label: (o.id ? i.params.id : "Interactive") + ", " + t.Utils.round(o.style.params.isoValue, 2) + (s ? " σ" : ""),
        behaviour: a
       }))
      }, function(e, r, i) {
       var o = r.transform.params,
        a = i.params;
       if (o.style.type !== a.style.type || !t.Utils.deepEqual(o.style.params, a.style.params)) return void 0;
       if (o.isoSigmaMin !== a.isoSigmaMin || o.isoSigmaMax !== a.isoSigmaMax || o.minRadius !== a.minRadius || o.maxRadius !== a.maxRadius || o.radius !== a.radius || o.showFull !== a.showFull) return void 0;
       var s = t.Tree.Node.findClosestNodeOfType(r, [n.Density.Data]);
       if (!s) return void 0;
       var u = a.style.theme;
       return r.props.behaviour.updateTheme(u), n.nodeUpdated(r), t.Task.resolve(i.transformer.info.name, "Background", t.Tree.Node.Null)
      })
     }(i = r.Density || (r.Density = {}))
    }(r = n.Transformer || (n.Transformer = {}))
   }(n = t.Entity || (t.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i;
     ! function(i) {
      var o;
      ! function(o) {
       o.CreateBehaviour = t.Tree.Transformer.create({
        id: "streaming-create-behaviour",
        name: "Coordinate Streaming",
        description: "Enable coordinate data streaming for this molecule.",
        from: [n.Molecule.Model],
        to: [n.Molecule.CoordinateStreaming.Behaviour],
        defaultParams: function(e) {
         return {
          server: e.settings.get("molecule.coordinateStreaming.defaultServer") || "",
          radius: e.settings.get("molecule.coordinateStreaming.defaultRadius") || 0
         }
        }
       }, function(e, r, i) {
        return t.Task.resolve("Behaviour", "Background", n.Molecule.CoordinateStreaming.Behaviour.create(i, {
         label: "Coordinate Streaming",
         behaviour: new t.Behaviour.Molecule.CoordinateStreaming(e, i.params.server, i.params.radius)
        }))
       }), o.CreateModel = t.Tree.Transformer.create({
        id: "streaming-create-model",
        name: "Streaming Model",
        description: "",
        from: [n.Molecule.CoordinateStreaming.Behaviour],
        to: [n.Molecule.Model],
        defaultParams: function() {
         return void 0
        }
       }, function(r, i, o) {
        return t.Task.create("Load", "Silent", function(t) {
         var r = e.Core.Formats.CIF.Binary.parse(o.params.data);
         if (!r.isError) {
          var i = e.Core.Formats.Molecule.mmCIF.ofDataBlock(r.result.dataBlocks[0]).models[0];
          o.params.transform && e.Core.Structure.Operator.applyToModelUnsafe(o.params.transform, i), t.resolve(n.Molecule.Model.create(o, {
           label: "part",
           model: i
          }))
         }
        })
       }), o.InitStreaming = t.Tree.Transformer.create({
        id: "streaming-init",
        name: "Coordinate Streaming",
        description: "Download a smaller version of the molecule required to display cartoon representation and stream the rest of the coordinates as required.",
        from: [n.Root],
        to: [n.Action],
        validateParams: function(e) {
         return (e.id || "").trim().length ? (e.server || "").trim().length ? void 0 : ["Specify server"] : ["Enter id"]
        },
        defaultParams: function(e) {
         return {
          id: e.settings.get("molecule.coordinateStreaming.defaultId") || "",
          server: e.settings.get("molecule.coordinateStreaming.defaultServer") || "",
          radius: e.settings.get("molecule.coordinateStreaming.defaultRadius") || 0
         }
        }
       }, function(e, n, a) {
        return t.Task.create("Macromolecule", "Normal", function(s) {
         var u = t.Tree.Transform.build().add(n, r.Data.Download, {
          url: t.Behaviour.Molecule.CoordinateStreaming.getBaseUrl(a.params.id, a.params.server),
          type: "Binary",
          id: a.params.id
         }).then(r.Data.ParseBinaryCif, {
          id: a.params.id
         }, {
          isBinding: !0
         }).then(i.CreateFromMmCif, {
          blockIndex: 0
         }, {
          isBinding: !0
         }).then(i.CreateModel, {
          modelIndex: 0
         }, {
          isBinding: !1
         }).then(o.CreateBehaviour, {
          server: a.params.server,
          radius: a.params.radius
         });
         t.Tree.Transform.apply(e, u).run(e).then(function() {
          return s.resolve(t.Tree.Node.Null)
         }).catch(s.reject)
        })
       })
      }(o = i.CoordinateStreaming || (i.CoordinateStreaming = {}))
     }(i = r.Molecule || (r.Molecule = {}))
    }(r = n.Transformer || (n.Transformer = {}))
   }(n = t.Entity || (t.Entity = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     function r(e) {
      return t.Tree.Node.findClosestNodeOfType(e, d)
     }

     function i(e) {
      return t.Tree.Node.findClosestNodeOfType(e, f)
     }

     function o(e) {
      return t.Tree.Node.findClosestNodeOfType(e, m)
     }

     function a(n) {
      var i = t.Tree.Node.findClosestNodeOfType(n, f);
      if (t.Entity.isMoleculeModel(i)) return i.props.model.queryContext;
      var o = i.tree.context.entityCache,
       a = o.get(i, t.Entity.Cache.Keys.QueryContext);
      return a ? a : (a = e.Core.Structure.Query.Context.ofAtomIndices(r(i).props.model, i.props.indices), o.set(i, t.Entity.Cache.Keys.QueryContext, a))
     }

     function s(e, t, n, r, i, o) {
      for (var a = e.atoms, s = a.x, u = a.y, l = a.z, c = r.atoms.x, h = r.atoms.y, p = r.atoms.z, d = Number.POSITIVE_INFINITY, f = t; n > f; f++)
       for (var m = i; o > m; m++) {
        var g = s[f] - c[m],
         v = u[f] - h[m],
         y = l[f] - p[m];
        d = Math.min(d, g * g + v * v + y * y)
       }
      return Math.sqrt(d)
     }

     function u(e, t, n, r) {
      for (var i = e.atoms, o = i.x, a = i.y, s = i.z, u = n.atoms.x, l = n.atoms.y, c = n.atoms.z, h = Number.POSITIVE_INFINITY, p = 0, d = t; p < d.length; p++)
       for (var f = d[p], m = 0, g = r; m < g.length; m++) {
        var v = g[m],
         y = o[f] - u[v],
         b = a[f] - l[v],
         w = s[f] - c[v];
        h = Math.min(h, y * y + b * b + w * w)
       }
      return Math.sqrt(h)
     }

     function l(t, n) {
      var i = r(t);
      if (!i) return console.warn("Could not find a model for query selection."), void 0;
      var o = a(t);
      try {
       var s = e.Core.Structure.Query.Builder.toQuery(n);
       return {
        model: i,
        indices: s(o).unionAtomIndices(),
        queryContext: o
       }
      } catch (u) {
       return console.error("Query Execution", u), void 0
      }
     }

     function c(e, t) {
      for (var n = e.atoms.residueIndex, r = [], i = e.residues.atomStartIndex[n[t]], o = e.residues.atomEndIndex[n[t]]; o > i; i++) r.push(i);
      return r
     }

     function h(e, t, n) {
      for (var r = e.atoms, i = (r.count, r.x), o = r.y, a = r.z, s = [Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE], u = [-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE], l = 0, c = t; l < c.length; l++) {
       var h = c[l];
       s[0] = Math.min(i[h], s[0]), s[1] = Math.min(o[h], s[1]), s[2] = Math.min(a[h], s[2]), u[0] = Math.max(i[h], u[0]), u[1] = Math.max(o[h], u[1]), u[2] = Math.max(a[h], u[2])
      }
      return s[0] = s[0] - n, s[1] = s[1] - n, s[2] = s[2] - n, u[0] = u[0] + n, u[1] = u[1] + n, u[2] = u[2] + n, {
       bottomLeft: s,
       topRight: u
      }
     }

     function p(e, t, n) {
      n.x = 0, n.y = 0, n.z = 0;
      for (var r = e.atoms, i = r.x, o = r.y, a = r.z, s = 0, u = t; s < u.length; s++) {
       var l = u[s];
       n.x += i[l], n.y += o[l], n.z += a[l]
      }
      var c = t.length;
      n.x /= c, n.y /= c, n.z /= c;
      for (var h = 0, p = 0, d = t; p < d.length; p++) {
       var l = d[p],
        f = n.x - i[l],
        m = n.y - o[l],
        g = n.z - a[l];
       h = Math.max(h, f * f + m * m + g * g)
      }
      return Math.sqrt(h)
     }
     var d = [t.Entity.Molecule.Model];
     n.findModel = r;
     var f = [t.Entity.Molecule.Model, t.Entity.Molecule.Selection];
     n.findModelOrSelection = i;
     var m = [t.Entity.Molecule.Molecule];
     n.findMolecule = o, n.findQueryContext = a, n.getDistance = s, n.getDistanceSet = u, n.getModelAndIndicesFromQuery = l, n.getResidueIndices = c, n.getBox = h;
     var g = function() {
      function e(e) {
       this.model = e, this.center = {
        x: 0,
        y: 0,
        z: 0
       }, this.radiusSquared = 0, this.count = 0, this.x = e.atoms.x, this.y = e.atoms.y, this.z = e.atoms.z
      }
      return e.prototype.addAtom = function(e) {
       this.count++, this.center.x += this.x[e], this.center.y += this.y[e], this.center.z += this.z[e]
      }, e.prototype.finishedAdding = function() {
       this.center.x /= this.count, this.center.y /= this.count, this.center.z /= this.count
      }, e.prototype.radiusVisit = function(e) {
       var t = this.center.x - this.x[e],
        n = this.center.y - this.y[e],
        r = this.center.z - this.z[e];
       this.radiusSquared = Math.max(this.radiusSquared, t * t + n * n + r * r)
      }, e
     }();
     n.CentroidHelper = g, n.getCentroidAndRadius = p
    }(r = n.Molecule || (n.Molecule = {}))
   }(n = t.Utils || (t.Utils = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t(t) {
      this.context = t, this.subjects = {
       select: new e.Rx.BehaviorSubject(e.Interactivity.Info.empty),
       click: new e.Rx.BehaviorSubject(e.Interactivity.Info.empty),
       currentEntity: new e.Rx.BehaviorSubject(void 0)
      }, this.select = this.subjects.select.distinctUntilChanged(function(e) {
       return e
      }, e.Interactivity.interactivityInfoEqual), this.click = this.subjects.click.distinctUntilChanged(function(e) {
       return e
      }, e.Interactivity.interactivityInfoEqual), this.currentEntity = this.subjects.currentEntity, this.init()
     }
     return t.prototype.init = function() {
      var t = this,
       n = e.Interactivity.Info.empty;
      e.Event.Tree.NodeRemoved.getStream(this.context).subscribe(function(r) {
       e.Interactivity.isSelection(n) && n.source === r.data && (n = e.Interactivity.Info.empty, e.Event.Visual.VisualSelectElement.dispatch(t.context, n))
      }), e.Event.Visual.VisualSelectElement.getStream(this.context).subscribe(function(r) {
       n = r.data, t.subjects.click.onNext(n), e.Interactivity.isSelection(n) && e.Entity.isVisual(n.source) && !n.source.props.isSelectable || t.subjects.select.onNext(n)
      }), e.Event.Entity.CurrentChanged.getStream(this.context).subscribe(function(e) {
       return t.subjects.currentEntity.onNext(e.data)
      })
     }, t
    }();
    t.Streams = n
   }(t = e.Behaviour || (e.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(t) {
     e.Event.Tree.NodeAdded.getStream(t).subscribe(function(n) {
      var r = n.data;
      r && (r.transform.isUpdate || r.type.traits.isSilent) || e.Command.Entity.SetCurrent.dispatch(t, r)
     })
    }

    function r(t) {
     e.Event.Tree.NodeAdded.getStream(t).subscribe(function(n) {
      if (e.Tree.Node.is(n.data, e.Entity.Molecule.Model) && !n.data.isHidden) {
       var r = e.Entity.Transformer.Molecule.CreateMacromoleculeVisual.info.defaultParams(t, n.data);
       e.Command.Tree.ApplyTransform.dispatch(t, {
        node: n.data,
        transform: e.Entity.Transformer.Molecule.CreateMacromoleculeVisual.create(r)
       })
      }
     })
    }

    function i(t) {
     e.Event.Tree.NodeAdded.getStream(t).subscribe(function(t) {
      var n = t.data;
      if (e.Entity.isMoleculeSelection(n) && e.Entity.isVisual(n.parent)) {
       var r = n,
        i = n.parent;
       i.props.model.applySelection(r.props.indices, 1)
      }
     }), e.Event.Tree.NodeRemoved.getStream(t).subscribe(function(t) {
      var n = t.data;
      if (e.Entity.isMoleculeSelection(n) && e.Entity.isVisual(n.parent)) {
       var r = n,
        i = n.parent;
       i.props.model.applySelection(r.props.indices, 2)
      }
     })
    }

    function o(t) {
     var n = void 0,
      r = void 0;
     t.behaviours.click.subscribe(function(t) {
      r && (r.applySelection(n, 2), r = void 0, n = void 0), !e.Interactivity.isEmpty(t) && e.Entity.isVisual(t.source) && (r = t.source.props.model, n = t.elements, r.applySelection(n, 1))
     })
    }

    function a(t) {
     var n = e.Interactivity.Info.empty;
     e.Event.Visual.VisualSelectElement.getStream(t).subscribe(function(r) {
      return e.Interactivity.isEmpty(r.data) || e.Interactivity.isEmpty(n) ? (n = r.data, void 0) : ((e.Tree.Node.hasAncestor(n.source, r.data.source) || e.Tree.Node.hasAncestor(r.data.source, n.source)) && e.Interactivity.interactivitySelectionElementsEqual(r.data, n) ? (n = e.Interactivity.Info.empty, setTimeout(function() {
       return e.Event.Visual.VisualSelectElement.dispatch(t, e.Interactivity.Info.empty)
      }, 0)) : n = r.data, void 0)
     })
    }

    function s(t, n) {
     var r = e.Utils.Molecule.findModel(n.source).props.model;
     if (r) {
      var i = n.elements;
      1 === n.elements.length && (i = e.Utils.Molecule.getResidueIndices(r, n.elements[0]));
      var o = e.Utils.Molecule.getCentroidAndRadius(r, i, c);
      if (1 === n.elements.length) {
       var a = n.elements[0];
       c.x = r.atoms.x[a], c.y = r.atoms.y[a], c.z = r.atoms.z[a]
      }
      t.scene.camera.focusOnPoint(c, Math.max(o, 7))
     }
    }

    function u(t, n) {
     if (!e.Interactivity.isEmpty(n) && "Visual" === n.source.type.info.typeClass) {
      var r = n.source,
       i = r.props.model;
      if (i) {
       var o = i.getBoundingSphereOfSelection(n.elements);
       o ? t.scene.camera.focusOnPoint(o.center, Math.max(o.radius, 7)) : t.scene.camera.focusOnModel(i)
      }
     }
    }

    function l(t) {
     t.behaviours.click.subscribe(function(n) {
      e.Interactivity.Molecule.isMoleculeModelInteractivity(n) ? s(t, n) : u(t, n)
     })
    }
    t.SetEntityToCurrentWhenAdded = n, t.CreateVisualWhenModelIsAdded = r, t.ApplySelectionToVisual = i, t.ApplyInteractivitySelection = o, t.UnselectElementOnRepeatedClick = a;
    var c = {
     x: 0,
     y: 0,
     z: 0
    };
    t.FocusCameraOnSelect = l
   }(t = e.Behaviour || (e.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     function r(n) {
      return function(r) {
       function i() {
        o && (t.Command.Tree.RemoveNode.dispatch(r, o), o = void 0, u = void 0)
       }
       var o = void 0,
        u = void 0,
        l = {
         type: "BallsAndSticks",
         computationType: "Silent",
         params: {
          useVDW: !0,
          vdwScaling: .25,
          bondRadius: .13,
          detail: "Automatic"
         },
         theme: {
          template: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate,
          colors: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors.set("Bond", e.Visualization.Theme.Default.SelectionColor),
          transparency: {
           alpha: .4
          }
         },
         isNotSelectable: !0
        },
        c = {
         type: "BallsAndSticks",
         computationType: "Silent",
         params: {
          useVDW: !1,
          atomRadius: .15,
          bondRadius: .07,
          detail: "Automatic"
         },
         theme: {
          template: t.Visualization.Molecule.Default.UniformThemeTemplate,
          colors: t.Visualization.Molecule.Default.UniformThemeTemplate.colors.set("Uniform", {
           r: .4,
           g: .4,
           b: .4
          }),
          transparency: {
           alpha: .75
          }
         },
         isNotSelectable: !0
        };
       r.behaviours.click.subscribe(function(e) {
        if (t.Interactivity.isEmpty(e)) return i(), void 0;
        if (e.source.ref === u) {
         var h = t.Utils.Molecule.findModel(e.source);
         if (!h) return;
         var p = a.atomsFromIndices(e.elements);
         return setTimeout(t.Command.Molecule.CreateSelectInteraction.dispatch(r, {
          entity: h,
          query: p
         }), 0), void 0
        }
        var d = t.Entity.isVisual(e.source) ? e.source.props.isSelectable : !0;
        if (d && (i(), !t.Interactivity.isEmpty(e) && t.Utils.Molecule.findModelOrSelection(e.source))) {
         var f = a.atomsFromIndices(e.elements).wholeResidues(),
          m = a.atomsFromIndices(e.elements).wholeResidues().ambientResidues(n),
          g = t.Utils.generateUUID(),
          v = t.Tree.Transform.build().add(e.source, s.Basic.CreateGroup, {
           label: "Interaction"
          }, {
           ref: g,
           isHidden: !0
          });
         o = g, u = t.Utils.generateUUID(), v.then(s.Molecule.CreateSelectionFromQuery, {
          query: m,
          name: "Ambience",
          silent: !0,
          inFullContext: !0
         }, {
          isBinding: !0
         }).then(s.Molecule.CreateVisual, {
          style: c
         }, {
          ref: u
         }), v.then(s.Molecule.CreateSelectionFromQuery, {
          query: f,
          name: "Ligand",
          silent: !0,
          inFullContext: !0
         }, {
          isBinding: !0
         }).then(s.Molecule.CreateVisual, {
          style: l
         }), t.Tree.Transform.apply(r, v).run(r)
        }
       })
      }
     }

     function i(e) {
      e.highlight.addProvider(function(e) {
       if (!t.Interactivity.Molecule.isMoleculeModelInteractivity(e)) return void 0;
       var n = t.Interactivity.Molecule.transformInteraction(e);
       return t.Interactivity.Molecule.formatInfo(n)
      })
     }

     function o(e) {
      var n = t.Interactivity.Info.empty,
       r = void 0,
       i = void 0;
      e.behaviours.click.subscribe(function(e) {
       if (t.Interactivity.Molecule.isMoleculeModelInteractivity(e)) {
        n = e;
        var o = t.Utils.Molecule.findModel(e.source);
        o ? (i = o.props.model, r = t.Interactivity.Molecule.formatInfoShort(t.Interactivity.Molecule.transformInteraction(e))) : (n = t.Interactivity.Info.empty, i = void 0, r = void 0)
       } else n = t.Interactivity.Info.empty, i = void 0, r = void 0
      }), e.highlight.addProvider(function(e) {
       if (!t.Interactivity.Molecule.isMoleculeModelInteractivity(e)) return void 0;
       if (t.Interactivity.isEmpty(n)) return void 0;
       var o = t.Utils.Molecule.findModel(e.source);
       if (!o) return void 0;
       var a = t.Utils.Molecule.getDistanceSet(i, n.elements, o.props.model, e.elements);
       return 1e-4 > a ? void 0 : "<span><b>" + t.Utils.round(a, 2) + " Å</b> from <b>" + r + "</b></span>"
      })
     }
     var a = e.Core.Structure.Query,
      s = t.Entity.Transformer;
     n.ShowInteractionOnSelect = r, n.HighlightElementInfo = i, n.DistanceToLastClickedElement = o
    }(r = n.Molecule || (n.Molecule = {}))
   }(n = t.Behaviour || (t.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     var n = "__ShowDynamicDensity-toast",
      r = function() {
       function t(t, n) {
        this.context = t, this.params = n, this.obs = [], this.ref = e.Utils.generateUUID(), this.isBusy = !1
       }
       return t.prototype.remove = function() {
        var t = this.getVisual();
        t && e.Tree.remove(t)
       }, t.prototype.getVisual = function() {
        return this.context.select(this.ref)[0]
       }, t.prototype.update = function(t) {
        if (!this.params.showFull && !e.Interactivity.Molecule.isMoleculeModelInteractivity(t)) return this.remove(), void 0;
        e.Command.Toast.Hide.dispatch(this.context, {
         key: n
        });
        var r = e.Utils.shallowClone(this.params.style);
        if (r.params = e.Utils.shallowClone(r.params), this.params.showFull) r.params.bottomLeft = void 0, r.params.topRight = void 0, r.computationType = "Normal";
        else {
         var i = t,
          o = e.Utils.Molecule.findModel(i.source),
          a = i.elements,
          s = o.props.model;
         1 === i.elements.length && (a = e.Utils.Molecule.getResidueIndices(s, i.elements[0]));
         var u = e.Utils.Molecule.getBox(s, a, this.params.radius);
         r.params.bottomLeft = u.bottomLeft, r.params.topRight = u.topRight, r.computationType = "Silent"
        }
        var l, c = this.getVisual();
        if (c) l = e.Entity.Transformer.Density.CreateVisual.create({
         style: r
        }, {
         ref: this.ref,
         isHidden: !0
        }).update(this.context, c);
        else {
         var h = e.Entity.Transformer.Density.CreateVisual.create({
          style: r
         }, {
          ref: this.ref,
          isHidden: !0
         });
         h.isUpdate = !0, l = h.apply(this.context, this.behaviour)
        }
        l.run(this.context)
       }, t.prototype.updateTheme = function(t) {
        if (this.params.style.theme = t, this.behaviour) {
         var n = this.getVisual();
         if (n) {
          var r = e.Tree.Node.findClosestNodeOfType(this.behaviour, [e.Entity.Density.Data]),
           i = t.template.provider(r, e.Visualization.Theme.getProps(t));
          n.props.model.applyTheme(i)
         }
        }
       }, t.prototype.dispose = function() {
        this.remove(), e.Command.Toast.Hide.dispatch(this.context, {
         key: n
        });
        for (var t = 0, r = this.obs; t < r.length; t++) {
         var i = r[t];
         i.dispose()
        }
        this.obs = []
       }, t.prototype.register = function(t) {
        var r = this;
        this.behaviour = t, this.params.showFull || e.Command.Toast.Show.dispatch(this.context, {
         key: n,
         title: "Density",
         message: "Click on a residue or an atom to view the data.",
         timeoutMs: 3e4
        }), this.obs.push(this.context.behaviours.select.subscribe(function(e) {
         r.update(e)
        }))
       }, t
      }();
     t.ShowDynamicDensity = r
    }(n = t.Density || (t.Density = {}))
   }(t = e.Behaviour || (e.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r = t.Entity.Transformer,
      i = function() {
       function n(e, r, i) {
        void 0 === i && (i = 5), this.context = e, this.radius = i, this.obs = [], this.target = void 0, this.behaviour = void 0, this.currentRequest = void 0, this.ref = t.Utils.generateUUID(), this.download = void 0, this.cache = new n.Cache(100), this.style = {
         type: "BallsAndSticks",
         computationType: "Silent",
         params: {
          useVDW: !0,
          vdwScaling: .17,
          bondRadius: .07,
          detail: "Automatic"
         },
         theme: {
          template: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate,
          colors: t.Visualization.Molecule.Default.ElementSymbolThemeTemplate.colors,
          transparency: {
           alpha: 1
          }
         },
         isNotSelectable: !0
        }, this.server = n.normalizeServerName(r)
       }
       return n.prototype.remove = function() {
        this.download && (this.download.discard(), this.download = void 0), t.Command.Tree.RemoveNode.dispatch(this.context, this.ref)
       }, n.prototype.isApplicable = function(e) {
        return t.Interactivity.Molecule.isMoleculeModelInteractivity(e) ? t.Tree.Node.hasAncestor(e.source, this.target) : !1
       }, n.prototype.update = function(n) {
        var r = this;
        if (this.remove(), this.isApplicable(n)) {
         var i = t.Utils.Molecule.findModel(n.source).props.model,
          o = i.atoms.residueIndex[n.elements[0]],
          a = i.residues,
          s = a.authAsymId[o],
          u = void 0;
         if (i.source === e.Core.Structure.MoleculeModelSource.Computed) {
          var l = i.parent,
           c = a.chainIndex[o],
           h = i.chains.sourceChainIndex[c];
          s = l.chains.authAsymId[h], u = i.operators[i.chains.operatorIndex[c]].matrix
         }
         var p = this.server + "/" + (i.id.toLocaleLowerCase() + "/ambientResidues?") + ("modelId=" + encodeURIComponent(i.modelId) + "&") + ("entityId=" + encodeURIComponent(a.entityId[o]) + "&") + ("authAsymId=" + encodeURIComponent(s) + "&") + ("authSeqNumber=" + encodeURIComponent("" + a.authSeqNumber[o]) + "&") + ("insCode=" + encodeURIComponent(null !== a.insCode[o] ? a.insCode[o] : "") + "&") + ("radius=" + encodeURIComponent("" + this.radius) + "&") + "atomSitesOnly=1&encoding=bcif&lowPrecisionCoords=1";
         this.download = t.Utils.ajaxGetArrayBuffer(p).run(this.context);
         var d = this.cache.get(p);
         d ? this.create(d, u) : (this.context.performance.start(this.ref), this.download.then(function(e) {
          r.cache.add(p, e), r.context.performance.end(r.ref), r.context.logger.info("Streaming done in " + r.context.performance.formatTime(r.ref)), r.create(e, u)
         }).catch(function() {
          r.context.performance.end(r.ref)
         }))
        }
       }, n.prototype.create = function(e, n) {
        var i = t.Tree.Transform.build().add(this.behaviour, t.Entity.Transformer.Molecule.CoordinateStreaming.CreateModel, {
         data: e,
         transform: n
        }, {
         ref: this.ref,
         isHidden: !0
        }).then(r.Molecule.CreateVisual, {
         style: this.style
        });
        t.Tree.Transform.apply(this.context, i).run(this.context)
       }, n.prototype.dispose = function() {
        this.remove();
        for (var e = 0, t = this.obs; e < t.length; e++) {
         var n = t[e];
         n.dispose()
        }
        this.obs = []
       }, n.prototype.register = function(e) {
        var t = this;
        this.behaviour = e, this.target = e.parent, this.obs.push(this.context.behaviours.select.subscribe(function(e) {
         return t.update(e)
        }))
       }, n
      }();
     n.CoordinateStreaming = i,
      function(e) {
       function n(e) {
        return "/" !== e[e.length - 1] ? e : e.length > 0 ? e.substr(0, e.length - 1) : e
       }

       function r(e, t) {
        return n(t) + "/" + e.trim().toLocaleLowerCase() + "/cartoon?encoding=bcif&lowPrecisionCoords=1"
       }
       e.normalizeServerName = n, e.getBaseUrl = r;
       var i = function() {
        function e(e, t) {
         this.key = e, this.data = t, this.previous = null, this.next = null
        }
        return e
       }();
       e.CacheEntry = i;
       var o = function() {
        function e(e) {
         this.size = e, this.count = 0, this.entries = new t.Utils.LinkedList, 1 > e && (e = 1)
        }
        return e.prototype.get = function(e) {
         for (var t = this.entries.first; t; t = t.next)
          if (t.key === e) return t.data;
         return void 0
        }, e.prototype.add = function(e, t) {
         this.count > this.size && this.entries.remove(this.entries.first);
         var n = new i(e, t);
         return this.entries.addLast(n), t
        }, e
       }();
       e.Cache = o
      }(i = n.CoordinateStreaming || (n.CoordinateStreaming = {}))
    }(r = n.Molecule || (n.Molecule = {}))
   }(n = t.Behaviour || (t.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(e, t, n, r, i, o, a) {
     if (i.transformer === n) try {
      var s = window[a],
       u = o(i.params, r);
      s && "undefined" != typeof u && s("send", "event", t, u, e.id)
     } catch (l) {}
    }

    function r(e) {
     return e.format.name
    }

    function i(e) {
     return e.url
    }

    function o(e) {
     return e.queryString
    }

    function a(t, n) {
     if (e.Tree.Node.isHidden(n)) return void 0;
     var r = e.Utils.Molecule.findModel(n);
     return r ? r.props.model.id + " $(name)$ " + t.name : void 0
    }

    function s(t, n) {
     if (e.Tree.Node.isHidden(n)) return void 0;
     var r = e.Utils.Molecule.findModel(n);
     return r ? r.props.model.id + " $(type)$ " + t.type + " $(radius)$ " + t.radius : void 0
    }

    function u(t, n) {
     var r = e.Utils.Molecule.findModel(n);
     return r ? r.props.model.id + " $(server)$ " + t.server : void 0
    }

    function l(t, n) {
     return e.Tree.Node.isHidden(n) ? void 0 : t.style.type
    }

    function c(e) {
     return "$(format)$ " + e.format
    }

    function h(e) {
     return e.queryString
    }

    function p(t, p) {
     return void 0 === p && (p = "default"),
      function(d) {
       var f = "ga-" + d.id + "-" + p;
       try {
        ! function(e, t, n, r, i, o, a) {
         e.GoogleAnalyticsObject = i, e[i] = e[i] || function() {
          (e[i].q = e[i].q || []).push(arguments)
         }, e[i].l = 1 * +new Date, o = t.createElement(n), a = t.getElementsByTagName(n)[0], o.async = 1, o.src = r, a.parentNode.insertBefore(o, a)
        }(window, document, "script", "https://www.google-analytics.com/analytics.js", f), window[f]("create", t, "auto"), setTimeout(function() {
         try {
          var e = window[f];
          e && e("send", "event", "Loaded", "contextId", d.id)
         } catch (t) {}
        }, 1e3)
       } catch (m) {}
       e.Event.Tree.TransformerApply.getStream(d).subscribe(function(t) {
        n(d, "Download", e.Entity.Transformer.Data.Download, t.data.a, t.data.t, i, f), n(d, "Create Molecule From Data", e.Entity.Transformer.Molecule.CreateFromData, t.data.a, t.data.t, r, f), n(d, "Create Model Selecion", e.Entity.Transformer.Molecule.CreateSelection, t.data.a, t.data.t, o, f), n(d, "Create Assembly", e.Entity.Transformer.Molecule.CreateAssembly, t.data.a, t.data.t, a, f), n(d, "Create Symmetry", e.Entity.Transformer.Molecule.CreateSymmetryMates, t.data.a, t.data.t, s, f), n(d, "Create Visual", e.Entity.Transformer.Molecule.CreateVisual, t.data.a, t.data.t, l, f), n(d, "Coordinate Streaming", e.Entity.Transformer.Molecule.CoordinateStreaming.CreateBehaviour, t.data.a, t.data.t, u, f), n(d, "Parse Density", e.Entity.Transformer.Density.ParseData, t.data.a, t.data.t, c, f), n(d, "Create Model Selection", e.Entity.Transformer.Molecule.CreateSelection, t.data.a, t.data.t, h, f)
       })
      }
    }
    t.GoogleAnalytics = p
   }(t = e.Behaviour || (e.Behaviour = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function() {
     function t(t, n) {
      this.context = t, this._state = new e.Rx.Subject, this._latestState = void 0, this._latestState = n
     }
     return Object.defineProperty(t.prototype, "dispatcher", {
      get: function() {
       return this.context.dispatcher
      },
      enumerable: !0,
      configurable: !0
     }), t.prototype.setState = function() {
      for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
      var r = e.Utils.merge.apply(e.Utils, [this._latestState].concat(t));
      r !== this._latestState && (this._latestState = r, this._state.onNext(r))
     }, Object.defineProperty(t.prototype, "state", {
      get: function() {
       return this._state
      },
      enumerable: !0,
      configurable: !0
     }), Object.defineProperty(t.prototype, "latestState", {
      get: function() {
       return this._latestState
      },
      enumerable: !0,
      configurable: !0
     }), t
    }();
    t.Component = n
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n() {
     for (var e = [], t = 0; t <= r.Root; t++) e.push(new o(r[t].toLowerCase()));
     return e
    }
    var r;
    ! function(e) {
     e[e.Main = 0] = "Main", e[e.Top = 1] = "Top", e[e.Right = 2] = "Right", e[e.Bottom = 3] = "Bottom", e[e.Left = 4] = "Left", e[e.Root = 5] = "Root"
    }(r = t.LayoutRegion || (t.LayoutRegion = {}));
    var i;
    ! function(e) {
     e[e.Outside = 0] = "Outside", e[e.Landscape = 1] = "Landscape", e[e.Portrait = 2] = "Portrait"
    }(i = t.CollapsedControlsLayout || (t.CollapsedControlsLayout = {}));
    var o = function() {
     function e(e) {
      this.cssClass = e, this.components = []
     }
     return e
    }();
    t.LayoutTarget = o, t.makeEmptyTargets = n;
    var a = function(t) {
     function n(n, r, o) {
      var a = t.call(this, n, {
       isExpanded: !1,
       hideControls: !1,
       collapsedControlsLayout: i.Outside,
       hiddenRegions: []
      }) || this;
      return a.targets = r, a.root = o, a.rootState = void 0, e.Command.Layout.SetState.getStream(a.context).subscribe(function(e) {
       return a.update(e.data)
      }), a.expandedViewport = document.createElement("meta"), a.expandedViewport.name = "viewport", a.expandedViewport.content = "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0", a
     }
     return l(n, t), n.prototype.update = function(t) {
      var n = this,
       r = !!this.latestState.isExpanded;
      this.setState(t), "boolean" == typeof t.isExpanded && t.isExpanded !== r && this.handleExpand(), this.dispatcher.schedule(function() {
       return e.Event.Common.LayoutChanged.dispatch(n.context, {})
      })
     }, n.prototype.getScrollElement = function() {
      return document.scrollingElement ? document.scrollingElement : document.documentElement ? document.documentElement : document.body
     }, n.prototype.handleExpand = function() {
      try {
       var e = document.getElementsByTagName("body")[0],
        t = document.getElementsByTagName("head")[0];
       if (!e || !t) return;
       if (this.latestState.isExpanded) {
        for (var n = t.children, r = !1, i = [], o = 0; o < n.length; o++) n[o] === this.expandedViewport ? r = !0 : "viewport" === (n[o].name || "").toLowerCase() && i.push(n[o]);
        for (var a = 0, s = i; a < s.length; a++) {
         var u = s[a];
         t.removeChild(u)
        }
        r || t.appendChild(this.expandedViewport);
        var l = e.style,
         c = this.getScrollElement(),
         h = c.scrollLeft,
         p = c.scrollTop;
        this.rootState = {
         top: l.top,
         bottom: l.bottom,
         right: l.right,
         left: l.left,
         scrollTop: p,
         scrollLeft: h,
         position: l.position,
         overflow: l.overflow,
         viewports: i,
         zindex: this.root.style.zIndex,
         width: l.width,
         height: l.height,
         maxWidth: l.maxWidth,
         maxHeight: l.maxHeight,
         margin: l.margin,
         marginLeft: l.marginLeft,
         marginRight: l.marginRight,
         marginTop: l.marginTop,
         marginBottom: l.marginBottom
        }, l.overflow = "hidden", l.position = "fixed", l.top = "0", l.bottom = "0", l.right = "0", l.left = "0", l.width = "100%", l.height = "100%", l.maxWidth = "100%", l.maxHeight = "100%", l.margin = "0", l.marginLeft = "0", l.marginRight = "0", l.marginTop = "0", l.marginBottom = "0", this.root.style.zIndex = "100000"
       } else {
        for (var n = t.children, o = 0; o < n.length; o++)
         if (n[o] === this.expandedViewport) {
          t.removeChild(this.expandedViewport);
          break
         } if (this.rootState) {
         for (var l = e.style, d = this.rootState, f = 0, m = d.viewports; f < m.length; f++) {
          var u = m[f];
          t.appendChild(u)
         }
         l.top = d.top, l.bottom = d.bottom, l.left = d.left, l.right = d.right, l.width = d.width, l.height = d.height, l.maxWidth = d.maxWidth, l.maxHeight = d.maxHeight, l.margin = d.margin, l.marginLeft = d.marginLeft, l.marginRight = d.marginRight, l.marginTop = d.marginTop, l.marginBottom = d.marginBottom, l.position = d.position, l.overflow = d.overflow;
         var c = this.getScrollElement();
         c.scrollTop = d.scrollTop, c.scrollLeft = d.scrollLeft, this.rootState = void 0, this.root.style.zIndex = d.zindex
        }
       }
      } catch (g) {
       this.context.logger.error("Layout change error, you might have to reload the page."), console.log("Layout change error, you might have to reload the page.", g)
      }
     }, n
    }(t.Component);
    t.Layout = a
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n, r, i) {
       var o = t.call(this, n, {
        params: r.info.defaultParams(n, i),
        canApply: !1,
        isBusy: !1,
        issues: void 0,
        parametersAutoUpdating: !1,
        isDirty: !1
       }) || this;
       return o.transformer = r, o.entity = i, o.updateTimeout = new e.Rx.Subject, o.timeout = e.Rx.Observable.timer(50), o.never = e.Rx.Observable.never(), o.anchorParams = o.latestState.params, o.updateParams(o.anchorParams), o.updateTimeout.flatMapLatest(function(e) {
        return e
       }).forEach(function() {
        return o.apply()
       }), o
      }
      return l(n, t), n.prototype._update = function() {
       this.isUpdate && !this.latestState.isBusy && this.updateTimeout && (this.updateTimeout.onNext(this.timeout), this.setState({
        parametersAutoUpdating: !0
       }))
      }, n.prototype._reset = function() {
       this.setState({
        parametersAutoUpdating: !1
       }), this.updateTimeout && this.updateTimeout.onNext(this.never)
      }, n.prototype._updateParams = function(t) {
       var n = e.Utils.merge(this.latestState.params, t);
       if (this.transformer.info.validateParams) {
        var r = this.transformer.info.validateParams(n);
        if (r && r.length > 0) return this.setState({
         params: n,
         issues: r,
         canApply: !1
        }), void 0
       }
       var i = !e.Utils.deepEqual(this.anchorParams, n);
       this.setState({
        params: n,
        isDirty: i,
        issues: void 0,
        canApply: !0
       })
      }, n.prototype.updateParams = function(e) {
       this._reset(), this._updateParams(e)
      }, n.prototype.autoUpdateParams = function(e) {
       this._update(), this._updateParams(e)
      }, Object.defineProperty(n.prototype, "isUpdate", {
       get: function() {
        return this.transformer === this.entity.transform.transformer
       },
       enumerable: !0,
       configurable: !0
      }), n.prototype.apply = function() {
       var e = this;
       if (this._reset(), !this.latestState.isBusy) {
        var t = this.transformer.create(this.latestState.params);
        this.anchorParams = this.latestState.params, this.setState({
         isDirty: !1,
         isBusy: !0
        });
        try {
         var n = this.isUpdate ? t.update(this.context, this.entity) : t.apply(this.context, this.entity);
         n.run(this.context).then(function() {
          return e.setState({
           isBusy: !1
          })
         }).catch(function() {
          return e.setState({
           isBusy: !1
          })
         })
        } catch (r) {
         this.setState({
          isBusy: !1
         })
        }
       }
      }, n.prototype.setParams = function(e) {
       this._reset(), this.anchorParams = e, this.updateParams(e)
      }, n
     }(t.Component);
     n.Controller = r
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n) {
       var r = t.call(this, n, {
        update: void 0,
        transforms: []
       }) || this;
       return r.update(), e.Event.Entity.CurrentChanged.getStream(n).subscribe(function() {
        return r.update()
       }), r
      }
      return l(n, t), n.prototype.update = function() {
       if (!this.context.currentEntity) return this.setState({
        transforms: []
       }), void 0;
       var e = this.context.currentEntity,
        t = this.context.transforms,
        n = void 0;
       e.transform.transformer && e.transform.transformer.info.isUpdatable && (n = t.getController(e.transform.transformer, e));
       for (var r = [], i = 0, o = this.context.transforms.getBySourceType(e.type); i < o.length; i++) {
        var a = o[i];
        if (!a.info.isApplicable || a.info.isApplicable(e)) {
         var s = t.getController(a, e);
         s && r.push(s)
        }
       }
       this.setState({
        update: n,
        transforms: r
       })
      }, n
     }(t.Component);
     n.View = r
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(t) {
     var n = function(t) {
      function n() {
       return t.apply(this, arguments) || this
      }
      return l(n, t), n.prototype.updateTemplate = function(e, t) {
       var n = t.get(e),
        r = this.latestState && this.latestState.params.style.theme,
        i = n.params,
        o = r || this.getThemeInstance(n.theme.template),
        a = {
         type: n.type,
         params: i,
         theme: o
        };
       this.autoUpdateParams({
        style: a
       })
      }, n.prototype.updateStyleParams = function(t) {
       var n = e.Utils.shallowClone(this.latestState.params.style);
       n.params = e.Utils.merge(n.params, t), this.autoUpdateParams({
        style: n
       })
      }, n.prototype.updateStyleTheme = function(t) {
       var n = e.Utils.shallowClone(this.latestState.params.style);
       n.theme = e.Utils.merge(n.theme, t), this.autoUpdateParams({
        style: n
       })
      }, n.prototype.updateThemeColor = function(t, n) {
       var r = this.latestState.params.style.theme;
       if (r) {
        var i = r.colors;
        i || (i = e.Immutable.Map()), i = i.set(t, n), this.updateStyleTheme({
         colors: i
        })
       }
      }, n.prototype.updateThemeTransparency = function(e) {
       var t = this.latestState.params.style.theme;
       t && this.updateStyleTheme({
        transparency: e
       })
      }, n.prototype.getThemeInstance = function(t) {
       var n = this.latestState.params.style.theme,
        r = e.Visualization.Molecule.Default.ForType.get(this.latestState.params.style.type).theme.transparency;
       if (!n) return {
        template: t,
        colors: t.colors,
        transparency: r
       };
       var i = t.colors;
       n.colors && i && (i = i.withMutations(function(e) {
        n.colors.forEach(function(t, n) {
         e.has(n) && e.set(n, t)
        })
       }));
       var o = n.transparency ? n.transparency : r;
       return {
        template: t,
        colors: i,
        transparency: o
       }
      }, n.prototype.updateThemeDefinition = function(e) {
       this.updateStyleTheme(this.getThemeInstance(e))
      }, n
     }(t.Controller);
     t.MoleculeVisual = n;
     var r = function(t) {
      function n() {
       return t.apply(this, arguments) || this
      }
      return l(n, t), n.prototype.cloneStyle = function(t) {
       return e.Utils.shallowClone(this.latestState.params[t || "style"])
      }, n.prototype.getStyle = function(e) {
       return this.latestState.params[e || "style"]
      }, n.prototype.setStyle = function(e, t) {
       this.autoUpdateParams((n = {}, n[t || "style"] = e, n));
       var n
      }, n.prototype.updateStyleParams = function(t, n) {
       var r = this.cloneStyle(n);
       r.params = e.Utils.merge(r.params, t), this.setStyle(r, n)
      }, n.prototype.updateStyleTheme = function(t, n) {
       var r = this.cloneStyle(n);
       r.theme = e.Utils.merge(r.theme, t), this.setStyle(r, n)
      }, n.prototype.updateThemeColor = function(t, n, r) {
       var i = this.getStyle(r).theme;
       if (i) {
        var o = i.colors;
        o || (o = e.Immutable.Map()), o = o.set(t, n), this.updateStyleTheme({
         colors: o
        }, r)
       }
      }, n.prototype.updateThemeTransparency = function(e, t) {
       var n = this.getStyle(t).theme;
       n && this.updateStyleTheme({
        transparency: e
       }, t)
      }, n.prototype.getThemeInstance = function(t, n) {
       var r = this.getStyle(n).theme,
        i = e.Visualization.Density.Default.Transparency;
       if (!r) return {
        template: t,
        colors: t.colors,
        transparency: i
       };
       var o = t.colors;
       r.colors && o && (o = o.withMutations(function(e) {
        r.colors.forEach(function(t, n) {
         e.has(n) && e.set(n, t)
        })
       }));
       var a = r.transparency ? r.transparency : i;
       return {
        template: t,
        colors: o,
        transparency: a
       }
      }, n.prototype.updateThemeDefinition = function(e, t) {
       this.updateStyleTheme(this.getThemeInstance(e, t), t)
      }, n
     }(t.Controller);
     t.DensityVisual = r
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n, r, i) {
       var o = t.call(this, n, {
        controller: void 0
       }) || this;
       return o.selector = r, o.header = i, e.Event.Tree.NodeAdded.getStream(n).subscribe(function() {
        return o.added()
       }), e.Event.Tree.NodeRemoved.getStream(n).subscribe(function(e) {
        return o.removed(e.data)
       }), o
      }
      return l(n, t), n.prototype.removed = function(e) {
       if (this.latestState.controller) {
        var t = this.latestState.controller.entity;
        t === e && this.setState({
         controller: void 0
        })
       }
      }, n.prototype.added = function() {
       var e = this.context.select(this.selector),
        t = e[0];
       if (t && t.transform) {
        var n = this.context.transforms.getController(t.transform.transformer, t);
        n && this.setState({
         controller: n
        })
       }
      }, n
     }(t.Component);
     n.Updater = r
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n, r, i, o) {
       var a = t.call(this, n, {
        controller: void 0
       }) || this;
       return a.selector = r, a.transformer = i, a.header = o, e.Event.Tree.NodeAdded.getStream(n).subscribe(function() {
        return a.added()
       }), e.Event.Tree.NodeRemoved.getStream(n).subscribe(function(e) {
        return a.removed(e.data)
       }), a
      }
      return l(n, t), n.prototype.removed = function(e) {
       if (this.latestState.controller) {
        var t = this.latestState.controller.entity;
        t === e && this.setState({
         controller: void 0
        })
       }
      }, n.prototype.added = function() {
       var e = this.context.select(this.selector),
        t = e[0];
       if (t) {
        var n = this.context.transforms.getController(this.transformer, t);
        n && this.setState({
         controller: n
        })
       }
      }, n
     }(t.Component);
     n.Action = r
    }(n = t.Transform || (t.Transform = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n) {
       var r = t.call(this, n, {
        entries: e.Immutable.List()
       }) || this;
       return e.Event.Log.getStream(r.context).subscribe(function(e) {
        return r.setState({
         entries: r.latestState.entries.push(e.data)
        })
       }), r
      }
      return l(n, t), n
     }(t.Component);
     n.Log = r
    }(n = t.Context || (t.Context = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n) {
       var r = t.call(this, n, {
        entries: e.Immutable.Map()
       }) || this;
       return r.serialNumber = 0, r.serialId = 0, e.Command.Toast.Show.getStream(r.context).subscribe(function(e) {
        return r.show(e.data)
       }), e.Command.Toast.Hide.getStream(r.context).subscribe(function(e) {
        return r.hide(r.findByKey(e.data.key))
       }), r
      }
      return l(n, t), n.prototype.findByKey = function(e) {
       return this.latestState.entries.find(function(t) {
        return !!t && t.key === e
       })
      }, n.prototype.show = function(e) {
       var t, n = this,
        r = this.latestState.entries,
        i = void 0,
        o = ++this.serialId;
       e.key && (i = this.findByKey(e.key)) ? (void 0 !== i.timeout && clearTimeout(i.timeout), t = i.serialNumber, r = r.remove(i.id)) : t = ++this.serialNumber, i = {
        id: o,
        serialNumber: t,
        key: e.key,
        title: e.title,
        message: e.message,
        timeout: this.timeout(o, e.timeoutMs),
        hide: function() {
         return n.hideId(o)
        }
       }, r = r.set(o, i), this.setState({
        entries: r
       })
      }, n.prototype.timeout = function(e, t) {
       var n = this;
       return void 0 === t ? void 0 : (0 > t && (t = 500), setTimeout(function() {
        var t = n.latestState.entries.get(e);
        t.timeout = void 0, n.hide(t)
       }, t))
      }, n.prototype.hideId = function(e) {
       this.hide(this.latestState.entries.get(e))
      }, n.prototype.hide = function(e) {
       if (e) {
        void 0 !== e.timeout && clearTimeout(e.timeout), e.hide = void 0;
        var t = this.latestState.entries;
        t = t.delete(e.id), this.setState({
         entries: t
        })
       }
      }, n
     }(t.Component);
     n.Toast = r
    }(n = t.Context || (t.Context = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n, r) {
       var i = t.call(this, n, {
        tasks: e.Immutable.Map()
       }) || this;
       return i.type = r, e.Event.Task.StateUpdated.getStream(i.context).subscribe(function(e) {
        return i.updated(e.data)
       }), e.Event.Task.Started.getStream(i.context).filter(function(e) {
        return e.data.type === r
       }).subscribe(function(e) {
        return i.started(e.data)
       }), e.Event.Task.Completed.getStream(i.context).subscribe(function(e) {
        return i.completed(e.data)
       }), i
      }
      return l(n, t), n.prototype.updated = function(e) {
       var t = e.type === this.type,
        n = this.latestState.tasks;
       return t ? (n = n.set(e.taskId, {
        name: e.name,
        message: e.message,
        abort: e.abort
       }), this.setState({
        tasks: n
       }), void 0) : (n.has(e.taskId) && (n = n.delete(e.taskId), this.setState({
        tasks: n
       })), void 0)
      }, n.prototype.started = function(e) {
       this.setState({
        tasks: this.latestState.tasks.set(e.id, {
         name: e.name,
         message: "Running..."
        })
       })
      }, n.prototype.completed = function(e) {
       this.latestState.tasks.has(e) && this.setState({
        tasks: this.latestState.tasks.delete(e)
       })
      }, n
     }(t.Component);
     n.TaskWatcher = r
    }(n = t.Context || (t.Context = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
      function n(n) {
       var r = t.call(this, n, {
        info: []
       }) || this;
       return e.Event.Interactivity.Highlight.getStream(r.context).subscribe(function(e) {
        return r.setState({
         info: e.data
        })
       }), r
      }
      return l(n, t), n
     }(t.Component);
     n.HighlightInfo = r
    }(n = t.Visualization || (t.Visualization = {}))
   }(t = e.Components || (e.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i = e.Visualization,
      o = function(n) {
       function r(e) {
        var r = n.call(this, e, t.Utils.shallowClone(i.DefaultSceneOptions)) || this;
        return t.Event.Common.LayoutChanged.getStream(r.context).subscribe(function() {
         r._scene && r._scene.scene.resized()
        }), t.Command.Layout.SetViewportOptions.getStream(r.context).subscribe(function(e) {
         return r.setState(e.data)
        }), r.state.throttle(1e3 / 30).subscribe(function(e) {
         r.scene.scene.updateOptions(e)
        }), r
       }
       return l(r, n), Object.defineProperty(r.prototype, "scene", {
        get: function() {
         return this._scene
        },
        enumerable: !0,
        configurable: !0
       }), r.prototype.init = function(n) {
        if (!e.Visualization.checkWebGL()) return !1;
        try {
         return this._scene = new t.Visualization.SceneWrapper(n, this.context, this.latestState), this.context.scene = this._scene, !0
        } catch (r) {
         return !1
        }
       }, r.prototype.destroy = function() {
        this._scene && (this._scene.destroy(), this._scene = null)
       }, r
      }(n.Component);
     r.Viewport = o
    }(r = n.Visualization || (n.Visualization = {}))
   }(n = t.Components || (t.Components = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n = function() {
    function e() {
     this.settings = new Map
    }
    return e.prototype.set = function(e, t) {
     this.settings.set(e, t)
    }, e.prototype.get = function(e) {
     return this.settings.get(e)
    }, e
   }();
   t.Settings = n;
   var r = function() {
    function r(r) {
     this.plugin = r, this.id = t.Utils.generateUUID(), this.dispatcher = new t.Service.Dispatcher, this.logger = new t.Service.Logger(this), this.performance = new e.Core.Utils.PerformanceMonitor, this.scene = void 0, this.tree = t.Tree.create(this, t.Entity.Root.create(t.Entity.RootTransform, {
      label: "Root Entity"
     })), this.currentEntity = void 0, this.transforms = new t.TransformManager(this), this.entityCache = new t.Entity.Cache(this), this.viewport = new t.Components.Visualization.Viewport(this), this.highlight = new t.Interactivity.HighlightManager(this), this.behaviours = new t.Behaviour.Streams(this), this.settings = new n, t.initEventsAndCommands(this)
    }
    return r.prototype.createLayout = function(e, n) {
     this.layout = new t.Components.Layout(this, e, n)
    }, r.prototype.select = function(e) {
     return t.Tree.Selection.select(e, this.tree)
    }, r
   }();
   t.Context = r
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function() {}(t = e.Plugin || (e.Plugin = {}))
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   function t(t, n) {
    if (!e.Utils.Molecule.findModelOrSelection(n.entity)) return console.warn("Select: Trying to create a selection event on a non-molecule related entity, ignoring..."), void 0;
    var r = e.Utils.Molecule.getModelAndIndicesFromQuery(n.entity, n.query);
    r && r.indices.length && e.Event.Visual.VisualSelectElement.dispatch(t, e.Interactivity.Info.selection(n.entity, r.indices))
   }

   function n(n) {
    e.Command.Entity.SetCurrent.getStream(n).subscribe(function(t) {
     return e.Entity.setCurrent(t.data)
    }), e.Command.Entity.SetVisibility.getStream(n).subscribe(function(t) {
     return e.Entity.setVisibility(t.data.entity, t.data.visible)
    }), e.Command.Entity.ToggleExpanded.getStream(n).subscribe(function(t) {
     return e.Entity.toggleExpanded(t.data)
    }), e.Command.Tree.RemoveNode.getStream(n).subscribe(function(t) {
     return n.select(t.data).forEach(function(t) {
      return e.Tree.remove(t)
     })
    }), e.Command.Tree.ApplyTransform.getStream(n).subscribe(function(e) {
     (e.data.isUpdate ? e.data.transform.update(n, e.data.node) : e.data.transform.apply(n, e.data.node)).run(n)
    }), e.Event.Tree.NodeAdded.getStream(n).subscribe(function(t) {
     var n = t.data.parent.state.visibility,
      r = 2 !== n;
     if (e.Entity.setVisibility(t.data, r), e.Entity.isClass(t.data, e.Entity.BehaviourClass)) {
      var i = t.data;
      i.props.behaviour.register(i)
     }
    }), e.Event.Tree.NodeRemoved.getStream(n).subscribe(function(t) {
     if (e.Entity.updateVisibilityState(t.data.parent), e.Entity.isClass(t.data, e.Entity.BehaviourClass)) {
      var n = t.data;
      n.props.behaviour.dispose()
     }
    }), e.Event.Visual.VisualHoverElement.getStream(n).distinctUntilChanged(function(e) {
     return e.data
    }, e.Interactivity.interactivityInfoEqual).map(function(t) {
     return e.Interactivity.Molecule.transformInteraction(t.data)
    }).distinctUntilChanged(function(e) {
     return e
    }, function(e, t) {
     return e === t
    }).subscribe(function(t) {
     return e.Event.Molecule.ModelHighlight.dispatch(n, t)
    }), e.Event.Visual.VisualSelectElement.getStream(n).distinctUntilChanged(function(e) {
     return e.data
    }, e.Interactivity.interactivityInfoEqual).map(function(t) {
     return e.Interactivity.Molecule.transformInteraction(t.data)
    }).distinctUntilChanged(function(e) {
     return e
    }, function(e, t) {
     return e === t
    }).subscribe(function(t) {
     return e.Event.Molecule.ModelSelect.dispatch(n, t)
    }), e.Command.Molecule.CreateSelectInteraction.getStream(n).subscribe(function(e) {
     return t(n, e.data)
    })
   }
   e.initEventsAndCommands = n
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t = function() {
    function t(t) {
     var n = this;
     this.context = t, this.controllerCache = new Map, this.state = new Map, this.byId = new Map, this.bySourceType = new Map, this.byTargetType = new Map, e.Event.Tree.NodeRemoved.getStream(t).subscribe(function(e) {
      n.controllerCache.delete(e.data.id), n.state.delete(e.data.id)
     })
    }
    return t.prototype.addType = function(e, t, n) {
     var r = n.get(e.id);
     r ? r.push(t) : n.set(e.id, [t])
    }, t.prototype.getController = function(t, n) {
     if (!this.byId.get(t.info.id)) return console.warn("Trying to get contoller for unregistered transform (" + t.info.id + ")"), void 0;
     var r = this.controllerCache.get(n.id);
     r || (r = new Map, this.controllerCache.set(n.id, r));
     var i = r.get(t.info.id);
     if (i) return i;
     var o = t.info.customController;
     i = o ? o(this.context, t, n) : new e.Components.Transform.Controller(this.context, t, n);
     var a = this.context.plugin && this.context.plugin.getTransformerInfo(t);
     return a && a.initiallyCollapsed ? this.hasPersistentState(t, n, "isExpanded") || this.setPersistentState(t, n, "isExpanded", !1) : this.hasPersistentState(t, n, "isExpanded") || this.setPersistentState(t, n, "isExpanded", !0), n.transform.transformer === t && i.setParams(n.transform.params), r.set(t.info.id, i), i
    }, t.prototype.getBySourceType = function(e) {
     return this.bySourceType.get(e.id) || []
    }, t.prototype.getByTargetType = function(e) {
     return this.byTargetType.get(e.id) || []
    }, t.prototype.add = function(e) {
     if (this.byId.has(e.info.id)) throw "Transformer with id '" + e.info.id + "' is has already been added. Pick another id.";
     this.byId.set(e.info.id, e);
     for (var t = 0, n = e.info.from; t < n.length; t++) {
      var r = n[t];
      this.addType(r, e, this.bySourceType)
     }
     for (var i = 0, o = e.info.to; i < o.length; i++) {
      var r = o[i];
      this.addType(r, e, this.byTargetType)
     }
    }, t.prototype.hasPersistentState = function(e, t, n) {
     var r = this.state.get(t.id);
     if (!r) return !1;
     var i = r.get(e.info.id);
     return i && i.has(n) ? !0 : !1
    }, t.prototype.getPersistentState = function(e, t, n, r) {
     var i = this.state.get(t.id);
     if (!i) return r;
     var o = i.get(e.info.id);
     return o && o.has(n) ? o.get(n) : r
    }, t.prototype.setPersistentState = function(e, t, n, r) {
     var i = this.state.get(t.id);
     i || (i = new Map, this.state.set(t.id, i));
     var o = i.get(e.info.id);
     o || (o = new Map, i.set(e.info.id, o));
     var a = o.get(n);
     return o.set(n, r), a !== r
    }, t
   }();
   e.TransformManager = t
  }(t = e.Bootstrap || (e.Bootstrap = {}))
 }(a || (a = {}));
 var d = {};
 ! function(e) {
  function t(e) {
   var t = document.getElementsByTagName("head")[0],
    n = document.createElement("script");
   n.type = "text/javascript", n.charset = "utf-8", n.src = p.p + "" + e + "." + x + ".hot-update.js", t.appendChild(n)
  }

  function n(e) {
   if ("undefined" == typeof XMLHttpRequest) return e(new Error("No browser support"));
   try {
    var t = new XMLHttpRequest,
     n = p.p + "" + x + ".hot-update.json";
    t.open("GET", n, !0), t.timeout = 1e4, t.send(null)
   } catch (r) {
    return e(r)
   }
   t.onreadystatechange = function() {
    if (4 === t.readyState)
     if (0 === t.status) e(new Error("Manifest request to " + n + " timed out."));
     else if (404 === t.status) e();
    else if (200 !== t.status && 304 !== t.status) e(new Error("Manifest request to " + n + " failed."));
    else {
     try {
      var r = JSON.parse(t.responseText)
     } catch (i) {
      return e(i), void 0
     }
     e(null, r)
    }
   }
  }

  function r(e) {
   function t(e, t) {
    "ready" === E && o("prepare"), M++, p.e(e, function() {
     function n() {
      M--, "prepare" === E && (A[e] || l(e), 0 === M && 0 === T && c())
     }
     try {
      t.call(null, r)
     } finally {
      n()
     }
    })
   }
   var n = I[e];
   if (!n) return p;
   var r = function(t) {
    return n.hot.active ? I[t] ? (I[t].parents.indexOf(e) < 0 && I[t].parents.push(e), n.children.indexOf(t) < 0 && n.children.push(t)) : S = [e] : (console.warn("[HMR] unexpected require(" + t + ") from disposed module " + e), S = []), p(t)
   };
   for (var i in p) Object.prototype.hasOwnProperty.call(p, i) && (m ? Object.defineProperty(r, i, function(e) {
    return {
     configurable: !0,
     enumerable: !0,
     get: function() {
      return p[e]
     },
     set: function(t) {
      p[e] = t
     }
    }
   }(i)) : r[i] = p[i]);
   return m ? Object.defineProperty(r, "e", {
    enumerable: !0,
    value: t
   }) : r.e = t, r
  }

  function i(e) {
   var t = {
    _acceptedDependencies: {},
    _declinedDependencies: {},
    _selfAccepted: !1,
    _selfDeclined: !1,
    _disposeHandlers: [],
    active: !0,
    accept: function(e, n) {
     if ("undefined" == typeof e) t._selfAccepted = !0;
     else if ("function" == typeof e) t._selfAccepted = e;
     else if ("object" == typeof e)
      for (var r = 0; r < e.length; r++) t._acceptedDependencies[e[r]] = n;
     else t._acceptedDependencies[e] = n
    },
    decline: function(e) {
     if ("undefined" == typeof e) t._selfDeclined = !0;
     else if ("number" == typeof e) t._declinedDependencies[e] = !0;
     else
      for (var n = 0; n < e.length; n++) t._declinedDependencies[e[n]] = !0
    },
    dispose: function(e) {
     t._disposeHandlers.push(e)
    },
    addDisposeHandler: function(e) {
     t._disposeHandlers.push(e)
    },
    removeDisposeHandler: function(e) {
     var n = t._disposeHandlers.indexOf(e);
     n >= 0 && t._disposeHandlers.splice(n, 1)
    },
    check: s,
    apply: h,
    status: function(e) {
     return e ? (C.push(e), void 0) : E
    },
    addStatusHandler: function(e) {
     C.push(e)
    },
    removeStatusHandler: function(e) {
     var t = C.indexOf(e);
     t >= 0 && C.splice(t, 1)
    },
    data: _[e]
   };
   return t
  }

  function o(e) {
   E = e;
   for (var t = 0; t < C.length; t++) C[t].call(null, e)
  }

  function a(e) {
   var t = +e + "" === e;
   return t ? +e : e
  }

  function s(e, t) {
   if ("idle" !== E) throw new Error("check() is only allowed in idle status");
   "function" == typeof e ? (w = !1, t = e) : (w = e, t = t || function(e) {
    if (e) throw e
   }), o("check"), n(function(e, n) {
    if (e) return t(e);
    if (!n) return o("idle"), t(null, null), void 0;
    P = {}, R = {}, A = {};
    for (var r = 0; r < n.c.length; r++) R[n.c[r]] = !0;
    b = n.h, o("prepare"), v = t, y = {};
    var i = 0;
    l(i), "prepare" === E && 0 === M && 0 === T && c()
   })
  }

  function u(e, t) {
   if (R[e] && P[e]) {
    P[e] = !1;
    for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (y[n] = t[n]);
    0 === --T && 0 === M && c()
   }
  }

  function l(e) {
   R[e] ? (P[e] = !0, T++, t(e)) : A[e] = !0
  }

  function c() {
   o("ready");
   var e = v;
   if (v = null, e)
    if (w) h(w, e);
    else {
     var t = [];
     for (var n in y) Object.prototype.hasOwnProperty.call(y, n) && t.push(a(n));
     e(null, t)
    }
  }

  function h(t, n) {
   function r(e) {
    for (var t = [e], n = {}, r = t.slice(); r.length > 0;) {
     var o = r.pop(),
      e = I[o];
     if (e && !e.hot._selfAccepted) {
      if (e.hot._selfDeclined) return new Error("Aborted because of self decline: " + o);
      if (0 === o) return;
      for (var a = 0; a < e.parents.length; a++) {
       var s = e.parents[a],
        u = I[s];
       if (u.hot._declinedDependencies[o]) return new Error("Aborted because of declined dependency: " + o + " in " + s);
       t.indexOf(s) >= 0 || (u.hot._acceptedDependencies[o] ? (n[s] || (n[s] = []), i(n[s], [o])) : (delete n[s], t.push(s), r.push(s)))
      }
     }
    }
    return [t, n]
   }

   function i(e, t) {
    for (var n = 0; n < t.length; n++) {
     var r = t[n];
     e.indexOf(r) < 0 && e.push(r)
    }
   }
   if ("ready" !== E) throw new Error("apply() is only allowed in ready status");
   "function" == typeof t ? (n = t, t = {}) : t && "object" == typeof t ? n = n || function(e) {
    if (e) throw e
   } : (t = {}, n = n || function(e) {
    if (e) throw e
   });
   var s = {},
    u = [],
    l = {};
   for (var c in y)
    if (Object.prototype.hasOwnProperty.call(y, c)) {
     var h = a(c),
      d = r(h);
     if (!d) {
      if (t.ignoreUnaccepted) continue;
      return o("abort"), n(new Error("Aborted because " + h + " is not accepted"))
     }
     if (d instanceof Error) return o("abort"), n(d);
     l[h] = y[h], i(u, d[0]);
     for (var h in d[1]) Object.prototype.hasOwnProperty.call(d[1], h) && (s[h] || (s[h] = []), i(s[h], d[1][h]))
    } for (var f = [], m = 0; m < u.length; m++) {
    var h = u[m];
    I[h] && I[h].hot._selfAccepted && f.push({
     module: h,
     errorHandler: I[h].hot._selfAccepted
    })
   }
   o("dispose");
   for (var g = u.slice(); g.length > 0;) {
    var h = g.pop(),
     v = I[h];
    if (v) {
     for (var w = {}, C = v.hot._disposeHandlers, T = 0; T < C.length; T++) {
      var M = C[T];
      M(w)
     }
     _[h] = w, v.hot.active = !1, delete I[h];
     for (var T = 0; T < v.children.length; T++) {
      var A = I[v.children[T]];
      if (A) {
       var P = A.parents.indexOf(h);
       P >= 0 && A.parents.splice(P, 1)
      }
     }
    }
   }
   for (var h in s)
    if (Object.prototype.hasOwnProperty.call(s, h))
     for (var v = I[h], R = s[h], T = 0; T < R.length; T++) {
      var k = R[T],
       P = v.children.indexOf(k);
      P >= 0 && v.children.splice(P, 1)
     }
   o("apply"), x = b;
   for (var h in l) Object.prototype.hasOwnProperty.call(l, h) && (e[h] = l[h]);
   var D = null;
   for (var h in s)
    if (Object.prototype.hasOwnProperty.call(s, h)) {
     for (var v = I[h], R = s[h], V = [], m = 0; m < R.length; m++) {
      var k = R[m],
       M = v.hot._acceptedDependencies[k];
      V.indexOf(M) >= 0 || V.push(M)
     }
     for (var m = 0; m < V.length; m++) {
      var M = V[m];
      try {
       M(s)
      } catch (L) {
       D || (D = L)
      }
     }
    } for (var m = 0; m < f.length; m++) {
    var B = f[m],
     h = B.module;
    S = [h];
    try {
     p(h)
    } catch (L) {
     if ("function" == typeof B.errorHandler) try {
      B.errorHandler(L)
     } catch (L) {
      D || (D = L)
     } else D || (D = L)
    }
   }
   return D ? (o("fail"), n(D)) : (o("idle"), n(null, u), void 0)
  }

  function p(t) {
   if (I[t]) return I[t].exports;
   var n = I[t] = {
    exports: {},
    id: t,
    loaded: !1,
    hot: i(t),
    parents: S,
    children: []
   };
   return e[t].call(n.exports, n, n.exports, r(t)), n.loaded = !0, n.exports
  }
  var d = {},
   f = d.webpackHotUpdate;
  d.webpackHotUpdate = function(e, t) {
   u(e, t), f && f(e, t)
  };
  var m = !1;
  try {
   Object.defineProperty({}, "x", {
    get: function() {}
   }), m = !0
  } catch (g) {}
  var v, y, b, w = !0,
   x = "cac23860c44b0ba80f83",
   _ = {},
   S = [],
   C = [],
   E = "idle",
   T = 0,
   M = 0,
   A = {},
   P = {},
   R = {},
   I = {};
  return p.m = e, p.c = I, p.p = "build/", p.h = function() {
   return x
  }, r(0)(0)
 }([function(e, t, n) {
  e.exports = n(1)
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }
  var i = n(2),
   o = r(i);
  d.ChromePicker = o.default
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.Chrome = void 0;
  var s = Object.assign || function(e) {
    for (var t = 1; t < arguments.length; t++) {
     var n = arguments[t];
     for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
    }
    return e
   },
   u = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   l = n(3),
   c = r(l),
   h = n(4),
   p = r(h),
   d = n(15),
   f = n(29),
   m = r(f),
   g = n(30),
   v = r(g),
   y = n(17),
   b = r(y),
   w = n(31),
   x = r(w),
   _ = t.Chrome = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = b.default.bind(r, r, arguments[0], arguments[1]), r.handleChange = function(e) {
      r.props.onChange(e)
     }, a = n, o(r, a)
    }
    return a(t, e), u(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        picker: {
         width: "100%"
        },
        saturation: {
         width: "100%",
         height: "48px",
         position: "relative",
         borderRadius: "0px",
         overflow: "hidden"
        },
        Saturation: {
         radius: "0px"
        },
        body: {
         padding: "0"
        },
        controls: {
         marginTop: "1px",
         display: "block"
        },
        swatch: {
         marginTop: "0px",
         width: "16px",
         height: "16px",
         borderRadius: "8px",
         position: "relative",
         overflow: "hidden"
        },
        active: {
         Absolute: "0 0 0 0",
         zIndex: 2,
         borderRadius: "8px",
         boxShadow: "inset 0 0 0 1px rgba(0,0,0,.1)",
         background: "rgba(" + this.props.rgb.r + ", " + this.props.rgb.g + ", " + this.props.rgb.b + ", " + this.props.rgb.a + ")"
        },
        hue: {
         height: "16px",
         position: "relative",
         width: "100%"
        },
        Hue: {
         radius: "0"
        },
        colors: {
         marginTop: "1px",
         display: "flex",
         flexDirection: "row"
        }
       }
      }
     }
    }, {
     key: "render",
     value: function() {
      var e = [];
      if (this.props.colors)
       for (var t = 0; t < this.props.colors.length; t++) {
        var n = this.props.colors[t];
        e.push(c.default.createElement(x.default, {
         key: n,
         color: n,
         active: n.replace("#", "").toLowerCase() == this.props.hex,
         onClick: this.handleChange
        }))
       }
      return c.default.createElement("div", {
       style: this.styles().picker
      }, c.default.createElement("div", {
       style: this.styles().saturation
      }, c.default.createElement(d.Saturation, s({}, this.styles().Saturation, this.props, {
       pointer: v.default,
       onChange: this.handleChange
      }))), c.default.createElement("div", {
       style: this.styles().body
      }, c.default.createElement("div", {
       style: this.styles().hue
      }, c.default.createElement(d.Hue, s({}, this.styles().Hue, this.props, {
       pointer: m.default,
       onChange: this.handleChange
      }))), c.default.createElement("div", {
       style: this.styles().colors
      }, e)))
     }
    }]), t
   }(p.default.Component);
  _.defaultProps = {
   colors: ["#000000", "#808080", "#FFFFFF", "#D33115", "#E27300", "#FCC400", "#B0BC00", "#68BC00", "#16A5A5", "#009CE0", "#7B64FF", "#FA28FF", "#E20F2E"]
  }, t.default = d.ColorWrap(_)
 }, function(t) {
  t.exports = e
 }, function(e, t, n) {
  e.exports = {
   Component: n(5),
   inline: n(6),
   mixin: {
    css: n(6)
   }
  }
 }, function(e, t, n) {
  function r(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function i(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  var o = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   a = function(e, t, n) {
    for (var r = !0; r;) {
     var i = e,
      o = t,
      a = n;
     r = !1, null === i && (i = Function.prototype);
     var s = Object.getOwnPropertyDescriptor(i, o);
     if (void 0 !== s) {
      if ("value" in s) return s.value;
      var u = s.get;
      if (void 0 === u) return;
      return u.call(a)
     }
     var l = Object.getPrototypeOf(i);
     if (null === l) return;
     e = l, t = o, n = a, r = !0, s = l = void 0
    }
   },
   s = n(3),
   u = n(6),
   l = function(e) {
    function t() {
     r(this, t), a(Object.getPrototypeOf(t.prototype), "constructor", this).apply(this, arguments)
    }
    return i(t, e), o(t, [{
     key: "css",
     value: function(e) {
      return u.call(this, e)
     }
    }, {
     key: "styles",
     value: function() {
      return this.css()
     }
    }]), t
   }(s.Component);
  l.contextTypes = {
   mixins: s.PropTypes.object
  }, e.exports = l
 }, function(e, t, n) {
  var r = n(7),
   i = n(8),
   o = n(9);
  e.exports = function(e) {
   var t = this;
   o = n(9);
   var a = [];
   if (!this.classes) throw console.warn("Define this.classes on `" + this.constructor.name + "`");
   i(this.classes());
   var s = function(e, n) {
    t.classes()[e] ? a.push(t.classes()[e]) : e && n && n.warn === !0 && console.warn("The `" + e + "` css class does not exist on `" + t.constructor.name + "`")
   };
   s("default");
   for (var u in this.props) {
    var l = this.props[u];
    r(l) || (l === !0 ? (s(u), s(u + "-true")) : s(l ? u + "-" + l : u + "-false"))
   }
   if (this.props && this.props.activeBounds)
    for (var c = 0; c < this.props.activeBounds.length; c++) {
     var h = this.props.activeBounds[c];
     s(h)
    }
   for (var p in e) {
    var d = e[p];
    d === !0 && s(p, {
     warn: !0
    })
   }
   var f = {};
   return this.context && this.context.mixins && (f = this.context.mixins), o(a, f)
  }
 }, function(e) {
  function t(e) {
   var t = typeof e;
   return !!e && ("object" == t || "function" == t)
  }
  e.exports = t
 }, function(e, t, n) {
  var r = n(7);
  e.exports = function(e) {
   for (var t in e) {
    var n = e[t];
    if (r(n))
     for (var i in n) {
      var o = n[i];
      r(o) || console.warn("Make sure the value of the element `" + t + "` is an object of css. You passed it `" + n + "`")
     } else console.warn("Make sure the value of `" + t + "` is an object of html elements. You passed it `" + n + "`")
   }
  }
 }, function(e, t, n) {
  var r = n(10),
   i = n(14);
  e.exports = function(e, t) {
   var n = r(e);
   return i(n, t)
  }
 }, function(e, t, n) {
  var r = n(11),
   i = n(7),
   o = n(13);
  e.exports = function(e) {
   return i(e) && !o(e) ? e : 1 === e.length ? e[0] : r.recursive.apply(void 0, e)
  }
 }, function(e, t, n) {
  (function(e) {
   ! function(t) {
    function n(e, t) {
     if ("object" !== i(e)) return t;
     for (var r in t) e[r] = "object" === i(e[r]) && "object" === i(t[r]) ? n(e[r], t[r]) : t[r];
     return e
    }

    function r(e, t, r) {
     var a = r[0],
      s = r.length;
     (e || "object" !== i(a)) && (a = {});
     for (var u = 0; s > u; ++u) {
      var l = r[u],
       c = i(l);
      if ("object" === c)
       for (var h in l) {
        var p = e ? o.clone(l[h]) : l[h];
        a[h] = t ? n(a[h], p) : p
       }
     }
     return a
    }

    function i(e) {
     return {}.toString.call(e).slice(8, -1).toLowerCase()
    }
    var o = function(e) {
      return r(e === !0, !1, arguments)
     },
     a = "merge";
    o.recursive = function(e) {
     return r(e === !0, !0, arguments)
    }, o.clone = function(e) {
     var t, n, r = e,
      a = i(e);
     if ("array" === a)
      for (r = [], n = e.length, t = 0; n > t; ++t) r[t] = o.clone(e[t]);
     else if ("object" === a) {
      r = {};
      for (t in e) r[t] = o.clone(e[t])
     }
     return r
    }, t ? e.exports = o : window[a] = o
   }("object" == typeof e && e && "object" == typeof e.exports && e.exports)
  }).call(t, n(12)(e))
 }, function(e) {
  e.exports = function(e) {
   return e.webpackPolyfill || (e.deprecate = function() {}, e.paths = [], e.children = [], e.webpackPolyfill = 1), e
  }
 }, function(e) {
  var t = Array.isArray;
  e.exports = t
 }, function(e, t, n) {
  var r = n(7),
   i = n(13),
   o = n(11),
   a = {
    borderRadius: function(e) {
     return null !== e ? {
      msBorderRadius: e,
      MozBorderRadius: e,
      OBorderRadius: e,
      WebkitBorderRadius: e,
      borderRadius: e
     } : void 0
    },
    boxShadow: function(e) {
     return null !== e ? {
      msBoxShadow: e,
      MozBoxShadow: e,
      OBoxShadow: e,
      WebkitBoxShadow: e,
      boxShadow: e
     } : void 0
    },
    userSelect: function(e) {
     return null !== e ? {
      WebkitTouchCallout: e,
      KhtmlUserSelect: e,
      MozUserSelect: e,
      msUserSelect: e,
      WebkitUserSelect: e,
      userSelect: e
     } : void 0
    },
    flex: function(e) {
     return null !== e ? {
      WebkitBoxFlex: e,
      MozBoxFlex: e,
      WebkitFlex: e,
      msFlex: e,
      flex: e
     } : void 0
    },
    flexBasis: function(e) {
     return null !== e ? {
      WebkitFlexBasis: e,
      flexBasis: e
     } : void 0
    },
    justifyContent: function(e) {
     return null !== e ? {
      WebkitJustifyContent: e,
      justifyContent: e
     } : void 0
    },
    transition: function(e) {
     return null !== e ? {
      msTransition: e,
      MozTransition: e,
      OTransition: e,
      WebkitTransition: e,
      transition: e
     } : void 0
    },
    transform: function(e) {
     return null !== e ? {
      msTransform: e,
      MozTransform: e,
      OTransform: e,
      WebkitTransform: e,
      transform: e
     } : void 0
    },
    Absolute: function(e) {
     if (null !== e) {
      var t = e.split(" ");
      return {
       position: "absolute",
       top: t[0],
       right: t[1],
       bottom: t[2],
       left: t[3]
      }
     }
    },
    Extend: function(e, t) {
     var n = t[e];
     return n ? n : void 0
    }
   },
   s = function u(e, t, n) {
    var s = o(t, a),
     l = {};
    for (var c in e) {
     var h = e[c];
     if (r(h) && !i(h)) l[c] = u(h, t, e);
     else if (s[c]) {
      var p = s[c](h, n);
      for (var d in p) {
       var f = p[d];
       l[d] = f
      }
     } else l[c] = h
    }
    return l
   };
  e.exports = function(e, t, n) {
   return s(e, t, n)
  }
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  });
  var i = n(16);
  Object.defineProperty(t, "Alpha", {
   enumerable: !0,
   get: function() {
    return r(i).default
   }
  });
  var o = n(20);
  Object.defineProperty(t, "Checkboard", {
   enumerable: !0,
   get: function() {
    return r(o).default
   }
  });
  var a = n(21);
  Object.defineProperty(t, "Hue", {
   enumerable: !0,
   get: function() {
    return r(a).default
   }
  });
  var s = n(22);
  Object.defineProperty(t, "Saturation", {
   enumerable: !0,
   get: function() {
    return r(s).default
   }
  });
  var u = n(24);
  Object.defineProperty(t, "ColorWrap", {
   enumerable: !0,
   get: function() {
    return r(u).default
   }
  })
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.Alpha = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(17),
   d = r(p),
   f = n(20),
   m = r(f),
   g = t.Alpha = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = d.default.bind(r, r, arguments[0], arguments[1]), r.handleChange = function(e, t) {
      !t && e.preventDefault();
      var n, i = r.refs.container,
       o = i.clientWidth,
       a = (e.pageX || e.touches[0].pageX) - (i.getBoundingClientRect().left + window.pageXOffset);
      n = 0 > a ? 0 : a > o ? 1 : Math.round(100 * a / o) / 100, r.props.a !== n && r.props.onChange({
       h: r.props.hsl.h,
       s: r.props.hsl.s,
       l: r.props.hsl.l,
       a: n,
       source: "rgb"
      })
     }, r.handleMouseDown = function(e) {
      r.handleChange(e, !0), window.addEventListener("mousemove", r.handleChange), window.addEventListener("mouseup", r.handleMouseUp)
     }, r.handleMouseUp = function() {
      r.unbindEventListeners()
     }, r.unbindEventListeners = function() {
      window.removeEventListener("mousemove", r.handleChange), window.removeEventListener("mouseup", r.handleMouseUp)
     }, a = n, o(r, a)
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        alpha: {
         Absolute: "0 0 0 0",
         borderRadius: this.props.radius
        },
        checkboard: {
         Absolute: "0 0 0 0",
         overflow: "hidden"
        },
        gradient: {
         Absolute: "0 0 0 0",
         background: "linear-gradient(to right, rgba(" + this.props.rgb.r + ", " + this.props.rgb.g + ", " + this.props.rgb.b + ", 0) 0%, rgba(" + this.props.rgb.r + ", " + this.props.rgb.g + ", " + this.props.rgb.b + ", 1) 100%)",
         boxShadow: this.props.shadow,
         borderRadius: this.props.radius
        },
        container: {
         position: "relative",
         zIndex: "2",
         height: "100%",
         margin: "0 3px"
        },
        pointer: {
         zIndex: "2",
         position: "absolute",
         left: 100 * this.props.rgb.a + "%"
        },
        slider: {
         width: "4px",
         borderRadius: "1px",
         height: "8px",
         boxShadow: "0 0 2px rgba(0, 0, 0, .6)",
         background: "#fff",
         marginTop: "1px",
         transform: "translateX(-2px)"
        }
       }
      }
     }
    }, {
     key: "componentWillUnmount",
     value: function() {
      this.unbindEventListeners()
     }
    }, {
     key: "render",
     value: function() {
      var e = l.default.createElement("div", {
       style: this.styles().slider
      });
      return this.props.pointer && (e = l.default.createElement(this.props.pointer, this.props)), l.default.createElement("div", {
       style: this.styles().alpha
      }, l.default.createElement("div", {
       style: this.styles().checkboard
      }, l.default.createElement(m.default, null)), l.default.createElement("div", {
       style: this.styles().gradient
      }), l.default.createElement("div", {
       style: this.styles().container,
       ref: "container",
       onMouseDown: this.handleMouseDown,
       onTouchMove: this.handleChange,
       onTouchStart: this.handleChange
      }, l.default.createElement("div", {
       style: this.styles().pointer,
       ref: "pointer"
      }, e)))
     }
    }]), t
   }(h.default.Component);
  t.default = g
 }, function(e, t, n) {
  e.exports = n(18)
 }, function(e, t, n) {
  function r(e, t, n) {
   return !i(e.props, t) || !i(e.state, n)
  }
  var i = n(19);
  e.exports = r
 }, function(e) {
  function t(e, t) {
   if (e === t) return !0;
   if ("object" != typeof e || null === e || "object" != typeof t || null === t) return !1;
   var r = Object.keys(e),
    i = Object.keys(t);
   if (r.length !== i.length) return !1;
   for (var o = n.bind(t), a = 0; a < r.length; a++)
    if (!o(r[a]) || e[r[a]] !== t[r[a]]) return !1;
   return !0
  }
  var n = Object.prototype.hasOwnProperty;
  e.exports = t
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }

  function s(e, t, n) {
   if ("undefined" == typeof document) return null;
   var r = document.createElement("canvas");
   r.width = r.height = 2 * n;
   var i = r.getContext("2d");
   return i ? (i.fillStyle = e, i.fillRect(0, 0, r.width, r.height), i.fillStyle = t, i.fillRect(0, 0, n, n), i.translate(n, n), i.fillRect(0, 0, n, n), r.toDataURL()) : null
  }

  function u(e, t, n) {
   var r = e + "," + t + "," + n;
   if (g[r]) return g[r];
   var i = s(e, t, n);
   return g[r] = i, i
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.Checkboard = void 0;
  var l = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   c = n(3),
   h = r(c),
   p = n(4),
   d = r(p),
   f = n(17),
   m = r(f),
   g = {},
   v = t.Checkboard = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = m.default.bind(r, r, arguments[0], arguments[1]), a = n, o(r, a)
    }
    return a(t, e), l(t, [{
     key: "classes",
     value: function() {
      var e = u(this.props.white, this.props.grey, this.props.size);
      return {
       "default": {
        grid: {
         Absolute: "0 0 0 0",
         background: "url(" + e + ") center left"
        }
       }
      }
     }
    }, {
     key: "render",
     value: function() {
      return h.default.createElement("div", {
       style: this.styles().grid,
       ref: "grid"
      })
     }
    }]), t
   }(d.default.Component);
  v.defaultProps = {
   size: 8,
   white: "#fff",
   grey: "#e6e6e6"
  }, t.default = v
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.Hue = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(17),
   d = r(p),
   f = t.Hue = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = d.default.bind(r, r, arguments[0], arguments[1]), r.handleChange = function(e, t) {
      !t && e.preventDefault();
      var n = r.refs.container,
       i = n.clientWidth,
       o = n.clientHeight,
       a = (e.pageX || e.touches && e.touches[0].pageX || 0) - (n.getBoundingClientRect().left + window.pageXOffset),
       s = (e.pageY || e.touches && e.touches[0].pageY || 0) - (n.getBoundingClientRect().top + window.pageYOffset);
      if ("vertical" === r.props.direction) {
       var u;
       if (0 > s) u = 359;
       else if (s > o) u = 0;
       else {
        var l = -(100 * s / o) + 100;
        u = 360 * l / 100
       }
       r.props.hsl.h !== u && r.props.onChange({
        h: u,
        s: r.props.hsl.s,
        l: r.props.hsl.l,
        a: r.props.hsl.a,
        source: "rgb"
       })
      } else {
       var u;
       if (0 > a) u = 0;
       else if (a > i) u = 359;
       else {
        var l = 100 * a / i;
        u = 360 * l / 100
       }
       r.props.hsl.h !== u && r.props.onChange({
        h: u,
        s: r.props.hsl.s,
        l: r.props.hsl.l,
        a: r.props.hsl.a,
        source: "rgb"
       })
      }
     }, r.handleMouseDown = function(e) {
      r.handleChange(e, !0), window.addEventListener("mousemove", r.handleChange), window.addEventListener("mouseup", r.handleMouseUp)
     }, r.handleMouseUp = function() {
      r.unbindEventListeners()
     }, a = n, o(r, a)
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        hue: {
         Absolute: "0 0 0 0",
         background: "linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",
         borderRadius: this.props.radius,
         boxShadow: this.props.shadow
        },
        container: {
         margin: "0 2px",
         position: "relative",
         height: "100%"
        },
        pointer: {
         zIndex: "2",
         position: "absolute",
         left: 100 * this.props.hsl.h / 360 + "%"
        },
        slider: {
         marginTop: "1px",
         width: "4px",
         borderRadius: "1px",
         height: "8px",
         boxShadow: "0 0 2px rgba(0, 0, 0, .6)",
         background: "#fff",
         transform: "translateX(-2px)"
        }
       },
       "direction-vertical": {
        hue: {
         background: "linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"
        },
        pointer: {
         left: "0",
         top: -(100 * this.props.hsl.h / 360) + 100 + "%"
        }
       }
      }
     }
    }, {
     key: "componentWillUnmount",
     value: function() {
      this.unbindEventListeners()
     }
    }, {
     key: "unbindEventListeners",
     value: function() {
      window.removeEventListener("mousemove", this.handleChange), window.removeEventListener("mouseup", this.handleMouseUp)
     }
    }, {
     key: "render",
     value: function() {
      var e = l.default.createElement("div", {
       style: this.styles().slider
      });
      return this.props.pointer && (e = l.default.createElement(this.props.pointer, this.props)), l.default.createElement("div", {
       style: this.styles().hue
      }, l.default.createElement("div", {
       style: this.styles().container,
       ref: "container",
       onMouseDown: this.handleMouseDown,
       onTouchMove: this.handleChange,
       onTouchStart: this.handleChange
      }, l.default.createElement("div", {
       style: this.styles().pointer,
       ref: "pointer"
      }, e)))
     }
    }]), t
   }(h.default.Component);
  t.default = f
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.Saturation = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(23),
   d = r(p),
   f = n(17),
   m = r(f),
   g = t.Saturation = function(e) {
    function t() {
     i(this, t);
     var e = o(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
     return e.shouldComponentUpdate = m.default.bind(e, e, arguments[0], arguments[1]), e.handleChange = function(t, n) {
      !n && t.preventDefault();
      var r = e.refs.container,
       i = r.clientWidth,
       o = r.clientHeight,
       a = (t.pageX || t.touches[0].pageX) - (r.getBoundingClientRect().left + window.pageXOffset),
       s = (t.pageY || t.touches[0].pageY) - (r.getBoundingClientRect().top + window.pageYOffset);
      0 > a ? a = 0 : a > i ? a = i : 0 > s ? s = 0 : s > o && (s = o);
      var u = 100 * a / i,
       l = -(100 * s / o) + 100;
      e.throttle(e.props.onChange, {
       h: e.props.hsl.h,
       s: u,
       v: l,
       a: e.props.hsl.a,
       source: "rgb"
      })
     }, e.handleMouseDown = function(t) {
      e.handleChange(t, !0), window.addEventListener("mousemove", e.handleChange), window.addEventListener("mouseup", e.handleMouseUp)
     }, e.handleMouseUp = function() {
      e.unbindEventListeners()
     }, e.throttle = d.default(function(e, t) {
      e(t)
     }, 50), e
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        color: {
         Absolute: "0 0 0 0",
         background: "hsl(" + this.props.hsl.h + ",100%, 50%)",
         borderRadius: this.props.radius
        },
        white: {
         Absolute: "0 0 0 0",
         background: "linear-gradient(to right, #fff, rgba(255,255,255,0))"
        },
        black: {
         Absolute: "0 0 0 0",
         background: "linear-gradient(to top, #000, rgba(0,0,0,0))",
         boxShadow: this.props.shadow
        },
        pointer: {
         position: "absolute",
         top: -(100 * this.props.hsv.v) + 100 + "%",
         left: 100 * this.props.hsv.s + "%",
         cursor: "default"
        },
        circle: {
         width: "4px",
         height: "4px",
         boxShadow: "0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4)",
         borderRadius: "50%",
         cursor: "hand",
         transform: "translate(-2px, -2px)"
        }
       }
      }
     }
    }, {
     key: "componentWillUnmount",
     value: function() {
      this.unbindEventListeners()
     }
    }, {
     key: "unbindEventListeners",
     value: function() {
      window.removeEventListener("mousemove", this.handleChange), window.removeEventListener("mouseup", this.handleMouseUp)
     }
    }, {
     key: "render",
     value: function() {
      var e = l.default.createElement("div", {
       style: this.styles().circle
      });
      return this.props.pointer && (e = l.default.createElement(this.props.pointer, this.props)), l.default.createElement("div", {
       style: this.styles().color,
       ref: "container",
       onMouseDown: this.handleMouseDown,
       onTouchMove: this.handleChange,
       onTouchStart: this.handleChange
      }, l.default.createElement("div", {
       style: this.styles().white
      }, l.default.createElement("div", {
       style: this.styles().black
      }), l.default.createElement("div", {
       style: this.styles().pointer,
       ref: "pointer"
      }, e)))
     }
    }]), t
   }(h.default.Component);
  t.default = g
 }, function(e, t) {
  (function(t) {
   function n(e, t, n) {
    function r(t) {
     var n = m,
      r = g;
     return m = g = void 0, C = t, y = e.apply(r, n)
    }

    function o(e) {
     return C = e, b = setTimeout(c, t), E ? r(e) : y
    }

    function a(e) {
     var n = e - w,
      r = e - C,
      i = t - n;
     return T ? _(i, v - r) : i
    }

    function l(e) {
     var n = e - w,
      r = e - C;
     return void 0 === w || n >= t || 0 > n || T && r >= v
    }

    function c() {
     var e = S();
     return l(e) ? h(e) : (b = setTimeout(c, a(e)), void 0)
    }

    function h(e) {
     return b = void 0, M && m ? r(e) : (m = g = void 0, y)
    }

    function p() {
     void 0 !== b && clearTimeout(b), C = 0, m = w = g = b = void 0
    }

    function d() {
     return void 0 === b ? y : h(S())
    }

    function f() {
     var e = S(),
      n = l(e);
     if (m = arguments, g = this, w = e, n) {
      if (void 0 === b) return o(w);
      if (T) return b = setTimeout(c, t), r(w)
     }
     return void 0 === b && (b = setTimeout(c, t)), y
    }
    var m, g, v, y, b, w, C = 0,
     E = !1,
     T = !1,
     M = !0;
    if ("function" != typeof e) throw new TypeError(u);
    return t = s(t) || 0, i(n) && (E = !!n.leading, T = "maxWait" in n, v = T ? x(s(n.maxWait) || 0, t) : v, M = "trailing" in n ? !!n.trailing : M), f.cancel = p, f.flush = d, f
   }

   function r(e, t, r) {
    var o = !0,
     a = !0;
    if ("function" != typeof e) throw new TypeError(u);
    return i(r) && (o = "leading" in r ? !!r.leading : o, a = "trailing" in r ? !!r.trailing : a), n(e, t, {
     leading: o,
     maxWait: t,
     trailing: a
    })
   }

   function i(e) {
    var t = typeof e;
    return !!e && ("object" == t || "function" == t)
   }

   function o(e) {
    return !!e && "object" == typeof e
   }

   function a(e) {
    return "symbol" == typeof e || o(e) && w.call(e) == c
   }

   function s(e) {
    if ("number" == typeof e) return e;
    if (a(e)) return l;
    if (i(e)) {
     var t = "function" == typeof e.valueOf ? e.valueOf() : e;
     e = i(t) ? t + "" : t
    }
    if ("string" != typeof e) return 0 === e ? e : +e;
    e = e.replace(h, "");
    var n = d.test(e);
    return n || f.test(e) ? m(e.slice(2), n ? 2 : 8) : p.test(e) ? l : +e
   }
   var u = "Expected a function",
    l = 0 / 0,
    c = "[object Symbol]",
    h = /^\s+|\s+$/g,
    p = /^[-+]0x[0-9a-f]+$/i,
    d = /^0b[01]+$/i,
    f = /^0o[0-7]+$/i,
    m = parseInt,
    g = "object" == typeof t && t && t.Object === Object && t,
    v = "object" == typeof self && self && self.Object === Object && self,
    y = g || v || Function("return this")(),
    b = Object.prototype,
    w = b.toString,
    x = Math.max,
    _ = Math.min,
    S = function() {
     return y.Date.now()
    };
   e.exports = r
  }).call(t, function() {
   return this
  }())
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.ColorWrap = void 0;
  var s = Object.assign || function(e) {
    for (var t = 1; t < arguments.length; t++) {
     var n = arguments[t];
     for (var r in n) Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
    }
    return e
   },
   u = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   l = n(3),
   c = r(l),
   h = n(11),
   p = r(h),
   d = n(25),
   f = (r(d), n(26)),
   m = r(f),
   g = n(27),
   v = r(g),
   y = n(17),
   b = r(y),
   w = t.ColorWrap = function(e) {
    var t = function(t) {
     function n(e) {
      i(this, n);
      var t = o(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this));
      return t.shouldComponentUpdate = b.default.bind(t, t, arguments[0], arguments[1]), t.handleChange = function(e) {
       if (e = v.default.simpleCheckForValidColor(e)) {
        var n = v.default.toState(e, e.h || t.state.oldHue);
        t.setState(n), t.props.onChangeComplete && t.debounce(t.props.onChangeComplete, n), t.props.onChange && t.props.onChange(n)
       }
      }, t.state = p.default(v.default.toState(e.color, 0), {
       visible: e.display
      }), t.debounce = m.default(function(e, t) {
       e(t)
      }, 100), t
     }
     return a(n, t), u(n, [{
      key: "componentWillReceiveProps",
      value: function(e) {
       this.setState(p.default(v.default.toState(e.color, this.state.oldHue), {
        visible: e.display
       }))
      }
     }, {
      key: "render",
      value: function() {
       return c.default.createElement(e, s({}, this.props, this.state, {
        onChange: this.handleChange
       }))
      }
     }]), n
    }(c.default.Component);
    return t.defaultProps = {
     color: {
      h: 250,
      s: .5,
      l: .2,
      a: 1
     }
    }, t
   };
  t.default = w
 }, function(e) {
  function t(e) {
   var t = !1;
   if (null != e && "function" != typeof e.toString) try {
    t = !!(e + "")
   } catch (n) {}
   return t
  }

  function n(e, t) {
   return function(n) {
    return e(t(n))
   }
  }

  function r(e) {
   return !!e && "object" == typeof e
  }

  function i(e) {
   if (!r(e) || h.call(e) != o || t(e)) return !1;
   var n = p(e);
   if (null === n) return !0;
   var i = l.call(n, "constructor") && n.constructor;
   return "function" == typeof i && i instanceof i && u.call(i) == c
  }
  var o = "[object Object]",
   a = Function.prototype,
   s = Object.prototype,
   u = a.toString,
   l = s.hasOwnProperty,
   c = u.call(Object),
   h = s.toString,
   p = n(Object.getPrototypeOf, Object);
  e.exports = i
 }, function(e, t) {
  (function(t) {
   function n(e, t, n) {
    function i(t) {
     var n = m,
      r = g;
     return m = g = void 0, C = t, y = e.apply(r, n)
    }

    function o(e) {
     return C = e, b = setTimeout(c, t), E ? i(e) : y
    }

    function u(e) {
     var n = e - S,
      r = e - C,
      i = t - n;
     return T ? x(i, v - r) : i
    }

    function l(e) {
     var n = e - S,
      r = e - C;
     return void 0 === S || n >= t || 0 > n || T && r >= v
    }

    function c() {
     var e = _();
     return l(e) ? h(e) : (b = setTimeout(c, u(e)), void 0)
    }

    function h(e) {
     return b = void 0, M && m ? i(e) : (m = g = void 0, y)
    }

    function p() {
     void 0 !== b && clearTimeout(b), C = 0, m = S = g = b = void 0
    }

    function d() {
     return void 0 === b ? y : h(_())
    }

    function f() {
     var e = _(),
      n = l(e);
     if (m = arguments, g = this, S = e, n) {
      if (void 0 === b) return o(S);
      if (T) return b = setTimeout(c, t), i(S)
     }
     return void 0 === b && (b = setTimeout(c, t)), y
    }
    var m, g, v, y, b, S, C = 0,
     E = !1,
     T = !1,
     M = !0;
    if ("function" != typeof e) throw new TypeError(s);
    return t = a(t) || 0, r(n) && (E = !!n.leading, T = "maxWait" in n, v = T ? w(a(n.maxWait) || 0, t) : v, M = "trailing" in n ? !!n.trailing : M), f.cancel = p, f.flush = d, f
   }

   function r(e) {
    var t = typeof e;
    return !!e && ("object" == t || "function" == t)
   }

   function i(e) {
    return !!e && "object" == typeof e
   }

   function o(e) {
    return "symbol" == typeof e || i(e) && b.call(e) == l
   }

   function a(e) {
    if ("number" == typeof e) return e;
    if (o(e)) return u;
    if (r(e)) {
     var t = "function" == typeof e.valueOf ? e.valueOf() : e;
     e = r(t) ? t + "" : t
    }
    if ("string" != typeof e) return 0 === e ? e : +e;
    e = e.replace(c, "");
    var n = p.test(e);
    return n || d.test(e) ? f(e.slice(2), n ? 2 : 8) : h.test(e) ? u : +e
   }
   var s = "Expected a function",
    u = 0 / 0,
    l = "[object Symbol]",
    c = /^\s+|\s+$/g,
    h = /^[-+]0x[0-9a-f]+$/i,
    p = /^0b[01]+$/i,
    d = /^0o[0-7]+$/i,
    f = parseInt,
    m = "object" == typeof t && t && t.Object === Object && t,
    g = "object" == typeof self && self && self.Object === Object && self,
    v = m || g || Function("return this")(),
    y = Object.prototype,
    b = y.toString,
    w = Math.max,
    x = Math.min,
    _ = function() {
     return v.Date.now()
    };
   e.exports = n
  }).call(t, function() {
   return this
  }())
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  });
  var i = n(28),
   o = r(i);
  t.default = {
   simpleCheckForValidColor: function(e) {
    for (var t = ["r", "g", "b", "a", "h", "s", "a", "v"], n = 0, r = 0, i = 0; i < t.length; i++) {
     var o = t[i];
     e[o] && (n++, isNaN(e[o]) || r++)
    }
    return n === r ? e : void 0
   },
   toState: function(e, t) {
    var n = e.hex ? o.default(e.hex) : o.default(e),
     r = n.toHsl(),
     i = n.toHsv();
    return 0 === r.s && (r.h = t || 0, i.h = t || 0), {
     hsl: r,
     hex: "#" + n.toHex(),
     rgb: n.toRgb(),
     hsv: i,
     oldHue: e.h || t || r.h,
     source: e.source
    }
   },
   isValidHex: function(e) {
    return o.default(e).isValid()
   }
  }
 }, function(e, t, n) {
  var r;
  ! function() {
   function i(e, t) {
    if (e = e ? e : "", t = t || {}, e instanceof i) return e;
    if (!(this instanceof i)) return new i(e, t);
    var n = o(e);
    this._originalInput = e, this._r = n.r, this._g = n.g, this._b = n.b, this._a = n.a, this._roundA = H(100 * this._a) / 100, this._format = t.format || n.format, this._gradientType = t.gradientType, this._r < 1 && (this._r = H(this._r)), this._g < 1 && (this._g = H(this._g)), this._b < 1 && (this._b = H(this._b)), this._ok = n.ok, this._tc_id = z++
   }

   function o(e) {
    var t = {
      r: 0,
      g: 0,
      b: 0
     },
     n = 1,
     r = !1,
     i = !1;
    return "string" == typeof e && (e = O(e)), "object" == typeof e && (e.hasOwnProperty("r") && e.hasOwnProperty("g") && e.hasOwnProperty("b") ? (t = a(e.r, e.g, e.b), r = !0, i = "%" === String(e.r).substr(-1) ? "prgb" : "rgb") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("v") ? (e.s = V(e.s, 1), e.v = V(e.v, 1), t = c(e.h, e.s, e.v), r = !0, i = "hsv") : e.hasOwnProperty("h") && e.hasOwnProperty("s") && e.hasOwnProperty("l") && (e.s = V(e.s), e.l = V(e.l), t = u(e.h, e.s, e.l), r = !0, i = "hsl"), e.hasOwnProperty("a") && (n = e.a)), n = M(n), {
     ok: r,
     format: e.format || i,
     r: j(255, q(t.r, 0)),
     g: j(255, q(t.g, 0)),
     b: j(255, q(t.b, 0)),
     a: n
    }
   }

   function a(e, t, n) {
    return {
     r: 255 * A(e, 255),
     g: 255 * A(t, 255),
     b: 255 * A(n, 255)
    }
   }

   function s(e, t, n) {
    e = A(e, 255), t = A(t, 255), n = A(n, 255);
    var r, i, o = q(e, t, n),
     a = j(e, t, n),
     s = (o + a) / 2;
    if (o == a) r = i = 0;
    else {
     var u = o - a;
     switch (i = s > .5 ? u / (2 - o - a) : u / (o + a), o) {
      case e:
       r = (t - n) / u + (n > t ? 6 : 0);
       break;
      case t:
       r = (n - e) / u + 2;
       break;
      case n:
       r = (e - t) / u + 4
     }
     r /= 6
    }
    return {
     h: r,
     s: i,
     l: s
    }
   }

   function u(e, t, n) {
    function r(e, t, n) {
     return 0 > n && (n += 1), n > 1 && (n -= 1), 1 / 6 > n ? e + 6 * (t - e) * n : .5 > n ? t : 2 / 3 > n ? e + (t - e) * (2 / 3 - n) * 6 : e
    }
    var i, o, a;
    if (e = A(e, 360), t = A(t, 100), n = A(n, 100), 0 === t) i = o = a = n;
    else {
     var s = .5 > n ? n * (1 + t) : n + t - n * t,
      u = 2 * n - s;
     i = r(u, s, e + 1 / 3), o = r(u, s, e), a = r(u, s, e - 1 / 3)
    }
    return {
     r: 255 * i,
     g: 255 * o,
     b: 255 * a
    }
   }

   function l(e, t, n) {
    e = A(e, 255), t = A(t, 255), n = A(n, 255);
    var r, i, o = q(e, t, n),
     a = j(e, t, n),
     s = o,
     u = o - a;
    if (i = 0 === o ? 0 : u / o, o == a) r = 0;
    else {
     switch (o) {
      case e:
       r = (t - n) / u + (n > t ? 6 : 0);
       break;
      case t:
       r = (n - e) / u + 2;
       break;
      case n:
       r = (e - t) / u + 4
     }
     r /= 6
    }
    return {
     h: r,
     s: i,
     v: s
    }
   }

   function c(e, t, n) {
    e = 6 * A(e, 360), t = A(t, 100), n = A(n, 100);
    var r = G.floor(e),
     i = e - r,
     o = n * (1 - t),
     a = n * (1 - i * t),
     s = n * (1 - (1 - i) * t),
     u = r % 6,
     l = [n, a, o, o, s, n][u],
     c = [s, n, n, a, o, o][u],
     h = [o, o, s, n, n, a][u];
    return {
     r: 255 * l,
     g: 255 * c,
     b: 255 * h
    }
   }

   function h(e, t, n, r) {
    var i = [D(H(e).toString(16)), D(H(t).toString(16)), D(H(n).toString(16))];
    return r && i[0].charAt(0) == i[0].charAt(1) && i[1].charAt(0) == i[1].charAt(1) && i[2].charAt(0) == i[2].charAt(1) ? i[0].charAt(0) + i[1].charAt(0) + i[2].charAt(0) : i.join("")
   }

   function p(e, t, n, r) {
    var i = [D(L(r)), D(H(e).toString(16)), D(H(t).toString(16)), D(H(n).toString(16))];
    return i.join("")
   }

   function d(e, t) {
    t = 0 === t ? 0 : t || 10;
    var n = i(e).toHsl();
    return n.s -= t / 100, n.s = P(n.s), i(n)
   }

   function f(e, t) {
    t = 0 === t ? 0 : t || 10;
    var n = i(e).toHsl();
    return n.s += t / 100, n.s = P(n.s), i(n)
   }

   function m(e) {
    return i(e).desaturate(100)
   }

   function g(e, t) {
    t = 0 === t ? 0 : t || 10;
    var n = i(e).toHsl();
    return n.l += t / 100, n.l = P(n.l), i(n)
   }

   function v(e, t) {
    t = 0 === t ? 0 : t || 10;
    var n = i(e).toRgb();
    return n.r = q(0, j(255, n.r - H(255 * -(t / 100)))), n.g = q(0, j(255, n.g - H(255 * -(t / 100)))), n.b = q(0, j(255, n.b - H(255 * -(t / 100)))), i(n)
   }

   function y(e, t) {
    t = 0 === t ? 0 : t || 10;
    var n = i(e).toHsl();
    return n.l -= t / 100, n.l = P(n.l), i(n)
   }

   function b(e, t) {
    var n = i(e).toHsl(),
     r = (H(n.h) + t) % 360;
    return n.h = 0 > r ? 360 + r : r, i(n)
   }

   function w(e) {
    var t = i(e).toHsl();
    return t.h = (t.h + 180) % 360, i(t)
   }

   function x(e) {
    var t = i(e).toHsl(),
     n = t.h;
    return [i(e), i({
     h: (n + 120) % 360,
     s: t.s,
     l: t.l
    }), i({
     h: (n + 240) % 360,
     s: t.s,
     l: t.l
    })]
   }

   function _(e) {
    var t = i(e).toHsl(),
     n = t.h;
    return [i(e), i({
     h: (n + 90) % 360,
     s: t.s,
     l: t.l
    }), i({
     h: (n + 180) % 360,
     s: t.s,
     l: t.l
    }), i({
     h: (n + 270) % 360,
     s: t.s,
     l: t.l
    })]
   }

   function S(e) {
    var t = i(e).toHsl(),
     n = t.h;
    return [i(e), i({
     h: (n + 72) % 360,
     s: t.s,
     l: t.l
    }), i({
     h: (n + 216) % 360,
     s: t.s,
     l: t.l
    })]
   }

   function C(e, t, n) {
    t = t || 6, n = n || 30;
    var r = i(e).toHsl(),
     o = 360 / n,
     a = [i(e)];
    for (r.h = (r.h - (o * t >> 1) + 720) % 360; --t;) r.h = (r.h + o) % 360, a.push(i(r));
    return a
   }

   function E(e, t) {
    t = t || 6;
    for (var n = i(e).toHsv(), r = n.h, o = n.s, a = n.v, s = [], u = 1 / t; t--;) s.push(i({
     h: r,
     s: o,
     v: a
    })), a = (a + u) % 1;
    return s
   }

   function T(e) {
    var t = {};
    for (var n in e) e.hasOwnProperty(n) && (t[e[n]] = n);
    return t
   }

   function M(e) {
    return e = parseFloat(e), (isNaN(e) || 0 > e || e > 1) && (e = 1), e
   }

   function A(e, t) {
    I(e) && (e = "100%");
    var n = k(e);
    return e = j(t, q(0, parseFloat(e))), n && (e = parseInt(e * t, 10) / 100), G.abs(e - t) < 1e-6 ? 1 : e % t / parseFloat(t)
   }

   function P(e) {
    return j(1, q(0, e))
   }

   function R(e) {
    return parseInt(e, 16)
   }

   function I(e) {
    return "string" == typeof e && -1 != e.indexOf(".") && 1 === parseFloat(e)
   }

   function k(e) {
    return "string" == typeof e && -1 != e.indexOf("%")
   }

   function D(e) {
    return 1 == e.length ? "0" + e : "" + e
   }

   function V(e, t) {
    return t = t || 100, 1 >= e && (e = e * t + "%"), e
   }

   function L(e) {
    return Math.round(255 * parseFloat(e)).toString(16)
   }

   function B(e) {
    return R(e) / 255
   }

   function O(e) {
    e = e.replace(F, "").replace(U, "").toLowerCase();
    var t = !1;
    if (X[e]) e = X[e], t = !0;
    else if ("transparent" == e) return {
     r: 0,
     g: 0,
     b: 0,
     a: 0,
     format: "name"
    };
    var n;
    return (n = Q.rgb.exec(e)) ? {
     r: n[1],
     g: n[2],
     b: n[3]
    } : (n = Q.rgba.exec(e)) ? {
     r: n[1],
     g: n[2],
     b: n[3],
     a: n[4]
    } : (n = Q.hsl.exec(e)) ? {
     h: n[1],
     s: n[2],
     l: n[3]
    } : (n = Q.hsla.exec(e)) ? {
     h: n[1],
     s: n[2],
     l: n[3],
     a: n[4]
    } : (n = Q.hsv.exec(e)) ? {
     h: n[1],
     s: n[2],
     v: n[3]
    } : (n = Q.hsva.exec(e)) ? {
     h: n[1],
     s: n[2],
     v: n[3],
     a: n[4]
    } : (n = Q.hex8.exec(e)) ? {
     a: B(n[1]),
     r: R(n[2]),
     g: R(n[3]),
     b: R(n[4]),
     format: t ? "name" : "hex8"
    } : (n = Q.hex6.exec(e)) ? {
     r: R(n[1]),
     g: R(n[2]),
     b: R(n[3]),
     format: t ? "name" : "hex"
    } : (n = Q.hex3.exec(e)) ? {
     r: R(n[1] + "" + n[1]),
     g: R(n[2] + "" + n[2]),
     b: R(n[3] + "" + n[3]),
     format: t ? "name" : "hex"
    } : !1
   }

   function N(e) {
    var t, n;
    return e = e || {
     level: "AA",
     size: "small"
    }, t = (e.level || "AA").toUpperCase(), n = (e.size || "small").toLowerCase(), "AA" !== t && "AAA" !== t && (t = "AA"), "small" !== n && "large" !== n && (n = "small"), {
     level: t,
     size: n
    }
   }
   var F = /^[\s,#]+/,
    U = /\s+$/,
    z = 0,
    G = Math,
    H = G.round,
    j = G.min,
    q = G.max,
    W = G.random;
   i.prototype = {
    isDark: function() {
     return this.getBrightness() < 128
    },
    isLight: function() {
     return !this.isDark()
    },
    isValid: function() {
     return this._ok
    },
    getOriginalInput: function() {
     return this._originalInput
    },
    getFormat: function() {
     return this._format
    },
    getAlpha: function() {
     return this._a
    },
    getBrightness: function() {
     var e = this.toRgb();
     return (299 * e.r + 587 * e.g + 114 * e.b) / 1e3
    },
    getLuminance: function() {
     var e, t, n, r, i, o, a = this.toRgb();
     return e = a.r / 255, t = a.g / 255, n = a.b / 255, r = .03928 >= e ? e / 12.92 : Math.pow((e + .055) / 1.055, 2.4), i = .03928 >= t ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4), o = .03928 >= n ? n / 12.92 : Math.pow((n + .055) / 1.055, 2.4), .2126 * r + .7152 * i + .0722 * o
    },
    setAlpha: function(e) {
     return this._a = M(e), this._roundA = H(100 * this._a) / 100, this
    },
    toHsv: function() {
     var e = l(this._r, this._g, this._b);
     return {
      h: 360 * e.h,
      s: e.s,
      v: e.v,
      a: this._a
     }
    },
    toHsvString: function() {
     var e = l(this._r, this._g, this._b),
      t = H(360 * e.h),
      n = H(100 * e.s),
      r = H(100 * e.v);
     return 1 == this._a ? "hsv(" + t + ", " + n + "%, " + r + "%)" : "hsva(" + t + ", " + n + "%, " + r + "%, " + this._roundA + ")"
    },
    toHsl: function() {
     var e = s(this._r, this._g, this._b);
     return {
      h: 360 * e.h,
      s: e.s,
      l: e.l,
      a: this._a
     }
    },
    toHslString: function() {
     var e = s(this._r, this._g, this._b),
      t = H(360 * e.h),
      n = H(100 * e.s),
      r = H(100 * e.l);
     return 1 == this._a ? "hsl(" + t + ", " + n + "%, " + r + "%)" : "hsla(" + t + ", " + n + "%, " + r + "%, " + this._roundA + ")"
    },
    toHex: function(e) {
     return h(this._r, this._g, this._b, e)
    },
    toHexString: function(e) {
     return "#" + this.toHex(e)
    },
    toHex8: function() {
     return p(this._r, this._g, this._b, this._a)
    },
    toHex8String: function() {
     return "#" + this.toHex8()
    },
    toRgb: function() {
     return {
      r: H(this._r),
      g: H(this._g),
      b: H(this._b),
      a: this._a
     }
    },
    toRgbString: function() {
     return 1 == this._a ? "rgb(" + H(this._r) + ", " + H(this._g) + ", " + H(this._b) + ")" : "rgba(" + H(this._r) + ", " + H(this._g) + ", " + H(this._b) + ", " + this._roundA + ")"
    },
    toPercentageRgb: function() {
     return {
      r: H(100 * A(this._r, 255)) + "%",
      g: H(100 * A(this._g, 255)) + "%",
      b: H(100 * A(this._b, 255)) + "%",
      a: this._a
     }
    },
    toPercentageRgbString: function() {
     return 1 == this._a ? "rgb(" + H(100 * A(this._r, 255)) + "%, " + H(100 * A(this._g, 255)) + "%, " + H(100 * A(this._b, 255)) + "%)" : "rgba(" + H(100 * A(this._r, 255)) + "%, " + H(100 * A(this._g, 255)) + "%, " + H(100 * A(this._b, 255)) + "%, " + this._roundA + ")"
    },
    toName: function() {
     return 0 === this._a ? "transparent" : this._a < 1 ? !1 : Y[h(this._r, this._g, this._b, !0)] || !1
    },
    toFilter: function(e) {
     var t = "#" + p(this._r, this._g, this._b, this._a),
      n = t,
      r = this._gradientType ? "GradientType = 1, " : "";
     if (e) {
      var o = i(e);
      n = o.toHex8String()
     }
     return "progid:DXImageTransform.Microsoft.gradient(" + r + "startColorstr=" + t + ",endColorstr=" + n + ")"
    },
    toString: function(e) {
     var t = !!e;
     e = e || this._format;
     var n = !1,
      r = this._a < 1 && this._a >= 0,
      i = !t && r && ("hex" === e || "hex6" === e || "hex3" === e || "name" === e);
     return i ? "name" === e && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === e && (n = this.toRgbString()), "prgb" === e && (n = this.toPercentageRgbString()), ("hex" === e || "hex6" === e) && (n = this.toHexString()), "hex3" === e && (n = this.toHexString(!0)), "hex8" === e && (n = this.toHex8String()), "name" === e && (n = this.toName()), "hsl" === e && (n = this.toHslString()), "hsv" === e && (n = this.toHsvString()), n || this.toHexString())
    },
    _applyModification: function(e, t) {
     var n = e.apply(null, [this].concat([].slice.call(t)));
     return this._r = n._r, this._g = n._g, this._b = n._b, this.setAlpha(n._a), this
    },
    lighten: function() {
     return this._applyModification(g, arguments)
    },
    brighten: function() {
     return this._applyModification(v, arguments)
    },
    darken: function() {
     return this._applyModification(y, arguments)
    },
    desaturate: function() {
     return this._applyModification(d, arguments)
    },
    saturate: function() {
     return this._applyModification(f, arguments)
    },
    greyscale: function() {
     return this._applyModification(m, arguments)
    },
    spin: function() {
     return this._applyModification(b, arguments)
    },
    _applyCombination: function(e, t) {
     return e.apply(null, [this].concat([].slice.call(t)))
    },
    analogous: function() {
     return this._applyCombination(C, arguments)
    },
    complement: function() {
     return this._applyCombination(w, arguments)
    },
    monochromatic: function() {
     return this._applyCombination(E, arguments)
    },
    splitcomplement: function() {
     return this._applyCombination(S, arguments)
    },
    triad: function() {
     return this._applyCombination(x, arguments)
    },
    tetrad: function() {
     return this._applyCombination(_, arguments)
    }
   }, i.fromRatio = function(e, t) {
    if ("object" == typeof e) {
     var n = {};
     for (var r in e) e.hasOwnProperty(r) && (n[r] = "a" === r ? e[r] : V(e[r]));
     e = n
    }
    return i(e, t)
   }, i.equals = function(e, t) {
    return e && t ? i(e).toRgbString() == i(t).toRgbString() : !1
   }, i.random = function() {
    return i.fromRatio({
     r: W(),
     g: W(),
     b: W()
    })
   }, i.mix = function(e, t, n) {
    n = 0 === n ? 0 : n || 50;
    var r, o = i(e).toRgb(),
     a = i(t).toRgb(),
     s = n / 100,
     u = 2 * s - 1,
     l = a.a - o.a;
    r = u * l == -1 ? u : (u + l) / (1 + u * l), r = (r + 1) / 2;
    var c = 1 - r,
     h = {
      r: a.r * r + o.r * c,
      g: a.g * r + o.g * c,
      b: a.b * r + o.b * c,
      a: a.a * s + o.a * (1 - s)
     };
    return i(h)
   }, i.readability = function(e, t) {
    var n = i(e),
     r = i(t);
    return (Math.max(n.getLuminance(), r.getLuminance()) + .05) / (Math.min(n.getLuminance(), r.getLuminance()) + .05)
   }, i.isReadable = function(e, t, n) {
    var r, o, a = i.readability(e, t);
    switch (o = !1, r = N(n), r.level + r.size) {
     case "AAsmall":
     case "AAAlarge":
      o = a >= 4.5;
      break;
     case "AAlarge":
      o = a >= 3;
      break;
     case "AAAsmall":
      o = a >= 7
    }
    return o
   }, i.mostReadable = function(e, t, n) {
    var r, o, a, s, u = null,
     l = 0;
    n = n || {}, o = n.includeFallbackColors, a = n.level, s = n.size;
    for (var c = 0; c < t.length; c++) r = i.readability(e, t[c]), r > l && (l = r, u = i(t[c]));
    return i.isReadable(e, u, {
     level: a,
     size: s
    }) || !o ? u : (n.includeFallbackColors = !1, i.mostReadable(e, ["#fff", "#000"], n))
   };
   var X = i.names = {
     aliceblue: "f0f8ff",
     antiquewhite: "faebd7",
     aqua: "0ff",
     aquamarine: "7fffd4",
     azure: "f0ffff",
     beige: "f5f5dc",
     bisque: "ffe4c4",
     black: "000",
     blanchedalmond: "ffebcd",
     blue: "00f",
     blueviolet: "8a2be2",
     brown: "a52a2a",
     burlywood: "deb887",
     burntsienna: "ea7e5d",
     cadetblue: "5f9ea0",
     chartreuse: "7fff00",
     chocolate: "d2691e",
     coral: "ff7f50",
     cornflowerblue: "6495ed",
     cornsilk: "fff8dc",
     crimson: "dc143c",
     cyan: "0ff",
     darkblue: "00008b",
     darkcyan: "008b8b",
     darkgoldenrod: "b8860b",
     darkgray: "a9a9a9",
     darkgreen: "006400",
     darkgrey: "a9a9a9",
     darkkhaki: "bdb76b",
     darkmagenta: "8b008b",
     darkolivegreen: "556b2f",
     darkorange: "ff8c00",
     darkorchid: "9932cc",
     darkred: "8b0000",
     darksalmon: "e9967a",
     darkseagreen: "8fbc8f",
     darkslateblue: "483d8b",
     darkslategray: "2f4f4f",
     darkslategrey: "2f4f4f",
     darkturquoise: "00ced1",
     darkviolet: "9400d3",
     deeppink: "ff1493",
     deepskyblue: "00bfff",
     dimgray: "696969",
     dimgrey: "696969",
     dodgerblue: "1e90ff",
     firebrick: "b22222",
     floralwhite: "fffaf0",
     forestgreen: "228b22",
     fuchsia: "f0f",
     gainsboro: "dcdcdc",
     ghostwhite: "f8f8ff",
     gold: "ffd700",
     goldenrod: "daa520",
     gray: "808080",
     green: "008000",
     greenyellow: "adff2f",
     grey: "808080",
     honeydew: "f0fff0",
     hotpink: "ff69b4",
     indianred: "cd5c5c",
     indigo: "4b0082",
     ivory: "fffff0",
     khaki: "f0e68c",
     lavender: "e6e6fa",
     lavenderblush: "fff0f5",
     lawngreen: "7cfc00",
     lemonchiffon: "fffacd",
     lightblue: "add8e6",
     lightcoral: "f08080",
     lightcyan: "e0ffff",
     lightgoldenrodyellow: "fafad2",
     lightgray: "d3d3d3",
     lightgreen: "90ee90",
     lightgrey: "d3d3d3",
     lightpink: "ffb6c1",
     lightsalmon: "ffa07a",
     lightseagreen: "20b2aa",
     lightskyblue: "87cefa",
     lightslategray: "789",
     lightslategrey: "789",
     lightsteelblue: "b0c4de",
     lightyellow: "ffffe0",
     lime: "0f0",
     limegreen: "32cd32",
     linen: "faf0e6",
     magenta: "f0f",
     maroon: "800000",
     mediumaquamarine: "66cdaa",
     mediumblue: "0000cd",
     mediumorchid: "ba55d3",
     mediumpurple: "9370db",
     mediumseagreen: "3cb371",
     mediumslateblue: "7b68ee",
     mediumspringgreen: "00fa9a",
     mediumturquoise: "48d1cc",
     mediumvioletred: "c71585",
     midnightblue: "191970",
     mintcream: "f5fffa",
     mistyrose: "ffe4e1",
     moccasin: "ffe4b5",
     navajowhite: "ffdead",
     navy: "000080",
     oldlace: "fdf5e6",
     olive: "808000",
     olivedrab: "6b8e23",
     orange: "ffa500",
     orangered: "ff4500",
     orchid: "da70d6",
     palegoldenrod: "eee8aa",
     palegreen: "98fb98",
     paleturquoise: "afeeee",
     palevioletred: "db7093",
     papayawhip: "ffefd5",
     peachpuff: "ffdab9",
     peru: "cd853f",
     pink: "ffc0cb",
     plum: "dda0dd",
     powderblue: "b0e0e6",
     purple: "800080",
     rebeccapurple: "663399",
     red: "f00",
     rosybrown: "bc8f8f",
     royalblue: "4169e1",
     saddlebrown: "8b4513",
     salmon: "fa8072",
     sandybrown: "f4a460",
     seagreen: "2e8b57",
     seashell: "fff5ee",
     sienna: "a0522d",
     silver: "c0c0c0",
     skyblue: "87ceeb",
     slateblue: "6a5acd",
     slategray: "708090",
     slategrey: "708090",
     snow: "fffafa",
     springgreen: "00ff7f",
     steelblue: "4682b4",
     tan: "d2b48c",
     teal: "008080",
     thistle: "d8bfd8",
     tomato: "ff6347",
     turquoise: "40e0d0",
     violet: "ee82ee",
     wheat: "f5deb3",
     white: "fff",
     whitesmoke: "f5f5f5",
     yellow: "ff0",
     yellowgreen: "9acd32"
    },
    Y = i.hexNames = T(X),
    Q = function() {
     var e = "[-\\+]?\\d+%?",
      t = "[-\\+]?\\d*\\.\\d+%?",
      n = "(?:" + t + ")|(?:" + e + ")",
      r = "[\\s|\\(]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")\\s*\\)?",
      i = "[\\s|\\(]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")[,|\\s]+(" + n + ")\\s*\\)?";
     return {
      rgb: new RegExp("rgb" + r),
      rgba: new RegExp("rgba" + i),
      hsl: new RegExp("hsl" + r),
      hsla: new RegExp("hsla" + i),
      hsv: new RegExp("hsv" + r),
      hsva: new RegExp("hsva" + i),
      hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
      hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
      hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
     }
    }();
   "undefined" != typeof e && e.exports ? e.exports = i : (r = function() {
    return i
   }.call(t, n, t, e), !(void 0 !== r && (e.exports = r)))
  }()
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.ChromePointer = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(17),
   d = r(p),
   f = t.ChromePointer = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = d.default.bind(r, r, arguments[0], arguments[1]), a = n, o(r, a)
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        picker: {
         width: "10px",
         height: "16px",
         borderRadius: "5px",
         transform: "translate(-5px, 0px)",
         backgroundColor: "rgb(248, 248, 248)",
         boxShadow: "0 1px 4px 0 rgba(0, 0, 0, 0.37)"
        }
       }
      }
     }
    }, {
     key: "render",
     value: function() {
      return l.default.createElement("div", {
       style: this.styles().picker
      })
     }
    }]), t
   }(h.default.Component);
  t.default = f
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.ChromePointerCircle = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(17),
   d = r(p),
   f = t.ChromePointerCircle = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = d.default.bind(r, r, arguments[0], arguments[1]), a = n, o(r, a)
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        picker: {
         width: "12px",
         height: "12px",
         borderRadius: "6px",
         boxShadow: "inset 0 0 0 1px #fff",
         transform: "translate(-6px, -6px)"
        }
       }
      }
     }
    }, {
     key: "render",
     value: function() {
      return l.default.createElement("div", {
       style: this.styles().picker
      })
     }
    }]), t
   }(h.default.Component);
  t.default = f
 }, function(e, t, n) {
  function r(e) {
   return e && e.__esModule ? e : {
    "default": e
   }
  }

  function i(e, t) {
   if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
  }

  function o(e, t) {
   if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
   return !t || "object" != typeof t && "function" != typeof t ? e : t
  }

  function a(e, t) {
   if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
   e.prototype = Object.create(t && t.prototype, {
    constructor: {
     value: e,
     enumerable: !1,
     writable: !0,
     configurable: !0
    }
   }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
  }
  Object.defineProperty(t, "__esModule", {
   value: !0
  }), t.CompactColor = void 0;
  var s = function() {
    function e(e, t) {
     for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r)
     }
    }
    return function(t, n, r) {
     return n && e(t.prototype, n), r && e(t, r), t
    }
   }(),
   u = n(3),
   l = r(u),
   c = n(4),
   h = r(c),
   p = n(17),
   d = r(p),
   f = t.CompactColor = function(e) {
    function t() {
     for (var e, n, r, a, s = arguments.length, u = Array(s), l = 0; s > l; l++) u[l] = arguments[l];
     return i(this, t), n = r = o(this, (e = t.__proto__ || Object.getPrototypeOf(t)).call.apply(e, [this].concat(u))), r.shouldComponentUpdate = d.default.bind(r, r, arguments[0], arguments[1]), r.handleClick = function() {
      r.props.onClick({
       hex: r.props.color
      })
     }, a = n, o(r, a)
    }
    return a(t, e), s(t, [{
     key: "classes",
     value: function() {
      return {
       "default": {
        color: {
         background: this.props.color,
         height: "15px",
         cursor: "pointer",
         flexGrow: "1"
        }
       }
      }
     }
    }, {
     key: "render",
     value: function() {
      return l.default.createElement("div", {
       style: this.styles().color,
       ref: "color",
       onClick: this.handleClick
      })
     }
    }]), t
   }(h.default.Component);
  t.default = f
 }]);
 var f;
 ! function() {
  var t = {},
   n = {};
  ! function(r) {
   if ("object" == typeof t && "undefined" != typeof n) n.exports = r(e);
   else if ("function" == typeof define && define.amd) define(["react"], r);
   else {
    var i;
    i = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, i.ReactDOM = r(i.React)
   }
  }(function(e) {
   return e.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED
  }), f = n.exports
 }();
 var a, l = this && this.__extends || function(e, t) {
   function n() {
    this.constructor = e
   }
   for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);
   e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
  },
  m = this && this.__assign || Object.assign || function(e) {
   for (var t, n = 1, r = arguments.length; r > n; n++) {
    t = arguments[n];
    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
   }
   return e
  };
 ! function(e) {
  var t;
  ! function(e) {
   e.VERSION = {
    number: "1.2.10",
    date: "Dec 13 2016"
   }
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(t) {
  var n;
  ! function(t) {
   t.React = e, t.ReactDOM = f;
   var n;
   ! function() {}(n = t.Controls || (t.Controls = {})), n.ChromePickerHelper = d.ChromePicker
  }(n = t.Plugin || (t.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(e) {
     return 13 === e.keyCode || 13 === e.charCode ? !0 : !1
    }

    function i(e) {
     return t.React.createElement("div", {
      className: "lm-control-row lm-options-group",
      title: e.title
     }, t.React.createElement("span", null, e.label), t.React.createElement("div", null, t.React.createElement(n.TextBox, {
      placeholder: e.placeholder,
      onChange: e.onChange,
      value: e.value,
      onKeyPress: function(t) {
       r(t) && e.onEnter && e.onEnter.call(null, t)
      }
     })))
    }
    var o = e.Bootstrap.Utils.shallowEqual,
     a = function(e) {
      function t() {
       return e.apply(this, arguments) || this
      }
      return l(t, e), t.prototype.shouldComponentUpdate = function(e, t) {
       return !o(this.props, e) || !o(this.state, t)
      }, t
     }(t.React.Component);
    n.Pure = a;
    var s = function(e) {
     function n() {
      return e.apply(this, arguments) || this
     }
     return l(n, e), n.prototype.render = function() {
      var e = this.props,
       n = "lm-btn";
      e.size && "normal" !== e.size && (n += " lm-btn-" + e.size), e.asBlock && (n += " lm-btn-block"), n += e.disabled ? " lm-btn-" + (e.disabledStyle || e.style || "default") : e.active ? " lm-btn-" + (e.activeStyle || e.style || "default") : " lm-btn-" + (e.style || "default"), e.customClass && (n += " " + e.customClass);
      var r = void 0;
      return e.icon && (r = e.active && e.activeIcon ? t.React.createElement("span", {
       className: "lm-icon lm-icon-" + e.activeIcon
      }) : t.React.createElement("span", {
       className: "lm-icon lm-icon-" + e.icon
      })), t.React.createElement("button", {
       title: e.title,
       className: n,
       style: e.customStyle,
       disabled: e.disabled,
       onClick: function(t) {
        e.onClick.call(null, t), t.target.blur()
       }
      }, r, e.children)
     }, n
    }(a);
    n.Button = s, n.TextBox = function(e) {
     return t.React.createElement("input", {
      type: "text",
      className: "lm-form-control",
      placeholder: e.placeholder,
      value: e.value,
      defaultValue: e.defaultValue,
      onBlur: function(t) {
       e.onBlur && e.onBlur.call(null, t)
      },
      onChange: function(t) {
       return e.onChange.call(null, t.target.value)
      },
      onKeyPress: e.onKeyPress
     })
    }, n.isEnter = r, n.TextBoxGroup = i, n.CommitButton = function(e) {
     return t.React.createElement("div", {
      style: {
       marginTop: "1px"
      }
     }, t.React.createElement("button", {
      onClick: function(t) {
       e.action(), t.target.blur()
      },
      className: "lm-btn lm-btn-block lm-btn-commit lm-btn-commit-" + (e.isOn ? "on" : "off"),
      disabled: !e.isOn,
      title: e.title
     }, t.React.createElement("span", {
      className: "lm-icon lm-icon-" + (e.isOn ? "ok" : "cross")
     }), e.isOn ? t.React.createElement("b", null, e.on) : e.off ? e.off : e.on))
    }, n.Toggle = function(e) {
     return t.React.createElement("div", {
      className: "lm-control-row lm-toggle-button",
      title: e.title
     }, t.React.createElement("span", null, e.label), t.React.createElement("div", null, t.React.createElement("button", {
      onClick: function(t) {
       e.onChange.call(null, !e.value), t.target.blur()
      }
     }, t.React.createElement("span", {
      className: "lm-icon lm-icon-" + (e.value ? "ok" : "off")
     }), " ", e.value ? "On" : "Off")))
    }, n.ControlGroupExpander = function(e) {
     return t.React.createElement(n.Button, {
      style: "link",
      title: (e.isExpanded ? "Less" : "More") + " options",
      onClick: function() {
       return e.onChange.call(null, !e.isExpanded)
      },
      icon: e.isExpanded ? "minus" : "plus",
      customClass: "lm-conrol-group-expander"
     })
    }, n.RowText = function(e) {
     return t.React.createElement("div", {
      className: "lm-control-row lm-row-text",
      title: e.title
     }, t.React.createElement("span", null, e.label), t.React.createElement("div", null, e.value))
    }, n.HelpBox = function(e) {
     return t.React.createElement("div", {
      className: "lm-help-row"
     }, t.React.createElement("span", null, e.title), t.React.createElement("div", null, e.content))
    }
   }(n = t.Controls || (t.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(n) {
     var r = n.caption ? n.caption : function(e) {
      return e
     };
     return e.React.createElement("div", {
      className: "lm-control-row lm-options-group",
      title: n.title
     }, e.React.createElement("span", null, n.label), e.React.createElement("div", null, e.React.createElement(t.OptionsBox, {
      options: n.options,
      caption: r,
      current: n.current,
      onChange: n.onChange
     })))
    }
    var r = function(t) {
     function n() {
      var e = t.apply(this, arguments) || this;
      return e.current = void 0, e
     }
     return l(n, t), n.prototype.get = function(e) {
      var t = this.props.options;
      return "undefined" != typeof t.get ? t.get(e) : t[e]
     }, n.prototype.render = function() {
      var t = this,
       n = this.props.caption,
       r = this.props.options.indexOf(this.props.current);
      return 0 > r && (r = 0), e.React.createElement("select", {
       title: this.props.title,
       value: r.toString(),
       className: "lm-form-control",
       onChange: function(e) {
        t.current = t.get(+e.target.value), t.props.onChange(t.current)
       }
      }, this.props.options.map(function(t, i) {
       return e.React.createElement("option", {
        key: i,
        value: "" + i,
        selected: i === r
       }, n(t))
      }))
     }, n
    }(e.React.Component);
    t.OptionsBox = r, t.OptionsGroup = n
   }(t = e.Controls || (e.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function(n) {
     function r() {
      return n.apply(this, arguments) || this
     }
     return l(r, n), r.prototype.header = function() {
      var n = this,
       r = this.props.isExpanded,
       i = this.props.title ? this.props.title : this.props.header,
       o = r ? "collapse" : "expand",
       a = e.React.createElement("div", {
        className: "lm-panel-description lm-panel-description-" + (this.props.topRightAction ? "with-action" : "standalone"),
        onClick: function() {
         return n.props.onExpand.call(null, !n.props.isExpanded)
        }
       }, e.React.createElement("span", {
        className: "lm-icon lm-icon-info"
       }), e.React.createElement("div", {
        className: "lm-panel-description-content"
       }, e.React.createElement("span", {
        className: "lm-icon lm-icon-info"
       }), this.props.description));
      return e.React.createElement("div", {
       className: "lm-panel-header"
      }, a, this.props.topRightAction, e.React.createElement("div", {
       className: "lm-panel-expander-wrapper"
      }, e.React.createElement(t.Button, {
       title: i,
       onClick: function() {
        return n.props.onExpand.call(null, !n.props.isExpanded)
       },
       icon: o,
       customClass: "lm-panel-expander",
       style: "link"
      }, this.props.badge, this.props.header)))
     }, r.prototype.render = function() {
      var t = "lm-panel" + (this.props.className ? " " + this.props.className : "") + (this.props.isExpanded ? " lm-panel-expanded" : " lm-panel-collapsed");
      return e.React.createElement("div", {
       className: t
      }, this.header(), e.React.createElement("div", {
       className: "lm-panel-body",
       style: {
        display: this.props.isExpanded ? "block" : "none"
       }
      }, this.props.children))
     }, r
    }(e.React.Component);
    t.Panel = n, t.ExpandableGroup = function(t) {
     return e.React.createElement("div", {
      className: "lm-control-group"
     }, t.select, t.colorStripe ? e.React.createElement("div", {
      className: "lm-expandable-group-color-stripe",
      style: {
       backgroundColor: "rgb(" + (255 * t.colorStripe.r | 0) + ", " + (255 * t.colorStripe.g | 0) + ", " + (255 * t.colorStripe.b | 0) + ")"
      }
     }) : void 0, t.options.length > 0 ? t.expander : void 0, t.options.length > 0 ? e.React.createElement("div", {
      style: {
       display: t.isExpanded ? "block" : "none"
      },
      className: "lm-control-subgroup"
     }, t.options) : void 0)
    }
   }(t = e.Controls || (e.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n = function(n) {
     function r() {
      var e = n.apply(this, arguments) || this;
      return e.state = {
       value: "0"
      }, e.firedValue = 0 / 0, e
     }
     return l(r, n), r.prototype.componentWillMount = function() {
      this.setState({
       value: "" + this.props.value
      })
     }, r.prototype.componentWillReceiveProps = function(e) {
      this.setState({
       value: "" + e.value
      })
     }, r.prototype.componentDidMount = function() {
      var e = this.refs.slider;
      e.value !== this.state.value && (e.value = this.state.value)
     }, r.prototype.updateValue = function(e) {
      var t = +e;
      t < this.props.min ? (t = this.props.min, e = "" + t) : t > this.props.max && (t = this.props.max, e = "" + t), this.setState({
       value: e
      })
     }, r.prototype.fire = function() {
      var e = +this.state.value;
      isNaN(e) && (e = this.props.value), e !== this.props.value && this.firedValue !== e && (this.firedValue = e, this.props.onChange.call(null, e))
     }, r.prototype.render = function() {
      var n = this,
       r = this.props.step;
      return void 0 === r && (r = 1), e.React.createElement("div", {
       className: "lm-control-row lm-slider",
       title: this.props.title
      }, e.React.createElement("span", null, this.props.label), e.React.createElement("div", null, e.React.createElement("div", null, e.React.createElement("div", null, e.React.createElement("form", {
       noValidate: !0
      }, e.React.createElement("input", {
       type: "range",
       min: this.props.min,
       max: this.props.max,
       value: this.state.value,
       ref: "slider",
       step: r,
       onInput: function(e) {
        var t = e.target.value;
        n.setState({
         value: t
        })
       },
       onSelect: function(e) {
        n.fire(), e.target.blur()
       },
       onBlur: function() {
        return n.fire()
       },
       onTouchEnd: function() {
        return n.fire()
       }
      })))), e.React.createElement("div", null, e.React.createElement(t.TextBox, {
       value: this.state.value,
       onChange: function(e) {
        return n.updateValue(e)
       },
       onBlur: function() {
        return n.fire()
       },
       onKeyPress: function(e) {
        t.isEnter(e) && n.fire()
       }
      }))))
     }, r
    }(e.React.Component);
    t.Slider = n
   }(t = e.Controls || (e.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r = e.Bootstrap.Utils.shallowEqual,
     i = function(e) {
      function i() {
       return e.apply(this, arguments) || this
      }
      return l(i, e), i.prototype.shouldComponentUpdate = function(e) {
       return !r(this.props, e)
      }, i.prototype.render = function() {
       var e = this,
        r = this.props.color,
        i = r.r,
        o = void 0 === i ? 1 : i,
        a = r.g,
        s = void 0 === a ? 1 : a,
        u = r.b,
        l = void 0 === u ? 1 : u,
        c = {
         a: 1,
         r: 255 * o,
         g: 255 * s,
         b: 255 * l
        },
        h = function(t) {
         return e.props.onChange({
          r: t.rgb.r / 255,
          g: t.rgb.g / 255,
          b: t.rgb.b / 255
         })
        },
        p = t.React.createElement(n.ChromePickerHelper, {
         color: c,
         onChangeComplete: h
        });
       return t.React.createElement("div", {
        className: "lm-color-picker"
       }, p)
      }, i
     }(t.React.Component);
    n.ColorPicker = i;
    var o = function(e) {
     function r() {
      var t = e.apply(this, arguments) || this;
      return t.state = {
       isExpanded: !1
      }, t
     }
     return l(r, e), r.prototype.render = function() {
      var e = this,
       r = this.state.isExpanded ? t.React.createElement(i, m({}, this.props)) : void 0,
       o = this.props.color,
       a = this.props.position ? this.props.position : "above";
      return t.React.createElement("div", {
       className: "lm-control-row lm-toggle-color-picker lm-toggle-color-picker-" + a,
       onMouseLeave: function() {
        return e.setState({
         isExpanded: !1
        })
       }
      }, t.React.createElement("span", null, this.props.label), t.React.createElement("div", null, t.React.createElement(n.Button, {
       onClick: function() {
        e.setState({
         isExpanded: !e.state.isExpanded
        })
       },
       asBlock: !0,
       customStyle: {
        backgroundColor: "rgb(" + (255 * o.r | 0) + ", " + (255 * o.g | 0) + ", " + (255 * o.b | 0) + ")",
        color: "rgb(" + (255 * (1 - o.r) | 0) + "," + (255 * (1 - o.g) | 0) + "," + (255 * (1 - o.b) | 0) + ")"
       }
      })), r)
     }, r
    }(t.React.Component);
    n.ToggleColorPicker = o
   }(n = t.Controls || (t.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    function n(n) {
     return e.React.createElement("div", {
      className: "lm-control-row"
     }, e.React.createElement(t.TextBox, {
      placeholder: "Enter query...",
      onChange: n.onChange,
      value: n.value,
      onKeyPress: function(e) {
       t.isEnter(e) && n.onEnter && n.onEnter.call(null, e)
      }
     }))
    }
    t.QueryEditor = n
   }(t = e.Controls || (e.Controls = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r = e.Bootstrap.Utils.shallowEqual,
     i = function(t) {
      function n() {
       return t.apply(this, arguments) || this
      }
      return l(n, t), n.prototype.update = function(t) {
       var n = e.Bootstrap.Utils.merge(this.props.state, t);
       n !== this.props.state && this.props.onChange(n)
      }, n.prototype.shouldComponentUpdate = function(e, t) {
       return !r(this.props, e) || !r(this.state, t)
      }, n
     }(t.React.Component);
    n.PureView = i;
    var o = function(e) {
     function t() {
      var t = e.apply(this, arguments) || this;
      return t.subs = [], t
     }
     return l(t, e), t.prototype.subscribe = function(e, t) {
      var n = e.subscribe(t);
      return this.subs.push(n), n
     }, t.prototype.unsubscribe = function(e) {
      for (var t = this.subs.indexOf(e), n = t; n < this.subs.length - 1; n++) this.subs[n] = this.subs[n + 1];
      e.dispose(), this.subs.pop()
     }, t.prototype.componentWillUnmount = function() {
      for (var e = 0, t = this.subs; e < t.length; e++) {
       var n = t[e];
       n.dispose()
      }
      this.subs = []
     }, t
    }(t.React.Component);
    n.Component = o;
    var a = function(e) {
     function t() {
      var t = e.apply(this, arguments) || this;
      return t.subs = [], t
     }
     return l(t, e), t.prototype.subscribe = function(e, t) {
      var n = e.subscribe(t);
      return this.subs.push(n), n
     }, t.prototype.unsubscribe = function(e) {
      for (var t = this.subs.indexOf(e), n = t; n < this.subs.length - 1; n++) this.subs[n] = this.subs[n + 1];
      e.dispose(), this.subs.pop()
     }, t.prototype.componentWillUnmount = function() {
      for (var e = 0, t = this.subs; e < t.length; e++) {
       var n = t[e];
       n.dispose()
      }
      this.subs = []
     }, t
    }(t.React.Component);
    n.ObserverView = a;
    var s = function(e) {
     function t() {
      return e.apply(this, arguments) || this
     }
     return l(t, e), Object.defineProperty(t.prototype, "controller", {
      get: function() {
       return this.props.controller
      },
      enumerable: !0,
      configurable: !0
     }), t.prototype.componentWillMount = function() {
      var e = this;
      this.subscribe(this.controller.state, function() {
       e.forceUpdate()
      })
     }, t
    }(a);
    n.View = s
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r = e.Bootstrap.Components.LayoutRegion,
     i = function(n) {
      function i() {
       return n.apply(this, arguments) || this
      }
      return l(i, n), i.prototype.renderTarget = function(e) {
       for (var n = [], r = [], i = 0, o = e.components; i < o.length; i++) {
        var a = o[i];
        a.isStatic ? n.push(t.React.createElement(a.view, {
         controller: a.controller
        })) : r.push(t.React.createElement(a.view, {
         controller: a.controller
        }))
       }
       return t.React.createElement("div", {
        className: "lm-layout-region lm-layout-" + e.cssClass
       }, n.length ? t.React.createElement("div", {
        className: "lm-layout-static"
       }, n) : void 0, r.length ? t.React.createElement("div", {
        className: "lm-layout-scrollable"
       }, r) : void 0)
      }, i.prototype.render = function() {
       var n, i = "",
        o = this.controller.latestState;
       if (o.isExpanded) n = "lm-layout-expanded";
       else switch (n = "lm-layout-standard ", o.collapsedControlsLayout) {
        case e.Bootstrap.Components.CollapsedControlsLayout.Outside:
         n += "lm-layout-standard-outside";
         break;
        case e.Bootstrap.Components.CollapsedControlsLayout.Landscape:
         n += "lm-layout-standard-landscape";
         break;
        case e.Bootstrap.Components.CollapsedControlsLayout.Portrait:
         n += "lm-layout-standard-portrait";
         break;
        default:
         n += "lm-layout-standard-outside"
       }
       var a = this.controller.targets,
        s = [this.renderTarget(a[r.Main])],
        u = o.hiddenRegions || [],
        l = a[r.Top];
       o.hideControls || !l.components.length || u.indexOf(r.Top) >= 0 ? i += " lm-layout-hide-top" : s.push(this.renderTarget(l)), l = a[r.Right], o.hideControls || !l.components.length || u.indexOf(r.Right) >= 0 ? i += " lm-layout-hide-right" : s.push(this.renderTarget(l)), l = a[r.Bottom], o.hideControls || !l.components.length || u.indexOf(r.Bottom) >= 0 ? i += " lm-layout-hide-bottom" : s.push(this.renderTarget(l)), l = a[r.Left], o.hideControls || !l.components.length || u.indexOf(r.Left) >= 0 ? i += " lm-layout-hide-left" : s.push(this.renderTarget(l));
       var c = a[r.Root].components.map(function(e) {
        return t.React.createElement(e.view, {
         controller: e.controller
        })
       });
       return t.React.createElement("div", {
        className: "lm-plugin"
       }, t.React.createElement("div", {
        className: "lm-plugin-content " + n
       }, t.React.createElement("div", {
        className: i
       }, s, c)))
      }, i
     }(n.View);
    n.Layout = i
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i = function(e) {
      function r() {
       return e.apply(this, arguments) || this
      }
      return l(r, e), Object.defineProperty(r.prototype, "params", {
       get: function() {
        return this.controller.latestState.params
       },
       enumerable: !0,
       configurable: !0
      }), r.prototype.updateParams = function(e) {
       this.controller.updateParams(e)
      }, r.prototype.autoUpdateParams = function(e) {
       this.controller.autoUpdateParams(e)
      }, r.prototype.getPersistentState = function(e, t) {
       return this.controller.context.transforms.getPersistentState(this.controller.transformer, this.transformSourceEntity, e, t)
      }, r.prototype.setPersistentState = function(e, t) {
       this.controller.context.transforms.setPersistentState(this.controller.transformer, this.transformSourceEntity, e, t) && this.forceUpdate()
      }, Object.defineProperty(r.prototype, "transformSourceEntity", {
       get: function() {
        return this.isUpdate ? this.controller.entity.parent : this.controller.entity
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "isUpdate", {
       get: function() {
        return this.controller.isUpdate
       },
       enumerable: !0,
       configurable: !0
      }), Object.defineProperty(r.prototype, "canApply", {
       get: function() {
        var e = this.controller.latestState,
         t = e.canApply && (!this.isUpdate || e.isDirty) && !e.isBusy;
        return t && this.isUpdate && e.parametersAutoUpdating ? !1 : t
       },
       enumerable: !0,
       configurable: !0
      }), r.prototype.applyEnter = function(e) {
       this.canApply && (e.target.blur(), this.controller.apply())
      }, r.prototype.render = function() {
       var e = this,
        r = (this.controller.context, this.isUpdate),
        i = this.controller.latestState,
        o = i.issues,
        a = o && o.length,
        s = i.isBusy,
        u = s ? "Working..." : r && !a ? "Nothing to update" : o ? o[0] : void 0,
        l = this.controller.transformer.info,
        c = t.React.createElement(t.Controls.CommitButton, {
         action: function() {
          return e.controller.apply()
         },
         isOn: this.canApply,
         title: o && o.length ? o[0] : this.canApply ? r ? "An update will remove all child nodes." : void 0 : void 0,
         on: r ? "Update" : this.props.isAction ? "Apply" : "Add",
         off: u
        }),
        h = this.canApply || a,
        p = this.props.customHeader ? this.props.customHeader : (r ? "Update " : "") + l.name,
        d = this.getPersistentState("isExpanded", !0);
       return t.React.createElement("div", {
        className: "lm-transformer-wrapper"
       }, t.React.createElement(t.Controls.Panel, {
        header: p,
        badge: this.props.hideBadge ? void 0 : t.React.createElement(n.Entity.Badge, {
         type: l.to[0].info
        }),
        className: "lm-control lm-transformer lm-panel-" + l.to[0].info.typeClass,
        key: l.id,
        title: l.description,
        isExpanded: d,
        onExpand: function(t) {
         e.setPersistentState("isExpanded", t)
        },
        description: this.controller.transformer.info.description,
        topRightAction: this.props.showVisibilityIcon ? t.React.createElement(n.Entity.VisibilityControl, {
         entity: this.controller.entity
        }) : void 0
       }, this.renderControls(), h ? c : void 0))
      }, r
     }(n.View);
     r.ControllerBase = i;
     var o = function(e) {
      function n() {
       return e.apply(this, arguments) || this
      }
      return l(n, e), n.prototype.renderControls = function() {
       return t.React.createElement("div", null)
      }, n
     }(r.ControllerBase);
     r.Empty = o;
     var a = function(e) {
      function n() {
       return e.apply(this, arguments) || this
      }
      return l(n, e), n.prototype.render = function() {
       var e = this.controller.context,
        n = e.plugin,
        r = this.controller.latestState,
        i = r.transforms,
        o = i.map(function(e) {
         var r = n.getTransformerInfo(e.transformer).view;
         return t.React.createElement(r, {
          controller: e,
          key: e.transformer.info.id + "-" + e.entity.id
         })
        });
       if (r.update) {
        var a = n.getTransformerInfo(r.update.transformer).view;
        o.push(t.React.createElement(a, {
         controller: r.update,
         key: r.update.transformer.info.id + "-" + r.update.entity.id
        }))
       }
       return t.React.createElement("div", {
        className: "lm-transform-view"
       }, o)
      }, n
     }(n.View);
     r.View = a, r.TransparencyControl = function(e) {
      var n = e.definition.alpha;
      return t.React.createElement(t.Controls.Slider, {
       label: "Opacity",
       onChange: function(t) {
        return e.onChange({
         alpha: t,
         writeDepth: e.definition.writeDepth
        })
       },
       min: 0,
       max: 1,
       step: .01,
       value: n
      })
     };
     var s = function(n) {
      function r() {
       return n.apply(this, arguments) || this
      }
      return l(r, n), r.prototype.componentWillMount = function() {
       var t = this;
       n.prototype.componentWillMount.call(this), this.subscribe(e.Bootstrap.Event.Tree.NodeUpdated.getStream(this.controller.context), function(e) {
        var n = t.controller.latestState.controller,
         r = n && n.entity;
        e.data === r && t.forceUpdate()
       })
      }, r.prototype.render = function() {
       var e = this.controller.latestState.controller;
       if (!e) return t.React.createElement("div", {
        className: "lm-empty-control"
       });
       var n = this.controller.context,
        r = n.plugin,
        i = r.getTransformerInfo(e.transformer).view;
       return i ? t.React.createElement(i, {
        controller: e,
        key: e.transformer.info.id + "-" + e.entity.id,
        customHeader: this.controller.header,
        hideBadge: !0,
        showVisibilityIcon: !0
       }) : (console.warn("Count not find view for updater (" + e.transformer.info.id + "), please register it."), t.React.createElement("div", {
        className: "lm-empty-control"
       }))
      }, r
     }(n.View);
     r.Updater = s;
     var u = function(e) {
      function n() {
       return e.apply(this, arguments) || this
      }
      return l(n, e), n.prototype.render = function() {
       var e = this.controller.latestState.controller;
       if (!e) return t.React.createElement("div", {
        className: "lm-empty-control"
       });
       var n = this.controller.context,
        r = n.plugin,
        i = r.getTransformerInfo(e.transformer).view;
       return i ? t.React.createElement(i, {
        controller: e,
        key: e.transformer.info.id + "-" + e.entity.id,
        customHeader: this.controller.header,
        hideBadge: !0,
        isAction: !0
       }) : (console.warn("Count not find view for updater (" + e.transformer.info.id + "), please register it."), t.React.createElement("div", {
        className: "lm-empty-control"
       }))
      }, n
     }(n.View);
     r.Action = u
    }(r = n.Transform || (n.Transform = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(r) {
      var i = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Bootstrap.Entity.Data.Types,
         caption: function(e) {
          return e
         },
         current: r.type,
         onChange: function(t) {
          return n.updateParams({
           type: t,
           responseCompression: e.Bootstrap.Utils.DataCompressionMethod.None
          })
         },
         label: "Type"
        }), "Binary" === r.type ? t.React.createElement(t.Controls.OptionsGroup, {
         options: ["None", "Gzip"],
         caption: function(e) {
          return e
         },
         current: r.responseCompression === e.Bootstrap.Utils.DataCompressionMethod.Gzip ? "Gzip" : "None",
         onChange: function(t) {
          return n.updateParams({
           responseCompression: "None" === t ? e.Bootstrap.Utils.DataCompressionMethod.None : e.Bootstrap.Utils.DataCompressionMethod.Gzip
          })
         },
         label: "Compression",
         title: 'Specify the compression of the data. Usually only appliable if you downloading "raw" files.'
        }) : void 0, t.React.createElement(t.Controls.TextBoxGroup, {
         value: r.url,
         onChange: function(e) {
          return n.updateParams({
           url: e
          })
         },
         label: "URL",
         onEnter: function(e) {
          return n.applyEnter(e)
         },
         placeholder: "Enter URL..."
        }))
       }, r
      }(n.ControllerBase);
      r.Download = i;
      var o = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params,
         i = this.controller.latestState;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Bootstrap.Entity.Data.Types,
         caption: function(e) {
          return e
         },
         current: r.type,
         onChange: function(e) {
          return n.updateParams({
           type: e
          })
         },
         label: "Type"
        }), t.React.createElement("div", {
         className: "lm-btn lm-btn-block lm-btn-action lm-loader-lm-btn-file",
         style: {
          marginTop: "1px"
         }
        }, r.file ? r.file.name : "Select a file...", " ", t.React.createElement("input", {
         disabled: i.isBusy,
         type: "file",
         onChange: function(e) {
          return n.updateParams({
           file: e.target.files[0]
          })
         },
         multiple: !1
        })))
       }, r
      }(n.ControllerBase);
      r.OpenFile = o;
      var a = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.TextBoxGroup, {
         value: n.id,
         onChange: function(t) {
          return e.updateParams({
           id: t
          })
         },
         label: "Id",
         onEnter: function(t) {
          return e.applyEnter(t)
         },
         placeholder: "Enter PDB id..."
        }))
       }, n
      }(n.ControllerBase);
      r.WithIdField = a;
      var s = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.TextBoxGroup, {
         value: n.id,
         onChange: function(t) {
          return e.updateParams({
           id: t
          })
         },
         label: "URL",
         onEnter: function(t) {
          return e.applyEnter(t)
         },
         placeholder: "Enter URL..."
        }))
       }, n
      }(n.ControllerBase);
      r.WithUrlIdField = s
     }(r = n.Data || (n.Data = {}))
    }(r = n.Transform || (n.Transform = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(r) {
      var i = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Core.Formats.Molecule.SupportedFormats.All,
         caption: function(e) {
          return e.name
         },
         current: r.format,
         onChange: function(e) {
          return n.updateParams({
           format: e
          })
         },
         label: "Format"
        }))
       }, r
      }(n.ControllerBase);
      r.CreateFromData = i;
      var o = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Core.Formats.Molecule.SupportedFormats.All,
         caption: function(e) {
          return e.name
         },
         current: r.format,
         onChange: function(e) {
          return n.updateParams({
           format: e
          })
         },
         label: "Format"
        }), t.React.createElement(t.Controls.TextBoxGroup, {
         value: r.id,
         onChange: function(e) {
          return n.updateParams({
           id: e
          })
         },
         label: "URL",
         onEnter: function(e) {
          return n.applyEnter(e)
         },
         placeholder: "Enter url..."
        }))
       }, r
      }(n.ControllerBase);
      r.DownloadFromUrl = o;
      var a = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params,
         i = this.controller.latestState,
         o = e.Core.Formats.FormatInfo.formatFileFilters(e.Core.Formats.Molecule.SupportedFormats.All);
        return t.React.createElement("div", null, t.React.createElement("div", {
         className: "lm-btn lm-btn-block lm-btn-action lm-loader-lm-btn-file",
         style: {
          marginTop: "1px"
         }
        }, r.file ? r.file.name : "Select a file...", " ", t.React.createElement("input", {
         disabled: i.isBusy,
         type: "file",
         accept: o,
         onChange: function(e) {
          return n.updateParams({
           file: e.target.files[0]
          })
         },
         multiple: !1
        })))
       }, r
      }(n.ControllerBase);
      r.OpenFile = a;
      var s = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.TextBoxGroup, {
         value: n.id,
         onChange: function(t) {
          return e.updateParams({
           id: t
          })
         },
         label: "Id",
         onEnter: function(t) {
          return e.applyEnter(t)
         },
         placeholder: "Enter pdb id..."
        }), t.React.createElement(t.Controls.TextBoxGroup, {
         value: n.server,
         onChange: function(t) {
          return e.updateParams({
           server: t
          })
         },
         label: "Server",
         onEnter: function(t) {
          return e.applyEnter(t)
         },
         placeholder: "Server url..."
        }))
       }, n
      }(n.ControllerBase);
      r.InitCoordinateStreaming = s;
      var u = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = (this.params, this.transformSourceEntity),
         r = n.props.dictionary.dataBlocks.map(function(e, t) {
          return {
           b: e.header,
           i: t
          }
         });
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: r,
         caption: function(e) {
          return e.b
         },
         current: r[this.params.blockIndex],
         onChange: function(t) {
          return e.updateParams({
           blockIndex: t.i
          })
         },
         label: "Source"
        }))
       }, n
      }(n.ControllerBase);
      r.CreateFromMmCif = u;
      var c = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.transformSourceEntity.props.molecule.models.length;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.Slider, {
         label: "Index",
         onChange: function(t) {
          return e.updateParams({
           modelIndex: t - 1
          })
         },
         min: 1,
         max: n,
         step: 1,
         value: (0 | this.params.modelIndex) + 1,
         title: "Index of the model."
        }))
       }, n
      }(n.ControllerBase);
      r.CreateModel = c;
      var h = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.renderControls = function() {
        var n = this,
         r = this.params,
         i = e.Bootstrap.Utils.Molecule.findModel(this.transformSourceEntity),
         o = i.props.model.assemblyInfo;
        if (!o) return void 0;
        var a = o.assemblies.map(function(e) {
         return e.name
        });
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: a,
         current: r.name,
         onChange: function(e) {
          return n.updateParams({
           name: e
          })
         },
         label: "Name"
        }))
       }, r
      }(n.ControllerBase);
      r.CreateAssembly = h;
      var p = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params,
         r = ["Mates", "Interaction"];
        return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
         options: r,
         current: n.type,
         onChange: function(t) {
          return e.updateParams({
           type: t
          })
         },
         label: "Type",
         title: "Mates: copies whole asymetric unit. Interaction: Includes only residues that are no more than `radius` from the asymetric unit."
        }), t.React.createElement(t.Controls.Slider, {
         label: "Radius",
         onChange: function(t) {
          return e.updateParams({
           radius: t
          })
         },
         min: 0,
         max: 25,
         step: .1,
         value: n.radius,
         title: "Interaction radius."
        }))
       }, n
      }(n.ControllerBase);
      r.CreateSymmetryMates = p;
      var d = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.TextBoxGroup, {
         value: n.name,
         onChange: function(t) {
          return e.updateParams({
           name: t
          })
         },
         label: "Name",
         onEnter: function(t) {
          return e.applyEnter(t)
         },
         placeholder: "Optional name..."
        }), t.React.createElement(t.Controls.QueryEditor, {
         value: n.queryString,
         onChange: function(t) {
          return e.updateParams({
           queryString: t
          })
         },
         onEnter: function(t) {
          return e.applyEnter(t)
         }
        }))
       }, n
      }(n.ControllerBase);
      r.CreateSelection = d;
      var f = function(e) {
       function n() {
        return e.apply(this, arguments) || this
       }
       return l(n, e), n.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.updateParams({
           polymer: t
          })
         },
         value: n.polymer,
         label: "Polymer"
        }), t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.updateParams({
           het: t
          })
         },
         value: n.het,
         label: "HET"
        }), t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.updateParams({
           water: t
          })
         },
         value: n.water,
         label: "Water"
        }))
       }, n
      }(n.ControllerBase);
      r.CreateMacromoleculeVisual = f;
      var m = function(r) {
       function i() {
        return r.apply(this, arguments) || this
       }
       return l(i, r), i.prototype.detail = function() {
        var n = this,
         r = this.params.style.params;
        return [t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Bootstrap.Visualization.Molecule.DetailTypes,
         caption: function(e) {
          return e
         },
         current: r.detail,
         onChange: function(e) {
          return n.controller.updateStyleParams({
           detail: e
          })
         },
         label: "Detail"
        })]
       }, i.prototype.ballsAndSticks = function() {
        var n = this,
         r = this.params.style.params,
         i = [];
        return i.push(t.React.createElement(t.Controls.Toggle, {
         title: "Scale atoms using their VDW radius.",
         onChange: function(e) {
          return n.controller.updateStyleParams({
           useVDW: e
          })
         },
         value: r.useVDW,
         label: "VDW"
        })), r.useVDW ? i.push(t.React.createElement(t.Controls.Slider, {
         label: "Scale",
         onChange: function(e) {
          return n.controller.updateStyleParams({
           vdwScaling: e
          })
         },
         min: .1,
         max: 1,
         step: .01,
         value: r.vdwScaling,
         title: "VDW scale factor."
        })) : i.push(t.React.createElement(t.Controls.Slider, {
         label: "Atom Rds",
         onChange: function(e) {
          return n.controller.updateStyleParams({
           atomRadius: e
          })
         },
         min: .05,
         max: 2,
         step: .01,
         value: r.atomRadius,
         title: "Atom Radius"
        })), i.push(t.React.createElement(t.Controls.Slider, {
         label: "Bond Rds",
         onChange: function(e) {
          return n.controller.updateStyleParams({
           bondRadius: e
          })
         },
         min: .05,
         max: 1,
         step: .01,
         value: r.bondRadius,
         title: "Bond Radius"
        })), i.push(t.React.createElement(t.Controls.OptionsGroup, {
         options: e.Bootstrap.Visualization.Molecule.DetailTypes,
         caption: function(e) {
          return e
         },
         current: r.detail,
         onChange: function(e) {
          return n.controller.updateStyleParams({
           detail: e
          })
         },
         label: "Detail"
        })), i
       }, i.prototype.surface = function() {
        var e = this,
         n = this.params.style.params;
        return [t.React.createElement(t.Controls.Slider, {
         label: "Probe Radius",
         onChange: function(t) {
          return e.controller.updateStyleParams({
           probeRadius: t
          })
         },
         min: 0,
         max: 6,
         step: .1,
         value: n.probeRadius
        }), t.React.createElement(t.Controls.Slider, {
         label: "Smoothing",
         onChange: function(t) {
          return e.controller.updateStyleParams({
           smoothing: t
          })
         },
         min: 0,
         max: 10,
         step: 1,
         value: n.smoothing,
         title: "Number of laplacian smoothing itrations."
        }), t.React.createElement(t.Controls.Slider, {
         label: "Detail",
         onChange: function(t) {
          return e.controller.updateStyleParams({
           density: t
          })
         },
         min: .3,
         max: 3,
         step: .1,
         value: n.density,
         title: "Determines the size of a grid cell."
        }), t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.controller.updateStyleParams({
           isWireframe: t
          })
         },
         value: n.isWireframe,
         label: "Wireframe"
        })]
       }, i.prototype.createColors = function() {
        var e = this,
         r = this.params.style.theme,
         i = "BallsAndSticks" === this.params.style.type,
         o = r.colors.filter(function(e, t) {
          return i ? !0 : "Bond" !== t
         }).map(function(n, r) {
          return t.React.createElement(t.Controls.ToggleColorPicker, {
           key: r,
           label: r,
           color: n,
           onChange: function(t) {
            return e.controller.updateThemeColor(r, t)
           }
          })
         }).toArray();
        return o.push(t.React.createElement(n.TransparencyControl, {
         definition: r.transparency,
         onChange: function(t) {
          return e.controller.updateThemeTransparency(t)
         }
        })), o
       }, i.prototype.renderControls = function() {
        var n, r = this,
         i = this.params;
        switch (i.style.type) {
         case "Surface":
          n = this.surface();
          break;
         case "BallsAndSticks":
          n = this.ballsAndSticks();
          break;
         default:
          n = this.detail()
        }
        var o = function(t) {
          return e.Bootstrap.Visualization.Molecule.TypeDescriptions[t]
         },
         a = this.getPersistentState("showTypeOptions", !1),
         s = this.getPersistentState("showThemeOptions", !1);
        return t.React.createElement("div", null, t.React.createElement(t.Controls.ExpandableGroup, {
         select: t.React.createElement(t.Controls.OptionsGroup, {
          options: e.Bootstrap.Visualization.Molecule.Types,
          caption: function(e) {
           return o(e).label
          },
          current: i.style.type,
          onChange: function(t) {
           return r.controller.updateTemplate(t, e.Bootstrap.Visualization.Molecule.Default.ForType)
          },
          label: "Type"
         }),
         expander: t.React.createElement(t.Controls.ControlGroupExpander, {
          isExpanded: a,
          onChange: function(e) {
           return r.setPersistentState("showTypeOptions", e)
          }
         }),
         options: n,
         isExpanded: a
        }), t.React.createElement(t.Controls.ExpandableGroup, {
         select: t.React.createElement(t.Controls.OptionsGroup, {
          options: e.Bootstrap.Visualization.Molecule.Default.Themes,
          caption: function(e) {
           return e.name
          },
          current: i.style.theme.template,
          onChange: function(e) {
           return r.controller.updateThemeDefinition(e)
          },
          label: "Coloring"
         }),
         expander: t.React.createElement(t.Controls.ControlGroupExpander, {
          isExpanded: s,
          onChange: function(e) {
           return r.setPersistentState("showThemeOptions", e)
          }
         }),
         options: this.createColors(),
         isExpanded: s
        }))
       }, i
      }(n.ControllerBase);
      r.CreateVisual = m
     }(r = n.Molecule || (n.Molecule = {}))
    }(r = n.Transform || (n.Transform = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(n) {
     var r;
     ! function(r) {
      function i(e, t, n, r) {
       var i = (t - e.valuesInfo.mean) / e.valuesInfo.sigma;
       return i > r ? r : n > i ? n : i
      }

      function o(e, t) {
       var n = e.valuesInfo.mean + t * e.valuesInfo.sigma;
       return n > e.valuesInfo.max ? e.valuesInfo.max : n < e.valuesInfo.min ? e.valuesInfo.min : n
      }
      var a = function(n) {
        return t.React.createElement(t.Controls.ExpandableGroup, {
         select: t.React.createElement(t.Controls.Slider, {
          label: n.isSigma ? "Iso Value (σ)" : "Iso Value",
          onChange: n.onChangeValue,
          min: n.min,
          max: n.max,
          value: n.value,
          step: .001
         }),
         expander: t.React.createElement(t.Controls.ControlGroupExpander, {
          isExpanded: n.view.getPersistentState("showIsoValueType", !1),
          onChange: function(e) {
           return n.view.setPersistentState("showIsoValueType", e)
          }
         }),
         options: [t.React.createElement(t.Controls.Toggle, {
          onChange: function(t) {
           return n.onChangeType(t ? e.Bootstrap.Visualization.Density.IsoValueType.Sigma : e.Bootstrap.Visualization.Density.IsoValueType.Absolute)
          },
          value: n.isSigma,
          label: "Relative (σ)"
         })],
         isExpanded: n.view.getPersistentState("showIsoValueType", !1)
        })
       },
       s = function(n) {
        function r() {
         return n.apply(this, arguments) || this
        }
        return l(r, n), r.prototype.renderControls = function() {
         var n = this,
          r = this.params,
          i = r.normalize,
          o = e.Bootstrap.Utils.round;
         if (this.isUpdate) {
          var a = this.controller.entity.props.data;
          return t.React.createElement("div", null, t.React.createElement(t.Controls.RowText, {
           label: "Format",
           value: r.format.name
          }), t.React.createElement(t.Controls.RowText, {
           label: "Sigma",
           value: o(a.valuesInfo.sigma, 3)
          }), t.React.createElement(t.Controls.RowText, {
           label: "Mean",
           value: o(a.valuesInfo.mean, 3)
          }), t.React.createElement(t.Controls.RowText, {
           label: "Value Range",
           value: "[" + o(a.valuesInfo.min, 3) + ", " + o(a.valuesInfo.max, 3) + "]"
          }), t.React.createElement(t.Controls.Toggle, {
           onChange: function(e) {
            return n.controller.updateParams({
             normalize: e
            })
           },
           value: i,
           label: "Normalized"
          }))
         }
         return t.React.createElement("div", null, t.React.createElement(t.Controls.OptionsGroup, {
          options: e.Core.Formats.Density.SupportedFormats.All,
          caption: function(e) {
           return e.name
          },
          current: r.format,
          onChange: function(e) {
           return n.updateParams({
            format: e
           })
          },
          label: "Format"
         }), t.React.createElement(t.Controls.Toggle, {
          onChange: function(e) {
           return n.controller.updateParams({
            normalize: e
           })
          },
          value: i,
          label: "Normalized"
         }))
        }, r
       }(n.ControllerBase);
      r.ParseData = s;
      var u = function(r) {
       function s() {
        return r.apply(this, arguments) || this
       }
       return l(s, r), s.prototype.surface = function() {
        var n = this,
         r = e.Bootstrap.Tree.Node.findClosestNodeOfType(this.transformSourceEntity, [e.Bootstrap.Entity.Density.Data]),
         s = this.params.style.params,
         u = s.isoValueType !== e.Bootstrap.Visualization.Density.IsoValueType.Absolute;
        return t.React.createElement(a, {
         view: this,
         onChangeValue: function(e) {
          return n.controller.updateStyleParams({
           isoValue: e
          })
         },
         onChangeType: function(t) {
          t !== s.isoValueType && (t === e.Bootstrap.Visualization.Density.IsoValueType.Absolute ? n.controller.updateStyleParams({
           isoValue: o(r.props.data, s.isoValue),
           isoValueType: t
          }) : n.controller.updateStyleParams({
           isoValue: i(r.props.data, s.isoValue, -5, 5),
           isoValueType: t
          }))
         },
         min: u ? -5 : r.props.data.valuesInfo.min,
         max: u ? 5 : r.props.data.valuesInfo.max,
         isSigma: s.isoValueType !== e.Bootstrap.Visualization.Density.IsoValueType.Absolute,
         value: s.isoValue
        })
       }, s.prototype.colors = function() {
        var e = this,
         r = this.params.style.params,
         i = this.params.style.theme,
         o = i.colors.get("Uniform"),
         a = t.React.createElement(t.Controls.ToggleColorPicker, {
          key: "Uniform",
          label: "Color",
          color: o,
          onChange: function(t) {
           return e.controller.updateThemeColor("Uniform", t)
          }
         }),
         s = [];
        s.push(t.React.createElement(n.TransparencyControl, {
         definition: i.transparency,
         onChange: function(t) {
          return e.controller.updateThemeTransparency(t)
         }
        }));
        this.params.style.params;
        s.push(t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.controller.updateStyleParams({
           isWireframe: t
          })
         },
         value: r.isWireframe,
         label: "Wireframe"
        }));
        var u = this.getPersistentState("showThemeOptions", !1);
        return t.React.createElement(t.Controls.ExpandableGroup, {
         select: a,
         expander: t.React.createElement(t.Controls.ControlGroupExpander, {
          isExpanded: u,
          onChange: function(t) {
           return e.setPersistentState("showThemeOptions", t)
          }
         }),
         options: s,
         isExpanded: u
        })
       }, s.prototype.renderControls = function() {
        this.params;
        return t.React.createElement("div", null, this.surface(), this.colors())
       }, s
      }(n.ControllerBase);
      r.CreateVisual = u;
      var c = function(r) {
       function s() {
        return r.apply(this, arguments) || this
       }
       return l(s, r), s.prototype.surface = function() {
        var n = this,
         r = e.Bootstrap.Tree.Node.findClosestNodeOfType(this.transformSourceEntity, [e.Bootstrap.Entity.Density.Data]),
         s = this.params,
         u = s.style.params,
         l = u.isoValueType !== e.Bootstrap.Visualization.Density.IsoValueType.Absolute;
        return t.React.createElement(a, {
         view: this,
         onChangeValue: function(e) {
          return n.controller.updateStyleParams({
           isoValue: e
          })
         },
         onChangeType: function(t) {
          t !== u.isoValueType && (t === e.Bootstrap.Visualization.Density.IsoValueType.Absolute ? n.controller.updateStyleParams({
           isoValue: o(r.props.data, u.isoValue),
           isoValueType: t
          }) : n.controller.updateStyleParams({
           isoValue: i(r.props.data, u.isoValue, s.isoSigmaMin, s.isoSigmaMax),
           isoValueType: t
          }))
         },
         min: l ? s.isoSigmaMin : r.props.data.valuesInfo.min,
         max: l ? s.isoSigmaMax : r.props.data.valuesInfo.max,
         isSigma: u.isoValueType !== e.Bootstrap.Visualization.Density.IsoValueType.Absolute,
         value: u.isoValue
        })
       }, s.prototype.colors = function() {
        var e = this,
         r = this.params.style.params,
         i = this.params.style.theme,
         o = i.colors.get("Uniform"),
         a = t.React.createElement(t.Controls.ToggleColorPicker, {
          key: "Uniform",
          label: "Color",
          color: o,
          onChange: function(t) {
           return e.controller.updateThemeColor("Uniform", t)
          }
         }),
         s = [];
        s.push(t.React.createElement(n.TransparencyControl, {
         definition: i.transparency,
         onChange: function(t) {
          return e.controller.updateThemeTransparency(t)
         }
        }));
        this.params.style.params;
        s.push(t.React.createElement(t.Controls.Toggle, {
         onChange: function(t) {
          return e.controller.updateStyleParams({
           isWireframe: t
          })
         },
         value: r.isWireframe,
         label: "Wireframe"
        }));
        var u = this.getPersistentState("showThemeOptions", !1);
        return t.React.createElement(t.Controls.ExpandableGroup, {
         select: a,
         expander: t.React.createElement(t.Controls.ControlGroupExpander, {
          isExpanded: u,
          onChange: function(t) {
           return e.setPersistentState("showThemeOptions", t)
          }
         }),
         options: s,
         isExpanded: u
        })
       }, s.prototype.show = function() {
        var e = this,
         n = "Around Selection",
         r = "Everything",
         i = this.params;
        return t.React.createElement(t.Controls.OptionsGroup, {
         options: [n, r],
         caption: function(e) {
          return e
         },
         current: i.showFull ? r : n,
         onChange: function(t) {
          return e.autoUpdateParams({
           showFull: t === r
          })
         },
         label: "Show"
        })
       }, s.prototype.renderControls = function() {
        var e = this,
         n = this.params;
        return t.React.createElement("div", null, this.surface(), this.colors(), this.show(), n.showFull ? void 0 : t.React.createElement(t.Controls.Slider, {
         label: "Radius",
         onChange: function(t) {
          return e.autoUpdateParams({
           radius: t
          })
         },
         min: void 0 !== n.minRadius ? n.minRadius : 0,
         max: void 0 !== n.maxRadius ? n.maxRadius : 10,
         step: .005,
         value: n.radius
        }))
       }, s
      }(n.ControllerBase);
      r.CreateVisualBehaviour = c
     }(r = n.Density || (n.Density = {}))
    }(r = n.Transform || (n.Transform = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i = e.Bootstrap.Service.Logger.EntryType,
      o = function(n) {
       function r() {
        return n.apply(this, arguments) || this
       }
       return l(r, n), r.prototype.componentWillMount = function() {
        var t = this;
        n.prototype.componentWillMount.call(this), this.subscribe(e.Bootstrap.Event.Common.LayoutChanged.getStream(this.controller.context), function() {
         return t.scrollToBottom()
        })
       }, r.prototype.componentDidUpdate = function() {
        this.scrollToBottom()
       }, r.prototype.scrollToBottom = function() {
        var e = this.refs.log;
        e && (e.scrollTop = e.scrollHeight - e.clientHeight - 1)
       }, r.prototype.render = function() {
        {
         var n = this.controller.latestState.entries;
         n.count()
        }
        return t.React.createElement("div", {
         className: "lm-log-wrap"
        }, t.React.createElement("div", {
         className: "lm-log",
         ref: "log"
        }, t.React.createElement("ul", {
         className: "lm-list-unstyled"
        }, n.map(function(n, r) {
         var o, a = n;
         switch (a.type) {
          case i.Message:
           o = t.React.createElement("div", {
            className: "lm-log-entry"
           }, a.message);
           break;
          case i.Error:
           o = t.React.createElement("div", {
            className: "lm-log-entry"
           }, t.React.createElement("span", {
            className: "label label-danger"
           }, "Error"), " ", a.message);
           break;
          case i.Warning:
           o = t.React.createElement("div", {
            className: "lm-log-entry"
           }, t.React.createElement("span", {
            className: "label label-warning"
           }, "Warning"), " ", a.message);
           break;
          case i.Info:
           o = t.React.createElement("div", {
            className: "lm-log-entry"
           }, t.React.createElement("span", {
            className: "label label-info"
           }, "Info"), " ", a.message)
         }
         var s = e.Bootstrap.Utils.formatTime(a.timestamp);
         return t.React.createElement("li", {
          key: r
         }, t.React.createElement("div", {
          className: "lm-log-entry-badge lm-log-entry-" + i[a.type].toLowerCase()
         }), t.React.createElement("div", {
          className: "lm-log-timestamp"
         }, s), t.React.createElement("div", {
          className: "lm-log-entry"
         }, a.message))
        }))))
       }, r
      }(n.View);
     r.Log = o
    }(r = n.Context || (n.Context = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
       function n() {
        return t.apply(this, arguments) || this
       }
       return l(n, t), n.prototype.render = function() {
        var t = this.props.info;
        return e.React.createElement("div", {
         className: "lm-task-state"
        }, e.React.createElement("div", null, t.abort ? e.React.createElement(e.Controls.Button, {
         onClick: function() {
          return t.abort.call(null)
         },
         style: "remove",
         icon: "abort",
         title: "Abort",
         customClass: "lm-btn-icon"
        }) : void 0, e.React.createElement("div", null, t.name, ": ", t.message)))
       }, n
      }(e.React.Component),
      i = function(t) {
       function n() {
        return t.apply(this, arguments) || this
       }
       return l(n, t), n.prototype.render = function() {
        var t = this.controller.latestState;
        if (!t.tasks.count()) return e.React.createElement("div", {
         className: "lm-empty-control"
        });
        var n = [];
        return t.tasks.forEach(function(t, i) {
         return n.push(e.React.createElement(r, {
          key: i,
          info: t
         }))
        }), e.React.createElement("div", {
         className: "lm-overlay"
        }, e.React.createElement("div", {
         className: "lm-overlay-background"
        }), e.React.createElement("div", {
         className: "lm-overlay-content-wrap"
        }, e.React.createElement("div", {
         className: "lm-overlay-content"
        }, e.React.createElement("div", null, n))))
       }, n
      }(t.View);
     n.Overlay = i;
     var o = function(t) {
      function n() {
       return t.apply(this, arguments) || this
      }
      return l(n, t), n.prototype.render = function() {
       var t = this.controller.latestState;
       if (!t.tasks.count()) return e.React.createElement("div", {
        className: "lm-empty-control"
       });
       var n = [];
       return t.tasks.forEach(function(t, i) {
        return n.push(e.React.createElement(r, {
         key: i,
         info: t,
         isSmall: !0
        }))
       }), e.React.createElement("div", {
        className: "lm-background-tasks"
       }, n)
      }, n
     }(t.View);
     n.BackgroundTasks = o
    }(n = t.Context || (t.Context = {}))
   }(t = e.Views || (e.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(e) {
   var t;
   ! function(t) {
    var n;
    ! function(n) {
     var r = function(t) {
       function n() {
        return t.apply(this, arguments) || this
       }
       return l(n, t), n.prototype.hide = function() {
        var e = this.props.entry;
        (e.hide || function() {}).call(null)
       }, n.prototype.render = function() {
        var t = this,
         n = this.props.entry;
        return e.React.createElement("div", {
         className: "lm-toast-entry"
        }, e.React.createElement("div", {
         className: "lm-toast-title",
         onClick: function() {
          return t.hide()
         }
        }, n.title), e.React.createElement("div", {
         className: "lm-toast-message"
        }, e.React.createElement("div", {
         dangerouslySetInnerHTML: {
          __html: n.message
         }
        })), e.React.createElement("div", {
         className: "lm-toast-clear"
        }), e.React.createElement("div", {
         className: "lm-toast-hide"
        }, e.React.createElement(e.Controls.Button, {
         onClick: function() {
          return t.hide()
         },
         style: "link",
         icon: "abort",
         title: "Hide",
         customClass: "lm-btn-icon"
        })))
       }, n
      }(e.React.Component),
      i = function(t) {
       function n() {
        return t.apply(this, arguments) || this
       }
       return l(n, t), n.prototype.render = function() {
        var t = this.controller.latestState;
        if (!t.entries.count()) return e.React.createElement("div", {
         className: "lm-empty-control"
        });
        var n = [];
        t.entries.forEach(function(e) {
         return n.push(e)
        }), n.sort(function(e, t) {
         return e.serialNumber - t.serialNumber
        });
        var i = n.map(function(t) {
         return e.React.createElement(r, {
          key: t.serialNumber,
          entry: t
         })
        });
        return e.React.createElement("div", {
         className: "lm-toast-container"
        }, e.React.createElement("div", null, i))
       }, n
      }(t.View);
     n.Toast = i
    }(n = t.Context || (t.Context = {}))
   }(t = e.Views || (e.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     e.Bootstrap.Entity;
     r.VisibilityControl = function(n) {
      var r, i, o = n.entity,
       a = function() {
        e.Bootstrap.Command.Entity.SetVisibility.dispatch(o.tree.context, {
         entity: o,
         visible: 0 === o.state.visibility ? !1 : !0
        })
       },
       s = o.state.visibility;
      return 0 === s ? (r = "full", i = "Hide") : 2 === s ? (r = "none", i = "Show") : (r = "partial", i = "Show"), t.React.createElement(t.Controls.Button, {
       title: i,
       onClick: a,
       icon: "visual-visibility",
       style: "link",
       customClass: "lm-entity-tree-entry-toggle-visible lm-entity-tree-entry-toggle-visible-" + r
      })
     };
     var i = function(n) {
       function i() {
        var e = n.apply(this, arguments) || this;
        return e.renderedVersion = -1, e
       }
       return l(i, n), i.prototype.ensureVisible = function() {
        if (this.ctx.currentEntity === this.props.node) {
         var e = this.refs.root;
         this.props.tree.scrollIntoView(e)
        }
       }, i.prototype.componentDidMount = function() {
        this.ensureVisible()
       }, i.prototype.componentDidUpdate = function() {
        this.ensureVisible()
       }, Object.defineProperty(i.prototype, "node", {
        get: function() {
         return this.props.node
        },
        enumerable: !0,
        configurable: !0
       }), i.prototype.shouldComponentUpdate = function() {
        return this.node.version !== this.renderedVersion
       }, i.prototype.componentWillMount = function() {
        var t = this;
        this.ctx = this.props.node.tree.context;
        var n = this.node;
        this.subscribe(e.Bootstrap.Event.Tree.NodeUpdated.getStream(this.ctx), function(r) {
         r.data === n && (n.version !== t.renderedVersion && t.forceUpdate(), t.ctx.currentEntity === n && t.isFullyBound() && setTimeout(e.Bootstrap.Command.Entity.SetCurrent.dispatch(t.ctx, n.children[0]), 0))
        })
       }, i.prototype.highlight = function(t) {
        var n = this.node;
        e.Bootstrap.Command.Entity.Highlight.dispatch(this.ctx, {
         entities: this.ctx.select(e.Bootstrap.Tree.Selection.byValue(n).subtree()),
         isOn: t
        })
       }, i.prototype.row = function(n) {
        var i = this,
         o = this.props.node,
         a = (o.state, o.props),
         s = o.parent === o,
         u = a.label;
        return a.description && (u += " (" + a.description + ")"), t.React.createElement("div", {
         className: "lm-entity-tree-entry-body" + (this.ctx.currentEntity === o ? " lm-entity-tree-entry-current" : "") + (this.isOnCurrentPath() ? " lm-entity-tree-entry-current-path" : ""),
         ref: "root"
        }, t.React.createElement(r.Badge, {
         type: o.type.info
        }), t.React.createElement("div", {
         className: "lm-entity-tree-entry-label-wrap"
        }, t.React.createElement(t.Controls.Button, {
         onClick: function() {
          return e.Bootstrap.Command.Entity.SetCurrent.dispatch(i.ctx, o)
         },
         customClass: "lm-entity-tree-entry-label",
         style: "link",
         title: u
        }, t.React.createElement("span", null, a.label, t.React.createElement("span", {
         className: "lm-entity-tree-entry-label-tag"
        }, a.description ? " " + a.description : void 0)))), !s || n ? t.React.createElement(t.Controls.Button, {
         title: "Remove",
         onClick: function() {
          return e.Bootstrap.Command.Tree.RemoveNode.dispatch(o.tree.context, o)
         },
         icon: "remove",
         style: "link",
         customClass: "lm-entity-tree-entry-remove"
        }) : void 0, s && !n ? void 0 : t.React.createElement(r.VisibilityControl, {
         entity: o
        }))
       }, i.prototype.renderFlat = function() {
        for (var e = this.node, n = [], r = 0, o = e.children; r < o.length; r++) {
         var a = o[r];
         n.push(t.React.createElement(i, {
          key: a.id,
          node: a,
          tree: this.props.tree
         }))
        }
        return t.React.createElement("div", {
         key: e.id
        }, n)
       }, i.prototype.isFullyBound = function() {
        for (var e = !0, t = 0, n = this.node.children; t < n.length; t++) {
         var r = n[t];
         if (!r.transform.props.isBinding) {
          e = !1;
          break
         }
        }
        return e && 1 === this.node.children.length
       }, i.prototype.isOnCurrentPath = function() {
        if (!this.ctx.currentEntity) return !1;
        for (var e = this.ctx.currentEntity.parent, t = this.node; e.parent !== e;) {
         if (e === t) return !0;
         e = e.parent
        }
        return !1
       }, i.prototype.render = function() {
        var n = this,
         r = this.node;
        this.renderedVersion = r.version;
        var o = r.parent === r;
        if (this.isFullyBound()) return this.renderFlat();
        for (var a = r.state, s = (r.props, 0), u = [], l = 0, c = r.children; l < c.length; l++) {
         var h = c[l];
         h.isHidden || (o || u.push(t.React.createElement(i, {
          key: h.id,
          node: h,
          tree: this.props.tree
         })), s++)
        }
        var p;
        u.length ? p = a.isCollapsed ? t.React.createElement(t.Controls.Button, {
         style: "link",
         title: "Expand",
         onClick: function() {
          return e.Bootstrap.Command.Entity.ToggleExpanded.dispatch(n.ctx, r)
         },
         icon: "expand",
         customClass: "lm-entity-tree-entry-toggle-group"
        }) : t.React.createElement(t.Controls.Button, {
         style: "link",
         title: "Collapse",
         onClick: function() {
          return e.Bootstrap.Command.Entity.ToggleExpanded.dispatch(n.ctx, r)
         },
         icon: "collapse",
         customClass: "lm-entity-tree-entry-toggle-group"
        }) : 0 === r.state.visibility && r.type.traits.isFocusable && (p = t.React.createElement(t.Controls.Button, {
         style: "link",
         icon: "focus-on-visual",
         title: "Focus",
         onClick: function() {
          return e.Bootstrap.Command.Entity.Focus.dispatch(n.ctx, n.ctx.select(r))
         },
         customClass: "lm-entity-tree-entry-toggle-group"
        }));
        var d = t.React.createElement("div", {
         className: "lm-entity-tree-entry",
         onMouseEnter: function() {
          return n.highlight(!0)
         },
         onMouseLeave: function() {
          return n.highlight(!1)
         },
         onTouchStart: function() {
          return setTimeout(function() {
           return n.highlight(!0)
          }, 1e3 / 30)
         },
         onTouchCancel: function() {
          return setTimeout(function() {
           return n.highlight(!1)
          }, 1e3 / 30)
         },
         onTouchEnd: function() {
          return setTimeout(function() {
           return n.highlight(!1)
          }, 1e3 / 30)
         }
        }, p, this.row(s));
        return t.React.createElement("div", {
         key: r.id,
         className: o ? "lm-entity-tree-root" : ""
        }, d, t.React.createElement("div", {
         className: "lm-entity-tree-children-wrap",
         style: {
          display: a.isCollapsed ? "none" : "block"
         }
        }, u))
       }, i
      }(n.ObserverView),
      o = function(n) {
       function o() {
        var e = n.apply(this, arguments) || this;
        return e.renderedVersion = -1, e.splash = r.SplashInfo.Info(), e
       }
       return l(o, n), o.prototype.scrollIntoView = function(e) {
        var t = this.refs.chilren;
        if (t && e) try {
         var n = t.getBoundingClientRect(),
          r = e.getBoundingClientRect(),
          i = t.scrollTop;
         if (r.top < n.top) {
          var o = n.top - r.top;
          t.scrollTop = i - o
         } else if (r.bottom > n.bottom) {
          var o = r.bottom - n.bottom;
          t.scrollTop = i + o
         }
        } catch (a) {}
       }, o.prototype.componentWillMount = function() {
        var t = this,
         n = this.controller.context.tree.root,
         r = n.tree.context;
        this.subscribe(e.Bootstrap.Event.Tree.NodeUpdated.getStream(r), function(e) {
         e.data === n && n.version !== t.renderedVersion && t.forceUpdate()
        })
       }, o.prototype.render = function() {
        var e = this.controller.context.tree.root;
        this.renderedVersion = e.version;
        for (var n = [], r = 0, o = e.children; r < o.length; r++) {
         var a = o[r];
         a.isHidden || n.push(t.React.createElement(i, {
          key: a.id,
          node: a,
          tree: this
         }))
        }
        return t.React.createElement("div", {
         className: "lm-entity-tree",
         ref: "root"
        }, t.React.createElement(i, {
         key: e.id,
         node: e,
         tree: this
        }), t.React.createElement("div", {
         className: "lm-entity-tree-children"
        }, n.length ? n : this.splash))
       }, o
      }(n.View);
     r.Tree = o
    }(r = n.Entity || (n.Entity = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     r.Remove = function(n) {
      return t.React.createElement(t.Controls.Button, {
       onClick: function() {
        e.Bootstrap.Command.Tree.RemoveNode.dispatch(n.entity.tree.context, n.entity), n.onRemove.call(null)
       },
       style: "link",
       icon: "remove",
       customClass: "lm-remove-entity lm-btn-icon"
      })
     };
     var i = function(n) {
      function r() {
       return n.apply(this, arguments) || this
      }
      return l(r, n), r.prototype.shouldComponentUpdate = function(e) {
       return this.props.type !== e.type
      }, r.prototype.part = function(e, n, r, i) {
       switch (r) {
        case 0:
         return i.push(t.React.createElement("span", null, e.substr(0, n))), i;
        case 1:
         return i.push(t.React.createElement("sub", null, e.substr(0, n))), i;
        default:
         return i.push(t.React.createElement("sup", null, e.substr(0, n))), i
       }
      }, r.prototype.split = function(e, t, n) {
       if (e.length) {
        for (var r = 0; r < e.length; r++) {
         if ("_" === e[r]) return this.split(e.substr(r + 1), 1, this.part(e, r, t, n)), void 0;
         if ("^" === e[r]) return this.split(e.substr(r + 1), 2, this.part(e, r, t, n)), void 0
        }
        this.part(e, e.length, t, n)
       }
      }, r.prototype.createBadge = function(e) {
       var t = [];
       return this.split(e, 0, t), t
      }, r.prototype.render = function() {
       var n = this.props.type;
       return t.React.createElement("div", {
        className: "lm-entity-badge lm-entity-badge-" + this.props.type.typeClass,
        title: n.name
       }, t.React.createElement("div", null, n === e.Bootstrap.Entity.Root.info ? void 0 : this.createBadge(n.shortName)))
      }, r
     }(t.React.Component);
     r.Badge = i;
     var o = function(n) {
      function o() {
       var e = n.apply(this, arguments) || this;
       return e.state = {
        current: void 0
       }, e
      }
      return l(o, n), o.prototype.componentWillMount = function() {
       var t = this;
       n.prototype.componentWillMount.call(this), this.state.current = this.controller.context.currentEntity, this.subscribe(e.Bootstrap.Event.Entity.CurrentChanged.getStream(this.controller.context), function(e) {
        t.setState({
         current: e.data
        })
       })
      }, o.prototype.render = function() {
       var e = this;
       if (!this.state.current) return t.React.createElement("div", {
        className: "lm-entity-info"
       }, t.React.createElement("div", null, t.React.createElement("span", null, this.controller.appName)));
       var n = this.state.current;
       return t.React.createElement("div", {
        className: "lm-entity-info",
        title: n.props.label + " " + (n.props.description ? n.props.description : "")
       }, t.React.createElement("div", null, t.React.createElement(i, {
        type: n.type.info
       }), t.React.createElement("span", null, n.props.label, t.React.createElement("span", null, n.props.description)), n.parent !== n || n.children.length ? t.React.createElement(r.Remove, {
        entity: n,
        onRemove: function() {
         return e.forceUpdate()
        }
       }) : void 0))
      }, o
     }(n.View);
     r.CurrentEntityControl = o;
     var a;
     ! function(e) {
      e.General = function() {
       return t.React.createElement("div", {
        className: "lm-entity-splash-general"
       }, t.React.createElement("div", null), t.React.createElement("span", {
        className: "lm-icon lm-icon-info"
       }), "The application operates on an entity tree structure that can be manipulated using the controls on the panel to the right.")
      };
      var n = function(e) {
       function n() {
        var t = e.apply(this, arguments) || this;
        return t.state = {
         isExpanded: !1
        }, t
       }
       return l(n, e), n.prototype.render = function() {
        var e = this;
        return t.React.createElement("div", {
         className: "lm-entity-splash-class lm-entity-splash-class-" + (this.state.isExpanded ? "expanded" : "collapsed")
        }, t.React.createElement("div", {
         onClick: function() {
          return e.setState({
           isExpanded: !e.state.isExpanded
          })
         }
        }, t.React.createElement("div", null), t.React.createElement("div", {
         className: "lm-entity-badge-" + this.props.cls
        }), " ", t.React.createElement("span", null, this.props.cls)), t.React.createElement("div", null, this.props.desc))
       }, n
      }(t.React.Component);
      e.Info = function() {
       return t.React.createElement("div", {
        className: "lm-entity-splash"
       }, t.React.createElement(e.General, null), t.React.createElement(n, {
        cls: "Root",
        desc: "The root entity represents the starting point of all actions."
       }), t.React.createElement(n, {
        cls: "Action",
        desc: "Represents a composition of one of more changes to the entity tree."
       }), t.React.createElement(n, {
        cls: "Data",
        desc: "Low level data, for example a string or a CIF dictionary."
       }), t.React.createElement(n, {
        cls: "Object",
        desc: "A more complex structure obtained from low level data. For example a molecule."
       }), t.React.createElement(n, {
        cls: "Visual",
        desc: "A visual representation of an object."
       }), t.React.createElement(n, {
        cls: "Selection",
        desc: "A description of a substructure of an object or a visual."
       }), t.React.createElement(n, {
        cls: "Behaviour",
        desc: "Represents a dynamic behavior of the program. For example creating electron density surface when the selection changes."
       }), t.React.createElement(n, {
        cls: "Group",
        desc: "A collection of related entities."
       }))
      }
     }(a = r.SplashInfo || (r.SplashInfo = {}))
    }(r = n.Entity || (n.Entity = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    var r;
    ! function(r) {
     var i = function(n) {
      function r() {
       var e = n.apply(this, arguments) || this;
       return e.state = {
        showSceneOptions: !1,
        showHelp: !1
       }, e
      }
      return l(r, n), r.prototype.help = function() {
       return t.React.createElement("div", {
        className: "lm-viewport-controls-scene-options lm-control"
       }, t.React.createElement(t.Controls.HelpBox, {
        title: "Rotate",
        content: t.React.createElement("div", null, t.React.createElement("div", null, "Left button"), t.React.createElement("div", null, "One finger touch"))
       }), t.React.createElement(t.Controls.HelpBox, {
        title: "Zoom",
        content: t.React.createElement("div", null, t.React.createElement("div", null, "Right button"), t.React.createElement("div", null, "Pinch"))
       }), t.React.createElement(t.Controls.HelpBox, {
        title: "Move",
        content: t.React.createElement("div", null, t.React.createElement("div", null, "Middle button"), t.React.createElement("div", null, "Two finger touch"))
       }), t.React.createElement(t.Controls.HelpBox, {
        title: "Slab",
        content: t.React.createElement("div", null, t.React.createElement("div", null, "Mouse wheel"), t.React.createElement("div", null, "Three finger touch"))
       }))
      }, r.prototype.render = function() {
       var n, r = this,
        i = this.controller.latestState,
        o = this.controller.context.layout,
        a = o.latestState;
       this.state.showSceneOptions ? n = t.React.createElement("div", {
        className: "lm-viewport-controls-scene-options lm-control"
       }, t.React.createElement(t.Controls.Toggle, {
        onChange: function(e) {
         return r.controller.setState({
          enableFog: e
         })
        },
        value: i.enableFog,
        label: "Fog"
       }), t.React.createElement(t.Controls.Slider, {
        label: "FOV",
        min: 30,
        max: 90,
        onChange: function(e) {
         return r.controller.setState({
          cameraFOV: e
         })
        },
        value: i.cameraFOV
       }), t.React.createElement(t.Controls.ToggleColorPicker, {
        color: i.clearColor,
        label: "Background",
        position: "below",
        onChange: function(e) {
         return r.controller.setState({
          clearColor: e
         })
        }
       })) : this.state.showHelp && (n = this.help());
       var s = !a.hideControls;
       return t.React.createElement("div", {
        className: "lm-viewport-controls",
        onMouseLeave: function() {
         return r.setState({
          showSceneOptions: !1,
          showHelp: !1
         })
        }
       }, t.React.createElement("div", {
        className: "lm-viewport-controls-buttons"
       }, t.React.createElement(t.Controls.Button, {
        style: "link",
        active: this.state.showHelp,
        customClass: "lm-btn-link-toggle-" + (this.state.showHelp ? "on" : "off"),
        icon: "help-circle",
        onClick: function() {
         return r.setState({
          showHelp: !r.state.showHelp,
          showSceneOptions: !1
         })
        },
        title: "Controls Help"
       }), t.React.createElement(t.Controls.Button, {
        style: "link",
        active: this.state.showSceneOptions,
        customClass: "lm-btn-link-toggle-" + (this.state.showSceneOptions ? "on" : "off"),
        icon: "settings",
        onClick: function() {
         return r.setState({
          showSceneOptions: !r.state.showSceneOptions,
          showHelp: !1
         })
        },
        title: "Scene Options"
       }), t.React.createElement(t.Controls.Button, {
        style: "link",
        icon: "screenshot",
        onClick: function() {
         window.open(r.controller.scene.scene.screenshotAsDataURL(), "_blank")
        },
        title: "Screenshot"
       }), t.React.createElement(t.Controls.Button, {
        onClick: function() {
         o.update({
          hideControls: s
         }), r.forceUpdate()
        },
        icon: "tools",
        title: s ? "Hide Controls" : "Show Controls",
        active: s,
        customClass: "lm-btn-link-toggle-" + (s ? "on" : "off"),
        style: "link"
       }), t.React.createElement(t.Controls.Button, {
        onClick: function() {
         return o.update({
          isExpanded: !a.isExpanded
         })
        },
        icon: "expand-layout",
        title: a.isExpanded ? "Collapse" : "Expand",
        active: a.isExpanded,
        customClass: "lm-btn-link-toggle-" + (a.isExpanded ? "on" : "off"),
        style: "link"
       }), t.React.createElement(t.Controls.Button, {
        style: "link",
        icon: "reset-scene",
        onClick: function() {
         return e.Bootstrap.Command.Visual.ResetScene.dispatch(r.controller.context, void 0)
        },
        title: "Reset scene"
       })), n)
      }, r
     }(n.View);
     r.ViewportControls = i;
     var o = function(e) {
      function n() {
       return e.apply(this, arguments) || this
      }
      return l(n, e), n.prototype.render = function() {
       var e = this.controller.latestState,
        n = e.info;
       if (!n.length) return t.React.createElement("div", {
        className: "lm-empty-control"
       });
       var r = {
        __html: n.join(", ")
       };
       return t.React.createElement("div", {
        className: "lm-highlight-info"
       }, t.React.createElement("div", {
        dangerouslySetInnerHTML: r
       }))
      }, n
     }(n.View);
     r.HighlightInfo = o, r.Logo = function() {
      return t.React.createElement("div", {
       className: "lm-logo"
      }, t.React.createElement("div", null, t.React.createElement("div", null, t.React.createElement("div", null), t.React.createElement("div", {
       className: "lm-logo-image"
      }))))
     };
     var a = function(n) {
      function o() {
       var e = n.apply(this, arguments) || this;
       return e.state = {
        noWebGl: !1,
        showLogo: !0
       }, e
      }
      return l(o, n), o.prototype.componentDidMount = function() {
       this.controller.init(this.refs["host-3d"]) || this.setState({
        noWebGl: !0
       }), this.handleLogo()
      }, o.prototype.componentWillUnmount = function() {
       n.prototype.componentWillUnmount.call(this), this.controller.destroy()
      }, o.prototype.renderMissing = function() {
       return t.React.createElement("div", {
        className: "lm-no-webgl"
       }, t.React.createElement("div", null, t.React.createElement("p", null, t.React.createElement("b", null, "WebGL does not seem to be available.")), t.React.createElement("p", null, "This can be caused by an outdated browser, graphics card driver issue, or bad weather. Sometimes, just restarting the browser helps."), t.React.createElement("p", null, "For a list of supported browsers, refer to ", t.React.createElement("a", {
        href: "http://caniuse.com/#feat=webgl",
        target: "_blank"
       }, "http://caniuse.com/#feat=webgl"), ".")))
      }, o.prototype.handleLogo = function() {
       var t = this;
       this.subscribe(e.Bootstrap.Event.Tree.NodeAdded.getStream(this.controller.context), function(n) {
        e.Bootstrap.Entity.isClass(n.data, e.Bootstrap.Entity.VisualClass) && setTimeout(function() {
         return t.setState({
          showLogo: t.getShowLogo()
         })
        }, 0)
       }), this.subscribe(e.Bootstrap.Event.Tree.NodeRemoved.getStream(this.controller.context), function(n) {
        e.Bootstrap.Entity.isClass(n.data, e.Bootstrap.Entity.VisualClass) && setTimeout(function() {
         return t.setState({
          showLogo: t.getShowLogo()
         })
        }, 0)
       })
      }, o.prototype.getShowLogo = function() {
       try {
        return this.controller.context.viewport.scene.models.isEmpty()
       } catch (e) {
        return !0
       }
      }, o.prototype.render = function() {
       return this.state.noWebGl ? this.renderMissing() : t.React.createElement("div", {
        className: "lm-viewport"
       }, t.React.createElement("div", {
        ref: "host-3d",
        className: "lm-viewport-host3d"
       }), this.state.showLogo ? t.React.createElement(r.Logo, null) : void 0, t.React.createElement(i, {
        controller: this.controller
       }))
      }, o
     }(n.View);
     r.Viewport = a
    }(r = n.Visualization || (n.Visualization = {}))
   }(n = t.Views || (t.Views = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   var n;
   ! function(n) {
    function r(e, t, n) {
     return function(r, i) {
      return function(o) {
       return {
        key: e,
        controller: t(o),
        region: r,
        view: n,
        isStatic: i
       }
      }
     }
    }
    n.create = r;
    var i = function(e) {
     function t(t, n, r) {
      var i = e.call(this, t, {}) || this;
      return i.appName = n, i.appVersion = r, i
     }
     return l(t, e), t
    }(e.Bootstrap.Components.Component);
    n.AppInfo = i;
    var o;
    ! function(n) {
     n.Log = r("Context.Log", function(t) {
      return new e.Bootstrap.Components.Context.Log(t)
     }, t.Views.Context.Log), n.Toast = r("Context.Toast", function(t) {
      return new e.Bootstrap.Components.Context.Toast(t)
     }, t.Views.Context.Toast), n.Overlay = r("Context.Overlay", function(t) {
      return new e.Bootstrap.Components.Context.TaskWatcher(t, "Normal")
     }, t.Views.Context.Overlay), n.BackgroundTasks = r("Context.BackgroundTasks", function(t) {
      return new e.Bootstrap.Components.Context.TaskWatcher(t, "Background")
     }, t.Views.Context.BackgroundTasks)
    }(o = n.Context || (n.Context = {}));
    var a;
    ! function(n) {
     n.View = r("Transform.View", function(t) {
      return new e.Bootstrap.Components.Transform.View(t)
     }, t.Views.Transform.View)
    }(a = n.Transform || (n.Transform = {}));
    var s;
    ! function(e) {
     e.Current = function(e, n) {
      return r("EntityInfo", function(t) {
       return new i(t, e, n)
      }, t.Views.Entity.CurrentEntityControl)
     }
    }(s = n.Entity || (n.Entity = {}));
    var u;
    ! function(n) {
     n.Viewport = r("Viewport", function(t) {
      return new e.Bootstrap.Components.Visualization.Viewport(t)
     }, t.Views.Visualization.Viewport), n.HighlightInfo = r("HighlightInfo", function(t) {
      return new e.Bootstrap.Components.Visualization.HighlightInfo(t)
     }, t.Views.Visualization.HighlightInfo)
    }(u = n.Visualization || (n.Visualization = {}))
   }(n = t.Components || (t.Components = {}))
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   t.Context = e.Bootstrap.Context;
   var n = e.Bootstrap.Components.LayoutRegion,
    r = function() {
     function r(n, r) {
      this.spec = n, this.target = r, this.componentMap = new Map, this.transformersInfo = new Map, this.context = new e.Bootstrap.Context(this), this.init(), t.ReactDOM.render(t.React.createElement(this.spec.layoutView, {
       controller: this.context.layout
      }), r), e.Bootstrap.Command.Entity.SetCurrent.dispatch(this.context, this.context.tree.root)
     }
     return r.prototype.compose = function() {
      for (var t = 0, n = Object.keys(this.spec.settings); t < n.length; t++) {
       var r = n[t];
       Object.prototype.hasOwnProperty.call(this.spec.settings, r) && this.context.settings.set(r, this.spec.settings[r])
      }
      for (var i = e.Bootstrap.Components.makeEmptyTargets(), o = 0, a = this.spec.behaviours || []; o < a.length; o++) {
       var s = a[o];
       s(this.context)
      }
      for (var u = 0, l = this.spec.transforms; u < l.length; u++) {
       var c = l[u];
       this.context.transforms.add(c.transformer), this.transformersInfo.set(c.transformer.info.id, c)
      }
      for (var h = 0, p = this.spec.components; h < p.length; h++) {
       var d = p[h],
        f = d(this.context);
       if (this.componentMap.has(f.key)) throw "Component with key '" + f.key + "' was already added. Fix your spec.";
       i[f.region].components.push(f), this.componentMap.set(f.key, f)
      }
      return i
     }, r.prototype.getTransformerInfo = function(e) {
      return this.transformersInfo.get(e.info.id)
     }, r.prototype.destroy = function() {
      this.context.dispatcher.finished(), t.ReactDOM.unmountComponentAtNode(this.target), this.context = void 0, this.componentMap = void 0, this.spec = void 0, this.target = void 0
     }, r.prototype.init = function() {
      var t = this.compose();
      this.spec.tree && t[this.spec.tree.region].components.push({
       key: "lm-internal-tree",
       controller: new e.Bootstrap.Components.Component(this.context, {}),
       region: this.spec.tree.region,
       view: this.spec.tree.view,
       isStatic: !0
      }), t[n.Main].components.push({
       key: "lm-internal-viewport",
       controller: this.context.viewport,
       region: n.Main,
       view: this.spec.viewport.view,
       isStatic: !0
      }), this.context.createLayout(t, this.target)
     }, r
    }();
   t.Instance = r
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 ! function(e) {
  var t;
  ! function(t) {
   function n() {
    return {
     settings: {
      "molecule.model.defaultQuery": "residues({ name: 'ALA' })",
      "molecule.model.defaultAssemblyName": "1",
      "molecule.coordinateStreaming.defaultId": "1jj2",
      "molecule.coordinateStreaming.defaultServer": "https://webchemdev.ncbr.muni.cz/CoordinateServer",
      "molecule.coordinateStreaming.defaultRadius": 10,
      "density.defaultVisualBehaviourRadius": 5
     },
     transforms: [{
      transformer: i.Molecule.CoordinateStreaming.InitStreaming,
      view: t.Views.Transform.Molecule.InitCoordinateStreaming,
      initiallyCollapsed: !0
     }, {
      transformer: r.DownloadMolecule,
      view: t.Views.Transform.Data.WithUrlIdField,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.OpenMoleculeFromFile,
      view: t.Views.Transform.Molecule.OpenFile,
      initiallyCollapsed: !0
     }, {
      transformer: i.Data.Download,
      view: t.Views.Transform.Data.Download,
      initiallyCollapsed: !0
     }, {
      transformer: i.Data.OpenFile,
      view: t.Views.Transform.Data.OpenFile,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.CreateFromData,
      view: t.Views.Transform.Molecule.CreateFromData
     }, {
      transformer: i.Data.ParseCif,
      view: t.Views.Transform.Empty
     }, {
      transformer: i.Density.ParseData,
      view: t.Views.Transform.Density.ParseData
     }, {
      transformer: i.Molecule.CreateFromMmCif,
      view: t.Views.Transform.Molecule.CreateFromMmCif
     }, {
      transformer: i.Molecule.CreateModel,
      view: t.Views.Transform.Molecule.CreateModel,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.CreateSelection,
      view: t.Views.Transform.Molecule.CreateSelection,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.CreateAssembly,
      view: t.Views.Transform.Molecule.CreateAssembly,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.CreateSymmetryMates,
      view: t.Views.Transform.Molecule.CreateSymmetryMates,
      initiallyCollapsed: !0
     }, {
      transformer: i.Molecule.CreateMacromoleculeVisual,
      view: t.Views.Transform.Empty
     }, {
      transformer: i.Molecule.CreateVisual,
      view: t.Views.Transform.Molecule.CreateVisual
     }, {
      transformer: i.Density.CreateVisual,
      view: t.Views.Transform.Density.CreateVisual
     }, {
      transformer: i.Density.CreateVisualBehaviour,
      view: t.Views.Transform.Density.CreateVisualBehaviour
     }, {
      transformer: i.Molecule.CoordinateStreaming.CreateBehaviour,
      view: t.Views.Transform.Empty,
      initiallyCollapsed: !0
     }],
     behaviours: [e.Bootstrap.Behaviour.SetEntityToCurrentWhenAdded, e.Bootstrap.Behaviour.FocusCameraOnSelect, e.Bootstrap.Behaviour.ApplySelectionToVisual, e.Bootstrap.Behaviour.ApplyInteractivitySelection, e.Bootstrap.Behaviour.UnselectElementOnRepeatedClick, e.Bootstrap.Behaviour.Molecule.HighlightElementInfo, e.Bootstrap.Behaviour.Molecule.DistanceToLastClickedElement, e.Bootstrap.Behaviour.Molecule.ShowInteractionOnSelect(5)],
     components: [t.Components.Visualization.HighlightInfo(o.Main, !0), t.Components.Entity.Current("LiteMol", t.VERSION.number)(o.Right, !0), t.Components.Transform.View(o.Right), t.Components.Context.Log(o.Bottom, !0), t.Components.Context.Overlay(o.Root), t.Components.Context.Toast(o.Main, !0), t.Components.Context.BackgroundTasks(o.Main, !0)],
     viewport: {
      view: t.Views.Visualization.Viewport,
      controlsView: t.Views.Visualization.ViewportControls
     },
     layoutView: t.Views.Layout,
     tree: {
      region: o.Left,
      view: t.Views.Entity.Tree
     }
    }
   }
   var r, i = e.Bootstrap.Entity.Transformer;
   ! function(e) {
    e.DownloadMolecule = i.Molecule.downloadMoleculeSource({
     sourceId: "url-molecule",
     name: "URL",
     description: "Download a molecule from the specified URL (if the host server supports cross domain requests).",
     defaultId: "https://webchemdev.ncbr.muni.cz/CoordinateServer/1tqn/cartoon",
     urlTemplate: function(e) {
      return e
     },
     isFullUrl: !0
    })
   }(r = t.DataSources || (t.DataSources = {}));
   var o = e.Bootstrap.Components.LayoutRegion;
   t.getDefaultSpecification = n
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {}));
 var a;
 return function(e) {
  var t;
  ! function(t) {
   function n(e) {
    return new o(e)
   }
   var r = e.Bootstrap.Entity,
    i = r.Transformer,
    o = function() {
     function n(n) {
      var r = n.customSpecification ? n.customSpecification : t.getDefaultSpecification();
      n.customSpecification || r.behaviours.push(e.Bootstrap.Behaviour.GoogleAnalytics(n.analyticsId ? n.analyticsId : "UA-77062725-1"));
      var i;
      if (i = n.target instanceof HTMLElement ? n.target : document.querySelector(n.target), !i) throw new Error("options.target cannot be undefined.");
      this._instance = new t.Instance(r, i), n.viewportBackground && this.setViewportBackground(n.viewportBackground), n.layoutState && this.setLayoutState(n.layoutState)
     }
     return Object.defineProperty(n.prototype, "instance", {
      get: function() {
       return this._instance
      },
      enumerable: !0,
      configurable: !0
     }), Object.defineProperty(n.prototype, "context", {
      get: function() {
       return this._instance.context
      },
      enumerable: !0,
      configurable: !0
     }), Object.defineProperty(n.prototype, "root", {
      get: function() {
       return this._instance.context.tree.root
      },
      enumerable: !0,
      configurable: !0
     }), n.prototype.command = function(e, t) {
      e.dispatch(this.context, t)
     }, n.prototype.selectEntities = function(e) {
      return this.context.select(e)
     }, n.prototype.subscribe = function(e, t) {
      return e.getStream(this.context).subscribe(t)
     }, n.prototype.createTransform = function() {
      return e.Bootstrap.Tree.Transform.build()
     }, n.prototype.applyTransform = function(t) {
      var n = this.context;
      return e.Bootstrap.Tree.Transform.apply(n, t).run(n)
     }, n.prototype.clear = function() {
      this.command(e.Bootstrap.Command.Tree.RemoveNode, this.root)
     }, n.prototype.setViewportBackground = function(t) {
      e.Visualization.Color.isColor(t) ? this.command(e.Bootstrap.Command.Layout.SetViewportOptions, {
       clearColor: t
      }) : this.command(e.Bootstrap.Command.Layout.SetViewportOptions, {
       clearColor: e.Visualization.Color.fromHexString(t)
      })
     }, n.prototype.setLayoutState = function(t) {
      this.command(e.Bootstrap.Command.Layout.SetState, t)
     }, n.prototype.loadMolecule = function(t) {
      var n = this.createTransform();
      if (!t.url && !t.data) throw new Error("Please specify either url or data");
      var o = e.Core.Formats.Molecule.SupportedFormats.mmCIF;
      if (t.format)
       if (e.Core.Formats.FormatInfo.is(t.format)) o = t.format;
       else {
        var a = e.Core.Formats.FormatInfo.fromShortcut(e.Core.Formats.Molecule.SupportedFormats.All, t.format);
        if (!a) throw new Error("'" + t.format + "' is not a supported format.");
        o = a
       } var s = t.data ? n.add(this.root, r.Transformer.Data.FromData, {
       data: t.data,
       id: t.id
      }) : n.add(this.root, i.Data.Download, {
       url: t.url,
       type: o.isBinary ? "Binary" : "String",
       id: t.id,
       title: "Molecule"
      });
      return s.then(i.Molecule.CreateFromData, {
       format: o,
       customId: t.id
      }, {
       isBinding: !0,
       ref: t.moleculeRef
      }).then(i.Molecule.CreateModel, {
       modelIndex: 0
      }, {
       isBinding: !1,
       ref: t.modelRef
      }).then(i.Molecule.CreateMacromoleculeVisual, {
       polymer: !0,
       het: !0,
       water: !0
      }), this.applyTransform(s)
     }, n.prototype.destroy = function() {
      this._instance && (this._instance.destroy(), this._instance = void 0)
     }, n
    }();
   t.Controller = o, t.create = n
  }(t = e.Plugin || (e.Plugin = {}))
 }(a || (a = {})), a
};
if ("object" == typeof module && "object" == typeof module.exports) module.exports = __LiteMol_Plugin();
else if ("function" == typeof define && define.amd) define(["require"], function() {
 return __LiteMol_Plugin()
});
else {
 var __target = window ? window : this;
 __target.LiteMol = __LiteMol_Plugin()
}
var d3Instance = void 0;
d3Instance = "undefined" != typeof d3version3 ? d3version3 : d3;
var airForceBlue = d3Instance.rgb(93, 138, 168).brighter(),
 fuchsia = d3Instance.rgb(145, 92, 131).brighter(),
 armyGreen = d3Instance.rgb(75, 83, 32).brighter(),
 auburn = d3Instance.rgb(165, 42, 42).brighter(),
 burntOrange = d3Instance.rgb(204, 85, 0),
 burntOrangeBright = d3Instance.rgb(204, 85, 0).brighter(),
 burgundy = d3Instance.rgb(128, 0, 32).brighter(),
 burgundy1 = d3Instance.rgb(205, 127, 50).brighter(),
 lightGray = d3Instance.rgb(105, 105, 105).brighter(),
 brass = d3Instance.rgb(205, 149, 117),
 blueGray = d3Instance.rgb(102, 153, 204),
 bottleGreen = d3Instance.rgb(0, 106, 78).brighter(),
 bronze = d3Instance.rgb(205, 127, 50).brighter(),
 coffee = d3Instance.rgb(111, 78, 55).brighter(),
 coolGray = d3Instance.rgb(140, 146, 172),
 black = d3Instance.rgb(0, 0, 0),
 qualityGreen = d3Instance.rgb(0, 128, 0).brighter(),
 qualityBlue = d3Instance.rgb(0, 104, 139).brighter(),
 qualityYellow = d3Instance.rgb(255, 255, 53),
 qualityRed = d3Instance.rgb(204, 0, 0),
 testClr = d3Instance.rgb(189.68374033094645, 67.85790768979034, 73.38905580792535),
 colorArr = [airForceBlue, coolGray, fuchsia, coffee, armyGreen, blueGray, brass, bottleGreen];
angular.module("d3Core", []).factory("d3", function() {
 return "undefined" != typeof d3version3 ? d3version3 : d3
});
var pageUrlStr = window.location.href,
 ebiUrlFlag = new RegExp("ebi.ac.uk").test(pageUrlStr),
 pclUrlEnv = "wwwdev";
ebiUrlFlag && (pclUrlEnv = new RegExp("wwwdev").test(pageUrlStr) ? "wwwdev" : new RegExp("wwwint").test(pageUrlStr) ? "wwwint" : "www");
var pdbComponentLibrarConfig = {
 env: pclUrlEnv
};
angular.module("liteMolCore", []).factory("LiteMol", function() {
 return LiteMol
});
var pdbComponentLibraryColors = {
 colorBox: [
  [
   [51, 123, 177],
   [23, 83, 137],
   [5, 54, 106],
   [99, 175, 213],
   [176, 229, 251]
  ],
  [
   [100, 63, 145],
   [100, 46, 131],
   [98, 99, 173],
   [101, 28, 117],
   [99, 81, 159]
  ],
  [
   [154, 69, 21],
   [118, 39, 21],
   [83, 10, 21],
   [189, 98, 21],
   [224, 127, 21]
  ],
  [
   [166, 72, 122],
   [115, 39, 89],
   [218, 116, 135],
   [227, 146, 149],
   [237, 175, 170]
  ],
  [
   [50, 120, 114],
   [39, 78, 82],
   [59, 156, 132],
   [68, 192, 147],
   [74, 232, 156]
  ],
  [
   [97, 97, 26],
   [73, 73, 25],
   [48, 48, 20],
   [118, 118, 23],
   [134, 134, 16]
  ]
 ],
 colorBox1: [
  [
   [0, 55, 55],
   [0, 75, 75],
   [0, 94, 94],
   [0, 35, 35],
   [0, 114, 114],
   [0, 133, 133],
   [0, 153, 153]
  ],
  [
   [0, 63, 94],
   [0, 76, 114],
   [0, 89, 133],
   [0, 102, 153],
   [0, 115, 173],
   [0, 128, 192],
   [0, 141, 212]
  ],
  [
   [51, 73, 51],
   [62, 88, 62],
   [72, 103, 72],
   [82, 118, 82],
   [93, 133, 93],
   [41, 58, 41],
   [103, 148, 103]
  ]
 ],
 colorBox2: [
  [
   [59, 94, 94],
   [53, 100, 100],
   [41, 112, 112],
   [35, 118, 118],
   [29, 124, 124],
   [24, 129, 129],
   [18, 135, 135],
   [12, 141, 141],
   [65, 88, 88]
  ],
  [
   [59, 82, 94],
   [53, 84, 100],
   [47, 86, 106],
   [24, 94, 129],
   [12, 98, 141],
   [65, 80, 88],
   [0, 102, 153]
  ],
  [
   [40, 57, 40],
   [48, 68, 48],
   [56, 80, 56],
   [64, 91, 64],
   [72, 103, 72],
   [80, 115, 80],
   [88, 126, 88],
   [32, 45, 32],
   [24, 34, 24],
   [96, 138, 96]
  ]
 ],
 colorBox3: [
  [
   [99, 106, 137],
   [110, 118, 151],
   [125, 132, 161],
   [140, 146, 172],
   [155, 160, 183]
  ],
  [
   [114, 72, 103],
   [129, 82, 117],
   [145, 92, 131],
   [159, 104, 144],
   [98, 62, 89],
   [169, 119, 156]
  ],
  [
   [111, 78, 55],
   [128, 90, 63],
   [145, 102, 72],
   [94, 66, 47],
   [77, 54, 38],
   [60, 42, 30]
  ],
  [
   [75, 83, 32],
   [92, 101, 39],
   [108, 120, 46],
   [58, 65, 25],
   [42, 46, 18]
  ],
  [
   [57, 115, 172],
   [64, 128, 191],
   [83, 140, 198],
   [121, 166, 210],
   [140, 179, 217]
  ],
  [
   [0, 81, 59],
   [0, 106, 78],
   [0, 132, 97],
   [0, 55, 40],
   [0, 157, 116]
  ],
  [
   [180, 107, 65],
   [191, 120, 80],
   [198, 135, 98],
   [205, 149, 117],
   [212, 163, 136]
  ]
 ],
 colorGradients: {
  redStack: [
   [128, 0, 0],
   [195, 33, 72],
   [135, 38, 87],
   [112, 41, 99],
   [255, 56, 0],
   [204, 85, 0],
   [255, 0, 0],
   [231, 84, 128],
   [207, 113, 175],
   [148, 0, 211],
   [255, 127, 80],
   [255, 103, 0],
   [244, 194, 194],
   [209, 159, 232],
   [255, 140, 0],
   [255, 179, 71]
  ],
  greenStack: [
   [0, 66, 37],
   [85, 107, 47],
   [75, 83, 32],
   [19, 136, 8],
   [141, 182, 0],
   [23, 114, 69],
   [120, 134, 107],
   [3, 192, 60],
   [62, 180, 137]
  ],
  darkStack: [
   [128, 0, 0],
   [0, 0, 128],
   [0, 51, 0],
   [102, 0, 102],
   [0, 51, 102],
   [51, 51, 0]
  ]
 },
 specificColors: {
  lightGray: [105, 105, 105],
  burntOrange: [204, 85, 0],
  burgundy: [128, 0, 0],
  brass: [104, 92, 7],
  airForceBlue: [93, 138, 168],
  qualityGreen: [0, 128, 0],
  qualityBlue : [100, 149, 237],
  qualityYellow: [255, 255, 53],
  qualityRed: [204, 0, 0],
  burntOrangeBright: [204, 85, 0]
 }
};
! function() {
 "use strict";
 angular.module("pdb.common.services", []).service("commonServices", ["$http", "$q", function(e) {
  this.apiUrls = {
   summary: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/summary/",
   entities: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/entities/",
   modifiedResidues: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/modified_AA_or_NA/",
   mutatedResidues: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/mutated_AA_or_NA/",
   polymerCoverage: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/polymer_coverage/",
   polymerCoveragePerChain: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/polymer_coverage/",
   bindingSites: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/binding_sites/",
   mappings: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/",
   isoforms: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/isoforms/",
   residueListing: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/residue_listing/",
   secStrutures: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/secondary_structure/",
   outliers: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/",
   ribovision: "http://apollo2.chemistry.gatech.edu/RiboVision3/1cbs_outliers.txt",
   ribovision1: "http://apollo2.chemistry.gatech.edu/RiboVision3/1cbs_outliers1.txt",
   entropy: "http://127.0.0.1:8001/alignments/entropy-api/",
   topology: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/topology/entry/",
   molecules: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/molecules/",
   uniProtToPfam: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/uniprot_to_pfam/",
   observedResidueRatio: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/observed_residues_ratio/",
   edm: "https://www.ebi.ac.uk/pdbe/coordinates/files/",
   edm_diff: "https://www.ebi.ac.uk/pdbe/coordinates/files/",
   uniprotSegments: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/uniprot_segments/",
   residueListingPerChain: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/residue_listing/",
   bestStructures: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/best_structures/",
   uniProtApiUrl: "https://www.uniprot.org/uniprot/",
   pdbUniprotDetails: "https://www.ebi.ac.uk/pdbe/entry/pdb/uniprot_details/",
   rfamMappings: "https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/nucleic_mappings/rfam/"
  }, this.createPromise = function(t, n, r, rvurl) {
   var i = this.apiUrls,
    o = n.map(function(n) {
     if ("uniProtApiUrl" === n) return e.get(i[n] + "?query=accession:" + t[0] + "&columns=id,sequence,entry name,protein names,organism,genes&format=tab&limit=1");
     if ("pdbUniprotDetails" === n || "mappings" === n || "isoforms" === n || "uniProtToPfam" === n || "bestStructures" === n || "rfamMappings" === n) return e.get(i[n] + "" + t[0]);
     if ("polymerCoveragePerChain" === n || "topology" === n || "residueListingPerChain" === n) return e.get(i[n] + "" + t[0] + "/chain/" + r);
     if("entropy" === n) return e.get(i[n] + rvurl);
     ///if ("entropy" === n){
     ///  TYPE OF REQUEST HERE
     ///  
     ///}
     if ("edm" === n) return e({
      url: i[n] + "" + t[0] + ".ccp4",
      method: "GET",
      responseType: "blob",
      cache: !0
     });
     if ("edm_diff" === n) return e({
      url: i[n] + "" + t[0] + "_diff.ccp4",
      method: "GET",
      responseType: "blob",
      cache: !0
     });
     if ("uniprotSegments" === n) {
      for (var o = t.length, a = [], s = 0; o > s; s++) a.push(e.get(i[n] + "" + t[s]));
      return a
     }
     return e({
      method: "POST",
      url: i[n],
      headers: {
       "Content-Type": "application/x-www-form-urlencoded"
      },
      data: t.join(",")
     })
    });
   return o
  }, this.createMultiPromise = function(t, n) {
   var r = this.apiUrls,
    i = t.map(function(t) {
	
     return e.get(r[n[0]] + "" + t)
    });
   return i
  }, this.combinedDataGrabber = function(e, t, n, r) {
   var i = e.map(function(e) {
    return e.then(function(e) {
     return {
      resolve: !0,
      result: e
     }
    }, function(e) {
     return {
      resolve: !1,
      result: e
     }
    })
   });
   return Promise.all(i).then(function(e) {
    var t = [],
     i = [],
     o = !0;
    if (e.forEach(function(e) {
      e.resolve && (o = !1), t.push(e.resolve ? e.result : null), i.push(e.resolve ? null : e.result)
     }), o) throw i;
    if ("undefined" != typeof r && r) {
     var a = {};
     return angular.forEach(t, function(e, t) {
      null !== e && "undefined" != typeof e && "undefined" != typeof e.data && e.data && angular.forEach(e.data, function(e, r) {
       var i = "";
       "undefined" != typeof e && e && (i = e), "undefined" == typeof a[r] && (a[r] = {});
       var o = void 0 != n[t] ? n[t] : n[0];
       a[r][o] = i
      })
     }), a
    }
    return t
   })
  }, this.sortMappingFragments = function(e) {
   var t = 1;
   return "-" === e[0] && (t = -1, e = e.substr(1)),
    function(n, r) {
     var i = n[e] < r[e] ? -1 : n[e] > r[e] ? 1 : 0;
     return i * t
    }
  }, this.checkUniportGapProbability = function(e) {
   for (var t = !1, n = e.length, r = 0; n > r; r++) {
    var i = e[r].unp_end - e[r].unp_start,
     o = e[r].end.residue_number - e[r].start.residue_number,
     a = i > 0 ? i : -i,
     s = o > 0 ? o : -o;
    if (a != s) {
     t = !0;
     break
    }
   }
   return t
  }, this.colorBox = pdbComponentLibraryColors.colorBox, this.colorBox1 = pdbComponentLibraryColors.colorBox1, this.colorBox2 = pdbComponentLibraryColors.colorBox2, this.colorBox3 = pdbComponentLibraryColors.colorBox3, this.colorGradients = pdbComponentLibraryColors.colorGradients, this.specificColors = pdbComponentLibraryColors.specificColors, this.availableEvents = [], this.createNewEvent = function(e) {
   var t = {};
   return angular.forEach(e, function(e) {
    var n;
    "function" == typeof MouseEvent ? n = new MouseEvent(e, {
     view: window,
     bubbles: !0,
     cancelable: !0
    }) : "function" == typeof document.createEvent ? (n = document.createEvent("MouseEvents"), n.initEvent(e, !0, !0)) : "function" == typeof document.createEventObject && (n = document.createEventObject()), t[e] = n
   }), t
  }
 }])
}(),
function() {
 angular.module("pdb.slideToggle", []).directive("slideable", function() {
  return {
   restrict: "C",
   compile: function(e, t) {
    if ("height" === t.slideProperty) {
     var n = e.html();
     e.html('<div class="slideable_content" style="margin:0 !important; padding:0 !important" >' + n + "</div>")
    }
    return function(e, n, r) {
     r.duration = r.duration ? r.duration : "1s", r.easing = r.easing ? r.easing : "ease-in-out", n.css({
      "overflow-y": "auto",
      "z-index": "999",
      transitionProperty: t.slideProperty,
      transitionDuration: r.duration,
      transitionTimingFunction: r.easing
     })
    }
   }
  }
 }).directive("slideToggle", function() {
  return {
   restrict: "A",
   link: function(e, t, n) {
    var r = t[0],
     i = t.parent().parent()[0].querySelector(n.slideToggle),
     o = !1;
    "undefined" != typeof n.expanded && "true" === n.expanded && (o = !0);
    var a = function() {
     var e = i.querySelector(".slideable_content"),
      t = i.style.top;
     if (o) {
      e.style.border = "1px solid rgba(0,0,0,0)";
      var n = e.clientHeight;
      e.style.border = 0, n > 135 && (n = 135), i.style.height = n + "px", r.style.top = parseInt(t.split("px")[0]) + n + 1 + "px", r.innerHTML = '<span class="icon-black icon-functional" data-icon="8">Collapse Controls</span>'
     } else i.style.height = "0px", r.style.top = t, r.innerHTML = '<span class="icon-black icon-functional" data-icon="9">Expand Controls</span>';
     o = !o
    };
    t.bind("click", function() {
     a(r)
    }), a(r)
   }
  }
 })
}(),
function() {
 angular.module("pdb.litemol", ["pdb.common.services"]).directive("pdbLiteMol", ["commonServices", "$document", "$http", "$q", function(e, t, n, r) {
  return {
   restrict: "EAC",
   scope: {
    pdbId: "=",
    loadEdMaps: "@",
    validationAnnotation: "@",
    domainAnnotation: "@",
    hideControls: "@",
    showLogs: "@",
    customQuery: "@",
    customRender: "@",
    treeMenu: "@",
    isExpanded: "@",
    subscribeEvents: "@",
    sourceUrl: "@",
    sourceFormat: "@",
    displayFullMapOnload: "@"
   },
   template: "",
   link: function(i, o) {
    i.pdbevents = e.createNewEvent(["PDB.litemol.click", "PDB.litemol.mouseover", "PDB.litemol.mouseout"]), i.hideControls = "undefined" != typeof i.hideControls && "true" == i.hideControls ? !0 : !1, i.treeMenu = "undefined" != typeof i.treeMenu && "true" == i.treeMenu ? !0 : !1, i.isExpanded = "undefined" != typeof i.isExpanded && "true" == i.isExpanded ? !0 : !1, "undefined" == typeof i.subscribeEvents && (i.subscribeEvents = "true");
    var a, s = this && this.__extends || function(e, t) {
     function n() {
      this.constructor = e
     }
     for (var r in t) t.hasOwnProperty(r) && (e[r] = t[r]);
     e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n)
    };
    ! function(e) {
     var t;
     ! function(e) {
      var t = LiteMol.Bootstrap,
       n = t.Entity;
      e.DownloadMolecule = n.Transformer.Molecule.downloadMoleculeSource({
       sourceId: "url-molecule",
       name: "URL",
       description: "Download a molecule from the specified Url (if the host server supports cross domain requests).",
       defaultId: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/coordinates/1tqn/cartoon",
       urlTemplate: function(e) {
        return e
       },
       isFullUrl: !0
      })
     }(t = e.DataSources || (e.DataSources = {}))
    }(a = LiteMol.Viewer || (LiteMol.Viewer = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t;
      ! function(e) {
       {
        var t = LiteMol.Bootstrap,
         n = t.Entity,
         r = t.Entity.Transformer;
        t.Visualization
       }
       e.DownloadMolecule = r.Molecule.downloadMoleculeSource({
        sourceId: "pdbe-molecule",
        name: "PDBe",
        description: "Download a molecule from PDBe.",
        defaultId: "1cbs",
        specificFormat: LiteMol.Core.Formats.Molecule.SupportedFormats.mmCIF,
        urlTemplate: function(e) {
         return "https://www.ebi.ac.uk/pdbe/static/entry/" + e.toLowerCase() + "_updated.cif"
        }
       }), e.DownloadBinaryCIFFromCoordinateServer = t.Tree.Transformer.action({
        id: "molecule-download-bcif-from-coordinate-server",
        name: "Molecule (BinaryCIF)",
        description: "Download full or cartoon representation of a PDB entry from the CoordinateServer.",
        from: [n.Root],
        to: [n.Action],
        defaultParams: function(e) {
         return {
          id: "5iv5",
          type: "Cartoon",
          lowPrecisionCoords: !0,
          serverUrl: e.settings.get("molecule.downloadBinaryCIFFromCoordinateServer.server") ? e.settings.get("molecule.downloadBinaryCIFFromCoordinateServer.server") : "https://www.ebi.ac.uk/pdbe/coordinates/"
         }
        },
        validateParams: function(e) {
         return e.id && e.id.trim().length ? e.serverUrl && e.serverUrl.trim().length ? void 0 : ["Enter CoordinateServer base URL"] : ["Enter Id"]
        }
       }, function(e, r, i) {
        var o = "Cartoon" === i.params.type ? "cartoon" : "full",
         a = i.params.id.toLowerCase().trim(),
         s = "" + i.params.serverUrl + ("/" === i.params.serverUrl[i.params.serverUrl.length - 1] ? "" : "/") + a + "/" + o + "?encoding=bcif&lowPrecisionCoords=" + (i.params.lowPrecisionCoords ? "1" : "2");
        return t.Tree.Transform.build().add(r, n.Transformer.Data.Download, {
         url: s,
         type: "Binary",
         id: a
        }).then(n.Transformer.Molecule.CreateFromData, {
         format: LiteMol.Core.Formats.Molecule.SupportedFormats.mmBCIF
        }, {
         isBinding: !0
        }).then(n.Transformer.Molecule.CreateModel, {
         modelIndex: 0
        }, {
         isBinding: !1
        })
       })
      }(t = e.Data || (e.Data = {}))
     }(t = e.PDBe || (e.PDBe = {}))
    }(a = a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t;
      ! function(e) {
       function t(e, t, n) {
        var r = h.Tree.Transform.build();
        n = n.trim().toLowerCase();
        var o = t.props.ref ? t.props.ref : h.Utils.generateUUID(),
         a = r.add(e, d.Basic.CreateGroup, {
          label: n,
          description: "Density"
         }, {
          ref: o
         }),
         s = h.Utils.generateUUID(),
         u = h.Utils.generateUUID(),
         l = a.then(d.Data.Download, {
          url: "https://www.ebi.ac.uk/pdbe/coordinates/files/" + n + "_diff.ccp4",
          type: "Binary",
          id: n,
          description: "Fo-Fc",
          title: "Density"
         }).then(d.Density.ParseData, {
          format: LiteMol.Core.Formats.Density.SupportedFormats.CCP4,
          id: "Fo-Fc",
          normalize: !1
         }, {
          isBinding: !0,
          ref: s
         });
        l.then(d.Density.CreateVisualBehaviour, {
         id: "Fo-Fc(-ve)",
         isoSigmaMin: -5,
         isoSigmaMax: 0,
         minRadius: 0,
         maxRadius: 10,
         radius: 5,
         showFull: "undefined" != typeof i.displayFullMapOnload && "true" == i.displayFullMapOnload ? !0 : !1,
         style: m.Density.Style.create({
          isoValue: -3,
          isoValueType: h.Visualization.Density.IsoValueType.Sigma,
          color: LiteMol.Visualization.Color.fromHex(12268339),
          isWireframe: t.params.isWireframe,
          transparency: {
           alpha: .75
          }
         })
        }, {
         ref: "density-fofc_minus"
        }), l.then(d.Density.CreateVisualBehaviour, {
         id: "Fo-Fc(+ve)",
         isoSigmaMin: 0,
         isoSigmaMax: 5,
         minRadius: 0,
         maxRadius: 10,
         radius: 5,
         showFull: "undefined" != typeof i.displayFullMapOnload && "true" == i.displayFullMapOnload ? !0 : !1,
         style: m.Density.Style.create({
          isoValue: 3,
          isoValueType: h.Visualization.Density.IsoValueType.Sigma,
          color: LiteMol.Visualization.Color.fromHex(3390259),
          isWireframe: t.params.isWireframe,
          transparency: {
           alpha: .75
          }
         })
        }, {
         ref: "density-fofc_plus"
        });
        a.then(d.Data.Download, {
         url: "https://www.ebi.ac.uk/pdbe/coordinates/files/" + n + ".ccp4",
         type: "Binary",
         id: n,
         description: "2Fo-Fc",
         title: "Density"
        }).then(d.Density.ParseData, {
         format: LiteMol.Core.Formats.Density.SupportedFormats.CCP4,
         id: "2Fo-Fc",
         normalize: !1
        }, {
         isBinding: !0,
         ref: u
        }).then(d.Density.CreateVisualBehaviour, {
         id: "2Fo-Fc",
         isoSigmaMin: 0,
         isoSigmaMax: 2,
         minRadius: 0,
         maxRadius: 10,
         radius: 5,
         showFull: "undefined" != typeof i.displayFullMapOnload && "true" == i.displayFullMapOnload ? !0 : !1,
         style: m.Density.Style.create({
          isoValue: 1.5,
          isoValueType: h.Visualization.Density.IsoValueType.Sigma,
          color: LiteMol.Visualization.Color.fromHex(3367602),
          isWireframe: t.params.isWireframe,
          transparency: {
           alpha: .4
          }
         })
        }, {
         ref: "density-2fofc"
        });
        return {
         action: r,
         context: {
          id: n,
          refs: [u, s],
          groupRef: o
         }
        }
       }

       function r(e, t, n, r, i) {
        var o = h.Tree.Transform.build(),
         a = h.Utils.generateUUID(),
         s = "EMD-" + n;
        return o.add(e, d.Data.Download, {
         url: "https://www.ebi.ac.uk/pdbe/static/files/em/maps/emd_" + n + ".map.gz",
         type: "Binary",
         id: s,
         description: "EMDB Density",
         responseCompression: h.Utils.DataCompressionMethod.Gzip,
         title: "Density"
        }).then(d.Density.ParseData, {
         format: LiteMol.Core.Formats.Density.SupportedFormats.CCP4,
         id: s,
         normalize: !1
        }, {
         isBinding: !0,
         ref: a
        }).then(d.Density.CreateVisualBehaviour, {
         id: "Density",
         isoSigmaMin: void 0 !== i.minVal ? i.minVal : 1.5,
         isoSigmaMax: void 0 !== i.maxVal ? i.maxVal : 5,
         minRadius: 0,
         maxRadius: 50,
         radius: 5,
         showFull: !0,
         style: m.Density.Style.create({
          isoValue: void 0 !== r ? r : 1.5,
          isoValueType: void 0 !== r ? h.Visualization.Density.IsoValueType.Absolute : h.Visualization.Density.IsoValueType.Sigma,
          color: LiteMol.Visualization.Color.fromHex(6524815),
          isWireframe: t.params.isWireframe,
          transparency: {
           alpha: .3
          }
         })
        }, {
         ref: "em-density-map"
        }), {
         action: o,
         context: {
          id: n,
          refs: [a]
         }
        }
       }

       function o(e, t) {
        return {
         action: h.Tree.Transform.build().add(e, d.Basic.Fail, {
          title: "Density",
          message: t
         }),
         context: void 0
        }
       }

       function a(e, t) {
        return 1 == i.treeMenu || "true" == i.treeMenu ? {
         action: void 0,
         context: {
          id: "abortMaps",
          refs: ["abortMapDownload"],
          mapSize: t
         }
        } : {
         action: h.Tree.Transform.build().add(e, d.Basic.CreateGroup, {
          id: "abortMapsgroup",
          label: "Density Dummy Group",
          description: "Density Dummy Group"
         }, {
          ref: "abortMapDownload"
         }),
         context: {
          id: "abortMaps",
          refs: ["abortMapDownload"],
          mapSize: t
         }
        }
       }

       function s(e, t, n, r) {
        return new LiteMol.Core.Promise(function(i) {
         r = r.trim().toLowerCase(), h.Utils.ajaxGetString("https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/summary/" + r, "PDB API").run(e).then(function(a) {
          try {
           var s = JSON.parse(a),
            l = void 0,
            h = s[r];
           if (!(h && h[0] && h[0].related_structures)) return i(o(t, "No related EMDB entry found for '" + r + "'.")), void 0;
           var p = h[0].related_structures.filter(function(e) {
            return "EMDB" === e.resource
           });
           if (!p.length) return i(o(t, "No related EMDB entry found for '" + r + "'.")), void 0;
           l = p[0].accession.split("-")[1], "undefined" != typeof n.params.checkMapFileSize && 1 == n.params.checkMapFileSize ? i(c(e, t, n, l, 25)) : i(u(e, t, n, l))
          } catch (h) {
           i(o(t, "PDB API call failed."))
          }
         }).catch(function() {
          return i(o(t, "PDB API call failed."))
         })
        })
       }

       function u(e, t, n, i) {
        return new LiteMol.Core.Promise(function(a) {
         i = i.trim(), h.Utils.ajaxGetString("https://" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/emdb/entry/map/EMD-" + i, "EMDB API").run(e).then(function(e) {
          try {
           var s = JSON.parse(e),
            u = void 0,
            l = {
             minVal: void 0,
             maxVal: void 0
            },
            c = s["EMD-" + i];
           c && c[0] && c[0].map && c[0].map.contour_level && void 0 !== c[0].map.contour_level.value && (u = +c[0].map.contour_level.value), c && c[0] && c[0].map && c[0].map.statistics && void 0 !== c[0].map.statistics.minimum && (l.minVal = +c[0].map.statistics.minimum), c && c[0] && c[0].map && c[0].map.statistics && void 0 !== c[0].map.statistics.maximum && (l.maxVal = +c[0].map.statistics.maximum), a(r(t, n, i, u, l))
          } catch (c) {
           a(o(t, "EMDB API call failed."))
          }
         }).catch(function() {
          return a(o(t, "EMDB API call failed."))
         })
        })
       }

       function l(e) {
        var t;
        try {
         var n = e.plugin.context.select("molecule")[0];
         if ("undefined" != typeof n) {
          var r = n.props.molecule.properties.experimentMethod;
          if ("undefined" != typeof r) var i = r
         }
        } catch (o) {}
        return t = "undefined" != typeof i && "Electron Microscopy" == i ? "emdb-pdbid" : "undefined" != typeof i && "X-ray diffraction" == i ? "electron-density" : i
       }

       function c(e, t, r, i, s) {
        return new LiteMol.Core.Promise(function(l) {
         n.head("http://ftp.ebi.ac.uk/pub/databases/emdb/structures/EMD-" + i + "/map/emd_" + i + ".map.gz").then(function(n) {
          var o = n.headers("Content-Length"),
           c = "undefined" != typeof o ? o / 1024 / 1024 : void 0;
          "undefined" != typeof c && s >= c ? l(u(e, t, r, i)) : l(a(t, c))
         }, function() {
          l(o(t, "File size issue."))
         })
        })
       }
       var h = LiteMol.Bootstrap,
        p = h.Entity,
        d = h.Entity.Transformer,
        f = h.Tree,
        m = h.Visualization;
       e.DensityDownloader = p.create({
        name: "PDBe Density Downloader",
        typeClass: "Behaviour",
        shortName: "DD",
        description: "Represents PDBe Density Downloader."
       });
       var g = LiteMol.Bootstrap.Tree.Transformer.create({
        id: "pdbe-density-download-create",
        name: "PDBe Density Downloader",
        description: "Create the PDBe Density Downloader.",
        from: [p.Root],
        to: [e.DensityDownloader],
        defaultParams: function() {
         return {}
        }
       }, function(t, n, r) {
        return LiteMol.Bootstrap.Task.create("Density Downloader", "Background", function(t) {
         t.resolve(e.DensityDownloader.create(r, {
          ref: "densityDownloader-transformer"
         }))
        }).setReportTime(!0)
       });
       e.DensityDownloaderAction = LiteMol.Bootstrap.Tree.Transformer.action({
        id: "pdbe-density-download-create-action",
        name: "PDBe Density Downloader Action",
        description: "PDBe Density Downloader Action",
        from: [e.DensityDownloader],
        to: [p.Action],
        defaultParams: function() {
         return {}
        }
       }, function(e, t) {
        var n = LiteMol.Bootstrap.Tree.Transform.build().add(t, g, {
         id: "densityDwnldrAction"
        }, {
         isBinding: !0,
         ref: "densityDownloader-model"
        });
        return n
       }, "Density Loader Loaded"), e.DensitySources = ["electron-density", "emdb-pdbid", "emdb-id"], e.DensitySourceLabels = {
        "electron-density": "Electron Density",
        "emdb-pdbid": "EMDB (from PDB ID)",
        "emdb-id": "EMDB"
       }, e.DownloadDensity = h.Tree.Transformer.actionWithContext({
        id: "pdbe-density-download-data",
        name: "Density Data from PDBe",
        description: "Download density data from PDBe.",
        from: [p.Root],
        to: [p.Action],
        defaultParams: function(e) {
         var t = l(e);
         return {
          sourceId: "undefined" != typeof t ? t : "electron-density",
          id: {
           "electron-density": i.pdbId,
           "emdb-id": "8003",
           "emdb-pdbid": i.pdbId
          }
         }
        },
        validateParams: function(e) {
         var t = e.sourceId ? e.sourceId : "electron-density";
         if (!e.id) return ["Enter Id"];
         var n = "string" == typeof e.id ? e.id : e.id[t];
         return n.trim().length ? void 0 : ["Enter Id"]
        }
       }, function(e, n, r) {
        var i, o = "undefined" != typeof r.params.sourceId ? r.params.sourceId : l(e);
        switch (i = "string" == typeof r.params.id ? r.params.id : r.params.id[r.params.sourceId], o) {
         case "electron-density":
          return t(n, r, i);
         case "emdb-id":
          return u(e, n, r, i);
         case "emdb-pdbid":
          return s(e, n, r, i);
         default:
          return t(n, r, i)
        }
       }, function(e, t) {
        if (t) {
         var n = t,
          r = n.id,
          o = n.refs,
          a = n.groupRef;
         if ("abortMaps" == r) {
          var s = "You can download the Density using Download option in Controls";
          "undefined" != typeof n.mapSize && (s = "Density file size is " + parseInt(n.mapSize) + " MB. You can download it using the <strong>'Download Density'</strong> option in Controls."), h.Command.Toast.Show.dispatch(e, {
           key: "density-abort-toast",
           title: "Density",
           message: s
          }), h.Event.Visual.VisualSelectElement.getStream(e).subscribe(function() {
           h.Command.Toast.Hide.dispatch(e, {
            key: "density-abort-toast"
           })
          })
         } else {
          var u = e.select((l = f.Selection).byRef.apply(l, o));
          u.length === o.length ? e.logger.message("Density loaded, click on a residue or an atom to view the data.") : u.length > 0 ? e.logger.message("Density partially loaded, click on a residue or an atom to view the data.") : (e.logger.error("Density for ID '" + r + "' failed to load."), a && h.Command.Tree.RemoveNode.dispatch(e, a));
          var l;
          if (h.Command.Toast.Hide.dispatch(e, {
            key: "density-abort-toast"
           }), 0 == i.treeMenu || "false" == i.treeMenu) {
           var c = e.select("abortMapDownload")[0];
           "undefined" != typeof c && h.Command.Tree.RemoveNode.dispatch(e, "abortMapDownload")
          }
         }
        }
       })
      }(t = e.Data || (e.Data = {}))
     }(t = e.PDBe || (e.PDBe = {}))
    }(a = a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t;
      ! function(e) {
       var t = LiteMol.Bootstrap.Entity,
        n = LiteMol.Bootstrap.Entity.Transformer;
       e.Report = t.create({
        name: "PDBe Molecule Validation Report",
        typeClass: "Behaviour",
        shortName: "VR",
        description: "Represents PDBe validation report."
       });
       var r;
       ! function(e) {
        function t(e, t) {
         var n = e.toString();
         return 0 !== (t || "").length && " " !== t && (n += " " + t), n
        }

        function n(e, t, n, r, i) {
         var o = e[n];
         return o ? (o = o[r]) ? (o = o[t], o ? o[i] : void 0) : void 0 : void 0
        }

        function r(e) {
         var n = {};
         if (!e.molecules) return n;
         for (var r = 0, i = e.molecules; r < i.length; r++) {
          for (var o = i[r], a = n[o.entity_id.toString()] || {}, s = 0, u = o.chains; s < u.length; s++) {
           for (var l = u[s], c = a[l.struct_asym_id] || {}, h = 0, p = l.models; h < p.length; h++) {
            for (var d = p[h], f = c[d.model_id.toString()] || {}, m = 0, g = d.residues; m < g.length; m++) {
             var v = g[m],
              y = t(v.residue_number, v.author_insertion_code, v.alt_code),
              b = f[y];
             b ? (b.residues.push(v), b.numIssues = Math.max(b.numIssues, v.outlier_types.length)) : f[y] = {
              residues: [v],
              numIssues: v.outlier_types.length
             }
            }
            c[d.model_id.toString()] = f
           }
           a[l.struct_asym_id] = c
          }
          n[o.entity_id.toString()] = a
         }
         return n
        }
        e.getResidueId = t, e.getEntry = n, e.createReport = r
       }(r || (r = {}));
       var i;
       ! function(e) {
        var t = function() {
         function e(e, t) {
          var n = this;
          this.context = e, this.report = t, this.provider = function(e) {
           try {
            return n.processInfo(e)
           } catch (t) {
            return console.error("Error showing validation label", t), void 0
           }
          }
         }
         return e.prototype.dispose = function() {
          this.context.highlight.removeProvider(this.provider)
         }, e.prototype.register = function() {
          this.context.highlight.addProvider(this.provider)
         }, e.prototype.processInfo = function(e) {
          var t = LiteMol.Bootstrap.Interactivity.Molecule.transformInteraction(e);
          if (!t || t.residues.length > 1) return void 0;
          var n = t.residues[0],
           i = r.getEntry(this.report, t.modelId, n.chain.entity.entityId, n.chain.asymId, r.getResidueId(n.seqNumber, n.insCode));
          if (!i) return void 0;
          var o;
          if (1 === i.residues.length) {
           var a = i.residues[0];
           return o = "Validation: ", o += a.outlier_types.length ? "<b>" + i.residues[0].outlier_types.join(", ") + "</b>" : "no issue"
          }
          o = "";
          for (var s = 0, u = 0, l = i.residues; u < l.length; u++) {
           var c = l[u];
           s > 0 && (o += ", "), o += "Validation (altLoc " + c.alt_code + "): <b>" + c.outlier_types.join(", ") + "</b>", s++
          }
          return o
         }, e
        }();
        e.Behaviour = t
       }(i || (i = {}));
       var o;
       ! function(e) {
        function t(e, t) {
         for (var n = new Uint8Array(e.residues.count), i = e.modelId, o = e.residues, a = o.asymId, s = o.entityId, u = o.seqNumber, l = o.insCode, c = o.isHet, h = 0, p = e.residues.count; p > h; h++) {
          var d = r.getEntry(t, i, s[h], a[h], r.getResidueId(u[h], l[h]));
          d ? n[h] = Math.min(d.numIssues, 3) : c[h] && (n[h] = 4)
         }
         return n
        }

        function n(e, t) {
         for (var n = new Uint8Array(e.residues.count), i = e.modelId, o = e.parent, a = e.residues, s = a.entityId, u = a.seqNumber, l = a.insCode, c = a.chainIndex, h = a.isHet, p = e.chains.sourceChainIndex, d = o.chains.asymId, f = 0, m = e.residues.count; m > f; f++) {
          var g = d[p[c[f]]],
           v = r.getEntry(t, i, s[f], g, r.getResidueId(u[f], l[f]));
          v ? n[f] = Math.min(v.numIssues, 3) : h[f] && (n[f] = 4)
         }
         return n
        }

        function i(e, r) {
         var i = e.props.model,
          l = i.source === LiteMol.Core.Structure.MoleculeModelSource.File ? t(i, r) : n(i, r),
          c = new Map;
         c.set("Uniform", a), c.set("Selection", s), c.set("Highlight", u);
         var h = i.atoms.residueIndex,
          p = LiteMol.Visualization.Theme.createColorMapMapping(function(e) {
           return l[h[e]]
          }, o, a);
         return LiteMol.Visualization.Theme.createMapping(p, {
          colors: c,
          interactive: !0,
          transparency: {
           alpha: 1
          }
         })
        }
        var o = function() {
          var e = new Map;
          return e.set(0, {
           r: 0,
           g: 1,
           b: 0
          }), e.set(1, {
           r: 1,
           g: 1,
           b: 0
          }), e.set(2, {
           r: 1,
           g: .5,
           b: 0
          }), e.set(3, {
           r: 1,
           g: 0,
           b: 0
          }), e.set(4, {
           r: .7,
           g: .7,
           b: .7
          }), e
         }(),
         a = {
          r: .6,
          g: .6,
          b: .6
         },
         s = {
          r: 0,
          g: 0,
          b: 1
         },
         u = {
          r: 1,
          g: 0,
          b: 1
         };
        e.create = i
       }(o || (o = {}));
       var a = LiteMol.Bootstrap.Tree.Transformer.create({
        id: "pdbe-validation-create",
        name: "PDBe Validation",
        description: "Create the validation report from a string.",
        from: [t.Data.String],
        to: [e.Report],
        defaultParams: function() {
         return {}
        }
       }, function(t, n, o) {
        return LiteMol.Bootstrap.Task.create("Validation Report (" + o.params.id + ")", "Normal", function(a) {
         a.update("Parsing..."), a.schedule(function() {
          var s = JSON.parse(n.props.data),
           u = s[o.params.id],
           l = r.createReport(u || {});
          a.resolve(e.Report.create(o, {
           label: "Validation Report",
           behaviour: new i.Behaviour(t, l),
           ref: "validation-visual"
          }))
         })
        }).setReportTime(!0)
       });
       e.CustomDownloadAndCreate = LiteMol.Bootstrap.Tree.Transformer.action({
        id: "pdbe-validation-download-and-create",
        name: "PDBe Validation Report",
        description: "Download Validation Report from PDBe",
        from: [t.Root],
        to: [t.Action],
        defaultParams: function() {
         return {}
        },
        customController: function(e, t, n) {
         return new LiteMol.Bootstrap.Components.Transform.Controller(e, t, n, !1)
        }
       }, function(e, t, r) {
        var i = r.params.id.trim().toLocaleLowerCase(),
         o = LiteMol.Bootstrap.Tree.Transform.build().add(t, n.Data.Download, {
          url: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/" + i,
          type: "String",
          id: i,
          description: "Validation Data"
         }).then(a, {
          id: i
         }, {
          isBinding: !0,
          ref: "validation-model"
         });
        return o
       }, "Validation report loaded. Hovering over residue will now contain validation info. To apply validation coloring, select the entity in the tree and apply it the right panel."), e.DownloadAndCreate = LiteMol.Bootstrap.Tree.Transformer.action({
        id: "pdbe-validation-download-and-create",
        name: "PDBe Validation Report",
        description: "Download Validation Report from PDBe",
        from: [t.Molecule.Molecule],
        to: [t.Action],
        defaultParams: function() {
         return {}
        },
        customController: function(e, t, n) {
         return new LiteMol.Bootstrap.Components.Transform.Controller(e, t, n, !1)
        }
       }, function(e, t) {
        var r = t.props.molecule.id.trim().toLocaleLowerCase(),
         i = LiteMol.Bootstrap.Tree.Transform.build().add(t, n.Data.Download, {
          url: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/" + r,
          type: "String",
          id: r,
          description: "Validation Data"
         }).then(a, {
          id: r
         }, {
          isBinding: !0
         });
        return i
       }, "Validation report loaded. Hovering over residue will now contain validation info. To apply validation coloring, select the entity in the tree and apply it the right panel."), e.ApplyTheme = LiteMol.Bootstrap.Tree.Transformer.create({
        id: "pdbe-validation-apply-theme",
        name: "Apply Coloring",
        description: "Colors all visuals using the validation report.",
        from: [e.Report],
        to: [t.Action],
        defaultParams: function() {
         return {}
        }
       }, function(e, t) {
        return LiteMol.Bootstrap.Task.create("Validation Coloring", "Background", function(n) {
         var r = LiteMol.Bootstrap.Tree.Node.findAncestor(e.select("polymer-visual")[0], LiteMol.Bootstrap.Entity.Molecule.Molecule);
         if (!r) return n.reject("No suitable parent found."), void 0;
         for (var i = new Map, a = e.select(LiteMol.Bootstrap.Tree.Selection.byValue(r).subtree().ofType(LiteMol.Bootstrap.Entity.Molecule.Visual)), s = 0, u = a; s < u.length; s++) {
          var l = u[s],
           c = LiteMol.Bootstrap.Utils.Molecule.findModel(l);
          if (c) {
           var h = i.get(c.id);
           h || (h = o.create(c, t.props.behaviour.report), i.set(c.id, h)), LiteMol.Bootstrap.Command.Visual.UpdateBasicTheme.dispatch(e, {
            visual: l,
            theme: h
           })
          }
         }
         e.logger.message("Validation coloring applied."), n.resolve(LiteMol.Bootstrap.Tree.Node.Null)
        })
       })
      }(t = e.Validation || (e.Validation = {}))
     }(t = e.PDBe || (e.PDBe = {}))
    }(a = a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t;
      ! function(e) {
       function t(t, n, r) {
        var o = LiteMol.Bootstrap.Tree.Transform.build();
        if (!r) return o;
        for (var a = LiteMol.Visualization.Color.fromHex(16410880), s = function(n) {
          var s = r[n];
          if (!s) return "continue";
          var u = Object.keys(s).filter(function(e) {
           return Object.prototype.hasOwnProperty.call(s, e)
          });
          if (!u.length) return "continue";
          for (var l = o.add(t, i.Basic.CreateGroup, {
            label: n,
            isCollapsed: !0
           }, {
            isBinding: !0,
            ref: n
           }), c = 0, h = u; c < h.length; c++) {
           var p = h[c];
           l.then(e.CreateSingle, {
            data: s[p],
            id: p,
            color: a
           })
          }
         }, u = 0, c = ["Pfam", "InterPro", "CATH", "CATH","SCOP", "UniProt", "RiboVision", "RiboVision1"]; u < c.length; u++) {
         var h = c[u];
         s(h)
        }
        return o.add(t, l, {}, {
         isHidden: !0,
         ref: "domain-annotation-model"
        }), o
       }

       function n(e) {
        return 0 === e.length ? null : e
       }
       var r = LiteMol.Bootstrap.Entity,
        i = LiteMol.Bootstrap.Entity.Transformer,
        o = LiteMol.Core.Structure.Query;
       e.Annotations = r.create({
        name: "PDBe Sequence Annotations",
        typeClass: "Data",
        shortName: "SA",
        description: "Represents PDBe sequence annotation data."
       }), e.Annotation = r.create({
        name: "PDBe Sequence Annotation",
        typeClass: "Object",
        shortName: "SA",
        description: "Represents PDBe sequence annotation."
       }, {
        isSilent: !0,
        isFocusable: !0
       }), e.Behaviour = r.create({
        name: "PDBe Sequence Annotation Behaviour",
        typeClass: "Behaviour",
        shortName: "SA",
        description: "Represents PDBe sequence annoation behaviour."
       });
       var a;
       ! function(t) {
        var n = function() {
         function t(e) {
          var t = this;
          this.context = e, this.node = void 0, this.current = void 0, this.subs = [], this.toHighlight = void 0, this.isHighlightOn = !1, this.__highlight = LiteMol.Core.Utils.debounce(function() {
           return t.highlight()
          }, 33)
         }
         return t.prototype.dispose = function() {
          this.resetTheme();
          for (var e = 0, t = this.subs; e < t.length; e++) {
           var n = t[e];
           n.dispose()
          }
          this.subs = [], this.node = void 0
         }, t.prototype.register = function(t) {
          var n = this;
          this.node = t, this.subs.push(this.context.behaviours.currentEntity.subscribe(function(e) {
           return n.update(e)
          })), this.subs.push(LiteMol.Bootstrap.Command.Entity.Highlight.getStream(this.context).subscribe(function(t) {
           if (1 === t.data.entities.length) {
            var r = t.data.entities[0];
            if (r.type !== e.Annotation) return;
            n.toHighlight = r, n.isHighlightOn = t.data.isOn, n.__highlight()
           }
          })), this.subs.push(LiteMol.Bootstrap.Command.Entity.Focus.getStream(this.context).subscribe(function(t) {
           if (1 === t.data.length) {
            var r = t.data[0];
            if (r.type !== e.Annotation) return;
            n.focus(r)
           }
          }))
         }, Object.defineProperty(t.prototype, "molecule", {
          get: function() {
           return LiteMol.Bootstrap.Utils.Molecule.findMolecule(this.node)
          },
          enumerable: !0,
          configurable: !0
         }), t.prototype.resetTheme = function() {
          var e = this.molecule;
          e && LiteMol.Bootstrap.Command.Visual.ResetTheme.dispatch(this.context, {
           selection: LiteMol.Bootstrap.Tree.Selection.byValue(e).subtree()
          })
         }, t.prototype.getCached = function(e, t) {
          return this.context.entityCache.get(e, "theme-" + t.id)
         }, t.prototype.setCached = function(e, t, n) {
          this.context.entityCache.set(e, "theme-" + t.id, n)
         }, t.prototype.highlight = function() {
          var t = this.toHighlight;
          if (this.toHighlight = void 0, t && t.type === e.Annotation) {
           var n = t;
           this.isHighlightOn ? this.apply(n) : this.current ? this.update(this.current) : this.resetTheme()
          }
         }, t.prototype.focus = function(e) {
          var t = this.molecule;
          if (t) {
           var n = this.context.select(LiteMol.Bootstrap.Tree.Selection.byValue(t).subtree().ofType(LiteMol.Bootstrap.Entity.Molecule.Model))[0];
           n && (LiteMol.Bootstrap.Command.Molecule.FocusQuery.dispatch(this.context, {
            model: n,
            query: e.props.query
           }), LiteMol.Bootstrap.Command.Entity.SetCurrent.dispatch(this.context, e))
          }
         }, t.prototype.apply = function(e) {
          var t = this.molecule;
          if (t)
           for (var n = this.context.select(LiteMol.Bootstrap.Tree.Selection.byValue(t).subtree().ofType(LiteMol.Bootstrap.Entity.Molecule.Visual)), r = 0, i = n; r < i.length; r++) {
            var o = i[r],
             a = LiteMol.Bootstrap.Utils.Molecule.findModel(o);
            if (a) {
             var u = this.getCached(e, a);
             u || (u = s.create(a, e.props.query, e.props.color), this.setCached(e, a, u)), LiteMol.Bootstrap.Command.Visual.UpdateBasicTheme.dispatch(this.context, {
              visual: o,
              theme: u
             })
            }
           }
         }, t.prototype.update = function(t) {
          return t && t.type === e.Annotation ? (this.current = t, this.apply(this.current), void 0) : (this.current && this.resetTheme(), this.current = void 0, void 0)
         }, t
        }();
        t.Behaviour = n
       }(a || (a = {}));
       var s;
       ! function(e) {
        function t(e, t) {
         for (var n = new Uint8Array(e.residues.count), r = (e.modelId, e.atoms.residueIndex), i = e.residues, o = (i.asymId, i.entityId, i.seqNumber, i.insCode, 0), a = t.fragments; o < a.length; o++)
          for (var s = a[o], u = 0, l = s.atomIndices; u < l.length; u++) {
           var c = l[u];
           n[r[c]] = 1
          }
         return n
        }

        function n(e, n, s) {
         var u = e.props.model,
          l = o.Builder.toQuery(n),
          c = l(u.queryContext),
          h = t(u, c),
          p = new Map;
         p.set("Uniform", r), p.set("Bond", r), p.set("Selection", i), p.set("Highlight", a);
         var d = new Map;
         d.set(1, s);
         var f = u.atoms.residueIndex,
          m = LiteMol.Visualization.Theme.createColorMapMapping(function(e) {
           return h[f[e]]
          }, d, r);
         return LiteMol.Visualization.Theme.createMapping(m, {
          colors: p,
          interactive: !0,
          transparency: {
           alpha: 1
          }
         })
        }
        var r = {
          r: 1,
          g: 1,
          b: 1
         },
         i = LiteMol.Visualization.Theme.Default.SelectionColor,
         a = LiteMol.Visualization.Theme.Default.HighlightColor;
        e.create = n
       }(s || (s = {})), e.Theme = s, e.CreateSingle = LiteMol.Bootstrap.Tree.Transformer.create({
        id: "pdbe-sequence-annotations-create-single",
        name: "PDBe Sequence Annotation",
        description: "Create a sequence annotation object.",
        from: [],
        to: [e.Annotation],
        defaultParams: function() {
         return {}
        },
        isUpdatable: !0
       }, function(t, r, i) {
        return LiteMol.Bootstrap.Task.create("Sequence Annotation", "Background", function(t) {
         var r = i.params.data,
          a = o.or.apply(null, r.mappings.map(function(e) {
           return o.sequence(e.entity_id.toString(), e.struct_asym_id, {
            seqNumber: e.start.residue_number,
            insCode: n(e.start.author_insertion_code)
           }, {
            seqNumber: e.end.residue_number,
            insCode: n(e.end.author_insertion_code)
           })
          })).union();
         t.resolve(e.Annotation.create(i, {
          label: r.identifier,
          description: i.params.id,
          query: a,
          color: i.params.color
         }, {
          ref: r.identifier
         }))
        })
       });
       var u = LiteMol.Bootstrap.Tree.Transformer.create({
         id: "pdbe-sequence-annotations-parse",
         name: "PDBe Sequence Annotations",
         description: "Parse sequence annotaions JSON.",
         from: [r.Data.String],
         to: [e.Annotations],
         defaultParams: function() {
          return {}
         }
        }, function(t, n, r) {
         return LiteMol.Bootstrap.Task.create("Sequence Annotations", "Normal", function(t) {
          t.update("Parsing..."), t.schedule(function() {
           var i = JSON.parse(n.props.data);
           t.resolve(e.Annotations.create(r, {
            label: "Sequence Annotations",
            data: i
           }))
          })
         }).setReportTime(!0)
        }),
        l = LiteMol.Bootstrap.Tree.Transformer.create({
         id: "pdbe-sequence-annotations-create-behaviour",
         name: "PDBe Sequence Annotation Behaviour",
         description: "Create sequence annotation behaviour.",
         from: [e.Annotations],
         to: [e.Behaviour],
         defaultParams: function() {
          return {}
         }
        }, function(t, n, r) {
         return LiteMol.Bootstrap.Task.resolve("Sequence Annotations", "Background", e.Behaviour.create(r, {
          label: "Sequence Annotations",
          behaviour: new a.Behaviour(t)
         }))
        }),
        c = LiteMol.Bootstrap.Tree.Transformer.action({
         id: "pdbe-sequence-annotations-build",
         name: "PDBe Sequence Annotations",
         description: "Build sequence validations behaviour.",
         from: [e.Annotations],
         to: [r.Action],
         defaultParams: function() {
          return {}
         }
        }, function(e, n) {
         var r = n.props.data,
          i = Object.keys(r);
         return t(n, i[0], r[i[0]])
        }, "Sequence annotations downloaded. Selecting or hovering an annotation in the tree will color the visuals.");
       e.DownloadAndCreate = LiteMol.Bootstrap.Tree.Transformer.action({
        id: "pdbe-sequence-annotations-download-and-create",
        name: "PDBe Sequence Annotations",
        description: "Download Sequence Annotations from PDBe",
        from: [r.Molecule.Molecule],
        to: [r.Action],
        defaultParams: function() {
         return {}
        },
        customController: function(e, t, n) {
         return new LiteMol.Bootstrap.Components.Transform.Controller(e, t, n, !1)
        }
       }, function(e, t) {
        var n = t.props.molecule.id.trim().toLocaleLowerCase();
        return LiteMol.Bootstrap.Tree.Transform.build().add(t, i.Data.Download, {
         url: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/" + n,
         type: "String",
         id: n,
         description: "Annotation Data"
        }).then(u, {}, {
         isBinding: !0
        }).then(c, {}, {
         isBinding: !0
        })
       }), e.CustomDownloadAndCreate = LiteMol.Bootstrap.Tree.Transformer.action({
        id: "pdbe-sequence-annotations-download-and-create",
        name: "PDBe Sequence Annotations",
        description: "Download Sequence Annotations from PDBe",
        from: [r.Root],
        to: [r.Action],
        defaultParams: function() {
         return {}
        },
        customController: function(e, t, n) {
         return new LiteMol.Bootstrap.Components.Transform.Controller(e, t, n, !1)
        }
       }, function(e, t, n) {
        var r = n.params.id.trim().toLocaleLowerCase();
        return LiteMol.Bootstrap.Tree.Transform.build().add(t, i.Data.Download, {
         url: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/mappings/" + r,
         type: "String",
         id: r,
         description: "Annotation Data"
        }).then(u, {}, {
         isBinding: !0
        }).then(c, {}, {
         isBinding: !0
        })
       })
      }(t = e.SequenceAnnotation || (e.SequenceAnnotation = {}))
     }(t = e.PDBe || (e.PDBe = {}))
    }(a = a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t;
      ! function(t) {
       var n = LiteMol.Plugin.React,
        r = LiteMol.Plugin.Controls,
        i = function(e) {
         function t() {
          e.apply(this, arguments)
         }
         return s(t, e), t.prototype.renderControls = function() {
          var e = this,
           t = this.params;
          return n.createElement("div", null, n.createElement(r.ToggleColorPicker, {
           label: "Color",
           color: t.color,
           onChange: function(t) {
            return e.controller.autoUpdateParams({
             color: t
            })
           },
           position: "below"
          }))
         }, t
        }(LiteMol.Plugin.Views.Transform.ControllerBase);
       t.CreateSequenceAnnotationView = i;
       var o = function(e) {
        function t() {
         e.apply(this, arguments)
        }
        return s(t, e), t.prototype.renderControls = function() {
         var e = this,
          t = this.params;
         return n.createElement("div", null, n.createElement(r.TextBoxGroup, {
          value: t.id,
          onChange: function(t) {
           return e.updateParams({
            id: t
           })
          },
          label: "Id",
          onEnter: function(t) {
           return e.applyEnter(t)
          },
          placeholder: "Enter pdb id..."
         }), n.createElement(r.OptionsGroup, {
          options: ["Cartoon", "Full"],
          caption: function(e) {
           return e
          },
          current: t.type,
          onChange: function(t) {
           return e.updateParams({
            type: t
           })
          },
          label: "Type",
          title: "Determines whether to send all atoms or just atoms that are needed for the Cartoon representation."
         }), n.createElement(r.Toggle, {
          onChange: function(t) {
           return e.updateParams({
            lowPrecisionCoords: t
           })
          },
          value: t.lowPrecisionCoords,
          label: "Low Precicion",
          title: "If on, sends coordinates with 1 digit precision instead of 3. This saves up to 50% of data that need to be sent."
         }), n.createElement(r.TextBoxGroup, {
          value: t.serverUrl,
          onChange: function(t) {
           return e.updateParams({
            serverUrl: t
           })
          },
          label: "Server",
          title: "The base URL of the CoordinateServer.",
          onEnter: function(t) {
           return e.applyEnter(t)
          },
          placeholder: "Enter server URL..."
         }))
        }, t
       }(LiteMol.Plugin.Views.Transform.ControllerBase);
       t.DownloadBinaryCIFFromCoordinateServerView = o;
       var a = function(t) {
        function i() {
         return t.apply(this, arguments) || this
        }
        return s(i, t), i.prototype.getId = function() {
         var e = this.params.id;
         return e ? "string" == typeof e ? e : e[this.params.sourceId] : ""
        }, i.prototype.updateId = function(e) {
         var t = this.params,
          n = t.id;
         n && "string" != typeof n ? n = LiteMol.Bootstrap.Utils.merge(n, (i = {}, i[t.sourceId] = e, i)) : (r = {}, r[t.sourceId] = e, n = r), this.updateParams({
          id: n
         });
         var r, i
        }, i.prototype.renderControls = function() {
         var t = this,
          i = this.params;
         return n.createElement("div", null, n.createElement(r.OptionsGroup, {
          options: e.Data.DensitySources,
          caption: function(t) {
           return e.Data.DensitySourceLabels[t]
          },
          current: i.sourceId,
          onChange: function(e) {
           return t.updateParams({
            sourceId: e
           })
          },
          label: "Source",
          title: "Determines where to obtain the data."
         }), n.createElement(r.TextBoxGroup, {
          value: this.getId(),
          onChange: function(e) {
           return t.updateId(e)
          },
          label: "Id",
          onEnter: function(e) {
           return t.applyEnter(e)
          },
          placeholder: "Enter id..."
         }))
        }, i
       }(LiteMol.Plugin.Views.Transform.ControllerBase);
       t.DownloadDensityView = a
      }(t = e.Views || (e.Views = {}))
     }(t = e.PDBe || (e.PDBe = {}))
    }(a = a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t = LiteMol.Plugin.React,
       n = LiteMol.Plugin.Controls,
       r = function(e) {
        function r() {
         e.apply(this, arguments)
        }
        return s(r, e), r.prototype.asm = function() {
         var e = this,
          r = this.params.params ? this.params.params.name : this.params.assemblyNames[0];
         return r || (r = this.params.assemblyNames[0]), [t.createElement(n.OptionsGroup, {
          options: this.params.assemblyNames,
          current: r,
          onChange: function(t) {
           return e.updateParams({
            params: {
             name: t
            }
           })
          },
          label: "Asm. Name"
         })]
        }, r.prototype.symm = function() {
         var e = this,
          r = ["Mates", "Interaction"],
          i = this.params.params;
         return [t.createElement(n.OptionsGroup, {
          options: r,
          current: i.type,
          onChange: function(t) {
           return e.updateParams({
            params: {
             type: t,
             radius: i.radius
            }
           })
          },
          label: "Type",
          title: "Mates: copies whole asymetric unit. Interaction: Includes only residues that are no more than `radius` from the asymetric unit."
         }), t.createElement(n.Slider, {
          label: "Radius",
          onChange: function(t) {
           return e.updateParams({
            params: {
             type: i.type,
             radius: t
            }
           })
          },
          min: 0,
          max: 25,
          step: .1,
          value: i.radius,
          title: "Interaction radius."
         })]
        }, r.prototype.updateSource = function(e) {
         switch (e) {
          case "Assembly":
           this.updateParams({
            source: e,
            params: {
             name: this.params.assemblyNames[0]
            }
           });
           break;
          case "Symmetry":
           this.updateParams({
            source: e,
            params: {
             type: "Mates",
             radius: 5
            }
           });
           break;
          default:
           this.updateParams({
            source: "Asymmetric Unit"
           })
         }
        }, r.prototype.renderControls = function() {
         var e = this,
          r = this.params,
          i = this.controller.entity.props.molecule,
          o = i.models[0],
          a = ["Asymmetric Unit"];
         r.assemblyNames && r.assemblyNames.length > 0 && a.push("Assembly"), o.symmetryInfo && a.push("Symmetry");
         var s = i.models.length > 1 ? t.createElement(n.Slider, {
          label: "Model",
          onChange: function(t) {
           return e.updateParams({
            modelIndex: t - 1
           })
          },
          min: 1,
          max: i.models.length,
          step: 1,
          value: r.modelIndex + 1,
          title: "Interaction radius."
         }) : void 0;
         return t.createElement("div", null, t.createElement(n.OptionsGroup, {
          options: a,
          caption: function(e) {
           return e
          },
          current: r.source,
          onChange: function(t) {
           return e.updateSource(t)
          },
          label: "Source"
         }), "Assembly" === r.source ? this.asm() : "Symmetry" === r.source ? this.symm() : void 0, s)
        }, r
       }(LiteMol.Plugin.Views.Transform.ControllerBase);
      e.RepresentationView = r
     }(t = e.Custom || (e.Custom = {}))
    }(a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t = LiteMol.Bootstrap.Entity,
       n = LiteMol.Bootstrap.Entity.Transformer;
      e.CreateRepresentation = LiteMol.Bootstrap.Tree.Transformer.action({
       id: "lm-custom-create-representation",
       name: "Representation",
       description: "Create visual representation from the selected source.",
       from: [t.Molecule.Molecule],
       to: [t.Action],
       defaultParams: function(e, t) {
        var n = LiteMol.Bootstrap.Utils.Molecule.findMolecule(t).props.molecule.models[0],
         r = n.assemblyInfo;
        return r && r.assemblies.length ? {
         source: "Asymmetric Unit",
         assemblyNames: r.assemblies.map(function(e) {
          return e.name
         }),
         modelIndex: 0
        } : {
         source: "Asymmetric Unit",
         assemblyNames: []
        }
       }
      }, function(e, t, r) {
       var i = LiteMol.Bootstrap.Tree.Selection.byRef("molecule").children();
       LiteMol.Bootstrap.Command.Tree.RemoveNode.dispatch(e, i);
       var o = LiteMol.Bootstrap.Tree.Transform.build().add(t, n.Molecule.CreateModel, {
         modelIndex: r.params.modelIndex || 0
        }, {
         ref: "model"
        }),
        a = {
         polymer: !0,
         polymerRef: "polymer-visual",
         het: !0,
         hetRef: "het-visual",
         water: !0,
         waterRef: "water-visual"
        };
       switch (r.params.source || "Asymmetric Unit") {
        case "Assembly":
         o.then(n.Molecule.CreateAssembly, r.params.params).then(n.Molecule.CreateMacromoleculeVisual, a);
         break;
        case "Symmetry":
         o.then(n.Molecule.CreateSymmetryMates, r.params.params).then(n.Molecule.CreateMacromoleculeVisual, a);
         break;
        default:
         o.then(n.Molecule.CreateMacromoleculeVisual, a)
       }
       return o
      })
     }(t = e.Custom || (e.Custom = {}))
    }(a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(e) {
      var t = LiteMol.Plugin.React,
       n = LiteMol.Plugin.Controls,
       r = function(e) {
        function r() {
         e.apply(this, arguments)
        }
        return s(r, e), r.prototype.domainList = function() {
         for (var e = this, r = this.params.subOptionsList[this.params.type], i = r.length, o = [], a = {}, s = 0; i > s; s++) o.push(r[s].name), a[r[s].name] = r[s].ref;
         var u = this.params.nodeName;
         return u || (u = o[0]), [t.createElement(n.OptionsGroup, {
          options: o,
          current: u,
          caption: function(e) {
           return e
          },
          onChange: function(t) {
           return e.updateParams({
            nodeName: t,
            nodeRef: a[t]
           })
          },
          label: "Name"
         })]
        }, r.prototype.updateType = function(e) {
         if ("Select" === e) this.updateParams({
          type: e,
          nodeName: void 0,
          nodeRef: void 0
         });
         else {
          var t = this.params.subOptionsList[e][0].name,
           n = this.params.subOptionsList[e][0].ref;
          this.updateParams({
           type: e,
           nodeName: t,
           nodeRef: n
          })
         }
        }, r.prototype.renderControls = function() {
         var e = this,
          r = this.params;
         return t.createElement("div", null, t.createElement(n.OptionsGroup, {
          options: r.options,
          caption: function(e) {
           return e
          },
          current: r.type,
          onChange: function(t) {
           return e.updateType(t)
          },
          label: "Type"
         }), "Select" === r.type ? void 0 : this.domainList())
        }, r
       }(LiteMol.Plugin.Views.Transform.ControllerBase);
      e.SeqAnnotationView = r
     }(t = e.Custom || (e.Custom = {}))
    }(a || (a = {}));
    var a;
    ! function(e) {
     var t;
     ! function(t) {
      {
       var n = LiteMol.Bootstrap.Entity;
       LiteMol.Bootstrap.Entity.Transformer
      }
      t.CreateSeqAnnotation = LiteMol.Bootstrap.Tree.Transformer.create({
       id: "lm-custom-create-SeqAnnotation",
       name: "SeqAnnotation",
       description: "Colours all visuals as per selected Domain Annotation.",
       from: [n.Root],
       to: [n.Action],
       defaultParams: function(e) {
        for (var t = ["Select"], n = ["Pfam", "InterPro", "CATH", "CATH", "SCOP", "UniProt", "RiboVision", "RiboVision1"], r = {
          Pfam: [],
          InterPro: [],
          CATH: [],
		  CATH: [], 
          SCOP: [],
          UniProt: [], 
		  RiboVision: [],
		  RiboVision1: []
         }, i = 0; 7 > i; i++) {
         var o = e.select(n[i])[0];
         if ("undefined" != typeof o && o.children.length > 0) {
          t.push(n[i]);
          for (var a = 0; a < o.children.length; a++) {
           var s = o.children[a].props.label;
           r[n[i]].push({
            name: s,
            ref: o.children[a].ref
           })
          }
         }
        }
        return {
         type: "Select",
         nodeRef: void 0,
         nodeName: void 0,
         options: t,
         subOptionsList: r
        }
       }
      }, function(t, n, r) {
       return LiteMol.Bootstrap.Task.create("Domain Annotation", "Background", function(i) {
        var o = n;
        if (!o) return i.reject("No suitable parent found."), void 0;
        if (!r.params.nodeRef) return i.reject("Select valid Domain."), void 0;
        for (var a = t.select(r.params.nodeRef)[0], s = t.select(LiteMol.Bootstrap.Tree.Selection.byValue(o).subtree().ofType(LiteMol.Bootstrap.Entity.Molecule.Visual)), u = 0, l = s; u < l.length; u++) {
         var c = l[u],
          h = LiteMol.Bootstrap.Utils.Molecule.findModel(c);
         if (h) {
          var p = t.entityCache.get(a, "theme-" + h.id);
          p || (p = e.PDBe.SequenceAnnotation.Theme.create(h, a.props.query, a.props.color), t.entityCache.set(a, "theme-" + h.id, p)), LiteMol.Bootstrap.Command.Visual.UpdateBasicTheme.dispatch(t, {
           visual: c,
           theme: p
          })
         }
        }
        t.logger.message("Domain annotation applied."), i.resolve(LiteMol.Bootstrap.Tree.Node.Null)
       })
      })
     }(t = e.Custom || (e.Custom = {}))
    }(a || (a = {}));
    var u = function() {
      function e() {
       this.Plugin = LiteMol.Plugin, this.Views = this.Plugin.Views, this.Bootstrap = LiteMol.Bootstrap, this.Entity = this.Bootstrap.Entity, this.Query = LiteMol.Core.Structure.Query, this.Transformer = this.Bootstrap.Entity.Transformer, this.Tree = this.Bootstrap.Tree, this.Transform = this.Tree.Transform, this.LayoutRegion = this.Bootstrap.Components.LayoutRegion, this.CoreVis = LiteMol.Visualization, this.Visualization = this.Bootstrap.Visualization, this.Command = this.Bootstrap.Command, this.Event = this.Bootstrap.Event, this.moleculeId = i.pdbId, this.currentHighLightedDetails, this.element = o[0], this.emMsgChanged = !1, this.spec = {
        settings: {
         "molecule.model.defaultQuery": "residues({ name: 'ALA' })",
         "molecule.model.defaultAssemblyName": "1",
         "molecule.coordinateStreaming.defaultId": "1jj2",
         "molecule.coordinateStreaming.defaultServer": "https://www.ebi.ac.uk/pdbe/coordinates",
         "molecule.coordinateStreaming.defaultRadius": 10,
         "density.defaultVisualBehaviourRadius": 5
        },
        transforms: [{
         transformer: a.PDBe.Data.DownloadMolecule,
         view: this.Views.Transform.Data.WithIdField
        }, {
         transformer: a.PDBe.Data.DownloadDensity,
         view: a.PDBe.Views.DownloadDensityView
        }, {
         transformer: a.PDBe.Data.DownloadBinaryCIFFromCoordinateServer,
         view: a.PDBe.Views.DownloadBinaryCIFFromCoordinateServerView,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.CoordinateStreaming.InitStreaming,
         view: this.Views.Transform.Molecule.InitCoordinateStreaming,
         initiallyCollapsed: !0
        }, {
         transformer: a.DataSources.DownloadMolecule,
         view: this.Views.Transform.Data.WithUrlIdField,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.OpenMoleculeFromFile,
         view: this.Views.Transform.Molecule.OpenFile,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Data.Download,
         view: this.Views.Transform.Data.Download,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Data.OpenFile,
         view: this.Views.Transform.Data.OpenFile,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.CreateFromData,
         view: this.Views.Transform.Molecule.CreateFromData
        }, {
         transformer: this.Transformer.Data.ParseCif,
         view: this.Views.Transform.Empty
        }, {
         transformer: this.Transformer.Data.ParseBinaryCif,
         view: this.Views.Transform.Empty
        }, {
         transformer: this.Transformer.Density.ParseData,
         view: this.Views.Transform.Density.ParseData
        }, {
         transformer: this.Transformer.Molecule.CreateFromMmCif,
         view: this.Views.Transform.Molecule.CreateFromMmCif
        }, {
         transformer: this.Transformer.Molecule.CreateModel,
         view: this.Views.Transform.Molecule.CreateModel
        }, {
         transformer: this.Transformer.Molecule.CreateSelection,
         view: this.Views.Transform.Molecule.CreateSelection,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.CreateAssembly,
         view: this.Views.Transform.Molecule.CreateAssembly,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.CreateSymmetryMates,
         view: this.Views.Transform.Molecule.CreateSymmetryMates,
         initiallyCollapsed: !0
        }, {
         transformer: this.Transformer.Molecule.CreateMacromoleculeVisual,
         view: this.Views.Transform.Empty
        }, {
         transformer: this.Transformer.Molecule.CreateVisual,
         view: this.Views.Transform.Molecule.CreateVisual
        }, {
         transformer: this.Transformer.Density.CreateVisual,
         view: this.Views.Transform.Density.CreateVisual
        }, {
         transformer: this.Transformer.Density.CreateVisualBehaviour,
         view: this.Views.Transform.Density.CreateVisualBehaviour
        }, {
         transformer: this.Transformer.Molecule.CoordinateStreaming.CreateBehaviour,
         view: this.Views.Transform.Empty,
         initiallyCollapsed: !0
        }, {
         transformer: a.PDBe.Validation.DownloadAndCreate,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.PDBe.Validation.ApplyTheme,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.PDBe.SequenceAnnotation.DownloadAndCreate,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.PDBe.SequenceAnnotation.CreateSingle,
         view: a.PDBe.Views.CreateSequenceAnnotationView
        }],
        behaviours: [this.Bootstrap.Behaviour.SetEntityToCurrentWhenAdded, this.Bootstrap.Behaviour.FocusCameraOnSelect, this.Bootstrap.Behaviour.UnselectElementOnRepeatedClick, this.Bootstrap.Behaviour.ApplySelectionToVisual, this.Bootstrap.Behaviour.CreateVisualWhenModelIsAdded, this.Bootstrap.Behaviour.Molecule.HighlightElementInfo, this.Bootstrap.Behaviour.Molecule.DistanceToLastClickedElement],
        components: [this.Plugin.Components.Visualization.HighlightInfo(this.LayoutRegion.Main, !0), this.Plugin.Components.Entity.Current("LiteMol", this.Plugin.VERSION.number)(this.LayoutRegion.Right, !0), this.Plugin.Components.Transform.View(this.LayoutRegion.Right), this.Plugin.Components.Context.Overlay(this.LayoutRegion.Root), this.Plugin.Components.Context.Toast(this.LayoutRegion.Main, !0), this.Plugin.Components.Context.BackgroundTasks(this.LayoutRegion.Main, !0)],
        viewport: {
         view: this.Views.Visualization.Viewport,
         controlsView: this.Views.Visualization.ViewportControls
        },
        layoutView: this.Views.Layout,
        tree: {
         region: this.LayoutRegion.Left,
         view: this.Views.Entity.Tree
        }
       }, _this = this, this.CustomMenuSpec = {
        settings: {
         "molecule.model.defaultQuery": "residues({ name: 'ALA' })",
         "molecule.model.defaultAssemblyName": "1",
         "molecule.coordinateStreaming.defaultId": "1jj2",
         "molecule.coordinateStreaming.defaultServer": "https://www.ebi.ac.uk/pdbe/coordinates",
         "molecule.coordinateStreaming.defaultRadius": 10,
         "density.defaultVisualBehaviourRadius": 5
        },
        transforms: [{
         transformer: this.Transformer.Molecule.CreateVisual,
         view: this.Views.Transform.Molecule.CreateVisual
        }, {
         transformer: a.Custom.CreateRepresentation,
         view: a.Custom.RepresentationView
        }, {
         transformer: this.Transformer.Density.CreateVisual,
         view: this.Views.Transform.Density.CreateVisual
        }, {
         transformer: this.Transformer.Density.CreateVisualBehaviour,
         view: this.Views.Transform.Density.CreateVisualBehaviour
        }, {
         transformer: a.PDBe.Validation.CustomDownloadAndCreate,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.PDBe.Validation.ApplyTheme,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.Custom.CreateSeqAnnotation,
         view: a.Custom.SeqAnnotationView
        }, {
         transformer: a.PDBe.Data.DownloadDensity,
         view: this.Views.Transform.Empty
        }, {
         transformer: a.PDBe.Data.DensityDownloaderAction,
         view: this.Views.Transform.Empty
        }],
        behaviours: [this.Bootstrap.Behaviour.SetEntityToCurrentWhenAdded, this.Bootstrap.Behaviour.FocusCameraOnSelect, this.Bootstrap.Behaviour.UnselectElementOnRepeatedClick, this.Bootstrap.Behaviour.ApplySelectionToVisual, this.Bootstrap.Behaviour.ApplyInteractivitySelection, this.Bootstrap.Behaviour.Molecule.HighlightElementInfo, this.Bootstrap.Behaviour.Molecule.DistanceToLastClickedElement, this.Bootstrap.Behaviour.Molecule.ShowInteractionOnSelect(5)],
        components: [this.Plugin.Components.Visualization.HighlightInfo(this.LayoutRegion.Main, !0), this.Plugin.Components.create("RepresentationControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Action(e, "molecule", a.Custom.CreateRepresentation, "Source")
        }, _this.Plugin.Views.Transform.Action)(this.LayoutRegion.Right), this.Plugin.Components.create("ValidationControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Action(e, "validation-model", a.PDBe.Validation.ApplyTheme, "Validation Report")
        }, _this.Plugin.Views.Transform.Action)(this.LayoutRegion.Right), this.Plugin.Components.create("AnnotationControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Action(e, "domain-annotation-model", a.Custom.CreateSeqAnnotation, "Domain Annotation")
        }, _this.Plugin.Views.Transform.Action)(this.LayoutRegion.Right), this.Plugin.Components.create("PolymerControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "polymer-visual", "Polymer Visual")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("HetControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "het-visual", "HET Groups Visual")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("WaterControls", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "water-visual", "Water Visual")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("DensityDownloadControl", function(e) {
         return new _this.Bootstrap.Components.Transform.Action(e, "abortMapDownload", a.PDBe.Data.DownloadDensity, "Download Density")
        }, _this.Plugin.Views.Transform.Action)(this.LayoutRegion.Right), this.Plugin.Components.create("DensityControls-2fofc", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "density-2fofc", "Density : 2Fo-Fc")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("DensityControls-fofc_plus", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "density-fofc_minus", "Density : Fo-Fc(-ve)")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("DensityControls-fofc_minus", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "density-fofc_plus", "Density : Fo-Fc(+ve)")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.create("DensityControls-em-density", function(e) {
         return new _this.Bootstrap.Components.Transform.Updater(e, "em-density-map", "Density")
        }, _this.Plugin.Views.Transform.Updater)(this.LayoutRegion.Right), this.Plugin.Components.Context.Overlay(this.LayoutRegion.Root), this.Plugin.Components.Context.Toast(this.LayoutRegion.Main, !0), this.Plugin.Components.Context.BackgroundTasks(this.LayoutRegion.Main, !0)],
        viewport: {
         view: this.Views.Visualization.Viewport,
         controlsView: this.Views.Visualization.ViewportControls
        },
        layoutView: this.Views.Layout,
        tree: void 0
       }
      }
      return e.prototype.applyTransforms = function(e) {
       return this.Tree.Transform.apply(this.plugin.context, e).run(this.plugin.context)
      }, e.prototype.selectNodes = function(e) {
       return this.plugin.context.select(e)
      }, e.prototype.cleanUp = function() {
       this.Command.Tree.RemoveNode.dispatch(this.plugin.context, "sequence-selection")
      }, e.prototype.createPlugin = function() {
       _this = this, this.plugin = this.create(o[0]), this.Command.Layout.SetState.dispatch(this.plugin.context, {
        hideControls: i.hideControls,
        isExpanded: i.isExpanded
       });
       this.Event.Molecule.ModelSelect.getStream(this.plugin.context).subscribe(function(e) {
        var t = _this.getDispatchEventData(e);
        _this.dispatchCustomEvent("PDB.litemol.click", t)
       }), this.Event.Molecule.ModelHighlight.getStream(this.plugin.context).subscribe(function(e) {
        var t = _this.getDispatchEventData(e);
        _this.dispatchCustomEvent("PDB.litemol.mouseover", t)
       });
       this.Command.Visual.ResetScene.getStream(this.plugin.context).subscribe(function() {
        return _this.cleanUp()
       }), this.Command.Visual.ResetTheme.getStream(this.plugin.context).subscribe(function() {
        return _this.cleanUp()
       })
      }, e.prototype.destroyPlugin = function() {
       this.plugin.destroy(), this.plugin = void 0
      }, e.prototype.showControls = function() {
       return this.Command.Layout.SetState.dispatch(this.plugin.context, {
        hideControls: !1
       })
      }, e.prototype.hideControls = function() {
       return this.Command.Layout.SetState.dispatch(this.plugin.context, {
        hideControls: !0
       })
      }, e.prototype.expand = function() {
       return this.Command.Layout.SetState.dispatch(this.plugin.context, {
        isExpanded: !0
       })
      }, e.prototype.setBackground = function() {
       return this.Command.Layout.SetViewportOptions.dispatch(this.plugin.context, {
        clearColor: this.CoreVis.Color.fromRgb(255, 255, 255)
       })
      }, e.prototype.getEMEntryData = function() {
       var e = this.moleculeId.toLowerCase(),
        t = "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe/api/pdb/entry/summary/" + e,
        i = r.defer();
       return n.get(t).then(function(e) {
        i.resolve(e.data)
       }, function() {
        i.reject("fail response")
       }), i.promise
      }, e.prototype.getEMDensityData = function(e) {
       var t = "https://www.ebi.ac.uk/pdbe/api/emdb/entry/map/" + e,
        i = r.defer();
       return n.get(t).then(function(e) {
        i.resolve(e.data)
       }, function() {
        i.reject("fail response")
       }), i.promise
      }, e.prototype.getMapSize = function(e, t) {
       var i = r.defer();
       return "em" == t ? n.head("http://ftp.ebi.ac.uk/pub/databases/emdb/structures/" + e.toUpperCase() + "/map/" + e.replace("-", "_").toLowerCase() + ".map.gz").then(function(e) {
        var t = !0,
         n = e.headers("Content-Length"),
         r = "undefined" != typeof n ? n / 1024 / 1024 : void 0;
        console.log(r + " MB"), "undefined" != typeof r && r > 100 && (t = !1), i.resolve(t)
       }, function() {
        i.resolve(!0)
       }) : i.resolve(!0), i.promise
      }, e.prototype.loadFromNonCif = function(e, t) {
       var n = this.moleculeId.toLowerCase(),
        r = this.Transform.build().add(this.plugin.context.tree.root, this.Transformer.Data.Download, {
         url: e,
         type: t.isBinary ? "Binary" : "String",
         id: n
        });
       return 1 == i.treeMenu || "true" == i.treeMenu ? r.then(this.Transformer.Molecule.CreateFromData, {
        format: t,
        customId: n
       }, {
        isBinding: !0
       }).then(this.Transformer.Molecule.CreateModel, {
        modelIndex: 0
       }, {
        isBinding: !1,
        ref: "model"
       }).then(this.Transformer.Molecule.CreateMacromoleculeVisual, {
        polymer: !0,
        polymerRef: "polymer-visual",
        het: !0,
        water: !0
       }) : r.then(this.Transformer.Molecule.CreateFromData, {
        format: t,
        customId: n
       }, {
        ref: "molecule"
       }).then(a.Custom.CreateRepresentation, {}), r
      }, e.prototype.loadFromCif = function(e, t) {
       var n = this.moleculeId.toLowerCase(),
        r = this.Transform.build().add(this.plugin.context.tree.root, this.Transformer.Data.Download, {
         url: e,
         type: t.isBinary ? "Binary" : "String",
         id: n
        }).then(t.isBinary ? this.Transformer.Data.ParseBinaryCif : this.Transformer.Data.ParseCif, {
         id: n
        }, {
         isBinding: !0,
         ref: "cifDict"
        });
       return 1 == i.treeMenu || "true" == i.treeMenu ? r.then(this.Transformer.Molecule.CreateFromMmCif, {
        blockIndex: 0
       }, {
        isBinding: !0
       }).then(this.Transformer.Molecule.CreateModel, {
        modelIndex: 0
       }, {
        isBinding: !1,
        ref: "model"
       }).then(this.Transformer.Molecule.CreateMacromoleculeVisual, {
        polymer: !0,
        polymerRef: "polymer-visual",
        het: !0,
        water: !0
       }) : r.then(this.Transformer.Molecule.CreateFromMmCif, {
        blockIndex: 0
       }, {
        ref: "molecule"
       }).then(a.Custom.CreateRepresentation, {}), r
      }, e.prototype.loadMolecule = function() {
       var e = this.moleculeId.toLowerCase(),
        t = "https://www.ebi.ac.uk/pdbe/static/entry/" + e + "_updated.cif";
       if ("undefined" != typeof i.customQuery && (t = "https://www.ebi.ac.uk/pdbe/coordinates/" + e + "/" + i.customQuery), "undefined" != typeof i.sourceUrl && "undefined" == typeof i.sourceFormat) return this.Bootstrap.Command.Toast.Show.dispatch(this.plugin.context, {
        key: "format-issue",
        title: "Source Format",
        message: "Please specify sourceFormat!"
       }), !1;
       "undefined" != typeof i.sourceUrl && (t = i.sourceUrl);
       var n = !1;
       "undefined" != typeof i.customQuery && new RegExp("encoding=bcif", "i").test(t) && (i.sourceFormat = "bcif", n = !0);
       var r = LiteMol.Core.Formats.Molecule.SupportedFormats.mmCIF;
       if ("undefined" != typeof i.sourceFormat) {
        if (LiteMol.Core.Formats.FormatInfo.is(i.sourceFormat)) r = i.sourceFormat;
        else {
         var o = LiteMol.Core.Formats.FormatInfo.fromShortcut(LiteMol.Core.Formats.Molecule.SupportedFormats.All, i.sourceFormat);
         if (!o) throw new Error("'" + i.sourceFormat + "' is not a supported format.");
         r = o
        }
        "undefined" != typeof i.customQuery && 0 == n && (t = new RegExp("\\?").test(t) ? t + "&encoding=" + i.sourceFormat : t + "?encoding=" + i.sourceFormat)
       }
       if ("undefined" == typeof i.sourceFormat || "sdf" != i.sourceFormat.toLowerCase() && "pdb" != i.sourceFormat.toLowerCase()) var a = this.loadFromCif(t, r);
       else var a = this.loadFromNonCif(t, r);
       this.applyTransforms(a).then(function() {
        "undefined" != typeof i.sourceFormat && "sdf" == i.sourceFormat.toLowerCase() || "undefined" != typeof i.loadEdMaps && "true" === i.loadEdMaps && i.LiteMolComponent.loadDensity(!1, !0)
       })
      }, e.prototype.loadDensity = function(e, t) {
       var n = this,
        r = this.moleculeId.toLowerCase();
       e = "undefined" != typeof e && 1 == e ? !0 : !1;
       var i = n.Transform.build().add(n.plugin.context.tree.root, a.PDBe.Data.DownloadDensity, {
        id: r,
        isWireframe: e,
        checkMapFileSize: t
       }, {
        ref: "density"
       });
       n.applyTransforms(i)
      }, e.prototype.toggleDensity = function() {
       var e = this.selectNodes("density")[0];
       e && this.Command.Entity.SetVisibility.dispatch(this.plugin.context, {
        entity: e,
        visible: 2 === e.state.visibility
       })
      }, e.prototype.loadValidationReport = function() {
       var e = this.moleculeId.toLowerCase(),
        t = this.Transform.build().add(this.plugin.context.tree.root, a.PDBe.Validation.CustomDownloadAndCreate, {
         id: e
        });
       this.applyTransforms(t)
      }, e.prototype.loadSequenceAnnotation = function() {
       var e = this.moleculeId.toLowerCase(),
        t = this.Transform.build().add(this.plugin.context.tree.root, a.PDBe.SequenceAnnotation.CustomDownloadAndCreate, {
         id: e
        });
       this.applyTransforms(t)
      }, e.prototype.createSelectionTheme = function(e) {
       var t = new Map;
       return t.set("Uniform", this.CoreVis.Color.fromRgb(207, 178, 178)), t.set("Selection", e), t.set("Highlight", this.CoreVis.Theme.Default.HighlightColor), this.Visualization.Molecule.uniformThemeProvider(void 0, {
        colors: t
       })
      }, e.prototype.SelectExtractFocus = function(e, t, n) {
       _this = this;
       var r = this.selectNodes("polymer-visual")[0];
       if (r) {
        this.resetThemeSelHighlight();
        var i = this.Query.sequence(e.entity_id.toString(), e.struct_asym_id.toString(), {
          seqNumber: e.start_residue_number
         }, {
          seqNumber: e.end_residue_number
         }),
         o = this.createSelectionTheme(this.CoreVis.Color.fromRgb(t.r, t.g, t.b)),
         a = this.Transform.build().add(r, this.Transformer.Molecule.CreateSelectionFromQuery, {
          query: i,
          name: "My name"
         }, {
          ref: "sequence-selection"
         });
        "undefined" != typeof n && 1 == n && a.then(this.Transformer.Molecule.CreateVisual, {
         style: this.Visualization.Molecule.Default.ForType.get("BallsAndSticks")
        }), this.applyTransforms(a).then(function() {
         _this.Command.Visual.UpdateBasicTheme.dispatch(_this.plugin.context, {
          visual: r,
          theme: o
         }), _this.Command.Entity.Focus.dispatch(_this.plugin.context, _this.selectNodes("sequence-selection"))
        })
       }
      }, e.prototype.highlightOn = function(e) {
       var t = this.selectNodes("model")[0];
       if (t) {
        "undefined" != typeof this.currentHighLightedDetails && this.Command.Molecule.Highlight.dispatch(this.plugin.context, this.currentHighLightedDetails.prevQuery);
        var n = this.Query.sequence(e.entity_id.toString(), e.struct_asym_id.toString(), {
         seqNumber: e.start_residue_number
        }, {
         seqNumber: e.end_residue_number
        });
        this.Command.Molecule.Highlight.dispatch(this.plugin.context, {
         model: t,
         query: n,
         isOn: !0
        }), this.currentHighLightedDetails = {
         prevQueryData: e,
         prevQuery: {
          model: t,
          query: n,
          isOn: !1
         }
        }
       }
      }, e.prototype.highlightOff = function() {
       "undefined" != typeof this.currentHighLightedDetails && this.Command.Molecule.Highlight.dispatch(this.plugin.context, this.currentHighLightedDetails.prevQuery)
      }, e.prototype.resetThemeSelHighlight = function() {
       this.Command.Visual.ResetTheme.dispatch(this.plugin.context, void 0), this.cleanUp()
      }, e.prototype.colorChains = function(e, t) {
       var n = this.selectNodes("polymer-visual")[0],
        r = this.selectNodes("model")[0];
       if (r && n) {
        var i = new Map;
        i.set(e, this.CoreVis.Color.fromRgb(t[0], t[1], t[2]));
        var o = this.Visualization.Molecule.createColorMapThemeProvider(function(e) {
         return {
          index: e.atoms.chainIndex,
          property: e.chains.asymId
         }
        }, i, this.CoreVis.Color.fromRgb(207, 178, 178))(r);
        this.Command.Visual.UpdateBasicTheme.dispatch(this.plugin.context, {
         visual: n,
         theme: o
        })
       }
      }, e.prototype.create = function(e) {
       var t = this.CustomMenuSpec;
       if (1 == i.treeMenu || "true" == i.treeMenu) var t = this.spec;
       if ("undefined" != typeof LiteMolSpecConfig) {
        LiteMolSpecConfig.behaviours.length > 0 && (t.behaviours = LiteMolSpecConfig.behaviours);
        var n = LiteMolSpecConfig.components.length;
        if (n > 0)
         for (var r = 0; n > r; r++) t.components.push(LiteMolSpecConfig.components[r])
       }
       "undefined" != typeof i.showLogs && "true" == i.showLogs && t.components.push(this.Plugin.Components.Context.Log(this.LayoutRegion.Bottom, !0));
       var o = new this.Plugin.Instance(t, e);
       return o.context.logger.message("LiteMol Viewer " + this.Plugin.VERSION.number), o
      }, e.prototype.getDispatchEventData = function(e) {
       var t = {},
        n = e.data;
       return n && n.residues && (t.residuesName = n.residues[0].authName, t.chainId = n.chains[0].authAsymId, t.residueNumber = n.residues[0].seqNumber, t.entityId = n.chains[0].entity.entityId, t.entryId = n.moleculeId), t
      }, e.prototype.dispatchCustomEvent = function(e, t, n) {
       var r = o[0];
       "undefined" != typeof n && (r = n), "undefined" != typeof t && (i.pdbevents[e].eventData = t), r.dispatchEvent(i.pdbevents[e])
      }, e
     }(),
     l = function() {
      i.LiteMolComponent.createPlugin(), i.LiteMolComponent.loadMolecule(), "undefined" == typeof i.validationAnnotation || "true" !== i.validationAnnotation || i.treeMenu || i.LiteMolComponent.loadValidationReport(), "undefined" == typeof i.domainAnnotation || "true" !== i.domainAnnotation || i.treeMenu || i.LiteMolComponent.loadSequenceAnnotation()
     };
    if (i.LiteMolComponent = new u, "undefined" != typeof i.customRender || "undefined" == typeof i.pdbId ? i.LiteMolComponent.createPlugin() : l(), i.$watch("pdbId", function(e, t) {
      "undefined" != typeof i.pdbId && e !== t && (i.LiteMolComponent.moleculeId = i.pdbId, i.LiteMolComponent.destroyPlugin(), l())
     }), "true" == i.subscribeEvents) {
     t.on("PDB.topologyViewer.click", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != i.pdbId) return;
       var t = {
        entity_id: e.eventData.entityId,
        struct_asym_id: e.eventData.structAsymId,
        start_residue_number: e.eventData.residueNumber,
        end_residue_number: e.eventData.residueNumber
       };
       i.LiteMolComponent.SelectExtractFocus(t, {
        r: 0,
        g: 81,
        b: 51
       }, !1)
      }
     });
     var c = ["uniprot", "pfam", "cath", "scop", "strand", "helice","ribovision"],
      h = ["chain", "quality", "quality_outlier", "binding site", "alternate conformer"];
     t.on("PDB.seqViewer.click", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != i.pdbId) return;
       if ("undefined" != typeof e.eventData.elementData && h.indexOf(e.eventData.elementData.elementType) > -1) {
        var t = {
         entity_id: e.eventData.entityId,
         struct_asym_id: e.eventData.elementData.pathData.struct_asym_id,
         start_residue_number: e.eventData.residueNumber,
         end_residue_number: e.eventData.residueNumber
        };
        i.LiteMolComponent.SelectExtractFocus(t, {
         r: 0,
         g: 81,
         b: 51
        }, !1)
       } else if ("undefined" != typeof e.eventData.elementData && c.indexOf(e.eventData.elementData.elementType) > -1) {
        var n = e.eventData.elementData.color,
         t = {
          entity_id: e.eventData.entityId,
          struct_asym_id: e.eventData.elementData.pathData.struct_asym_id,
          start_residue_number: e.eventData.elementData.pathData.start.residue_number,
          end_residue_number: e.eventData.elementData.pathData.end.residue_number
         };
        i.LiteMolComponent.SelectExtractFocus(t, {
         r: n[0],
         g: n[1],
         b: n[2]
        }, !1)
       }
      }
     }), t.on("PDB.seqViewer.mouseover", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != i.pdbId) return;
       if ("undefined" != typeof e.eventData.elementData && h.indexOf(e.eventData.elementData.elementType) > -1) {
        var t = {
         entity_id: e.eventData.entityId,
         struct_asym_id: e.eventData.elementData.pathData.struct_asym_id,
         start_residue_number: e.eventData.residueNumber,
         end_residue_number: e.eventData.residueNumber
        };
        i.LiteMolComponent.highlightOn(t)
       } else if ("undefined" != typeof e.eventData.elementData && c.indexOf(e.eventData.elementData.elementType) > -1) {
        var t = (e.eventData.elementData.pathData.start.residue_number, e.eventData.elementData.pathData.end.residue_number, {
         entity_id: e.eventData.entityId,
         struct_asym_id: e.eventData.elementData.pathData.struct_asym_id,
         start_residue_number: e.eventData.elementData.pathData.start.residue_number,
         end_residue_number: e.eventData.elementData.pathData.end.residue_number
        });
        i.LiteMolComponent.highlightOn(t)
       }
      }
     }), t.on("PDB.seqViewer.mouseout", function() {
      i.LiteMolComponent.highlightOff()
     }), t.on("PDB.topologyViewer.mouseover", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != i.pdbId) return;
       var t = {
        entity_id: e.eventData.entityId,
        struct_asym_id: e.eventData.structAsymId,
        start_residue_number: e.eventData.residueNumber,
        end_residue_number: e.eventData.residueNumber
       };
       i.LiteMolComponent.highlightOn(t)
      }
     }), t.on("PDB.topologyViewer.mouseout", function() {
      i.LiteMolComponent.highlightOff()
     })
    }
   }
  }
 }])
}(),
function() {
 "use strict";
 angular.module("pdb.3dComplex", ["pdb.3dComplex.services", "pdb.common.services"]).directive("pdb3dComplex", ["$sce", "pdb3dComplexService", "commonServices", function(e, t, n) {
  return {
   restrict: "EAC",
   scope: {
    pdbId: "@",
    assemblyId: "@"
   },
   templateUrl: "template/pdb3dComplex/pdb3dComplex.html",
   link: function(r, i) {
    if (r.showWrapper = !0, r.showLoader = !0, r.pdbevents = n.createNewEvent(["PDB.pdb3dComplex.loaded", "PDB.pdb3dComplex.failed"]), r.dispatchEvent = function(e, t, n) {
      var o = i[0];
      "undefined" != typeof n && (o = n), "undefined" != typeof t && (r.pdbevents[e].eventData = t), o.dispatchEvent(r.pdbevents[e])
     }, "undefined" == typeof r.pdbId || "" === r.pdbId || 4 !== r.pdbId.length) return r.errorMsg = "Invalid PDB ID!", r.showWrapper = !1, r.dispatchEvent("PDB.pdb3dComplex.failed", {
     pdbId: r.pdbId,
     error: r.errorMsg
    }), void 0;
    if ("undefined" == typeof r.assemblyId || "" === r.assemblyId) return r.errorMsg = "Invalid Assembly ID!", r.showWrapper = !1, r.dispatchEvent("PDB.pdb3dComplex.failed", {
     pdbId: r.pdbId,
     error: r.errorMsg
    }), void 0;
    r.addLinks = function(t) {
     var n = t.pred_note2,
      r = t.href_PISA,
      i = t.href_EPPIC;
     return n = n.replace(/PISA/g, ' <a href="' + r + '" target="_blank">PISA</a> '), n = n.replace(/EPPIC/g, ' <a href="' + i + '" target="_blank">EPPIC</a> '), e.trustAsHtml(n)
    }, r.showTooltip = function(e) {
     e.pageX, e.pageY;
     r.tooltipStyle = {
      display: "block",
      top: "95px",
      left: "8px",
      position: "absolute"
     }
    }, r.hideTooltip = function() {
     r.tooltipStyle = {
      display: "none"
     }
    }, r.parseFloat = function(e) {
     return parseFloat(e)
    }; {
     var o = function(e) {
      var t = r.pdbId + "_" + r.assemblyId;
      return "undefined" == typeof e[t] ? (r.errorMsg = "Record not found!", r.showWrapper = !1, r.dispatchEvent("PDB.pdb3dComplex.failed", {
       pdbId: r.pdbId,
       error: r.errorMsg
      }), void 0) : (r.dispatchEvent("PDB.pdb3dComplex.loaded", {
       pdbId: r.pdbId
      }), r.resultData = {}, r.resultData[t] = e[t], r.showLoader = !1, void 0)
     };
     t.getApiData(r.pdbId).then(function(e) {
      o(e[r.pdbId])
     }, function(e) {
      r.showWrapper = !1, r.errorMsg = "Error: API request failed!", r.showLoader = !1, r.showWrapper = !1, r.dispatchEvent("PDB.pdb3dComplex.failed", {
       pdbId: r.pdbId,
       error: r.errorMsg,
       errorDetails: e
      })
     })
    }
   }
  }
 }])
}(),
function() {
 "use strict";
 angular.module("pdb.3dComplex.services", []).service("pdb3dComplexService", ["$http", "$q", function(e, t) {
  this.getApiData = function(n) {
   var r = "//shmoo.weizmann.ac.il/elevy/3dcomplexV5/dataV5/json_v3/" + n + ".json",
    i = t.defer();
   return e.get(r).then(function(e) {
    i.resolve(e.data)
   }, function(e) {
    i.reject(e)
   }), i.promise
  }
 }])
}(), angular.module("template/pdb3dComplex/pdb3dComplex.html", []).run(["$templateCache", function(e) {
  e.put("template/pdb3dComplex/pdb3dComplex.html", '<div class="pcl-3dcomplex-wrapper" ng-show="showWrapper"><div class="pcl-3dcomplex-loader" ng-show="showLoader"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/loading.gif" border="0"></div><div class="pcl-3dcomplex-result" ng-repeat="(pdbId, pdbIdDetails) in resultData"><div class="pcl-3dcomplex-row" style="text-align:center;width:100%;"><span class="pcl-3dcomplex-subheading">&nbsp;&nbsp;&nbsp;&nbsp;Assembly {{pdbId.split("_")[1]}}</span><div class="pcl-3dcomplex-row pcl-3dcomplex-logo" ng-init="confInt = parseFloat(pdbIdDetails[\'pred_conf\'])"><div ng-if="confInt < 75"><span class="pcl-3dcomplex-circle pcl-3dcomplex-red">&nbsp;</span></div><div ng-if="confInt >= 75 && confInt < 90"><span class="pcl-3dcomplex-circle pcl-3dcomplex-yellow">&nbsp;</span></div><div ng-if="confInt >= 90"><span class="pcl-3dcomplex-circle pcl-3dcomplex-green">&nbsp;</span></div></div></div><div class="pcl-3dComplex-left-section" style="float:left;width:65%"><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">Confidence : </span> {{pdbIdDetails["pred_conf"]}}</div><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">No. subunits : </span> {{pdbIdDetails["pdb_nsub"]}}</div><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">Symmetry : </span> {{pdbIdDetails["pdb_sym"]}}</div></div><div class="pcl-3dComplex-right-section" style="width:35%;float:right;"><div class="pcl-3dcomplex-row" style="text-align:center;line-height:0px;"><img ng-src="{{pdbIdDetails[\'pdb_image\']}}" style="height: 45px;" /></div><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-link"><a href="javascript:void(0)" ng-click="showTooltip($event);">More details</a></span></div></div><!-- Tooltip Section Start Here --><div class="pcl-3dcomplex-tooltip"  ng-style="tooltipStyle"><div class="pcl-3dcomplex-row" style="text-align:center;"><span class="pcl-3dcomplex-subheading">3DComplex & QSbio prediction</span><a href="javascript:void(0)" ng-click="hideTooltip()" class="pcl-3dcomplex-close" title="Close Popup">x</a></div><div class="pcl-3dComplex-left-section" style="float:left;width:65%;margin-bottom:2px;"><!--<div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">Confidence : </span> {{pdbIdDetails["pred_conf"]}}</div>--><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">No. subunits : </span> {{pdbIdDetails["pred_nsub"]}}</div><div class="pcl-3dcomplex-row"><span class="pcl-3dcomplex-label">Symmetry : </span> {{pdbIdDetails["pred_sym"]}}</div></div><div class="pcl-3dComplex-right-section" style="width:35%;float:right;"><div class="pcl-3dcomplex-row" style="text-align:center;line-height:0px;"><img ng-src="{{pdbIdDetails[\'pred_image\']}}" style="height:45px;" /></div></div><div class="pcl-3dcomplex-row" style="clear:left;line-height:18px;margin-top:2px" ng-if="(pdbIdDetails[\'pred_note1\'] != \'\' && pdbIdDetails[\'pred_note1\'] != null)"><span class="pcl-3dcomplex-label">Evidence : </span> <a href="{{pdbIdDetails[\'href_QSbio\']}}" target="_blank">{{pdbIdDetails["pred_note1"]}}</a></div><div class="pcl-3dcomplex-row" style="clear:left;line-height:18px;" ng-if="((pdbIdDetails[\'pred_note1\'] == \'\' || pdbIdDetails[\'pred_note1\'] == null) && pdbIdDetails[\'pred_note2\'] != \'\' && pdbIdDetails[\'pred_note2\'] != null)"><span class="pcl-3dcomplex-label">Evidence : </span> <span ng-bind-html="addLinks(pdbIdDetails)"></span></div></div><!-- Tooltip Section End Here --></div></div><div ng-hide="showWrapper">{{errorMsg}}</div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.redo", ["pdb.redo.services", "pdb.common.services"]).directive("pdbRedo", ["pdbRedoService", "commonServices", "$location", function(e, t) {
   return {
    restrict: "EAC",
    scope: {
     pdbId: "@",
     headingText: "@",
     errorText: "@",
     subheadingText: "@"
    },
    templateUrl: "template/pdbRedo/pdbRedo.html",
    link: function(n, r) {
     if (n.showWrapper = !0, n.showGeometry = !0, n.showModelFit = !0, n.showLoader = !0, n.pdbevents = t.createNewEvent(["PDB.pdbRedo.api.loaded", "PDB.pdbRedo.loaded", "PDB.pdbRedo.failed"]), "undefined" == typeof n.pdbId || "" === n.pdbId || 4 !== n.pdbId.length) return n.errorMsg = "Invalid PDB ID!", n.dispatchEvent("PDB.pdbRedo.failed", {
      pdbId: n.pdbId,
      error: n.errorMsg
     }), void 0;
     ("undefined" == typeof n.headingText || "" === n.headingText) && (n.headingText = "PDB-REDO model quality changes"), "undefined" != typeof n.errorText && (n.errorMsg = n.errorText), n.styles = {
      geometryFrame: {},
      modelFitFrame: {}
     }, n.frameWidth = r[0].querySelector(".pcl-pdbRedo-position-frame").offsetWidth;
     var i = function(e) {
      var t = !1,
       i = !1;
      if (n.frameWidth = r[0].querySelector(".pcl-pdbRedo-position-frame").offsetWidth, "undefined" != typeof e && "undefined" != typeof e.geometry && null !== e.geometry)
       for (var o = e.geometry["range-upper"] - e.geometry["range-lower"], a = o / 5, s = 1, u = 0; 5 > u; u++) {
        if (e.geometry.dzscore > e.geometry["range-upper"] - a * s) {
         n.styles.geometryFrame = {
          right: n.frameWidth * u + "px"
         };
         break
        }
        s++
       } else t = !0;
      if ("undefined" != typeof e && "undefined" != typeof e.ddatafit && null !== e.ddatafit) {
       var l = e.ddatafit["range-upper"] - e.ddatafit["range-lower"],
        c = l / 5;
       s = 1;
       for (var u = 0; 5 > u; u++) {
        if (e.ddatafit.zdfree > e.ddatafit["range-upper"] - c * s) {
         n.styles.modelFitFrame = {
          right: n.frameWidth * u + "px"
         };
         break
        }
        s++
       }
      } else i = !0;
      t === !0 && i === !0 ? n.showWrapper = !1 : t === !0 ? (n.showWrapper = !0, n.showGeometry = !1) : i === !0 ? (n.showWrapper = !0, n.showModelFit = !1) : n.showWrapper = !0, n.showLoader = !1, n.$apply()
     };
     n.dispatchEvent = function(e, t, i) {
      var o = r[0];
      "undefined" != typeof i && (o = i), "undefined" != typeof t && (n.pdbevents[e].eventData = t), o.dispatchEvent(n.pdbevents[e])
     };
     e.getApiData(n.pdbId).then(function(e) {
      n.dispatchEvent("PDB.pdbRedo.api.loaded", {
       pdbId: n.pdbId
      }), setTimeout(function() {
       i(e), 1 == n.showWrapper ? n.dispatchEvent("PDB.pdbRedo.loaded", {
        pdbId: n.pdbId
       }) : (n.errorMsg = "undefined" != typeof n.errorText ? n.errorText : "Error: Data not Available!", n.dispatchEvent("PDB.pdbRedo.failed", {
        pdbId: n.pdbId,
        error: n.errorMsg
       }))
      }, 100)
     }, function(e) {
      n.showWrapper = !1, n.errorMsg = "undefined" != typeof n.errorText ? n.errorText : "Error: API request failed!", n.dispatchEvent("PDB.pdbRedo.failed", {
       pdbId: n.pdbId,
       error: n.errorMsg,
       errorDetails: e
      })
     })
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.redo.services", []).service("pdbRedoService", ["$http", "$q", function(e, t) {
   this.getApiData = function(n) {
    var r = "//pdb-redo.eu/db/" + n + "/pdbe.json",
     i = t.defer();
    return e.get(r).then(function(e) {
     i.resolve(e.data)
    }, function(e) {
     i.reject(e)
    }), i.promise
   }
  }])
 }(), angular.module("template/pdbRedo/pdbRedo.html", []).run(["$templateCache", function(e) {
  e.put("template/pdbRedo/pdbRedo.html", '<div class="pcl-pdbRedo-wrapper" ng-show="showWrapper"><div class="pcl-pdbRedo-loader" ng-show="showLoader"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/loading.gif" border="0"></div><div class="pcl-pdbRedo-heading">{{headingText}}</div><p>{{subheadingText}}</p><div class="pcl-pdbRedo-row"><div class="pcl-pdbRedo-label">Model Geometry</div><div class="pcl-pdbRedo-gradient" ng-show="showGeometry">&nbsp;</div><div class="pcl-pdbRedo-position-frame" ng-style="styles.geometryFrame" ng-show="showGeometry">&nbsp;</div><div class="pcl-pdbRedo-error" ng-hide="showGeometry">Data not available</div></div><div class="pcl-pdbRedo-row"><div class="pcl-pdbRedo-label">Fit model/data</div><div class="pcl-pdbRedo-gradient" ng-show="showModelFit">&nbsp;</div><div class="pcl-pdbRedo-position-frame" ng-style="styles.modelFitFrame" ng-show="showModelFit">&nbsp;</div><div class="pcl-pdbRedo-error" ng-hide="showModelFit">Data not available</div></div><div class="pcl-pdbRedo-link-row"><a target="_blank" href="https:///pdb-redo.eu/db/{{pdbId}}">PDB-REDO</a></div></div><div ng-hide="showWrapper">{{errorMsg}}</div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.residue.interactions", ["d3Core", "pdb.residue.interactions.services", "pdb.common.services"]).directive("pdbResidueInteractions", ["d3", "pdbResidueInteractionsService", "commonServices", "$location", function(e, t, n) {
   return {
    restrict: "EAC",
    scope: {
     pdbId: "@",
     chainId: "@"
    },
    templateUrl: "template/pdbResidueInteractions/pdbResidueInteractions.html",
    link: function(r, i) {
     if (r.pdbevents = n.createNewEvent(["PDB.pdbResidueInteractions.loaded", "PDB.pdbResidueInteractions.failed"]), r.dispatchEvent = function(e, t, n) {
       var o = i[0];
       "undefined" != typeof n && (o = n), "undefined" != typeof t && (r.pdbevents[e].eventData = t), o.dispatchEvent(r.pdbevents[e])
      }, r.showLoader = !0, r.showWrapper = !1, r.errorMsg = "", "undefined" == typeof r.pdbId || "" === r.pdbId || 4 !== r.pdbId.length) return r.errorMsg = "Invalid PDB ID!", r.dispatchEvent("PDB.pdbResidueInteractions.failed", {
      pdbId: r.pdbId,
      error: r.errorMsg
     }), void 0; {
      var o = function(e, t, n) {
        var r, i, o = new Array,
         a = new Object;
        a.links = new Array;
        for (var s, u, l, c, h, p, d = 0; d < e.links.length; d++)
         if (!n || e.links[d].present == n)
          if (1 == t) {
           r = -1, i = -1, s = e.nodes[e.links[d].target].residueNum, u = e.nodes[e.links[d].source].residueNum;
           for (var f = 0; f < e.groups.length; f++)
            if (s >= e.groups[f].start && s <= e.groups[f].end) {
             r = f;
             for (var m = 0; m < e.groups.length; m++) u >= e.groups[m].start && u <= e.groups[m].end && (i = m, o[r] || (o[r] = new Array), o[i] || (o[i] = new Array), o[r][i] || (o[r][i] = 0), o[i][r] || (o[i][r] = 0), o[r][i] += parseInt(e.links[d].value), o[i][r] += parseInt(e.links[d].value))
            }
          } else {
           r = -1, i = -1, s = e.nodes[e.links[d].target].residueNum, u = e.nodes[e.links[d].source].residueNum, l = e.nodes[e.links[d].target].chain, c = e.nodes[e.links[d].source].chain;
           for (var f = 0; f < e.groups.length; f++)
            if (h = e.groups[f].name[0], s >= e.groups[f].start && s <= e.groups[f].end && h == l) {
             r = f;
             for (var m = 0; m < e.groups.length; m++) p = e.groups[m].name[0], u >= e.groups[m].start && u <= e.groups[m].end && p == c && (i = m, o[r] || (o[r] = new Array), o[i] || (o[i] = new Array), o[r][i] || (o[r][i] = 0), o[i][r] || (o[i][r] = 0), o[r][i] += parseInt(e.links[d].value), o[i][r] += parseInt(e.links[d].value))
            }
          } for (var d = 0; d < o.length; d++)
         for (var f = 0; f < o.length; f++) o[d] || (o[d] = new Object), o[d][f] || (o[d][f] = 0);
        return o
       },
       a = function(t) {
        for (var n = e.scale.ordinal().domain(e.range(16)).range(["#3182bd", "#6baed6", "#9ecae1", "#c6dbef", "#e6550d", "#fd8d3c", "#fdae6b", "#e7ba52", "#31a354", "#74c476", "#a1d99b", "#756bb1", "#9467bd", "#9e9ac8", "#bcbddc", "#d62728", "#ff9896"]), r = t.groups[0].name[0], a = 450, s = a / 2, u = s - 120, l = e.layout.chord().padding(.04).sortSubgroups(e.descending).sortChords(e.descending), c = e.svg.arc().innerRadius(u).outerRadius(u + 20), h = e.select(i[0]).select("svg").attr("viewBox", "0 0 350 350").attr("preserveAspectRatio", "xMidYMid meet").append("g").attr("transform", "translate(175,175)"), p = o(t), d = 0; d < p.length; d++) - 1 == t.groupsloops[d].name.indexOf("NucleicAcid") && (p[d][d] = 0);
        l.matrix(p);
        var f = h.selectAll("g.group").data(l.groups).enter().append("g").attr("class", "group");
        f.append("svg:path").style("fill", function(e) {
         return n(e.index)
        }).style("stroke", function(e) {
         return n(e.index)
        }).style("cursor", "pointer").attr("d", c).attr("class", "arc").on("mouseover", function(e, t) {
         h.selectAll("path.chord").style("opacity", 1), h.selectAll("path.chord").filter(function(e) {
          return e.source.index != t && e.target.index != t
         }).transition().style("opacity", .1)
        }).on("mouseout", function() {
         h.selectAll("path.chord").transition().style("opacity", 1)
        }).on("click", function(e, t) {
         h.selectAll("path.chord").style("opacity", 1), h.selectAll("path.chord").filter(function(e) {
          return e.source.index != t && e.target.index != t
         }).transition().style("opacity", .1)
        }).append("title").text(function(e) {
         var n = t.groups[e.index].name;
         if (n.indexOf("HELIX") > -1) var i = n.replace("HELIX", "H");
         else if (n.indexOf("SHEET") > -1) var i = n.replace("SHEET", "S");
         else if (n.indexOf("LOOP") > -1) var i = n.replace("LOOP", "L");
         else if (n.indexOf("NucleicAcid") > -1) var i = n.replace("NucleicAcid", "NA");
         var o = r + ":";
         return i = i.replace(o, ""), i + "(" + t.groups[e.index].start + "-" + t.groups[e.index].end + ")"
        }), f.append("text").each(function(e) {
         e.angle = (e.startAngle + e.endAngle) / 2
        }).attr("dy", ".35em").attr("text-anchor", function(e) {
         return e.angle > Math.PI ? "end" : null
        }).attr("transform", function(e) {
         return "rotate(" + (180 * e.angle / Math.PI - 90) + ")translate(" + (u + 26) + ")" + (e.angle > Math.PI ? "rotate(180)" : "")
        }).text(function(e) {
         var n = t.groups[e.index].name;
         if (n.indexOf("HELIX") > -1) var i = n.replace("HELIX", "H");
         else if (n.indexOf("SHEET") > -1) var i = n.replace("SHEET", "S");
         else if (n.indexOf("LOOP") > -1) var i = n.replace("LOOP", "L");
         else if (n.indexOf("NucleicAcid") > -1) var i = n.replace("NucleicAcid", "NA");
         var o = r + ":";
         return i = i.replace(o, "")
        }), h.selectAll("path.chord").data(l.chords).enter().append("path").attr("class", "chord").style("stroke", function(t) {
         return e.rgb(n(t.source.index)).darker()
        }).style("fill", function(e) {
         return n(e.source.index)
        }).style("opacity", function() {
         return 1
        }).style("cursor", "pointer").attr("d", e.svg.chord().radius(u)).on("mouseover", function(e) {
         h.selectAll("path.chord").filter(function(t) {
          return t.source.index != e.source.index || t.target.index != e.target.index
         }).transition().style("opacity", .1), h.selectAll("path.chord").filter(function(t) {
          return t.source.index == e.source.index && t.target.index == e.target.index
         }).transition().style("opacity", 1)
        }).on("mouseout", function() {
         h.selectAll("path.chord").transition().style("opacity", 1)
        }).append("title").text(function(e) {
         var t = e.source.index,
          n = e.target.index;
         return p[t][n] + " atomic contacts."
        })
       };
      t.getApiData(r.pdbId, r.chainId).then(function(e) {
       a(e), r.showLoader = !1, r.showWrapper = !0, r.dispatchEvent("PDB.pdbResidueInteractions.loaded", {
        pdbId: r.pdbId,
        error: r.errorMsg
       })
      }, function(e) {
       r.showLoader = !1, r.showWrapper = !1, r.errorMsg = "Error: API request failed!", r.dispatchEvent("PDB.pdbResidueInteractions.failed", {
        pdbId: r.pdbId,
        error: r.errorMsg,
        errorDetails: e
       })
      })
     }
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.residue.interactions.services", []).service("pdbResidueInteractionsService", ["$http", "$q", function(e, t) {
   this.getApiData = function(n, r) {
    var i = "https://www.mrc-lmb.cam.ac.uk/rajini/api/" + n;
    "undefined" != typeof r && (i = i + "/" + r);
    var o = t.defer();
    return e.get(i).then(function(e) {
     o.resolve(e.data)
    }, function(e) {
     o.reject(e)
    }), o.promise
   }
  }])
 }(), angular.module("template/pdbResidueInteractions/pdbResidueInteractions.html", []).run(["$templateCache", function(e) {
  e.put("template/pdbResidueInteractions/pdbResidueInteractions.html", '<div style="text-align:center"><div class="pcl-demo-overlay" ng-show="showLoader">Loading</div><svg ng-show="showWrapper"></svg><a ng-show="showWrapper" href="http://www.mrc-lmb.cam.ac.uk/rajini/redirect/{{pdbId}}" target="_blank">View residue interactions <br> in Protein Contacts Atlas</a></div><div ng-show="errorMsg != \'\'">{{errorMsg}}</div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.prints", ["pdb.prints.filters", "pdb.prints.services"]).directive("pdbPrints", ["printsService", "$compile", "$filter", function(e, t, n) {
   return {
    restrict: "EAC",
    scope: {
     pdbIds: "=",
     settings: "@"
    },
    link: function(r, i) {
     r.config = {
      picstype: "jslogos",
      orientation: "horizontal",
      size: 36,
      color: "embl_green",
      targetWindow: "_self",
      domainUrl: "//" + pdbComponentLibrarConfig.env + ".ebi.ac.uk/pdbe",
      hideLogo: []
     }, "undefined" != typeof r.settings && r.settings && angular.extend(r.config, JSON.parse(r.settings));
     for (var o = [], a = 20, s = r.pdbIds.slice(); s.length > 0;) o.push(s.splice(0, a));
     angular.forEach(o, function(o) {
      var a = angular.element(document.getElementsByClassName("pdbprints_" + o[0]));
      a.length && a.html("PDBprints loading....");
      e.getPrintsData(o).then(function(e) {
       angular.isUndefined(e.responseHeader.error) ? !angular.isUndefined(e.grouped.pdb_id.groups) && e.grouped.pdb_id.groups && angular.forEach(e.grouped.pdb_id.groups, function(e) {
        var o = n("printsDataModelFilter")(e, r.config),
         a = "<pdb-logos logo-data='" + JSON.stringify(o) + '\' config-data="config" click-action="' + r.clickAction + '"></pdb-logos>',
         s = t(a)(r),
         u = angular.element(i[0].querySelector(".pdbprints_" + o.PDBeLogo[0]));
        u.length ? u.html("").append(s) : i.append(s)
       }) : window.console && console.log("Error data in API response. Error: " + e.responseHeader.error)
      }, function(e) {
       window.console && console.log("API request failed. Error: " + e)
      })
     })
    }
   }
  }]).directive("pdbLogos", ["printsService", "$filter", function() {
   return {
    restrict: "EA",
    scope: {
     logoData1: "@logoData",
     config: "=configData"
    },
    templateUrl: "template/prints/pdbLogos.html",
    link: function(e) {
     e.logoData = JSON.parse(e.logoData1), e.categories = ["PrimaryCitation", "Taxonomy", "Expressed", "Experimental", "Protein", "NucleicAcid", "Ligands"], e.categoryUrl = ["/citations", "/analysis", "/analysis", "/experiment", "/analysis", "/analysis", "/ligands"]
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.prints.filters", []).filter("printsDataModelFilter", function() {
   return function(e) {
    var t = "",
     n = {
      PDBeLogo: [],
      PrimaryCitation: [],
      Protein: [],
      Ligands: [],
      NucleicAcid: [],
      Expressed: [],
      Experimental: [],
      Taxonomy: []
     },
     r = !1,
     i = "",
     o = !1,
     a = "",
     s = !1;
    if (angular.forEach(e.doclist.docs, function(u) {
      if (t = u.pdb_id, n.PDBeLogo[0] = t, n.PrimaryCitation[0] = !angular.isUndefined(u.citation_year) && u.citation_year ? "published" : "unpublished", n.Protein[0] = !angular.isUndefined(u.number_of_protein_chains) && u.number_of_protein_chains ? "present" : "absent", n.Ligands[0] = !angular.isUndefined(u.number_of_bound_entities) && u.number_of_bound_entities ? "present" : "absent", n.NucleicAcid[0] = !angular.isUndefined(u.number_of_RNA_chains) && u.number_of_RNA_chains || !angular.isUndefined(u.number_of_DNA_chains) && u.number_of_DNA_chains ? "present" : "absent", !angular.isUndefined(u.sample_preparation_method) && u.sample_preparation_method)
       for (var l = u.sample_preparation_method.length, c = 0; l > c; c++) switch ("" === i && (i = u.sample_preparation_method[c]), u.sample_preparation_method[c] !== i && (r = !0), u.sample_preparation_method[c]) {
        case "Engineered":
         n.Expressed[0] = "expressed";
         break;
        case "Synthetic":
         n.Expressed[0] = "synthetic";
         break;
        case "Natural":
         n.Expressed[0] = "purified";
         break;
        default:
         n.Expressed[0] = "other"
       } else {
        var h = "",
         p = new RegExp("Synthetic construct", "i");
        n.Expressed[0] = !angular.isUndefined(u.entry_organism_scientific_name) && p.test(u.entry_organism_scientific_name) ? h = "synthetic" : "CGIlogoUnknown", n.Expressed[0] !== i && (r = !0, h = "other"), "" === i && (i = h), e.doclist.docs.length > 1 && n.Expressed[1] !== i && (r = !0)
       }
      if (!angular.isUndefined(u.experimental_method) && u.experimental_method) {
       var d = !0;
       "object" == typeof u.experiment_data_available && "y" == u.experiment_data_available[0] ? d = !1 : "string" == typeof u.experiment_data_available && "y" == typeof u.experiment_data_available && (d = !1), 1 === u.experimental_method.length ? "x-ray diffraction" === u.experimental_method[0].toLowerCase() ? (n.Experimental[0] = "xray", d && (n.Experimental[0] = "xrayNoData")) : "solution nmr" === u.experimental_method[0].toLowerCase() || "solid-state nmr" === u.experimental_method[0].toLowerCase() ? (n.Experimental[0] = "nmr", d && (n.Experimental[0] = "nmrNoData")) : "electron microscopy" === u.experimental_method[0].toLowerCase() ? (n.Experimental[0] = "em", d && !u.emdb_id && (n.Experimental[0] = "emNoData")) : n.Experimental[0] = "other" : (n.Experimental[0] = "hybrid", d && (n.Experimental[0] = "hybridNoData"))
      } else n.Experimental[0] = "CGIlogoUnknown";
      var f = {
        Dinophyceae: "algae",
        Embryophyta: "plant",
        Streptophyta: "plant",
        "Saccharomyces cerevisiae": "yeast",
        Saccharomyces: "yeast",
        Drosophila: "fly",
        "Gallus gallus": "chicken",
        "Homo sapiens": "human",
        "Sus scrofa": "pig",
        "Bos taurus": "cow",
        "Mus musculus": "mouse",
        Rattus: "rat",
        Rat: "rat",
        Mammalia: "mammal",
        Fungi: "fungi",
        Ascomycota: "fungi",
        Viruses: "virus",
        Bacteria: "bacteria",
        Archaea: "archaea",
        Eukaryota: "eukaryote"
       },
       m = function(e) {
        var t = [];
        return angular.forEach(e, function(e, n) {
         var r = e.toLowerCase().split("|")[0]; - 1 == t.indexOf(r) && t.push(n)
        }), t.length > 1 ? !1 : !0
       };
      if (!angular.isUndefined(u.entry_organism_scientific_name) && u.entry_organism_scientific_name) {
       if (a = u.entry_organism_scientific_name, u.entry_organism_scientific_name.length > 1) {
        var g = m(u.entry_organism_scientific_name);
        if (0 == g) o = !0;
        else {
         var v = u.entry_organism_scientific_name[0].split("|")[0];
         v in f && (n.Taxonomy[0] = f[v])
        }
       } else {
        var v = u.entry_organism_scientific_name[0].split("|")[0];
        v in f && (n.Taxonomy[0] = f[v])
       }
       var p = new RegExp("Synthetic construct", "i");
       p.test(u.entry_organism_scientific_name) && (n.Taxonomy[0] = "artificial")
      }
      if (!n.Taxonomy[0] && !angular.isUndefined(typeof u.organism_synonyms) && u.organism_synonyms) {
       s = !0;
       for (var y = u.organism_synonyms.length, b = 0; y > b; b++)
        if (u.organism_synonyms[b] in f) {
         n.Taxonomy[0] = f[u.organism_synonyms[b]];
         break
        } n.Taxonomy[0] || (n.Taxonomy[0] = "other")
      }
     }), r && (n.Expressed[0] = "multiple"), "synthetic" === n.Expressed[1]) {
     var u = new RegExp("Synthetic construct", "i");
     ("" === a || u.test(a)) && (n.Taxonomy[0] = "artificial", s && (n.Taxonomy[0] = "other"))
    }
    return o && (n.Taxonomy[0] = "multiple"), n
   }
  }).filter("tooltipFilter", function() {
   return function(e) {
    var t = "";
    switch (e[0]) {
     case "pdbeLogo":
      t = "For more information about key features of this entry, click on the individual icons.";
      break;
     case "PrimaryCitation":
      switch (e[1]) {
       case "published":
        t = "A paper describing this entry has been published.";
        break;
       case "unpublished":
        t = "The PDB does not have any information about a published paper describing this entry.";
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about whether or not a paper describing this entry has been published."
      }
      break;
     case "Taxonomy":
      switch (e[1]) {
       case "artificial":
        t = "The biomacromolecules in this entry were artificially designed.";
        break;
       case "other":
        t = "Information about the source organism of the biomacromolecules in this entry can be obtained by clicking on the icon.";
        break;
       case "multiple":
        t = "The biomacromolecules in this entry derive from multiple organisms.";
        break;
       case "fly":
        t = "The source organism of the biomacromolecules in this entry is fruit-fly.";
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about the source organism of the biomacromolecules in this entry.";
        break;
       default:
        t = "The source organism of the biomacromolecules in this entry is " + e[1] + "."
      }
      break;
     case "Expressed":
      switch (e[1]) {
       case "expressed":
        t = "The sample of the biomacromolecules in this entry was obtained by expression and purification.";
        break;
       case "synthetic":
        t = "The sample of the biomacromolecules in this entry was obtained by chemical synthesis.";
        break;
       case "purified":
        t = "The sample of the biomacromolecules in this entry was extracted and purified from a biological source.";
        break;
       case "multiple":
        t = "The sample of the biomacromolecules in this entry was obtained using multiple techniques.";
        break;
       case "other":
        t = "The sample of the biomacromolecules in this entry was obtained using techniques other than expression, chemical synthesis or extraction from a biological source.";
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about the production techniques used to obtain the biomacromolecular samples for this entry."
      }
      break;
     case "Experimental":
      switch (e[1]) {
       case "xray":
        t = "The structure was determined using X-ray crystallography and experimental data is available.";
        break;
       case "nmr":
        t = "The structure was determined using NMR spectroscopy and experimental data is available.";
        break;
       case "em":
        t = "The structure was determined using Electron Microscopy and experimental data is available.";
        break;
       case "multiple":
        t = "The structure was determined using Electron Crystallography and experimental data is available.";
        break;
       case "extal":
        t = "The sample of the biomacromolecules in this entry was obtained using techniques other than expression, chemical synthesis or extraction from a biological source.";
        break;
       case "hybrid":
        t = "The structure was determined using a hybrid technique and experimental data is available.";
        break;
       case "other":
        t = "The structure was determined using a technique other than X-ray, NMR, EM, or a hybrid thereof and experimental data is available.";
        break;
       case "xrayNoData":
        t = "The structure was determined using X-ray crystallography (no experimental data available).";
        break;
       case "nmrNoData":
        t = "The structure was determined using NMR spectroscopy (no experimental data available).";
        break;
       case "emNoData":
        t = "The structure was determined using Electron Microscopy (no experimental data available).";
        break;
       case "extalNoData":
        this.title = "The structure was determined using Electron Crystallography (no experimental data available).";
        break;
       case "hybridNoData":
        t = "The structure was determined using a hybrid technique (no experimental data available).";
        break;
       case "otherNoData":
        t = "The structure was determined using a technique other than X-ray, NMR, EM, or a hybrid thereof (no experimental data available).";
        break;
       case "extalNoData":
        t = "This icon conveys information about the structure-determination technique for this entry."
      }
      break;
     case "Protein":
      switch (e[1]) {
       case "present":
        t = "This entry contains protein.";
        break;
       case "absent":
        t = "This entry does not contain protein.", "EMD" === e[2].substring(0, 3) && (this.title = "Presence of protein is not annotated for this EMDB entry.");
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about the presence of protein in the entry."
      }
      break;
     case "NucleicAcid":
      switch (e[1]) {
       case "present":
        t = "This entry contains nucleic acid (DNA, RNA).";
        break;
       case "absent":
        t = "This entry does not contain nucleic acid (DNA, RNA).", "EMD" === e[2].substring(0, 3) && (t = "Presence of DNA or RNA is not annotated for this EMDB entry.");
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about the presence of nucleic acid (DNA, RNA) in the entry."
      }
      break;
     case "Ligands":
      switch (e[1]) {
       case "present":
        t = "This entry contains one or more ligands.";
        break;
       case "absent":
        t = "This entry does not contain any ligands.";
        break;
       case "CGIlogoUnknown":
        t = "This icon conveys information about the presence of ligands in the entry."
      }
    }
    return t
   }
  })
 }(),
 function() {
  "use strict";
  angular.module("pdb.prints.services", []).service("printsService", ["$http", "$q", function(e, t) {
   this.getPrintsData = function(n) {
    var r = "//www.ebi.ac.uk/pdbe/search/pdb/select?",
     i = "fl=pdb_id,organism_synonyms,number_of_bound_entities%2C+number_of_protein_chains%2Cexperimental_method%2C+experiment_data_available%2Cexpression_host_sci_name%2C+citation_year%2C+entry_organism_scientific_name,number_of_RNA_chains,number_of_DNA_chains,sample_preparation_method,emdb_id",
     o = "&group=true&group.field=pdb_id&group.limit=100&rows=1000",
     a = "&wt=json",
     s = "&q=pdb_id:(" + n.join(" OR ") + ")",
     u = r + i + o + a + s,
     l = t.defer();
    return e.get(u).then(function(e) {
     l.resolve(e.data)
    }, function() {
     l.reject("fail response")
    }), l.promise
   }
  }])
 }(), angular.module("template/prints/pdbLogos.html", []).run(["$templateCache", function(e) {
  e.put("template/prints/pdbLogos.html", '<div class="pdbLogosWrapper"><div class="widthAuto" ng-class="{\'floatLeft\': config.orientation != \'vertical\'}" style="height:{{config.size}}px;position:relative;" ng-hide="(config.hideLogo.indexOf(\'PDBeLogo\') > -1)"><div class="pdbeLogoCol pdbeLogoCol1" style="font-size:{{ (config.size * 4) / (12-1) }}px"><a target="_self" title="{{ [\'pdbeLogo\'] | tooltipFilter }}"href="{{config.domainUrl}}/entry/pdb/{{logoData.PDBeLogo[0]}}/" ng-click="logoClick(\'pdbeLogo\')"><font face="Courier New"><b>{{logoData.PDBeLogo[0]}}</b></font></a></div><div class="pdbeLogoCol1Bottom"><a target="{{config.targetWindow}}" title="pdbe.org" href="{{config.domainUrl}}"><img border="0" ng-src="//www.ebi.ac.uk/pdbe/widgets/html/PDBeWatermark_horizontal_{{config.size}}.png"></a></div></div><div ng-repeat="category in categories" class="pdbeLogoCol widthAuto" ng-class="{\'floatLeft\': config.orientation != \'vertical\'}" ng-hide="(config.hideLogo.indexOf(category) > -1)" style="height:{{config.size}}px"><a target="pdbprints" ng-attr-title="{{ [ category, logoData[category][0], logoData.PDBeLogo[0] ] | tooltipFilter }}" href="{{config.domainUrl}}/entry/pdb/{{logoData.PDBeLogo[0]}}{{categoryUrl[$index]}}"><img class="pdbLogoImg" ng-src="{{config.domainUrl}}/widgets/pdblogos/{{config.color}}/{{config.size}}/{{category}}_{{logoData[category][0]}}.png" border="0"></a></div></div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.sequence.viewer", ["d3Core", "pdb.sequence.view.filters", "pdb.sequence.view.services", "pdb.common.services", "template/sequenceView/pdb.html"]).directive("pdbSeqViewer", ["d3", "seqViewerService", "$compile", "$filter", "$interval", "commonServices", "$document", "$window", "$q", function(e, t, n, r, i, o, a) {
   return {
    restrict: "EAC",
    scope: {
     entryId: "@",
     entityId: "@",
     viewerType: "@",
     settings: "@",
     height: "@",
     width: "@",
     subscribeEvents: "@"
    },
    templateUrl: function(e, t) {
     return "unipdbViewer" === t.viewerType ? "template/sequenceView/tempUniPdb.html" : "template/sequenceView/pdb.html"
    },
    link: function(t, s) {
     t.seqViewerOverlay = {
      width: "90%",
      height: "100%",
      "background-color": "rgba(0,0,0,0.5)",
      color: "#fff",
      "z-index": 1,
      position: "absolute",
      "text-align": "center",
      padding: "0 5%",
      "webkit-box-sizing": "content-box",
      "-moz-box-sizing": "content-box",
      "box-sizing": "content-box"
     }, t.seqViewerOverlayMessage = {
      display: "inline-block",
      "margin-top": "5%",
      "font-size": "12px"
     }, t.overlayText = "Loading...";
     var u = e.select(s[0]);
     if ("unipdbViewer" === t.viewerType) {
      var l = JSON.parse(t.settings);
      "undefined" == typeof t.height && "undefined" != typeof l.height && (t.height = l.height), "undefined" == typeof t.width && "undefined" != typeof l.width && (t.width = l.width);
      var c = u.select(".tempUniPDBWrapper").append("pdb-uniprot-viewer").attr("entry-id", t.entryId);
      var c = u.select(".tempUniPDBWrapper").append("pdb-uniprot-viewer").attr("entropy", t.entropy);
      return "undefined" != typeof t.height && c.attr("height", t.height), "undefined" != typeof t.width && c.attr("width", t.width), n(c.node())(t), !1
     }
     var h = u.select(".seqViewerWrapper"),
      p = h.select(".topRightSection"),
      d = h.select(".bottomRightSection"),
      f = d.select(".bottomSvg"),
      m = f.select("g.shapesGrp"),
      g = p.select("g.scaleGrp"),
      v = u.node().parentNode.getBoundingClientRect();
     t.config = {
      width: v.width > 230 ? v.width : 230,
      height: v.height > 250 ? v.height : 250,
      showLabels: !0,
      labelWidth: 80,
      maxZoomed: !1
     }, "undefined" != typeof t.settings && t.settings && angular.extend(t.config, JSON.parse(t.settings)), "undefined" != typeof t.height && (t.config.height = t.height), "undefined" != typeof t.width && (t.config.width = t.width), "undefined" != typeof t.hideLabels && "true" == t.hideLabels && (t.config.showLabels = !1), t.activeViewBtn = "compact", t.showViewBtn = !0, t.allowZoom = !0, t.showLoadMoreLink = !1, t.chainsViewStatus = "fewer", t.showLabels = t.config.showLabels, "undefined" == typeof t.subscribeEvents && (t.subscribeEvents = "true"), ("undefined" == typeof t.viewerType || "unipdbViewer" !== t.viewerType) && (t.viewerType = "pdbViewer");
     var y = new function() {
      this.margin = {
       top: 15,
       right: 10,
       bottom: 15,
       left: 10
      }, this.topSvgHeight = 70, this.topButtonHeight = 45, this.loadChainsBtnSecHeight = 35, this.mainHeight = t.config.height - this.topButtonHeight, this.leftSecWidth = t.config.showLabels ? 80 : 15, this.scrollbarWidth = 25, this.scrollRightMargin = 5, this.mainWidth = t.config.width, this.sectionWidth = this.mainWidth - this.scrollRightMargin, this.bottomSecHeigth = this.mainHeight - this.topSvgHeight - this.margin.bottom, this.svgWidth = this.sectionWidth - this.leftSecWidth - this.scrollbarWidth, this.svgScaleWidth = this.svgWidth - 20, this.tickCount = this.svgWidth / 28, this.seqViewerSmallOverlay = "position: absolute;padding: 5px;color: #fff;background-color: rgba(0, 0, 0, 0.498039);width: 27%;font-size: 10px;margin-left: 40%;top:0;text-align:center;"
     };
     if (t.styles = {
       wrapper: {
        width: y.mainWidth + "px",
        height: y.mainHeight + "px",
        clear: "both",
        position: "relative"
       },
       topSection: {
        height: y.topSvgHeight + "px",
        width: y.sectionWidth + "px"
       },
       topSvg: {
        height: y.topSvgHeight + "px",
        width: y.svgWidth + "px",
        overflow: "visible"
       },
       bottomSection: {
        height: y.bottomSecHeigth + "px",
        width: y.sectionWidth + "px",
        "overflow-x": "hidden",
        "overflow-y": "auto"
       },
       bottomSvg: {
        width: y.svgWidth + "px",
        overflow: "visible"
       },
       leftSecStyle: {
        width: y.leftSecWidth - 5 + "px",
        "text-align": "right",
        background: "#DCECD7 none repeat scroll 0% 0%",
        "padding-right": "5px",
        position: "relative"
       },
       labelsBg: {
        width: y.leftSecWidth - 5 + "px",
        background: "#DCECD7 none repeat scroll 0% 0%",
        "padding-right": "5px",
        height: y.mainHeight + "px",
        position: "absolute",
        "z-index": 0
       },
       scrollArrowLeft: {
        display: "none",
        position: "absolute",
        margin: "8px 0 0 " + (y.leftSecWidth - 10) + "px",
        "text-decoration": "none",
        border: "none",
        outline: "none"
       },
       scrollArrowRight: {
        display: "none",
        margin: "8px 0 0 20px",
        "text-decoration": "none",
        border: "none",
        outline: "none"
       },
       loadMoreStyle: {
        top: y.mainHeight - 35 + "px",
        left: y.mainWidth / 2 - 50 + "px"
       },
       btnGrp: {
        "float": "left",
        "margin-bottom": "5px",
        width: y.mainWidth + "px",
        "text-align": "right",
        overflow: "auto"
       }
      }, t.wrapperSize = {
       width: y.mainWidth,
       height: y.mainHeight
      }, "unipdbViewer" === t.viewerType) return t.overlayText = "Please use the new '<pdb-uniprot-viewer>' component for UniPDB viewer", !1;
     if ("undefined" == typeof t.entryId) return t.overlayText = "Please specify 'entry-id'", void 0;
     if (t.entryId = t.entryId.toLowerCase(), "undefined" == typeof t.entityId) return t.overlayText = "Please specify 'entity-id'", void 0;
     var b = e.select(".pdbSeqTooltip");
	 console.log(t.entryId);
     null == b[0][0] && (b = e.select("body").append("div").attr("class", "pdbSeqTooltip")), t.pdbevents = o.createNewEvent(["PDB.seqViewer.click", "PDB.seqViewer.mouseover", "PDB.seqViewer.mouseout"]);
     var w = function() {
       function n() {
        this.smallSeqFlag = !1, this.shapeMaster = {}, this.renderViewModel = void 0, this.seqLength = 0, this.scaleConfig = void 0, this.xScale = void 0, this.line = void 0, this.zoom = void 0, this.xAxis = void 0, this.seqAxis = void 0, this.tickCount = y.tickCount, this.clipPathId = void 0, this.initPdbViewer()
       }
       return n.prototype.initPdbViewer = function() {
        var e = this;
        t.overlayText = "Downloading API Data...";
        var n = o.createPromise([t.entryId], ["observedResidueRatio"]);
        o.combinedDataGrabber(n, t.entryId, ["observedResidueRatio"], !0).then(function(n) {
         if ("undefined" != typeof n[t.entryId].observedResidueRatio[t.entityId]) {
          t.bestChainId = n[t.entryId].observedResidueRatio[t.entityId][0].chain_id, t.bestStructAsymId = n[t.entryId].observedResidueRatio[t.entityId][0].struct_asym_id, n[t.entryId].observedResidueRatio[t.entityId].length > 1 && (t.styles.bottomSection.height = y.bottomSecHeigth - y.loadChainsBtnSecHeight + "px", t.showLoadMoreLink = !0);
          var i = ["summary", "entities", "polymerCoveragePerChain", "bindingSites", "mappings", "isoforms", "secStrutures", "outliers", "modifiedResidues", "mutatedResidues", "residueListing", "rfamMappings"],
		   a = o.createPromise([t.entryId], i, t.bestChainId, t.bestStructAsymId);
          o.combinedDataGrabber(a, t.entryId, i, !0).then(function(n) {
           t.outlierApiData = n[t.entryId].outliers, t.bindingSitesApiData = n[t.entryId].bindingSites, t.residueListingApiData = n[t.entryId].residueListing, t.overlayText = "Parsing API Data...", e.renderViewModel = r("pdbModelFilter")(n, "", "", "", t.molSeqArr, y.margin.top, t.entryId, t.entityId, u, t.bestChainId, t.bestStructAsymId), e.initScaleAndZoom(), t.overlayText = "Rendering View...", e.renderShapes(e.renderViewModel), e.initFitTextInPath(), t.config.maxZoomed ? (e.zoom.scale(e.scaleConfig.maxZoom), e.zoomDraw()) : "undefined" != typeof bowser && "undefined" != typeof bowser.safari && e.zoomDraw(1), t.overlayText = "", e.smallSeqFlag && (t.showViewBtn = !1), t.$apply()
          }, function() {
           t.overlayText = "Error downloading API Data!", window.console && console.log("Error: PDB veiwer combined api call failed")
          })
         } else t.overlayText = "Error: Entity not found!", t.$apply(), window.console && console.log("Error: Entity not found!!")
        }, function() {
         t.overlayText = "Error downloading API Data!", window.console && console.log("Error: Observed residue ratio api failed")
        })
       }, n.prototype.initScaleAndZoom = function() {
        var n = this;
        t.overlayText = "Initalizing scale and zoom...", t.pathLeftLabels = n.renderViewModel.pathLeftLabels, t.pathMoreLeftLabels = [], t.pdbIdArr = n.renderViewModel.pdbIdArr, t.entrySummary = n.renderViewModel.options, n.sequenceArr = t.entrySummary.seqStr.split(""), t.seqLength = n.sequenceArr.length, n.seqLength = n.sequenceArr.length, n.scaleConfig = {
         indexMax: n.seqLength - 1,
         minZoom: 1,
         maxZoom: n.getMaxZoom(n.seqLength, y.svgScaleWidth)
        }, n.seqLength <= Math.ceil(y.tickCount) && (n.tickCount = n.seqLength, n.smallSeqFlag = !0), n.xScale = e.scale.linear().domain([0, n.scaleConfig.indexMax]).range([0, y.svgScaleWidth]), n.line = e.svg.line().x(function(e) {
         return n.xScale(e[0])
        }), n.xAxis = e.svg.axis().scale(n.xScale).orient("top").tickFormat(function(e) {
         return e + 1
        }).ticks(n.tickCount), n.seqAxis = e.svg.axis().scale(n.xScale).orient("top").tickFormat(function(e) {
         return n.sequenceArr[e]
        }).ticks(n.tickCount);
        var r = g.select("g.x.axis").call(n.xAxis);
        n.seqLength === r.selectAll("g.tick")[0].length && (n.smallSeqFlag = !0), n.zoom = e.behavior.zoom().on("zoom", function() {
         n.zoomDraw(n)
        }).x(n.xScale).scaleExtent([n.scaleConfig.minZoom, n.scaleConfig.maxZoom]), p.select(".topSvg").call(n.zoom).on("contextmenu", function() {
         e.event.preventDefault()
        }), d.select(".shapesGrp").call(n.zoom).on("contextmenu", function() {
         e.event.preventDefault()
        }), n.clipPathId = "clipper_" + Math.floor(500 * Math.random() + 1), f.append("defs").append("clipPath").attr("id", n.clipPathId).append("rect").attr("x", -10).attr("y", -30).attr("width", y.svgWidth).attr("height", 100)
       }, n.prototype.renderShapes = function(e) {
        var t = this;
        for (var n in e)
         if ("groups" === n)
          for (var r = e[n].length, i = 0; r > i; i++) {
           var o = e[n][i]["class"],
            a = e[n][i].parentGroup,
            s = e[n][i].marginTop,
            u = (e[n][i].label, m);
           ("moleculeGrp" === a || "moleculeGrp" === o) && (u = g), "" !== a ? (u.select("." + a).append("g").attr("class", o), "undefined" != typeof s && s && u.select("." + o).attr("transform", "translate(0," + s + ")")) : u.append("g").attr("class", o).attr("transform", "translate(0," + (y.margin.top + s) + ")").attr("clip-path", "url(#" + t.clipPathId + ")")
          } else if ("shapes" === n)
           for (var l = e[n].length, c = 0; l > c; c++) {
            var h = e[n][c].shape,
             p = e[n][c].shapeGroupClass,
             d = e[n][c].shapeClass,
             f = e[n][c].shapeContent,
             v = e[n][c].shapeColour,
             b = e[n][c].shapeHeight,
             w = e[n][c].marginTop,
             x = e[n][c].shapeCap,
             _ = e[n][c].showTooltip,
             S = e[n][c].fitInPath;
            "undefined" == typeof b && (b = 0), "undefined" == typeof w && (w = 0), "undefined" == typeof x && (x = "butt"), "text" === h ? (t.drawText(f, p, d, _, S), t.displaySeq()) : "zigzag" === h ? t.drawZigzag(f, p, d, v, b, w, x, _) : "arrow" === h ? t.drawArrow(f, p, d, v, b, w, x, _) : "path" === h ? t.drawPath(f, p, d, v, b, w, x, _) : "circle" === h || "square" === h || "triangle-up" === h || "triangle-down" === h || "diamond" === h || "cross" === h ? t.createShape(h, f, p, d, v, _, w) : "sequence" === h && (t.drawSeqAxis(f, p, d, w, _), t.displaySeq())
           }
       }, n.prototype.setMainSvgHeight = function() {
        var e = 20;
        f.select(".seqSvgBg").attr("height", 20);
        var t = m.node().getBBox();
        f.attr("height", t.height + e), f.select(".seqSvgBg").attr("height", t.height + e)
       }, n.prototype.drawText = function(t, n, r, i, o) {
        var a = this,
         s = u.select("." + n).attr("clip-path", "url(#" + a.clipPathId + ")").selectAll("path." + r).data(t).enter().append("text").attr("class", function(e, t) {
          return e.textIndex = t, "textEle " + r + " " + r + "-" + t
         }).attr("x", function(e) {
          return a.xScale(e.textRange[0][0])
         }).attr("y", function(e) {
          return e.textRange[1][0]
         }).attr("fill", "white").text(function(e) {
          return e.textString
         }).style("text-anchor", function(t) {
          return i === !0 && a.attachMouseEvent(e.select(this), "text", "white", t), "undefined" != typeof t.textAnchor ? t.textAnchor : "middle"
         }).style("font-family", "Verdana,sans-serif").style("font-size", "12px").style("cursor", "default");
        o === !0 && (s.classed("fitTextInPath", !0), s.style("display", "none"))
       }, n.prototype.fitTextInPath = function(t) {
        var n = this;
        t.each(function() {
         var t = e.select(this),
          r = t.data()[0],
          i = u.select("." + r.pathClassPrefix + "-" + r.textIndex).node().getBBox().width;
         n.textFontResize(t, i)
        })
       }, n.prototype.textFontResize = function(e, t) {
        var n = this,
         r = e.node().getBBox().width;
        if (r > t) {
         var i = parseInt(e.style("font-size"));
         i > 2 ? (e.style("font-size", i - 2 + "px"), n.textFontResize(e, t)) : e.style("font-size", "0px")
        }
       }, n.prototype.drawZigzag = function(t, n, r, i, o, a, s, l) {
        var c = this;
        u.select("." + n).attr("clip-path", "url(#" + c.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "linkerPathEle " + r + "-" + t
        }).attr("stroke", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("stroke-width", 2).attr("stroke-linecap", s).attr("fill", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("transform", "translate(0,-9)").attr("d", function(t) {
         if (1 == l) {
          var n = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
          c.attachMouseEvent(e.select(this), "path", n, t)
         }
         var r = c.getZigZagdVal(c.xScale(t.pathStart), t.pathPosition);
         return r
        })
       }, n.prototype.getZigZagdVal = function(e, t) {
        var n = ["M", "0L", "0L", "3L", "6L", "9L", "12L", "15L", "18L"],
         r = 0,
         i = "",
         o = 5;
        return "start" === t && (o = -5), angular.forEach(n, function(t) {
         var n = 0;
         0 === r ? (r = 1, n = e) : (r = 0, n = e + o), i += t + "" + n + ","
        }), i += "18 Z"
       }, n.prototype.createShape = function(t, n, r, i, o, a, s) {
        var l = this;
        l.shapeMaster[i] = t, u.select("." + r).attr("clip-path", "url(#" + l.clipPathId + ")").selectAll("otherPathShape path." + i).data(n).enter().append("path").attr("class", i).attr("d", l.getShapeDVal(t)).attr("fill", function(t) {
         var n;
         return n = "undefined" != typeof t.color ? e.rgb(t.color[0], t.color[1], t.color[2]).brighter() : o, 1 == a && l.attachMouseEvent(e.select(this), "circle", n, t), n
        }).attr("stroke", "none").attr("stroke-width", 0).attr("transform", function(e) {
         var t = "translate(" + l.xScale(e.residue_number - 1) + ",10)";
         return 0 !== s && (t = "translate(" + l.xScale(e.residue_number - 1) + "," + s + ")"), t
        })
       }, n.prototype.getShapeDVal = function(t) {
        var n = this;
        return e.svg.symbol().type(t).size(function() {
         return n.smallSeqFlag ? 40 : 10 * n.getShapeSize(n.zoom.scale())
        })
       }, n.prototype.getShapeSize = function(e) {
        return 1.7 > e ? e = 1.7 : e > 4.5 && (e = 4.5), e
       }, n.prototype.drawSeqAxis = function(e, t, n, r, i) {
        var o = this;
        u.select("." + t).append("g").attr("class", "seqAxis " + n);
        var a = u.select("." + n);
        a.call(o.seqAxis), r && "undefined" != typeof r && a.attr("transform", "translate(0," + r + ")"), 1 == i && o.attachMouseEvent(a, "text", "white", e)
       }, n.prototype.drawPath = function(t, n, r, i, o, a, s, l) {
        var c = this;
        u.select("." + n).attr("clip-path", "url(#" + c.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "pathEle " + r + "-" + t
        }).attr("stroke", function(t) {
         var n;
         if ("undefined" != typeof t.color) {
          var r = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
          n = r
         } else n = i;
         return 1 == l && c.attachMouseEvent(e.select(this), "path", n, t), n
        }).attr("stroke-width", o).attr("stroke-opacity", function(e) {
         return "undefined" != typeof e.opacity ? e.opacity : 1
        }).attr("stroke-linecap", s).attr("fill", "none").attr("transform", "translate(0," + a + ")").attr("d", function(e) {
         return c.line(e.pathRange)
        })
       }, n.prototype.drawArrow = function(t, n, r, i, o, a, s, l) {
        var c = this;
        u.select("." + n).attr("clip-path", "url(#" + c.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "arrowEle " + r + "-" + t
        }).attr("stroke", function(t) {
         var n = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
         return 1 == l && c.attachMouseEvent(e.select(this), "arrow", n, t), n
        }).attr("stroke-width", o).attr("stroke-linecap", s).attr("fill", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("transform", "translate(0," + a + ")").attr("d", function(e) {
         return c.getArrowDVal(c.line(e.pathRange))
        })
       }, n.prototype.getArrowDVal = function(e) {
        var t = e.split(","),
         n = parseFloat(t[0].substring(1)),
         r = parseFloat(t[1].substring(2)),
         i = r - n + 1,
         o = 5;
        10 > i && (o = i - 2);
        var a = "M" + n + ",-5L" + (r - o) + ",-5L" + (r - o) + ",-10L" + r + ",0L" + (r - o) + ",10L" + (r - o) + ",5L" + n + ",5";
        return a
       }, n.prototype.getMaxZoom = function(e, t) {
        var n = this,
         r = 0;
        if (t % 100 === 0) r = .2112 * e / n.getZoomDivisor(t);
        else {
         var i = 100 * Math.floor(t / 100);
         1 > i && (i = 100);
         var o = .2112 * e / n.getZoomDivisor(i),
          a = {
           100: {
            diff: 2,
            range: [1, 2, 4, 7, 9]
           },
           200: {
            diff: 1.5,
            range: [2, 5]
           },
           300: {
            diff: .9,
            range: [4, 9]
           },
           400: {
            diff: .7,
            range: [5, 9]
           },
           500: {
            diff: .6,
            range: [1, 9]
           },
           600: {
            diff: .45,
            range: [8, 9]
           },
           700: {
            diff: .4,
            range: [8, 9]
           }
          };
         if (800 > t) {
          for (var s = a[i].range.length, u = s - 1; u >= 0; u--)
           if (t >= i + 10 * a[i].range[u]) {
            r = 0 === u ? o : o - a[i].diff / 100 * e * u;
            break
           }
         } else r = .2112 * e / n.getZoomDivisor(i)
        }
        return 0 === r && (r = o), r
       }, n.prototype.getZoomDivisor = function(e) {
        var t = 1;
        return e > 100 && (t = Math.floor(Math.floor(e) / 100)), t
       }, n.prototype.displaySeq = function() {
        var t = this;
        if (t.smallSeqFlag || t.zoom.scale() === t.scaleConfig.maxZoom) {
         u.selectAll(".linkerPathEle").attr("d", function(e) {
          var n = 0;
          n = "start" === e.pathPosition ? e.pathStart - .1 : e.pathStart + .1;
          var r = t.getZigZagdVal(t.xScale(n), e.pathPosition);
          return r
         }), u.selectAll(".seqPath").attr("d", function(e) {
          var n = t.line(e.pathRange),
           r = n.split(",");
          return r[0] = "M" + (parseFloat(r[0].substring(1)) - 5), r[1] = "0L" + (parseFloat(r[1].substring(2)) + 5), r.join(",")
         }), u.selectAll(".nonSeqPath").attr("d", function(e) {
          var n = t.line(e.pathRange),
           r = n.split(",");
          return parseFloat(r[0].substring(1)) > 0 && (r[0] = "M" + (parseFloat(r[0].substring(1)) + 5)), r[1] = "0L" + (parseFloat(r[1].substring(2)) - 5), r.join(",")
         });
         var n = u.selectAll(".linePathEle");
         n.each(function() {
          e.select(e.select(this).node()).attr("d", function(e) {
           var n = t.line(e.pathRange),
            r = n.split(","),
            i = parseFloat(r[0].substring(1)) + 5,
            o = r.length;
           r[0] = "M" + i;
           var a = parseFloat(r[o - 2].substring(2)) - 5;
           return r[o - 2] = "5L" + a, r.join(",")
          })
         }), u.selectAll(".seqAxis").style("display", "block"), u.selectAll(".hideTextOnZoom").style("display", "none"), u.selectAll(".showTextOnZoom").style("display", "block")
        } else u.selectAll(".seqAxis").style("display", "none"), u.selectAll(".hideTextOnZoom").style("display", "block"), u.selectAll(".showTextOnZoom").style("display", "none")
       }, n.prototype.zoomDraw = function() {
        var n = this;
        n.zoom.scale() > 1 ? u.selectAll(".SeqScrollArrow").style("display", "block") : u.selectAll(".SeqScrollArrow").style("display", "none"), t.allowZoom === !1 && n.zoom.scale(n.scaleConfig.maxZoom);
        var r = n.zoom.translate(),
         i = n.zoom.scale(),
         o = Math.min(0, Math.max(y.svgScaleWidth * (1 - i), r[0])),
         a = Math.min(0, Math.max(1 * (1 - i), r[1]));
        n.zoom.translate([o, a]), g.select("g.x.axis").call(n.xAxis), u.selectAll(".pathEle").each(function(t) {
         e.select(this).attr("d", n.line(t.pathRange))
        }), u.selectAll(".arrowEle").each(function(t) {
         e.select(this).attr("d", n.getArrowDVal(n.line(t.pathRange)))
        }), u.selectAll(".linkerPathEle").each(function(t) {
         var r = n.getZigZagdVal(n.xScale(t.pathStart), t.pathPosition);
         e.select(e.select(this).node()).attr("d", r)
        }), u.selectAll(".seqAxis").call(n.seqAxis);
        for (var s in n.shapeMaster) u.selectAll("." + s).attr("d", n.getShapeDVal(n.shapeMaster[s])).attr("transform", function(e) {
         var t = "translate(" + n.xScale(e.residue_number - 1) + ",10)";
         return "undefined" != typeof e.marginTop && 0 !== e.marginTop && (t = "translate(" + n.xScale(e.residue_number - 1) + "," + e.marginTop + ")"), t
        });
        n.displaySeq(), u.selectAll(".textEle").each(function() {
         var t = e.select(this),
          r = t.data()[0];
         t.attr("x", function(e) {
          return n.xScale(e.textRange[0][0])
         }), "undefined" != typeof r && "undefined" != typeof r.fitInPath && r.fitInPath === !0 && (t.style("font-size", "12px"), n.fitTextInPath(t))
        })
       }, n.prototype.initFitTextInPath = function() {
        var t = this;
        u.selectAll(".fitTextInPath").each(function() {
         var n = e.select(this),
          r = n.data()[0];
         n.style("display", "block"), n.attr("x", function(e) {
          return t.xScale(e.textRange[0][0])
         }), "undefined" != typeof r && "undefined" != typeof r.fitInPath && r.fitInPath === !0 && t.fitTextInPath(n)
        })
       }, n.prototype.showTooltip = function(t, n, r) {
        var i = 0,
         o = 0;
        "ng" === n ? (o = r.pageX, i = r.pageY) : (o = e.event.pageX, i = e.event.pageY), b.html(t).style("display", "block").style("top", i + 15 + "px").style("left", o + 10 + "px")
       }, n.prototype.hideTooltip = function() {
        b.style("display", "none")
       }, n.prototype.getResidue = function(e, t) {
        var n = this,
         r = e[0];
        return "circle" !== t && (r = Math.round(n.xScale.invert(e[0]))), "Residue " + (r + 1) + " (" + n.sequenceArr[r] + ")"
       }, n.prototype.dispatchEvent = function(e, n, r) {
        var i = s[0];
        "undefined" != typeof r && (i = r), "undefined" != typeof n && (t.pdbevents[e].eventData = n), i.dispatchEvent(t.pdbevents[e])
       }, n.prototype.eventOperations = function(e, n, r, i, o, a) {
        var s, u, l = this;
        "undefined" != typeof a && (s = a.tooltipMsg, u = a.tooltipPosition), "circle" === r && (o[0] = a.residue_number - 1);
        var c = l.getResidue(o, r);
        angular.isUndefined(s) ? s = c : angular.isUndefined(u) || "prefix" !== u ? angular.isUndefined(u) || "postfix" !== u || (s = c + " " + s) : s = s + " " + c, "PDB.seqViewer.mouseover" == e && l.showTooltip(s, "d3", o), l.dispatchEvent(e, {
         viewerType: "pdbViewer",
         elementData: a,
         residueNumber: parseInt(c.split(" ")[1]),
         entryId: t.entryId,
         entityId: t.entityId
        })
       }, n.prototype.attachMouseEvent = function(n, r, i, o) {
        var a = this;
        n.on("click", function() {
         var t = e.mouse(this);
         a.eventOperations("PDB.seqViewer.click", n, r, i, t, o)
        }).on("mouseover", function() {
         var t = e.mouse(this);
         a.eventOperations("PDB.seqViewer.mouseover", n, r, i, t, o)
        }).on("mousemove", function() {
         var t = e.mouse(this);
         a.eventOperations("PDB.seqViewer.mouseover", n, r, i, t, o)
        }).on("mouseleave", function() {
         a.hideTooltip(), a.dispatchEvent("PDB.seqViewer.mouseout", {
          viewerType: "pdbViewer",
          entryId: t.entryId,
          entityId: t.entityId
         })
        })
       }, n
      }(),
      x = new w;
	  
	  
     t.$watch("activeViewBtn", function() {
      "undefined" != typeof x.zoom && ("expanded" === t.activeViewBtn ? (x.zoom.scale(x.scaleConfig.maxZoom), x.zoomDraw(), t.allowZoom = !1) : (x.zoom.scale(1), t.allowZoom = !0, x.zoomDraw()))
     });
     var _;
     t.movePan = function(e) {
      var t = x.zoom.translate();
      x.zoom.translate([t[0] + e, t[1]]), x.zoomDraw(), _ = i(function() {
       var t = x.zoom.translate();
       x.zoom.translate([t[0] + e, t[1]]), x.zoomDraw()
      }, 100)
     }, t.stopMovingPan = function() {
      i.cancel(_)
     }, t.loadMoreChains = function() {
      t.showLoadMoreLink = !1, h.append("div").classed("smallOverlayChains", !0).text("Loading Chain API Data..").attr("style", y.seqViewerSmallOverlay);
      var e = o.createPromise([t.entryId], ["polymerCoverage"]);
      o.combinedDataGrabber(e, t.entryId, ["polymerCoverage"], !0).then(function(e) {
       var n = r("pdbModelFilter")(e, t.outlierApiData, t.bindingSitesApiData, t.residueListingApiData, t.molSeqArr, y.margin.top, t.entryId, t.entityId, u, t.bestChainId, t.bestStructAsymId, t.seqLength);
       x.renderShapes(n), t.pathMoreLeftLabels = t.pathMoreLeftLabels.concat(n.pathLeftLabels), t.chainsViewStatus = "fewer", t.chiansHideShowBtn = !0, t.$apply(), x.setMainSvgHeight(), h.selectAll(".smallOverlayChains").remove()
      }, function() {
       h.selectAll(".smallOverlayChains").remove(), window.console && console.log("load more chains api failed")
      })
     }, t.hideShowChainsFn = function() {
      "fewer" == t.chainsViewStatus ? (t.chainsViewStatus = "more", f.selectAll(".otherChainPaths").style("display", "none"), u.selectAll(".moreChainLabels").style("display", "none")) : (t.chainsViewStatus = "fewer", f.selectAll(".otherChainPaths").style("display", "block"), u.selectAll(".moreChainLabels").style("display", "block")), x.setMainSvgHeight()
     }, t.showTooltip = function(e, t, n) {
      x.showTooltip(e, t, n)
     }, t.hideTooltip = function() {
      x.hideTooltip()
     }, "true" == t.subscribeEvents && (a.on("PDB.topologyViewer.click", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != t.entryId || e.eventData.entityId != t.entityId) return;
       if (e.eventData.chainId != t.bestChainId) return;
       u.selectAll(".selectionPath").remove();
       var n = r("highlightResideShapeFilter")(e.eventData, "click");
       x.renderShapes(n)
      }
     }), a.on("PDB.topologyViewer.mouseover", function(e) {
      if ("undefined" != typeof e.eventData) {
       if (e.eventData.entryId != t.entryId || e.eventData.entityId != t.entityId) return;
       if (e.eventData.chainId != t.bestChainId) return;
       u.selectAll(".highlightPath").remove();
       var n = r("highlightResideShapeFilter")(e.eventData, "mouseover");
           x.renderShapes(n)

      }
     }), a.on("PDB.topologyViewer.mouseout", function() {
      u.selectAll(".highlightPath").remove()
     }), a.on("PDB.litemol.mouseover", function(e) {
      if ("undefined" == typeof e.eventData || angular.equals({}, e.eventData)) u.selectAll(".highlightPath").remove();
      else {
       if (e.eventData.entryId.toLowerCase() != t.entryId.toLowerCase() || e.eventData.entityId != t.entityId) return;
       u.selectAll(".highlightPath").remove();
       var n = r("highlightResideShapeFilter")(e.eventData, "mouseover");
       x.renderShapes(n)
      }
     }), a.on("PDB.litemol.click", function(e) {
      if ("undefined" != typeof e.eventData && !angular.equals({}, e.eventData)) {
       if (e.eventData.entryId.toLowerCase() != t.entryId.toLowerCase() || e.eventData.entityId != t.entityId) return;
       u.selectAll(".selectionPath").remove();
       var n = r("highlightResideShapeFilter")(e.eventData, "click");
       x.renderShapes(n)
	   
      }
     }))
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.sequence.view.filters", ["d3Core", "pdb.sequence.view.services", "pdb.common.services"]).filter("pdbModifiedResFilter", ["commonServices", function(e) {
   return function(t, n, r, i, o, a, s) {
    var u = [],
     l = {
      shape: "path",
      shapeGroupClass: "mutationGrp_" + r,
      shapeClass: "mutation_" + r,
      shapeHeight: i,
      marginTop: o,
      showTooltip: !0,
      shapeContent: []
     },
     c = {
      shape: "text",
      shapeGroupClass: "mutationGrp_" + r,
      shapeClass: "showTextOnZoom singleTextEle mutation_text_" + r,
      shapeHeight: i,
      marginTop: o,
      showTooltip: !0,
      shapeContent: []
     },
     h = [];
    return angular.forEach(t, function(t) {
     var r = t.residue_number;
     if (t.entity_id == n.entityId && -1 === h.indexOf(t.residue_number)) {
      h.push(t.residue_number);
      var i = "",
       o = "";
      "undefined" != typeof t.mutation_details && "mutatedResidues" === s ? (null !== t.mutation_details.from && (i += t.mutation_details.from + " --> "), i += t.mutation_details.to + " (" + t.mutation_details.type + ")", o = t.mutation_details.to) : (i = "Modified Residue: " + t.chem_comp_id, o = "*", a = 8), r > -1 && (l.shapeContent.push({
       pathRange: [
        [r - 1 - .5, 0],
        [r - 1 + .5, 0]
       ],
       tooltipMsg: i,
       pathData: t,
       color: e.specificColors.burntOrange
      }), c.shapeContent.push({
       textRange: [
        [r - 1, 0],
        [a, 0]
       ],
       tooltipMsg: i,
       textString: o,
       pathData: t,
       color: e.specificColors.burntOrange
      }))
     }
    }), l.shapeContent.length > 0 && u.push(l), c.shapeContent.length > 0 && u.push(c), u
   }
  }]).filter("highlightResideShapeFilter", [function() {
   return function(e, t) {
    var n = "highlightPath highlightPath",
     r = !1;
    "click" == t && (n = "selectionPath selectionPath", r = !0);
    var i = {
     shape: "path",
     shapeGroupClass: "chain" + e.chainId + "PathGrp" + e.entryId.toLowerCase(),
     shapeClass: n,
     shapeHeight: 25,
     marginTop: 0,
     showTooltip: r,
     shapeContent: [{
      pathRange: [
       [e.residueNumber - 1 - .5, 0],
       [e.residueNumber - 1 + .5, 0]
      ],
      elementType: "ResidueSelection",
      pathData: e,
      color: [0, 0, 0],
      opacity: .5
     }]
    };
    return "undefined" != typeof e.tooltipMsg && "" != e.tooltipMsg && (i.shapeContent[0].tooltipMsg = e.tooltipMsg, "undefined" != typeof e.tooltipPosition && "" != e.tooltipPosition && (i.shapeContent[0].tooltipPosition = e.tooltipPosition)), {
     shapes: [i]
    }
   }
  }]).filter("pdbModelFilter", ["$filter", "seqViewerService", "commonServices", function(e, t, n) {
   return function(r, i, o, a, s, u, l, c, h, p, d, f) {
    var m = function(e, t) {
      for (var n = e.length, r = 0; n > r; r++)
       if (e[r].entity_id == t) return e[r]
     },
     g = function(e, t, n, r, i) {
      var o = {
        idArr: [l],
        unpShapeObj: {
         shape: "path",
         shapeGroupClass: n + "PathGrp" + l,
         shapeClass: "seqPath " + n + "Path" + l + " " + n + "Path" + l,
         shapeHeight: 15,
         showTooltip: !0,
         shapeContent: []
        },
        mappingTextObj: {
         shape: "text",
         shapeGroupClass: n + "PathGrp" + l,
         shapeClass: n + "_text",
         shapeHeight: 15,
         marginTop: 2,
         showTooltip: !0,
         shapeContent: [],
         fitInPath: !0
        }
       },
       a = r.length,
       s = {},
       u = {},
       c = 0;
      return angular.forEach(e, function(h, p) {
       angular.forEach(h.mappings, function(d) {
        if (d.entity_id == t) {
         if ("undefined" != typeof d.struct_asym_id && d.struct_asym_id != i) return;
         var f = d.start.residue_number + "-" + d.end.residue_number;
         if (f in s) s[f].tooltipMsg = s[f].tooltipMsg.replace("(chain ", "(chains "), u[f].tooltipMsg = s[f].tooltipMsg.replace("(chain ", "(chains "), s[f].tooltipMsg = s[f].tooltipMsg.replace(")", " " + d.chain_id + ")"), u[f].tooltipMsg = s[f].tooltipMsg.replace(")", " " + d.chain_id + ")");
         else {
          var m, g = "";
          "scop" === n ? (m = e[p].sccs, g += "<br><strong>" + m + "</strong><br>" + h.identifier) : (m = p, g += "<br><strong>" + m + "</strong><br>" + h.identifier, -1 === o.idArr.indexOf(p) && o.idArr.push(p)), "uniprot" == n && (g += "<br>UniProt range: " + d.unp_start + " - " + d.unp_end), g += "<br>PDB range: " + d.start.residue_number + " - " + d.end.residue_number + " (chain " + d.chain_id + ")";
          var v = n;
          RegExp("rfam_").test(n) && (v = "pfam"), s[f] = {
           pathRange: [
            [d.start.residue_number - 1, 0],
            [d.end.residue_number - 1, 0]
           ],
           tooltipMsg: g,
           tooltipPosition: "postfix",
           pathData: d,
           domainId: m,
           elementType: v,
           elementColor: r[c],
           color: r[c]
          }, u[f] = {
           textRange: [
            [d.start.residue_number + (d.end.residue_number - d.start.residue_number) / 2 - 1, 0],
            [5, 0]
           ],
           textString: h.identifier,
           pathData: d,
           pathClassPrefix: n + "Path" + l,
           fitInPath: !0,
           tooltipMsg: g,
           tooltipPosition: "postfix",
           elementType: v,
           elementColor: r[c],
           color: r[c]
          }, c++, c === a && (c = 0)
         }
        }
       })
      }), angular.forEach(s, function(e, t) {
       o.unpShapeObj.shapeContent.push(e), o.mappingTextObj.shapeContent.push(u[t])
      }), o
     },
     v = function(e, t, r) {
      var i = [],
       o = {
        shape: "path",
        shapeGroupClass: "secStrPathGrp" + l,
        shapeClass: "secStrPath" + l + " secStrPath" + l,
        shapeHeight: 13,
        showTooltip: !0,
        shapeContent: []
       },
       a = {
        shape: "arrow",
        shapeGroupClass: "secStrPathGrp" + l,
        shapeClass: "arrowPath secStrPath" + l + " secStrPath" + l,
        shapeHeight: 1,
        showTooltip: !0,
        shapeContent: []
       };
      return angular.forEach(e, function(e) {
       e.entity_id == t && angular.forEach(e.chains, function(e) {
        e.struct_asym_id == r && angular.forEach(e.secondary_structure, function(t, r) {
         "undefined" != typeof t && t && angular.forEach(t, function(t) {
          var i = {
           pathData: {
            chain_id: e.chain_id,
            struct_asym_id: e.struct_asym_id,
            start: t.start,
            end: t.end
           },
           pathRange: [
            [t.start.residue_number - 1, 0],
            [t.end.residue_number - 1, 0]
           ],
           tooltipMsg: "",
           elementType: r.slice(0, -1)
          };
          "helices" === r ? (i.tooltipMsg = "A helix in chain " + e.chain_id, i.elementColor = n.specificColors.brass, i.color = n.specificColors.brass, o.shapeContent.push(i)) : "strands" === r && (i.tooltipMsg = "A strand in a sheet in chain " + e.chain_id, i.elementColor = n.specificColors.airForceBlue, i.color = n.specificColors.airForceBlue, a.shapeContent.push(i))
         })
        })
       })
      }), o.shapeContent.length > 0 && i.push(o), a.shapeContent.length > 0 && i.push(a), i
     },
     y = function(e, t, r, i) {
      var o = t[0].pathData.chain_id,
       a = t[0].pathData.struct_asym_id,
       s = [{
        shape: "path",
        shapeGroupClass: "quality" + o + "PathGrp" + i,
        shapeClass: "quality" + o + "Path" + i + " quality" + o + "Path" + i,
        shapeHeight: 15,
        showTooltip: !0,
        shapeContent: []
       }];
      return angular.forEach(t, function(e) {
       var t = {
        pathData: e.pathData,
        pathRange: [
         [e.pathRange[0][0], 0],
         [e.pathRange[1][0], 0]
        ],
        tooltipMsg: "No validation issue reported for",
        tooltipPosition: "prefix",
        elementType: "quality",
        color: n.specificColors.qualityGreen
       };
       s[0].shapeContent.push(t)
      }), angular.forEach(e, function(e) {
       e.entity_id == r && angular.forEach(e.chains, function(e) {
        e.chain_id == o && angular.forEach(e.models, function(e) {
         angular.forEach(e.residues, function(e, t) {
          var r = {
            shape: "path",
            shapeGroupClass: "quality" + o + "PathGrp" + i,
            shapeClass: "qualityOverlay" + o + "Path" + i + " qualityOverlay" + o + "Path" + i,
            shapeHeight: 15,
            showTooltip: !0,
            shapeContent: [{
             pathData: e,
             pathRange: [
              [e.residue_number - 1.5, 0],
              [e.residue_number - .5, 0]
             ],
             tooltipMsg: "",
             tooltipPosition: "prefix",
             elementType: "quality_outlier",
             color: n.specificColors.qualityYellow
            }]
           },
           u = "issue";
          r.shapeContent[0].pathData.chain_id = o, r.shapeContent[0].pathData.struct_asym_id = a, 1 === e.outlier_types.length && "RSRZ" === e.outlier_types[0] ? (r.shapeContent[0].color = n.specificColors.qualityRed, r.shape = "circle", r.shapeClass = "qualityCircle" + o + i + t, r.marginTop = -13, r.shapeContent[0].residue_number = e.residue_number, r.shapeContent[0].marginTop = -13) : 1 === e.outlier_types.length ? r.shapeContent[0].color = n.specificColors.qualityYellow : 2 === e.outlier_types.length ? (r.shapeContent[0].color = n.specificColors.burntOrangeBright, u = "issues") : (r.shapeContent[0].color = n.specificColors.qualityRed, u = "issues"), r.shapeContent[0].tooltipMsg = "Validation " + u + ": " + e.outlier_types.join(", ") + "<br>", s.push(r)
         })
        })
       })
      }), s[0].shapeContent.length > 0 ? s : []
     },
     b = function(e, t, r, i, o) {
      var a = [];
      return angular.forEach(e, function(e) {
       if (e.entity_id == t) {
        var s = 0;
        "other" === i && (s = 1), angular.forEach(e.chains, function(e) {
         if ("other" !== i || e.struct_asym_id != o) {
          for (var u = {
            shape: "path",
            shapeGroupClass: "chain" + e.chain_id + "PathGrp" + r,
            shapeClass: "seqPath chain" + e.chain_id + "Path" + r + " chain" + e.chain_id + "Path" + r,
            shapeHeight: 15,
            showTooltip: !0,
            shapeContent: []
           }, l = e.observed.length, c = 0; l > c; c++) u.shapeContent.push({
           pathRange: [
            [e.observed[c].start.residue_number - 1, 0],
            [e.observed[c].end.residue_number - 1, 0]
           ],
           pathData: {
            chain_id: e.chain_id,
            struct_asym_id: e.struct_asym_id,
            entity_id: t,
            chain_range: e.observed[c].start.residue_number + "-" + e.observed[c].end.residue_number
           },
           elementType: "chain",
           color: n.colorGradients.darkStack[s]
          });
          s++, s === n.colorGradients.darkStack.length && (s = 0), a.push(u)
         }
        })
       }
      }), a
     },
     w = function(e, t, r, i, o) {
      var a = {
       shape: "path",
       shapeGroupClass: t,
       shapeClass: "nonSeqPath chain" + r + "nonSeqPath" + i + " chain" + r + "nonSeqPath" + i,
       shapeHeight: 6,
       showTooltip: !0,
       shapeContent: []
      };
      "undefined" != typeof e[0] && e[0].pathRange[0][0] > 0 && a.shapeContent.push({
       pathRange: [
        [0, 0],
        [e[0].pathRange[0][0], 0]
       ],
       pathData: "",
       elementType: "unobserved residues",
       color: n.specificColors.lightGray,
       tooltipMsg: "Unobserved residue"
      });
      for (var s = e.length, u = 0; s > u; u++) "undefined" != typeof e[u + 1] && a.shapeContent.push({
       pathRange: [
        [e[u].pathRange[1][0], 0],
        [e[u + 1].pathRange[0][0], 0]
       ],
       pathData: "",
       elementType: "unobserved residues",
       color: n.specificColors.lightGray,
       tooltipMsg: "Unobserved residue"
      });
      var l = s - 1;
      return "undefined" != typeof e[l] && o > e[l].pathRange[1][0] && a.shapeContent.push({
       pathRange: [
        [e[l].pathRange[1][0], 0],
        [o, 0]
       ],
       pathData: "",
       elementType: "unobserved residues",
       color: n.specificColors.lightGray,
       tooltipMsg: "Unobserved residue"
      }), a.shapeContent.length > 0 ? a : {}
     },
     x = function(e, t, r, i) {
      var o = {},
       a = [];
      angular.forEach(e, function(e) {
       if ("undefined" != typeof e.site_residues && "undefined" != typeof e.ligand_residues) {
        var n = e.ligand_residues,
         r = e.site_residues,
         i = [];
        angular.forEach(n, function(e) {
         var t = [];
         null !== e.chem_comp_id && t.push(e.chem_comp_id), null !== e.chain_id && t.push(e.chain_id), null !== e.author_residue_number && t.push(e.author_residue_number), null !== e.author_insertion_code && t.push(e.author_insertion_code), t.length > 0 && i.push(t.join("-"))
        }), "undefined" == typeof o[e.site_id] && (o[e.site_id] = {}), "undefined" == typeof o[e.site_id].desc && (o[e.site_id].desc = ""), o[e.site_id].desc = i.join(" :: "), angular.forEach(r, function(n) {
         n.struct_asym_id == t && ("undefined" == typeof o[e.site_id].ranges && (o[e.site_id].ranges = []), o[e.site_id].ranges.push({
          residue_number: n.residue_number,
          tooltipMsg: "",
          tooltipPosition: "postfix",
          marginTop: -13,
          elementType: "binding site",
          pathData: n,
          color: ""
         }))
        })
       }
      });
      var s = {},
       u = 0,
       l = n.colorGradients.greenStack.length;
      return angular.forEach(o, function(e) {
       if ("undefined" != typeof e.ranges && e.ranges.length > 0) {
        var r = {
         shape: "triangle-up",
         shapeGroupClass: "bindingSite" + t + "PathGrp" + i,
         shapeClass: "bindingSite" + t + "Path" + i,
         shapeHeight: 15,
         showTooltip: !0,
         marginTop: -13,
         shapeContent: []
        };
        angular.forEach(e.ranges, function(t) {
         t.tooltipMsg = "is in binding site", "" !== e.desc && (t.tooltipMsg += " of " + e.desc), "" === e.desc ? "undefined" != typeof s["null"] ? t.color = s["null"] : (t.color = n.colorGradients.greenStack[u], s["null"] = t.color, u++) : "undefined" != typeof s[e.desc] ? t.color = s[e.desc] : (t.color = n.colorGradients.greenStack[u], s[e.desc] = t.color, u++), u === l && (u = 0), r.shapeContent.push(t)
        }), a.push(r)
       }
      }), a
     },
     _ = function(e, t, r, i, o, a, s) {
      var u = [],
       l = {
        shape: "path",
        shapeGroupClass: r,
        shapeClass: "hetConformer" + t + "Path" + o,
        shapeHeight: 15,
        marginTop: 0,
        showTooltip: !0,
        shapeContent: []
       },
       c = {
        shape: "path",
        shapeGroupClass: r,
        shapeClass: "altConformer" + t + "Path" + o,
        shapeHeight: 15,
        marginTop: 0,
        showTooltip: !0,
        shapeContent: []
       },
       h = {
        shape: "text",
        shapeGroupClass: r,
        shapeClass: "showTextOnZoom singleTextEle altConformer_text_" + t + "Path" + o,
        shapeHeight: 15,
        marginTop: 2,
        showTooltip: !0,
        shapeContent: []
       };
      return angular.forEach(e, function(e) {
       e.entity_id == i && angular.forEach(e.chains, function(e) {
        e.chain_id == t && angular.forEach(e.residues, function(e) {
         if ("undefined" != typeof e.multiple_conformers) {
          var r = {};
          angular.forEach(e.multiple_conformers, function(e) {
           "undefined" == typeof r[e.chem_comp_id] && (r[e.chem_comp_id] = {}), r[e.chem_comp_id][e.alt_code] = 1
          });
          var i = "";
          e.struct_asym_id = s, e.chain_id = t, Object.keys(r).length > 1 ? (i = " has microheterogeneity.", l.shapeContent.push({
           pathRange: [
            [e.residue_number - 1 - .5, 0],
            [e.residue_number - 1 + .5, 0]
           ],
           tooltipMsg: i,
           tooltipPosition: "postfix",
           elementType: "Het Conformer",
           pathData: e,
           color: n.specificColors.airForceBlue
          })) : (i = " has alternate conformers.", c.shapeContent.push({
           pathRange: [
            [e.residue_number - 1 - .5, 0],
            [e.residue_number - 1 + .5, 0]
           ],
           tooltipMsg: i,
           tooltipPosition: "postfix",
           elementType: "alternate conformer",
           pathData: e,
           color: n.specificColors.airForceBlue
          })), h.shapeContent.push({
           textRange: [
            [e.residue_number - 1, 0],
            [4, 0]
           ],
           tooltipMsg: i,
           tooltipPosition: "postfix",
           textString: a[e.residue_number - 1],
           pathData: e
          })
         }
        })
       })
      }), l.shapeContent.length > 0 && u.push(l), c.shapeContent.length > 0 && u.push(c), h.shapeContent.length > 0 && u.push(h), u
     },
     S = {
      groups: [],
      shapes: [],
      pathLeftLabels: []
     },
     C = 0,
     E = 0;
    if ("undefined" != typeof r[l].entities) {
     S = {
      options: {
       seqId: l,
       seqStr: ""
      },
      groups: [{
       label: "",
       "class": "moleculeGrp",
       parentGroup: "",
       marginTop: 8
      }, {
       label: "",
       "class": "molPathGrp",
       parentGroup: "moleculeGrp",
       marginTop: 1
      }, {
       label: "",
       "class": "molSeqGrp",
       parentGroup: "moleculeGrp",
       marginTop: 14
      }],
      shapes: [{
       shape: "path",
       shapeGroupClass: "molPathGrp",
       shapeClass: "seqPath molPath",
       shapeHeight: 15,
       marginTop: 0,
       showTooltip: !0,
       shapeContent: [{
        pathRange: [
         [0, 0],
         [0, 0]
        ],
        pathData: {
         pdbId: l,
         pdbSeq: ""
        },
        elementType: "molecule",
        color: n.specificColors.lightGray,
        tooltipMsg: "<br><strong>" + l + "</strong>",
        tooltipPosition: "postfix"
       }]
      }, {
       shape: "sequence",
       shapeGroupClass: "molSeqGrp",
       shapeClass: "molSeq",
       shapeContent: {
        pathRange: [
         [0, 0],
         [0, 0]
        ],
        pathData: {
         pdbId: l
        },
        elementType: "molecule",
        color: n.specificColors.lightGray,
        tooltipMsg: "<br><strong>" + l + "</strong>",
        tooltipPosition: "postfix"
       },
       showTooltip: !0
      }],
      pdbIdArr: [],
      pathLeftLabels: []
     };
     var T = m(r[l].entities, c);
     S.options.seqStr = S.shapes[0].shapeContent[0].pathData.pdbSeq = T.sequence, S.shapes[0].shapeContent[0].pathRange[1][0] = T.sequence.length
    }
    var M = [];
    "undefined" != typeof r[l].mappings && "undefined" != typeof r[l].mappings.Pfam && M.push("Pfam"), "undefined" != typeof r[l].isoforms && M.push("UniProt"), "undefined" != typeof r[l].rfamMappings && "undefined" != typeof r[l].rfamMappings.Rfam && angular.forEach(r[l].rfamMappings.Rfam, function(e, t) {
     M.push("Rfam_" + t)
    }), M.length > 0 && angular.forEach(M, function(e) {
     var t = e,
      i = e.toLowerCase(),
      o = null;
     if ("UniProt" === e) o = r[l].isoforms[e];
     else if (RegExp("Rfam_").test(e)) {
      var a = e.split("_"),
       s = {};
      s[a[1]] = r[l].rfamMappings.Rfam[a[1]], o = s, t = "Rfam"
     } else o = r[l].mappings[e];
     if ("undefined" != typeof o && o) {
      var u = g(o, c, i, n.colorBox3[E], d),
       h = u.unpShapeObj;
      "undefined" != typeof h.shapeContent && h.shapeContent.length > 0 && (S.groups.push({
       label: l,
       "class": i + "PathGrp" + l,
       parentGroup: "",
       marginTop: C + 20
      }), S.shapes.push(h), S.shapes.push(u.mappingTextObj), C += 30, E++, S.pathLeftLabels.push(t)), u.idArr.length > 0 && "UniProt" === e && (S.options.uniprotIdArr = u.idArr)
     }
    });
    var A = "",
     P = "other";
    if ("undefined" != typeof r[l].polymerCoveragePerChain) A = r[l].polymerCoveragePerChain, P = "best";
    else if ("undefined" != typeof r[l].polymerCoverage) {
     A = r[l].polymerCoverage;
     for (var R = ["scopPathGrp" + l, "cathPathGrp" + l, "secStrPathGrp" + l, "quality" + p + "PathGrp" + l], I = 0; 4 > I; I++) {
      var k = h.select("." + R[I]);
      if (null !== k[0][0]) {
       var D = k.attr("transform"),
        V = parseInt(D.substring(D.lastIndexOf(",") + 1, D.lastIndexOf(")"))) - (20 - u);
       V > C && (C = V)
      }
     }
    }
    if ("undefined" != typeof A && "" !== A) {
     var L = b(A.molecules, c, l, P, d);
     L.length > 0 && angular.forEach(L, function(e, t) {
      var u = e.shapeContent[0].pathData.chain_id,
       h = e.shapeGroupClass;
      "other" === P && (h = e.shapeGroupClass + " otherChainPaths"), S.groups.push({
       label: l,
       "class": h,
       parentGroup: "",
       marginTop: C + 20
      }), S.shapes.push(e), S.shapes.push({
       shape: "sequence",
       marginTop: 13,
       shapeGroupClass: L[t].shapeGroupClass,
       shapeClass: "chain" + u,
       shapeColour: n.specificColors.airForceBlue,
       shapeContent: e.shapeContent[0],
       showTooltip: !0
      });
      var p = 0;
      "undefined" != typeof f ? p = f - 1 : "undefined" != typeof S && "undefined" != typeof S.options && "undefined" != typeof S.options.seqStr && (p = S.options.seqStr.split("").length - 1);
      var d = w(e.shapeContent, e.shapeGroupClass, u, l, p);
      d && S.shapes.push(d), C += 30, E++, S.pathLeftLabels.push("Chain " + u);
      var m = "",
       g = "quality" + u + "PathGrp" + l;
      if ("undefined" != typeof r[l].outliers ? m = r[l].outliers : "undefined" != typeof i && "" !== i && (m = i, g = "quality" + u + "PathGrp" + l + " otherChainPaths"), "undefined" != typeof m) {
       var v = y(m.molecules, e.shapeContent, c, l);
       v && (S.groups.push({
        label: l,
        "class": g,
        parentGroup: "",
        marginTop: C + 20
       }), S.shapes = S.shapes.concat(v), C += 30, E++, S.pathLeftLabels.push("Quality"))
      }
      var b = "",
       T = e.shapeContent[0].pathData.struct_asym_id,
       M = "bindingSite" + T + "PathGrp" + l;
      if ("undefined" != typeof r[l].bindingSites ? b = r[l].bindingSites : "undefined" != typeof o && "" !== o && (b = o), "undefined" != typeof b) {
       var A = x(b, T, c, l);
       A.length > 0 && (S.groups.push({
        label: l,
        "class": M,
        parentGroup: e.shapeGroupClass,
        marginTop: 0
       }), S.shapes = S.shapes.concat(A))
      }
      var R = "";
      if ("undefined" != typeof r[l].residueListing ? R = r[l].residueListing : "undefined" != typeof a && "" !== a && (R = a), "undefined" != typeof R) {
       var I = [];
       "undefined" != typeof S.options && "undefined" != typeof S.options.seqStr && "" !== S.options.seqStr ? I = S.options.seqStr.split("") : "undefined" != typeof s && s && (I = s);
       var k = _(R.molecules, u, e.shapeGroupClass, c, l, I, T);
       k.length > 0 && (S.groups.push({
        label: l,
        "class": e.shapeGroupClass,
        parentGroup: "",
        marginTop: 0
       }), S.shapes = S.shapes.concat(k))
      }
     })
    }
    if ("undefined" != typeof r[l].secStrutures && "undefined" != typeof r[l].secStrutures.molecules && r[l].secStrutures.molecules) {
     var B = v(r[l].secStrutures.molecules, c, d);
     B.length > 0 && (S.groups.push({
      label: l,
      "class": "secStrPathGrp" + l,
      parentGroup: "",
      marginTop: C + 20
     }), S.shapes = S.shapes.concat(B), C += 30, S.pathLeftLabels.push("Sec. Str."))
    }
    if ("undefined" != typeof r[l].mappings) {
     var O = ["CATH", "SCOP","RiboVision", "RiboVision1"];
     angular.forEach(O, function(e) {
      var t = e.toLowerCase();
      if ("undefined" != typeof r[l].mappings[e] && r[l].mappings[e]) {
       var i = g(r[l].mappings[e], c, t, n.colorBox3[E], d),
        o = i.unpShapeObj;
       "undefined" != typeof o.shapeContent && o.shapeContent.length > 0 && (S.groups.push({
        label: l,
        "class": t + "PathGrp" + l,
        parentGroup: "",
        marginTop: C + 20
       }), S.shapes.push(o), S.shapes.push(i.mappingTextObj), C += 30, E++, S.pathLeftLabels.push(e))
      }
     })
    }
    if ("undefined" != typeof r[l].mutatedResidues) {
     var N = e("pdbModifiedResFilter")(r[l].mutatedResidues, {
      entityId: c
     }, l, 15, 1, 5, "mutatedResidues", "pdbeSeq");
     N.length > 0 && (S.groups.push({
      label: "",
      "class": "mutationGrp mutationGrp_" + l,
      parentGroup: "moleculeGrp",
      marginTop: 8
     }), S.shapes = S.shapes.concat(N))
    }
    if ("undefined" != typeof r[l].modifiedResidues) {
     var N = e("pdbModifiedResFilter")(r[l].modifiedResidues, {
      entityId: c
     }, l, 15, 1, 5, "modifiedResidues", "pdbeSeq");
     N.length > 0 && (S.groups.push({
      label: "",
      "class": "mutationGrp mutationGrp_" + l,
      parentGroup: "moleculeGrp",
      marginTop: 8
     }), S.shapes = S.shapes.concat(N))
    }
    return t.setPathColorIndex(E), S
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.sequence.view.services", ["pdb.common.services"]).service("seqViewerService", ["$http", "$q", "$filter", "commonServices", function() {
   this.pathColorIndex = 0, this.setPathColorIndex = function(e) {
    this.pathColorIndex = e
   }, this.getPathColorIndex = function() {
    return this.pathColorIndex
   }
  }])
 }(), angular.module("template/sequenceView/tempUniPdb.html", []).run(["$templateCache", function(e) {
  e.put("template/sequenceView/tempUniPdb.html", '<div class="tempUniPDBWrapper"></div>')
 }]), angular.module("template/sequenceView/pdb.html", []).run(["$templateCache", function(e) {
  e.put("template/sequenceView/pdb.html", '<div class="button-group" ng-show="showViewBtn" ng-style="styles.btnGrp"><ul style="float:right"><li><a ng-click="activeViewBtn = \'compact\'" ng-class="{\'active\' : activeViewBtn == \'compact\'}" title="Compact View" href="javascript:void(0);">Compact</a></li><li><a ng-click="activeViewBtn = \'expanded\'" ng-class="{\'active\' : activeViewBtn == \'expanded\'}" title="Expanded View" href="javascript:void(0);">Expanded</a></li></ul></div><div class="seqViewerWrapper" ng-style="styles.wrapper"><div ng-style="seqViewerOverlay" ng-show="overlayText != \'\'"><span ng-style="seqViewerOverlayMessage">{{overlayText}}</span></div><div ng-style="styles.labelsBg">&nbsp;</div><div class="loadMoreChainCl" ng-style="styles.loadMoreStyle" ng-show="showLoadMoreLink"><a href="javascript:void(0);" class="loadMoreBtn" ng-click="loadMoreChains()">load more chains</a></div><div class="loadMoreChainCl chainHideShowBtnCl" ng-style="styles.loadMoreStyle" ng-show="chiansHideShowBtn"><a href="javascript:void(0);" class="loadMoreBtn" ng-click="hideShowChainsFn()">Show {{chainsViewStatus}} chains</a></div><div class="topSection" ng-style="styles.topSection"><div class="topLeftSection" ng-style="styles.leftSecStyle" style="height:100%" ng-show="showLabels"><div class="pdbPathLeftLabel" style="margin-top:42px">Molecule</div></div><a class="SeqScrollArrow" ng-style="styles.scrollArrowLeft" href="javascript:void(0);" title="Scroll Left"><span ng-mouseup="stopMovingPan()" ng-mousemove="stopMovingPan()" ng-mousedown="movePan(50)" class="icon-black" data-icon="&lt;"></span></a><div class="topRightSection" style="position:relative"><svg class="topSvg" ng-style="styles.topSvg"><g class="scaleGrp" transform="translate(10,25)"><g class="x axis"></g></g></svn></div><a class="SeqScrollArrow" ng-style="styles.scrollArrowRight" href="javascript:void(0);" title="Scroll Right"><span ng-mouseup="stopMovingPan()" ng-mousemove="stopMovingPan()" ng-mousedown="movePan(-50)" class="icon-black" data-icon="&gt;"></span></a></div><div class="bottomSection" ng-style="styles.bottomSection"><div class="bottomLeftSection" ng-style="styles.leftSecStyle" ng-show="showLabels"><div class="pdbPathLeftLabel" ng-repeat="leftLabel in pathLeftLabels track by $index" ng-style="{\'margin-top\': $index == 0 ? \'13px\' : \'20px\', \'height\': \'10px\', \'line-height\': \'10px\'}">{{leftLabel}}</div><div class="pdbPathLeftLabel moreChainLabels" ng-repeat="moreChainLabel in pathMoreLeftLabels track by $index" ng-style="{\'margin-top\': \'20px\', \'height\': \'10px\', \'line-height\': \'10px\'}">{{moreChainLabel}}</div></div><div class="bottomRightSection" style="position:relative"><svg class="bottomSvg" ng-style="styles.bottomSvg" ><g class="shapesGrp" transform="translate(10,-17)"><rect class="seqSvgBg" x="0" y="0" fill="white" stroke="none" ng-style="styles.bottomSvg" ></rect></g></svg></div></div></div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.topology.viewer", ["d3Core", "pdb.common.services"]).directive("pdbTopologyViewer", ["d3", "$filter", "commonServices", "$document", function(e, t, n, r) {
   return {
    restrict: "EAC",
    scope: {
     entryId: "@",
     entityId: "@",
     height: "@",
     width: "@",
     entropy: "@",
     subscribeEvents: "@"
    },
    templateUrl: "template/topologyViewer/topologyViewer.html",
    link: function(t, i) {
     if (t.topoViewerOverlay = {
       width: "90%",
       height: "100%",
       "background-color": "rgba(0,0,0,0.5)",
       color: "#fff",
       "z-index": 1,
       position: "absolute",
       "text-align": "center",
       padding: "0 5%",
       "webkit-box-sizing": "content-box",
       "-moz-box-sizing": "content-box",
       "box-sizing": "content-box"
      }, t.topoViewerOverlayMessage = {
       display: "inline-block",
       "margin-top": "15%",
       "font-size": "12px"
      }, t.overlayText = "Loading...", "undefined" == typeof t.subscribeEvents && (t.subscribeEvents = "true"), t.config = {
       wrapperWidth: "100%",
       wrapperHeigth: "100%",
       margin: 10,
       wrapperBorder: 2,
       bottomMenuHeight: 27
      }, t.pdbevents = n.createNewEvent(["PDB.topologyViewer.click", "PDB.topologyViewer.mouseover", "PDB.topologyViewer.mouseout"]), "undefined" != typeof t.height && (t.config.wrapperHeigth = t.height + "px"), "undefined" != typeof t.width && (t.config.wrapperWidth = t.width + "px"), t.config.svgHeigth = "90%", t.config.svgWidth = "100%", t.styles = {
       wrapper: {
        width: t.config.wrapperWidth,
        height: t.config.wrapperHeigth,
        "webkit-box-sizing": "content-box",
        "-moz-box-sizing": "content-box",
        "box-sizing": "content-box",
        position: "relative",
        overflow: "hidden"
       },
       loader: {
        width: t.config.wrapperWidth,
        height: t.config.wrapperHeigth,
        "webkit-box-sizing": "content-box",
        "-moz-box-sizing": "content-box",
        "box-sizing": "content-box",
        position: "absolute"
       },
       topoSvgWrapper: {
        position: "relative",
        "webkit-box-sizing": "content-box",
        "-moz-box-sizing": "content-box",
        "box-sizing": "content-box",
        width: "100%",
        height: "86%"
       },
       topoSvg: {
        width: "100%",
        height: "100%",
        display: "inline-block",
        position: "absolute",
        top: 0,
        left: 0
       },
       bottomMenu: {
        "border-top": "1px solid #999",
        background: "#DCECD7 none repeat scroll 0% 0%",
        height: "10%",
        "font-weight": "bold",
        "border-radius": "0px 0px 2px 2px",
        "webkit-box-sizing": "content-box",
        "-moz-box-sizing": "content-box",
        "box-sizing": "content-box",
        position: "relative",
        width: "100%"
       },
       bottomMenuSelectBox: {
        "font-weight": "normal"
       }
      }, "undefined" == typeof t.entryId || "" == t.entryId) return t.overlayText = "Please specify 'entry-id'", void 0;
     if (t.entryId = t.entryId.toLowerCase(), "undefined" == typeof t.entityId || "" == t.entityId) return t.overlayText = "Please specify 'entity-id'", void 0;
     t.domainTypes = [{
      label: "Annotation",
      data: null
     }];
     var o = e.select(i[0]),
      a = o.select(".topoSvg");
	  
	
     a.attr("preserveAspectRatio", "xMidYMid meet").attr("viewBox", "0 0 100 90");
     var s = e.select(".pdbTopologyTooltip");
	  
     null == s[0][0] && (s = e.select("body").append("div").attr("class", "pdbTopologyTooltip"));
     var u = function() {
      function r() {
       var r = {
        green: n.specificColors.qualityGreen,
		blue: n.specificColors.qualityBlue,
        red: n.specificColors.qualityRed,
        yellow: n.specificColors.qualityYellow,
        orange: n.specificColors.burntOrangeBright,
        lightGray: n.specificColors.lightGray
       };
       this.defaultColours = {
        domainSelection: e.rgb(255, 0, 0),
		qualityWhite: e.rgb(255, 255, 255),
        mouseOver: e.rgb(r.lightGray[0], r.lightGray[1], r.lightGray[2]),
        borderColor: e.rgb(0, 0, 0),
        qualityGreen: e.rgb(r.green[0], r.green[1], r.green[2]).brighter(),
		qualityBlue: e.rgb(r.blue[0], r.blue[1], r.blue[2]).brighter(),
        qualityRed: e.rgb(r.red[0], r.red[1], r.red[2]).brighter(),
        qualityYellow: e.rgb(r.yellow[0], r.yellow[1], r.yellow[2]).brighter(),
		qualityRiboVision: e.rgb(r.yellow[0], r.yellow[1], r.yellow[2]).brighter(),
        qualityOrange: e.rgb(r.orange[0], r.orange[1], r.orange[2]).brighter()
       }, this.entryId = t.entryId.toLowerCase(), this.getTopologyApiData()
      }
      return r.prototype.getPDBSequenceArray = function(e) {
       for (var n = e.length, r = 0; n > r; r++) e[r].entity_id == t.entityId && (this.sequenceArr = e[r].sequence.split(""))
      }, r.prototype.getTopologyApiData = function() {
       var e = this; 
       this.apiResult = {}; 
       this.entropy = t.entropy;
       var r = n.createPromise([e.entryId], ["observedResidueRatio"]);
       n.combinedDataGrabber(r, e.entryId, ["observedResidueRatio"], !0).then(function(r) {
        if ("undefined" == typeof r[e.entryId].observedResidueRatio[t.entityId]) return t.overlayText = "Error: Entity not found!", t.$apply(), !1;
        t.bestChainId = r[e.entryId].observedResidueRatio[t.entityId][0].chain_id, t.bestStructAsymId = r[e.entryId].observedResidueRatio[t.entityId][0].struct_asym_id;
        var i = ["entities", "mappings", "topology", "outliers", "ribovision", "ribovision1", "entropy", "polymerCoveragePerChain"],
         o = n.createPromise([e.entryId], i, t.bestChainId, [e.entropy]);
         console.log(o)
        n.combinedDataGrabber(o, e.entryId, i, !0).then(function(n) {
         var r = !1;
         if ("undefined" == typeof n[e.entryId].topology || null == n[e.entryId].topology) r = !0;
         else if ("undefined" == typeof n[e.entryId].topology[t.entityId] || "undefined" == typeof n[e.entryId].topology[t.entityId][t.bestChainId]) r = !0;
         else {
          var i = n[e.entryId].topology[t.entityId][t.bestChainId];
          0 == i.coils.length && 0 == i.strands.length && 0 == i.helices.length && (r = !0)
         }
         return r ? (e.apiResult = {
          status: "error",
          data: "Combined api call failed"
         }, t.overlayText = "Topology Data Not Available!", t.$apply(), !1) : (e.apiResult = {
          status: "data",
          data: n
         }, e.getPDBSequenceArray(n[e.entryId].entities), e.drawTopologyStructures(), e.createDomainDropdown(), void 0)
        }, function() {
         return t.overlayText = "Error: API call failed!", t.$apply(), !1
        })
       }, function() {
        return t.overlayText = "Error: Observed residue ratio (best chain) API failed!", t.$apply(), !1
       })
      }, r.prototype.chunkArray = function(e, t) {
       for (var n = [], r = 0, i = e.length; i > r;) n.push(e.slice(r, r += t));
       return n
      }, r.prototype.getDomainRange = function() {
       var n = this,
        r = [];
       angular.forEach(this.apiResult.data[n.entryId].topology[t.entityId][t.bestChainId], function(e) {
        angular.forEach(e, function(e) {
         "undefined" != typeof e.path && e.path.length > 0 && (r = r.concat(n.chunkArray(e.path, 2)))
        })
       }), this.xScale = e.scale.linear().domain([e.min(r, function(e) {
        return e[0]
       }), e.max(r, function(e) {
        return e[0]
       })]).range([1, parseInt(t.config.svgWidth) - 1]), this.yScale = e.scale.linear().domain([e.min(r, function(e) {
        return e[1]
       }), e.max(r, function(e) {
        return e[1]
       })]).range([1, parseInt(t.config.svgHeigth) - 1]), this.zoom = e.behavior.zoom().on("zoom", function() {
        n.zoomDraw(n)
       }).x(this.xScale).y(this.yScale)
      }, r.prototype.drawStrandSubpaths = function(e, t, n) {
       for (var r = this, i = t - e + 1, o = (r.scaledPointsArr[7] - r.scaledPointsArr[1]) / i, s = [], u = 0; i > u; u++) {
        var l = {
         type: "strands",
         elementIndex: n
        };
        0 === u ? (l.residue_number = e, l.pathData = [r.scaledPointsArr[4], r.scaledPointsArr[1], r.scaledPointsArr[4], r.scaledPointsArr[1] + o, r.scaledPointsArr[8], r.scaledPointsArr[1] + o, r.scaledPointsArr[8], r.scaledPointsArr[13]]) : (l.residue_number = e + u, l.pathData = [s[u - 1].pathData[2], s[u - 1].pathData[3], s[u - 1].pathData[2], s[u - 1].pathData[3] + o, s[u - 1].pathData[4], s[u - 1].pathData[5] + o, s[u - 1].pathData[4], s[u - 1].pathData[5]]), s.push(l)
       }
       a.selectAll(".subpath-strands" + n).remove(), a.selectAll(".subpath-strands" + n).data(s).enter().append("path").attr("class", function(e) {
        return "strandsSubPath subpath-strands" + n + " topo_res_" + e.residue_number 
       }).attr("d", function(e) {
        return "M " + e.pathData.join(" ") + " Z"
       }).attr("stroke", "#111").attr("stroke-width", "0").attr("fill", "white").attr("fill-opacity", "0").on("mouseover", function(e) {
        r.mouseoverAction(this, e)
       }).on("mousemove", function(e) {
        r.mouseoverAction(this, e)
       }).on("mouseout", function(e) {
        r.mouseoutAction(this, e)
       }).on("click", function(e) {
        r.clickAction(e)
       })
      }, r.prototype.drawHelicesSubpaths = function(e, t, n, r) {
       var i = this;
       r = 0;
       var o = 5,
        s = r - o;
       i.scaledPointsArr[3] > i.scaledPointsArr[9] && (s = r + o);
       var u = t - e + 1;
       0 === r && (s = 0);
       var l = (i.scaledPointsArr[9] - s - i.scaledPointsArr[3]) / u;
       if (0 === r) {
        var c = a.select(".helices" + n).node().getBBox().height,
         h = c / u;
        c -= h, l = (c - h / 2) / u;
        var p = l - h / 10;
        i.scaledPointsArr[3] > i.scaledPointsArr[9] && (p = -(c + h / 3))
       }
       var d = [],
        f = {};
		
		
		
       if (0 === r)
        for (var m = 0; u > m; m++) f = {
         type: "helices"
        }, 0 === m ? (f.residue_number = i.scaledPointsArr[3] > i.scaledPointsArr[9] ? t : e, f.pathData = [i.scaledPointsArr[0], i.scaledPointsArr[3] + p, i.scaledPointsArr[4], i.scaledPointsArr[3] + p, i.scaledPointsArr[4], i.scaledPointsArr[3] + p + l, i.scaledPointsArr[0], i.scaledPointsArr[3] + p + l]) : (f.residue_number = i.scaledPointsArr[3] > i.scaledPointsArr[9] ? t - m : e + m, f.pathData = [d[m - 1].pathData[6], d[m - 1].pathData[7], d[m - 1].pathData[4], d[m - 1].pathData[5], d[m - 1].pathData[4], d[m - 1].pathData[5] + l, d[m - 1].pathData[6], d[m - 1].pathData[5] + l]), d.push(f);
       else
        for (var m = 0; u > m; m++) f = {
         type: "helices",
         elementIndex: n
        }, 0 === m ? (f.residue_number = e, f.pathData = [i.scaledPointsArr[0], i.scaledPointsArr[3] + s / 2, i.scaledPointsArr[4], i.scaledPointsArr[3] + s / 2, i.scaledPointsArr[4], i.scaledPointsArr[3] + l + s / 2, i.scaledPointsArr[0], i.scaledPointsArr[3] + l + s / 2]) : (f.residue_number = e + m, f.pathData = [d[m - 1].pathData[6], d[m - 1].pathData[7], d[m - 1].pathData[4], d[m - 1].pathData[5], d[m - 1].pathData[4], d[m - 1].pathData[5] + l, d[m - 1].pathData[6], d[m - 1].pathData[5] + l]), d.push(f);
       a.selectAll(".subpath-helices" + n).remove(), a.selectAll(".subpath-helices" + n).data(d).enter().append("path").attr("class", function(e) {
       // return "helicesSubPath subpath-helices" + n + " topo_res_" + e.residue_number, console.log(a.selectAll(".subpath-helices" + n).data(d).enter().append("path"));
		//return "helicesSubPath subpath-helices" + n + " topo_res_" + e.residue_number, console.log(a.selectAll(".subpath-helices" + n).data(d).enter().append("path"));
       return "helicesSubPath subpath-helices" + n + " topo_res_" + e.residue_number 
	   
	   }).attr("d", function(e) {
        return "M" + e.pathData.join(" ") + " Z"
       }).attr("stroke", "#111").attr("stroke-width", "0").attr("fill", "white").attr("fill-opacity", "0").on("mouseover", function(e) {
        i.mouseoverAction(this, e)
       }).on("mousemove", function(e) {
        i.mouseoverAction(this, e)
       }).on("mouseout", function(e) {
        i.mouseoutAction(this, e)
       }).on("click", function(e) {
        i.clickAction(e)
       })
      }, r.prototype.drawCoilsSubpaths = function(e, n, r) {
       var i = this,
        o = a.select(".coils" + r),
        s = n - e + 1,
        u = o.node().getTotalLength(),
        l = u / s,
        c = [],
        h = void 0,
        p = void 0,
        d = {};
       if (1 === s) d = {
        residue_number: e,
        type: "coils",
        pathData: i.scaledPointsArr,
        elementIndex: r
       }, c.push(d);
       else
        for (var f = 0; s > f; f++) {
         var m = l * (f + 1),
          g = o.node().getPointAtLength(m),
          v = o.node().getPathSegAtLength(m);
         d = {
          residue_number: e + f,
          type: "coils",
          elementIndex: r
         }, 1 === v ? d.pathData = i.scaledPointsArr.slice(0, 2) : (void 0 === p ? d.pathData = i.scaledPointsArr.slice(0, 2 * v) : (d.pathData = i.scaledPointsArr.slice(2 * p, 2 * v), d.pathData.unshift(h.x, h.y)), h = g, p = v), d.pathData = d.pathData.concat([g.x, g.y]), c.push(d)
        } - 1 !== e && -1 !== n && (a.selectAll(".subpath-coils" + r).remove(), a.selectAll(".subpath-coils" + r).data(c).enter().append("path").attr("class", function(e) {
         return "coilsSubPath subpath-coils" + r + " topo_res_" + e.residue_number
        }).attr("d", function(e) {
         return "M " + e.pathData.join(" ")
        }).attr("stroke", i.defaultColours.borderColor).attr("stroke-width", .3).attr("fill", "none").attr("stroke-opacity", "1").on("mouseover", function(e) {
         i.mouseoverAction(this, e)
        }).on("mousemove", function(e) {
         i.mouseoverAction(this, e)
        }).on("mouseout", function(e) {
         i.mouseoutAction(this, e)
        }).on("click", function(e) {
         i.clickAction(e)
        }), a.selectAll(".coils" + r).attr("stroke-opacity", 0));

		   
       var y = this.apiResult.data[i.entryId].topology[t.entityId][t.bestChainId].terms,
        b = this.apiResult.data[i.entryId].topology[t.entityId][t.bestChainId].coils.length;
		
       if (0 === r) a.selectAll(".terminal_N").remove(), a.selectAll(".terminal_N").data([y[0]]).enter().append("text").attr("class", "terminals terminal_N").attr("text-anchor", "middle").text("N").attr("x", c[0].pathData[0]).attr("y", c[0].pathData[1]).attr("stroke", "#0000ff").attr("stroke-width", "0.3").attr("font-size", 3 * i.zoom.scale() + "px").attr("style", "-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: normal; font-family: Arial;");
       else if (r === b - 1) {
        var w = c[s - 1].pathData.length,
         x = -2;
        c[s - 1].pathData[w - 1] > c[s - 1].pathData[w - 3] && (x = 2), a.selectAll(".terminal_C").remove(), a.selectAll(".terminal_C").data([y[1]]).enter().append("text").attr("class", "terminals terminal_N").attr("text-anchor", "middle").text("C").attr("x", c[s - 1].pathData[w - 2]).attr("y", c[s - 1].pathData[w - 1] + x).attr("stroke", "#ff0000").attr("stroke-width", "0.3").attr("font-size", 3 * i.zoom.scale() + "px").attr("style", "-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; line-height: normal; font-family: Arial;")
       }
      }, r.prototype.drawStrandMaskShape = function(e) {
       var t = this,
        n = t.scaledPointsArr,
        r = .3,
        i = [7, 8, 10, 12],
        o = [0, 1, 2, 3, 4, 5, 9, 11, 13];
       n[0] > n[6] && (i = [0, 1, 2, 3, 4, 5, 9, 11, 13], o = [7, 8, 10, 12]);
       for (var s = i.length, u = 0; s > u; u++) n[i[u]] = n[i[u]] + r;
       for (var l = o.length, c = 0; l > c; c++) n[o[c]] = n[o[c]] - r;
       n[14] = n[8], n[15] = n[13], n[16] = n[8], n[17] = n[7], n[18] = n[4], n[19] = n[7], n[20] = n[4], n[21] = n[1], a.selectAll(".maskpath-strands" + e).remove(), a.selectAll(".maskpath-strands" + e).data([n]).enter().append("path").attr("class", function() {
        return "strandMaskPath maskpath-strands" + e
       }).attr("d", function() {
        return "M" + n.join(" ") + "Z"
       }).attr("stroke", "#111").attr("stroke-width", .3).attr("fill", "white").attr("stroke-opacity", 0)
      }, r.prototype.drawHelicesMaskShape = function(e) {
       var t = .3,
        n = [
         [this.scaledPointsArr[0] - t, this.scaledPointsArr[1], this.scaledPointsArr[2], this.scaledPointsArr[3] - t, this.scaledPointsArr[4] + t, this.scaledPointsArr[5], this.scaledPointsArr[4] + t, this.scaledPointsArr[3], this.scaledPointsArr[0] - t, this.scaledPointsArr[3]],
         [this.scaledPointsArr[6] + t, this.scaledPointsArr[7], this.scaledPointsArr[8], this.scaledPointsArr[9] + t, this.scaledPointsArr[10] - t, this.scaledPointsArr[11], this.scaledPointsArr[10] - t, this.scaledPointsArr[9], this.scaledPointsArr[6] + t, this.scaledPointsArr[9]]
        ];
       this.scaledPointsArr[3] > this.scaledPointsArr[9] && (n = [
        [this.scaledPointsArr[0] - t, this.scaledPointsArr[1], this.scaledPointsArr[2], this.scaledPointsArr[3] + 2, this.scaledPointsArr[4] + t, this.scaledPointsArr[5], this.scaledPointsArr[4] + t, this.scaledPointsArr[3], this.scaledPointsArr[0] - t, this.scaledPointsArr[3]],
        [this.scaledPointsArr[6] + t, this.scaledPointsArr[7], this.scaledPointsArr[8], this.scaledPointsArr[9] - t, this.scaledPointsArr[10] - t, this.scaledPointsArr[11], this.scaledPointsArr[10] - t, this.scaledPointsArr[9], this.scaledPointsArr[6] + t, this.scaledPointsArr[9]]
       ]), a.selectAll(".maskpath-helices" + e).remove(), a.selectAll(".maskpath-helices" + e).data(n).enter().append("path").attr("class", function() {
        return "helicesMaskPath maskpath-helices" + e
       }).attr("d", function(e) {
        return "M" + e[0] + " " + e[1] + " Q" + e[2] + " " + e[3] + " " + e[4] + " " + e[5] + " L" + e[6] + " " + e[7] + " " + e[8] + " " + e[9] + " Z"
       }).attr("stroke", "#111").attr("stroke-width", .3).attr("fill", "white").attr("stroke-opacity", 0)
      }, r.prototype.renderTooltip = function(t, n) {
       if ("show" === n) {
        var r = e.event.pageX,
         i = e.event.pageY,
         o = "Residue " + t.residue_number + " (" + this.sequenceArr[t.residue_number - 1] + ")";
        "undefined" != typeof t.tooltipMsg && (o = "undefined" != typeof t.tooltipPosition && "postfix" === t.tooltipPosition ? o + " " + t.tooltipMsg : t.tooltipMsg + " " + o), s.html(o).style("display", "block").style("top", i + 15 + "px").style("left", r + 10 + "px")
       } else s.style("display", "none")
      }, r.prototype.dispatchEvent = function(e, n, r) {
       var o = i[0];
       "undefined" != typeof r && (o = r), "undefined" != typeof n && (t.pdbevents[e].eventData = n), o.dispatchEvent(t.pdbevents[e])
      }, r.prototype.clickAction = function(e) {
       this.dispatchEvent("PDB.topologyViewer.click", {
        residueNumber: e.residue_number,
        type: e.type,
        entryId: t.entryId.toLowerCase(),
        entityId: t.entityId,
        chainId: t.bestChainId,
        structAsymId: t.bestStructAsymId
       })
      }, r.prototype.mouseoverAction = function(n, r) {
       var i = e.select(n);
       this.renderTooltip(r, "show"), ("strands" === r.type || "helices" === r.type) && i.attr("fill", this.defaultColours.mouseOver).attr("fill-opacity", "0.3"), "coils" === r.type && i.attr("stroke", this.defaultColours.mouseOver).attr("stroke-width", 1), this.dispatchEvent("PDB.topologyViewer.mouseover", {
        residueNumber: r.residue_number,
        type: r.type,
        entryId: t.entryId.toLowerCase(),
        entityId: t.entityId,
        chainId: t.bestChainId,
        structAsymId: t.bestStructAsymId
       })
      }, r.prototype.mouseoutAction = function(n, r) {
       var i = "white",
        o = 0,
        a = .3,
        s = e.select(n);
       this.renderTooltip("", "hide"), s.classed("coloured") ? (i = s.attr("data-color"), o = 1, a = 1) : "coils" === r.type && (i = this.defaultColours.borderColor), ("strands" === r.type || "helices" === r.type) && s.attr("fill", i).attr("fill-opacity", o), "coils" === r.type && s.attr("stroke", i).attr("stroke-width", a), this.dispatchEvent("PDB.topologyViewer.mouseout", {
        entryId: t.entryId.toLowerCase(),
        entityId: t.entityId,
        chainId: t.bestChainId,
        structAsymId: t.bestStructAsymId
       })
      }, r.prototype.drawTopologyStructures = function() {
       var n = this;
       this.getDomainRange(), this.scaledPointsArr = [], a.call(n.zoom).on("contextmenu", function() {
        e.event.preventDefault()
       }), angular.forEach(this.apiResult.data[n.entryId].topology[t.entityId][t.bestChainId], function(e, t) {
        angular.forEach(e, function(e, r) {
         if ("undefined" != typeof e.path && e.path.length > 0)
          if ("terms" === t);
          else {
           var o = 0;
           if ("helices" === t) {
            var s = e.path[0] + (e.path[2] - e.path[0]) / 2;
            o = 2.6 * e.minoraxis, e.path[1] > e.path[3] && (o = -2.6 * e.minoraxis);
            var u = [e.path[0], e.path[1], s, e.path[1] - o, e.path[2], e.path[1], e.path[2], e.path[3], s, e.path[3] + o, e.path[0], e.path[3]];
            e.path = u
           }
           e.secStrType = t, e.pathIndex = r;
           var l = a.selectAll("path." + t + r).data([e]).enter().append("path").attr("class", function() {
            return -1 === e.start && -1 === e.stop && "terms" !== t ? "dashedEle topologyEle " + t + " " + t + r + " topoEleRange_" + e.start + "-" + e.stop : "topologyEle " + t + " " + t + r + " topoEleRange_" + e.start + "-" + e.stop
           }).attr("d", function() {
            for (var r = "M", i = e.path.length, o = !0, a = 0; i > a; a++) {
             if ("helices" !== t || 2 !== a && 8 !== a || (r += " Q"), ("helices" === t && 6 === a || "coils" === t && e.path.length < 12 && 8 === a) && (r += " L"), o) {
              var s = n.xScale(e.path[a]);
              r += " " + s, n.scaledPointsArr.push(s)
             } else {
              var u = n.yScale(e.path[a]);
              r += " " + u, n.scaledPointsArr.push(u)
             }
             o = !o
            }
            return ("strands" === t || "helices" === t) && (r += " Z"), r
           }).attr("fill", "none").attr("stroke-width", .3).attr("stroke", n.defaultColours.borderColor); - 1 === e.start && -1 === e.stop && l.attr("stroke-dasharray", "0.9"), "strands" === t && (n.drawStrandSubpaths(e.start, e.stop, r), n.drawStrandMaskShape(r), angular.element(i[0].querySelector(".topoSvg")).append(l.node())), "helices" === t && (n.drawHelicesSubpaths(e.start, e.stop, r, o), n.drawHelicesMaskShape(r), angular.element(i[0].querySelector(".topoSvg")).append(l.node())), "coils" === t && n.drawCoilsSubpaths(e.start, e.stop, r), n.scaledPointsArr = []
          }
        })
       });

	   angular.element(i[0].querySelector(".topoSvg")).append(a.selectAll(".validationResidue").node())
      },	  r.prototype.zoomDraw = function() {
       var t = this;
       t.scaledPointsArr = [];
       var n = a.selectAll(".topologyEle"),
        r = 0,
        o = 0,
        s = 0,
        u = 0;
       n.each(function(n) {
        e.select(e.select(this).node()).attr("d", function(e) {
         r = e.pathIndex, o = e.start, s = e.stop;
         for (var n = "M", i = e.path.length, a = !0, u = 0; i > u; u++) {
          if ("helices" !== e.secStrType || 2 !== u && 8 !== u || (n += " Q"), ("helices" === e.secStrType && 6 === u || "coils" === e.secStrType && e.path.length < 12 && 8 === u) && (n += " L"), a) {
           var l = t.xScale(e.path[u]);
           n += " " + l, t.scaledPointsArr.push(l)
          } else {
           var c = t.yScale(e.path[u]);
           n += " " + c, t.scaledPointsArr.push(c)
          }
          a = !a
         }
         return ("strands" === e.secStrType || "helices" === e.secStrType) && (n += " Z"), n
        }), "helices" === n.secStrType ? (t.drawHelicesSubpaths(o, s, r, u), t.drawHelicesMaskShape(r), angular.element(i[0].querySelector(".topoSvg")).append(e.select(this).node())) : "strands" === n.secStrType ? (t.drawStrandSubpaths(o, s, r), t.drawStrandMaskShape(r), angular.element(i[0].querySelector(".topoSvg")).append(e.select(this).node())) : "coils" === n.secStrType && t.drawCoilsSubpaths(o, s, r), t.scaledPointsArr = []
       });
       var l = 0;
       a.selectAll(".validationResidue").attr("transform", function(e) {
        var t = a.select(".topo_res_" + e.residue_number),
         n = t.node().getBBox(),
         r = t.data(),
         i = {
          x: 0,
          y: 0
         };
        if ("strands" === r[0].type || "helices" === r[0].type) i = {
         x: n.x + n.width / 2,
         y: n.y + n.height / 2
        };
        else {
         var o = t.node().getPointAtLength(t.node().getTotalLength() / 2);
         i = {
          x: o.x,
          y: o.y
         }
        }
        return l = n.height / 2, "translate(" + i.x + "," + i.y + ")"
       }).attr("d", e.svg.symbol().type("circle").size(l)), a.selectAll(".residueSelection").attr("d", function() {
        return a.select(".topo_res_" + e.select(this).data()[0].residueNumber).attr("d")
       }), angular.element(i[0].querySelector(".topoSvg")).append(angular.element(i[0].querySelectorAll(".coilsSubPath"))), angular.element(i[0].querySelector(".topoSvg")).append(angular.element(i[0].querySelectorAll(".dashedEle"))), this.highlightDomain("zoom"), angular.element(i[0].querySelector(".topoSvg")).append(angular.element(i[0].querySelectorAll(".validationResidue"))), angular.element(i[0].querySelector(".topoSvg")).append(angular.element(i[0].querySelectorAll(".residueSelection")))
      }, r.prototype.changeResidueColor = function(e, t, n, r) {
       "undefined" == typeof t && (t = this.defaultColours.domainSelection);
       var i = a.select(".topo_res_" + e);
       null != i[0][0] && (i.data()[0].tooltipMsg = n, i.data()[0].tooltipPosition = r, i.attr("stroke", function(e) {
        return "coils" === e.type ? t : "#111"
       }).attr("stroke-width", function(e) {
        return "coils" === e.type ? 1 : 0
       }).attr("fill", function(e) {
        return "coils" === e.type ? "none" : t
       }).attr("fill-opacity", function(e) {
        return "coils" === e.type ? 0 : 1
       }).classed("coloured", !0).attr("data-color", t))
      }, r.prototype.showSelectionArea = function(t, n, r, i) {
       var o = this,
        s = "#000000",
        u = "#000000",
        l = "residueSelection";
       "mouseover" == i && (s = "#000000", u = "#000000", l = "residueHighlight");
       var c = .3,
        h = 0;
       "undefined" != typeof n && n !== !0 && a.selectAll("." + l).remove();
       var p = a.select(".topo_res_" + t);
       if (null != p[0][0]) {
        var d = p.node(),
         f = p.data();
        "strands" === f[0].type || "helices" === f[0].type ? "undefined" != typeof r && (u = s = 1 == r.length ? r[0] : e.rgb(r[0], r[1], r[2])) : ("undefined" != typeof r && (u = 1 == r.length ? r[0] : e.rgb(r[0], r[1], r[2])), s = "none", c = 2, h = .5), a.append("path").data([{
         residueNumber: t
        }]).attr("class", function() {
         return "mouseover" == i ? "residueHighlight highlightResidue_" + t : "residueSelection seletectedResidue_" + t
        }).attr("d", p.attr("d")).attr("fill", s).attr("fill-opacity", .5).attr("stroke", u).attr("stroke-opacity", h).attr("stroke-width", c).on("mouseover", function() {
         o.mouseoverAction(d, f[0])
        }).on("mousemove", function() {
         o.mouseoverAction(d, f[0])
        }).on("mouseout", function() {
         o.mouseoutAction(d, f[0])
        }).on("click", function() {
         o.clickAction(f[0])
        })
       }
      }, r.prototype.drawValidationShape = function(t, n, r) {
       var i = this,
        o = a.select(".topo_res_" + t);
       if (null != o[0][0]) {
        var s = o.node().getBBox(),
         u = o.data(),
         l = {
          x: 0,
          y: 0
         };
        if ("strands" === u[0].type || "helices" === u[0].type) l = {
         x: s.x + s.width / 2,
         y: s.y + s.height / 2
        };
        else {
         var c = o.node().getPointAtLength(o.node().getTotalLength() / 2);
         l = {
          x: c.x,
          y: c.y
         }
        }
        var h = {
         residue_number: t,
         tooltipMsg: "Validation issue: RSRZ <br>",
         tooltipPosition: "prefix"
        };
        a.append("path").attr("class", "validationResidue rsrz_" + t).data([h]).attr("fill", r).attr("stroke", "#000").attr("stroke-width", .3).attr("transform", function() {
         return "translate(" + l.x + "," + l.y + ")"
        }).attr("d", e.svg.symbol().type(n).size(s.height / 2)).style("display", "none").on("mouseover", function(e) {
         i.mouseoverAction(this, e)
        }).on("mousemove", function(e) {
         i.mouseoverAction(this, e)
        }).on("mouseout", function(e) {
         i.mouseoutAction(this, e)
        }).on("click", function(e) {
         i.clickAction(e)
        })
       }
      }, r.prototype.highlightResidues = function(e) {
       var t = this;
       angular.forEach(e, function(e) {
        for (var n = e.start; n <= e.end; n++) t.changeResidueColor(n, e.color, e.tooltipMsg, e.tooltipPosition)
       })
      }, r.prototype.getAnnotationFromMappings = function() {
       var e = this.apiResult.data[this.entryId].mappings;
       if ("undefined" != typeof e)
//		  t.domainTypes.push({
//		    label: "RiboVision",
//			data: i
//		  })
//		  var flagRibo = "on";
        for (var n = ["UniProt", "CATH","Pfam", "SCOP", "RiboVision", "RiboVision1"], r = 0; 5 > r; r++)
         if ("undefined" != typeof e[n[r]] && !angular.equals({}, e[n[r]])) {
          var i = [];
          angular.forEach(e[n[r]], function(e) {
           angular.forEach(e.mappings, function(e) {
            e.entity_id == t.entityId && e.chain_id == t.bestChainId && i.push({
             start: e.start.residue_number,
             end: e.end.residue_number,
             color: void 0
            })
           })
          }), i.length > 0 && t.domainTypes.push({
           label: n[r],
           data: i
          })
         }
      }, r.prototype.getChainStartAndEnd = function() {
       for (var e = this.apiResult.data[this.entryId].polymerCoveragePerChain.molecules[0].chains, n = {
         start: 0,
         end: 0
        }, r = e.length, i = 0; r > i; i++)
        if (e[i].chain_id == t.bestChainId) {
         angular.forEach(e[i].observed, function(e, t) {
          0 == t ? (n.start = e.start.residue_number, n.end = e.end.residue_number) : (e.start.residue_number < n.start && (n.start = e.start.residue_number), e.end.residue_number > n.end && (n.end = e.end.residue_number))
         });
         break
        } return n
      }, r.prototype.getAnnotationFromRiboVision = function() {  // Copied from getAnnotationFromOutliers
       var e = this,
        n = this.getChainStartAndEnd(),
        r = [{
         start: n.start,
         end: n.end,
         color: e.defaultColours.qualityBlue,
         tooltipMsg: "No validation issue reported for "
        }],
        i = [],
        o = [0],
        a = this.apiResult.data[e.entryId].ribovision;
       "undefined" != typeof a && "undefined" != typeof a.molecules && a.molecules.length > 0 && (angular.forEach(a.molecules, function(n) {
        n.entity_id == t.entityId && angular.forEach(n.chains, function(n) {
         n.chain_id == t.bestChainId && angular.forEach(n.models, function(t) {
          angular.forEach(t.residues, function(t) {
           var n = e.defaultColours.qualityYellow,
            a = "issue1";
           if (1 === t.outlier_types.length && "RSRZ" === t.outlier_types[0]) {
            n = e.defaultColours.qualityRed, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
            var s = o.indexOf(t.residue_number);
            return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
             start: parseInt(t.residue_number),
             end: parseInt(t.residue_number),
             color: e.defaultColours.qualityBlue,
             tooltipMsg: "Validation issue: RSRZ <br>",
             tooltipPosition: "prefix"
            }), o.push(t.residue_number)), void 0
           }
		    
           if (1 === t.outlier_types.length && "clashes42" === t.outlier_types[0]) {
            n = e.defaultColours.qualityYellow, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
            var s = o.indexOf(t.residue_number);
	
            return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
             start: parseInt(t.residue_number),
             end: parseInt(t.residue_number),
//             color: e.defaultColours.qualityBlue,
			 color: n,
             tooltipMsg: "Validation issue: RiboVision <br>",
             tooltipPosition: "prefix"
            }), o.push(t.residue_number)), void 0
           }		   
		   if (1 === t.outlier_types.length && "clashes84" === t.outlier_types[0]) {
            n = e.defaultColours.qualityRed, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
            var s = o.indexOf(t.residue_number);
            return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
             start: parseInt(t.residue_number),
             end: parseInt(t.residue_number),
//             color: e.defaultColours.qualityBlue,
			 color: n,
             tooltipMsg: "Validation issue: RiboVision84 <br>",
             tooltipPosition: "prefix"
            }), o.push(t.residue_number)), void 0
           }		  
           1 === t.outlier_types.length ? n = e.defaultColours.qualityGreen : 2 === t.outlier_types.length ? (n = e.defaultColours.qualityOrange, a = "issues") : (n = e.defaultColours.qualityRed, a = "issues"), o.push(t.residue_number);
           var u = "Validation " + a + ": " + t.outlier_types.join(", ") + "<br>",
            l = i.indexOf(t.residue_number);
           l > -1 && (u = "Validation issues: " + t.outlier_types.join(", ") + ", RSRZ<br>"), r.push({
            start: parseInt(t.residue_number),
            end: parseInt(t.residue_number),
            color: n,
            tooltipMsg: u,
            tooltipPosition: "prefix"
           })
          })
         })
        })
       }), r.length > 0 && t.domainTypes.push({
        label: "RiboVision",
        data: r
       }))
      }, r.prototype.getAnnotationFromRiboVision1 = function() {  // Copied from getAnnotationFromOutliers
       var e = this,
	   
	   
	   
	   
        n = this.getChainStartAndEnd(),
        r = [{
         start: n.start,
         end: n.end,
         color: e.defaultColours.qualityBlue,
         tooltipMsg: "No validation issue reported for "
        }],
        i = [],
        o = [0],
		
        a = this.apiResult.data[e.entryId].ribovision1;
        var count=0;
      


	
		
       "undefined" != typeof a && "undefined" != typeof a.molecules && a.molecules.length > 0 && (angular.forEach(a.molecules, function(n) {
        n.entity_id == t.entityId && angular.forEach(n.chains, function(n) {
         n.chain_id == t.bestChainId && angular.forEach(n.models, function(t) {
          angular.forEach(t.residues, function(t) {
           var n = e.defaultColours.qualityYellow,
            a = "issue1"; 
			
			
			
			
         //  if (1 === t.outlier_types.length && "RSRZ" === t.outlier_types[0]) {
         //   n = e.defaultColours.qualityRed, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
          //  var s = o.indexOf(t.residue_number);
          //  return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
          //   start: parseInt(t.residue_number),
          //   end: parseInt(t.residue_number),
             //color: e.defaultColours.qualityBlue,
           //  tooltipMsg: "Validation issue: RSRZ <br>",
          //   tooltipPosition: "prefix"
          //  }), o.push(t.residue_number)), void 0
          // }
		    
           if (1 === t.outlier_types.length && "RiboColor" === t.outlier_types[0]) {

           var s = o.indexOf(t.residue_number);
			console.log(t.residue_number, s);
		    var len=o.length;
			
			console.log(o, len);
         
			l = i.indexOf(t.residue_number);
			var array = JSON.parse("[" + t.alt_code + "]");
			console.log(t.residue_number, array);
			e.defaultColours.qualityRiboVision.r=array[0]; 
			e.defaultColours.qualityRiboVision.g=array[1];
			e.defaultColours.qualityRiboVision.b=array[2];

	        console.log(l);
			n = e.defaultColours.qualityRiboVision, e.drawValidationShape(t.residue_number, "circle", n)  ;
			if (l ===-1) {  r.push({start: parseInt(t.residue_number),end: parseInt(t.residue_number),color: n, tooltipMsg: "RiboVisionData",
            tooltipPosition: "prefix"}), o.push(t.residue_number) ;
			e.changeResidueColor(t.residue_number, n, "RiboVisionData",   "prefix");
			i.push(t.residue_number)
			}
			
			//console.log(qualityBlue);
			//console.log(e.defaultColours.rgb(0,0,255));
			
			
			//  var u = "Validation " + a + ": " + t.outlier_types.join(", ") + "<br>",
         //   
         //  l > -1 && (u = "Validation issues: " + t.outlier_types.join(", ") + ", RSRZ<br>"), r.push({
          //  start: parseInt(t.residue_number),
          //  end: parseInt(t.residue_number),
           // color: n,
           // tooltipMsg: u,
           // tooltipPosition: "prefix"
           //})
			

			
           // return s > -1 ? 

			//r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
            //start: parseInt(t.residue_number),
			 
            //end: parseInt(t.residue_number),
			
			
			
//             color: e.defaultColours.qualityBlue,
			 //color: n,
			// color : e.defaultColours.qualityRiboVision,
            //tooltipMsg: "Validation issue: RiboVision <br>",
             //tooltipPosition: "prefix"
            //}), 
		//	o.push(t.residue_number)
			//), 
		//	void 0;
			
			
           }		   
	//	   if (1 === t.outlier_types.length && "clashes84" === t.outlier_types[0]) {
        //    n = e.defaultColours.qualityRed, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
       //     var s = o.indexOf(t.residue_number);
        //    return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
        //     start: parseInt(t.residue_number),
        //     end: parseInt(t.residue_number),
           //color: e.defaultColours.qualityBlue,
		
        //     tooltipMsg: "Validation issue: RiboVision84 <br>",
        //     tooltipPosition: "prefix"
        //    }), o.push(t.residue_number)), void 0
       //    }		  
       //    1 === t.outlier_types.length ? n = e.defaultColours.qualityGreen : 2 === t.outlier_types.length ? (n = e.defaultColours.qualityOrange, a = "issues") : (n = e.defaultColours.qualityRed, a = "issues"), o.push(t.residue_number);
         //  var u = "Validation " + a + ": " + t.outlier_types.join(", ") + "<br>",
        //    l = i.indexOf(t.residue_number);
        //   l > -1 && (u = "Validation issues: " + t.outlier_types.join(", ") + ", RSRZ<br>"), r.push({
        //    start: parseInt(t.residue_number),
        //    end: parseInt(t.residue_number),
            //color: n,
        //    tooltipMsg: u,
         //   tooltipPosition: "prefix"
           //})
          })
         })
        })
       }), r.length > 0 && t.domainTypes.push({
        label: "RiboVision1",
        data: r
       }))
      },r.prototype.getAnnotationFromOutliers = function() {
       var e = this,
        n = this.getChainStartAndEnd(),
        r = [{
         start: n.start,
         end: n.end,
         color: e.defaultColours.qualityWhite,
         tooltipMsg: "No validation issue reported for "
        }],
        i = [],
        o = [0],
        a = this.apiResult.data[e.entryId].outliers;
       "undefined" != typeof a && "undefined" != typeof a.molecules && a.molecules.length > 0 && (angular.forEach(a.molecules, function(n) {
        n.entity_id == t.entityId && angular.forEach(n.chains, function(n) {
         n.chain_id == t.bestChainId && angular.forEach(n.models, function(t) {
          angular.forEach(t.residues, function(t) {
           var n = e.defaultColours.qualityWhite,
            a = "issue";
           if (1 === t.outlier_types.length && "RSRZ" === t.outlier_types[0]) {
            n = e.defaultColours.qualityRed, e.drawValidationShape(t.residue_number, "circle", n), i.push(t.residue_number);
            var s = o.indexOf(t.residue_number);
            return s > -1 ? r[s].tooltipMsg = r[s].tooltipMsg.replace("<br>", ", RSRZ<br>") : (r.push({
             start: parseInt(t.residue_number),
             end: parseInt(t.residue_number),
             color: e.defaultColours.qualityWhite,
             tooltipMsg: "Validation issue: RSRZ <br>",
             tooltipPosition: "prefix"
            }), o.push(t.residue_number)), void 0
           }
           1 === t.outlier_types.length ? n = e.defaultColours.qualityWhite : 2 === t.outlier_types.length ? (n = e.defaultColours.qualityOrange, a = "issues") : (n = e.defaultColours.qualityRed, a = "issues"), o.push(t.residue_number);
           var u = "Validation " + a + ": " + t.outlier_types.join(", ") + "<br>",
            l = i.indexOf(t.residue_number);
           l > -1 && (u = "Validation issues: " + t.outlier_types.join(", ") + ", RSRZ<br>"), r.push({
            start: parseInt(t.residue_number),
            end: parseInt(t.residue_number),
            color: n,
            tooltipMsg: u,
            tooltipPosition: "prefix"
           })
          })
         })
        })
       }), r.length > 0 && t.domainTypes.push({
        label: "Quality",
        data: r
       }))
      }, r.prototype.clearHighlight = function() {
       var t = this;
       a.selectAll(".coloured").each(function() {
        var n = e.select(this),
         r = n.node();
        n.data()[0].tooltipMsg = void 0, n.data()[0].tooltipPosition = void 0;
        var i = e.select(r).classed("coloured", !1),
         o = i.attr("class").split(" ");
        o.indexOf("strandsSubPath") > -1 || o.indexOf("helicesSubPath") > -1 ? i.attr("fill", "none").attr("fill-opacity", 0) : i.attr("stroke", t.defaultColours.borderColor).attr("stroke-width", .3)
       }), a.selectAll(".validationResidue").style("display", "none")
      }, r.prototype.highlightDomain = function(e) {
       null !== t.selectedDomain.data ? (this.clearHighlight(), this.highlightResidues(t.selectedDomain.data), "Quality" === t.selectedDomain.label && a.selectAll(".validationResidue").style("display", "block")) : "zoom" !== e && this.clearHighlight()
      }, r.prototype.createDomainDropdown = function() {
       this.getAnnotationFromMappings(), this.getAnnotationFromOutliers(),this.getAnnotationFromRiboVision(), this.getAnnotationFromRiboVision1(), t.selectedDomain = t.domainTypes[0], t.overlayText = "", t.$apply()
      }, r
     }();
     	 if (t.topologyComponent = new u, t.highlightDomain = function() {
       t.topologyComponent.highlightDomain()
      }, t.clearSelectionAndHighlight = function() {
       o.selectAll(".residueHighlight").remove(), o.selectAll(".residueSelection").remove(), t.selectedDomain = t.domainTypes[0], t.topologyComponent.clearHighlight()
      }, t.SaveSelectionAndHighlight = function() {
		//console.log(svgRibo);
		function getNode(n, v) {
		  n = document.createElementNS("http://www.w3.org/2000/svg", n);
		   for (var p in v) 
		   n.setAttributeNS(null, p.replace(/[0-9]/g,'o').replace(/\$/g,'d').replace(/\[/g,'b').replace(/[A-Z]/g, function(m, p, o, s) { return "-" + m.toLowerCase(); }), v[p]);
		  return n
		}
		
		
		   var svgData1=i[0].querySelector(".topoSvg")
	   console.log(svgData1); 
		


	    var svg = getNode("svg");
        document.body.appendChild(svg);

		svg.appendChild(svgData1);
		
		
		function saveSvg(svgEl, name) {
         svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
         var svgData = svgEl.outerHTML;
         var preface = '<?xml version="1.0" standalone="no"?>\r\n';
          var svgBlob = new Blob([preface, svgData], {type:"image/svg+xml;charset=utf-8"});
         var svgUrl = URL.createObjectURL(svgBlob);
         var downloadLink = document.createElement("a");
          downloadLink.href = svgUrl;
          downloadLink.download = name;
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
        }
	    saveSvg(svg, 'test.svg')	
		
      }, 
	   

	   
    t.SaveSelection = function() {
	
		function getNode(n, v) {
		  n = document.createElementNS("http://www.w3.org/2000/svg", n);
		   for (var p in v) 
		   n.setAttributeNS(null, p.replace(/[0-9]/g,'o').replace(/\$/g,'d').replace(/\[/g,'b').replace(/[A-Z]/g, function(m, p, o, s) { return "-" + m.toLowerCase(); }), v[p]);
		  return n
		}
		
		
		   var svgData1=i[0].querySelector(".topoSvg")
	   console.log(svgData1); 
		


	    var svg = getNode("svg");
        document.body.appendChild(svg);

		svg.appendChild(svgData1);
		
		
		function saveSvg(svgEl, name) {
         svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
         var svgData = svgEl.outerHTML;
         var preface = '<?xml version="1.0" standalone="no"?>\r\n';
          var svgBlob = new Blob([preface, svgData], {type:"image/svg+xml;charset=utf-8"});
         var svgUrl = URL.createObjectURL(svgBlob);
         var downloadLink = document.createElement("a");
          downloadLink.href = svgUrl;
          downloadLink.download = name;
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
        }
	    saveSvg(svg, 'test.svg')	
		
      }, "true" == t.subscribeEvents) {
      var l = ["uniprot", "pfam", "cath", "scop", "strand", "helice"],
       c = ["chain", "quality", "quality_outlier", "binding site", "alternate conformer"];
	   
	  r.on("PDB.seqViewer.mouseover", function(e) {
       if ("undefined" != typeof e.eventData) {
        if (e.eventData.entryId.toLowerCase() != t.entryId.toLowerCase() || e.eventData.entityId != t.entityId) return;
        if ("undefined" != typeof e.eventData.elementData && c.indexOf(e.eventData.elementData.elementType) > -1) {
         if (e.eventData.elementData.pathData.chain_id != t.bestChainId) return;
         t.topologyComponent.showSelectionArea(e.eventData.residueNumber, !1, void 0, "mouseover")
        } else if ("undefined" != typeof e.eventData.elementData && l.indexOf(e.eventData.elementData.elementType) > -1)
         for (var n = e.eventData.elementData.pathData.start.residue_number, r = e.eventData.elementData.pathData.end.residue_number, i = n; r >= i; i++) {
          var o = !0;
          i == n && (o = !1), t.topologyComponent.showSelectionArea(i, o, e.eventData.elementData.color, "mouseover")
         }
       }
      }), r.on("PDB.seqViewer.mouseout", function() {
       a.selectAll(".residueHighlight").remove()
      }), r.on("PDB.litemol.mouseover", function(e) {
       if (o.selectAll(".residueHighlight").remove(), "undefined" != typeof e.eventData && !angular.equals({}, e.eventData)) {
        if (e.eventData.entryId.toLowerCase() != t.entryId.toLowerCase() || e.eventData.entityId != t.entityId) return;
        if (e.eventData.chainId.toLowerCase() != t.bestChainId.toLowerCase()) return;
        t.topologyComponent.showSelectionArea(e.eventData.residueNumber, !1, void 0, "mouseover")
       }
      }), r.on("PDB.litemol.click", function(e) {
       if (o.selectAll(".residueSelection").remove(), "undefined" != typeof e.eventData && !angular.equals({}, e.eventData)) {
        if (e.eventData.entryId.toLowerCase() != t.entryId.toLowerCase() || e.eventData.entityId != t.entityId) return;
        if (e.eventData.chainId.toLowerCase() != t.bestChainId.toLowerCase()) return;
        t.topologyComponent.showSelectionArea(e.eventData.residueNumber, !1, void 0, "click")
       }
      }), r.on("protvista-mouseover", function(e) {
       if ("undefined" != typeof e.detail) {
        var n = void 0;
        if ("undefined" != typeof e.detail.feature) {
         if ("undefined" != typeof e.detail.feature.accession) {
          var r = e.detail.feature.accession.split(" ");
          if ("Chain" == r[0] && r[1].toLowerCase() != t.bestChainId.toLowerCase()) return
         }
         e.detail.trackIndex > -1 && e.detail.feature.locations && e.detail.feature.locations[0].fragments[e.detail.trackIndex].color && (n = e.detail.feature.locations[0].fragments[e.detail.trackIndex].color), "undefined" == typeof n && e.detail.feature.color && (n = e.detail.feature.color)
        }
        if ("undefined" == typeof n && e.detail.color && (n = e.detail.color), "undefined" != typeof n) {
         var i = /rgb/g;
         n = i.test(n) ? n.substring(4, n.length - 1).split(",") : [n]
        }
        if (e.detail.start == e.detail.end) t.topologyComponent.showSelectionArea(e.detail.start, !1, n, "mouseover");
        else
         for (var o = e.detail.start; o <= e.detail.end; o++) {
          var a = !0;
          o == e.detail.start && (a = !1), t.topologyComponent.showSelectionArea(o, a, n, "mouseover")
         }
       }
      }), r.on("protvista-mouseout", function() {
       a.selectAll(".residueHighlight").remove()
      }), r.on("protvista-click", function(e) {
       if ("undefined" != typeof e.detail) {
        var n = void 0;
        if ("undefined" != typeof e.detail.feature) {
         if ("undefined" != typeof e.detail.feature.accession) {
          var r = e.detail.feature.accession.split(" ");
          if ("Chain" == r[0] && r[1].toLowerCase() != t.bestChainId.toLowerCase()) return
         }
         e.detail.trackIndex > -1 && e.detail.feature.locations && e.detail.feature.locations[0].fragments[e.detail.trackIndex].color && (n = e.detail.feature.locations[0].fragments[e.detail.trackIndex].color), "undefined" == typeof n && e.detail.feature.color && (n = e.detail.feature.color)
        }
        if ("undefined" == typeof n && e.detail.color && (n = e.detail.color), "undefined" != typeof n) {
         var i = /rgb/g;
         n = i.test(n) ? n.substring(4, n.length - 1).split(",") : [n]
        }
        if (e.detail.start == e.detail.end) t.topologyComponent.showSelectionArea(e.detail.start, !1, n, "click");
        else
         for (var o = e.detail.start; o <= e.detail.end; o++) {
          var a = !0;
          o == e.detail.start && (a = !1), t.topologyComponent.showSelectionArea(o, a, n, "click")
         }
       }
      })
     }
    }
   }
  }])
 }(), angular.module("template/topologyViewer/topologyViewer.html", []).run(["$templateCache", function(e) {
  e.put("template/topologyViewer/topologyViewer.html", '<div class="topologyViewerWrapper" ng-style="styles.wrapper" ><!--<div class="topologyViewLoader" ng-style="styles.loader" ng-show="showLoader"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/loading.gif" border="0" ng-style="styles.loaderImg" /></div><div class="topologyViewLoader" ng-style="styles.errorMsg" ng-show="showErrorMessage"><span ng-style="styles.errorMsgSpan">{{errorMessage}}</span></div>--><div ng-style="topoViewerOverlay" ng-show="overlayText != \'\'"><span ng-style="topoViewerOverlayMessage">{{overlayText}}</span></div><div class="rowSpacing">&nbsp;</div><div ng-style="styles.topoSvgWrapper"><svg class="topoSvg" ng-style="styles.topoSvg" ></svg></div><div class="rowSpacing">&nbsp;</div><div ng-style="styles.bottomMenu"><div class="controlsWrapper">&nbsp;&nbsp;{{entryId}}:{{bestChainId}}&nbsp;<select ng-style="styles.bottomMenuSelectBox" ng-model="selectedDomain" ng-options="domainType as domainType.label for domainType in domainTypes" ng-change="highlightDomain()"></select>  <span ng-click="SaveSelection()" class="topologyRefreshIcon icon-black" data-icon="S" title="Save Selection"><span ng-click="clearSelectionAndHighlight()" class="topologyRefreshIcon icon-black" data-icon="R" title="Clear Highlight / Selection"></span></div></div></div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.uniprot.viewer", ["pdb.prints", "d3Core", "pdb.uniprot.viewer.filters", "pdb.uniprot.viewer.services", "pdb.common.services", "template/sequenceView/uniPdb.html"]).directive("pdbUniprotViewer", ["d3", "uniprotViewerService", "$compile", "$filter", "$interval", "commonServices", "$document", "$window", "$q", function(e, t, n, r, i, o, a, s, u) {
   return {
    restrict: "EAC",
    scope: {
     entryId: "@",
     height: "@",
     width: "@",
     hidePdbPrints: "@"
    },
    templateUrl: "template/sequenceView/uniPdb.html",
    link: function(a, s) {
     a.seqViewerOverlay = {
      width: "90%",
      height: "100%",
      "background-color": "rgba(0,0,0,0.5)",
      color: "#fff",
      "z-index": 1,
      position: "absolute",
      "text-align": "center",
      padding: "0 5%",
      "webkit-box-sizing": "content-box",
      "-moz-box-sizing": "content-box",
      "box-sizing": "content-box"
     }, a.seqViewerOverlayMessage = {
      display: "inline-block",
      "margin-top": "5%",
      "font-size": "12px"
     }, a.overlayText = "Loading...";
     var l, c = e.select(s[0]),
      h = c.select(".seqViewerWrapper"),
      p = h.select(".topRightSection"),
      d = h.select(".bottomRightSection"),
      f = d.select(".bottomSvg"),
      m = f.select("g.shapesGrp"),
      g = p.select("g.scaleGrp"),
      v = e.select(".tempUniPDBWrapper");
     l = null == v[0][0] ? c.node().parentNode.getBoundingClientRect() : v.node().parentNode.parentNode.getBoundingClientRect(), a.config = {
      width: l.width > 230 ? l.width : 230,
      height: l.height > 250 ? l.height : 250,
      showLabels: !0,
      maxZoomed: !1,
      pdbPrints: !0,
      firstPrintsMarginTop: 3
     }, "undefined" != typeof a.hidePdbPrints && "true" == a.hidePdbPrints && (a.config.pdbPrints = !1), "undefined" != typeof a.height && (a.config.height = a.height), "undefined" != typeof a.width && (a.config.width = a.width), a.activeViewBtn = "compact", a.showViewBtn = !0, a.allowZoom = !0, a.showLabels = a.config.showLabels, a.printsMarginTop = a.config.firstPrintsMarginTop;
     var y = new function() {
      this.margin = {
       top: 15,
       right: 10,
       bottom: 15,
       left: 10
      }, this.topSvgHeight = 70, this.topButtonHeight = 45, this.headerSecHeight = 60, this.mainHeight = a.config.height, this.leftSecWidthCalc = function() {
       var e = a.config.width > 300 ? 210 : 110;
       return e = a.config.pdbPrints ? e : 110
      }, this.leftSecWidth = this.leftSecWidthCalc(), this.scrollbarWidth = 25, this.scrollRightMargin = 5, this.mainWidth = a.config.width, this.sectionWidth = this.mainWidth - this.scrollRightMargin, this.bottomSecHeigth = this.mainHeight - this.topSvgHeight - this.headerSecHeight - this.margin.bottom, this.svgWidth = this.sectionWidth - this.leftSecWidth - this.scrollbarWidth, this.svgScaleWidth = this.svgWidth - 20, this.tickCount = this.svgWidth / 28, this.seqViewerSmallOverlay = "position: absolute;padding: 5px;color: #fff;background-color: rgba(0, 0, 0, 0.498039);width: 27%;font-size: 10px;margin-left: 40%;top:0;text-align:center;", this.accWidth = this.leftSecWidth > 110 ? 150 : 57
     };
     if (a.styles = {
       wrapper: {
        width: y.mainWidth + "px",
        height: y.mainHeight + "px"
       },
       loaderImg: {
        "margin-top": y.mainHeight / 2 - 30 + "px"
       },
       topSection: {
        height: y.topSvgHeight + "px",
        width: y.sectionWidth + "px"
       },
       topSvg: {
        height: y.topSvgHeight + "px",
        width: y.svgWidth + "px",
        overflow: "visible"
       },
       bottomSection: {
        height: y.bottomSecHeigth + "px",
        width: y.sectionWidth + "px",
        "overflow-x": "hidden",
        "overflow-y": "auto"
       },
       bottomSvg: {
        width: y.svgWidth + "px",
        overflow: "visible"
       },
       leftSecStyle: {
        width: y.leftSecWidth + "px"
       },
       scrollArrowLeft: {
        display: "none",
        position: "absolute",
        margin: "8px 0 0 " + (y.leftSecWidth - 10) + "px",
        "text-decoration": "none",
        border: "none",
        outline: "none"
       },
       scrollArrowRight: {
        display: "none",
        margin: "8px 0 0 20px",
        "text-decoration": "none",
        border: "none",
        outline: "none"
       },
       loadMoreStyle: {
        top: y.mainHeight - 35 + "px",
        left: y.mainWidth / 2 - 50 + "px"
       },
       btnGrp: {
        "float": "left",
        "margin-bottom": "5px",
        width: y.mainWidth + "px",
        "text-align": "right",
        overflow: "auto"
       },
       accWidth: {
        width: y.accWidth + "px"
       }
      }, a.wrapperSize = {
       width: y.mainWidth,
       height: y.mainHeight
      }, "undefined" == typeof a.entryId) return a.overlayText = "Please specify 'entry-id'", void 0;
     var b = e.select(".pdbSeqTooltip");
     null == b[0][0] && (b = e.select("body").append("div").attr("class", "pdbSeqTooltip")), a.pdbevents = o.createNewEvent(["PDB.uniprotViewer.click", "PDB.uniprotViewer.mouseover", "PDB.uniprotViewer.mouseout"]);
     var w = function() {
       function i() {
        this.smallSeqFlag = !1, this.shapeMaster = {}, this.renderViewModel = void 0, this.seqLength = 0, this.scaleConfig = void 0, this.xScale = void 0, this.line = void 0, this.zoom = void 0, this.xAxis = void 0, this.seqAxis = void 0, this.tickCount = y.tickCount, this.clipPathId = void 0, this.initUniPdbViewer()
       }
       return i.prototype.initUniPdbViewer = function() {
        var e = this;
        a.overlayText = "Downloading UniPDB API Data...", t.getUnipdbData(a.entryId).then(function(t) {
         a.overlayText = "Parsing UniPDB API Data...", e.renderViewModel = r("uniProtMappingFilter")(t), e.initScaleAndZoom(), h.select(".headingTxt").html(e.renderViewModel.options.unipdbHeading), e.initPDBPrints(), a.overlayText = "Rendering View...", e.renderShapes(e.renderViewModel), e.smallSeqFlag && (a.showViewBtn = !1), e.setMainSvgHeight(), a.config.maxZoomed && (e.zoom.scale(e.scaleConfig.maxZoom), e.zoomDraw()), a.overlayText = "", e.renderViewModel.equalLengthpdbIdArr.length > 0 && e.renderMutationAnnotationsForUniPDB(e.renderViewModel.equalLengthpdbIdArr), e.renderViewModel.unequalLengthpdbIdArr.length > 0 && e.loadUnequalLengthMappings().then(function() {
          e.renderMutationAnnotationsForUniPDB(e.renderViewModel.unequalLengthpdbIdArr)
         }), a.config.maxZoomed && (e.zoom.scale(maxZoom), e.zoomDraw()), e.smallSeqFlag && (a.showViewBtn = !1)
        }, function(e) {
         a.overlayText = "Unipdb API request failed...", window.console && console.log("Unipdb API request failed. Error: " + e)
        })
       }, i.prototype.renderMutationAnnotationsForUniPDB = function(e) {
        var t = this;
        h.append("div").classed("smallOverlayMutation", !0).text("Loading Mutation/Modified Annotation..").attr("style", y.seqViewerSmallOverlay);
        var n = ["mutatedResidues", "modifiedResidues", "molecules"],
         i = o.createPromise(e, n);
        o.combinedDataGrabber(i, e, n, !0).then(function(e) {
         var n = r("unipdbModelFilter")(e, y.margin.top, c);
         t.renderShapes(n), h.select(".smallOverlayMutation").remove()
        }, function() {
         h.select(".smallOverlayMutation").remove(), window.console && console.log("combined Failed")
        })
       }, i.prototype.loadUnequalLengthMappings = function() {
        var e = this;
        a.fadedShapeData = e.renderViewModel.fadedShapeData;
        var t = u.defer();
        h.append("div").classed("smallOverlayMutation", !0).text("Loading remaining mappings data..").attr("style", y.seqViewerSmallOverlay);
        var n = ["uniprotSegments"],
         i = o.createMultiPromise(e.renderViewModel.unequalLengthpdbIdArr, n);
        return o.combinedDataGrabber(i, e.renderViewModel.unequalLengthpdbIdArr, n, !0).then(function(n) {
         var i = {};
         angular.forEach(n, function(e, t) {
          i[t] = e.uniprotSegments.UniProt[a.entryId].mappings
         });
         var o = {
           uniprotId: a.entryId,
           uniprotSegmentMappings: i,
           fadedShapeData: a.fadedShapeData
          },
          s = r("uniProtMappingFilter")(o);
         s.groups = [], h.selectAll(".loadingseq").remove(), h.selectAll(".loadingpath").remove(), h.selectAll(".loading_path_text").remove(), e.renderShapes(s), angular.forEach(s.infoIconMsg, function(e, t) {
          a.infoIconMsg[t] = e
         }), h.selectAll(".smallOverlayMutation").remove(), t.resolve(s)
        }, function() {
         h.select(".smallOverlayMutation").remove(), window.console && console.log("combined Failed"), t.reject("fail response")
        }), t.promise
       }, i.prototype.initPDBPrints = function() {
        var e = this;
        if (a.config.width > 300 && a.config.pdbPrints) {
         var t = "['" + e.renderViewModel.pdbIdArr.join("','") + "']",
          r = h.select(".bottomLeftSection").classed("pdb-prints", !0).attr("pdb-ids", t).attr("settings", '{"orientation": "horizontal", "size": 24, "color": "embl_green", "hideLogo" : ["PDBeLogo","Taxonomy", "Expressed", "Protein"] }');
         n(r.node())(a)
        }
       }, i.prototype.initScaleAndZoom = function() {
        var t = this;
        a.overlayText = "Initalizing scale and zoom...", a.infoIconMsg = t.renderViewModel.infoIconMsg, a.pathLeftLabels = t.renderViewModel.pathLeftLabels, a.pathMoreLeftLabels = [], a.pdbIdArr = t.renderViewModel.pdbIdArr, a.entrySummary = t.renderViewModel.options, a.modelOptions = a.entrySummary, t.sequenceArr = a.entrySummary.seqStr.split(""), t.seqLength = t.sequenceArr.length, t.scaleConfig = {
         indexMax: t.seqLength - 1,
         minZoom: 1,
         maxZoom: t.getMaxZoom(t.seqLength, y.svgScaleWidth)
        }, t.seqLength <= Math.ceil(y.tickCount) && (t.tickCount = t.seqLength, t.smallSeqFlag = !0), t.xScale = e.scale.linear().domain([0, t.scaleConfig.indexMax]).range([0, y.svgScaleWidth]), t.line = e.svg.line().x(function(e) {
         return t.xScale(e[0])
        }), t.xAxis = e.svg.axis().scale(t.xScale).orient("top").tickFormat(function(e) {
         return e + 1
        }).ticks(t.tickCount), t.seqAxis = e.svg.axis().scale(t.xScale).orient("top").tickFormat(function(e) {
         return t.sequenceArr[e]
        }).ticks(t.tickCount);
        var n = g.select("g.x.axis").call(t.xAxis);
        t.seqLength === n.selectAll("g.tick")[0].length && (t.smallSeqFlag = !0), t.zoom = e.behavior.zoom().on("zoom", function() {
         t.zoomDraw(t)
        }).x(t.xScale).scaleExtent([t.scaleConfig.minZoom, t.scaleConfig.maxZoom]), p.select(".topSvg").call(t.zoom).on("contextmenu", function() {
         e.event.preventDefault()
        }), d.select(".shapesGrp").call(t.zoom).on("contextmenu", function() {
         e.event.preventDefault()
        }), t.clipPathId = "clipper_" + Math.floor(500 * Math.random() + 1), f.append("defs").append("clipPath").attr("id", t.clipPathId).append("rect").attr("x", -10).attr("y", -30).attr("width", y.svgWidth).attr("height", 100)
       }, i.prototype.renderShapes = function(e) {
        var t = this;
        for (var n in e)
         if ("groups" === n)
          for (var r = e[n].length, i = 0; r > i; i++) {
           var o = e[n][i]["class"],
            a = e[n][i].parentGroup,
            s = e[n][i].marginTop,
            u = (e[n][i].label, m);
           ("uniprotGrp" === a || "uniprotGrp" === o) && (u = g), "" !== a ? (u.select("." + a).append("g").attr("class", o), "undefined" != typeof s && s && u.select("." + o).attr("transform", "translate(0," + s + ")")) : u.append("g").attr("class", o).attr("transform", "translate(0," + (y.margin.top + s) + ")").attr("clip-path", "url(#" + t.clipPathId + ")")
          } else if ("shapes" === n)
           for (var l = e[n].length, c = 0; l > c; c++) {
            var h = e[n][c].shape,
             p = e[n][c].shapeGroupClass,
             d = e[n][c].shapeClass,
             f = e[n][c].shapeContent,
             v = e[n][c].shapeColour,
             b = e[n][c].shapeHeight,
             w = e[n][c].marginTop,
             x = e[n][c].shapeCap,
             _ = e[n][c].showTooltip,
             S = e[n][c].fitInPath;
            "undefined" == typeof b && (b = 0), "undefined" == typeof w && (w = 0), "undefined" == typeof x && (x = "butt"), "text" === h ? (t.drawText(f, p, d, _, S), t.displaySeq()) : "zigzag" === h ? t.drawZigzag(f, p, d, v, b, w, x, _) : "arrow" === h ? t.drawArrow(f, p, d, v, b, w, x, _) : "path" === h ? t.drawPath(f, p, d, v, b, w, x, _) : "circle" === h || "square" === h || "triangle-up" === h || "triangle-down" === h || "diamond" === h || "cross" === h ? t.createShape(h, f, p, d, v, _, w) : "sequence" === h && (t.drawSeqAxis(f, p, d, w, _), t.displaySeq())
           }
       }, i.prototype.setMainSvgHeight = function() {
        var e = 40;
        f.select(".seqSvgBg").attr("height", 20);
        var t = m.node().getBBox();
        f.attr("height", t.height + e), f.select(".seqSvgBg").attr("height", t.height + e)
       }, i.prototype.drawText = function(t, n, r, i) {
        {
         var o = this;
         c.select("." + n).attr("clip-path", "url(#" + o.clipPathId + ")").selectAll("path." + r).data(t).enter().append("text").attr("class", function(e, t) {
          return e.textIndex = t, "textEle " + r + " " + r + "-" + t
         }).attr("x", function(e) {
          return o.xScale(e.textRange[0][0])
         }).attr("y", function(e) {
          return e.textRange[1][0]
         }).attr("fill", "white").text(function(e) {
          return e.textString
         }).style("text-anchor", function(t) {
          return i === !0 && o.attachMouseEvent(e.select(this), "text", "white", t), "undefined" != typeof t.textAnchor ? t.textAnchor : "middle"
         }).style("font-family", "Verdana,sans-serif").style("font-size", "12px").style("cursor", "default")
        }
       }, i.prototype.fitTextInPath = function(t) {
        var n = this;
        t.each(function() {
         var t = e.select(this),
          r = t.data()[0],
          i = c.select("." + r.pathClassPrefix + "-" + r.textIndex).node().getBBox().width;
         n.textFontResize(t, i)
        })
       }, i.prototype.textFontResize = function(e, t) {
        var n = this,
         r = e.node().getBBox().width;
        if (r > t) {
         var i = parseInt(e.style("font-size"));
         i > 2 ? (e.style("font-size", i - 2 + "px"), n.textFontResize(e, t)) : e.style("font-size", "0px")
        }
       }, i.prototype.drawZigzag = function(t, n, r, i, o, a, s, u) {
        var l = this;
        c.select("." + n).attr("clip-path", "url(#" + l.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "linkerPathEle " + r + "-" + t
        }).attr("stroke", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("stroke-width", 2).attr("stroke-linecap", s).attr("fill", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("transform", "translate(0,-9)").attr("d", function(t) {
         if (1 == u) {
          var n = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
          l.attachMouseEvent(e.select(this), "path", n, t)
         }
         var r = l.getZigZagdVal(l.xScale(t.pathStart), t.pathPosition);
         return r
        })
       }, i.prototype.getZigZagdVal = function(e, t) {
        var n = ["M", "0L", "0L", "3L", "6L", "9L", "12L", "15L", "18L"],
         r = 0,
         i = "",
         o = 5;
        return "start" === t && (o = -5), angular.forEach(n, function(t) {
         var n = 0;
         0 === r ? (r = 1, n = e) : (r = 0, n = e + o), i += t + "" + n + ","
        }), i += "18 Z"
       }, i.prototype.createShape = function(t, n, r, i, o, a, s) {
        var u = this;
        u.shapeMaster[i] = t, c.select("." + r).attr("clip-path", "url(#" + u.clipPathId + ")").selectAll("otherPathShape path." + i).data(n).enter().append("path").attr("class", i).attr("d", u.getShapeDVal(t)).attr("fill", function(t) {
         var n;
         return n = "undefined" != typeof t.color ? e.rgb(t.color[0], t.color[1], t.color[2]).brighter() : o, 1 == a && u.attachMouseEvent(e.select(this), "circle", n, t), n
        }).attr("stroke", "none").attr("stroke-width", 0).attr("transform", function(e) {
         var t = "translate(" + u.xScale(e.residue_number - 1) + ",10)";
         return 0 !== s && (t = "translate(" + u.xScale(e.residue_number - 1) + "," + s + ")"), t
        })
       }, i.prototype.getShapeDVal = function(t) {
        var n = this;
        return e.svg.symbol().type(t).size(function() {
         return n.smallSeqFlag ? 40 : 10 * n.getShapeSize(n.zoom.scale())
        })
       }, i.prototype.getShapeSize = function(e) {
        return 1.7 > e ? e = 1.7 : e > 4.5 && (e = 4.5), e
       }, i.prototype.drawSeqAxis = function(e, t, n, r, i) {
        var o = this;
        c.select("." + t).append("g").attr("class", "seqAxis " + n);
        var a = c.select("." + n);
        a.call(o.seqAxis), r && "undefined" != typeof r && a.attr("transform", "translate(0," + r + ")"), 1 == i && o.attachMouseEvent(a, "text", "white", e)
       }, i.prototype.drawPath = function(t, n, r, i, o, a, s, u) {
        var l = this;
        c.select("." + n).attr("clip-path", "url(#" + l.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "pathEle " + r + "-" + t
        }).attr("stroke", function(t) {
         var n;
         if ("undefined" != typeof t.color) {
          var r = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
          n = r
         } else n = i;
         return 1 == u && l.attachMouseEvent(e.select(this), "path", n, t), n
        }).attr("stroke-width", o).attr("stroke-opacity", function(e) {
         return "undefined" != typeof e.opacity ? e.opacity : 1
        }).attr("stroke-linecap", s).attr("fill", "none").attr("transform", "translate(0," + a + ")").attr("d", function(e) {
         return l.line(e.pathRange)
        })
       }, i.prototype.drawArrow = function(t, n, r, i, o, a, s, u) {
        var l = this;
        c.select("." + n).attr("clip-path", "url(#" + l.clipPathId + ")").selectAll("path." + r).data(t).enter().append("path").attr("class", function(e, t) {
         return "arrowEle " + r + "-" + t
        }).attr("stroke", function(t) {
         var n = e.rgb(t.color[0], t.color[1], t.color[2]).brighter();
         return 1 == u && l.attachMouseEvent(e.select(this), "arrow", n, t), n
        }).attr("stroke-width", o).attr("stroke-linecap", s).attr("fill", function(t) {
         return e.rgb(t.color[0], t.color[1], t.color[2]).brighter()
        }).attr("transform", "translate(0," + a + ")").attr("d", function(e) {
         return l.getArrowDVal(l.line(e.pathRange))
        })
       }, i.prototype.getArrowDVal = function(e) {
        var t = e.split(","),
         n = parseFloat(t[0].substring(1)),
         r = parseFloat(t[1].substring(2)),
         i = r - n + 1,
         o = 5;
        10 > i && (o = i - 2);
        var a = "M" + n + ",-5L" + (r - o) + ",-5L" + (r - o) + ",-10L" + r + ",0L" + (r - o) + ",10L" + (r - o) + ",5L" + n + ",5";
        return a
       }, i.prototype.getMaxZoom = function(e, t) {
        var n = this,
         r = 0;
        if (t % 100 === 0) r = .2112 * e / n.getZoomDivisor(t);
        else {
         var i = 100 * Math.floor(t / 100);
         1 > i && (i = 100);
         var o = .2112 * e / n.getZoomDivisor(i),
          a = {
           100: {
            diff: 2,
            range: [1, 2, 4, 7, 9]
           },
           200: {
            diff: 1.5,
            range: [2, 5]
           },
           300: {
            diff: .9,
            range: [4, 9]
           },
           400: {
            diff: .7,
            range: [5, 9]
           },
           500: {
            diff: .6,
            range: [1, 9]
           },
           600: {
            diff: .45,
            range: [8, 9]
           },
           700: {
            diff: .4,
            range: [8, 9]
           }
          };
         if (800 > t) {
          for (var s = a[i].range.length, u = s - 1; u >= 0; u--)
           if (t >= i + 10 * a[i].range[u]) {
            r = 0 === u ? o : o - a[i].diff / 100 * e * u;
            break
           }
         } else r = .2112 * e / n.getZoomDivisor(i)
        }
        return 0 === r && (r = o), r
       }, i.prototype.getZoomDivisor = function(e) {
        var t = 1;
        return e > 100 && (t = Math.floor(Math.floor(e) / 100)), t
       }, i.prototype.displaySeq = function() {
        var t = this;
        if (t.smallSeqFlag || t.zoom.scale() === t.scaleConfig.maxZoom) {
         c.selectAll(".linkerPathEle").attr("d", function(e) {
          var n = 0;
          n = "start" === e.pathPosition ? e.pathStart - .1 : e.pathStart + .1;
          var r = t.getZigZagdVal(t.xScale(n), e.pathPosition);
          return r
         }), c.selectAll(".seqPath").attr("d", function(e) {
          var n = t.line(e.pathRange),
           r = n.split(",");
          return r[0] = "M" + (parseFloat(r[0].substring(1)) - 5), r[1] = "0L" + (parseFloat(r[1].substring(2)) + 5), r.join(",")
         }), c.selectAll(".nonSeqPath").attr("d", function(e) {
          var n = t.line(e.pathRange),
           r = n.split(",");
          return parseFloat(r[0].substring(1)) > 0 && (r[0] = "M" + (parseFloat(r[0].substring(1)) + 5)), r[1] = "0L" + (parseFloat(r[1].substring(2)) - 5), r.join(",")
         });
         var n = c.selectAll(".linePathEle");
         n.each(function() {
          e.select(e.select(this).node()).attr("d", function(e) {
           var n = t.line(e.pathRange),
            r = n.split(","),
            i = parseFloat(r[0].substring(1)) + 5,
            o = r.length;
           r[0] = "M" + i;
           var a = parseFloat(r[o - 2].substring(2)) - 5;
           return r[o - 2] = "5L" + a, r.join(",")
          })
         }), c.selectAll(".seqAxis").style("display", "block"), c.selectAll(".hideTextOnZoom").style("display", "none"), c.selectAll(".showTextOnZoom").style("display", "block")
        } else c.selectAll(".seqAxis").style("display", "none"), c.selectAll(".hideTextOnZoom").style("display", "block"), c.selectAll(".showTextOnZoom").style("display", "none")
       }, i.prototype.zoomDraw = function() {
        var t = this;
        t.zoom.scale() > 1 ? c.selectAll(".SeqScrollArrow").style("display", "block") : c.selectAll(".SeqScrollArrow").style("display", "none"), a.allowZoom === !1 && t.zoom.scale(t.scaleConfig.maxZoom);
        var n = t.zoom.translate(),
         r = t.zoom.scale(),
         i = Math.min(0, Math.max(y.svgScaleWidth * (1 - r), n[0])),
         o = Math.min(0, Math.max(1 * (1 - r), n[1]));
        t.zoom.translate([i, o]), g.select("g.x.axis").call(t.xAxis), c.selectAll(".pathEle").each(function(n) {
         e.select(this).attr("d", t.line(n.pathRange))
        }), c.selectAll(".arrowEle").each(function(n) {
         e.select(this).attr("d", t.getArrowDVal(t.line(n.pathRange)))
        }), c.selectAll(".linkerPathEle").each(function(n) {
         var r = t.getZigZagdVal(t.xScale(n.pathStart), n.pathPosition);
         e.select(e.select(this).node()).attr("d", r)
        }), c.selectAll(".seqAxis").call(t.seqAxis);
        for (var s in t.shapeMaster) c.selectAll("." + s).attr("d", t.getShapeDVal(t.shapeMaster[s])).attr("transform", function(e) {
         var n = "translate(" + t.xScale(e.residue_number - 1) + ",10)";
         return "undefined" != typeof e.marginTop && 0 !== e.marginTop && (n = "translate(" + t.xScale(e.residue_number - 1) + "," + e.marginTop + ")"), n
        });
        t.displaySeq(), c.selectAll(".textEle").each(function() {
         {
          var n = e.select(this);
          n.data()[0]
         }
         n.attr("x", function(e) {
          return t.xScale(e.textRange[0][0])
         })
        })
       }, i.prototype.initFitTextInPath = function() {
        var t = this;
        c.selectAll(".fitTextInPath").each(function() {
         var n = e.select(this),
          r = n.data()[0];
         n.style("display", "block"), n.attr("x", function(e) {
          return t.xScale(e.textRange[0][0])
         }), "undefined" != typeof r && "undefined" != typeof r.fitInPath && r.fitInPath === !0 && t.fitTextInPath(n)
        })
       }, i.prototype.showTooltip = function(t, n, r) {
        var i = 0,
         o = 0;
        "ng" === n ? (o = r.pageX, i = r.pageY) : (o = e.event.pageX, i = e.event.pageY), b.html(t).style("display", "block").style("top", i + 15 + "px").style("left", o + 10 + "px")
       }, i.prototype.hideTooltip = function() {
        b.style("display", "none")
       }, i.prototype.getResidue = function(e, t) {
        var n = this,
         r = e[0];
        return "circle" !== t && (r = Math.round(n.xScale.invert(e[0]))), "Residue " + (r + 1) + " (" + n.sequenceArr[r] + ")"
       }, i.prototype.dispatchEvent = function(e, t, n) {
        var r = s[0];
        "undefined" != typeof n && (r = n), "undefined" != typeof t && (a.pdbevents[e].eventData = t), r.dispatchEvent(a.pdbevents[e])
       }, i.prototype.eventOperations = function(e, t, n, r, i, o) {
        var s, u, l = this;
        "undefined" != typeof o && (s = o.tooltipMsg, u = o.tooltipPosition), "circle" === n && (i[0] = o.residue_number - 1);
        var c = l.getResidue(i, n);
        angular.isUndefined(s) ? s = c : angular.isUndefined(u) || "prefix" !== u ? angular.isUndefined(u) || "postfix" !== u || (s = c + " " + s) : s = s + " " + c, "PDB.uniprotViewer.mouseover" == e && l.showTooltip(s, "d3", i), l.dispatchEvent(e, {
         viewerType: "pdbViewer",
         elementData: o,
         residueNumber: parseInt(c.split(" ")[1]),
         entryId: a.entryId
        })
       }, i.prototype.attachMouseEvent = function(t, n, r, i) {
        var o = this;
        t.on("click", function() {
         var a = e.mouse(this);
         o.eventOperations("PDB.uniprotViewer.click", t, n, r, a, i)
        }).on("mouseover", function() {
         var a = e.mouse(this);
         o.eventOperations("PDB.uniprotViewer.mouseover", t, n, r, a, i)
        }).on("mousemove", function() {
         var a = e.mouse(this);
         o.eventOperations("PDB.uniprotViewer.mouseover", t, n, r, a, i)
        }).on("mouseleave", function() {
         o.hideTooltip(), o.dispatchEvent("PDB.uniprotViewer.mouseout", {
          viewerType: "pdbViewer",
          entryId: a.entryId
         })
        })
       }, i
      }(),
      x = new w;
     a.$watch("activeViewBtn", function() {
      "undefined" != typeof x.zoom && ("expanded" === a.activeViewBtn ? (x.zoom.scale(x.scaleConfig.maxZoom), x.zoomDraw(), a.allowZoom = !1) : (x.zoom.scale(1), a.allowZoom = !0, x.zoomDraw()))
     });
     var _;
     a.movePan = function(e) {
      var t = x.zoom.translate();
      x.zoom.translate([t[0] + e, t[1]]), x.zoomDraw(), _ = i(function() {
       var t = x.zoom.translate();
       x.zoom.translate([t[0] + e, t[1]]), x.zoomDraw()
      }, 100)
     }, a.stopMovingPan = function() {
      i.cancel(_)
     }, a.showTooltip = function(e, t, n) {
      x.showTooltip(e, t, n)
     }, a.hideTooltip = function() {
      x.hideTooltip()
     }
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.uniprot.viewer.filters", ["d3Core", "pdb.uniprot.viewer.services", "pdb.common.services"]).filter("uniProtMappingFilter", ["commonServices", "$filter", function(e, t) {
   return function(n) {
    var r = {
      groups: [],
      shapes: [],
      infoIconMsg: {}
     },
     i = {};
    if ("undefined" == typeof n.uniprotSegmentMappings) {
     var o = [];
     if ("undefined" != typeof n.bestStrMappings)
      for (var a = n.bestStrMappings.length, s = 0; a > s; s++) {
       var u = n.bestStrMappings[s].pdb_id; - 1 === o.indexOf(u) && (o.push(u), i[u] = n.pdbMappings[u])
      } else i = n.pdbMappings;
     if (r = {
       options: {
        seqId: n.uniprotId,
        seqStr: n.uniprotSeq,
        unipdbHeading: n.unipdbHeading,
        totalEntries: 0,
        totalChains: 0
       },
       groups: [{
        label: n.uniprotId,
        "class": "uniprotGrp",
        parentGroup: "",
        marginTop: 8
       }, {
        label: "",
        "class": "uniprotPathGrp",
        parentGroup: "uniprotGrp",
        marginTop: 1
       }, {
        label: "",
        "class": "pfamPathGrp",
        parentGroup: "uniprotGrp"
       }, {
        label: "",
        "class": "uniprotSeqGrp",
        parentGroup: "uniprotGrp",
        marginTop: 14
       }, {
        label: "",
        "class": "pfamLabelGrp",
        parentGroup: "uniprotGrp",
        marginTop: 14
       }],
       shapes: [{
        shape: "path",
        shapeGroupClass: "uniprotPathGrp",
        shapeClass: "seqPath uniprotPath",
        shapeHeight: 20,
        marginTop: 0,
        showTooltip: !0,
        shapeContent: [{
         pathRange: [
          [0, 0],
          [n.uniprotSeq.length, 0]
         ],
         pathData: {
          uniprotId: n.uniprotId,
          uniprotSeq: n.uniprotSeq
         },
         color: e.specificColors.lightGray,
         elementType: "uniprot"
        }]
       }, {
        shape: "sequence",
        shapeGroupClass: "uniprotSeqGrp",
        shapeClass: "uniprotSeq",
        showTooltip: !0,
        shapeContent: {
         pathRange: [
          [0, 0],
          [n.uniprotSeq.length, 0]
         ],
         pathData: {
          uniprotId: n.uniprotId,
          uniprotSeq: n.uniprotSeq
         },
         color: e.specificColors.lightGray,
         elementType: "uniprot"
        }
       }],
       pdbIdArr: [],
       equalLengthpdbIdArr: [],
       unequalLengthpdbIdArr: [],
       fadedShapeData: {},
       infoIconMsg: {}
      }, "undefined" != typeof n.pfamApiData) {
      var l = t("unpToPfamFilter")(n.pfamApiData, n.uniprotId);
      l.shapes[0].shapeContent.length > 0 && (r.infoIconMsg.pfam = l.shapes[0].infoToolTipMsg, r.shapes.push(l.shapes[0]))
     }
    } else i = n.uniprotSegmentMappings;
    var c = 0,
     h = 0;
    return angular.forEach(i, function(t, i) {
     if ("undefined" != typeof n.uniprotSegmentMappings) c = n.fadedShapeData[i].initMargin, h = n.fadedShapeData[i].colorIndex;
     else {
      r.options.totalEntries++, r.options.totalChains++;
      var o = c + 20;
      r.groups.push({
       label: i,
       "class": "pathGrp" + i,
       parentGroup: "",
       marginTop: o
      }), c += 30, r.groups.push({
       label: "",
       "class": "seqGrp" + i,
       parentGroup: "",
       marginTop: c + 3
      })
     }
     var a = {
       shape: "sequence",
       shapeGroupClass: "seqGrp" + i,
       shapeClass: "seq" + i,
       showTooltip: !0
      },
      s = {
       shape: "path",
       shapeGroupClass: "pathGrp" + i,
       shapeClass: "seqPath path" + i + " path" + i,
       shapeHeight: 20,
       showTooltip: !0,
       shapeContent: []
      },
      u = {
       shape: "text",
       shapeGroupClass: "seqGrp" + i,
       shapeClass: "hideTextOnZoom chain_id_text",
       shapeHeight: 15,
       marginTop: 2,
       showTooltip: !0,
       shapeContent: []
      },
      l = [],
      p = "This shows how sequences in PDB entry " + i + " cover the sequence of UniProt entry " + n.uniprotId + ".",
      d = "undefined" != typeof n.uniprotSegmentMappings ? !1 : e.checkUniportGapProbability(t);
     if (d) {
      var f = {
       mappingApiData: t,
       colorIndex: h,
       initMargin: c
      };
      a.shapeClass = "loadingseq seq" + i, s.shapeClass = "loadingpath loadingpath" + i, s.shapeContent.push({
       pathRange: [
        [0, 0],
        [n.uniprotSeq.length, 0]
       ],
       pathData: f,
       color: e.colorBox3[h][0],
       tooltipMsg: "Loading UniProt mappings for " + i,
       opacity: .3
      }), u.shapeClass = "loading_path_text", u.shapeContent.push({
       textRange: [
        [2, 0],
        [-9, 0]
       ],
       textString: "Loading UniProt mappings for " + i,
       pathData: f,
       textAnchor: "left"
      }), r.unequalLengthpdbIdArr.push(i), r.fadedShapeData[i] = f
     } else {
      var m = t.sort(e.sortMappingFragments("unp_start")),
       g = 0,
       v = e.colorBox3[h].length;
      angular.forEach(m, function(t) {
       var i = "<br>UniProt range " + t.unp_start + "-" + t.unp_end + "<br>PDB range: " + t.start.residue_number + " - " + t.end.residue_number,
        o = t.unp_start + "-" + t.unp_end,
        a = l.indexOf(o); - 1 === a ? (t.pathColor = e.colorBox3[h][g], s.shapeContent.push({
        pathRange: [
         [t.unp_start - 1, 0],
         [t.unp_end - 1, 0]
        ],
        pathData: t,
        color: e.colorBox3[h][g],
        tooltipMsg: i,
        tooltipPosition: "postfix",
        type: "PDB"
       }), u.shapeContent.push({
        pathRange: [
         [t.unp_start - 1, 0],
         [t.unp_end - 1, 0]
        ],
        textRange: [
         [t.unp_start + 2, 0],
         [-9, 0]
        ],
        textString: t.struct_asym_id,
        pathData: t,
        color: e.colorBox3[h][g],
        textAnchor: "left",
        tooltipMsg: i,
        tooltipPosition: "postfix",
        type: "PDB"
       }), l.push(t.unp_start + "-" + t.unp_end), g++, g === v && (g = 0)) : ("undefined" == typeof n.uniprotSegmentMappings && r.options.totalChains++, s.shapeContent[a].pathData.chainId += "," + t.struct_asym_id, u.shapeContent[a].textString += ", " + t.struct_asym_id), p += "<br>- UniProt range " + t.unp_start + "-" + t.unp_end + " (" + (t.unp_end - t.unp_start + 1) + " residues)corresponds to residues " + t.struct_asym_id + ":" + t.start.residue_number + ": - " + t.struct_asym_id + ":" + t.end.residue_number + ": in PDB entry."
      }), "undefined" == typeof n.uniprotSegmentMappings && r.equalLengthpdbIdArr.push(i)
     }
     r.shapes.push(a, s, u), r.groups.push({
      label: i,
      "class": "straightLineGrp" + i,
      parentGroup: "",
      marginTop: o
     }), r.infoIconMsg[i] = p, "undefined" == typeof n.uniprotSegmentMappings && (r.pdbIdArr.push(i), h++, h === e.colorBox3.length && (h = 0))
    }), r
   }
  }]).filter("modifiedResFilter", ["commonServices", function(e) {
   return function(t, n, r, i, o, a, s, u) {
    var l = [],
     c = function(e, t) {
      var n = {
        residueNum: t.residue_number,
        chainId: t.chain_id,
        entityId: t.entity_id,
        structAsymId: t.struct_asym_id
       },
       r = -1;
      return angular.forEach(e, function(e) {
       var t = {
        pdbStart: e.pathData.start.residue_number,
        pdbEnd: e.pathData.end.residue_number,
        unpStart: e.pathRange[0][0] + 1,
        unpEnd: e.pathRange[1][0] + 1,
        chainId: e.pathData.chain_id,
        entityId: e.pathData.entity_id,
        structAsymId: e.pathData.struct_asym_id
       };
       n.residueNum >= t.pdbStart && n.residueNum <= t.pdbEnd && n.structAsymId <= t.structAsymId && n.entityId <= t.entityId && (r = n.residueNum - (t.pdbStart - t.unpStart))
      }), r
     },
     h = {
      shape: "path",
      shapeGroupClass: "mutationGrp_" + r,
      shapeClass: "mutation_" + r,
      shapeHeight: i,
      marginTop: o,
      showTooltip: !0,
      shapeContent: []
     },
     p = {
      shape: "text",
      shapeGroupClass: "mutationGrp_" + r,
      shapeClass: "showTextOnZoom singleTextEle mutation_text_" + r,
      shapeHeight: i,
      marginTop: o,
      showTooltip: !0,
      shapeContent: []
     };
    return angular.forEach(t, function(t) {
     var r = t.residue_number;
     if ("unipdbe" === u) r = c(n, t);
     else if (t.entity_id != n.entityId) return;
     var i = "",
      o = "";
     "undefined" != typeof t.mutation_details && "mutatedResidues" === s ? (null !== t.mutation_details.from && (i += t.mutation_details.from + " --> "), i += t.mutation_details.to + " (" + t.mutation_details.type + ")", o = t.mutation_details.to) : (i = "Modified Residue: " + t.chem_comp_id, o = "*", a = 16), r > -1 && (h.shapeContent.push({
      pathRange: [
       [r - 1 - .5, 0],
       [r - 1 + .5, 0]
      ],
      tooltipMsg: i,
      pathData: t,
      color: e.specificColors.burntOrange
     }), p.shapeContent.push({
      textRange: [
       [r - 1, 0],
       [a, 0]
      ],
      tooltipMsg: i,
      textString: o,
      pathData: t,
      color: e.specificColors.burntOrange
     }))
    }), h.shapeContent.length > 0 && l.push(h), p.shapeContent.length > 0 && l.push(p), l
   }
  }]).filter("unipdbModelFilter", ["d3", "$filter", function(e, t) {
   return function(n, r, i) {
    var o = {
     groups: [],
     shapes: []
    };
    return angular.forEach(n, function(n, r) {
     var a = i.select(".pathGrp" + r).attr("transform"),
      s = /\((.+),(.+)\)/,
      u = a.match(s),
      l = [u[1], u[2]],
      c = e.selectAll(".path" + r).data();
     angular.forEach(n, function(e, n) {
      if ("undefined" != typeof e && e)
       if ("modifiedResidues" === n || "mutatedResidues" === n) {
        var i = t("modifiedResFilter")(e, c, r, 20, 10, 14, n, "unipdbe");
        i.length > 0 && (o.groups.push({
         label: "",
         "class": "mutationGrp mutationGrp_" + r,
         parentGroup: "",
         marginTop: l[1] - 25
        }), o.shapes = o.shapes.concat(i))
       } else if ("molecules" === n) {
       for (var a = {}, s = {}, u = 0, h = 0, p = e.length, d = 0; p > d && (a = {
         shape: "zigzag",
         shapeGroupClass: "pathGrp" + r,
         shapeClass: "linkerPath" + r + " linkerPath" + r,
         shapeHeight: 20,
         showTooltip: !0,
         shapeContent: []
        }, s = {
         shape: "path",
         shapeGroupClass: "straightLineGrp" + r,
         shapeClass: "linePathEle straightLinePath" + r + " straightLinePath" + r,
         shapeHeight: 3,
         showTooltip: !0,
         shapeContent: []
        }, angular.forEach(c, function(t, n) {
         if (t.pathData.entity_id === e[d].entity_id) {
          var r = e[d].length,
           i = t.pathData.start.residue_number,
           o = t.pathData.end.residue_number;
          if (a.shapeColour = t.pathData.pathColor, 0 === h && i > 1 || h > 0 && i > h) {
           var l = "Beginning 1 - " + (i - 1) + " residues are not mapped to UniProt";
           i - 1 == 1 && (l = "Residue " + (i - 1) + " is not mapped to UniProt"), a.shapeContent.push({
            pathStart: t.pathData.unp_start - 1,
            pathPosition: "start",
            tooltipMsg: l,
            pathData: t.pathData,
            color: t.pathData.pathColor
           })
          }
          if (r > o) {
           var p = "Ending " + (parseInt(o) + 1) + " - " + r + " residues are not mapped to UniProt";
           parseInt(o) + 1 == r && (p = "Residue " + (parseInt(o) + 1) + " is not mapped to UniProt"), a.shapeContent.push({
            pathStart: t.pathData.unp_end - 1,
            pathPosition: "end",
            tooltipMsg: p,
            pathData: t.pathData,
            color: t.pathData.pathColor
           })
          }
          if (u++, "undefined" != typeof c[n + 1] && o <= c[n + 1].pathData.start.residue_number && c[n + 1].pathData.unp_start > t.pathData.unp_end)
           if (c[n + 1].pathData.start.residue_number === o + 1) s.shapeContent.push({
            pathRange: [
             [t.pathData.unp_end - 1, 0],
             [c[n + 1].pathData.unp_start - 1, 0]
            ],
            tooltipMsg: "Uniprot Residues " + (parseInt(t.pathData.unp_end) + 1) + "-" + (c[n + 1].pathData.unp_start - 1) + " are deleted",
            pathData: t.pathData,
            color: [0, 0, 0]
           });
           else {
            var f = (c[n + 1].pathData.unp_start - t.pathData.unp_end) / 4;
            s.shapeContent.push({
             pathRange: [
              [t.pathData.unp_end - 1, 0],
              [t.pathData.unp_end - 1 + f, -5],
              [t.pathData.unp_end - 1 + 2 * f, 0],
              [t.pathData.unp_end - 1 + 3 * f, 5],
              [c[n + 1].pathData.unp_start - 1, 0]
             ],
             tooltipMsg: parseInt(o) + 1 + "-" + (c[n + 1].pathData.start.residue_number - 1) + " residues are not mapped to UniProt",
             pathData: t.pathData,
             color: [0, 0, 0]
            })
           }
         }
        }), u != c.length); d++);
       s.shapeContent.length > 0 && o.shapes.push(s), a.shapeContent.length > 0 && o.shapes.push(a)
      }
     })
    }), o
   }
  }]).filter("unpToPfamFilter", ["commonServices", function(e) {
   return function(t, n) {
    var r = {},
     i = {};
    if (!angular.isUndefined(t) && t && !angular.isUndefined(t.data) && t.data) {
     i = {
      shape: "text",
      shapeGroupClass: "pfamLabelGrp",
      shapeClass: "hideTextOnZoom pfam_text",
      shapeColour: void 0,
      shapeHeight: 15,
      marginTop: 2,
      showTooltip: !0,
      shapeContent: [],
      fitInPath: !0
     }, r = {
      shape: "path",
      shapeGroupClass: "pfamPathGrp",
      shapeClass: "pfamPath",
      shapeHeight: 30,
      showTooltip: !0,
      shapeContent: [],
      infoToolTipMsg: "This UniProt entry contains the following Pfam domain:"
     };
     var o = 0;
     angular.forEach(t.data[n].Pfam, function(t, n) {
      var a = t.mappings.length,
       s = " of " + t.name + " (" + n + ": " + t.description + ") mapping to residues ";
      angular.forEach(t.mappings, function(u, l) {
       l > 0 && (s += l === a - 1 ? " and" : ","), s += " " + u.unp_start + "-" + u.unp_end, r.shapeContent.push({
        pathRange: [
         [u.unp_start - 1, 0],
         [u.unp_end - 1, 0]
        ],
        pathData: {
         pfamId: n,
         pfamData: t
        },
        color: e.colorGradients.redStack[o],
        tooltipMsg: "<br><strong>" + n + "</strong><br>UniProt range: " + u.unp_start + "-" + u.unp_end + "<br>" + t.description,
        tooltipPosition: "postfix"
       }), i.shapeContent.push({
        textRange: [
         [u.unp_start + (u.unp_end - u.unp_start) / 2 - 1, 0],
         [-10, 0]
        ],
        textString: t.name,
        pathData: t,
        pathClassPrefix: "pfamPath",
        fitInPath: !0,
        tooltipMsg: "<br><strong>" + n + "</strong><br>UniProt range: " + u.unp_start + "-" + u.unp_end + "<br>" + t.description,
        tooltipPosition: "postfix",
        elementType: "Pfam"
       }), l === a - 1 && (s = 0 === l ? "<br> - one copy" + s : "<br> - " + a + " copies" + s), o++, o === e.colorGradients.redStack.length && (o = 0)
      }), r.infoToolTipMsg += s, s = ""
     })
    }
    return {
     shapes: [r, i]
    }
   }
  }])
 }(),
 function() {
  "use strict";
  angular.module("pdb.uniprot.viewer.services", ["pdb.common.services"]).service("uniprotViewerService", ["$http", "$q", "$filter", "commonServices", function(e, t, n, r) {
   this.getUnipdbData = function(n) {
    var i = t.defer(),
     o = "https://www.uniprot.org/uniprot/?query=accession:" + n + "&columns=id,sequence,entry%20name,protein%20names,organism,genes&format=tab&limit=1";
    return e.get(o).then(function(e) {
     var t = e.data.split("\n"),
      o = t[1].split("	"),
      a = {
       unipdbHeading: "",
       uniprotSeq: o[1].trim()
      },
      s = [3, 0, 2, 4, 5];
     s.forEach(function(e) {
      3 == e ? a.unipdbHeading += o[3].replace(/\(.*\)/g, "").trim() : 0 == e ? a.unipdbHeading += "<br><strong>" + o[0] + "</strong>" : 2 == e ? a.unipdbHeading += " " + o[2].trim() : 4 == e ? a.unipdbHeading += " " + o[4].replace(/\(.*\)/g, "").trim() : 5 == e && (a.unipdbHeading += " " + o[5].split(" ")[0].trim())
     });
     var u = ["mappings", "bestStructures", "uniProtToPfam"],
      l = r.createPromise([n], u);
     r.combinedDataGrabber(l, [n], u, !1).then(function(e) {
      null == e[0] && (window.console && console.log("Error : PDB API service request failed!"), i.reject("fail response"));
      var t = void 0;
      null != e[1] && (t = e[1].data[n]);
      var r = void 0;
      null != e[2] && (r = e[2]);
      var o = {
       uniprotId: n,
       unipdbHeading: a.unipdbHeading,
       uniprotSeq: a.uniprotSeq,
       pdbMappings: e[0].data[n].PDB,
       bestStrMappings: t,
       pfamApiData: r
      };
      i.resolve(o)
     }, function() {
      window.console && console.log("Error : PDB API service request failed!"), i.reject("fail response")
     })
    }, function() {
     window.console && console.log("Error : Uniprot API service request failed!"), i.reject("fail response")
    }), i.promise
   }
  }])
 }(), angular.module("template/sequenceView/uniPdb.html", []).run(["$templateCache", function(e) {
  e.put("template/sequenceView/uniPdb.html", '<div class="seqViewerWrapper" ng-style="styles.wrapper"><div ng-style="seqViewerOverlay" ng-show="overlayText != \'\'"><span ng-style="seqViewerOverlayMessage">{{overlayText}}</span></div><div class="unipdbHeader"><div class="headingTxt" ng-show="wrapperSize.width > 300"></div><div class="button-group" ng-show="showViewBtn"><ul><li><a ng-click="activeViewBtn = \'compact\'" ng-class="{\'active\' : activeViewBtn == \'compact\'}" title="Compact View" href="javascript:void(0);">Compact</a></li><li><a ng-click="activeViewBtn = \'expanded\'" ng-class="{\'active\' : activeViewBtn == \'expanded\'}" title="Expanded View" href="javascript:void(0);">Expanded</a></li></ul></div></div><div class="topSection" ng-style="styles.topSection"><div class="topLeftSection" ng-style="styles.leftSecStyle"><div class="unipdbMappingDesc">{{modelOptions.totalChains}} chains in {{modelOptions.totalEntries}} PDB entries map to this Uniprot accession.</div><div class="topLeftIconSection"><div class="uniprotHeadId" ng-style="styles.accWidth"><a title="Click to go to the UniProt page for this sequence" target="_blank" href="//www.uniprot.org/uniprot/{{modelOptions.seqId}}">{{modelOptions.seqId}}</a></div><div class="infoIconWarpper" ng-show="wrapperSize.width > 300"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/PinupIcons/Button-Details-icon.png" border="0" ng-mousemove="showTooltip(infoIconMsg[\'pfam\'], \'ng\', $event)" ng-mouseleave="hideTooltip()" /><a href="//www.uniprot.org/uniprot/{{modelOptions.seqId}}.txt" title="See the entry text file" target="_blank" style="margin-left:5px;"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/PinupIcons/Button-Download-icon.png" /></a></div></div></div><a class="SeqScrollArrow" ng-style="styles.scrollArrowLeft" href="javascript:void(0);" title="Scroll Left"><span ng-mouseup="stopMovingPan()" ng-mousemove="stopMovingPan()" ng-mousedown="movePan(50)" class="icon-black" data-icon="&lt;"></span></a><div class="topRightSection"><svg class="topSvg" ng-style="styles.topSvg"><g class="scaleGrp" transform="translate(10,25)"><g class="x axis"></g></g></svn></div><a class="SeqScrollArrow" ng-style="styles.scrollArrowRight" href="javascript:void(0);" title="Scroll Right"><span ng-mouseup="stopMovingPan()" ng-mousemove="stopMovingPan()" ng-mousedown="movePan(-50)" class="icon-black" data-icon="&gt;"></span></a></div><div class="bottomSection" ng-style="styles.bottomSection"><div class="bottomLeftSection" ng-style="styles.leftSecStyle"><div ng-repeat="msgPdbId in pdbIdArr" ng-style="{\'width\':\'100%\', \'text-align\':\'right\', \'margin-top\': $index == 0 ? printsMarginTop+\'px\' : \'6px\', \'height\': \'24px\', \'line-height\': \'24px\'}"><div class="leftPdbIdLabel"><a href="//www.ebi.ac.uk/pdbe/entry/pdb/{{msgPdbId}}/" target="_blank"  title="For more information about key features of entry {{msgPdbId}}, click on the individual icons.">{{msgPdbId}}</a></div><div class="pdbprints_{{msgPdbId}}"></div><div class="infoIconWarpper"> <img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/PinupIcons/Button-Details-icon.png" border="0" ng-mousemove="showTooltip(infoIconMsg[msgPdbId], \'ng\', $event)" ng-mouseleave="hideTooltip()" ng-show="wrapperSize.width > 300" /><a href="//www.ebi.ac.uk/pdbe-srv/view/files/{{msgPdbId}}.ent" title="See the entry text file" target="_blank" style="margin-left:5px;"><img ng-src="//www.ebi.ac.uk/pdbe/widgets/html/PinupIcons/Button-Download-icon.png" border="0" /></a></div></div></div><div class="bottomRightSection"><svg class="bottomSvg" ng-style="styles.bottomSvg" ><g class="shapesGrp" transform="translate(10,-21)"><rect class="seqSvgBg" x="0" y="0" fill="none" stroke="none" ng-style="styles.bottomSvg" ></rect></g></svg></div></div></div>')
 }]),
 function() {
  "use strict";
  angular.module("pdb.links", []).directive("pdbLinks", [function() {
   return {
    restrict: "EAC",
    scope: {
     pdbId: "@"
    },
    link: function(e, t) {
     var n = document.querySelector(".pcl-pdblinks-wrapper");
     null == n && (angular.element(document.querySelector("body")).append('<div class="pcl-pdblinks-wrapper"></div>'), n = document.querySelector(".pcl-pdblinks-wrapper"));
     var r = angular.element(n),
      i = '<img onclick="angular.element(this).parent().css(\'display\',\'none\');" class="pcl-pdblinks-cross-icon-abs" src="//www.ebi.ac.uk/pdbe/pdb-component-library/images/cross.png"><a class="pcl-pdblinks-logo-text-a" style="margin-top:5px" target="_blank" href="http://www.ebi.ac.uk/pdbe/entry/pdb/' + e.pdbId + '"><img class="pcl-pdblinks-logo-img" src="//www.ebi.ac.uk/pdbe/pdb-component-library/images/PDBe-logo.png">&nbsp;&nbsp;PDBe</a><br><a class="pcl-pdblinks-logo-text-a" target="_blank" href="http://pdbj.org/mine/summary/' + e.pdbId + '"><img class="pcl-pdblinks-logo-img" src="//www.ebi.ac.uk/pdbe/pdb-component-library/images/PDBj-logo.png">&nbsp;&nbsp;PDBj</a><br><a class="pcl-pdblinks-logo-text-a" target="_blank" href="http://www.rcsb.org/pdb/explore.do?structureId=' + e.pdbId + '"><img style="height:32px;vertical-align:middle;" src="//www.ebi.ac.uk/pdbe/pdb-component-library/images/RCSB-PDB-logo.png">&nbsp;&nbsp;RCSB</a>',
      o = function(e) {
       r.html(i);
       var t = e.pageX,
        n = e.pageY;
       r.css("display", "block"), r.css("top", n + 5 + "px"), r.css("left", t + "px")
      };
     t.bind("click", o)
    }
   }
  }])
 }(), angular.module("pdb.component.library.tpls", ["template/prints/pdbLogos.html", "template/sequenceView/pdb.html", "template/sequenceView/uniPdb.html", "template/pdbRedo/pdbRedo.html", "template/topologyViewer/topologyViewer.html", "template/pdbResidueInteractions/pdbResidueInteractions.html", "template/pdb3dComplex/pdb3dComplex.html", "template/sequenceView/tempUniPdb.html"]), angular.module("pdb.component.library", ["pdb.component.library.tpls", "pdb.litemol", "pdb.prints", "pdb.sequence.viewer", "pdb.uniprot.viewer", "pdb.redo", "pdb.topology.viewer", "pdb.residue.interactions", "pdb.links", "pdb.3dComplex"]);
