{% load static %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

 <script>


</script>
<script src="{% static "alignments/vue.js" %}">

</script>

<div class="container">
	<h4>Vue.js Expandable Tree Menu<br/><small>(Recursive Components)</small></h4>
	<div id="app">
	<tree-menu 
			   :nodes="tree.nodes" 
			   :depth="0"   
			   :label="tree.label"
			   ></tree-menu>
	</div>
  </div>
  
  
  <script type="text/x-template" id="tree-menu">
	<div class="tree-menu">
	  <div class="label-wrapper" @click="toggleChildren">
		<div :style="indent" :class="labelClasses">
			<i v-for="node in nodes" class="fa" :class="iconClasses"></i>
			[[label]]
		</div>
	  </div>
	  <tree-menu 
		v-if="showChildren"
		v-for="node in nodes"
		v-bind:key="node.id"
		:nodes="node.nodes" 
		:label="node.label"
		:depth="depth + 1"   
	  >
	  </tree-menu>
	</div>
  </script>

<script src={% static 'alignments/tree_menu.js' %}>
var tree;

$.ajax({
    url: '/alignments/showTaxonomy',
    type: "GET",
	dataType: "json",
	// data: JSON.stringify(data),
    success: function (data) {
		console.log(data);
		tree = JSON.stringify(data);
		console.log(tree)
    },
    error: function (error) {
        console.log(`Error ${error}`);
    }
});
console.log('Blah blah: ', tree);
</script>

<p>OR</p> 

<select onchange="location = this.value;">
	<option value="">Select an alignment</option>
	{% for aln in some_Alignments %}
		{%if 'LSU' not in aln.name%}
			<option value="{% url 'alignments:detail' aln.name %}">{{ aln.name }}</option>
		{% endif %}
	{% endfor %}
</select>

<p>OR</p>

<select onchange="location = this.value;">
	<option value="">Select an rRNA alignment</option>
	{% for aln in some_Alignments %}
		{%if 'LSU' in aln.name%}
			<option value="{% url 'alignments:rRNA' aln.name %}">{{ aln.name }}</option>
		{% endif %}
	{% endfor %}
</select>


<!-- OLD CODE
{% if some_Alignments %}
	<ul>
	{% for aln in some_Alignments %}
		<li><a href="{% url 'alignments:detail' aln.aln_id %}">{{ aln.name }}</a></li>
	{% endfor %}
	</ul>
{% else %}
	<p>No alignments are available.</p>
{% endif %}
-->

